(function(){const Z=document.createElement("link").relList;if(Z&&Z.supports&&Z.supports("modulepreload"))return;for(const we of document.querySelectorAll('link[rel="modulepreload"]'))pe(we);new MutationObserver(we=>{for(const Ze of we)if(Ze.type==="childList")for(const Ee of Ze.addedNodes)Ee.tagName==="LINK"&&Ee.rel==="modulepreload"&&pe(Ee)}).observe(document,{childList:!0,subtree:!0});function te(we){const Ze={};return we.integrity&&(Ze.integrity=we.integrity),we.referrerPolicy&&(Ze.referrerPolicy=we.referrerPolicy),we.crossOrigin==="use-credentials"?Ze.credentials="include":we.crossOrigin==="anonymous"?Ze.credentials="omit":Ze.credentials="same-origin",Ze}function pe(we){if(we.ep)return;we.ep=!0;const Ze=te(we);fetch(we.href,Ze)}})();function Lv(D,Z){const te=Object.create(null),pe=D.split(",");for(let we=0;we<pe.length;we++)te[pe[we]]=!0;return Z?we=>!!te[we.toLowerCase()]:we=>!!te[we]}const ja={},xc=[],Ls=()=>{},BA=()=>!1,jA=/^on[^a-z]/,Pp=D=>jA.test(D),Mv=D=>D.startsWith("onUpdate:"),Eo=Object.assign,Fv=(D,Z)=>{const te=D.indexOf(Z);te>-1&&D.splice(te,1)},GA=Object.prototype.hasOwnProperty,la=(D,Z)=>GA.call(D,Z),mi=Array.isArray,Lc=D=>Np(D)==="[object Map]",f1=D=>Np(D)==="[object Set]",Pi=D=>typeof D=="function",lo=D=>typeof D=="string",Uv=D=>typeof D=="symbol",Ga=D=>D!==null&&typeof D=="object",d1=D=>Ga(D)&&Pi(D.then)&&Pi(D.catch),h1=Object.prototype.toString,Np=D=>h1.call(D),HA=D=>Np(D).slice(8,-1),p1=D=>Np(D)==="[object Object]",Bv=D=>lo(D)&&D!=="NaN"&&D[0]!=="-"&&""+parseInt(D,10)===D,yp=Lv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xp=D=>{const Z=Object.create(null);return te=>Z[te]||(Z[te]=D(te))},VA=/-(\w)/g,eu=xp(D=>D.replace(VA,(Z,te)=>te?te.toUpperCase():"")),ZA=/\B([A-Z])/g,Vc=xp(D=>D.replace(ZA,"-$1").toLowerCase()),Lp=xp(D=>D.charAt(0).toUpperCase()+D.slice(1)),Qm=xp(D=>D?`on${Lp(D)}`:""),ed=(D,Z)=>!Object.is(D,Z),$m=(D,Z)=>{for(let te=0;te<D.length;te++)D[te](Z)},Sp=(D,Z,te)=>{Object.defineProperty(D,Z,{configurable:!0,enumerable:!1,value:te})},KA=D=>{const Z=parseFloat(D);return isNaN(Z)?D:Z};let sT;const lv=()=>sT||(sT=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jv(D){if(mi(D)){const Z={};for(let te=0;te<D.length;te++){const pe=D[te],we=lo(pe)?WA(pe):jv(pe);if(we)for(const Ze in we)Z[Ze]=we[Ze]}return Z}else{if(lo(D))return D;if(Ga(D))return D}}const qA=/;(?![^(]*\))/g,YA=/:([^]+)/,zA=/\/\*[^]*?\*\//g;function WA(D){const Z={};return D.replace(zA,"").split(qA).forEach(te=>{if(te){const pe=te.split(YA);pe.length>1&&(Z[pe[0].trim()]=pe[1].trim())}}),Z}function Mp(D){let Z="";if(lo(D))Z=D;else if(mi(D))for(let te=0;te<D.length;te++){const pe=Mp(D[te]);pe&&(Z+=pe+" ")}else if(Ga(D))for(const te in D)D[te]&&(Z+=te+" ");return Z.trim()}const XA="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",QA=Lv(XA);function g1(D){return!!D||D===""}const Mc=D=>lo(D)?D:D==null?"":mi(D)||Ga(D)&&(D.toString===h1||!Pi(D.toString))?JSON.stringify(D,m1,2):String(D),m1=(D,Z)=>Z&&Z.__v_isRef?m1(D,Z.value):Lc(Z)?{[`Map(${Z.size})`]:[...Z.entries()].reduce((te,[pe,we])=>(te[`${pe} =>`]=we,te),{})}:f1(Z)?{[`Set(${Z.size})`]:[...Z.values()]}:Ga(Z)&&!mi(Z)&&!p1(Z)?String(Z):Z;let $o;class v1{constructor(Z=!1){this.detached=Z,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$o,!Z&&$o&&(this.index=($o.scopes||($o.scopes=[])).push(this)-1)}get active(){return this._active}run(Z){if(this._active){const te=$o;try{return $o=this,Z()}finally{$o=te}}}on(){$o=this}off(){$o=this.parent}stop(Z){if(this._active){let te,pe;for(te=0,pe=this.effects.length;te<pe;te++)this.effects[te].stop();for(te=0,pe=this.cleanups.length;te<pe;te++)this.cleanups[te]();if(this.scopes)for(te=0,pe=this.scopes.length;te<pe;te++)this.scopes[te].stop(!0);if(!this.detached&&this.parent&&!Z){const we=this.parent.scopes.pop();we&&we!==this&&(this.parent.scopes[this.index]=we,we.index=this.index)}this.parent=void 0,this._active=!1}}}function y1(D){return new v1(D)}function $A(D,Z=$o){Z&&Z.active&&Z.effects.push(D)}function E1(){return $o}function JA(D){$o&&$o.cleanups.push(D)}const Gv=D=>{const Z=new Set(D);return Z.w=0,Z.n=0,Z},b1=D=>(D.w&tl)>0,T1=D=>(D.n&tl)>0,ew=({deps:D})=>{if(D.length)for(let Z=0;Z<D.length;Z++)D[Z].w|=tl},tw=D=>{const{deps:Z}=D;if(Z.length){let te=0;for(let pe=0;pe<Z.length;pe++){const we=Z[pe];b1(we)&&!T1(we)?we.delete(D):Z[te++]=we,we.w&=~tl,we.n&=~tl}Z.length=te}},Ap=new WeakMap;let Zf=0,tl=1;const cv=30;let Ps;const Ul=Symbol(""),fv=Symbol("");class Hv{constructor(Z,te=null,pe){this.fn=Z,this.scheduler=te,this.active=!0,this.deps=[],this.parent=void 0,$A(this,pe)}run(){if(!this.active)return this.fn();let Z=Ps,te=$u;for(;Z;){if(Z===this)return;Z=Z.parent}try{return this.parent=Ps,Ps=this,$u=!0,tl=1<<++Zf,Zf<=cv?ew(this):uT(this),this.fn()}finally{Zf<=cv&&tw(this),tl=1<<--Zf,Ps=this.parent,$u=te,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ps===this?this.deferStop=!0:this.active&&(uT(this),this.onStop&&this.onStop(),this.active=!1)}}function uT(D){const{deps:Z}=D;if(Z.length){for(let te=0;te<Z.length;te++)Z[te].delete(D);Z.length=0}}let $u=!0;const _1=[];function Zc(){_1.push($u),$u=!1}function Kc(){const D=_1.pop();$u=D===void 0?!0:D}function Ko(D,Z,te){if($u&&Ps){let pe=Ap.get(D);pe||Ap.set(D,pe=new Map);let we=pe.get(te);we||pe.set(te,we=Gv()),S1(we)}}function S1(D,Z){let te=!1;Zf<=cv?T1(D)||(D.n|=tl,te=!b1(D)):te=!D.has(Ps),te&&(D.add(Ps),Ps.deps.push(D))}function Tu(D,Z,te,pe,we,Ze){const Ee=Ap.get(D);if(!Ee)return;let B=[];if(Z==="clear")B=[...Ee.values()];else if(te==="length"&&mi(D)){const K=Number(pe);Ee.forEach((M,x)=>{(x==="length"||x>=K)&&B.push(M)})}else switch(te!==void 0&&B.push(Ee.get(te)),Z){case"add":mi(D)?Bv(te)&&B.push(Ee.get("length")):(B.push(Ee.get(Ul)),Lc(D)&&B.push(Ee.get(fv)));break;case"delete":mi(D)||(B.push(Ee.get(Ul)),Lc(D)&&B.push(Ee.get(fv)));break;case"set":Lc(D)&&B.push(Ee.get(Ul));break}if(B.length===1)B[0]&&dv(B[0]);else{const K=[];for(const M of B)M&&K.push(...M);dv(Gv(K))}}function dv(D,Z){const te=mi(D)?D:[...D];for(const pe of te)pe.computed&&lT(pe);for(const pe of te)pe.computed||lT(pe)}function lT(D,Z){(D!==Ps||D.allowRecurse)&&(D.scheduler?D.scheduler():D.run())}function nw(D,Z){var te;return(te=Ap.get(D))==null?void 0:te.get(Z)}const rw=Lv("__proto__,__v_isRef,__isVue"),A1=new Set(Object.getOwnPropertyNames(Symbol).filter(D=>D!=="arguments"&&D!=="caller").map(D=>Symbol[D]).filter(Uv)),iw=Vv(),aw=Vv(!1,!0),ow=Vv(!0),cT=sw();function sw(){const D={};return["includes","indexOf","lastIndexOf"].forEach(Z=>{D[Z]=function(...te){const pe=ca(this);for(let Ze=0,Ee=this.length;Ze<Ee;Ze++)Ko(pe,"get",Ze+"");const we=pe[Z](...te);return we===-1||we===!1?pe[Z](...te.map(ca)):we}}),["push","pop","shift","unshift","splice"].forEach(Z=>{D[Z]=function(...te){Zc();const pe=ca(this)[Z].apply(this,te);return Kc(),pe}}),D}function uw(D){const Z=ca(this);return Ko(Z,"has",D),Z.hasOwnProperty(D)}function Vv(D=!1,Z=!1){return function(pe,we,Ze){if(we==="__v_isReactive")return!D;if(we==="__v_isReadonly")return D;if(we==="__v_isShallow")return Z;if(we==="__v_raw"&&Ze===(D?Z?Aw:k1:Z?C1:R1).get(pe))return pe;const Ee=mi(pe);if(!D){if(Ee&&la(cT,we))return Reflect.get(cT,we,Ze);if(we==="hasOwnProperty")return uw}const B=Reflect.get(pe,we,Ze);return(Uv(we)?A1.has(we):rw(we))||(D||Ko(pe,"get",we),Z)?B:eo(B)?Ee&&Bv(we)?B:B.value:Ga(B)?D?O1(B):Vl(B):B}}const lw=w1(),cw=w1(!0);function w1(D=!1){return function(te,pe,we,Ze){let Ee=te[pe];if(Bc(Ee)&&eo(Ee)&&!eo(we))return!1;if(!D&&(!wp(we)&&!Bc(we)&&(Ee=ca(Ee),we=ca(we)),!mi(te)&&eo(Ee)&&!eo(we)))return Ee.value=we,!0;const B=mi(te)&&Bv(pe)?Number(pe)<te.length:la(te,pe),K=Reflect.set(te,pe,we,Ze);return te===ca(Ze)&&(B?ed(we,Ee)&&Tu(te,"set",pe,we):Tu(te,"add",pe,we)),K}}function fw(D,Z){const te=la(D,Z);D[Z];const pe=Reflect.deleteProperty(D,Z);return pe&&te&&Tu(D,"delete",Z,void 0),pe}function dw(D,Z){const te=Reflect.has(D,Z);return(!Uv(Z)||!A1.has(Z))&&Ko(D,"has",Z),te}function hw(D){return Ko(D,"iterate",mi(D)?"length":Ul),Reflect.ownKeys(D)}const I1={get:iw,set:lw,deleteProperty:fw,has:dw,ownKeys:hw},pw={get:ow,set(D,Z){return!0},deleteProperty(D,Z){return!0}},gw=Eo({},I1,{get:aw,set:cw}),Zv=D=>D,Fp=D=>Reflect.getPrototypeOf(D);function np(D,Z,te=!1,pe=!1){D=D.__v_raw;const we=ca(D),Ze=ca(Z);te||(Z!==Ze&&Ko(we,"get",Z),Ko(we,"get",Ze));const{has:Ee}=Fp(we),B=pe?Zv:te?Yv:td;if(Ee.call(we,Z))return B(D.get(Z));if(Ee.call(we,Ze))return B(D.get(Ze));D!==we&&D.get(Z)}function rp(D,Z=!1){const te=this.__v_raw,pe=ca(te),we=ca(D);return Z||(D!==we&&Ko(pe,"has",D),Ko(pe,"has",we)),D===we?te.has(D):te.has(D)||te.has(we)}function ip(D,Z=!1){return D=D.__v_raw,!Z&&Ko(ca(D),"iterate",Ul),Reflect.get(D,"size",D)}function fT(D){D=ca(D);const Z=ca(this);return Fp(Z).has.call(Z,D)||(Z.add(D),Tu(Z,"add",D,D)),this}function dT(D,Z){Z=ca(Z);const te=ca(this),{has:pe,get:we}=Fp(te);let Ze=pe.call(te,D);Ze||(D=ca(D),Ze=pe.call(te,D));const Ee=we.call(te,D);return te.set(D,Z),Ze?ed(Z,Ee)&&Tu(te,"set",D,Z):Tu(te,"add",D,Z),this}function hT(D){const Z=ca(this),{has:te,get:pe}=Fp(Z);let we=te.call(Z,D);we||(D=ca(D),we=te.call(Z,D)),pe&&pe.call(Z,D);const Ze=Z.delete(D);return we&&Tu(Z,"delete",D,void 0),Ze}function pT(){const D=ca(this),Z=D.size!==0,te=D.clear();return Z&&Tu(D,"clear",void 0,void 0),te}function ap(D,Z){return function(pe,we){const Ze=this,Ee=Ze.__v_raw,B=ca(Ee),K=Z?Zv:D?Yv:td;return!D&&Ko(B,"iterate",Ul),Ee.forEach((M,x)=>pe.call(we,K(M),K(x),Ze))}}function op(D,Z,te){return function(...pe){const we=this.__v_raw,Ze=ca(we),Ee=Lc(Ze),B=D==="entries"||D===Symbol.iterator&&Ee,K=D==="keys"&&Ee,M=we[D](...pe),x=te?Zv:Z?Yv:td;return!Z&&Ko(Ze,"iterate",K?fv:Ul),{next(){const{value:N,done:C}=M.next();return C?{value:N,done:C}:{value:B?[x(N[0]),x(N[1])]:x(N),done:C}},[Symbol.iterator](){return this}}}}function qu(D){return function(...Z){return D==="delete"?!1:this}}function mw(){const D={get(Ze){return np(this,Ze)},get size(){return ip(this)},has:rp,add:fT,set:dT,delete:hT,clear:pT,forEach:ap(!1,!1)},Z={get(Ze){return np(this,Ze,!1,!0)},get size(){return ip(this)},has:rp,add:fT,set:dT,delete:hT,clear:pT,forEach:ap(!1,!0)},te={get(Ze){return np(this,Ze,!0)},get size(){return ip(this,!0)},has(Ze){return rp.call(this,Ze,!0)},add:qu("add"),set:qu("set"),delete:qu("delete"),clear:qu("clear"),forEach:ap(!0,!1)},pe={get(Ze){return np(this,Ze,!0,!0)},get size(){return ip(this,!0)},has(Ze){return rp.call(this,Ze,!0)},add:qu("add"),set:qu("set"),delete:qu("delete"),clear:qu("clear"),forEach:ap(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(Ze=>{D[Ze]=op(Ze,!1,!1),te[Ze]=op(Ze,!0,!1),Z[Ze]=op(Ze,!1,!0),pe[Ze]=op(Ze,!0,!0)}),[D,te,Z,pe]}const[vw,yw,Ew,bw]=mw();function Kv(D,Z){const te=Z?D?bw:Ew:D?yw:vw;return(pe,we,Ze)=>we==="__v_isReactive"?!D:we==="__v_isReadonly"?D:we==="__v_raw"?pe:Reflect.get(la(te,we)&&we in pe?te:pe,we,Ze)}const Tw={get:Kv(!1,!1)},_w={get:Kv(!1,!0)},Sw={get:Kv(!0,!1)},R1=new WeakMap,C1=new WeakMap,k1=new WeakMap,Aw=new WeakMap;function ww(D){switch(D){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Iw(D){return D.__v_skip||!Object.isExtensible(D)?0:ww(HA(D))}function Vl(D){return Bc(D)?D:qv(D,!1,I1,Tw,R1)}function Rw(D){return qv(D,!1,gw,_w,C1)}function O1(D){return qv(D,!0,pw,Sw,k1)}function qv(D,Z,te,pe,we){if(!Ga(D)||D.__v_raw&&!(Z&&D.__v_isReactive))return D;const Ze=we.get(D);if(Ze)return Ze;const Ee=Iw(D);if(Ee===0)return D;const B=new Proxy(D,Ee===2?pe:te);return we.set(D,B),B}function Ju(D){return Bc(D)?Ju(D.__v_raw):!!(D&&D.__v_isReactive)}function Bc(D){return!!(D&&D.__v_isReadonly)}function wp(D){return!!(D&&D.__v_isShallow)}function D1(D){return Ju(D)||Bc(D)}function ca(D){const Z=D&&D.__v_raw;return Z?ca(Z):D}function Up(D){return Sp(D,"__v_skip",!0),D}const td=D=>Ga(D)?Vl(D):D,Yv=D=>Ga(D)?O1(D):D;function P1(D){$u&&Ps&&(D=ca(D),S1(D.dep||(D.dep=Gv())))}function N1(D,Z){D=ca(D);const te=D.dep;te&&dv(te)}function eo(D){return!!(D&&D.__v_isRef===!0)}function x1(D){return Cw(D,!1)}function Cw(D,Z){return eo(D)?D:new kw(D,Z)}class kw{constructor(Z,te){this.__v_isShallow=te,this.dep=void 0,this.__v_isRef=!0,this._rawValue=te?Z:ca(Z),this._value=te?Z:td(Z)}get value(){return P1(this),this._value}set value(Z){const te=this.__v_isShallow||wp(Z)||Bc(Z);Z=te?Z:ca(Z),ed(Z,this._rawValue)&&(this._rawValue=Z,this._value=te?Z:td(Z),N1(this))}}function Ow(D){return eo(D)?D.value:D}const Dw={get:(D,Z,te)=>Ow(Reflect.get(D,Z,te)),set:(D,Z,te,pe)=>{const we=D[Z];return eo(we)&&!eo(te)?(we.value=te,!0):Reflect.set(D,Z,te,pe)}};function L1(D){return Ju(D)?D:new Proxy(D,Dw)}function Pw(D){const Z=mi(D)?new Array(D.length):{};for(const te in D)Z[te]=xw(D,te);return Z}class Nw{constructor(Z,te,pe){this._object=Z,this._key=te,this._defaultValue=pe,this.__v_isRef=!0}get value(){const Z=this._object[this._key];return Z===void 0?this._defaultValue:Z}set value(Z){this._object[this._key]=Z}get dep(){return nw(ca(this._object),this._key)}}function xw(D,Z,te){const pe=D[Z];return eo(pe)?pe:new Nw(D,Z,te)}class Lw{constructor(Z,te,pe,we){this._setter=te,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Hv(Z,()=>{this._dirty||(this._dirty=!0,N1(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!we,this.__v_isReadonly=pe}get value(){const Z=ca(this);return P1(Z),(Z._dirty||!Z._cacheable)&&(Z._dirty=!1,Z._value=Z.effect.run()),Z._value}set value(Z){this._setter(Z)}}function Mw(D,Z,te=!1){let pe,we;const Ze=Pi(D);return Ze?(pe=D,we=Ls):(pe=D.get,we=D.set),new Lw(pe,we,Ze||!we,te)}function el(D,Z,te,pe){let we;try{we=pe?D(...pe):D()}catch(Ze){Bp(Ze,Z,te)}return we}function Ms(D,Z,te,pe){if(Pi(D)){const Ze=el(D,Z,te,pe);return Ze&&d1(Ze)&&Ze.catch(Ee=>{Bp(Ee,Z,te)}),Ze}const we=[];for(let Ze=0;Ze<D.length;Ze++)we.push(Ms(D[Ze],Z,te,pe));return we}function Bp(D,Z,te,pe=!0){const we=Z?Z.vnode:null;if(Z){let Ze=Z.parent;const Ee=Z.proxy,B=te;for(;Ze;){const M=Ze.ec;if(M){for(let x=0;x<M.length;x++)if(M[x](D,Ee,B)===!1)return}Ze=Ze.parent}const K=Z.appContext.config.errorHandler;if(K){el(K,null,10,[D,Ee,B]);return}}Fw(D,te,we,pe)}function Fw(D,Z,te,pe=!0){console.error(D)}let nd=!1,hv=!1;const Po=[];let $s=0;const Fc=[];let yu=null,xl=0;const M1=Promise.resolve();let zv=null;function F1(D){const Z=zv||M1;return D?Z.then(this?D.bind(this):D):Z}function Uw(D){let Z=$s+1,te=Po.length;for(;Z<te;){const pe=Z+te>>>1;rd(Po[pe])<D?Z=pe+1:te=pe}return Z}function Wv(D){(!Po.length||!Po.includes(D,nd&&D.allowRecurse?$s+1:$s))&&(D.id==null?Po.push(D):Po.splice(Uw(D.id),0,D),U1())}function U1(){!nd&&!hv&&(hv=!0,zv=M1.then(j1))}function Bw(D){const Z=Po.indexOf(D);Z>$s&&Po.splice(Z,1)}function jw(D){mi(D)?Fc.push(...D):(!yu||!yu.includes(D,D.allowRecurse?xl+1:xl))&&Fc.push(D),U1()}function gT(D,Z=nd?$s+1:0){for(;Z<Po.length;Z++){const te=Po[Z];te&&te.pre&&(Po.splice(Z,1),Z--,te())}}function B1(D){if(Fc.length){const Z=[...new Set(Fc)];if(Fc.length=0,yu){yu.push(...Z);return}for(yu=Z,yu.sort((te,pe)=>rd(te)-rd(pe)),xl=0;xl<yu.length;xl++)yu[xl]();yu=null,xl=0}}const rd=D=>D.id==null?1/0:D.id,Gw=(D,Z)=>{const te=rd(D)-rd(Z);if(te===0){if(D.pre&&!Z.pre)return-1;if(Z.pre&&!D.pre)return 1}return te};function j1(D){hv=!1,nd=!0,Po.sort(Gw);const Z=Ls;try{for($s=0;$s<Po.length;$s++){const te=Po[$s];te&&te.active!==!1&&el(te,null,14)}}finally{$s=0,Po.length=0,B1(),nd=!1,zv=null,(Po.length||Fc.length)&&j1()}}function Hw(D,Z,...te){if(D.isUnmounted)return;const pe=D.vnode.props||ja;let we=te;const Ze=Z.startsWith("update:"),Ee=Ze&&Z.slice(7);if(Ee&&Ee in pe){const x=`${Ee==="modelValue"?"model":Ee}Modifiers`,{number:N,trim:C}=pe[x]||ja;C&&(we=te.map(R=>lo(R)?R.trim():R)),N&&(we=te.map(KA))}let B,K=pe[B=Qm(Z)]||pe[B=Qm(eu(Z))];!K&&Ze&&(K=pe[B=Qm(Vc(Z))]),K&&Ms(K,D,6,we);const M=pe[B+"Once"];if(M){if(!D.emitted)D.emitted={};else if(D.emitted[B])return;D.emitted[B]=!0,Ms(M,D,6,we)}}function G1(D,Z,te=!1){const pe=Z.emitsCache,we=pe.get(D);if(we!==void 0)return we;const Ze=D.emits;let Ee={},B=!1;if(!Pi(D)){const K=M=>{const x=G1(M,Z,!0);x&&(B=!0,Eo(Ee,x))};!te&&Z.mixins.length&&Z.mixins.forEach(K),D.extends&&K(D.extends),D.mixins&&D.mixins.forEach(K)}return!Ze&&!B?(Ga(D)&&pe.set(D,null),null):(mi(Ze)?Ze.forEach(K=>Ee[K]=null):Eo(Ee,Ze),Ga(D)&&pe.set(D,Ee),Ee)}function jp(D,Z){return!D||!Pp(Z)?!1:(Z=Z.slice(2).replace(/Once$/,""),la(D,Z[0].toLowerCase()+Z.slice(1))||la(D,Vc(Z))||la(D,Z))}let hs=null,H1=null;function Ip(D){const Z=hs;return hs=D,H1=D&&D.type.__scopeId||null,Z}function Vw(D,Z=hs,te){if(!Z||D._n)return D;const pe=(...we)=>{pe._d&&IT(-1);const Ze=Ip(Z);let Ee;try{Ee=D(...we)}finally{Ip(Ze),pe._d&&IT(1)}return Ee};return pe._n=!0,pe._c=!0,pe._d=!0,pe}function Jm(D){const{type:Z,vnode:te,proxy:pe,withProxy:we,props:Ze,propsOptions:[Ee],slots:B,attrs:K,emit:M,render:x,renderCache:N,data:C,setupState:R,ctx:I,inheritAttrs:E}=D;let T,l;const c=Ip(D);try{if(te.shapeFlag&4){const y=we||pe;T=Qs(x.call(y,y,N,Ze,R,C,I)),l=K}else{const y=Z;T=Qs(y.length>1?y(Ze,{attrs:K,slots:B,emit:M}):y(Ze,null)),l=Z.props?K:Zw(K)}}catch(y){Xf.length=0,Bp(y,D,1),T=Va(jl)}let h=T;if(l&&E!==!1){const y=Object.keys(l),{shapeFlag:i}=h;y.length&&i&7&&(Ee&&y.some(Mv)&&(l=Kw(l,Ee)),h=jc(h,l))}return te.dirs&&(h=jc(h),h.dirs=h.dirs?h.dirs.concat(te.dirs):te.dirs),te.transition&&(h.transition=te.transition),T=h,Ip(c),T}const Zw=D=>{let Z;for(const te in D)(te==="class"||te==="style"||Pp(te))&&((Z||(Z={}))[te]=D[te]);return Z},Kw=(D,Z)=>{const te={};for(const pe in D)(!Mv(pe)||!(pe.slice(9)in Z))&&(te[pe]=D[pe]);return te};function qw(D,Z,te){const{props:pe,children:we,component:Ze}=D,{props:Ee,children:B,patchFlag:K}=Z,M=Ze.emitsOptions;if(Z.dirs||Z.transition)return!0;if(te&&K>=0){if(K&1024)return!0;if(K&16)return pe?mT(pe,Ee,M):!!Ee;if(K&8){const x=Z.dynamicProps;for(let N=0;N<x.length;N++){const C=x[N];if(Ee[C]!==pe[C]&&!jp(M,C))return!0}}}else return(we||B)&&(!B||!B.$stable)?!0:pe===Ee?!1:pe?Ee?mT(pe,Ee,M):!0:!!Ee;return!1}function mT(D,Z,te){const pe=Object.keys(Z);if(pe.length!==Object.keys(D).length)return!0;for(let we=0;we<pe.length;we++){const Ze=pe[we];if(Z[Ze]!==D[Ze]&&!jp(te,Ze))return!0}return!1}function Yw({vnode:D,parent:Z},te){for(;Z&&Z.subTree===D;)(D=Z.vnode).el=te,Z=Z.parent}const zw=D=>D.__isSuspense;function Ww(D,Z){Z&&Z.pendingBranch?mi(D)?Z.effects.push(...D):Z.effects.push(D):jw(D)}const sp={};function Yf(D,Z,te){return V1(D,Z,te)}function V1(D,Z,{immediate:te,deep:pe,flush:we,onTrack:Ze,onTrigger:Ee}=ja){var B;const K=E1()===((B=yo)==null?void 0:B.scope)?yo:null;let M,x=!1,N=!1;if(eo(D)?(M=()=>D.value,x=wp(D)):Ju(D)?(M=()=>D,pe=!0):mi(D)?(N=!0,x=D.some(y=>Ju(y)||wp(y)),M=()=>D.map(y=>{if(eo(y))return y.value;if(Ju(y))return Dc(y);if(Pi(y))return el(y,K,2)})):Pi(D)?Z?M=()=>el(D,K,2):M=()=>{if(!(K&&K.isUnmounted))return C&&C(),Ms(D,K,3,[R])}:M=Ls,Z&&pe){const y=M;M=()=>Dc(y())}let C,R=y=>{C=c.onStop=()=>{el(y,K,4)}},I;if(od)if(R=Ls,Z?te&&Ms(Z,K,3,[M(),N?[]:void 0,R]):M(),we==="sync"){const y=YI();I=y.__watcherHandles||(y.__watcherHandles=[])}else return Ls;let E=N?new Array(D.length).fill(sp):sp;const T=()=>{if(c.active)if(Z){const y=c.run();(pe||x||(N?y.some((i,g)=>ed(i,E[g])):ed(y,E)))&&(C&&C(),Ms(Z,K,3,[y,E===sp?void 0:N&&E[0]===sp?[]:E,R]),E=y)}else c.run()};T.allowRecurse=!!Z;let l;we==="sync"?l=T:we==="post"?l=()=>Zo(T,K&&K.suspense):(T.pre=!0,K&&(T.id=K.uid),l=()=>Wv(T));const c=new Hv(M,l);Z?te?T():E=c.run():we==="post"?Zo(c.run.bind(c),K&&K.suspense):c.run();const h=()=>{c.stop(),K&&K.scope&&Fv(K.scope.effects,c)};return I&&I.push(h),h}function Xw(D,Z,te){const pe=this.proxy,we=lo(D)?D.includes(".")?Z1(pe,D):()=>pe[D]:D.bind(pe,pe);let Ze;Pi(Z)?Ze=Z:(Ze=Z.handler,te=Z);const Ee=yo;Gc(this);const B=V1(we,Ze.bind(pe),te);return Ee?Gc(Ee):Bl(),B}function Z1(D,Z){const te=Z.split(".");return()=>{let pe=D;for(let we=0;we<te.length&&pe;we++)pe=pe[te[we]];return pe}}function Dc(D,Z){if(!Ga(D)||D.__v_skip||(Z=Z||new Set,Z.has(D)))return D;if(Z.add(D),eo(D))Dc(D.value,Z);else if(mi(D))for(let te=0;te<D.length;te++)Dc(D[te],Z);else if(f1(D)||Lc(D))D.forEach(te=>{Dc(te,Z)});else if(p1(D))for(const te in D)Dc(D[te],Z);return D}function Pl(D,Z,te,pe){const we=D.dirs,Ze=Z&&Z.dirs;for(let Ee=0;Ee<we.length;Ee++){const B=we[Ee];Ze&&(B.oldValue=Ze[Ee].value);let K=B.dir[pe];K&&(Zc(),Ms(K,te,8,[D.el,B,D,Z]),Kc())}}function Qw(D,Z){return Pi(D)?(()=>Eo({name:D.name},Z,{setup:D}))():D}const Ep=D=>!!D.type.__asyncLoader,K1=D=>D.type.__isKeepAlive;function $w(D,Z){q1(D,"a",Z)}function Jw(D,Z){q1(D,"da",Z)}function q1(D,Z,te=yo){const pe=D.__wdc||(D.__wdc=()=>{let we=te;for(;we;){if(we.isDeactivated)return;we=we.parent}return D()});if(Gp(Z,pe,te),te){let we=te.parent;for(;we&&we.parent;)K1(we.parent.vnode)&&eI(pe,Z,te,we),we=we.parent}}function eI(D,Z,te,pe){const we=Gp(Z,D,pe,!0);z1(()=>{Fv(pe[Z],we)},te)}function Gp(D,Z,te=yo,pe=!1){if(te){const we=te[D]||(te[D]=[]),Ze=Z.__weh||(Z.__weh=(...Ee)=>{if(te.isUnmounted)return;Zc(),Gc(te);const B=Ms(Z,te,D,Ee);return Bl(),Kc(),B});return pe?we.unshift(Ze):we.push(Ze),Ze}}const wu=D=>(Z,te=yo)=>(!od||D==="sp")&&Gp(D,(...pe)=>Z(...pe),te),Y1=wu("bm"),Hp=wu("m"),tI=wu("bu"),nI=wu("u"),rI=wu("bum"),z1=wu("um"),iI=wu("sp"),aI=wu("rtg"),oI=wu("rtc");function sI(D,Z=yo){Gp("ec",D,Z)}const W1="components";function X1(D,Z){return lI(W1,D,!0,Z)||D}const uI=Symbol.for("v-ndc");function lI(D,Z,te=!0,pe=!1){const we=hs||yo;if(we){const Ze=we.type;if(D===W1){const B=VI(Ze,!1);if(B&&(B===Z||B===eu(Z)||B===Lp(eu(Z))))return Ze}const Ee=vT(we[D]||Ze[D],Z)||vT(we.appContext[D],Z);return!Ee&&pe?Ze:Ee}}function vT(D,Z){return D&&(D[Z]||D[eu(Z)]||D[Lp(eu(Z))])}function cI(D,Z,te,pe){let we;const Ze=te&&te[pe];if(mi(D)||lo(D)){we=new Array(D.length);for(let Ee=0,B=D.length;Ee<B;Ee++)we[Ee]=Z(D[Ee],Ee,void 0,Ze&&Ze[Ee])}else if(typeof D=="number"){we=new Array(D);for(let Ee=0;Ee<D;Ee++)we[Ee]=Z(Ee+1,Ee,void 0,Ze&&Ze[Ee])}else if(Ga(D))if(D[Symbol.iterator])we=Array.from(D,(Ee,B)=>Z(Ee,B,void 0,Ze&&Ze[B]));else{const Ee=Object.keys(D);we=new Array(Ee.length);for(let B=0,K=Ee.length;B<K;B++){const M=Ee[B];we[B]=Z(D[M],M,B,Ze&&Ze[B])}}else we=[];return te&&(te[pe]=we),we}const pv=D=>D?u_(D)?ey(D)||D.proxy:pv(D.parent):null,zf=Eo(Object.create(null),{$:D=>D,$el:D=>D.vnode.el,$data:D=>D.data,$props:D=>D.props,$attrs:D=>D.attrs,$slots:D=>D.slots,$refs:D=>D.refs,$parent:D=>pv(D.parent),$root:D=>pv(D.root),$emit:D=>D.emit,$options:D=>Xv(D),$forceUpdate:D=>D.f||(D.f=()=>Wv(D.update)),$nextTick:D=>D.n||(D.n=F1.bind(D.proxy)),$watch:D=>Xw.bind(D)}),ev=(D,Z)=>D!==ja&&!D.__isScriptSetup&&la(D,Z),fI={get({_:D},Z){const{ctx:te,setupState:pe,data:we,props:Ze,accessCache:Ee,type:B,appContext:K}=D;let M;if(Z[0]!=="$"){const R=Ee[Z];if(R!==void 0)switch(R){case 1:return pe[Z];case 2:return we[Z];case 4:return te[Z];case 3:return Ze[Z]}else{if(ev(pe,Z))return Ee[Z]=1,pe[Z];if(we!==ja&&la(we,Z))return Ee[Z]=2,we[Z];if((M=D.propsOptions[0])&&la(M,Z))return Ee[Z]=3,Ze[Z];if(te!==ja&&la(te,Z))return Ee[Z]=4,te[Z];gv&&(Ee[Z]=0)}}const x=zf[Z];let N,C;if(x)return Z==="$attrs"&&Ko(D,"get",Z),x(D);if((N=B.__cssModules)&&(N=N[Z]))return N;if(te!==ja&&la(te,Z))return Ee[Z]=4,te[Z];if(C=K.config.globalProperties,la(C,Z))return C[Z]},set({_:D},Z,te){const{data:pe,setupState:we,ctx:Ze}=D;return ev(we,Z)?(we[Z]=te,!0):pe!==ja&&la(pe,Z)?(pe[Z]=te,!0):la(D.props,Z)||Z[0]==="$"&&Z.slice(1)in D?!1:(Ze[Z]=te,!0)},has({_:{data:D,setupState:Z,accessCache:te,ctx:pe,appContext:we,propsOptions:Ze}},Ee){let B;return!!te[Ee]||D!==ja&&la(D,Ee)||ev(Z,Ee)||(B=Ze[0])&&la(B,Ee)||la(pe,Ee)||la(zf,Ee)||la(we.config.globalProperties,Ee)},defineProperty(D,Z,te){return te.get!=null?D._.accessCache[Z]=0:la(te,"value")&&this.set(D,Z,te.value,null),Reflect.defineProperty(D,Z,te)}};function yT(D){return mi(D)?D.reduce((Z,te)=>(Z[te]=null,Z),{}):D}let gv=!0;function dI(D){const Z=Xv(D),te=D.proxy,pe=D.ctx;gv=!1,Z.beforeCreate&&ET(Z.beforeCreate,D,"bc");const{data:we,computed:Ze,methods:Ee,watch:B,provide:K,inject:M,created:x,beforeMount:N,mounted:C,beforeUpdate:R,updated:I,activated:E,deactivated:T,beforeDestroy:l,beforeUnmount:c,destroyed:h,unmounted:y,render:i,renderTracked:g,renderTriggered:d,errorCaptured:r,serverPrefetch:t,expose:u,inheritAttrs:m,components:S,directives:A,filters:_}=Z;if(M&&hI(M,pe,null),Ee)for(const b in Ee){const p=Ee[b];Pi(p)&&(pe[b]=p.bind(te))}if(we){const b=we.call(te,te);Ga(b)&&(D.data=Vl(b))}if(gv=!0,Ze)for(const b in Ze){const p=Ze[b],k=Pi(p)?p.bind(te,te):Pi(p.get)?p.get.bind(te,te):Ls,P=!Pi(p)&&Pi(p.set)?p.set.bind(te):Ls,j=Xu({get:k,set:P});Object.defineProperty(pe,b,{enumerable:!0,configurable:!0,get:()=>j.value,set:U=>j.value=U})}if(B)for(const b in B)Q1(B[b],pe,te,b);if(K){const b=Pi(K)?K.call(te):K;Reflect.ownKeys(b).forEach(p=>{EI(p,b[p])})}x&&ET(x,D,"c");function f(b,p){mi(p)?p.forEach(k=>b(k.bind(te))):p&&b(p.bind(te))}if(f(Y1,N),f(Hp,C),f(tI,R),f(nI,I),f($w,E),f(Jw,T),f(sI,r),f(oI,g),f(aI,d),f(rI,c),f(z1,y),f(iI,t),mi(u))if(u.length){const b=D.exposed||(D.exposed={});u.forEach(p=>{Object.defineProperty(b,p,{get:()=>te[p],set:k=>te[p]=k})})}else D.exposed||(D.exposed={});i&&D.render===Ls&&(D.render=i),m!=null&&(D.inheritAttrs=m),S&&(D.components=S),A&&(D.directives=A)}function hI(D,Z,te=Ls){mi(D)&&(D=mv(D));for(const pe in D){const we=D[pe];let Ze;Ga(we)?"default"in we?Ze=Wf(we.from||pe,we.default,!0):Ze=Wf(we.from||pe):Ze=Wf(we),eo(Ze)?Object.defineProperty(Z,pe,{enumerable:!0,configurable:!0,get:()=>Ze.value,set:Ee=>Ze.value=Ee}):Z[pe]=Ze}}function ET(D,Z,te){Ms(mi(D)?D.map(pe=>pe.bind(Z.proxy)):D.bind(Z.proxy),Z,te)}function Q1(D,Z,te,pe){const we=pe.includes(".")?Z1(te,pe):()=>te[pe];if(lo(D)){const Ze=Z[D];Pi(Ze)&&Yf(we,Ze)}else if(Pi(D))Yf(we,D.bind(te));else if(Ga(D))if(mi(D))D.forEach(Ze=>Q1(Ze,Z,te,pe));else{const Ze=Pi(D.handler)?D.handler.bind(te):Z[D.handler];Pi(Ze)&&Yf(we,Ze,D)}}function Xv(D){const Z=D.type,{mixins:te,extends:pe}=Z,{mixins:we,optionsCache:Ze,config:{optionMergeStrategies:Ee}}=D.appContext,B=Ze.get(Z);let K;return B?K=B:!we.length&&!te&&!pe?K=Z:(K={},we.length&&we.forEach(M=>Rp(K,M,Ee,!0)),Rp(K,Z,Ee)),Ga(Z)&&Ze.set(Z,K),K}function Rp(D,Z,te,pe=!1){const{mixins:we,extends:Ze}=Z;Ze&&Rp(D,Ze,te,!0),we&&we.forEach(Ee=>Rp(D,Ee,te,!0));for(const Ee in Z)if(!(pe&&Ee==="expose")){const B=pI[Ee]||te&&te[Ee];D[Ee]=B?B(D[Ee],Z[Ee]):Z[Ee]}return D}const pI={data:bT,props:TT,emits:TT,methods:Kf,computed:Kf,beforeCreate:Fo,created:Fo,beforeMount:Fo,mounted:Fo,beforeUpdate:Fo,updated:Fo,beforeDestroy:Fo,beforeUnmount:Fo,destroyed:Fo,unmounted:Fo,activated:Fo,deactivated:Fo,errorCaptured:Fo,serverPrefetch:Fo,components:Kf,directives:Kf,watch:mI,provide:bT,inject:gI};function bT(D,Z){return Z?D?function(){return Eo(Pi(D)?D.call(this,this):D,Pi(Z)?Z.call(this,this):Z)}:Z:D}function gI(D,Z){return Kf(mv(D),mv(Z))}function mv(D){if(mi(D)){const Z={};for(let te=0;te<D.length;te++)Z[D[te]]=D[te];return Z}return D}function Fo(D,Z){return D?[...new Set([].concat(D,Z))]:Z}function Kf(D,Z){return D?Eo(Object.create(null),D,Z):Z}function TT(D,Z){return D?mi(D)&&mi(Z)?[...new Set([...D,...Z])]:Eo(Object.create(null),yT(D),yT(Z??{})):Z}function mI(D,Z){if(!D)return Z;if(!Z)return D;const te=Eo(Object.create(null),D);for(const pe in Z)te[pe]=Fo(D[pe],Z[pe]);return te}function $1(){return{app:null,config:{isNativeTag:BA,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vI=0;function yI(D,Z){return function(pe,we=null){Pi(pe)||(pe=Eo({},pe)),we!=null&&!Ga(we)&&(we=null);const Ze=$1(),Ee=new Set;let B=!1;const K=Ze.app={_uid:vI++,_component:pe,_props:we,_container:null,_context:Ze,_instance:null,version:zI,get config(){return Ze.config},set config(M){},use(M,...x){return Ee.has(M)||(M&&Pi(M.install)?(Ee.add(M),M.install(K,...x)):Pi(M)&&(Ee.add(M),M(K,...x))),K},mixin(M){return Ze.mixins.includes(M)||Ze.mixins.push(M),K},component(M,x){return x?(Ze.components[M]=x,K):Ze.components[M]},directive(M,x){return x?(Ze.directives[M]=x,K):Ze.directives[M]},mount(M,x,N){if(!B){const C=Va(pe,we);return C.appContext=Ze,x&&Z?Z(C,M):D(C,M,N),B=!0,K._container=M,M.__vue_app__=K,ey(C.component)||C.component.proxy}},unmount(){B&&(D(null,K._container),delete K._container.__vue_app__)},provide(M,x){return Ze.provides[M]=x,K},runWithContext(M){id=K;try{return M()}finally{id=null}}};return K}}let id=null;function EI(D,Z){if(yo){let te=yo.provides;const pe=yo.parent&&yo.parent.provides;pe===te&&(te=yo.provides=Object.create(pe)),te[D]=Z}}function Wf(D,Z,te=!1){const pe=yo||hs;if(pe||id){const we=pe?pe.parent==null?pe.vnode.appContext&&pe.vnode.appContext.provides:pe.parent.provides:id._context.provides;if(we&&D in we)return we[D];if(arguments.length>1)return te&&Pi(Z)?Z.call(pe&&pe.proxy):Z}}function bI(){return!!(yo||hs||id)}function TI(D,Z,te,pe=!1){const we={},Ze={};Sp(Ze,Zp,1),D.propsDefaults=Object.create(null),J1(D,Z,we,Ze);for(const Ee in D.propsOptions[0])Ee in we||(we[Ee]=void 0);te?D.props=pe?we:Rw(we):D.type.props?D.props=we:D.props=Ze,D.attrs=Ze}function _I(D,Z,te,pe){const{props:we,attrs:Ze,vnode:{patchFlag:Ee}}=D,B=ca(we),[K]=D.propsOptions;let M=!1;if((pe||Ee>0)&&!(Ee&16)){if(Ee&8){const x=D.vnode.dynamicProps;for(let N=0;N<x.length;N++){let C=x[N];if(jp(D.emitsOptions,C))continue;const R=Z[C];if(K)if(la(Ze,C))R!==Ze[C]&&(Ze[C]=R,M=!0);else{const I=eu(C);we[I]=vv(K,B,I,R,D,!1)}else R!==Ze[C]&&(Ze[C]=R,M=!0)}}}else{J1(D,Z,we,Ze)&&(M=!0);let x;for(const N in B)(!Z||!la(Z,N)&&((x=Vc(N))===N||!la(Z,x)))&&(K?te&&(te[N]!==void 0||te[x]!==void 0)&&(we[N]=vv(K,B,N,void 0,D,!0)):delete we[N]);if(Ze!==B)for(const N in Ze)(!Z||!la(Z,N))&&(delete Ze[N],M=!0)}M&&Tu(D,"set","$attrs")}function J1(D,Z,te,pe){const[we,Ze]=D.propsOptions;let Ee=!1,B;if(Z)for(let K in Z){if(yp(K))continue;const M=Z[K];let x;we&&la(we,x=eu(K))?!Ze||!Ze.includes(x)?te[x]=M:(B||(B={}))[x]=M:jp(D.emitsOptions,K)||(!(K in pe)||M!==pe[K])&&(pe[K]=M,Ee=!0)}if(Ze){const K=ca(te),M=B||ja;for(let x=0;x<Ze.length;x++){const N=Ze[x];te[N]=vv(we,K,N,M[N],D,!la(M,N))}}return Ee}function vv(D,Z,te,pe,we,Ze){const Ee=D[te];if(Ee!=null){const B=la(Ee,"default");if(B&&pe===void 0){const K=Ee.default;if(Ee.type!==Function&&!Ee.skipFactory&&Pi(K)){const{propsDefaults:M}=we;te in M?pe=M[te]:(Gc(we),pe=M[te]=K.call(null,Z),Bl())}else pe=K}Ee[0]&&(Ze&&!B?pe=!1:Ee[1]&&(pe===""||pe===Vc(te))&&(pe=!0))}return pe}function e_(D,Z,te=!1){const pe=Z.propsCache,we=pe.get(D);if(we)return we;const Ze=D.props,Ee={},B=[];let K=!1;if(!Pi(D)){const x=N=>{K=!0;const[C,R]=e_(N,Z,!0);Eo(Ee,C),R&&B.push(...R)};!te&&Z.mixins.length&&Z.mixins.forEach(x),D.extends&&x(D.extends),D.mixins&&D.mixins.forEach(x)}if(!Ze&&!K)return Ga(D)&&pe.set(D,xc),xc;if(mi(Ze))for(let x=0;x<Ze.length;x++){const N=eu(Ze[x]);_T(N)&&(Ee[N]=ja)}else if(Ze)for(const x in Ze){const N=eu(x);if(_T(N)){const C=Ze[x],R=Ee[N]=mi(C)||Pi(C)?{type:C}:Eo({},C);if(R){const I=wT(Boolean,R.type),E=wT(String,R.type);R[0]=I>-1,R[1]=E<0||I<E,(I>-1||la(R,"default"))&&B.push(N)}}}const M=[Ee,B];return Ga(D)&&pe.set(D,M),M}function _T(D){return D[0]!=="$"}function ST(D){const Z=D&&D.toString().match(/^\s*(function|class) (\w+)/);return Z?Z[2]:D===null?"null":""}function AT(D,Z){return ST(D)===ST(Z)}function wT(D,Z){return mi(Z)?Z.findIndex(te=>AT(te,D)):Pi(Z)&&AT(Z,D)?0:-1}const t_=D=>D[0]==="_"||D==="$stable",Qv=D=>mi(D)?D.map(Qs):[Qs(D)],SI=(D,Z,te)=>{if(Z._n)return Z;const pe=Vw((...we)=>Qv(Z(...we)),te);return pe._c=!1,pe},n_=(D,Z,te)=>{const pe=D._ctx;for(const we in D){if(t_(we))continue;const Ze=D[we];if(Pi(Ze))Z[we]=SI(we,Ze,pe);else if(Ze!=null){const Ee=Qv(Ze);Z[we]=()=>Ee}}},r_=(D,Z)=>{const te=Qv(Z);D.slots.default=()=>te},AI=(D,Z)=>{if(D.vnode.shapeFlag&32){const te=Z._;te?(D.slots=ca(Z),Sp(Z,"_",te)):n_(Z,D.slots={})}else D.slots={},Z&&r_(D,Z);Sp(D.slots,Zp,1)},wI=(D,Z,te)=>{const{vnode:pe,slots:we}=D;let Ze=!0,Ee=ja;if(pe.shapeFlag&32){const B=Z._;B?te&&B===1?Ze=!1:(Eo(we,Z),!te&&B===1&&delete we._):(Ze=!Z.$stable,n_(Z,we)),Ee=Z}else Z&&(r_(D,Z),Ee={default:1});if(Ze)for(const B in we)!t_(B)&&!(B in Ee)&&delete we[B]};function yv(D,Z,te,pe,we=!1){if(mi(D)){D.forEach((C,R)=>yv(C,Z&&(mi(Z)?Z[R]:Z),te,pe,we));return}if(Ep(pe)&&!we)return;const Ze=pe.shapeFlag&4?ey(pe.component)||pe.component.proxy:pe.el,Ee=we?null:Ze,{i:B,r:K}=D,M=Z&&Z.r,x=B.refs===ja?B.refs={}:B.refs,N=B.setupState;if(M!=null&&M!==K&&(lo(M)?(x[M]=null,la(N,M)&&(N[M]=null)):eo(M)&&(M.value=null)),Pi(K))el(K,B,12,[Ee,x]);else{const C=lo(K),R=eo(K);if(C||R){const I=()=>{if(D.f){const E=C?la(N,K)?N[K]:x[K]:K.value;we?mi(E)&&Fv(E,Ze):mi(E)?E.includes(Ze)||E.push(Ze):C?(x[K]=[Ze],la(N,K)&&(N[K]=x[K])):(K.value=[Ze],D.k&&(x[D.k]=K.value))}else C?(x[K]=Ee,la(N,K)&&(N[K]=Ee)):R&&(K.value=Ee,D.k&&(x[D.k]=Ee))};Ee?(I.id=-1,Zo(I,te)):I()}}}const Zo=Ww;function II(D){return RI(D)}function RI(D,Z){const te=lv();te.__VUE__=!0;const{insert:pe,remove:we,patchProp:Ze,createElement:Ee,createText:B,createComment:K,setText:M,setElementText:x,parentNode:N,nextSibling:C,setScopeId:R=Ls,insertStaticContent:I}=D,E=(le,Se,be,Y=null,Q=null,J=null,fe=!1,Ce=null,V=!!Se.dynamicChildren)=>{if(le===Se)return;le&&!Vf(le,Se)&&(Y=oe(le),U(le,Q,J,!0),le=null),Se.patchFlag===-2&&(V=!1,Se.dynamicChildren=null);const{type:H,ref:z,shapeFlag:X}=Se;switch(H){case Vp:T(le,Se,be,Y);break;case jl:l(le,Se,be,Y);break;case tv:le==null&&c(Se,be,Y,fe);break;case Xs:S(le,Se,be,Y,Q,J,fe,Ce,V);break;default:X&1?i(le,Se,be,Y,Q,J,fe,Ce,V):X&6?A(le,Se,be,Y,Q,J,fe,Ce,V):(X&64||X&128)&&H.process(le,Se,be,Y,Q,J,fe,Ce,V,Te)}z!=null&&Q&&yv(z,le&&le.ref,J,Se||le,!Se)},T=(le,Se,be,Y)=>{if(le==null)pe(Se.el=B(Se.children),be,Y);else{const Q=Se.el=le.el;Se.children!==le.children&&M(Q,Se.children)}},l=(le,Se,be,Y)=>{le==null?pe(Se.el=K(Se.children||""),be,Y):Se.el=le.el},c=(le,Se,be,Y)=>{[le.el,le.anchor]=I(le.children,Se,be,Y,le.el,le.anchor)},h=({el:le,anchor:Se},be,Y)=>{let Q;for(;le&&le!==Se;)Q=C(le),pe(le,be,Y),le=Q;pe(Se,be,Y)},y=({el:le,anchor:Se})=>{let be;for(;le&&le!==Se;)be=C(le),we(le),le=be;we(Se)},i=(le,Se,be,Y,Q,J,fe,Ce,V)=>{fe=fe||Se.type==="svg",le==null?g(Se,be,Y,Q,J,fe,Ce,V):t(le,Se,Q,J,fe,Ce,V)},g=(le,Se,be,Y,Q,J,fe,Ce)=>{let V,H;const{type:z,props:X,shapeFlag:de,transition:ge,dirs:Ge}=le;if(V=le.el=Ee(le.type,J,X&&X.is,X),de&8?x(V,le.children):de&16&&r(le.children,V,null,Y,Q,J&&z!=="foreignObject",fe,Ce),Ge&&Pl(le,null,Y,"created"),d(V,le,le.scopeId,fe,Y),X){for(const Ye in X)Ye!=="value"&&!yp(Ye)&&Ze(V,Ye,null,X[Ye],J,le.children,Y,Q,re);"value"in X&&Ze(V,"value",null,X.value),(H=X.onVnodeBeforeMount)&&Ws(H,Y,le)}Ge&&Pl(le,null,Y,"beforeMount");const it=(!Q||Q&&!Q.pendingBranch)&&ge&&!ge.persisted;it&&ge.beforeEnter(V),pe(V,Se,be),((H=X&&X.onVnodeMounted)||it||Ge)&&Zo(()=>{H&&Ws(H,Y,le),it&&ge.enter(V),Ge&&Pl(le,null,Y,"mounted")},Q)},d=(le,Se,be,Y,Q)=>{if(be&&R(le,be),Y)for(let J=0;J<Y.length;J++)R(le,Y[J]);if(Q){let J=Q.subTree;if(Se===J){const fe=Q.vnode;d(le,fe,fe.scopeId,fe.slotScopeIds,Q.parent)}}},r=(le,Se,be,Y,Q,J,fe,Ce,V=0)=>{for(let H=V;H<le.length;H++){const z=le[H]=Ce?Wu(le[H]):Qs(le[H]);E(null,z,Se,be,Y,Q,J,fe,Ce)}},t=(le,Se,be,Y,Q,J,fe)=>{const Ce=Se.el=le.el;let{patchFlag:V,dynamicChildren:H,dirs:z}=Se;V|=le.patchFlag&16;const X=le.props||ja,de=Se.props||ja;let ge;be&&Nl(be,!1),(ge=de.onVnodeBeforeUpdate)&&Ws(ge,be,Se,le),z&&Pl(Se,le,be,"beforeUpdate"),be&&Nl(be,!0);const Ge=Q&&Se.type!=="foreignObject";if(H?u(le.dynamicChildren,H,Ce,be,Y,Ge,J):fe||p(le,Se,Ce,null,be,Y,Ge,J,!1),V>0){if(V&16)m(Ce,Se,X,de,be,Y,Q);else if(V&2&&X.class!==de.class&&Ze(Ce,"class",null,de.class,Q),V&4&&Ze(Ce,"style",X.style,de.style,Q),V&8){const it=Se.dynamicProps;for(let Ye=0;Ye<it.length;Ye++){const Ke=it[Ye],dt=X[Ke],me=de[Ke];(me!==dt||Ke==="value")&&Ze(Ce,Ke,dt,me,Q,le.children,be,Y,re)}}V&1&&le.children!==Se.children&&x(Ce,Se.children)}else!fe&&H==null&&m(Ce,Se,X,de,be,Y,Q);((ge=de.onVnodeUpdated)||z)&&Zo(()=>{ge&&Ws(ge,be,Se,le),z&&Pl(Se,le,be,"updated")},Y)},u=(le,Se,be,Y,Q,J,fe)=>{for(let Ce=0;Ce<Se.length;Ce++){const V=le[Ce],H=Se[Ce],z=V.el&&(V.type===Xs||!Vf(V,H)||V.shapeFlag&70)?N(V.el):be;E(V,H,z,null,Y,Q,J,fe,!0)}},m=(le,Se,be,Y,Q,J,fe)=>{if(be!==Y){if(be!==ja)for(const Ce in be)!yp(Ce)&&!(Ce in Y)&&Ze(le,Ce,be[Ce],null,fe,Se.children,Q,J,re);for(const Ce in Y){if(yp(Ce))continue;const V=Y[Ce],H=be[Ce];V!==H&&Ce!=="value"&&Ze(le,Ce,H,V,fe,Se.children,Q,J,re)}"value"in Y&&Ze(le,"value",be.value,Y.value)}},S=(le,Se,be,Y,Q,J,fe,Ce,V)=>{const H=Se.el=le?le.el:B(""),z=Se.anchor=le?le.anchor:B("");let{patchFlag:X,dynamicChildren:de,slotScopeIds:ge}=Se;ge&&(Ce=Ce?Ce.concat(ge):ge),le==null?(pe(H,be,Y),pe(z,be,Y),r(Se.children,be,z,Q,J,fe,Ce,V)):X>0&&X&64&&de&&le.dynamicChildren?(u(le.dynamicChildren,de,be,Q,J,fe,Ce),(Se.key!=null||Q&&Se===Q.subTree)&&i_(le,Se,!0)):p(le,Se,be,z,Q,J,fe,Ce,V)},A=(le,Se,be,Y,Q,J,fe,Ce,V)=>{Se.slotScopeIds=Ce,le==null?Se.shapeFlag&512?Q.ctx.activate(Se,be,Y,fe,V):_(Se,be,Y,Q,J,fe,V):v(le,Se,V)},_=(le,Se,be,Y,Q,J,fe)=>{const Ce=le.component=UI(le,Y,Q);if(K1(le)&&(Ce.ctx.renderer=Te),BI(Ce),Ce.asyncDep){if(Q&&Q.registerDep(Ce,f),!le.el){const V=Ce.subTree=Va(jl);l(null,V,Se,be)}return}f(Ce,le,Se,be,Q,J,fe)},v=(le,Se,be)=>{const Y=Se.component=le.component;if(qw(le,Se,be))if(Y.asyncDep&&!Y.asyncResolved){b(Y,Se,be);return}else Y.next=Se,Bw(Y.update),Y.update();else Se.el=le.el,Y.vnode=Se},f=(le,Se,be,Y,Q,J,fe)=>{const Ce=()=>{if(le.isMounted){let{next:z,bu:X,u:de,parent:ge,vnode:Ge}=le,it=z,Ye;Nl(le,!1),z?(z.el=Ge.el,b(le,z,fe)):z=Ge,X&&$m(X),(Ye=z.props&&z.props.onVnodeBeforeUpdate)&&Ws(Ye,ge,z,Ge),Nl(le,!0);const Ke=Jm(le),dt=le.subTree;le.subTree=Ke,E(dt,Ke,N(dt.el),oe(dt),le,Q,J),z.el=Ke.el,it===null&&Yw(le,Ke.el),de&&Zo(de,Q),(Ye=z.props&&z.props.onVnodeUpdated)&&Zo(()=>Ws(Ye,ge,z,Ge),Q)}else{let z;const{el:X,props:de}=Se,{bm:ge,m:Ge,parent:it}=le,Ye=Ep(Se);if(Nl(le,!1),ge&&$m(ge),!Ye&&(z=de&&de.onVnodeBeforeMount)&&Ws(z,it,Se),Nl(le,!0),X&&ze){const Ke=()=>{le.subTree=Jm(le),ze(X,le.subTree,le,Q,null)};Ye?Se.type.__asyncLoader().then(()=>!le.isUnmounted&&Ke()):Ke()}else{const Ke=le.subTree=Jm(le);E(null,Ke,be,Y,le,Q,J),Se.el=Ke.el}if(Ge&&Zo(Ge,Q),!Ye&&(z=de&&de.onVnodeMounted)){const Ke=Se;Zo(()=>Ws(z,it,Ke),Q)}(Se.shapeFlag&256||it&&Ep(it.vnode)&&it.vnode.shapeFlag&256)&&le.a&&Zo(le.a,Q),le.isMounted=!0,Se=be=Y=null}},V=le.effect=new Hv(Ce,()=>Wv(H),le.scope),H=le.update=()=>V.run();H.id=le.uid,Nl(le,!0),H()},b=(le,Se,be)=>{Se.component=le;const Y=le.vnode.props;le.vnode=Se,le.next=null,_I(le,Se.props,Y,be),wI(le,Se.children,be),Zc(),gT(),Kc()},p=(le,Se,be,Y,Q,J,fe,Ce,V=!1)=>{const H=le&&le.children,z=le?le.shapeFlag:0,X=Se.children,{patchFlag:de,shapeFlag:ge}=Se;if(de>0){if(de&128){P(H,X,be,Y,Q,J,fe,Ce,V);return}else if(de&256){k(H,X,be,Y,Q,J,fe,Ce,V);return}}ge&8?(z&16&&re(H,Q,J),X!==H&&x(be,X)):z&16?ge&16?P(H,X,be,Y,Q,J,fe,Ce,V):re(H,Q,J,!0):(z&8&&x(be,""),ge&16&&r(X,be,Y,Q,J,fe,Ce,V))},k=(le,Se,be,Y,Q,J,fe,Ce,V)=>{le=le||xc,Se=Se||xc;const H=le.length,z=Se.length,X=Math.min(H,z);let de;for(de=0;de<X;de++){const ge=Se[de]=V?Wu(Se[de]):Qs(Se[de]);E(le[de],ge,be,null,Q,J,fe,Ce,V)}H>z?re(le,Q,J,!0,!1,X):r(Se,be,Y,Q,J,fe,Ce,V,X)},P=(le,Se,be,Y,Q,J,fe,Ce,V)=>{let H=0;const z=Se.length;let X=le.length-1,de=z-1;for(;H<=X&&H<=de;){const ge=le[H],Ge=Se[H]=V?Wu(Se[H]):Qs(Se[H]);if(Vf(ge,Ge))E(ge,Ge,be,null,Q,J,fe,Ce,V);else break;H++}for(;H<=X&&H<=de;){const ge=le[X],Ge=Se[de]=V?Wu(Se[de]):Qs(Se[de]);if(Vf(ge,Ge))E(ge,Ge,be,null,Q,J,fe,Ce,V);else break;X--,de--}if(H>X){if(H<=de){const ge=de+1,Ge=ge<z?Se[ge].el:Y;for(;H<=de;)E(null,Se[H]=V?Wu(Se[H]):Qs(Se[H]),be,Ge,Q,J,fe,Ce,V),H++}}else if(H>de)for(;H<=X;)U(le[H],Q,J,!0),H++;else{const ge=H,Ge=H,it=new Map;for(H=Ge;H<=de;H++){const nt=Se[H]=V?Wu(Se[H]):Qs(Se[H]);nt.key!=null&&it.set(nt.key,H)}let Ye,Ke=0;const dt=de-Ge+1;let me=!1,ke=0;const Je=new Array(dt);for(H=0;H<dt;H++)Je[H]=0;for(H=ge;H<=X;H++){const nt=le[H];if(Ke>=dt){U(nt,Q,J,!0);continue}let Tt;if(nt.key!=null)Tt=it.get(nt.key);else for(Ye=Ge;Ye<=de;Ye++)if(Je[Ye-Ge]===0&&Vf(nt,Se[Ye])){Tt=Ye;break}Tt===void 0?U(nt,Q,J,!0):(Je[Tt-Ge]=H+1,Tt>=ke?ke=Tt:me=!0,E(nt,Se[Tt],be,null,Q,J,fe,Ce,V),Ke++)}const Xe=me?CI(Je):xc;for(Ye=Xe.length-1,H=dt-1;H>=0;H--){const nt=Ge+H,Tt=Se[nt],bt=nt+1<z?Se[nt+1].el:Y;Je[H]===0?E(null,Tt,be,bt,Q,J,fe,Ce,V):me&&(Ye<0||H!==Xe[Ye]?j(Tt,be,bt,2):Ye--)}}},j=(le,Se,be,Y,Q=null)=>{const{el:J,type:fe,transition:Ce,children:V,shapeFlag:H}=le;if(H&6){j(le.component.subTree,Se,be,Y);return}if(H&128){le.suspense.move(Se,be,Y);return}if(H&64){fe.move(le,Se,be,Te);return}if(fe===Xs){pe(J,Se,be);for(let X=0;X<V.length;X++)j(V[X],Se,be,Y);pe(le.anchor,Se,be);return}if(fe===tv){h(le,Se,be);return}if(Y!==2&&H&1&&Ce)if(Y===0)Ce.beforeEnter(J),pe(J,Se,be),Zo(()=>Ce.enter(J),Q);else{const{leave:X,delayLeave:de,afterLeave:ge}=Ce,Ge=()=>pe(J,Se,be),it=()=>{X(J,()=>{Ge(),ge&&ge()})};de?de(J,Ge,it):it()}else pe(J,Se,be)},U=(le,Se,be,Y=!1,Q=!1)=>{const{type:J,props:fe,ref:Ce,children:V,dynamicChildren:H,shapeFlag:z,patchFlag:X,dirs:de}=le;if(Ce!=null&&yv(Ce,null,be,le,!0),z&256){Se.ctx.deactivate(le);return}const ge=z&1&&de,Ge=!Ep(le);let it;if(Ge&&(it=fe&&fe.onVnodeBeforeUnmount)&&Ws(it,Se,le),z&6)ne(le.component,be,Y);else{if(z&128){le.suspense.unmount(be,Y);return}ge&&Pl(le,null,Se,"beforeUnmount"),z&64?le.type.remove(le,Se,be,Q,Te,Y):H&&(J!==Xs||X>0&&X&64)?re(H,Se,be,!1,!0):(J===Xs&&X&384||!Q&&z&16)&&re(V,Se,be),Y&&G(le)}(Ge&&(it=fe&&fe.onVnodeUnmounted)||ge)&&Zo(()=>{it&&Ws(it,Se,le),ge&&Pl(le,null,Se,"unmounted")},be)},G=le=>{const{type:Se,el:be,anchor:Y,transition:Q}=le;if(Se===Xs){ee(be,Y);return}if(Se===tv){y(le);return}const J=()=>{we(be),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(le.shapeFlag&1&&Q&&!Q.persisted){const{leave:fe,delayLeave:Ce}=Q,V=()=>fe(be,J);Ce?Ce(le.el,J,V):V()}else J()},ee=(le,Se)=>{let be;for(;le!==Se;)be=C(le),we(le),le=be;we(Se)},ne=(le,Se,be)=>{const{bum:Y,scope:Q,update:J,subTree:fe,um:Ce}=le;Y&&$m(Y),Q.stop(),J&&(J.active=!1,U(fe,le,Se,be)),Ce&&Zo(Ce,Se),Zo(()=>{le.isUnmounted=!0},Se),Se&&Se.pendingBranch&&!Se.isUnmounted&&le.asyncDep&&!le.asyncResolved&&le.suspenseId===Se.pendingId&&(Se.deps--,Se.deps===0&&Se.resolve())},re=(le,Se,be,Y=!1,Q=!1,J=0)=>{for(let fe=J;fe<le.length;fe++)U(le[fe],Se,be,Y,Q)},oe=le=>le.shapeFlag&6?oe(le.component.subTree):le.shapeFlag&128?le.suspense.next():C(le.anchor||le.el),W=(le,Se,be)=>{le==null?Se._vnode&&U(Se._vnode,null,null,!0):E(Se._vnode||null,le,Se,null,null,null,be),gT(),B1(),Se._vnode=le},Te={p:E,um:U,m:j,r:G,mt:_,mc:r,pc:p,pbc:u,n:oe,o:D};let Ue,ze;return Z&&([Ue,ze]=Z(Te)),{render:W,hydrate:Ue,createApp:yI(W,Ue)}}function Nl({effect:D,update:Z},te){D.allowRecurse=Z.allowRecurse=te}function i_(D,Z,te=!1){const pe=D.children,we=Z.children;if(mi(pe)&&mi(we))for(let Ze=0;Ze<pe.length;Ze++){const Ee=pe[Ze];let B=we[Ze];B.shapeFlag&1&&!B.dynamicChildren&&((B.patchFlag<=0||B.patchFlag===32)&&(B=we[Ze]=Wu(we[Ze]),B.el=Ee.el),te||i_(Ee,B)),B.type===Vp&&(B.el=Ee.el)}}function CI(D){const Z=D.slice(),te=[0];let pe,we,Ze,Ee,B;const K=D.length;for(pe=0;pe<K;pe++){const M=D[pe];if(M!==0){if(we=te[te.length-1],D[we]<M){Z[pe]=we,te.push(pe);continue}for(Ze=0,Ee=te.length-1;Ze<Ee;)B=Ze+Ee>>1,D[te[B]]<M?Ze=B+1:Ee=B;M<D[te[Ze]]&&(Ze>0&&(Z[pe]=te[Ze-1]),te[Ze]=pe)}}for(Ze=te.length,Ee=te[Ze-1];Ze-- >0;)te[Ze]=Ee,Ee=Z[Ee];return te}const kI=D=>D.__isTeleport,Xs=Symbol.for("v-fgt"),Vp=Symbol.for("v-txt"),jl=Symbol.for("v-cmt"),tv=Symbol.for("v-stc"),Xf=[];let Ns=null;function bu(D=!1){Xf.push(Ns=D?null:[])}function OI(){Xf.pop(),Ns=Xf[Xf.length-1]||null}let ad=1;function IT(D){ad+=D}function a_(D){return D.dynamicChildren=ad>0?Ns||xc:null,OI(),ad>0&&Ns&&Ns.push(D),D}function Qu(D,Z,te,pe,we,Ze){return a_(ka(D,Z,te,pe,we,Ze,!0))}function DI(D,Z,te,pe,we){return a_(Va(D,Z,te,pe,we,!0))}function Ev(D){return D?D.__v_isVNode===!0:!1}function Vf(D,Z){return D.type===Z.type&&D.key===Z.key}const Zp="__vInternal",o_=({key:D})=>D??null,bp=({ref:D,ref_key:Z,ref_for:te})=>(typeof D=="number"&&(D=""+D),D!=null?lo(D)||eo(D)||Pi(D)?{i:hs,r:D,k:Z,f:!!te}:D:null);function ka(D,Z=null,te=null,pe=0,we=null,Ze=D===Xs?0:1,Ee=!1,B=!1){const K={__v_isVNode:!0,__v_skip:!0,type:D,props:Z,key:Z&&o_(Z),ref:Z&&bp(Z),scopeId:H1,slotScopeIds:null,children:te,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:Ze,patchFlag:pe,dynamicProps:we,dynamicChildren:null,appContext:null,ctx:hs};return B?($v(K,te),Ze&128&&D.normalize(K)):te&&(K.shapeFlag|=lo(te)?8:16),ad>0&&!Ee&&Ns&&(K.patchFlag>0||Ze&6)&&K.patchFlag!==32&&Ns.push(K),K}const Va=PI;function PI(D,Z=null,te=null,pe=0,we=null,Ze=!1){if((!D||D===uI)&&(D=jl),Ev(D)){const B=jc(D,Z,!0);return te&&$v(B,te),ad>0&&!Ze&&Ns&&(B.shapeFlag&6?Ns[Ns.indexOf(D)]=B:Ns.push(B)),B.patchFlag|=-2,B}if(ZI(D)&&(D=D.__vccOpts),Z){Z=NI(Z);let{class:B,style:K}=Z;B&&!lo(B)&&(Z.class=Mp(B)),Ga(K)&&(D1(K)&&!mi(K)&&(K=Eo({},K)),Z.style=jv(K))}const Ee=lo(D)?1:zw(D)?128:kI(D)?64:Ga(D)?4:Pi(D)?2:0;return ka(D,Z,te,pe,we,Ee,Ze,!0)}function NI(D){return D?D1(D)||Zp in D?Eo({},D):D:null}function jc(D,Z,te=!1){const{props:pe,ref:we,patchFlag:Ze,children:Ee}=D,B=Z?LI(pe||{},Z):pe;return{__v_isVNode:!0,__v_skip:!0,type:D.type,props:B,key:B&&o_(B),ref:Z&&Z.ref?te&&we?mi(we)?we.concat(bp(Z)):[we,bp(Z)]:bp(Z):we,scopeId:D.scopeId,slotScopeIds:D.slotScopeIds,children:Ee,target:D.target,targetAnchor:D.targetAnchor,staticCount:D.staticCount,shapeFlag:D.shapeFlag,patchFlag:Z&&D.type!==Xs?Ze===-1?16:Ze|16:Ze,dynamicProps:D.dynamicProps,dynamicChildren:D.dynamicChildren,appContext:D.appContext,dirs:D.dirs,transition:D.transition,component:D.component,suspense:D.suspense,ssContent:D.ssContent&&jc(D.ssContent),ssFallback:D.ssFallback&&jc(D.ssFallback),el:D.el,anchor:D.anchor,ctx:D.ctx,ce:D.ce}}function xI(D=" ",Z=0){return Va(Vp,null,D,Z)}function s_(D="",Z=!1){return Z?(bu(),DI(jl,null,D)):Va(jl,null,D)}function Qs(D){return D==null||typeof D=="boolean"?Va(jl):mi(D)?Va(Xs,null,D.slice()):typeof D=="object"?Wu(D):Va(Vp,null,String(D))}function Wu(D){return D.el===null&&D.patchFlag!==-1||D.memo?D:jc(D)}function $v(D,Z){let te=0;const{shapeFlag:pe}=D;if(Z==null)Z=null;else if(mi(Z))te=16;else if(typeof Z=="object")if(pe&65){const we=Z.default;we&&(we._c&&(we._d=!1),$v(D,we()),we._c&&(we._d=!0));return}else{te=32;const we=Z._;!we&&!(Zp in Z)?Z._ctx=hs:we===3&&hs&&(hs.slots._===1?Z._=1:(Z._=2,D.patchFlag|=1024))}else Pi(Z)?(Z={default:Z,_ctx:hs},te=32):(Z=String(Z),pe&64?(te=16,Z=[xI(Z)]):te=8);D.children=Z,D.shapeFlag|=te}function LI(...D){const Z={};for(let te=0;te<D.length;te++){const pe=D[te];for(const we in pe)if(we==="class")Z.class!==pe.class&&(Z.class=Mp([Z.class,pe.class]));else if(we==="style")Z.style=jv([Z.style,pe.style]);else if(Pp(we)){const Ze=Z[we],Ee=pe[we];Ee&&Ze!==Ee&&!(mi(Ze)&&Ze.includes(Ee))&&(Z[we]=Ze?[].concat(Ze,Ee):Ee)}else we!==""&&(Z[we]=pe[we])}return Z}function Ws(D,Z,te,pe=null){Ms(D,Z,7,[te,pe])}const MI=$1();let FI=0;function UI(D,Z,te){const pe=D.type,we=(Z?Z.appContext:D.appContext)||MI,Ze={uid:FI++,vnode:D,type:pe,parent:Z,appContext:we,root:null,next:null,subTree:null,effect:null,update:null,scope:new v1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:Z?Z.provides:Object.create(we.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:e_(pe,we),emitsOptions:G1(pe,we),emit:null,emitted:null,propsDefaults:ja,inheritAttrs:pe.inheritAttrs,ctx:ja,data:ja,props:ja,attrs:ja,slots:ja,refs:ja,setupState:ja,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:te,suspenseId:te?te.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return Ze.ctx={_:Ze},Ze.root=Z?Z.root:Ze,Ze.emit=Hw.bind(null,Ze),D.ce&&D.ce(Ze),Ze}let yo=null,Jv,kc,RT="__VUE_INSTANCE_SETTERS__";(kc=lv()[RT])||(kc=lv()[RT]=[]),kc.push(D=>yo=D),Jv=D=>{kc.length>1?kc.forEach(Z=>Z(D)):kc[0](D)};const Gc=D=>{Jv(D),D.scope.on()},Bl=()=>{yo&&yo.scope.off(),Jv(null)};function u_(D){return D.vnode.shapeFlag&4}let od=!1;function BI(D,Z=!1){od=Z;const{props:te,children:pe}=D.vnode,we=u_(D);TI(D,te,we,Z),AI(D,pe);const Ze=we?jI(D,Z):void 0;return od=!1,Ze}function jI(D,Z){const te=D.type;D.accessCache=Object.create(null),D.proxy=Up(new Proxy(D.ctx,fI));const{setup:pe}=te;if(pe){const we=D.setupContext=pe.length>1?HI(D):null;Gc(D),Zc();const Ze=el(pe,D,0,[D.props,we]);if(Kc(),Bl(),d1(Ze)){if(Ze.then(Bl,Bl),Z)return Ze.then(Ee=>{CT(D,Ee,Z)}).catch(Ee=>{Bp(Ee,D,0)});D.asyncDep=Ze}else CT(D,Ze,Z)}else l_(D,Z)}function CT(D,Z,te){Pi(Z)?D.type.__ssrInlineRender?D.ssrRender=Z:D.render=Z:Ga(Z)&&(D.setupState=L1(Z)),l_(D,te)}let kT;function l_(D,Z,te){const pe=D.type;if(!D.render){if(!Z&&kT&&!pe.render){const we=pe.template||Xv(D).template;if(we){const{isCustomElement:Ze,compilerOptions:Ee}=D.appContext.config,{delimiters:B,compilerOptions:K}=pe,M=Eo(Eo({isCustomElement:Ze,delimiters:B},Ee),K);pe.render=kT(we,M)}}D.render=pe.render||Ls}Gc(D),Zc(),dI(D),Kc(),Bl()}function GI(D){return D.attrsProxy||(D.attrsProxy=new Proxy(D.attrs,{get(Z,te){return Ko(D,"get","$attrs"),Z[te]}}))}function HI(D){const Z=te=>{D.exposed=te||{}};return{get attrs(){return GI(D)},slots:D.slots,emit:D.emit,expose:Z}}function ey(D){if(D.exposed)return D.exposeProxy||(D.exposeProxy=new Proxy(L1(Up(D.exposed)),{get(Z,te){if(te in Z)return Z[te];if(te in zf)return zf[te](D)},has(Z,te){return te in Z||te in zf}}))}function VI(D,Z=!0){return Pi(D)?D.displayName||D.name:D.name||Z&&D.__name}function ZI(D){return Pi(D)&&"__vccOpts"in D}const Xu=(D,Z)=>Mw(D,Z,od);function KI(D,Z,te){const pe=arguments.length;return pe===2?Ga(Z)&&!mi(Z)?Ev(Z)?Va(D,null,[Z]):Va(D,Z):Va(D,null,Z):(pe>3?te=Array.prototype.slice.call(arguments,2):pe===3&&Ev(te)&&(te=[te]),Va(D,Z,te))}const qI=Symbol.for("v-scx"),YI=()=>Wf(qI),zI="3.3.4",WI="http://www.w3.org/2000/svg",Ll=typeof document<"u"?document:null,OT=Ll&&Ll.createElement("template"),XI={insert:(D,Z,te)=>{Z.insertBefore(D,te||null)},remove:D=>{const Z=D.parentNode;Z&&Z.removeChild(D)},createElement:(D,Z,te,pe)=>{const we=Z?Ll.createElementNS(WI,D):Ll.createElement(D,te?{is:te}:void 0);return D==="select"&&pe&&pe.multiple!=null&&we.setAttribute("multiple",pe.multiple),we},createText:D=>Ll.createTextNode(D),createComment:D=>Ll.createComment(D),setText:(D,Z)=>{D.nodeValue=Z},setElementText:(D,Z)=>{D.textContent=Z},parentNode:D=>D.parentNode,nextSibling:D=>D.nextSibling,querySelector:D=>Ll.querySelector(D),setScopeId(D,Z){D.setAttribute(Z,"")},insertStaticContent(D,Z,te,pe,we,Ze){const Ee=te?te.previousSibling:Z.lastChild;if(we&&(we===Ze||we.nextSibling))for(;Z.insertBefore(we.cloneNode(!0),te),!(we===Ze||!(we=we.nextSibling)););else{OT.innerHTML=pe?`<svg>${D}</svg>`:D;const B=OT.content;if(pe){const K=B.firstChild;for(;K.firstChild;)B.appendChild(K.firstChild);B.removeChild(K)}Z.insertBefore(B,te)}return[Ee?Ee.nextSibling:Z.firstChild,te?te.previousSibling:Z.lastChild]}};function QI(D,Z,te){const pe=D._vtc;pe&&(Z=(Z?[Z,...pe]:[...pe]).join(" ")),Z==null?D.removeAttribute("class"):te?D.setAttribute("class",Z):D.className=Z}function $I(D,Z,te){const pe=D.style,we=lo(te);if(te&&!we){if(Z&&!lo(Z))for(const Ze in Z)te[Ze]==null&&bv(pe,Ze,"");for(const Ze in te)bv(pe,Ze,te[Ze])}else{const Ze=pe.display;we?Z!==te&&(pe.cssText=te):Z&&D.removeAttribute("style"),"_vod"in D&&(pe.display=Ze)}}const DT=/\s*!important$/;function bv(D,Z,te){if(mi(te))te.forEach(pe=>bv(D,Z,pe));else if(te==null&&(te=""),Z.startsWith("--"))D.setProperty(Z,te);else{const pe=JI(D,Z);DT.test(te)?D.setProperty(Vc(pe),te.replace(DT,""),"important"):D[pe]=te}}const PT=["Webkit","Moz","ms"],nv={};function JI(D,Z){const te=nv[Z];if(te)return te;let pe=eu(Z);if(pe!=="filter"&&pe in D)return nv[Z]=pe;pe=Lp(pe);for(let we=0;we<PT.length;we++){const Ze=PT[we]+pe;if(Ze in D)return nv[Z]=Ze}return Z}const NT="http://www.w3.org/1999/xlink";function eR(D,Z,te,pe,we){if(pe&&Z.startsWith("xlink:"))te==null?D.removeAttributeNS(NT,Z.slice(6,Z.length)):D.setAttributeNS(NT,Z,te);else{const Ze=QA(Z);te==null||Ze&&!g1(te)?D.removeAttribute(Z):D.setAttribute(Z,Ze?"":te)}}function tR(D,Z,te,pe,we,Ze,Ee){if(Z==="innerHTML"||Z==="textContent"){pe&&Ee(pe,we,Ze),D[Z]=te??"";return}const B=D.tagName;if(Z==="value"&&B!=="PROGRESS"&&!B.includes("-")){D._value=te;const M=B==="OPTION"?D.getAttribute("value"):D.value,x=te??"";M!==x&&(D.value=x),te==null&&D.removeAttribute(Z);return}let K=!1;if(te===""||te==null){const M=typeof D[Z];M==="boolean"?te=g1(te):te==null&&M==="string"?(te="",K=!0):M==="number"&&(te=0,K=!0)}try{D[Z]=te}catch{}K&&D.removeAttribute(Z)}function nR(D,Z,te,pe){D.addEventListener(Z,te,pe)}function rR(D,Z,te,pe){D.removeEventListener(Z,te,pe)}function iR(D,Z,te,pe,we=null){const Ze=D._vei||(D._vei={}),Ee=Ze[Z];if(pe&&Ee)Ee.value=pe;else{const[B,K]=aR(Z);if(pe){const M=Ze[Z]=uR(pe,we);nR(D,B,M,K)}else Ee&&(rR(D,B,Ee,K),Ze[Z]=void 0)}}const xT=/(?:Once|Passive|Capture)$/;function aR(D){let Z;if(xT.test(D)){Z={};let pe;for(;pe=D.match(xT);)D=D.slice(0,D.length-pe[0].length),Z[pe[0].toLowerCase()]=!0}return[D[2]===":"?D.slice(3):Vc(D.slice(2)),Z]}let rv=0;const oR=Promise.resolve(),sR=()=>rv||(oR.then(()=>rv=0),rv=Date.now());function uR(D,Z){const te=pe=>{if(!pe._vts)pe._vts=Date.now();else if(pe._vts<=te.attached)return;Ms(lR(pe,te.value),Z,5,[pe])};return te.value=D,te.attached=sR(),te}function lR(D,Z){if(mi(Z)){const te=D.stopImmediatePropagation;return D.stopImmediatePropagation=()=>{te.call(D),D._stopped=!0},Z.map(pe=>we=>!we._stopped&&pe&&pe(we))}else return Z}const LT=/^on[a-z]/,cR=(D,Z,te,pe,we=!1,Ze,Ee,B,K)=>{Z==="class"?QI(D,pe,we):Z==="style"?$I(D,te,pe):Pp(Z)?Mv(Z)||iR(D,Z,te,pe,Ee):(Z[0]==="."?(Z=Z.slice(1),!0):Z[0]==="^"?(Z=Z.slice(1),!1):fR(D,Z,pe,we))?tR(D,Z,pe,Ze,Ee,B,K):(Z==="true-value"?D._trueValue=pe:Z==="false-value"&&(D._falseValue=pe),eR(D,Z,pe,we))};function fR(D,Z,te,pe){return pe?!!(Z==="innerHTML"||Z==="textContent"||Z in D&&LT.test(Z)&&Pi(te)):Z==="spellcheck"||Z==="draggable"||Z==="translate"||Z==="form"||Z==="list"&&D.tagName==="INPUT"||Z==="type"&&D.tagName==="TEXTAREA"||LT.test(Z)&&lo(te)?!1:Z in D}const dR=Eo({patchProp:cR},XI);let MT;function hR(){return MT||(MT=II(dR))}const pR=(...D)=>{const Z=hR().createApp(...D),{mount:te}=Z;return Z.mount=pe=>{const we=gR(pe);if(!we)return;const Ze=Z._component;!Pi(Ze)&&!Ze.render&&!Ze.template&&(Ze.template=we.innerHTML),we.innerHTML="";const Ee=te(we,!1,we instanceof SVGElement);return we instanceof Element&&(we.removeAttribute("v-cloak"),we.setAttribute("data-v-app","")),Ee},Z};function gR(D){return lo(D)?document.querySelector(D):D}var mR=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let c_;const Kp=D=>c_=D,f_=Symbol();function Tv(D){return D&&typeof D=="object"&&Object.prototype.toString.call(D)==="[object Object]"&&typeof D.toJSON!="function"}var Qf;(function(D){D.direct="direct",D.patchObject="patch object",D.patchFunction="patch function"})(Qf||(Qf={}));function vR(){const D=y1(!0),Z=D.run(()=>x1({}));let te=[],pe=[];const we=Up({install(Ze){Kp(we),we._a=Ze,Ze.provide(f_,we),Ze.config.globalProperties.$pinia=we,pe.forEach(Ee=>te.push(Ee)),pe=[]},use(Ze){return!this._a&&!mR?pe.push(Ze):te.push(Ze),this},_p:te,_a:null,_e:D,_s:new Map,state:Z});return we}const d_=()=>{};function FT(D,Z,te,pe=d_){D.push(Z);const we=()=>{const Ze=D.indexOf(Z);Ze>-1&&(D.splice(Ze,1),pe())};return!te&&E1()&&JA(we),we}function Oc(D,...Z){D.slice().forEach(te=>{te(...Z)})}const yR=D=>D();function _v(D,Z){D instanceof Map&&Z instanceof Map&&Z.forEach((te,pe)=>D.set(pe,te)),D instanceof Set&&Z instanceof Set&&Z.forEach(D.add,D);for(const te in Z){if(!Z.hasOwnProperty(te))continue;const pe=Z[te],we=D[te];Tv(we)&&Tv(pe)&&D.hasOwnProperty(te)&&!eo(pe)&&!Ju(pe)?D[te]=_v(we,pe):D[te]=pe}return D}const ER=Symbol();function bR(D){return!Tv(D)||!D.hasOwnProperty(ER)}const{assign:zu}=Object;function TR(D){return!!(eo(D)&&D.effect)}function _R(D,Z,te,pe){const{state:we,actions:Ze,getters:Ee}=Z,B=te.state.value[D];let K;function M(){B||(te.state.value[D]=we?we():{});const x=Pw(te.state.value[D]);return zu(x,Ze,Object.keys(Ee||{}).reduce((N,C)=>(N[C]=Up(Xu(()=>{Kp(te);const R=te._s.get(D);return Ee[C].call(R,R)})),N),{}))}return K=h_(D,M,Z,te,pe,!0),K}function h_(D,Z,te={},pe,we,Ze){let Ee;const B=zu({actions:{}},te),K={deep:!0};let M,x,N=[],C=[],R;const I=pe.state.value[D];!Ze&&!I&&(pe.state.value[D]={}),x1({});let E;function T(r){let t;M=x=!1,typeof r=="function"?(r(pe.state.value[D]),t={type:Qf.patchFunction,storeId:D,events:R}):(_v(pe.state.value[D],r),t={type:Qf.patchObject,payload:r,storeId:D,events:R});const u=E=Symbol();F1().then(()=>{E===u&&(M=!0)}),x=!0,Oc(N,t,pe.state.value[D])}const l=Ze?function(){const{state:t}=te,u=t?t():{};this.$patch(m=>{zu(m,u)})}:d_;function c(){Ee.stop(),N=[],C=[],pe._s.delete(D)}function h(r,t){return function(){Kp(pe);const u=Array.from(arguments),m=[],S=[];function A(f){m.push(f)}function _(f){S.push(f)}Oc(C,{args:u,name:r,store:i,after:A,onError:_});let v;try{v=t.apply(this&&this.$id===D?this:i,u)}catch(f){throw Oc(S,f),f}return v instanceof Promise?v.then(f=>(Oc(m,f),f)).catch(f=>(Oc(S,f),Promise.reject(f))):(Oc(m,v),v)}}const y={_p:pe,$id:D,$onAction:FT.bind(null,C),$patch:T,$reset:l,$subscribe(r,t={}){const u=FT(N,r,t.detached,()=>m()),m=Ee.run(()=>Yf(()=>pe.state.value[D],S=>{(t.flush==="sync"?x:M)&&r({storeId:D,type:Qf.direct,events:R},S)},zu({},K,t)));return u},$dispose:c},i=Vl(y);pe._s.set(D,i);const g=pe._a&&pe._a.runWithContext||yR,d=pe._e.run(()=>(Ee=y1(),g(()=>Ee.run(Z))));for(const r in d){const t=d[r];if(eo(t)&&!TR(t)||Ju(t))Ze||(I&&bR(t)&&(eo(t)?t.value=I[r]:_v(t,I[r])),pe.state.value[D][r]=t);else if(typeof t=="function"){const u=h(r,t);d[r]=u,B.actions[r]=t}}return zu(i,d),zu(ca(i),d),Object.defineProperty(i,"$state",{get:()=>pe.state.value[D],set:r=>{T(t=>{zu(t,r)})}}),pe._p.forEach(r=>{zu(i,Ee.run(()=>r({store:i,app:pe._a,pinia:pe,options:B})))}),I&&Ze&&te.hydrate&&te.hydrate(i.$state,I),M=!0,x=!0,i}function SR(D,Z,te){let pe,we;const Ze=typeof Z=="function";typeof D=="string"?(pe=D,we=Ze?te:Z):(we=D,pe=D.id);function Ee(B,K){const M=bI();return B=B||(M?Wf(f_,null):null),B&&Kp(B),B=c_,B._s.has(pe)||(Ze?h_(pe,Z,we,B):_R(pe,we,B)),B._s.get(pe)}return Ee.$id=pe,Ee}const qp=SR("messages",{state:()=>({socket:null,lastState:null}),actions:{init(){this.socket=new WebSocket("ws://localhost:8070/ws")}}}),AR={__name:"WebsocketReader",setup(D){const Z=Vl({data:""}),te=qp();return Hp(()=>{te.socket.addEventListener("message",pe=>{Z.data=JSON.parse(pe.data),Z.data.response==="status"&&(te.lastState=Z.data.params)})}),(pe,we)=>null}},wR={class:"relative group"},IR={class:"absolute -left-1 -top-8 bg-[#555] text-white py-1 px-2 rounded shadow-2xl hidden group-hover:inline-block whitespace-nowrap"},up={__name:"MainControlButton",props:["active","tooltip","icon"],setup(D){return(Z,te)=>{const pe=X1("fa-icon");return bu(),Qu("div",wR,[Va(pe,{icon:D.icon,size:"2x",class:Mp((D.active?"text-orange-400":"text-white")+" cursor-pointer")},null,8,["icon","class"]),ka("span",IR,Mc(D.tooltip),1)])}}},RR={key:0,class:"my-6"},CR={class:"flex my-2 gap-6"},kR=ka("span",{class:"my-2 border-l border-gray-200"},null,-1),OR={class:"flex gap-4 items-center"},DR={class:"text-orange-400 text-xl"},PR={__name:"MainControls",setup(D){const Z=qp(),te=Vl({status:null});Hp(()=>{Z.socket.addEventListener("message",B=>{const K=JSON.parse(B.data);K.response==="status"&&(te.status=K.params)})});const pe=()=>{Z.socket.send(JSON.stringify({command:"play",params:{loop:te.status.loop==="true",single:te.status["single clip"]==="true",speed:1}}))},we=()=>{Z.socket.send(JSON.stringify({command:"stop"}))},Ze=()=>{const B={loop:te.status.loop!=="true",single:te.status["single clip"]==="true"},K=te.status.status==="play"?"play":"stop";Z.socket.send(JSON.stringify({command:K,params:B}))},Ee=()=>{const B={loop:te.status.loop==="true",single:te.status["single clip"]!=="true"},K=te.status.status==="play"?"play":"stop";Z.socket.send(JSON.stringify({command:K,params:B}))};return(B,K)=>te.status?(bu(),Qu("div",RR,[ka("div",CR,[Va(up,{active:te.status.status==="play",tooltip:"Play",icon:"play",onClick:pe},null,8,["active"]),Va(up,{active:te.status.status==="stopped",tooltip:"Stop",icon:"stop",onClick:we},null,8,["active"]),kR,Va(up,{active:te.status.loop==="true",tooltip:"Loop",icon:"infinity",onClick:Ze},null,8,["active"]),Va(up,{active:te.status["single clip"]==="true",tooltip:"Single Clip",icon:"1",onClick:Ee},null,8,["active"])]),ka("div",OR,[ka("p",DR,Mc(te.status.timecode),1),ka("p",null,"Clip id: "+Mc(te.status["clip id"]),1)])])):s_("",!0)}};var NR={exports:{}};/*! For license information please see redbee-player.min.js.LICENSE.txt */(function(D,Z){(function(te,pe){D.exports=pe()})(self,()=>(()=>{var te={3395:function(Ee,B,K){var M=this&&this.__assign||function(){return M=Object.assign||function(x){for(var N,C=1,R=arguments.length;C<R;C++)for(var I in N=arguments[C])Object.prototype.hasOwnProperty.call(N,I)&&(x[I]=N[I]);return x},M.apply(this,arguments)};B.__esModule=!0,B.jsonProperty=B.METADATA_KEY=void 0,K(1738),B.METADATA_KEY="___json__metadata",B.jsonProperty=function(x){return x===void 0&&(x={}),function(N,C){var R;if(typeof N=="function")throw new TypeError("@Serialize cannot be used on a static property ('".concat(C,"')."));if(typeof N[C]=="function")throw new TypeError("@Serialize cannot be used on a method property ('".concat(C,"')."));var I=Reflect.getMetadata("design:type",N,C);if(I===void 0)throw new TypeError("@JsonMember: type detected for '".concat(C,"' is undefined."));var E=M(M({},x),{key:C,externalName:x.externalName||C,type:x.type||I,isArray:I===Array}),T=N[B.METADATA_KEY];T?T[E.key]=E:Object.defineProperty(N,B.METADATA_KEY,{enumerable:!1,configurable:!1,writable:!1,value:(R={},R[E.key]=E,R)})}}},2624:(Ee,B,K)=>{B.__esModule=!0,B.serialize=B.deserialize=void 0;var M=K(3395);function x(N){switch(typeof N){case"string":case"number":case"boolean":return!0}return N instanceof String||N===String||N instanceof Number||N===Number||N instanceof Boolean||N===Boolean}B.deserialize=function N(C,R){if(!C||!R)return R;if(x(C))return C(R);var I=new C,E=I[M.METADATA_KEY];if(!E)return new C(R);for(var T=function(h){var y=E[h],i=R[y.externalName];if(i===void 0)return"continue";y.deserializer?I[y.key]=y.deserializer(i):y.isArray?I[y.key]=(i||[]).map(function(g){return N(y.type,g)}):I[y.key]=N(y.type,i)},l=0,c=Object.keys(E);l<c.length;l++)T(c[l]);return I},B.serialize=function N(C){var R={};if(!C)return C;var I=C[M.METADATA_KEY];if(x(C)||!I)return C;for(var E=0,T=Object.keys(I);E<T.length;E++){var l=I[T[E]],c=C[l.key];l.serializer?R[l.externalName]=N(c):l.isArray?R[l.externalName]=(c||[]).map(function(h){return N(h)}):R[l.externalName]=N(c)}return R}},3217:function(Ee,B,K){var M=this&&this.__createBinding||(Object.create?function(Y,Q,J,fe){fe===void 0&&(fe=J),Object.defineProperty(Y,fe,{enumerable:!0,get:function(){return Q[J]}})}:function(Y,Q,J,fe){fe===void 0&&(fe=J),Y[fe]=Q[J]}),x=this&&this.__exportStar||function(Y,Q){for(var J in Y)J==="default"||Object.prototype.hasOwnProperty.call(Q,J)||M(Q,Y,J)};B.__esModule=!0,B.EntitlementService=B.WhiteLabelService=B.PreferencesService=B.DocumentService=B.PaymentService=B.SearchService=B.AuthenticationService=B.UserService=B.TagService=B.LocationService=B.ContentService=B.PreferenceListItem=B.ApiError=B.AspectRatio=B.SignupModel=B.AccessModel=B.LoginMethodType=B.PaymentType=B.TransactionsWithProductOffering=B.ITransactionsWithProductOffering=B.OnNowAsset=B.EpgResponse=B.Program=B.SeasonResponse=B.Season=B.StripePaymentType=B.PurchaseStatus=B.LoginResponse=B.EntitlementActionType=B.ProductOfferingType=B.EventResponse=B.Event=B.Sprite=B.ISprite=B.Stitcher=B.AdClipCategory=B.DRM=B.IDRM=B.FormatType=B.DRMType=B.MarkerPoint=B.MarkerType=B.EntityType=B.LinkType=B.ChannelFeature=B.AssetType=B.Asset=B.DeviceType=B.ImageType=B.ImageOrientation=void 0,B.ExposureApi=B.systemConfigUtils=B.localizedUtils=B.publicationUtils=B.productOfferingUtils=B.purchaseUtils=B.tagUtils=B.userDetailsUtils=B.priceUtils=B.BaseService=B.jsonProperty=B.deserialize=void 0;var N=K(1521);B.ContentService=N.ContentService;var C=K(8847);B.LocationService=C.LocationService;var R=K(6330),I=K(5287);B.TagService=I.TagService;var E=K(2286);B.AuthenticationService=E.AuthenticationService;var T=K(1200);B.DocumentService=T.DocumentService;var l=K(8645);B.SearchService=l.SearchService;var c=K(7557);B.UserService=c.UserService;var h=K(4032);B.PaymentService=h.PaymentService;var y=K(883),i=K(1720);B.PreferencesService=i.PreferencesService;var g=K(3426);B.WhiteLabelService=g.WhiteLabelService;var d=K(3235);M(B,d,"ImageOrientation"),M(B,d,"ImageType");var r=K(3223);M(B,r,"DeviceType");var t=K(4908);M(B,t,"Asset"),M(B,t,"AssetType"),M(B,t,"ChannelFeature"),M(B,t,"LinkType"),M(B,t,"EntityType"),M(B,t,"MarkerType"),M(B,t,"MarkerPoint");var u=K(6254);M(B,u,"DRMType"),M(B,u,"FormatType"),M(B,u,"IDRM"),M(B,u,"IDRM","DRM"),M(B,u,"AdClipCategory"),M(B,u,"Stitcher"),M(B,u,"ISprite"),M(B,u,"ISprite","Sprite");var m=K(9731);M(B,m,"Event"),M(B,m,"EventResponse");var S=K(1677);M(B,S,"ProductOfferingType");var A=K(2722);M(B,A,"EntitlementActionType");var _=K(7138);M(B,_,"LoginResponse");var v=K(687);M(B,v,"PurchaseStatus"),M(B,v,"StripePaymentType");var f=K(8019);M(B,f,"Season"),M(B,f,"SeasonResponse");var b=K(256);M(B,b,"Program"),M(B,b,"EpgResponse"),M(B,b,"OnNowAsset");var p=K(6178);M(B,p,"ITransactionsWithProductOffering"),M(B,p,"ITransactionsWithProductOffering","TransactionsWithProductOffering");var k=K(7779);M(B,k,"PaymentType"),M(B,k,"LoginMethodType"),M(B,k,"AccessModel"),M(B,k,"SignupModel");var P=K(9418);M(B,P,"AspectRatio");var j=K(4246);M(B,j,"ApiError");var U=K(8374);M(B,U,"PreferenceListItem");var G=K(6330);M(B,G,"EntitlementService"),x(K(5538),B),x(K(5470),B),x(K(3512),B),x(K(3671),B),x(K(9228),B),x(K(2641),B),x(K(4579),B),x(K(5034),B),x(K(1774),B),x(K(7033),B);var ee=K(2624);M(B,ee,"deserialize");var ne=K(3395);M(B,ne,"jsonProperty");var re=K(8563);M(B,re,"BaseService");var oe=K(4697);M(B,oe,"priceUtils");var W=K(150);M(B,W,"userDetailsUtils");var Te=K(258);M(B,Te,"tagUtils");var Ue=K(3945);M(B,Ue,"purchaseUtils");var ze=K(9557);M(B,ze,"productOfferingUtils");var le=K(9384);M(B,le,"publicationUtils");var Se=K(3985);M(B,Se,"localizedUtils");var be=K(5666);M(B,be,"systemConfigUtils"),B.ExposureApi=function(Y){this.options=Y,this.authentication=new E.AuthenticationService(this.options),this.content=new N.ContentService(this.options),this.document=new T.DocumentService(this.options),this.location=new C.LocationService(this.options),this.tag=new I.TagService(this.options),this.entitlements=new R.EntitlementService(this.options),this.search=new l.SearchService(this.options),this.user=new c.UserService(this.options),this.payment=new h.PaymentService(this.options),this.preferences=new i.PreferencesService(this.options),this.system=new y.SystemService(this.options),this.whiteLabel=new g.WhiteLabelService(this.options)}},9418:(Ee,B)=>{var K;B.__esModule=!0,B.AspectRatio=void 0,(K=B.AspectRatio||(B.AspectRatio={})).THREE_BY_FOUR="4:3",K.SIXTEEN_BY_NINE="16:9",K.TWENTYSEVEN_BY_FOURTY="27.5:40.5",K.TWO_BY_ONE="2:1"},7033:(Ee,B)=>{B.__esModule=!0},7779:(Ee,B)=>{var K,M,x,N;B.__esModule=!0,B.PaymentType=B.LoginMethodType=B.SignupModel=B.AccessModel=void 0,(N=B.AccessModel||(B.AccessModel={})).OPEN="open",N.LOGIN="login",N.PAY="pay",(x=B.SignupModel||(B.SignupModel={})).PROVISONED="provisioned",x.CONFIRMED="confirmed",x.UNCONFIRMED="unconfirmed",(M=B.LoginMethodType||(B.LoginMethodType={})).FIREBASE="firebase",M.USER_ACCOUNTS="useraccounts",M.OAUTH="oauth",(K=B.PaymentType||(B.PaymentType={})).ADYEN="adyen",K.STRIPE="stripe",K.EXTERNAL="external",K.DENY="deny",K.VOUCHERS_ONLY="vouchers"},3235:(Ee,B)=>{var K;B.__esModule=!0,B.ImageType=B.ImageOrientation=void 0,B.ImageOrientation={LANDSCAPE:"LANDSCAPE",PORTRAIT:"PORTRAIT",SQUARE:"SQUARE"},(K=B.ImageType||(B.ImageType={})).POSTER="poster",K.BANNER="banner",K.LOGO="logo",K.THUMBNAIL="thumbnail",K.COVER="cover",K.OTHER="other"},3223:(Ee,B)=>{B.__esModule=!0,B.DeviceType=void 0,B.DeviceType={WEB:"WEB",MOBILE:"MOBILE",TABLET:"TABLET",SMART_TV:"SMART_TV",APPLE_TV:"APPLE_TV",CONSOLE:"CONSOLE",STB:"STB"}},2722:(Ee,B)=>{var K;B.__esModule=!0,B.EntitlementActionType=void 0,(K=B.EntitlementActionType||(B.EntitlementActionType={})).BUY_WATCH_NOW="BUY_WATCH_NOW",K.BUY_WATCH_LATER="BUY_WATCH_LATER",K.WAIT="WAIT",K.LOGIN="LOGIN"},6254:(Ee,B)=>{B.__esModule=!0,B.ISprite=B.IDRM=B.AdClipCategory=B.Stitcher=B.FormatType=B.DRMType=void 0,B.DRMType={PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha",FAIRPLAY:"com.apple.fps"},B.FormatType={DASH:"DASH",HLS:"HLS",SMOOTHSTREAMING:"SMOOTHSTREAMING",MP4:"MP4",MP3:"MP3"},B.Stitcher={GENERIC:"GENERIC",INTERNAL:"INTERNAL",NOWTILUS:"NOWTILUS"},B.AdClipCategory={VOD:"vod",AD:"ad"},B.IDRM=function(){},B.ISprite=function(){}},1774:(Ee,B)=>{B.__esModule=!0},687:(Ee,B)=>{var K,M;B.__esModule=!0,B.PurchaseStatus=B.StripePaymentType=void 0,(M=B.StripePaymentType||(B.StripePaymentType={})).CARD="card",M.IDEAL="ideal",(K=B.PurchaseStatus||(B.PurchaseStatus={})).FULFILLED="FULFILLED",K.PENDING="PENDING",K.REJECTED="REJECTED"},5034:(Ee,B)=>{B.__esModule=!0},1677:(Ee,B)=>{var K;B.__esModule=!0,B.ProductOfferingType=void 0,(K=B.ProductOfferingType||(B.ProductOfferingType={})).RENTAL="rental",K.SUBSCRIPTION="subscription",K.PURCHASE="purchase",K.EVENT="event"},6178:(Ee,B)=>{B.__esModule=!0,B.ITransactionsWithProductOffering=void 0,B.ITransactionsWithProductOffering=function(){}},5538:(Ee,B)=>{var K,M,x;B.__esModule=!0,B.WLInternalActionType=B.WLActionType=B.WLActionTypes=void 0,(x=B.WLActionTypes||(B.WLActionTypes={})).NavigateToPage="NavigateToPage",x.ExternalLink="ExternalLink",x.PlayAsset="PlayAsset",x.NavigateToDetails="NavigateToDetails",(M=B.WLActionType||(B.WLActionType={})).ExternalLink="ExternalLink",M.NavigateToPage="NavigateToPage",M.NavigateToDetails="NavigateToDetails",M.PlayAsset="PlayAsset",(K=B.WLInternalActionType||(B.WLInternalActionType={})).ExternalUrlAction="ExternalUrlAction",K.BlockAction="BlockAction"},5470:(Ee,B)=>{var K,M,x;B.__esModule=!0,B.WLComponentSubType=B.WLComponentType=B.WLHeroBannerItemType=B.WLCarouselAssetQueryTypes=void 0,(x=B.WLCarouselAssetQueryTypes||(B.WLCarouselAssetQueryTypes={})).ASSET="AssetQuery",x.EPG="ChannelEpg",x.EVENT="LiveEvents",x.RELATED="Related",x.OTHERS_HAVE_WATCHED="OthersHaveWatched",x.RECOMMENDED="Recommended",x.RECENTLY_WATCHED="RecentlyWatched",x.CONTINUE_WATCHING="ContinueWatching",x.TVOD="Tvod",x.FAVORITES="Favourites",x.FULL_EPG="Epg",x.TAG_FEED_URL="ApiTagFeedUrl",x.TRAILERS="Trailers",x.TAG_TYPE="TagType",(M=B.WLHeroBannerItemType||(B.WLHeroBannerItemType={})).HEROBANNER_ITEM="herobanner_item",M.VIDEO_HEROBANNER_ITEM="video_herobanner_item",(K=B.WLComponentType||(B.WLComponentType={})).CAROUSEL="carousel",K.HEROBANNER="herobanner",K.ASSET_DISPLAY="asset_display",K.MENU="menu",K.PAGE="page",K.ASSET_PAGE="asset_page",K.BROWSE_PAGE="browse_page",K.FOOTER="footer",K.IMAGE="image",K.TEXT="text",K.EPG="epg",K.IFRAME="iframe",K.TAG_TYPE="tagtype",(B.WLComponentSubType||(B.WLComponentSubType={})).TAG_FEED_QUERY="TagFeedQuery"},3512:(Ee,B)=>{B.__esModule=!0},3671:(Ee,B)=>{B.__esModule=!0},9228:(Ee,B)=>{B.__esModule=!0},2641:(Ee,B)=>{B.__esModule=!0},4579:(Ee,B)=>{var K,M,x;B.__esModule=!0,B.CarouselDensity=B.PresentationImageOrientation=B.CarouselLayout=void 0,(x=B.CarouselLayout||(B.CarouselLayout={})).CAROUSEL="carousel",x.GRID="grid",x.LIST="list",(M=B.PresentationImageOrientation||(B.PresentationImageOrientation={})).LANDSCAPE="landscape",M.PORTRAIT="portrait",(K=B.CarouselDensity||(B.CarouselDensity={})).LOW="LOW",K.MEDIUM="MEDIUM",K.HIGH="HIGH"},4246:(Ee,B)=>{B.__esModule=!0,B.ApiError=void 0,B.ApiError=function(K){this.message=K==null?void 0:K.message,this.httpCode=K==null?void 0:K.httpCode}},4908:function(Ee,B,K){var M,x=this&&this.__extends||(M=function(r,t){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(u[S]=m[S])},M(r,t)},function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function u(){this.constructor=r}M(r,t),r.prototype=t===null?Object.create(t):(u.prototype=t.prototype,new u)}),N=this&&this.__decorate||function(r,t,u,m){var S,A=arguments.length,_=A<3?t:m===null?m=Object.getOwnPropertyDescriptor(t,u):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(r,t,u,m);else for(var v=r.length-1;v>=0;v--)(S=r[v])&&(_=(A<3?S(_):A>3?S(t,u,_):S(t,u))||_);return A>3&&_&&Object.defineProperty(t,u,_),_},C=this&&this.__metadata||function(r,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,t)};B.__esModule=!0,B.Asset=B.MarkerPoint=B.MarkerType=B.LinkType=B.EntityType=B.AssetType=B.ChannelFeature=B.lowResBoundaries=B.mediumResBoundaries=void 0;var R,I,E,T,l=K(8019),c=K(9384),h=K(3985),y=K(8572),i=K(3395);(T=B.mediumResBoundaries||(B.mediumResBoundaries={}))[T.lower=500]="lower",T[T.upper=1e3]="upper",(E=B.lowResBoundaries||(B.lowResBoundaries={}))[E.upper=499]="upper",(I=B.ChannelFeature||(B.ChannelFeature={})).VIRTUAL="VIRTUAL",I.VC_CURATED="VC_CURATED",I.VC_PERSONALIZED="VC_PERSONALIZED",I.VC_SCHEDULED="VC_SCHEDULED",I.EPG="EPG",(R=B.AssetType||(B.AssetType={})).MOVIE="MOVIE",R.PROGRAM="PROGRAM",R.TV_SHOW="TV_SHOW",R.TV_CHANNEL="TV_CHANNEL",R.EPISODE="EPISODE",R.CLIP="CLIP",R.AD="AD",R.LIVE_EVENT="LIVE_EVENT",R.EVENT="EVENT",R.COLLECTION="COLLECTION",R.PODCAST="PODCAST",R.PODCAST_EPISODE="PODCAST_EPISODE",R.OTHER="OTHER",(B.EntityType||(B.EntityType={})).ASSET="ASSET",(B.LinkType||(B.LinkType={})).TRAILER="TRAILER",B.MarkerType={INTRO:"INTRO",CREDITS:"CREDITS",POINT:"POINT",CHAPTER:"CHAPTER"};var g=function(r){function t(){var u=r!==null&&r.apply(this,arguments)||this;return u.localized=[],u}return x(t,r),N([(0,i.jsonProperty)(),C("design:type",Number)],t.prototype,"offset"),N([(0,i.jsonProperty)(),C("design:type",Number)],t.prototype,"endOffset"),N([(0,i.jsonProperty)(),C("design:type",String)],t.prototype,"type"),N([(0,i.jsonProperty)({type:Object}),C("design:type",Array)],t.prototype,"localized"),t}(y.WithLocalized);B.MarkerPoint=g;var d=function(r){function t(){var u=r!==null&&r.apply(this,arguments)||this;return u.medias=[],u.tags=[],u.publications=[],u.externalReferences=[],u.linkedEntities=[],u.participants=[],u.productionCountries=[],u.slugs=[],u.markerPoints=[],u.localized=[],u.subtitles=[],u.audioTracks=[],u.series=function(){return u.tags.some(function(m){return m.type==="series"})},u.isLive=function(){if(u.startTime&&u.endTime){var m=new Date,S=new Date(u.startTime);if(new Date(u.endTime)>m&&S<=m)return!0}return!1},u.inFuture=function(){return c.publicationUtils.allInFuture(u.publications)},u.getStartTime=function(){var m,S;if(u.publications.length!==0||u.startTime||!((m=u.event)===null||m===void 0)&&m.startTime){if(!((S=u.event)===null||S===void 0)&&S.startTime)return u.event.startTime;var A=u.publications.sort(c.publicationUtils.sortPublicationsAscending);if(u.inFuture()){var _=A.filter(function(f){return c.publicationUtils.inFuture(f)});if(_.length)return _[0].fromDate}var v=A.filter(function(f){return c.publicationUtils.isActive(f)});return v.length?u.startTime?new Date(u.startTime):v[0].fromDate:u.startTime?new Date(u.startTime):A[0].fromDate}},u.isGeoBlocked=function(m){return c.publicationUtils.isGeoBlocked(u.publications,m)},u.getTitle=function(m,S,A){return A===void 0&&(A=!0),u.episode&&u.season&&A?"S".concat(u.season," E").concat(u.episode," ")+h.localizedUtils.getLocalizedValue(u.localized,"title",m,S):h.localizedUtils.getLocalizedValue(u.localized,"title",m,S)},u.getSortingTitle=function(m,S){return h.localizedUtils.getLocalizedValue(u.localized,"sortingTitle",m,S)},u}return x(t,r),N([(0,i.jsonProperty)(),C("design:type",String)],t.prototype,"assetId"),N([(0,i.jsonProperty)(),C("design:type",Date)],t.prototype,"changed"),N([(0,i.jsonProperty)(),C("design:type",Date)],t.prototype,"created"),N([(0,i.jsonProperty)(),C("design:type",String)],t.prototype,"type"),N([(0,i.jsonProperty)(),C("design:type",Array)],t.prototype,"medias"),N([(0,i.jsonProperty)(),C("design:type",Number)],t.prototype,"productionYear"),N([(0,i.jsonProperty)({type:Object}),C("design:type",Array)],t.prototype,"tags"),N([(0,i.jsonProperty)({type:Object}),C("design:type",Array)],t.prototype,"publications"),N([(0,i.jsonProperty)(),C("design:type",String)],t.prototype,"startTime"),N([(0,i.jsonProperty)(),C("design:type",String)],t.prototype,"materialType"),N([(0,i.jsonProperty)(),C("design:type",String)],t.prototype,"endTime"),N([(0,i.jsonProperty)(),C("design:type",Number)],t.prototype,"season"),N([(0,i.jsonProperty)(),C("design:type",Number)],t.prototype,"episode"),N([(0,i.jsonProperty)(),C("design:type",String)],t.prototype,"tvShowId"),N([(0,i.jsonProperty)({type:Object}),C("design:type",Array)],t.prototype,"externalReferences"),N([(0,i.jsonProperty)({type:Object}),C("design:type",Array)],t.prototype,"linkedEntities"),N([(0,i.jsonProperty)({type:Object}),C("design:type",Array)],t.prototype,"participants"),N([(0,i.jsonProperty)(),C("design:type",Number)],t.prototype,"duration"),N([(0,i.jsonProperty)({type:l.Season}),C("design:type",Array)],t.prototype,"seasons"),N([(0,i.jsonProperty)(),C("design:type",Object)],t.prototype,"userData"),N([(0,i.jsonProperty)({type:String}),C("design:type",Array)],t.prototype,"productionCountries"),N([(0,i.jsonProperty)({type:Object}),C("design:type",Array)],t.prototype,"parentalRatings"),N([(0,i.jsonProperty)({type:String}),C("design:type",Array)],t.prototype,"channelFeatures"),N([(0,i.jsonProperty)({type:Object}),C("design:type",Array)],t.prototype,"overlayWidgets"),N([(0,i.jsonProperty)({type:String}),C("design:type",Array)],t.prototype,"slugs"),N([(0,i.jsonProperty)({type:g}),C("design:type",Array)],t.prototype,"markerPoints"),N([(0,i.jsonProperty)(),C("design:type",Object)],t.prototype,"event"),N([(0,i.jsonProperty)({type:Object}),C("design:type",Array)],t.prototype,"localized"),N([(0,i.jsonProperty)({type:String}),C("design:type",Array)],t.prototype,"subtitles"),N([(0,i.jsonProperty)({type:String}),C("design:type",Array)],t.prototype,"audioTracks"),N([(0,i.jsonProperty)({type:Object}),C("design:type",Array)],t.prototype,"assetFeatures"),t}(y.WithLocalized);B.Asset=d},9731:function(Ee,B,K){var M=this&&this.__decorate||function(E,T,l,c){var h,y=arguments.length,i=y<3?T:c===null?c=Object.getOwnPropertyDescriptor(T,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(E,T,l,c);else for(var g=E.length-1;g>=0;g--)(h=E[g])&&(i=(y<3?h(i):y>3?h(T,l,i):h(T,l))||i);return y>3&&i&&Object.defineProperty(T,l,i),i},x=this&&this.__metadata||function(E,T){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(E,T)};B.__esModule=!0,B.EventResponse=B.Event=void 0;var N=K(4908),C=K(3395),R=function(){function E(){}return M([(0,C.jsonProperty)(),x("design:type",String)],E.prototype,"assetId"),M([(0,C.jsonProperty)(),x("design:type",String)],E.prototype,"startTime"),M([(0,C.jsonProperty)(),x("design:type",String)],E.prototype,"endTime"),M([(0,C.jsonProperty)({type:N.Asset}),x("design:type",N.Asset)],E.prototype,"asset"),E}();B.Event=R;var I=function(){function E(){var T=this;this.items=[],this.numberOfPages=function(){return Math.ceil(T.totalCount/T.pageSize)},this.getInitialSlide=function(){var l=new Date;if(T.items.length===0)return 0;if(T.items[0].startTime){for(var c=0;c<T.items.length;c++)if(new Date(T.items[c].endTime)>l)return c}return 0}}return M([(0,C.jsonProperty)(),x("design:type",Number)],E.prototype,"pageSize"),M([(0,C.jsonProperty)(),x("design:type",Number)],E.prototype,"pageNumber"),M([(0,C.jsonProperty)(),x("design:type",Number)],E.prototype,"totalCount"),M([(0,C.jsonProperty)({type:R}),x("design:type",Array)],E.prototype,"items"),E}();B.EventResponse=I},8572:(Ee,B,K)=>{B.__esModule=!0,B.WithLocalized=void 0;var M=K(3985),x=function(){function N(){}return N.prototype.getTitle=function(C,R){return M.localizedUtils.getLocalizedValue(this.localized,"title",C,R)},N.prototype.getDescription=function(C,R,I){return M.localizedUtils.getDescription(this.localized,C,R,I)},N.prototype.getShortDescription=function(C,R,I){return M.localizedUtils.getShortDescription(this.localized,C,R,I)},N.prototype.getMediumDescription=function(C,R){return M.localizedUtils.getMediumDescription(this.localized,C,R)},N.prototype.getLongDescription=function(C,R){return M.localizedUtils.getLongDescription(this.localized,C,R)},N.prototype.getLocaleItem=function(C){return M.localizedUtils.getLocaleItem(this.localized,C)},N.prototype.getImage=function(C,R,I){return M.localizedUtils.getImage(this.localized,C,R,I)},N.prototype.getImages=function(C,R){return M.localizedUtils.getImages(this.localized,C,R)},N.prototype.getLocalizedValue=function(C,R,I){return M.localizedUtils.getLocalizedValue(this.localized,C,R,I)},N}();B.WithLocalized=x},7138:function(Ee,B,K){var M=this&&this.__decorate||function(R,I,E,T){var l,c=arguments.length,h=c<3?I:T===null?T=Object.getOwnPropertyDescriptor(I,E):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(R,I,E,T);else for(var y=R.length-1;y>=0;y--)(l=R[y])&&(h=(c<3?l(h):c>3?l(I,E,h):l(I,E))||h);return c>3&&h&&Object.defineProperty(I,E,h),h},x=this&&this.__metadata||function(R,I){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(R,I)};B.__esModule=!0,B.LoginResponse=void 0;var N=K(3395),C=function(){function R(){var I=this;this.isLoggedIn=function(){return I.hasSession()&&!I.isAnonymous},this.isFirebase=function(){return I.accountId.startsWith("firebase..")},this.hasSession=function(){return I.sessionToken&&I.sessionToken!==""&&Date.parse(I.expirationDateTime)>Date.now()}}return M([(0,N.jsonProperty)(),x("design:type",String)],R.prototype,"expirationDateTime"),M([(0,N.jsonProperty)(),x("design:type",String)],R.prototype,"sessionToken"),M([(0,N.jsonProperty)(),x("design:type",Date)],R.prototype,"informationCollectionConsentGiven"),M([(0,N.jsonProperty)(),x("design:type",Date)],R.prototype,"informationCollectionConsentRequiredDate"),M([(0,N.jsonProperty)(),x("design:type",Boolean)],R.prototype,"isAnonymous"),M([(0,N.jsonProperty)(),x("design:type",String)],R.prototype,"language"),M([(0,N.jsonProperty)(),x("design:type",Object)],R.prototype,"username"),M([(0,N.jsonProperty)(),x("design:type",Object)],R.prototype,"configReloadQueryParameter"),M([(0,N.jsonProperty)(),x("design:type",String)],R.prototype,"userId"),M([(0,N.jsonProperty)(),x("design:type",String)],R.prototype,"accountId"),M([(0,N.jsonProperty)(),x("design:type",Boolean)],R.prototype,"isOverDeviceLimit"),M([(0,N.jsonProperty)(),x("design:type",String)],R.prototype,"crmToken"),M([(0,N.jsonProperty)(),x("design:type",Boolean)],R.prototype,"child"),M([(0,N.jsonProperty)(),x("design:type",Object)],R.prototype,"userProfile"),R}();B.LoginResponse=C},8374:(Ee,B,K)=>{B.__esModule=!0,B.PreferenceListItem=void 0;var M=K(2624),x=K(4908);B.PreferenceListItem=function(N){this.assetId=N.assetId,this.lastUpdated=new Date(N.lastUpdated),this.order=N.order,this.asset=(0,M.deserialize)(x.Asset,N.asset)}},256:function(Ee,B,K){var M=this&&this.__decorate||function(l,c,h,y){var i,g=arguments.length,d=g<3?c:y===null?y=Object.getOwnPropertyDescriptor(c,h):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,c,h,y);else for(var r=l.length-1;r>=0;r--)(i=l[r])&&(d=(g<3?i(d):g>3?i(c,h,d):i(c,h))||d);return g>3&&d&&Object.defineProperty(c,h,d),d},x=this&&this.__metadata||function(l,c){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,c)};B.__esModule=!0,B.OnNowResponse=B.OnNowAsset=B.EpgResponse=B.Program=void 0;var N=K(3395),C=K(4908),R=function(){function l(){}return M([(0,N.jsonProperty)(),x("design:type",String)],l.prototype,"assetId"),M([(0,N.jsonProperty)(),x("design:type",String)],l.prototype,"startTime"),M([(0,N.jsonProperty)(),x("design:type",String)],l.prototype,"endTime"),M([(0,N.jsonProperty)(),x("design:type",String)],l.prototype,"programId"),M([(0,N.jsonProperty)(),x("design:type",String)],l.prototype,"channelId"),M([(0,N.jsonProperty)({type:C.Asset}),x("design:type",C.Asset)],l.prototype,"asset"),M([(0,N.jsonProperty)(),x("design:type",Boolean)],l.prototype,"blackout"),l}();B.Program=R;var I=function(){function l(){this.programs=[]}return M([(0,N.jsonProperty)(),x("design:type",Number)],l.prototype,"totalHitsAllchannels"),M([(0,N.jsonProperty)({type:R}),x("design:type",Array)],l.prototype,"programs"),M([(0,N.jsonProperty)(),x("design:type",String)],l.prototype,"channelId"),l}();B.EpgResponse=I;var E=function(){function l(){}return M([(0,N.jsonProperty)(),x("design:type",String)],l.prototype,"startTime"),M([(0,N.jsonProperty)(),x("design:type",String)],l.prototype,"endTime"),M([(0,N.jsonProperty)({type:C.Asset}),x("design:type",C.Asset)],l.prototype,"asset"),l}();B.OnNowAsset=E;var T=function(){function l(){}return M([(0,N.jsonProperty)(),x("design:type",Boolean)],l.prototype,"active"),M([(0,N.jsonProperty)({type:C.Asset}),x("design:type",C.Asset)],l.prototype,"channel"),M([(0,N.jsonProperty)({type:E}),x("design:type",Array)],l.prototype,"assets"),l}();B.OnNowResponse=T},8019:function(Ee,B,K){var M,x=this&&this.__extends||(M=function(c,h){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,i){y.__proto__=i}||function(y,i){for(var g in i)Object.prototype.hasOwnProperty.call(i,g)&&(y[g]=i[g])},M(c,h)},function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function y(){this.constructor=c}M(c,h),c.prototype=h===null?Object.create(h):(y.prototype=h.prototype,new y)}),N=this&&this.__decorate||function(c,h,y,i){var g,d=arguments.length,r=d<3?h:i===null?i=Object.getOwnPropertyDescriptor(h,y):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(c,h,y,i);else for(var t=c.length-1;t>=0;t--)(g=c[t])&&(r=(d<3?g(r):d>3?g(h,y,r):g(h,y))||r);return d>3&&r&&Object.defineProperty(h,y,r),r},C=this&&this.__metadata||function(c,h){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,h)};B.__esModule=!0,B.SeasonResponse=B.Season=void 0;var R=K(4908),I=K(8572),E=K(3395),T=function(c){function h(){var y=c!==null&&c.apply(this,arguments)||this;return y.localized=[],y}return x(h,c),N([(0,E.jsonProperty)({type:Object}),C("design:type",Array)],h.prototype,"localized"),N([(0,E.jsonProperty)(),C("design:type",Number)],h.prototype,"season"),N([(0,E.jsonProperty)(),C("design:type",String)],h.prototype,"seasonId"),N([(0,E.jsonProperty)(),C("design:type",Number)],h.prototype,"episodeCount"),N([(0,E.jsonProperty)({type:R.Asset}),C("design:type",Array)],h.prototype,"episodes"),h}(I.WithLocalized);B.Season=T;var l=function(){function c(){}return N([(0,E.jsonProperty)({type:T}),C("design:type",Array)],c.prototype,"items"),c}();B.SeasonResponse=l},4138:function(Ee,B,K){var M=this&&this.__decorate||function(I,E,T,l){var c,h=arguments.length,y=h<3?E:l===null?l=Object.getOwnPropertyDescriptor(E,T):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(I,E,T,l);else for(var i=I.length-1;i>=0;i--)(c=I[i])&&(y=(h<3?c(y):h>3?c(E,T,y):c(E,T))||y);return h>3&&y&&Object.defineProperty(E,T,y),y},x=this&&this.__metadata||function(I,E){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(I,E)};B.__esModule=!0,B.SignupResponse=void 0;var N=K(3395),C=K(7138),R=function(){function I(){}return M([(0,N.jsonProperty)(),x("design:type",String)],I.prototype,"unConfirmed"),M([(0,N.jsonProperty)(),x("design:type",C.LoginResponse)],I.prototype,"loginResponse"),I}();B.SignupResponse=R},2286:function(Ee,B,K){var M,x=this&&this.__extends||(M=function(c,h){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,i){y.__proto__=i}||function(y,i){for(var g in i)Object.prototype.hasOwnProperty.call(i,g)&&(y[g]=i[g])},M(c,h)},function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function y(){this.constructor=c}M(c,h),c.prototype=h===null?Object.create(h):(y.prototype=h.prototype,new y)}),N=this&&this.__assign||function(){return N=Object.assign||function(c){for(var h,y=1,i=arguments.length;y<i;y++)for(var g in h=arguments[y])Object.prototype.hasOwnProperty.call(h,g)&&(c[g]=h[g]);return c},N.apply(this,arguments)},C=this&&this.__awaiter||function(c,h,y,i){return new(y||(y=Promise))(function(g,d){function r(m){try{u(i.next(m))}catch(S){d(S)}}function t(m){try{u(i.throw(m))}catch(S){d(S)}}function u(m){var S;m.done?g(m.value):(S=m.value,S instanceof y?S:new y(function(A){A(S)})).then(r,t)}u((i=i.apply(c,h||[])).next())})},R=this&&this.__generator||function(c,h){var y,i,g,d,r={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return d={next:t(0),throw:t(1),return:t(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function t(u){return function(m){return function(S){if(y)throw new TypeError("Generator is already executing.");for(;r;)try{if(y=1,i&&(g=2&S[0]?i.return:S[0]?i.throw||((g=i.return)&&g.call(i),0):i.next)&&!(g=g.call(i,S[1])).done)return g;switch(i=0,g&&(S=[2&S[0],g.value]),S[0]){case 0:case 1:g=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,i=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(!((g=(g=r.trys).length>0&&g[g.length-1])||S[0]!==6&&S[0]!==2)){r=0;continue}if(S[0]===3&&(!g||S[1]>g[0]&&S[1]<g[3])){r.label=S[1];break}if(S[0]===6&&r.label<g[1]){r.label=g[1],g=S;break}if(g&&r.label<g[2]){r.label=g[2],r.ops.push(S);break}g[2]&&r.ops.pop(),r.trys.pop();continue}S=h.call(c,r)}catch(A){S=[6,A],i=0}finally{y=g=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([u,m])}}};B.__esModule=!0,B.AuthenticationService=void 0;var I=K(8563),E=K(2624),T=K(7138),l=function(c){function h(){return c!==null&&c.apply(this,arguments)||this}return x(h,c),h.prototype.login=function(y){var i=y.customer,g=y.businessUnit,d=y.username,r=y.password,t=y.device,u=y.informationCollectionConsentGivenNow,m=u!==void 0&&u;return C(this,void 0,void 0,function(){return R(this,function(S){return[2,this.post("".concat(this.cuBuUrl({customer:i,businessUnit:g,apiVersion:"v3"}),"/auth/login"),{username:d,password:r,device:t,informationCollectionConsentGivenNow:m}).then(function(A){return(0,E.deserialize)(T.LoginResponse,A)})]})})},h.prototype.loginAnonymous=function(y){var i=y.customer,g=y.businessUnit,d=y.device;return C(this,void 0,void 0,function(){return R(this,function(r){return[2,this.post("".concat(this.cuBuUrl({customer:i,businessUnit:g,apiVersion:"v2"}),"/auth/anonymous"),{device:d,deviceId:d.deviceId}).then(function(t){return(0,E.deserialize)(T.LoginResponse,Object.assign({},t,{isAnonymous:!0}))})]})})},h.prototype.loginByOauthToken=function(y){var i=y.customer,g=y.businessUnit,d=y.token,r=y.device;return C(this,void 0,void 0,function(){var t,u;return R(this,function(m){return t="".concat(this.cuBuUrl({customer:i,businessUnit:g,apiVersion:"v2"}),"/auth/oauthLogin"),u={token:d,device:r},[2,this.post(t,u).then(function(S){return(0,E.deserialize)(T.LoginResponse,S)})]})})},h.prototype.loginFirebase=function(y){var i=y.username,g=y.email,d=y.displayName,r=y.providerId,t=y.accessToken,u=y.customer,m=y.businessUnit,S=y.emailVerified,A=y.device;return C(this,void 0,void 0,function(){var _;return R(this,function(v){return _={username:i,email:g,displayName:d,emailVerified:S,providerId:r,accessToken:t,device:A},[2,this.post("".concat(this.cuBuUrl({customer:u,businessUnit:m,apiVersion:"v2"}),"/auth/firebaseLogin"),_).then(function(f){return(0,E.deserialize)(T.LoginResponse,f)})]})})},h.prototype.logout=function(y){var i=y.customer,g=y.businessUnit,d=y.fromAllDevice,r=d!==void 0&&d;return C(this,void 0,void 0,function(){return R(this,function(t){return[2,this.delete("".concat(this.cuBuUrl({customer:i,businessUnit:g,apiVersion:"v2"}),"/auth/login?fromAllDevice=").concat(r),this.options.authHeader())]})})},h.prototype.validateSession=function(y){var i=y.customer,g=y.businessUnit,d=y.headers;return C(this,void 0,void 0,function(){return R(this,function(r){return[2,this.get("".concat(this.cuBuUrl({customer:i,businessUnit:g,apiVersion:"v2"}),"/auth/session"),N(N({},this.options.authHeader()),d))]})})},h}(I.BaseService);B.AuthenticationService=l},8563:(Ee,B,K)=>{B.__esModule=!0,B.BaseService=B.errorMapper=void 0;var M=K(3541),x=K(4246);B.errorMapper=function(C){var R,I,E,T;throw C?typeof C=="string"?new x.ApiError({message:C,httpCode:500}):new x.ApiError({httpCode:C.response?C.response.status:500,message:!((I=(R=C.response)===null||R===void 0?void 0:R.data)===null||I===void 0)&&I.message?(T=(E=C.response)===null||E===void 0?void 0:E.data)===null||T===void 0?void 0:T.message:C.message}):new x.ApiError({message:"Unknown error",httpCode:500})};var N=function(){function C(R){this.options=R}return C.prototype.setOptions=function(R){this.options=R},C.prototype.cuBuUrl=function(R){var I=R.customer,E=R.businessUnit,T=R.apiVersion,l=I||this.options.customer,c=E||this.options.businessUnit;if(!l||!c)throw new Error("Missing customer or businessUnit");return"/".concat(T,"/customer/").concat(l,"/businessunit/").concat(c)},C.prototype.get=function(R,I,E){return M.default.get(new URL(R,this.options.baseUrl).toString(),{headers:I}).then(function(T){return T.data}).catch(E||B.errorMapper)},C.prototype.delete=function(R,I,E){return M.default.delete(new URL(R,this.options.baseUrl).toString(),{headers:I}).then(function(T){return T.data}).catch(E||B.errorMapper)},C.prototype.put=function(R,I,E,T){return M.default.put(new URL(R,this.options.baseUrl).toString(),I,{headers:E}).then(function(l){return l.data}).catch(T||B.errorMapper)},C.prototype.post=function(R,I,E,T){return M.default.post(new URL(R,this.options.baseUrl).toString(),I,{headers:E}).then(function(l){return l.data}).catch(T||B.errorMapper)},C}();B.BaseService=N},1521:function(Ee,B,K){var M,x=this&&this.__extends||(M=function(d,r){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,u){t.__proto__=u}||function(t,u){for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(t[m]=u[m])},M(d,r)},function(d,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=d}M(d,r),d.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),N=this&&this.__assign||function(){return N=Object.assign||function(d){for(var r,t=1,u=arguments.length;t<u;t++)for(var m in r=arguments[t])Object.prototype.hasOwnProperty.call(r,m)&&(d[m]=r[m]);return d},N.apply(this,arguments)},C=this&&this.__awaiter||function(d,r,t,u){return new(t||(t=Promise))(function(m,S){function A(f){try{v(u.next(f))}catch(b){S(b)}}function _(f){try{v(u.throw(f))}catch(b){S(b)}}function v(f){var b;f.done?m(f.value):(b=f.value,b instanceof t?b:new t(function(p){p(b)})).then(A,_)}v((u=u.apply(d,r||[])).next())})},R=this&&this.__generator||function(d,r){var t,u,m,S,A={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return S={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function _(v){return function(f){return function(b){if(t)throw new TypeError("Generator is already executing.");for(;A;)try{if(t=1,u&&(m=2&b[0]?u.return:b[0]?u.throw||((m=u.return)&&m.call(u),0):u.next)&&!(m=m.call(u,b[1])).done)return m;switch(u=0,m&&(b=[2&b[0],m.value]),b[0]){case 0:case 1:m=b;break;case 4:return A.label++,{value:b[1],done:!1};case 5:A.label++,u=b[1],b=[0];continue;case 7:b=A.ops.pop(),A.trys.pop();continue;default:if(!((m=(m=A.trys).length>0&&m[m.length-1])||b[0]!==6&&b[0]!==2)){A=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){A.label=b[1];break}if(b[0]===6&&A.label<m[1]){A.label=m[1],m=b;break}if(m&&A.label<m[2]){A.label=m[2],A.ops.push(b);break}m[2]&&A.ops.pop(),A.trys.pop();continue}b=r.call(d,A)}catch(p){b=[6,p],u=0}finally{t=m=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([v,f])}}},I=this&&this.__spreadArray||function(d,r,t){if(t||arguments.length===2)for(var u,m=0,S=r.length;m<S;m++)!u&&m in r||(u||(u=Array.prototype.slice.call(r,0,m)),u[m]=r[m]);return d.concat(u||Array.prototype.slice.call(r))};B.__esModule=!0,B.ContentService=void 0;var E=K(8563),T=K(4126),l=K(2624),c=K(4908),h=K(9877),y=K(8019),i=K(256),g=function(d){function r(){return d!==null&&d.apply(this,arguments)||this}return x(r,d),r.prototype.getAssetById=function(t){var u=t.customer,m=t.businessUnit,S=t.assetId,A=t.headers;return this.get("".concat(this.cuBuUrl({customer:u,businessUnit:m,apiVersion:"v1"}),"/content/asset/").concat(S,"?").concat(T.stringify({fieldSet:"ALL"})),A).then(function(_){return(0,l.deserialize)(c.Asset,_)})},r.prototype.getAssets=function(t){var u=t.customer,m=t.businessUnit,S=t.query,A=t.sort,_=t.pageNumber,v=t.pageSize,f=t.allowedCountry,b=t.headers,p=t.assetType,k=t.onlyPublished,P={query:S,sort:A,pageSize:v||30,pageNumber:_||1,fieldSet:"ALL",onlyPublished:k===void 0||k,allowedCountry:f,assetType:p};return this.get("".concat(this.cuBuUrl({customer:u,businessUnit:m,apiVersion:"v1"}),"/content/asset?").concat(T.stringify(P)),b).then(function(j){return N(N({},j),{items:j.items.map(function(U){return(0,l.deserialize)(c.Asset,U)})})})},r.prototype.getAllAssets=function(t){var u=t.customer,m=t.businessUnit;return C(this,void 0,void 0,function(){var S,A,_,v,f,b,p,k=this;return R(this,function(P){switch(P.label){case 0:return[4,this.getAssets({customer:u,businessUnit:m,pageSize:100,pageNumber:1})];case 1:return S=P.sent(),A=S.totalCount,_=S.items,v=S.pageSize,f=Math.ceil(A/v)-1,b=new Array(f).fill("").map(function(j,U){return U+2}),[4,Promise.all(b.map(function(j){return k.getAssets({customer:u,businessUnit:m,pageSize:v,pageNumber:j}).then(function(U){return U.items})}))];case 2:return p=P.sent(),[2,I([_],p,!0).flatMap(function(j){return I([],j,!0)})]}})})},r.prototype.getCollectionEntries=function(t){var u=t.customer,m=t.businessUnit,S=t.assetId,A=t.headers,_=t.pageSize,v=t.pageNumber,f=t.sort,b=t.onlyPublished,p={fieldSet:"ALL",pageSize:_,pageNumber:v,sort:f,onlyPublished:b===void 0||b};return this.get("".concat(this.cuBuUrl({customer:u,businessUnit:m,apiVersion:"v1"}),"/content/asset/").concat(S,"/collectionentries?").concat(T.stringify(p)),A).then(function(k){return N(N({},k),{items:k.items.map(function(P){return(0,l.deserialize)(c.Asset,P)})})})},r.prototype.getEpg=function(t){var u=t.daysForward,m=t.daysBackward,S=t.pageNumber,A=t.pageSize,_=t.channelId,v=t.customer,f=t.businessUnit,b=t.date,p={daysBackward:m??0,daysForward:u??0,pageSize:A||500,pageNumber:S||1};b=b||new Date;var k=(0,h.epgDateFormatter)(b);return this.get("".concat(this.cuBuUrl({customer:v,businessUnit:f,apiVersion:"v2"}),"/epg/").concat(_,"/date/").concat(k,"?").concat(T.stringify(p))).then(function(P){return(0,l.deserialize)(i.EpgResponse,P)})},r.prototype.getOnNowByChannelId=function(t){var u=t.channelId,m=t.minutesForward,S=t.customer,A=t.businessUnit,_={minutesForward:m||0};return this.get("".concat(this.cuBuUrl({customer:S,businessUnit:A,apiVersion:"v1"}),"/channel/onnow/").concat(u,"?").concat(T.stringify(_))).then(function(v){return(0,l.deserialize)(i.OnNowResponse,v)})},r.prototype.getOnNow=function(t){var u=t.minutesForward,m=u===void 0?0:u,S=t.customer,A=t.businessUnit,_=t.pageNumber,v=_===void 0?1:_,f=t.pageSize,b={minutesForward:m,pageNumber:v,pageSize:f===void 0?100:f,sortingLocale:t.sortingLocale};return this.get("".concat(this.cuBuUrl({customer:S,businessUnit:A,apiVersion:"v1"}),"/channel/onnow?").concat(T.stringify(b))).then(function(p){return N(N({},p),{apiChannelStatuses:p.apiChannelStatuses.map(function(k){return(0,l.deserialize)(i.OnNowResponse,k)})})})},r.prototype.getLiveEvents=function(t){var u=t.daysBackward,m=t.daysForward,S=t.customer,A=t.businessUnit,_=t.pageSize,v=t.pageNumber,f=t.date,b={daysBackward:u,daysForward:m,pageSize:_||500,pageNumber:v||1,sort:"startTime"};f=f||new Date;var p=(0,h.epgDateFormatter)(f);return this.get("".concat(this.cuBuUrl({customer:S,businessUnit:A,apiVersion:"v2"}),"/event/date/").concat(p,"?").concat(T.stringify(b))).then(function(k){var P=k.items,j=k.pageSize,U=k.pageNumber,G=k.totalCount;return{items:P.map(function(ee){return(0,l.deserialize)(c.Asset,N({startTime:ee.startTime,endTime:ee.endTime},ee.asset))}),pageSize:j,pageNumber:U,totalCount:G}})},r.prototype.getRecentlyWatched=function(t){var u=t.customer,m=t.businessUnit,S=this.options.authHeader();return this.get("".concat(this.cuBuUrl({customer:u,businessUnit:m,apiVersion:"v1"}),"/userplayhistory/lastviewed?").concat(T.stringify({pageSize:24,fieldSet:"ALL"})),S).then(function(A){return N(N({},A),{items:A.items.map(function(_){return(0,l.deserialize)(c.Asset,_)})})})},r.prototype.getContinueWatching=function(t){var u=t.customer,m=t.businessUnit;return this.get("".concat(this.cuBuUrl({customer:u,businessUnit:m,apiVersion:"v1"}),"/recommend/continue?").concat(T.stringify({limit:10})),this.options.authHeader()).then(function(S){return N(N({},S),{items:S.items.map(function(A){return(0,l.deserialize)(c.Asset,A)})})})},r.prototype.getRecommendationsForAsset=function(t){var u=t.customer,m=t.businessUnit,S=t.assetId;return this.get("".concat(this.cuBuUrl({customer:u,businessUnit:m,apiVersion:"v1"}),"/recommend/watchNext/").concat(S)).then(function(A){return{items:A.items.map(function(_){return(0,l.deserialize)(c.Asset,_)})}})},r.prototype.getNextEpisode=function(t){var u=t.customer,m=t.businessUnit,S=t.assetId;return this.get("".concat(this.cuBuUrl({customer:u,businessUnit:m,apiVersion:"v1"}),"/content/asset/").concat(S,"/next")).then(function(A){return(0,l.deserialize)(c.Asset,A)})},r.prototype.getPreviousEpisode=function(t){var u=t.customer,m=t.businessUnit,S=t.assetId;return this.get("".concat(this.cuBuUrl({customer:u,businessUnit:m,apiVersion:"v1"}),"/content/asset/").concat(S,"/previous")).then(function(A){return(0,l.deserialize)(c.Asset,A)})},r.prototype.getRecommended=function(t){var u=t.customer,m=t.businessUnit;return this.get("".concat(this.cuBuUrl({customer:u,businessUnit:m,apiVersion:"v1"}),"/recommend/user"),this.options.authHeader()).then(function(S){return{items:S.items.map(function(A){return(0,l.deserialize)(c.Asset,A)})}})},r.prototype.getBookmarks=function(t){var u=t.customer,m=t.businessUnit;return this.get("".concat(this.cuBuUrl({customer:u,businessUnit:m,apiVersion:"v1"}),"/userplayhistory/lastviewedoffset"),this.options.authHeader()).then(function(S){return S.items})},r.prototype.getSeasonsForSeries=function(t){var u=t.customer,m=t.businessUnit,S=t.assetId;return this.get("".concat(this.cuBuUrl({customer:u,businessUnit:m,apiVersion:"v1"}),"/content/asset/").concat(S,"/season")).then(function(A){var _=(0,l.deserialize)(y.SeasonResponse,A);return _.series=S,_})},r.prototype.getEpisodesForSeason=function(t){var u=t.customer,m=t.businessUnit,S=t.assetId,A=t.seasonNumber;return this.get("".concat(this.cuBuUrl({customer:u,businessUnit:m,apiVersion:"v1"}),"/content/asset/").concat(S,"/season/").concat(A,"/episode?")+T.stringify({fieldSet:"ALL",onlyPublished:!0})).then(function(_){var v=_.items.map(function(f){return(0,l.deserialize)(c.Asset,f)});return N(N({items:v},_),{seriesId:S,seasonNumber:A})})},r.prototype.getNextProgramByAssetId=function(t){var u=t.customer,m=t.businessUnit,S=t.assetId;return this.get("".concat(this.cuBuUrl({customer:u,businessUnit:m,apiVersion:"v2"}),"/epg/asset/").concat(S,"/next")).then(function(A){return(0,l.deserialize)(i.Program,A)})},r}(E.BaseService);B.ContentService=g},1200:function(Ee,B,K){var M,x=this&&this.__extends||(M=function(I,E){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,l){T.__proto__=l}||function(T,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(T[c]=l[c])},M(I,E)},function(I,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function T(){this.constructor=I}M(I,E),I.prototype=E===null?Object.create(E):(T.prototype=E.prototype,new T)});B.__esModule=!0,B.DocumentService=void 0;var N=K(8563),C=K(4126),R=function(I){function E(){return I!==null&&I.apply(this,arguments)||this}return x(E,I),E.prototype.getDocument=function(T){var l=T.customer,c=T.businessUnit,h={documentId:T.documentId,customDocumentName:T.customDocumentName,preferredLanguage:T.preferredLanguage};return this.get("".concat(this.cuBuUrl({apiVersion:"v1",customer:l,businessUnit:c}),"/document?").concat(C.stringify(h)))},E}(N.BaseService);B.DocumentService=R},6330:function(Ee,B,K){var M,x=this&&this.__extends||(M=function(R,I){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,T){E.__proto__=T}||function(E,T){for(var l in T)Object.prototype.hasOwnProperty.call(T,l)&&(E[l]=T[l])},M(R,I)},function(R,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function E(){this.constructor=R}M(R,I),R.prototype=I===null?Object.create(I):(E.prototype=I.prototype,new E)}),N=this&&this.__assign||function(){return N=Object.assign||function(R){for(var I,E=1,T=arguments.length;E<T;E++)for(var l in I=arguments[E])Object.prototype.hasOwnProperty.call(I,l)&&(R[l]=I[l]);return R},N.apply(this,arguments)};B.__esModule=!0,B.EntitlementService=void 0;var C=function(R){function I(){return R!==null&&R.apply(this,arguments)||this}return x(I,R),I.prototype.getEntitlementForAsset=function(E){var T=E.customer,l=E.businessUnit,c=E.headers,h=E.assetId,y=E.time,i=E.paymentProvider,g=new URLSearchParams({});return i&&g.set("paymentProvider",i),y&&g.set("time",y.toISOString()),this.get("".concat(this.cuBuUrl({apiVersion:"v2",customer:T,businessUnit:l}),"/entitlement/").concat(h,"/entitle?").concat(g.toString()),N(N({},this.options.authHeader()),c),function(d){var r;throw(r=d.response)===null||r===void 0?void 0:r.data})},I.prototype.getUserEntitlements=function(E){var T=E.customer,l=E.businessUnit,c=E.headers;return this.get("".concat(this.cuBuUrl({apiVersion:"v2",customer:T,businessUnit:l}),"/entitlement/accountproduct"),N(N({},this.options.authHeader()),c))},I.prototype.getAvailabilityKeys=function(E){var T=E.customer,l=E.businessUnit,c=E.headers;return this.get("".concat(this.cuBuUrl({apiVersion:"v2",customer:T,businessUnit:l}),"/entitlement/availabilitykey"),N(N({},this.options.authHeader()),c))},I.prototype.playAsset=function(E){var T=E.customer,l=E.businessUnit,c=E.headers,h=E.assetId,y=E.adParameters,i=E.audioOnly,g=E.maxFrameRate,d=E.maxResolution,r=E.supportedFormats,t=E.supportedDrms,u=E.materialProfile,m=E.start,S=E.end,A=new URLSearchParams(y);return i&&A.append("audioOnly","true"),g&&A.append("maxFrameRate",g.toString()),d&&A.append("maxResolution",d),r&&A.append("supportedFormats",r.join(",")),t&&A.append("supportedDrms",t.join(",")),u&&A.append("materialProfile",u),m&&A.append("start","".concat(m)),S&&A.append("end","".concat(S)),this.get("".concat(this.cuBuUrl({apiVersion:"v2",customer:T,businessUnit:l}),"/entitlement/").concat(h,"/play?").concat(A.toString()),N(N({},this.options.authHeader()),c))},I}(K(8563).BaseService);B.EntitlementService=C},8847:function(Ee,B,K){var M,x=this&&this.__extends||(M=function(C,R){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,E){I.__proto__=E}||function(I,E){for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&(I[T]=E[T])},M(C,R)},function(C,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function I(){this.constructor=C}M(C,R),C.prototype=R===null?Object.create(R):(I.prototype=R.prototype,new I)});B.__esModule=!0,B.LocationService=void 0;var N=function(C){function R(){return C!==null&&C.apply(this,arguments)||this}return x(R,C),R.prototype.getLocation=function(){return this.options.businessUnit&&this.options.customer?this.get("".concat(this.cuBuUrl({apiVersion:"v1"}),"/location")):this.get("/v2/location")},R}(K(8563).BaseService);B.LocationService=N},4032:function(Ee,B,K){var M,x=this&&this.__extends||(M=function(R,I){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,T){E.__proto__=T}||function(E,T){for(var l in T)Object.prototype.hasOwnProperty.call(T,l)&&(E[l]=T[l])},M(R,I)},function(R,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function E(){this.constructor=R}M(R,I),R.prototype=I===null?Object.create(I):(E.prototype=I.prototype,new E)}),N=this&&this.__assign||function(){return N=Object.assign||function(R){for(var I,E=1,T=arguments.length;E<T;E++)for(var l in I=arguments[E])Object.prototype.hasOwnProperty.call(I,l)&&(R[l]=I[l]);return R},N.apply(this,arguments)};B.__esModule=!0,B.PaymentService=void 0;var C=function(R){function I(){return R!==null&&R.apply(this,arguments)||this}return x(I,R),I.prototype.getProductOfferingsByVoucherCode=function(E){var T=E.customer,l=E.businessUnit,c=E.code,h=E.countryCode,y=h?"".concat(this.cuBuUrl({apiVersion:"v2",customer:T,businessUnit:l}),"/store/productofferings/country/").concat(h,"/voucher/").concat(c):"".concat(this.cuBuUrl({apiVersion:"v2",customer:T,businessUnit:l}),"/store/productofferings/voucher/").concat(c);return this.get(y)},I.prototype.getProductOfferingsByCountry=function(E){var T=E.customer,l=E.businessUnit,c=E.countryCode,h=E.includeSelectAssetProducts,y=h===void 0||h,i=E.paymentProvider,g=new URLSearchParams;return i&&g.set("paymentProvider",i),g.set("includeSelectAssetProducts",y.toString()),this.get("".concat(this.cuBuUrl({apiVersion:"v3",customer:T,businessUnit:l}),"/store/productoffering/country/").concat(c,"?").concat(g.toString()))},I.prototype.buyProductOffering=function(E){var T=E.customer,l=E.businessUnit,c=E.productOfferingId,h=E.body;return this.post("".concat(this.cuBuUrl({apiVersion:"v2",customer:T,businessUnit:l}),"/store/purchase/").concat(c),h,this.options.authHeader())},I.prototype.buyWithVoucherCode=function(E){var T=E.customer,l=E.businessUnit,c=E.code,h=E.assetId,y=E.productOfferingId;return this.post("".concat(this.cuBuUrl({apiVersion:"v2",customer:T,businessUnit:l}),"/store/purchase/").concat(y),{assetId:h,voucherCode:c},this.options.authHeader())},I.prototype.verifyPurchase=function(E){var T=E.customer,l=E.businessUnit,c=E.body,h=E.purchaseId;return this.post("".concat(this.cuBuUrl({apiVersion:"v2",customer:T,businessUnit:l}),"/store/purchase/").concat(h,"/verify"),c,this.options.authHeader()).then(function(y){return N(N({},y),{purchaseId:h})})},I.prototype.getTransactions=function(E){var T=E.customer,l=E.businessUnit;return this.get("".concat(this.cuBuUrl({apiVersion:"v2",customer:T,businessUnit:l}),"/store/account/transactions/productoffering"),this.options.authHeader()).then(function(c){return c.transactionsProductOfferingPairs})},I.prototype.getAccountPurchases=function(E){var T=E.customer,l=E.businessUnit;return this.get("".concat(this.cuBuUrl({apiVersion:"v2",customer:T,businessUnit:l}),"/store/account/purchases"),this.options.authHeader())},I.prototype.getPurchases=function(E){var T=E.customer,l=E.businessUnit,c=E.includeOfferingDetails,h=c!==void 0&&c,y=new URLSearchParams;return y.set("includeOfferingDetails",h?"true":"false"),this.get("".concat(this.cuBuUrl({apiVersion:"v2",customer:T,businessUnit:l}),"/store/purchase?").concat(y.toString()),this.options.authHeader())},I.prototype.cancelSubscription=function(E){var T=E.customer,l=E.businessUnit,c=E.purchaseId;return this.delete("".concat(this.cuBuUrl({apiVersion:"v2",customer:T,businessUnit:l}),"/store/purchase/subscriptions/").concat(c),this.options.authHeader())},I.prototype.getPaymentMethods=function(E){var T=E.customer,l=E.businessUnit;return this.get("".concat(this.cuBuUrl({customer:T,businessUnit:l,apiVersion:"v2"}),"/paymentmethods"),this.options.authHeader()).then(function(c){return c.methods})},I.prototype.addPaymentMethod=function(E){var T=E.customer,l=E.businessUnit,c=E.paymentMethodId,h=c?{paymentMethodId:c}:{};return this.post("".concat(this.cuBuUrl({customer:T,businessUnit:l,apiVersion:"v2"}),"/paymentmethods"),h,this.options.authHeader())},I.prototype.deletePaymentMethod=function(E){var T=E.customer,l=E.businessUnit,c=E.paymentMethodId;return this.delete("".concat(this.cuBuUrl({customer:T,businessUnit:l,apiVersion:"v2"}),"/paymentmethods/").concat(c),this.options.authHeader())},I.prototype.setPreferredPaymentMethod=function(E){var T=E.customer,l=E.businessUnit,c=E.paymentMethodId;return this.put("".concat(this.cuBuUrl({customer:T,businessUnit:l,apiVersion:"v2"}),"/paymentmethods/preferred"),{paymentMethodId:c},this.options.authHeader())},I.prototype.initializePurchase=function(E){var T=E.customer,l=E.businessUnit,c=E.productOfferingId,h=E.voucherCode;return this.post("".concat(this.cuBuUrl({customer:T,businessUnit:l,apiVersion:"v2"}),"/store/purchase/initialize"),{productOfferingId:c,voucherCode:h},N({},this.options.authHeader()))},I.prototype.initializeGooglePlayPurchase=function(E){var T=E.customer,l=E.businessUnit,c=E.productOfferingId,h=E.voucherCode,y=E.assetId;return this.post("".concat(this.cuBuUrl({customer:T,businessUnit:l,apiVersion:"v3"}),"/store/googleplay/purchase/init/").concat(c),{voucherCode:h,assetId:y},this.options.authHeader())},I.prototype.verifyGooglePlayPurchase=function(E){var T=E.customer,l=E.businessUnit,c=E.purchaseId,h=E.purchaseToken;return this.post("".concat(this.cuBuUrl({customer:T,businessUnit:l,apiVersion:"v3"}),"/store/googleplay/purchase/").concat(c,"/verify"),{purchaseToken:h},this.options.authHeader())},I.prototype.initializeAppStorePurchase=function(E){var T=E.customer,l=E.businessUnit,c=E.productOfferingId,h=E.assetId;return this.post("".concat(this.cuBuUrl({customer:T,businessUnit:l,apiVersion:"v3"}),"/store/appstore/purchase/init/").concat(c),{assetId:h},this.options.authHeader())},I.prototype.verifyAppStorePurchase=function(E){var T=E.customer,l=E.businessUnit,c=E.purchaseId,h=E.transaction;return this.post("".concat(this.cuBuUrl({customer:T,businessUnit:l,apiVersion:"v3"}),"/store/appstore/purchase/").concat(c,"/verify"),{transaction:h},this.options.authHeader())},I}(K(8563).BaseService);B.PaymentService=C},1720:function(Ee,B,K){var M,x=this&&this.__extends||(M=function(I,E){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,l){T.__proto__=l}||function(T,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(T[c]=l[c])},M(I,E)},function(I,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function T(){this.constructor=I}M(I,E),I.prototype=E===null?Object.create(E):(T.prototype=E.prototype,new T)});B.__esModule=!0,B.PreferencesService=void 0;var N=K(8563),C=K(8374),R=function(I){function E(){return I!==null&&I.apply(this,arguments)||this}return x(E,I),E.prototype.getListById=function(T){var l=T.customer,c=T.businessUnit,h=T.listId;return this.get("".concat(this.cuBuUrl({customer:l,businessUnit:c,apiVersion:"v1"}),"/preferences/list/").concat(h,"/asset"),this.options.authHeader()).then(function(y){return y.map(function(i){return new C.PreferenceListItem(i)})})},E.prototype.addAssetToList=function(T){var l=T.customer,c=T.businessUnit,h=T.listId,y=T.assetId,i=T.order;return this.post("".concat(this.cuBuUrl({customer:l,businessUnit:c,apiVersion:"v1"}),"/preferences/list/").concat(h,"/asset/").concat(y),{order:i||0},this.options.authHeader())},E.prototype.deleteAssetFromList=function(T){var l=T.customer,c=T.businessUnit,h=T.listId,y=T.assetId;return this.delete("".concat(this.cuBuUrl({customer:l,businessUnit:c,apiVersion:"v1"}),"/preferences/list/").concat(h,"/asset/").concat(y),this.options.authHeader())},E.prototype.getAssetFromList=function(T){var l=T.listId,c=T.assetId,h=T.customer,y=T.businessUnit;return this.get("".concat(this.cuBuUrl({customer:h,businessUnit:y,apiVersion:"v1"}),"/preferences/list/").concat(l,"/asset/").concat(c),this.options.authHeader()).then(function(i){return new C.PreferenceListItem(i)})},E.prototype.addTagToList=function(T){var l=T.customer,c=T.businessUnit,h=T.listId,y=T.tagId,i=T.order;return this.post("".concat(this.cuBuUrl({customer:l,businessUnit:c,apiVersion:"v1"}),"/preferences/list/").concat(h,"/tag/").concat(y),{order:i||0},this.options.authHeader())},E.prototype.deleteTagFromList=function(T){var l=T.customer,c=T.businessUnit,h=T.listId,y=T.tagId;return this.delete("".concat(this.cuBuUrl({customer:l,businessUnit:c,apiVersion:"v1"}),"/preferences/list/").concat(h,"/tag/").concat(y),this.options.authHeader())},E.prototype.getTagsFromList=function(T){var l=T.customer,c=T.businessUnit,h=T.listId;return this.get("".concat(this.cuBuUrl({customer:l,businessUnit:c,apiVersion:"v1"}),"/preferences/list/").concat(h,"/tag"),this.options.authHeader())},E.prototype.getPreferences=function(T){var l=T.customer,c=T.businessUnit;return this.get("".concat(this.cuBuUrl({customer:l,businessUnit:c,apiVersion:"v1"}),"/preferences"),this.options.authHeader())},E.prototype.getPreference=function(T){var l=T.customer,c=T.businessUnit,h=T.key;return this.getPreferences({customer:l,businessUnit:c}).then(function(y){return y.preferences&&y.preferences[h]?y.preferences[h]:""})},E.prototype.setPreference=function(T){var l=this,c=T.customer,h=T.businessUnit,y=T.key,i=T.value;return this.getPreferences({customer:c,businessUnit:h}).then(function(g){return g.preferences[y]=i.toString(),delete g.lastUpdated,g}).then(function(g){return l.post("".concat(l.cuBuUrl({customer:c,businessUnit:h,apiVersion:"v1"}),"/preferences"),g,l.options.authHeader())})},E}(N.BaseService);B.PreferencesService=R},8645:function(Ee,B,K){var M,x=this&&this.__extends||(M=function(l,c){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,y){h.__proto__=y}||function(h,y){for(var i in y)Object.prototype.hasOwnProperty.call(y,i)&&(h[i]=y[i])},M(l,c)},function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function h(){this.constructor=l}M(l,c),l.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}),N=this&&this.__assign||function(){return N=Object.assign||function(l){for(var c,h=1,y=arguments.length;h<y;h++)for(var i in c=arguments[h])Object.prototype.hasOwnProperty.call(c,i)&&(l[i]=c[i]);return l},N.apply(this,arguments)};B.__esModule=!0,B.SearchService=void 0;var C=K(4126),R=K(8563),I=K(2624),E=K(4908),T=function(l){function c(){return l!==null&&l.apply(this,arguments)||this}return x(c,l),c.prototype.search=function(h){var y=h.customer,i=h.businessUnit,g=h.query,d=h.locale,r=h.types,t={fieldSet:"ALL",locale:d,types:(r===void 0?["MOVIE","TV_SHOW","EPISODE","CLIP","TV_CHANNEL"]:r).join(",")};return this.get("".concat(this.cuBuUrl({apiVersion:"v1",customer:y,businessUnit:i}),"/content/search/query/").concat(g,"?").concat(C.stringify(t))).then(function(u){return N(N({},u),{items:u.items.map(function(m){return(0,I.deserialize)(E.Asset,m.asset)})})})},c.prototype.searchV3=function(h){var y=h.customer,i=h.businessUnit,g=h.locale,d=h.query,r=h.types,t={fieldSet:"ALL",locale:g,types:(r===void 0?["MOVIE","TV_SHOW","EPISODE","CLIP","TV_CHANNEL"]:r).join(",")};return this.get("".concat(this.cuBuUrl({apiVersion:"v3",customer:y,businessUnit:i}),"/content/search/query/").concat(d,"?").concat(C.stringify(t))).then(function(u){return N(N({},u),{assetHits:N(N({},u.assetHits),{items:u.assetHits.items.map(function(m){return{asset:(0,I.deserialize)(E.Asset,m.asset)}})})})})},c}(R.BaseService);B.SearchService=T},883:function(Ee,B,K){var M,x=this&&this.__extends||(M=function(C,R){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,E){I.__proto__=E}||function(I,E){for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&(I[T]=E[T])},M(C,R)},function(C,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function I(){this.constructor=C}M(C,R),C.prototype=R===null?Object.create(R):(I.prototype=R.prototype,new I)});B.__esModule=!0,B.SystemService=void 0;var N=function(C){function R(){return C!==null&&C.apply(this,arguments)||this}return x(R,C),R.prototype.getSystemConfig=function(I){var E=I.customer,T=I.businessUnit;return this.get("/v1/customer/".concat(E,"/businessunit/").concat(T,"/systemConfig"))},R.prototype.getSystemConfigV2=function(I){var E=I.customer,T=I.businessUnit,l=I.countryCode;return this.get("/v2/customer/".concat(E,"/businessunit/").concat(T,"/system/config?countryCode=").concat(l))},R}(K(8563).BaseService);B.SystemService=N},5287:function(Ee,B,K){var M,x=this&&this.__extends||(M=function(E,T){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(l[h]=c[h])},M(E,T)},function(E,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function l(){this.constructor=E}M(E,T),E.prototype=T===null?Object.create(T):(l.prototype=T.prototype,new l)}),N=this&&this.__awaiter||function(E,T,l,c){return new(l||(l=Promise))(function(h,y){function i(r){try{d(c.next(r))}catch(t){y(t)}}function g(r){try{d(c.throw(r))}catch(t){y(t)}}function d(r){var t;r.done?h(r.value):(t=r.value,t instanceof l?t:new l(function(u){u(t)})).then(i,g)}d((c=c.apply(E,T||[])).next())})},C=this&&this.__generator||function(E,T){var l,c,h,y,i={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return y={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function g(d){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;i;)try{if(l=1,c&&(h=2&t[0]?c.return:t[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,t[1])).done)return h;switch(c=0,h&&(t=[2&t[0],h.value]),t[0]){case 0:case 1:h=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,c=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!((h=(h=i.trys).length>0&&h[h.length-1])||t[0]!==6&&t[0]!==2)){i=0;continue}if(t[0]===3&&(!h||t[1]>h[0]&&t[1]<h[3])){i.label=t[1];break}if(t[0]===6&&i.label<h[1]){i.label=h[1],h=t;break}if(h&&i.label<h[2]){i.label=h[2],i.ops.push(t);break}h[2]&&i.ops.pop(),i.trys.pop();continue}t=T.call(E,i)}catch(u){t=[6,u],c=0}finally{l=h=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([d,r])}}},R=this&&this.__spreadArray||function(E,T,l){if(l||arguments.length===2)for(var c,h=0,y=T.length;h<y;h++)!c&&h in T||(c||(c=Array.prototype.slice.call(T,0,h)),c[h]=T[h]);return E.concat(c||Array.prototype.slice.call(T))};B.__esModule=!0,B.TagService=void 0;var I=function(E){function T(){return E!==null&&E.apply(this,arguments)||this}return x(T,E),T.prototype.getTag=function(l){var c=l.customer,h=l.businessUnit,y=l.tagId;return this.get("".concat(this.cuBuUrl({customer:c,businessUnit:h,apiVersion:"v1"}),"/tag/").concat(y))},T.prototype.getTags=function(l){var c=l.customer,h=l.businessUnit,y=l.pageSize,i=l.pageNumber,g=l.sort,d=l.tagType,r=new URLSearchParams;return i&&r.set("pageNumber","".concat(i)),y&&r.set("pageSize","".concat(y)),g&&r.set("sort","".concat(g)),d&&r.set("scheme","".concat(d)),this.get("".concat(this.cuBuUrl({customer:c,businessUnit:h,apiVersion:"v1"}),"/tag?").concat(r.toString()))},T.prototype.getAllTags=function(l){var c=l.customer,h=l.businessUnit;return N(this,void 0,void 0,function(){var y,i,g,d,r,t,u,m=this;return C(this,function(S){switch(S.label){case 0:return[4,this.getTags({customer:c,businessUnit:h,pageSize:100,pageNumber:1,sort:"-created"})];case 1:return y=S.sent(),i=y.totalCount,g=y.items,d=y.pageSize,r=Math.ceil(i/d)-1,t=new Array(r).fill("").map(function(A,_){return _+2}),[4,Promise.all(t.map(function(A){return m.getTags({customer:c,businessUnit:h,pageSize:d,pageNumber:A,sort:"-created"}).then(function(_){return _.items})}))];case 2:return u=S.sent(),[2,R([g],u,!0).flatMap(function(A){return R([],A,!0)})]}})})},T}(K(8563).BaseService);B.TagService=I},7557:function(Ee,B,K){var M,x=this&&this.__extends||(M=function(l,c){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,y){h.__proto__=y}||function(h,y){for(var i in y)Object.prototype.hasOwnProperty.call(y,i)&&(h[i]=y[i])},M(l,c)},function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function h(){this.constructor=l}M(l,c),l.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}),N=this&&this.__assign||function(){return N=Object.assign||function(l){for(var c,h=1,y=arguments.length;h<y;h++)for(var i in c=arguments[h])Object.prototype.hasOwnProperty.call(c,i)&&(l[i]=c[i]);return l},N.apply(this,arguments)};B.__esModule=!0,B.UserService=void 0;var C=K(8563),R=K(2624),I=K(4138),E=K(7138),T=function(l){function c(){return l!==null&&l.apply(this,arguments)||this}return x(c,l),c.prototype.signup=function(h){var y=h.customer,i=h.businessUnit,g=h.emailAddress,d=h.password,r=h.device,t=h.displayName,u=h.informationCollectionConsentGivenNow,m=h.language;return this.post("".concat(this.cuBuUrl({apiVersion:"v3",customer:y,businessUnit:i}),"/user/signup"),{emailAddress:g,password:d,device:r,displayName:t,informationCollectionConsentGivenNow:u,language:m},{"Content-Type":"application/json"}).then(function(S){return(0,R.deserialize)(I.SignupResponse,S)})},c.prototype.reset=function(h){var y=h.customer,i=h.businessUnit,g=h.username;return this.get("".concat(this.cuBuUrl({apiVersion:"v2",customer:y,businessUnit:i}),"/user/password/reset/").concat(g))},c.prototype.setNewPassword=function(h){var y=h.customer,i=h.businessUnit,g=h.password,d=h.informationCollectionConsentGivenNow,r=h.token;return this.put("".concat(this.cuBuUrl({apiVersion:"v3",customer:y,businessUnit:i}),"/user/signup/password/").concat(r),{password:g,informationCollectionConsentGivenNow:d})},c.prototype.getUserDetails=function(h){var y=h.customer,i=h.businessUnit;return this.get("".concat(this.cuBuUrl({apiVersion:"v2",customer:y,businessUnit:i}),"/user/details"),this.options.authHeader())},c.prototype.updateUserDetails=function(h){var y=h.customer,i=h.businessUnit,g=h.body;return this.put("".concat(this.cuBuUrl({apiVersion:"v2",customer:y,businessUnit:i}),"/user/details"),g,this.options.authHeader())},c.prototype.confirmSignup=function(h){var y=h.customer,i=h.businessUnit,g=h.token,d=h.deviceId,r=h.name,t=h.type;return this.put("".concat(this.cuBuUrl({apiVersion:"v2",customer:y,businessUnit:i}),"/user/signup/confirm/").concat(g),{deviceRegistration:{deviceId:d,name:r,type:t}}).then(function(u){return(0,R.deserialize)(E.LoginResponse,u.loginResponse)})},c.prototype.deleteUser=function(h){var y=h.customer,i=h.businessUnit,g=h.password;return this.post("".concat(this.cuBuUrl({apiVersion:"v3",customer:y,businessUnit:i}),"/user/delete"),{password:g},this.options.authHeader())},c.prototype.changePassword=function(h){var y=h.customer,i=h.businessUnit,g=h.oldPassword,d=h.newPassword,r=h.logoutOnAllDevices,t=h.device;return this.put("".concat(this.cuBuUrl({apiVersion:"v3",customer:y,businessUnit:i}),"/user/changePassword"),{oldPassword:g,newPassword:d,logoutOnAllDevices:!!r,device:t},this.options.authHeader()).then(function(u){return(0,R.deserialize)(E.LoginResponse,u.loginResponse)})},c.prototype.confirmActivationCode=function(h){var y=h.customer,i=h.businessUnit,g=h.code;return this.put("".concat(this.cuBuUrl({apiVersion:"v2",customer:y,businessUnit:i}),"/user/activation/confirm/").concat(g),null,this.options.authHeader())},c.prototype.getActivationCode=function(h){var y=h.customer,i=h.businessUnit;return this.get("".concat(this.cuBuUrl({apiVersion:"v2",customer:y,businessUnit:i}),"/userActivation/activationCode")).then(function(g){return N(N({},g),{expires:new Date(g.expires)})})},c.prototype.consumeActivationCode=function(h){var y=h.code,i=h.device,g=h.customer,d=h.businessUnit;return this.post("".concat(this.cuBuUrl({apiVersion:"v2",customer:g,businessUnit:d}),"/userActivation/consume"),{activationCode:y,device:i}).then(function(r){return(0,R.deserialize)(E.LoginResponse,r)})},c.prototype.changeEmail=function(h){var y=h.newEmailAddress,i=h.customer,g=h.businessUnit;return this.put("".concat(this.cuBuUrl({apiVersion:"v3",customer:i,businessUnit:g}),"/user/changeEmail"),{newEmailAddress:y},this.options.authHeader())},c.prototype.changeEmailAndUsername=function(h){var y=h.newEmailAddressAndUsername,i=h.customer,g=h.businessUnit,d=h.password;return this.put("".concat(this.cuBuUrl({apiVersion:"v3",customer:i,businessUnit:g}),"/user/changeEmailAndUsername"),{password:d,newEmailAddressAndUsername:y},this.options.authHeader())},c.prototype.setAttributes=function(h){var y=h.customer,i=h.businessUnit,g=h.attributes;return this.put("".concat(this.cuBuUrl({customer:y,businessUnit:i,apiVersion:"v3"}),"/user/attributes"),g,this.options.authHeader())},c}(C.BaseService);B.UserService=T},3426:function(Ee,B,K){var M,x=this&&this.__extends||(M=function(I,E){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,l){T.__proto__=l}||function(T,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(T[c]=l[c])},M(I,E)},function(I,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function T(){this.constructor=I}M(I,E),I.prototype=E===null?Object.create(E):(T.prototype=E.prototype,new T)}),N=this&&this.__assign||function(){return N=Object.assign||function(I){for(var E,T=1,l=arguments.length;T<l;T++)for(var c in E=arguments[T])Object.prototype.hasOwnProperty.call(E,c)&&(I[c]=E[c]);return I},N.apply(this,arguments)},C=this&&this.__rest||function(I,E){var T={};for(var l in I)Object.prototype.hasOwnProperty.call(I,l)&&E.indexOf(l)<0&&(T[l]=I[l]);if(I!=null&&typeof Object.getOwnPropertySymbols=="function"){var c=0;for(l=Object.getOwnPropertySymbols(I);c<l.length;c++)E.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(I,l[c])&&(T[l[c]]=I[l[c]])}return T};B.__esModule=!0,B.WhiteLabelService=void 0;var R=function(I){function E(){return I!==null&&I.apply(this,arguments)||this}return x(E,I),E.prototype.getAppConfig=function(T){var l=T.customer,c=T.businessUnit,h=T.app;return this.get("".concat(this.cuBuUrl({customer:l,businessUnit:c,apiVersion:"v2/whitelabel"}),"/config/appConfig")).then(function(y){var i,g=(i=y.components[h])===null||i===void 0?void 0:i[0];if(g){var d=g.parameters,r=(d.assetSearchTypes,C(d,["assetSearchTypes"])),t=g.presentation.fallback.images.reduce(function(u,m){var S=m.url;return u[m.tags[0]]=S,u},{});return N(N({},r),{images:t})}})},E}(K(8563).BaseService);B.WhiteLabelService=R},9877:(Ee,B)=>{B.__esModule=!0,B.epgDateFormatter=void 0,B.epgDateFormatter=function(K){var M=K.getMonth()+1,x=K.getDate(),N=M<10?"0".concat(M):M,C=x<10?"0".concat(x):x;return"".concat(K.getFullYear(),"-").concat(N,"-").concat(C)}},3985:(Ee,B,K)=>{B.__esModule=!0,B.localizedUtils=void 0;var M=K(3235);function x(T,l,c,h){if(!T||T.length===0)return"";var y=T.find(function(i){return i.locale===c});return!y||!y[l]||Array.isArray(y[l])&&!y[l].length?h?x(T,l,h):c===T[0].locale?"":x(T,l,T[0].locale):y[l]||""}function N(T,l){return l.width-T.width}function C(T,l){return l===null||T.split("").length<l||T===""?T:T.slice(0,l)+"..."}function R(T,l,c,h){return x(T,"shortDescription",l,h)}function I(T,l,c){return x(T,"description",l,c)}function E(T,l,c){return x(T,"longDescription",l,c)}B.localizedUtils={getLocaleItem:function(T,l){return T.find(function(c){return c.locale===l})||T[0]},getLocalizedValue:x,getImage:function(T,l,c,h){if(!T.length)return"";var y=(x(T,"images",c,h)||[]).sort(N);if(!y||!y.length)return"";var i=y.filter(function(d){return d.orientation===l.toUpperCase()}),g=i.filter(function(d){return l===M.ImageOrientation.LANDSCAPE?d.type==="cover":l===M.ImageOrientation.PORTRAIT&&d.type==="poster"});return g.length>0?g[0].url:i.length>0?i[0].url:y.length>0?y[0].url:""},getImages:function(T,l,c){return x(T,"images",l,c)||[]},getTitle:function(T,l,c){return x(T,"title",l,c)},getShortDescription:R,getMediumDescription:I,getLongDescription:E,getDescription:function(T,l,c,h){return c===void 0&&(c=null),E(T,l,h)?C(E(T,l,h),c):I(T,l,h)?C(I(T,l,h),c):R(T,l,null,h)?C(R(T,l,null,h),c):""}}},4697:(Ee,B)=>{function K(N){var C=N.amount.toString().split("");return C.splice(C.length-N.fractionDigits,0,"."),C[0]==="."&&C.unshift("0"),C.join("")}function M(N){return K(N)+" "+N.currency}function x(N,C){if(!N)return 0;if(N&&!C)return N;var R=Math.floor(C);return N/Math.pow(10,R)}B.__esModule=!0,B.priceUtils=B.removePriceFraction=B.getPriceStringWithCurrency=B.getPriceString=void 0,B.getPriceString=K,B.getPriceStringWithCurrency=M,B.removePriceFraction=x,B.priceUtils={getPriceString:K,getPriceStringWithCurrency:M,removePriceFraction:x}},9557:(Ee,B)=>{B.__esModule=!0,B.productOfferingUtils=void 0,B.productOfferingUtils={getTitle:function(K,M){if(K.localizedMetadata.length===0)return"";var x=K.localizedMetadata.find(function(N){return N.locale===M});return x?x.name:K.localizedMetadata[0].name},getDescription:function(K,M){if(K.localizedMetadata.length===0)return"";var x=K.localizedMetadata.find(function(N){return N.locale===M});return x?x.description:K.localizedMetadata[0].description}}},9384:(Ee,B)=>{function K(I){return new Date(I.toDate).getTime()<Date.now()}function M(I){return new Date(I.fromDate).getTime()>Date.now()}function x(I){return I.length!==0&&I.filter(function(E){return!K(E)}).every(function(E){return M(E)})}function N(I){return!M(I)&&!K(I)}function C(I,E){return new Date(I.fromDate).getTime()-new Date(E.fromDate).getTime()}function R(I){return I.filter(function(E){return N(E)})}B.__esModule=!0,B.publicationUtils=void 0,B.publicationUtils={isExpired:K,allInFuture:x,inFuture:M,isActive:N,sortPublicationsAscending:C,isGeoBlocked:function(I,E){if(!E)return!1;var T=[];return R(I).forEach(function(l){l.countries&&l.countries.length!==0||T.push(!1),l.countries.length>0&&(l.countries.includes(E.countryCode)||T.push(!0))}),T.length!==0&&!T.includes(!1)},getNextPublications:function(I){var E=I.sort(C);if(x(I)){var T=E.filter(function(c){return M(c)});if(T.length>0){var l=new Date(T[0].fromDate);return T.filter(function(c){return new Date(c.fromDate).getTime()===l.getTime()})}}return R(E)},getActivePublications:R,getAvailabilityKeys:function(I){var E=R(I);return x(I)&&(E=I.filter(function(T){return M(T)})),[].concat.apply([],E.map(function(T){return T.availabilityKeys}))}}},3945:(Ee,B)=>{B.__esModule=!0,B.purchaseUtils=void 0,B.purchaseUtils={getTvods:function(K){return K.filter(function(M){return M.assetId})}}},5666:(Ee,B,K)=>{B.__esModule=!0,B.systemConfigUtils=void 0;var M=K(7779);B.systemConfigUtils={paymentsIsEnabled:function(x){return[M.PaymentType.ADYEN,M.PaymentType.EXTERNAL,M.PaymentType.STRIPE,M.PaymentType.VOUCHERS_ONLY].includes(x)}}},258:(Ee,B)=>{B.__esModule=!0,B.tagUtils=void 0,B.tagUtils={getTitle:function(K,M,x){return K.localized.length===0?"":(K.localized.find(function(N){return N.locale===M})||K.localized.find(function(N){return N.locale===x})||K.localized[0]).title||""},getDescription:function(K,M,x){return K.localized.length===0?"":(K.localized.find(function(N){return N.locale===M})||K.localized.find(function(N){return N.locale===x})||K.localized[0]).description||""},getImages:function(K,M,x){var N,C,R,I;if(K.localized.length===0)return[];var E=[];return!((N=K.localized.find(function(T){return T.locale===M}))===null||N===void 0)&&N.images.length?E=(C=K.localized.find(function(T){return T.locale===M}))===null||C===void 0?void 0:C.images:!((R=K.localized.find(function(T){return T.locale===x}))===null||R===void 0)&&R.images.length&&(E=(I=K.localized.find(function(T){return T.locale===x}))===null||I===void 0?void 0:I.images),E}}},150:(Ee,B)=>{B.__esModule=!0,B.userDetailsUtils=void 0,B.userDetailsUtils={getAttributeTitle:function(K,M){if(!K.localized.length)return null;var x=K.localized.find(function(N){return N.locale===M})||K.localized[0];return(x==null?void 0:x.title)||null},getAttributeDescription:function(K,M){if(!K.localized.length)return null;var x=K.localized.find(function(N){return N.locale===M})||K.localized[0];return(x==null?void 0:x.description)||null}}},3541:(Ee,B,K)=>{Ee.exports=K(766)},26:(Ee,B,K)=>{var M=K(951),x=K(3254),N=K(4369),C=K(1669),R=K(7059),I=K(4907),E=K(9600),T=K(3126),l=K(9445),c=K(4645);Ee.exports=function(h){return new Promise(function(y,i){var g,d=h.data,r=h.headers,t=h.responseType;function u(){h.cancelToken&&h.cancelToken.unsubscribe(g),h.signal&&h.signal.removeEventListener("abort",g)}M.isFormData(d)&&delete r["Content-Type"];var m=new XMLHttpRequest;if(h.auth){var S=h.auth.username||"",A=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";r.Authorization="Basic "+btoa(S+":"+A)}var _=R(h.baseURL,h.url);function v(){if(m){var b="getAllResponseHeaders"in m?I(m.getAllResponseHeaders()):null,p={data:t&&t!=="text"&&t!=="json"?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:b,config:h,request:m};x(function(k){y(k),u()},function(k){i(k),u()},p),m=null}}if(m.open(h.method.toUpperCase(),C(_,h.params,h.paramsSerializer),!0),m.timeout=h.timeout,"onloadend"in m?m.onloadend=v:m.onreadystatechange=function(){m&&m.readyState===4&&(m.status!==0||m.responseURL&&m.responseURL.indexOf("file:")===0)&&setTimeout(v)},m.onabort=function(){m&&(i(T("Request aborted",h,"ECONNABORTED",m)),m=null)},m.onerror=function(){i(T("Network Error",h,null,m)),m=null},m.ontimeout=function(){var b=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",p=h.transitional||l.transitional;h.timeoutErrorMessage&&(b=h.timeoutErrorMessage),i(T(b,h,p.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",m)),m=null},M.isStandardBrowserEnv()){var f=(h.withCredentials||E(_))&&h.xsrfCookieName?N.read(h.xsrfCookieName):void 0;f&&(r[h.xsrfHeaderName]=f)}"setRequestHeader"in m&&M.forEach(r,function(b,p){d===void 0&&p.toLowerCase()==="content-type"?delete r[p]:m.setRequestHeader(p,b)}),M.isUndefined(h.withCredentials)||(m.withCredentials=!!h.withCredentials),t&&t!=="json"&&(m.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&m.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&m.upload&&m.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(g=function(b){m&&(i(!b||b&&b.type?new c("canceled"):b),m.abort(),m=null)},h.cancelToken&&h.cancelToken.subscribe(g),h.signal&&(h.signal.aborted?g():h.signal.addEventListener("abort",g))),d||(d=null),m.send(d)})}},766:(Ee,B,K)=>{var M=K(951),x=K(857),N=K(2498),C=K(3046),R=function I(E){var T=new N(E),l=x(N.prototype.request,T);return M.extend(l,N.prototype,T),M.extend(l,T),l.create=function(c){return I(C(E,c))},l}(K(9445));R.Axios=N,R.Cancel=K(4645),R.CancelToken=K(6781),R.isCancel=K(3420),R.VERSION=K(281).version,R.all=function(I){return Promise.all(I)},R.spread=K(3579),R.isAxiosError=K(5320),Ee.exports=R,Ee.exports.default=R},4645:Ee=>{function B(K){this.message=K}B.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},B.prototype.__CANCEL__=!0,Ee.exports=B},6781:(Ee,B,K)=>{var M=K(4645);function x(N){if(typeof N!="function")throw new TypeError("executor must be a function.");var C;this.promise=new Promise(function(I){C=I});var R=this;this.promise.then(function(I){if(R._listeners){var E,T=R._listeners.length;for(E=0;E<T;E++)R._listeners[E](I);R._listeners=null}}),this.promise.then=function(I){var E,T=new Promise(function(l){R.subscribe(l),E=l}).then(I);return T.cancel=function(){R.unsubscribe(E)},T},N(function(I){R.reason||(R.reason=new M(I),C(R.reason))})}x.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},x.prototype.subscribe=function(N){this.reason?N(this.reason):this._listeners?this._listeners.push(N):this._listeners=[N]},x.prototype.unsubscribe=function(N){if(this._listeners){var C=this._listeners.indexOf(N);C!==-1&&this._listeners.splice(C,1)}},x.source=function(){var N;return{token:new x(function(C){N=C}),cancel:N}},Ee.exports=x},3420:Ee=>{Ee.exports=function(B){return!(!B||!B.__CANCEL__)}},2498:(Ee,B,K)=>{var M=K(951),x=K(1669),N=K(9007),C=K(9829),R=K(3046),I=K(2114),E=I.validators;function T(l){this.defaults=l,this.interceptors={request:new N,response:new N}}T.prototype.request=function(l){typeof l=="string"?(l=arguments[1]||{}).url=arguments[0]:l=l||{},(l=R(this.defaults,l)).method?l.method=l.method.toLowerCase():this.defaults.method?l.method=this.defaults.method.toLowerCase():l.method="get";var c=l.transitional;c!==void 0&&I.assertOptions(c,{silentJSONParsing:E.transitional(E.boolean),forcedJSONParsing:E.transitional(E.boolean),clarifyTimeoutError:E.transitional(E.boolean)},!1);var h=[],y=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(l)===!1||(y=y&&m.synchronous,h.unshift(m.fulfilled,m.rejected))});var i,g=[];if(this.interceptors.response.forEach(function(m){g.push(m.fulfilled,m.rejected)}),!y){var d=[C,void 0];for(Array.prototype.unshift.apply(d,h),d=d.concat(g),i=Promise.resolve(l);d.length;)i=i.then(d.shift(),d.shift());return i}for(var r=l;h.length;){var t=h.shift(),u=h.shift();try{r=t(r)}catch(m){u(m);break}}try{i=C(r)}catch(m){return Promise.reject(m)}for(;g.length;)i=i.then(g.shift(),g.shift());return i},T.prototype.getUri=function(l){return l=R(this.defaults,l),x(l.url,l.params,l.paramsSerializer).replace(/^\?/,"")},M.forEach(["delete","get","head","options"],function(l){T.prototype[l]=function(c,h){return this.request(R(h||{},{method:l,url:c,data:(h||{}).data}))}}),M.forEach(["post","put","patch"],function(l){T.prototype[l]=function(c,h,y){return this.request(R(y||{},{method:l,url:c,data:h}))}}),Ee.exports=T},9007:(Ee,B,K)=>{var M=K(951);function x(){this.handlers=[]}x.prototype.use=function(N,C,R){return this.handlers.push({fulfilled:N,rejected:C,synchronous:!!R&&R.synchronous,runWhen:R?R.runWhen:null}),this.handlers.length-1},x.prototype.eject=function(N){this.handlers[N]&&(this.handlers[N]=null)},x.prototype.forEach=function(N){M.forEach(this.handlers,function(C){C!==null&&N(C)})},Ee.exports=x},7059:(Ee,B,K)=>{var M=K(9791),x=K(726);Ee.exports=function(N,C){return N&&!M(C)?x(N,C):C}},3126:(Ee,B,K)=>{var M=K(7545);Ee.exports=function(x,N,C,R,I){var E=new Error(x);return M(E,N,C,R,I)}},9829:(Ee,B,K)=>{var M=K(951),x=K(252),N=K(3420),C=K(9445),R=K(4645);function I(E){if(E.cancelToken&&E.cancelToken.throwIfRequested(),E.signal&&E.signal.aborted)throw new R("canceled")}Ee.exports=function(E){return I(E),E.headers=E.headers||{},E.data=x.call(E,E.data,E.headers,E.transformRequest),E.headers=M.merge(E.headers.common||{},E.headers[E.method]||{},E.headers),M.forEach(["delete","get","head","post","put","patch","common"],function(T){delete E.headers[T]}),(E.adapter||C.adapter)(E).then(function(T){return I(E),T.data=x.call(E,T.data,T.headers,E.transformResponse),T},function(T){return N(T)||(I(E),T&&T.response&&(T.response.data=x.call(E,T.response.data,T.response.headers,E.transformResponse))),Promise.reject(T)})}},7545:Ee=>{Ee.exports=function(B,K,M,x,N){return B.config=K,M&&(B.code=M),B.request=x,B.response=N,B.isAxiosError=!0,B.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},B}},3046:(Ee,B,K)=>{var M=K(951);Ee.exports=function(x,N){N=N||{};var C={};function R(h,y){return M.isPlainObject(h)&&M.isPlainObject(y)?M.merge(h,y):M.isPlainObject(y)?M.merge({},y):M.isArray(y)?y.slice():y}function I(h){return M.isUndefined(N[h])?M.isUndefined(x[h])?void 0:R(void 0,x[h]):R(x[h],N[h])}function E(h){if(!M.isUndefined(N[h]))return R(void 0,N[h])}function T(h){return M.isUndefined(N[h])?M.isUndefined(x[h])?void 0:R(void 0,x[h]):R(void 0,N[h])}function l(h){return h in N?R(x[h],N[h]):h in x?R(void 0,x[h]):void 0}var c={url:E,method:E,data:E,baseURL:T,transformRequest:T,transformResponse:T,paramsSerializer:T,timeout:T,timeoutMessage:T,withCredentials:T,adapter:T,responseType:T,xsrfCookieName:T,xsrfHeaderName:T,onUploadProgress:T,onDownloadProgress:T,decompress:T,maxContentLength:T,maxBodyLength:T,transport:T,httpAgent:T,httpsAgent:T,cancelToken:T,socketPath:T,responseEncoding:T,validateStatus:l};return M.forEach(Object.keys(x).concat(Object.keys(N)),function(h){var y=c[h]||I,i=y(h);M.isUndefined(i)&&y!==l||(C[h]=i)}),C}},3254:(Ee,B,K)=>{var M=K(3126);Ee.exports=function(x,N,C){var R=C.config.validateStatus;C.status&&R&&!R(C.status)?N(M("Request failed with status code "+C.status,C.config,null,C.request,C)):x(C)}},252:(Ee,B,K)=>{var M=K(951),x=K(9445);Ee.exports=function(N,C,R){var I=this||x;return M.forEach(R,function(E){N=E.call(I,N,C)}),N}},9445:(Ee,B,K)=>{var M=K(951),x=K(3147),N=K(7545),C={"Content-Type":"application/x-www-form-urlencoded"};function R(T,l){!M.isUndefined(T)&&M.isUndefined(T["Content-Type"])&&(T["Content-Type"]=l)}var I,E={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:((typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(I=K(26)),I),transformRequest:[function(T,l){return x(l,"Accept"),x(l,"Content-Type"),M.isFormData(T)||M.isArrayBuffer(T)||M.isBuffer(T)||M.isStream(T)||M.isFile(T)||M.isBlob(T)?T:M.isArrayBufferView(T)?T.buffer:M.isURLSearchParams(T)?(R(l,"application/x-www-form-urlencoded;charset=utf-8"),T.toString()):M.isObject(T)||l&&l["Content-Type"]==="application/json"?(R(l,"application/json"),function(c,h,y){if(M.isString(c))try{return(0,JSON.parse)(c),M.trim(c)}catch(i){if(i.name!=="SyntaxError")throw i}return(0,JSON.stringify)(c)}(T)):T}],transformResponse:[function(T){var l=this.transitional||E.transitional,c=l&&l.silentJSONParsing,h=l&&l.forcedJSONParsing,y=!c&&this.responseType==="json";if(y||h&&M.isString(T)&&T.length)try{return JSON.parse(T)}catch(i){if(y)throw i.name==="SyntaxError"?N(i,this,"E_JSON_PARSE"):i}return T}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(T){return T>=200&&T<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};M.forEach(["delete","get","head"],function(T){E.headers[T]={}}),M.forEach(["post","put","patch"],function(T){E.headers[T]=M.merge(C)}),Ee.exports=E},281:Ee=>{Ee.exports={version:"0.24.0"}},857:Ee=>{Ee.exports=function(B,K){return function(){for(var M=new Array(arguments.length),x=0;x<M.length;x++)M[x]=arguments[x];return B.apply(K,M)}}},1669:(Ee,B,K)=>{var M=K(951);function x(N){return encodeURIComponent(N).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Ee.exports=function(N,C,R){if(!C)return N;var I;if(R)I=R(C);else if(M.isURLSearchParams(C))I=C.toString();else{var E=[];M.forEach(C,function(l,c){l!=null&&(M.isArray(l)?c+="[]":l=[l],M.forEach(l,function(h){M.isDate(h)?h=h.toISOString():M.isObject(h)&&(h=JSON.stringify(h)),E.push(x(c)+"="+x(h))}))}),I=E.join("&")}if(I){var T=N.indexOf("#");T!==-1&&(N=N.slice(0,T)),N+=(N.indexOf("?")===-1?"?":"&")+I}return N}},726:Ee=>{Ee.exports=function(B,K){return K?B.replace(/\/+$/,"")+"/"+K.replace(/^\/+/,""):B}},4369:(Ee,B,K)=>{var M=K(951);Ee.exports=M.isStandardBrowserEnv()?{write:function(x,N,C,R,I,E){var T=[];T.push(x+"="+encodeURIComponent(N)),M.isNumber(C)&&T.push("expires="+new Date(C).toGMTString()),M.isString(R)&&T.push("path="+R),M.isString(I)&&T.push("domain="+I),E===!0&&T.push("secure"),document.cookie=T.join("; ")},read:function(x){var N=document.cookie.match(new RegExp("(^|;\\s*)("+x+")=([^;]*)"));return N?decodeURIComponent(N[3]):null},remove:function(x){this.write(x,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},9791:Ee=>{Ee.exports=function(B){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(B)}},5320:Ee=>{Ee.exports=function(B){return typeof B=="object"&&B.isAxiosError===!0}},9600:(Ee,B,K)=>{var M=K(951);Ee.exports=M.isStandardBrowserEnv()?function(){var x,N=/(msie|trident)/i.test(navigator.userAgent),C=document.createElement("a");function R(I){var E=I;return N&&(C.setAttribute("href",E),E=C.href),C.setAttribute("href",E),{href:C.href,protocol:C.protocol?C.protocol.replace(/:$/,""):"",host:C.host,search:C.search?C.search.replace(/^\?/,""):"",hash:C.hash?C.hash.replace(/^#/,""):"",hostname:C.hostname,port:C.port,pathname:C.pathname.charAt(0)==="/"?C.pathname:"/"+C.pathname}}return x=R(window.location.href),function(I){var E=M.isString(I)?R(I):I;return E.protocol===x.protocol&&E.host===x.host}}():function(){return!0}},3147:(Ee,B,K)=>{var M=K(951);Ee.exports=function(x,N){M.forEach(x,function(C,R){R!==N&&R.toUpperCase()===N.toUpperCase()&&(x[N]=C,delete x[R])})}},4907:(Ee,B,K)=>{var M=K(951),x=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Ee.exports=function(N){var C,R,I,E={};return N&&M.forEach(N.split(`
`),function(T){if(I=T.indexOf(":"),C=M.trim(T.substr(0,I)).toLowerCase(),R=M.trim(T.substr(I+1)),C){if(E[C]&&x.indexOf(C)>=0)return;E[C]=C==="set-cookie"?(E[C]?E[C]:[]).concat([R]):E[C]?E[C]+", "+R:R}}),E}},3579:Ee=>{Ee.exports=function(B){return function(K){return B.apply(null,K)}}},2114:(Ee,B,K)=>{var M=K(281).version,x={};["object","boolean","number","function","string","symbol"].forEach(function(C,R){x[C]=function(I){return typeof I===C||"a"+(R<1?"n ":" ")+C}});var N={};x.transitional=function(C,R,I){function E(T,l){return"[Axios v"+M+"] Transitional option '"+T+"'"+l+(I?". "+I:"")}return function(T,l,c){if(C===!1)throw new Error(E(l," has been removed"+(R?" in "+R:"")));return R&&!N[l]&&(N[l]=!0,console.warn(E(l," has been deprecated since v"+R+" and will be removed in the near future"))),!C||C(T,l,c)}},Ee.exports={assertOptions:function(C,R,I){if(typeof C!="object")throw new TypeError("options must be an object");for(var E=Object.keys(C),T=E.length;T-- >0;){var l=E[T],c=R[l];if(c){var h=C[l],y=h===void 0||c(h,l,C);if(y!==!0)throw new TypeError("option "+l+" must be "+y)}else if(I!==!0)throw Error("Unknown option "+l)}},validators:x}},951:(Ee,B,K)=>{var M=K(857),x=Object.prototype.toString;function N(l){return x.call(l)==="[object Array]"}function C(l){return l===void 0}function R(l){return l!==null&&typeof l=="object"}function I(l){if(x.call(l)!=="[object Object]")return!1;var c=Object.getPrototypeOf(l);return c===null||c===Object.prototype}function E(l){return x.call(l)==="[object Function]"}function T(l,c){if(l!=null)if(typeof l!="object"&&(l=[l]),N(l))for(var h=0,y=l.length;h<y;h++)c.call(null,l[h],h,l);else for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&c.call(null,l[i],i,l)}Ee.exports={isArray:N,isArrayBuffer:function(l){return x.call(l)==="[object ArrayBuffer]"},isBuffer:function(l){return l!==null&&!C(l)&&l.constructor!==null&&!C(l.constructor)&&typeof l.constructor.isBuffer=="function"&&l.constructor.isBuffer(l)},isFormData:function(l){return typeof FormData<"u"&&l instanceof FormData},isArrayBufferView:function(l){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(l):l&&l.buffer&&l.buffer instanceof ArrayBuffer},isString:function(l){return typeof l=="string"},isNumber:function(l){return typeof l=="number"},isObject:R,isPlainObject:I,isUndefined:C,isDate:function(l){return x.call(l)==="[object Date]"},isFile:function(l){return x.call(l)==="[object File]"},isBlob:function(l){return x.call(l)==="[object Blob]"},isFunction:E,isStream:function(l){return R(l)&&E(l.pipe)},isURLSearchParams:function(l){return typeof URLSearchParams<"u"&&l instanceof URLSearchParams},isStandardBrowserEnv:function(){return(typeof navigator>"u"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window<"u"&&typeof document<"u"},forEach:T,merge:function l(){var c={};function h(g,d){I(c[d])&&I(g)?c[d]=l(c[d],g):I(g)?c[d]=l({},g):N(g)?c[d]=g.slice():c[d]=g}for(var y=0,i=arguments.length;y<i;y++)T(arguments[y],h);return c},extend:function(l,c,h){return T(c,function(y,i){l[i]=h&&typeof y=="function"?M(y,h):y}),l},trim:function(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")},stripBOM:function(l){return l.charCodeAt(0)===65279&&(l=l.slice(1)),l}}},9084:(Ee,B,K)=>{K.r(B),K.d(B,{default:()=>R});var M=new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"}),x=new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"});function N(I){return Object.assign({muted:!1,timeout:250,inline:!1},I)}function C(I,E){var T=I.muted,l=I.timeout,c=I.inline,h=E(),y=h.element,i=h.source,g=void 0,d=void 0,r=void 0;return y.muted=T,T===!0&&y.setAttribute("muted","muted"),c===!0&&y.setAttribute("playsinline","playsinline"),y.src=i,new Promise(function(t){g=y.play(),d=setTimeout(function(){r(!1,new Error("Timeout "+l+" ms has been reached"))},l),r=function(u){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;y.remove(),y.srcObject=null,clearTimeout(d),t({result:u,error:m})},g!==void 0?g.then(function(){return r(!0)}).catch(function(u){return r(!1,u)}):r(!0)})}const R={audio:function(I){return C(I=N(I),function(){return{element:document.createElement("audio"),source:URL.createObjectURL(M)}})},video:function(I){return C(I=N(I),function(){return{element:document.createElement("video"),source:URL.createObjectURL(x)}})}}},2779:(Ee,B)=>{var K;(function(){var M={}.hasOwnProperty;function x(){for(var N=[],C=0;C<arguments.length;C++){var R=arguments[C];if(R){var I=typeof R;if(I==="string"||I==="number")N.push(R);else if(Array.isArray(R)){if(R.length){var E=x.apply(null,R);E&&N.push(E)}}else if(I==="object"){if(R.toString!==Object.prototype.toString&&!R.toString.toString().includes("[native code]")){N.push(R.toString());continue}for(var T in R)M.call(R,T)&&R[T]&&N.push(T)}}}return N.join(" ")}Ee.exports?(x.default=x,Ee.exports=x):(K=(function(){return x}).apply(B,[]))===void 0||(Ee.exports=K)})()},2667:Ee=>{var B;B=()=>(()=>{var K={4593:(C,R)=>{var I,E,T,l,c,h={};I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=function(y){for(var i=0,g=[],d=0|y.length/3;0<d--;){var r=(y[i]<<16)+(y[i+1]<<8)+y[i+2];i+=3,g.push(I.charAt(63&r>>18)),g.push(I.charAt(63&r>>12)),g.push(I.charAt(63&r>>6)),g.push(I.charAt(63&r))}return y.length-i==2?(r=(y[i]<<16)+(y[i+1]<<8),g.push(I.charAt(63&r>>18)),g.push(I.charAt(63&r>>12)),g.push(I.charAt(63&r>>6)),g.push("=")):y.length-i==1&&(r=y[i]<<16,g.push(I.charAt(63&r>>18)),g.push(I.charAt(63&r>>12)),g.push("==")),g.join("")},T=function(){for(var y=[],i=0;i<64;++i)y[I.charCodeAt(i)]=i;return y["=".charCodeAt(0)]=0,y}(),l=function(y){for(var i=0,g=[],d=0|y.length/4;0<d--;){var r=(T[y.charCodeAt(i)]<<18)+(T[y.charCodeAt(i+1)]<<12)+(T[y.charCodeAt(i+2)]<<6)+T[y.charCodeAt(i+3)];g.push(255&r>>16),g.push(255&r>>8),g.push(255&r),i+=4}return g&&(y.charAt(i-2)=="="?(g.pop(),g.pop()):y.charAt(i-1)=="="&&g.pop()),g},c={encode:function(y){for(var i=[],g=0;g<y.length;++g)i.push(y.charCodeAt(g));return i},decode:function(y){for(var i=0;i<s.length;++i)a[i]=String.fromCharCode(a[i]);return a.join("")}},h.decodeArray=function(y){var i=l(y);return new Uint8Array(i)},h.encodeASCII=function(y){var i=c.encode(y);return E(i)},h.decodeASCII=function(y){var i=l(y);return c.decode(i)},h.encode=function(y){var i=function(g){for(var d=[],r=0;r<g.length;++r){var t=g.charCodeAt(r);t<128?d.push(t):t<2048?(d.push(192|t>>6),d.push(128|63&t)):t<65536?(d.push(224|t>>12),d.push(128|63&t>>6),d.push(128|63&t)):(d.push(240|t>>18),d.push(128|63&t>>12),d.push(128|63&t>>6),d.push(128|63&t))}return d}(y);return E(i)},h.decode=function(y){return function(i){for(var g=[],d=0;d<i.length;){var r=i[d++];r<128||(r<224?(r=(31&r)<<6,r|=63&i[d++]):r<240?(r=(15&r)<<12,r|=(63&i[d++])<<6,r|=63&i[d++]):(r=(7&r)<<18,r|=(63&i[d++])<<12,r|=(63&i[d++])<<6,r|=63&i[d++])),g.push(String.fromCharCode(r))}return g.join("")}(l(y))},R.decode=h.decode,R.decodeArray=h.decodeArray,R.encode=h.encode,R.encodeASCII=h.encodeASCII},452:(C,R)=>{(function(I){var E={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},T=function(f){var b=f;return E.hasOwnProperty(f)&&(b=E[f]),String.fromCharCode(b)},l=15,c=32,h={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},y={17:2,18:4,21:6,22:8,23:10,19:13,20:15},i={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},g={25:2,26:4,29:6,30:8,31:10,27:13,28:15},d=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],r={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(f){this.time=f},log:function(f,b){var p=this.verboseFilter[f];this.verboseLevel>=p&&console.log(this.time+" ["+f+"] "+b)}},t=function(f){for(var b=[],p=0;p<f.length;p++)b.push(f[p].toString(16));return b},u=function(f,b,p,k,P){this.foreground=f||"white",this.underline=b||!1,this.italics=p||!1,this.background=k||"black",this.flash=P||!1};u.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(f){for(var b=["foreground","underline","italics","background","flash"],p=0;p<b.length;p++){var k=b[p];f.hasOwnProperty(k)&&(this[k]=f[k])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(f){return this.foreground===f.foreground&&this.underline===f.underline&&this.italics===f.italics&&this.background===f.background&&this.flash===f.flash},copy:function(f){this.foreground=f.foreground,this.underline=f.underline,this.italics=f.italics,this.background=f.background,this.flash=f.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var m=function(f,b,p,k,P,j){this.uchar=f||" ",this.penState=new u(b,p,k,P,j)};m.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(f,b){this.uchar=f,this.penState.copy(b)},setPenState:function(f){this.penState.copy(f)},equals:function(f){return this.uchar===f.uchar&&this.penState.equals(f.penState)},copy:function(f){this.uchar=f.uchar,this.penState.copy(f.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var S=function(){this.chars=[];for(var f=0;f<c;f++)this.chars.push(new m);this.pos=0,this.currPenState=new u};S.prototype={equals:function(f){for(var b=!0,p=0;p<c;p++)if(!this.chars[p].equals(f.chars[p])){b=!1;break}return b},copy:function(f){for(var b=0;b<c;b++)this.chars[b].copy(f.chars[b])},isEmpty:function(){for(var f=!0,b=0;b<c;b++)if(!this.chars[b].isEmpty()){f=!1;break}return f},setCursor:function(f){this.pos!==f&&(this.pos=f),this.pos<0?(r.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>c&&(r.log("ERROR","Too large cursor position "+this.pos),this.pos=c)},moveCursor:function(f){var b=this.pos+f;if(f>1)for(var p=this.pos+1;p<b+1;p++)this.chars[p].setPenState(this.currPenState);this.setCursor(b)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(f){f>=144&&this.backSpace();var b=T(f);this.pos>=c?r.log("ERROR","Cannot insert "+f.toString(16)+" ("+b+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(b,this.currPenState),this.moveCursor(1))},clearFromPos:function(f){var b;for(b=f;b<c;b++)this.chars[b].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var f=[],b=!0,p=0;p<c;p++){var k=this.chars[p].uchar;k!==" "&&(b=!1),f.push(k)}return b?"":f.join("")},setPenStyles:function(f){this.currPenState.setStyles(f),this.chars[this.pos].setPenState(this.currPenState)}};var A=function(){this.rows=[];for(var f=0;f<l;f++)this.rows.push(new S);this.currRow=14,this.nrRollUpRows=null,this.reset()};A.prototype={reset:function(){for(var f=0;f<l;f++)this.rows[f].clear();this.currRow=14},equals:function(f){for(var b=!0,p=0;p<l;p++)if(!this.rows[p].equals(f.rows[p])){b=!1;break}return b},copy:function(f){for(var b=0;b<l;b++)this.rows[b].copy(f.rows[b])},isEmpty:function(){for(var f=!0,b=0;b<l;b++)if(!this.rows[b].isEmpty()){f=!1;break}return f},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(f){this.rows[this.currRow].insertChar(f)},setPen:function(f){this.rows[this.currRow].setPenStyles(f)},moveCursor:function(f){this.rows[this.currRow].moveCursor(f)},setCursor:function(f){r.log("INFO","setCursor: "+f),this.rows[this.currRow].setCursor(f)},setPAC:function(f){r.log("INFO","pacData = "+JSON.stringify(f));var b=f.row-1;this.nrRollUpRows&&b<this.nrRollUpRows-1&&(b=this.nrRollUpRows-1),this.currRow=b;var p=this.rows[this.currRow];if(f.indent!==null){var k=f.indent,P=Math.max(k-1,0);p.setCursor(f.indent),f.color=p.chars[P].penState.foreground}var j={foreground:f.color,underline:f.underline,italics:f.italics,background:"black",flash:!1};this.setPen(j)},setBkgData:function(f){r.log("INFO","bkgData = "+JSON.stringify(f)),this.backSpace(),this.setPen(f),this.insertChar(32)},setRollUpRows:function(f){this.nrRollUpRows=f},rollUp:function(){if(this.nrRollUpRows!==null){r.log("TEXT",this.getDisplayText());var f=this.currRow+1-this.nrRollUpRows,b=this.rows.splice(f,1)[0];b.clear(),this.rows.splice(this.currRow,0,b),r.log("INFO","Rolling up")}else r.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(f){f=f||!1;for(var b=[],p="",k=-1,P=0;P<l;P++){var j=this.rows[P].getTextString();j&&(k=P+1,f?b.push("Row "+k+': "'+j+'"'):b.push(j.trim()))}return b.length>0&&(p=f?"["+b.join(" | ")+"]":b.join(`
`)),p},getTextAndFormat:function(){return this.rows}};var _=function(f,b){this.chNr=f,this.outputFilter=b,this.mode=null,this.verbose=0,this.displayedMemory=new A,this.nonDisplayedMemory=new A,this.lastOutputScreen=new A,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};_.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(f){this.outputFilter=f},setPAC:function(f){this.writeScreen.setPAC(f)},setBkgData:function(f){this.writeScreen.setBkgData(f)},setMode:function(f){f!==this.mode&&(this.mode=f,r.log("INFO","MODE="+f),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=f)},insertChars:function(f){for(var b=0;b<f.length;b++)this.writeScreen.insertChar(f[b]);var p=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";r.log("INFO",p+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(r.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){r.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){r.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){r.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(f){r.log("INFO","RU("+f+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(f)},cc_FON:function(){r.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){r.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){r.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){r.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){r.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){r.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){r.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(r.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var f=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=f,this.writeScreen=this.nonDisplayedMemory,r.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(f){r.log("INFO","TO("+f+") - Tab Offset"),this.writeScreen.moveCursor(f)},cc_MIDROW:function(f){var b={flash:!1};if(b.underline=f%2==1,b.italics=f>=46,b.italics)b.foreground="white";else{var p=Math.floor(f/2)-16;b.foreground=["white","green","blue","cyan","red","yellow","magenta"][p]}r.log("INFO","MIDROW: "+JSON.stringify(b)),this.writeScreen.setPen(b)},outputDataUpdate:function(){var f=r.time;f!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(f,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,f,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:f):this.cueStartTime=f,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(f){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,f,this.displayedMemory),this.cueStartTime=f))}};var v=function(f,b,p){this.field=f||1,this.outputs=[b,p],this.channels=[new _(1,b),new _(2,p)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};v.prototype={getHandler:function(f){return this.channels[f].getHandler()},setHandler:function(f,b){this.channels[f].setHandler(b)},addData:function(f,b){var p,k,P,j=!1;this.lastTime=f,r.setTime(f);for(var U=0;U<b.length;U+=2)k=127&b[U],P=127&b[U+1],k>=16&&k<=31&&k===this.lastCmdA&&P===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,r.log("DEBUG","Repeated command ("+t([k,P])+") is dropped")):k!==0||P!==0?(r.log("DATA","["+t([b[U],b[U+1]])+"] -> ("+t([k,P])+")"),(p=this.parseCmd(k,P))||(p=this.parseMidrow(k,P)),p||(p=this.parsePAC(k,P)),p||(p=this.parseBackgroundAttributes(k,P)),p||(j=this.parseChars(k,P))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(j):r.log("WARNING","No channel found yet. TEXT-MODE?")),p?this.dataCounters.cmd+=2:j?this.dataCounters.char+=2:(this.dataCounters.other+=2,r.log("WARNING","Couldn't parse cleaned data "+t([k,P])+" orig: "+t([b[U],b[U+1]])))):this.dataCounters.padding+=2},parseCmd:function(f,b){var p;if(!((f===20||f===21||f===28||f===29)&&32<=b&&b<=47||(f===23||f===31)&&33<=b&&b<=35))return!1;p=f===20||f===21||f===23?1:2;var k=this.channels[p-1];return f===20||f===21||f===28||f===29?b===32?k.cc_RCL():b===33?k.cc_BS():b===34?k.cc_AOF():b===35?k.cc_AON():b===36?k.cc_DER():b===37?k.cc_RU(2):b===38?k.cc_RU(3):b===39?k.cc_RU(4):b===40?k.cc_FON():b===41?k.cc_RDC():b===42?k.cc_TR():b===43?k.cc_RTD():b===44?k.cc_EDM():b===45?k.cc_CR():b===46?k.cc_ENM():b===47&&k.cc_EOC():k.cc_TO(b-32),this.lastCmdA=f,this.lastCmdB=b,this.currChNr=p,!0},parseMidrow:function(f,b){var p=null;if((f===17||f===25)&&32<=b&&b<=47){if((p=f===17?1:2)!==this.currChNr)return r.log("ERROR","Mismatch channel in midrow parsing"),!1;var k=this.channels[p-1];return k.insertChars([32]),k.cc_MIDROW(b),r.log("DEBUG","MIDROW ("+t([f,b])+")"),this.lastCmdA=f,this.lastCmdB=b,!0}return!1},parsePAC:function(f,b){var p,k;if(!((17<=f&&f<=23||25<=f&&f<=31)&&64<=b&&b<=127||(f===16||f===24)&&64<=b&&b<=95))return!1;p=f<=23?1:2,k=64<=b&&b<=95?p===1?h[f]:i[f]:p===1?y[f]:g[f];var P=this.interpretPAC(k,b);return this.channels[p-1].setPAC(P),this.lastCmdA=f,this.lastCmdB=b,this.currChNr=p,!0},interpretPAC:function(f,b){var p,k={color:null,italics:!1,indent:null,underline:!1,row:f};return p=b>95?b-96:b-64,k.underline=(1&p)==1,p<=13?k.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(p/2)]:p<=15?(k.italics=!0,k.color="white"):k.indent=4*Math.floor((p-16)/2),k},parseChars:function(f,b){var p,k=null,P=null,j=null;if(f>=25?(k=2,j=f-8):(k=1,j=f),17<=j&&j<=19?(p=j===17?b+80:j===18?b+112:b+144,r.log("INFO","Special char '"+T(p)+"' in channel "+k),P=[p],this.lastCmdA=f,this.lastCmdB=b):32<=f&&f<=127&&(P=b===0?[f]:[f,b],this.lastCmdA=null,this.lastCmdB=null),P){var U=t(P);r.log("DEBUG","Char codes =  "+U.join(","))}return P},parseBackgroundAttributes:function(f,b){var p,k,P;return((f===16||f===24)&&32<=b&&b<=47||(f===23||f===31)&&45<=b&&b<=47)&&(p={},f===16||f===24?(k=Math.floor((b-32)/2),p.background=d[k],b%2==1&&(p.background=p.background+"_semi")):b===45?p.background="transparent":(p.foreground="black",b===47&&(p.underline=!0)),P=f<24?1:2,this.channels[P-1].setBkgData(p),this.lastCmdA=f,this.lastCmdB=b,!0)},reset:function(){for(var f=0;f<this.channels.length;f++)this.channels[f]&&this.channels[f].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(f){for(var b=0;b<this.channels.length;b++)this.channels[b]&&this.channels[b].cueSplitAtTime(f)}},I.logger=r,I.PenState=u,I.CaptionScreen=A,I.Cea608Parser=v,I.findCea608Nalus=function(f,b,p){for(var k=0,P=b,j=[],U=function(oe,W,Te,Ue){if(oe!==4||W<8)return null;var ze=Te.getUint8(Ue),le=Te.getUint16(Ue+1),Se=Te.getUint32(Ue+3),be=Te.getUint8(Ue+7);return ze==181&&le==49&&Se==1195456820&&be==3};P<b+p;){if(k=f.getUint32(P),(31&f.getUint8(P+4))==6)for(var G=P+5,ee=-1;G<P+4+k-1;){ee=0;for(var ne=255;ne===255;)ee+=ne=f.getUint8(G),G++;var re=0;for(ne=255;ne===255;)re+=ne=f.getUint8(G),G++;U(ee,re,f,G)&&j.push([G,re]),G+=re}P+=k+4}return j},I.extractCea608DataFromRange=function(f,b){var p=b[0],k=[[],[]];p+=8;var P=31&f.getUint8(p);p+=2;for(var j=0;j<P;j++){var U=f.getUint8(p),G=4&U,ee=3&U;p++;var ne=f.getUint8(p);p++;var re=f.getUint8(p);p++,G&&(127&ne)+(127&re)!=0&&(ee===0?(k[0].push(ne),k[0].push(re)):ee===1&&(k[1].push(ne),k[1].push(re)))}return k}})(R)},8416:(C,R,I)=>{var E=I(7688),T=I(5448),l=I(6398),c=I(2032),h=(I(5530),typeof window<"u"&&window||I.g),y=h.dashjs;y||(y=h.dashjs={}),y.MediaPlayer=E.Z,y.FactoryMaker=T.Z,y.Debug=l.Z,y.Version=(0,c.e)()},6398:(C,R,I)=>{I.d(R,{Z:()=>t});var E=I(5595),T=I(8512),l=I(5448),c=1,h=2,y=3,i=4,g=5;function d(u){u=u||{};var m,S,A,_,v=this.context,f=(0,E.Z)(v).getInstance(),b=u.settings,p=[];function k(re){return re&&re.bind?re.bind(window.console):window.console.log.bind(window.console)}function P(){for(var re=arguments.length,oe=new Array(re),W=0;W<re;W++)oe[W]=arguments[W];ne.apply(void 0,[c,this].concat(oe))}function j(){for(var re=arguments.length,oe=new Array(re),W=0;W<re;W++)oe[W]=arguments[W];ne.apply(void 0,[h,this].concat(oe))}function U(){for(var re=arguments.length,oe=new Array(re),W=0;W<re;W++)oe[W]=arguments[W];ne.apply(void 0,[y,this].concat(oe))}function G(){for(var re=arguments.length,oe=new Array(re),W=0;W<re;W++)oe[W]=arguments[W];ne.apply(void 0,[i,this].concat(oe))}function ee(){for(var re=arguments.length,oe=new Array(re),W=0;W<re;W++)oe[W]=arguments[W];ne.apply(void 0,[g,this].concat(oe))}function ne(re,oe){var W="",Te=null;S&&(Te=new Date().getTime(),W+="["+(Te-_)+"]"),A&&oe&&oe.getClassName&&(W+="["+oe.getClassName()+"]",oe.getType&&(W+="["+oe.getType()+"]")),W.length>0&&(W+=" ");for(var Ue=arguments.length,ze=new Array(Ue>2?Ue-2:0),le=2;le<Ue;le++)ze[le-2]=arguments[le];Array.apply(null,ze).forEach(function(Se){W+=Se+" "}),p[re]&&b&&b.get().debug.logLevel>=re&&p[re](W),b&&b.get().debug.dispatchEvent&&f.trigger(T.Z.LOG,{message:W,level:re})}return m={getLogger:function(re){return{fatal:P.bind(re),error:j.bind(re),warn:U.bind(re),info:G.bind(re),debug:ee.bind(re)}},setLogTimestampVisible:function(re){S=re},setCalleeNameVisible:function(re){A=re}},S=!0,A=!0,_=new Date().getTime(),typeof window<"u"&&window.console&&(p[c]=k(window.console.error),p[h]=k(window.console.error),p[y]=k(window.console.warn),p[i]=k(window.console.info),p[g]=k(window.console.debug)),m}d.__dashjs_factory_name="Debug";var r=l.Z.getSingletonFactory(d);r.LOG_LEVEL_NONE=0,r.LOG_LEVEL_FATAL=c,r.LOG_LEVEL_ERROR=h,r.LOG_LEVEL_WARNING=y,r.LOG_LEVEL_INFO=i,r.LOG_LEVEL_DEBUG=g,l.Z.updateSingletonFactory(d.__dashjs_factory_name,r);const t=r},5595:(C,R,I)=>{I.d(R,{Z:()=>h});var E=I(5448),T=I(8825);function l(){var y={};function i(d,r,t){var u=-1;return y[d]&&y[d].some(function(m,S){if(m&&m.callback===r&&(!t||t===m.scope))return u=S,!0}),u}var g={on:function(d,r,t){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!d)throw new Error("event type cannot be null or undefined");if(!r||typeof r!="function")throw new Error("listener must be a function: "+r);var m=u.priority||0;if(!(i(d,r,t)>=0)){y[d]=y[d]||[];var S={callback:r,scope:t,priority:m};t&&t.getStreamId&&(S.streamId=t.getStreamId()),t&&t.getType&&(S.mediaType=t.getType()),u&&u.mode&&(S.mode=u.mode);var A=y[d].some(function(_,v){if(_&&m>_.priority)return y[d].splice(v,0,S),!0});A||y[d].push(S)}},off:function(d,r,t){if(d&&r&&y[d]){var u=i(d,r,t);u<0||(y[d][u]=null)}},trigger:function(d){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(d&&y[d]){if((r=r||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");r.type=d,t.streamId&&(r.streamId=t.streamId),t.mediaType&&(r.mediaType=t.mediaType),y[d].filter(function(u){return!(!u||t.streamId&&u.streamId&&u.streamId!==t.streamId||t.mediaType&&u.mediaType&&u.mediaType!==t.mediaType||t.mode&&u.mode&&u.mode!==t.mode||!u.mode&&t.mode&&t.mode===T.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(u){return u&&u.callback.call(u.scope,r)})}},reset:function(){y={}}};return g}l.__dashjs_factory_name="EventBus";var c=E.Z.getSingletonFactory(l);c.EVENT_PRIORITY_LOW=0,c.EVENT_PRIORITY_HIGH=5e3,E.Z.updateSingletonFactory(l.__dashjs_factory_name,c);const h=c},5448:(C,R,I)=>{I.d(R,{Z:()=>E});const E=function(){var T,l=[],c={},h={};function y(r,t){for(var u in l){var m=l[u];if(m.context===r&&m.name===t)return m.instance}return null}function i(r,t){return t[r]}function g(r,t,u){r in u&&(u[r]=t)}function d(r,t,u){var m,S=r.__dashjs_factory_name,A=t[S];if(A){var _=A.instance;if(!A.override)return _.apply({context:t,factory:T},u);for(var v in m=r.apply({context:t},u),_=_.apply({context:t,factory:T,parent:m},u))m.hasOwnProperty(v)&&(m[v]=_[v])}else m=r.apply({context:t},u);return m.getClassName=function(){return S},m}return T={extend:function(r,t,u,m){!m[r]&&t&&(m[r]={instance:t,override:u})},getSingletonInstance:y,setSingletonInstance:function(r,t,u){for(var m in l){var S=l[m];if(S.context===r&&S.name===t)return void(l[m].instance=u)}l.push({name:t,context:r,instance:u})},deleteSingletonInstances:function(r){l=l.filter(function(t){return t.context!==r})},getSingletonFactory:function(r){var t=i(r.__dashjs_factory_name,c);return t||(t=function(u){var m;return u===void 0&&(u={}),{getInstance:function(){return m||(m=y(u,r.__dashjs_factory_name)),m||(m=d(r,u,arguments),l.push({name:r.__dashjs_factory_name,context:u,instance:m})),m}}},c[r.__dashjs_factory_name]=t),t},getSingletonFactoryByName:function(r){return i(r,c)},updateSingletonFactory:function(r,t){g(r,t,c)},getClassFactory:function(r){var t=i(r.__dashjs_factory_name,h);return t||(t=function(u){return u===void 0&&(u={}),{create:function(){return d(r,u,arguments)}}},h[r.__dashjs_factory_name]=t),t},getClassFactoryByName:function(r){return i(r,h)},updateClassFactory:function(r,t){g(r,t,h)}},T}()},1264:(C,R,I)=>{I.d(R,{Z:()=>t});var E=I(5448),T=I(703),l=I(6398),c=I(3393),h=I(7855),y=I(5595),i=I(8512);function g(u){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},g(u)}function d(u,m,S){return m in u?Object.defineProperty(u,m,{value:S,enumerable:!0,configurable:!0,writable:!0}):u[m]=S,u}function r(){var u,m,S=this.context,A=(0,y.Z)(S).getInstance(),_={"streaming.delay.liveDelay":i.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":i.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":i.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":i.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":i.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},v={debug:{logLevel:l.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,extendSegmentedCues:!0,webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:c.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:c.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:c.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:c.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(u={},d(u,h.w.MPD_TYPE,500),d(u,h.w.XLINK_EXPANSION_TYPE,500),d(u,h.w.MEDIA_SEGMENT_TYPE,1e3),d(u,h.w.INIT_SEGMENT_TYPE,1e3),d(u,h.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),d(u,h.w.INDEX_SEGMENT_TYPE,1e3),d(u,h.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),d(u,h.w.LICENSE,1e3),d(u,h.w.OTHER_TYPE,1e3),d(u,"lowLatencyReductionFactor",10),u),retryAttempts:(m={},d(m,h.w.MPD_TYPE,3),d(m,h.w.XLINK_EXPANSION_TYPE,1),d(m,h.w.MEDIA_SEGMENT_TYPE,3),d(m,h.w.INIT_SEGMENT_TYPE,3),d(m,h.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),d(m,h.w.INDEX_SEGMENT_TYPE,3),d(m,h.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),d(m,h.w.LICENSE,3),d(m,h.w.OTHER_TYPE,3),d(m,"lowLatencyMultiplyFactor",5),m),abr:{movingAverageMethod:c.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:c.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:c.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:c.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},f=T.Z.clone(v);function b(p,k,P){for(var j in p)p.hasOwnProperty(j)&&(k.hasOwnProperty(j)?g(p[j])!=="object"||p[j]instanceof Array||p[j]===null?(k[j]=T.Z.clone(p[j]),_[P+j]&&A.trigger(_[P+j])):b(p[j],k[j],P.slice()+j+"."):console.error("Settings parameter "+P+j+" is not supported"))}return{get:function(){return f},update:function(p){g(p)==="object"&&b(p,f,"")},reset:function(){f=T.Z.clone(v)}}}r.__dashjs_factory_name="Settings";const t=E.Z.getSingletonFactory(r)},703:(C,R,I)=>{I.d(R,{Z:()=>h});var E=I(3875),T=I.n(E),l=I(1067);function c(y){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},c(y)}const h=function(){function y(){(function(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")})(this,y)}var i;return i=[{key:"mixin",value:function(g,d,r){var t,u={};if(g)for(var m in d)d.hasOwnProperty(m)&&(t=d[m],m in g&&(g[m]===t||m in u&&u[m]===t)||(c(g[m])==="object"&&g[m]!==null?g[m]=y.mixin(g[m],t,r):g[m]=r(t)));return g}},{key:"clone",value:function(g){if(!g||c(g)!=="object")return g;var d;if(g instanceof Array){d=[];for(var r=0,t=g.length;r<t;++r)r in g&&d.push(y.clone(g[r]))}else d={};return y.mixin(d,g,y.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(g,d){try{if(!d||d.length===0)return g;var r=new URL(g);return d.forEach(function(t){t.key&&t.value&&r.searchParams.set(t.key,t.value)}),r.href}catch{return g}}},{key:"parseHttpHeaders",value:function(g){var d={};if(!g)return d;for(var r=g.trim().split(`\r
`),t=0,u=r.length;t<u;t++){var m=r[t],S=m.indexOf(": ");S>0&&(d[m.substring(0,S)]=m.substring(S+2))}return d}},{key:"generateUuid",value:function(){var g=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var r=(g+16*Math.random())%16|0;return g=Math.floor(g/16),(d=="x"?r:3&r|8).toString(16)})}},{key:"generateHashCode",value:function(g){var d=0;if(g.length===0)return d;for(var r=0;r<g.length;r++)d=(d<<5)-d+g.charCodeAt(r),d|=0;return d}},{key:"getRelativeUrl",value:function(g,d){try{var r=new URL(g),t=new URL(d);if(r.protocol=t.protocol,r.origin!==t.origin)return d;var u=T().relative(r.pathname.substr(0,r.pathname.lastIndexOf("/")),t.pathname.substr(0,t.pathname.lastIndexOf("/"))),m=u.length===0?1:0;return u+=t.pathname.substr(t.pathname.lastIndexOf("/")+m,t.pathname.length-1),t.pathname.length<u.length?t.pathname:u}catch{return d}}},{key:"parseUserAgent",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var d=g===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,l.UAParser)(d)}catch{return{}}}}],i&&function(g,d){for(var r=0;r<d.length;r++){var t=d[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,t.key,t)}}(y,i),y}()},2032:(C,R,I)=>{function E(){return"4.7.0"}I.d(R,{e:()=>E})},2230:(C,R,I)=>{I.d(R,{Z:()=>E});const E=function(){function T(){(function(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")})(this,T)}var l;return(l=[{key:"extend",value:function(c,h){if(c){var y=!!h&&h.override,i=!!h&&h.publicOnly;for(var g in c)!c.hasOwnProperty(g)||this[g]&&!y||i&&c[g].indexOf("public_")===-1||(this[g]=c[g])}}}])&&function(c,h){for(var y=0;y<h.length;y++){var i=h[y];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(c,i.key,i)}}(T.prototype,l),T}()},4351:(C,R,I)=>{function E(y){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},E(y)}function T(y,i){return T=Object.setPrototypeOf||function(g,d){return g.__proto__=d,g},T(y,i)}function l(y,i){return!i||E(i)!=="object"&&typeof i!="function"?function(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(y):i}function c(y){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},c(y)}I.d(R,{Z:()=>h});const h=function(y){(function(t,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(u&&u.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),u&&T(t,u)})(r,y);var i,g,d=(i=r,g=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var t,u=c(i);if(g){var m=c(this).constructor;t=Reflect.construct(u,arguments,m)}else t=u.apply(this,arguments);return l(this,t)});function r(){var t;return function(u,m){if(!(u instanceof m))throw new TypeError("Cannot call a class as a function")}(this,r),(t=d.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",t.BUFFERING_COMPLETED="bufferingCompleted",t.BUFFER_CLEARED="bufferCleared",t.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",t.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",t.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",t.CMSD_STATIC_HEADER="cmsdStaticHeader",t.CURRENT_TRACK_CHANGED="currentTrackChanged",t.DATA_UPDATE_COMPLETED="dataUpdateCompleted",t.INBAND_EVENTS="inbandEvents",t.INITIAL_STREAM_SWITCH="initialStreamSwitch",t.INIT_FRAGMENT_LOADED="initFragmentLoaded",t.INIT_FRAGMENT_NEEDED="initFragmentNeeded",t.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",t.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",t.LOADING_COMPLETED="loadingCompleted",t.LOADING_PROGRESS="loadingProgress",t.LOADING_DATA_PROGRESS="loadingDataProgress",t.LOADING_ABANDONED="loadingAborted",t.MANIFEST_UPDATED="manifestUpdated",t.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",t.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",t.QUOTA_EXCEEDED="quotaExceeded",t.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",t.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",t.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",t.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",t.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",t.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",t.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",t.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",t.SOURCE_BUFFER_ERROR="sourceBufferError",t.STREAMS_COMPOSED="streamsComposed",t.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",t.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",t.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",t.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",t.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",t.URL_RESOLUTION_FAILED="urlResolutionFailed",t.VIDEO_CHUNK_RECEIVED="videoChunkReceived",t.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",t.XLINK_ELEMENT_LOADED="xlinkElementLoaded",t.XLINK_READY="xlinkReady",t.SEEK_TARGET="seekTarget",t.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",t.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",t.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",t.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",t.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",t}return r}(I(8342).Z)},8512:(C,R,I)=>{function E(y){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},E(y)}function T(y,i){return T=Object.setPrototypeOf||function(g,d){return g.__proto__=d,g},T(y,i)}function l(y,i){return!i||E(i)!=="object"&&typeof i!="function"?function(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(y):i}function c(y){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},c(y)}I.d(R,{Z:()=>h});const h=new(function(y){(function(t,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(u&&u.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),u&&T(t,u)})(r,y);var i,g,d=(i=r,g=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var t,u=c(i);if(g){var m=c(this).constructor;t=Reflect.construct(u,arguments,m)}else t=u.apply(this,arguments);return l(this,t)});function r(){return function(t,u){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this,r),d.apply(this,arguments)}return r}(I(4351).Z))},8342:(C,R,I)=>{I.d(R,{Z:()=>E});const E=function(){function T(){(function(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")})(this,T)}var l;return(l=[{key:"extend",value:function(c,h){if(c){var y=!!h&&h.override,i=!!h&&h.publicOnly;for(var g in c)!c.hasOwnProperty(g)||this[g]&&!y||i&&c[g].indexOf("public_")===-1||(this[g]=c[g])}}}])&&function(c,h){for(var y=0;y<h.length;y++){var i=h[y];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(c,i.key,i)}}(T.prototype,l),T}()},9326:(C,R,I)=>{I.d(R,{Z:()=>g});var E=I(3186),T=I(7855),l=I(5448),c=I(8825),h=I(7387),y=I(1553);function i(d){var r,t,u,m,S,A=(d=d||{}).eventBus,_=d.debug,v=d.urlUtils,f=d.type,b=d.streamInfo,p=d.segmentsController,k=d.timelineConverter,P=d.baseURLController;function j(){return f}function U(){u=null}function G(oe,W,Te){var Ue,ze,le=P.resolve(Te.path),Se={};return le&&W!==le.url&&v.isRelative(W)?(Ue=le.url,ze=le.serviceLocation,Se=le.queryParams,W&&(Ue=v.resolve(W,Ue))):Ue=W,!v.isRelative(Ue)&&(oe.url=Ue,oe.serviceLocation=ze,oe.queryParams=Se,!0)}function ee(oe,W){if(W==null)return null;var Te=new E.Z,Ue=W.representation,ze=Ue.adaptation.period.mpd.manifest.Period_asArray[Ue.adaptation.period.index].AdaptationSet_asArray[Ue.adaptation.index].Representation_asArray[Ue.index].bandwidth,le=W.media;return le=(0,h.vi)(le,"Number",W.replacementNumber),le=(0,h.vi)(le,"Time",W.replacementTime),le=(0,h.vi)(le,"Bandwidth",ze),le=(0,h.Aj)(le,Ue.id),le=(0,h.eR)(le),Te.mediaType=j(),Te.type=T.w.MEDIA_SEGMENT_TYPE,Te.range=W.mediaRange,Te.startTime=W.presentationStartTime,Te.mediaStartTime=W.mediaStartTime,Te.duration=W.duration,Te.timescale=Ue.timescale,Te.availabilityStartTime=W.availabilityStartTime,Te.availabilityEndTime=W.availabilityEndTime,Te.availabilityTimeComplete=Ue.availabilityTimeComplete,Te.wallStartTime=W.wallStartTime,Te.quality=Ue.index,Te.index=W.index,Te.mediaInfo=oe,Te.adaptationIndex=Ue.adaptation.index,Te.representationId=Ue.id,G(Te,le,Ue)?Te:void 0}function ne(oe,W,Te){var Ue=null;if(!W||!W.segmentInfoType)return Ue;var ze=p.getSegmentByTime(W,Te);return ze&&(u=ze,t.debug("Index for time "+Te+" is "+ze.index),Ue=ee(oe,ze)),Ue}function re(){t.debug("Dynamic stream complete"),S=!0}return r={initialize:function(oe){m=oe,S=!1,p.initialize(oe)},getStreamId:function(){return b.id},getType:j,getStreamInfo:function(){return b},getInitRequest:function(oe,W){return W?function(Te,Ue,ze){var le=new E.Z,Se=Ue.adaptation.period,be=Se.start;if(le.mediaType=ze,le.type=T.w.INIT_SEGMENT_TYPE,le.range=Ue.range,le.availabilityStartTime=k.calcAvailabilityStartTimeFromPresentationTime(be,Ue,m),le.availabilityEndTime=k.calcAvailabilityEndTimeFromPresentationTime(be+Se.duration,Ue,m),le.quality=Ue.index,le.mediaInfo=Te,le.representationId=Ue.id,G(le,Ue.initialization,Ue))return le.url=(0,h.vi)(le.url,"Bandwidth",Ue.bandwidth),le}(oe,W,j()):null},getSegmentRequestForTime:ne,getCurrentIndex:function(){return u?u.index:-1},getNextSegmentRequest:function(oe,W){var Te=null;if(!W||!W.segmentInfoType)return null;var Ue=u?u.index+1:0,ze=p.getSegmentByIndex(W,Ue,u?u.mediaStartTime:-1);if(ze)Te=ee(oe,ze),u=ze;else{if(m&&!S)return t.debug(j()+" No segment found at index: "+Ue+". Wait for next loop"),null;S=!0}return Te},isLastSegmentRequested:function(oe,W){return!oe||!u?!1:S?!0:!isFinite(oe.adaptation.period.duration)||u.presentationStartTime+u.duration>W?!1:oe.mediaFinishedInformation&&!isNaN(oe.mediaFinishedInformation.numberOfSegments)&&!isNaN(u.index)&&u.index>=oe.mediaFinishedInformation.numberOfSegments-1&&(!m||oe.segmentInfoType===y.Z.SEGMENT_TEMPLATE||m&&oe.segmentInfoType===y.Z.SEGMENT_LIST&&oe.adaptation.period.nextPeriodId)?!0:!!(m&&oe.adaptation.period.nextPeriodId&&oe.segmentInfoType===y.Z.SEGMENT_TIMELINE&&oe.mediaFinishedInformation&&!isNaN(oe.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&u&&!isNaN(u.mediaStartTime)&&!isNaN(u.duration)&&u.mediaStartTime+u.duration>=oe.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},reset:function(){U(),A.off(c.Z.DYNAMIC_TO_STATIC,re,r)},getNextSegmentRequestIdempotent:function(oe,W){var Te=u?u.index+1:0,Ue=p.getSegmentByIndex(W,Te,u?u.mediaStartTime:-1);return Ue?ee(oe,Ue):null},getValidTimeAheadOfTargetTime:function(oe,W,Te,Ue){try{if(isNaN(oe)||!W||!Te)return NaN;if(oe<0&&(oe=0),isNaN(Ue)&&(Ue=.5),ne(W,Te,oe))return oe;if(Te.adaptation.period.start+Te.adaptation.period.duration<oe)return NaN;for(var ze=isFinite(Te.adaptation.period.duration)?Te.adaptation.period.start+Te.adaptation.period.duration:oe+30,le=Math.min(oe+Ue,ze),Se=NaN,be=null;le<=ze;){var Y=null;if(le<=ze&&(Y=ne(W,Te,le)),Y){Se=le,be=Y;break}le+=Ue}if(be){var Q=be.startTime+be.duration;return oe>be.startTime&&Q-oe>Ue?oe:!isNaN(be.startTime)&&oe<be.startTime&&Se>be.startTime?be.startTime+.001:Math.min(Q-Ue,Se)}return Se}catch{return NaN}}},t=_.getLogger(r),U(),A.on(c.Z.DYNAMIC_TO_STATIC,re,r),r}i.__dashjs_factory_name="DashHandler";const g=l.Z.getClassFactory(i)},1553:(C,R,I)=>{I.d(R,{Z:()=>E});const E=new(function(){function T(){(function(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")})(this,T),this.init()}var l;return(l=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&function(c,h){for(var y=0;y<h.length;y++){var i=h[y];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(c,i.key,i)}}(T.prototype,l),T}())},7802:(C,R,I)=>{I.d(R,{Z:()=>i});var E=I(5448),T=I(1724),l=I(3636),c=I(1736),h=I(5246);function y(g){g=g||{};var d,r,t=this.context,u=g.dashConstants,m=g.type,S=g.segmentBaseController;function A(_){return _?_.segments?r[u.SEGMENT_BASE]:r[_.segmentInfoType]:null}return d={initialize:function(_){r[u.SEGMENT_TIMELINE]=(0,T.Z)(t).create(g,_),r[u.SEGMENT_TEMPLATE]=(0,l.Z)(t).create(g,_),r[u.SEGMENT_LIST]=(0,c.Z)(t).create(g,_),r[u.SEGMENT_BASE]=(0,h.Z)(t).create(g,_)},updateInitData:function(_,v){return v?Promise.resolve():S.getSegmentBaseInitSegment({representation:_,mediaType:m})},updateSegmentData:function(_,v){return v?Promise.resolve():S.getSegmentList({mimeType:_.mimeType,representation:_,mediaType:m})},getSegmentByIndex:function(_,v,f){var b=A(_);return b?b.getSegmentByIndex(_,v,f):null},getSegmentByTime:function(_,v){var f=A(_);return f?f.getSegmentByTime(_,v):null},getMediaFinishedInformation:function(_){var v=A(_);return v?v.getMediaFinishedInformation(_):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},r={},d}y.__dashjs_factory_name="SegmentsController";const i=E.Z.getClassFactory(y)},1736:(C,R,I)=>{I.d(R,{Z:()=>h});var E=I(5448),T=I(3393),l=I(7387);function c(y,i){var g=(y=y||{}).timelineConverter;function d(){if(!g||!g.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(T.Z.MISSING_CONFIG_ERROR)}function r(t,u){if(d(),!t)return null;var m=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList,S=m.SegmentURL_asArray.length,A=t&&!isNaN(t.startNumber)?t.startNumber:1,_=Math.max(A-1,0),v=Math.max(u-_,0),f=null;if(v<S){var b=m.SegmentURL_asArray[v];(f=(0,l.NF)(g,i,t,u))&&(f.replacementTime=(A+u-1)*t.segmentDuration,f.media=b.media?b.media:"",f.mediaRange=b.mediaRange,f.indexRange=b.indexRange)}return f}return{getSegmentByIndex:r,getSegmentByTime:function(t,u){if(d(),!t)return null;var m=t.segmentDuration;if(isNaN(m))return null;var S=g.calcPeriodRelativeTimeFromMpdRelativeTime(t,u);return r(t,Math.floor(S/m))},getMediaFinishedInformation:function(t){var u={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!t)return u;var m=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList,S=t&&!isNaN(t.startNumber)?t.startNumber:1,A=Math.max(S-1,0);return u.numberOfSegments=A+m.SegmentURL_asArray.length,u}}}c.__dashjs_factory_name="ListSegmentsGetter";const h=E.Z.getClassFactory(c)},5246:(C,R,I)=>{I.d(R,{Z:()=>c});var E=I(5448),T=I(3393);function l(h){var y=(h=h||{}).timelineConverter;function i(){if(!y||!y.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(T.Z.MISSING_CONFIG_ERROR)}function g(d,r){if(i(),!d)return null;var t,u=d.segments?d.segments.length:-1;if(r<u&&(t=d.segments[r])&&t.index===r)return t;for(var m=0;m<u;m++)if((t=d.segments[m])&&t.index===r)return t;return null}return{getSegmentByIndex:g,getSegmentByTime:function(d,r){i();var t=function(u,m){if(!u)return-1;var S,A,_,v,f,b=u.segments,p=b?b.length:null,k=-1;if(b&&p>0){for(f=0;f<p;f++)if(_=(A=b[f]).presentationStartTime,m+(S=(v=A.duration)/2)>=_&&m-S<_+v){k=A.index;break}}return k}(d,r);return g(d,t)},getMediaFinishedInformation:function(d){var r={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return d&&d.segments&&(r.numberOfSegments=d.segments.length),r}}}l.__dashjs_factory_name="SegmentBaseGetter";const c=E.Z.getClassFactory(l)},7387:(C,R,I)=>{I.d(R,{Aj:()=>c,NF:()=>g,TJ:()=>d,eR:()=>l,vi:()=>h});var E=I(2011);function T(r,t){for(;r.length<t;)r="0"+r;return r}function l(r){return r&&r.split("$$").join("$")}function c(r,t){if(!t||!r||r.indexOf("$RepresentationID$")===-1)return r;var u=t.toString();return r.split("$RepresentationID$").join(u)}function h(r,t,u){var m,S,A,_,v,f,b=t.length;if(!r)return r;for(;;){if((m=r.indexOf("$"+t))<0||(S=r.indexOf("$",m+b))<0)return r;if((A=r.indexOf("%0",m+b))>m&&A<S)switch(_=r.charAt(S-1),v=parseInt(r.substring(A+2,S-1),10),_){case"d":case"i":case"u":f=T(u.toString(),v);break;case"x":f=T(u.toString(16),v);break;case"X":f=T(u.toString(16),v).toUpperCase();break;case"o":f=T(u.toString(8),v);break;default:return r}else f=u;r=r.substring(0,m)+f+r.substring(S+1)}}function y(r,t,u,m,S,A,_,v){var f,b=new E.Z;return b.representation=r,b.duration=t,b.presentationStartTime=u,b.mediaStartTime=m,b.availabilityStartTime=S.calcAvailabilityStartTimeFromPresentationTime(A,r,_),b.availabilityEndTime=S.calcAvailabilityEndTimeFromPresentationTime(A+t,r,_),b.wallStartTime=S.calcWallTimeForSegment(b,_),b.replacementNumber=(f=v,b.representation.startNumber+f),b.index=v,b}function i(r,t,u,m){var S=t.adaptation.period;if(isFinite(S.duration)&&S.start+S.duration<=u.presentationStartTime)return!1;if(m){if(t.availabilityTimeOffset==="INF")return!0;var A=r.getClientReferenceTime();return u.availabilityStartTime.getTime()<=A&&(!isFinite(u.availabilityEndTime)||u.availabilityEndTime.getTime()>=A)}return!0}function g(r,t,u,m){var S,A,_;S=u.segmentDuration,isNaN(S)&&(S=u.adaptation.period.duration),A=parseFloat((u.adaptation.period.start+m*S).toFixed(5)),_=parseFloat((A+S).toFixed(5));var v=y(u,S,A,r.calcMediaTimeFromPresentationTime(A,u),r,_,t,m);return i(r,u,v,t)?v:null}function d(r,t,u,m,S,A,_,v,f,b){var p,k,P=m/A,j=S/A;return p=r.calcPresentationTimeFromMediaTime(P,u),i(r,u,k=y(u,j,p,P,r,p+j,t,f),t)?(k.replacementTime=b||m,_=h(_,"Number",k.replacementNumber),_=h(_,"Time",k.replacementTime),k.media=_,k.mediaRange=v,k):null}},3636:(C,R,I)=>{I.d(R,{Z:()=>h});var E=I(5448),T=I(3393),l=I(7387);function c(y,i){var g=(y=y||{}).timelineConverter;function d(){if(!g||!g.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(T.Z.MISSING_CONFIG_ERROR)}function r(t,u){if(d(),!t)return null;var m=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentTemplate;u=Math.max(u,0);var S=(0,l.NF)(g,i,t,u);if(S){S.replacementTime=Math.round((u-1)*t.segmentDuration*t.timescale,10);var A=m.media;A=(0,l.vi)(A,"Number",S.replacementNumber),A=(0,l.vi)(A,"Time",S.replacementTime),S.media=A}return S}return{getSegmentByIndex:r,getSegmentByTime:function(t,u){if(d(),!t)return null;var m=t.segmentDuration;if(isNaN(m))return null;var S=g.calcPeriodRelativeTimeFromMpdRelativeTime(t,u);return r(t,Math.floor(S/m))},getMediaFinishedInformation:function(t){var u={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!t)return u;var m=t.segmentDuration;return isNaN(m)?u.numberOfSegments=1:u.numberOfSegments=Math.ceil(t.adaptation.period.duration/m),u}}}c.__dashjs_factory_name="TemplateSegmentsGetter";const h=E.Z.getClassFactory(c)},1724:(C,R,I)=>{I.d(R,{Z:()=>h});var E=I(5448),T=I(3393),l=I(7387);function c(y,i){var g=(y=y||{}).timelineConverter,d=y.dashMetrics;function r(){if(!g)throw new Error(T.Z.MISSING_CONFIG_ERROR)}function t(m,S){var A,_,v,f,b,p,k,P=m.adaptation.period.mpd.manifest.Period_asArray[m.adaptation.period.index].AdaptationSet_asArray[m.adaptation.index].Representation_asArray[m.index].SegmentTemplate||m.adaptation.period.mpd.manifest.Period_asArray[m.adaptation.period.index].AdaptationSet_asArray[m.adaptation.index].Representation_asArray[m.index].SegmentList,j=P.SegmentTimeline,U=P.SegmentURL_asArray,G=0,ee=-1;k=m.timescale;var ne=!1;for(v=0,f=(A=j.S_asArray).length;v<f&&!ne;v++)for(p=0,(_=A[v]).hasOwnProperty("r")&&(p=_.r),_.hasOwnProperty("t")&&(G=_.t),p<0&&(p=u(m,A[v+1],_,k,G/k)),b=0;b<=p&&!ne;b++)(ne=S(G,P,U,_,k,++ee,v))&&(m.segmentDuration=_.d/k),G+=_.d}function u(m,S,A,_,v){var f;if(S&&S.hasOwnProperty("t"))f=S.t/_;else try{var b=0;if(isNaN(m.adaptation.period.start)||isNaN(m.adaptation.period.duration)||!isFinite(m.adaptation.period.duration)){var p=d.getCurrentDVRInfo();b=isNaN(p.end)?0:p.end}else b=m.adaptation.period.start+m.adaptation.period.duration;f=g.calcMediaTimeFromPresentationTime(b,m),m.segmentDuration=A.d/_}catch{f=0}return Math.max(Math.ceil((f-v)/(A.d/_))-1,0)}return{getSegmentByIndex:function(m,S,A){if(r(),!m)return null;var _=null,v=!1;return t(m,function(f,b,p,k,P,j,U){if(v||A<0){var G=b.media,ee=k.mediaRange;return p&&(G=p[U].media||"",ee=p[U].mediaRange),_=(0,l.TJ)(g,i,m,f,k.d,P,G,ee,j,k.tManifest),!0}return f>=A*P-.5*k.d&&(v=!0),!1}),_},getSegmentByTime:function(m,S){if(r(),!m)return null;S===void 0&&(S=null);var A=null,_=g.calcMediaTimeFromPresentationTime(S,m);return t(m,function(v,f,b,p,k,P,j){var U=parseFloat((_*k).toPrecision(15));if(U<v+p.d&&U>=v){var G=f.media,ee=p.mediaRange;return b&&(G=b[j].media||"",ee=b[j].mediaRange),A=(0,l.TJ)(g,i,m,v,p.d,k,G,ee,P,p.tManifest),!0}return!1}),A},getMediaFinishedInformation:function(m){if(!m)return 0;var S,A,_,v,f,b,p,k=(m.adaptation.period.mpd.manifest.Period_asArray[m.adaptation.period.index].AdaptationSet_asArray[m.adaptation.index].Representation_asArray[m.index].SegmentTemplate||m.adaptation.period.mpd.manifest.Period_asArray[m.adaptation.period.index].AdaptationSet_asArray[m.adaptation.index].Representation_asArray[m.index].SegmentList).SegmentTimeline,P=0,j=0,U=0;for(p=m.timescale,v=(S=k.S_asArray).length,_=0;_<v;_++)for(b=0,(A=S[_]).hasOwnProperty("r")&&(b=A.r),A.hasOwnProperty("t")&&(j=(P=A.t)/p),b<0&&(b=u(m,S[_+1],A,p,j)),f=0;f<=b;f++)U++,j=(P+=A.d)/p;return{numberOfSegments:U,mediaTimeOfLastSignaledSegment:j}}}}c.__dashjs_factory_name="TimelineSegmentsGetter";const h=E.Z.getClassFactory(c)},2011:(C,R,I)=>{I.d(R,{Z:()=>E});const E=function T(){(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,T),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:(C,R,I)=>{I.d(R,{Z:()=>E});const E=function T(){(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,T),this.schemeIdUri="",this.value=""}},7688:(C,R,I)=>{I.d(R,{Z:()=>ag});var E=I(452),T=I.n(E),l=I(3393),c=I(1553),h=I(3860),y=I(5595),i=I(8512),g=I(5448),d=I(6398),r=I(8825);function t(){var ae,ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We,qe,vt,ot,ct,mt,Me,st,tt,ft,he,Le,Ve=this.context,Fe=(0,y.Z)(Ve).getInstance();function Pe(){xe(),qe=!1,He=0,Be=0,ot=0,ft=!1,ct=!0,mt=!1,he=!1,Me=NaN,ye&&(Fe.off(i.Z.DATA_UPDATE_COMPLETED,Rt,ae),Fe.off(i.Z.LOADING_PROGRESS,sr,ae),Fe.off(i.Z.MANIFEST_UPDATED,Ht,ae),Fe.off(i.Z.STREAMS_COMPOSED,tn,ae),Fe.off(r.Z.PLAYBACK_ENDED,ui,ae),Fe.off(r.Z.STREAM_INITIALIZING,Yt,ae),Fe.off(r.Z.REPRESENTATION_SWITCH,yn,ae),Fe.off(r.Z.BUFFER_LEVEL_STATE_CHANGED,zt,ae),gt(),ye.removeEventListener("canplay",It),ye.removeEventListener("canplaythrough",xt),ye.removeEventListener("play",qt),ye.removeEventListener("waiting",In),ye.removeEventListener("playing",Pn),ye.removeEventListener("pause",yr),ye.removeEventListener("error",Sn),ye.removeEventListener("seeking",ar),ye.removeEventListener("seeked",lr),ye.removeEventListener("timeupdate",ur),ye.removeEventListener("progress",wr),ye.removeEventListener("ratechange",Jr),ye.removeEventListener("loadedmetadata",Xr),ye.removeEventListener("loadeddata",ri),ye.removeEventListener("stalled",$n),ye.removeEventListener("ended",hi),ye.removeEventListener("volumechange",Ei)),je=null,ye=null,De=null,We=null}function Ne(){return parseFloat((lt(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)-Mt()).toFixed(5))}function lt(rt){var Pt=rt||De;return Pt.start+Pt.duration}function $e(){var rt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];De&&ye&&ye.getElement()?(rt&&We&&kt(Mt()),ye.play()):qe=!0}function xe(){De&&ye&&ye.pause()}function et(rt){var Pt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],an=arguments.length>2&&arguments[2]!==void 0&&arguments[2],On=arguments.length>3&&arguments[3]!==void 0&&arguments[3];De&&ye&&ye.getElement()&&rt!==(isNaN(Me)?ye.getTime():Me)&&((st=an===!0)||(Me=rt),ie.info("Requesting seek to time: "+rt+(st?" (internal)":"")),We&&On&&kt(rt),ye.setCurrentTime(rt,Pt))}function Et(){if(De&&ye&&We){var rt=se&&se.hasVideoTrack()?l.Z.VIDEO:l.Z.AUDIO,Pt=Ae.getCurrentDVRInfo(rt);return Pt&&Pt.range?Pt.range.end:0}}function kt(rt){var Pt=new Date(Oe.getClientReferenceTime()),an=ve.getRegularPeriods()[0],On=Oe.calcPresentationTimeFromWallTime(Pt,an);He=On-rt}function Mt(){return De&&ye?ye.getTime():null}function At(){return De&&ye?ye.isPaused():null}function Ot(){return De&&ye?ye.isSeeking():null}function Kt(){return De&&ye?ye.isStalled():null}function _n(){return De&&ye?ye.getPlaybackRate():null}function Jt(){return De&&ye?ye.getEnded():null}function un(){return We}function Cn(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!At()&&We&&ye.getReadyState()!==0&&!Ot()&&!ft){rt||(rt=se.hasVideoTrack()?l.Z.VIDEO:l.Z.AUDIO);var Pt=Mt(),an=mn(Pt,rt);!isNaN(an)&&an!==Pt&&!Ot()&&(Kt()||tt||ye.getReadyState()===1)&&(ie.debug("UpdateCurrentTime: Seek to actual time: ".concat(an," from currentTime: ").concat(Pt)),et(an,!1,!1))}}function mn(rt,Pt){var an=Ae.getCurrentDVRInfo(Pt),On=an?an.range:null;return On?rt>On.end?Math.max(On.end-He,On.start):rt>0&&rt+.25<On.start&&Math.abs(rt-On.start)<31536e4?mt?Math.max(On.end-He,On.start):On.start:rt:NaN}function St(){je===null&&(je=setInterval(function(){var rt;Fe.trigger(i.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:We,time:new Date}),un()&&(se.addDVRMetric(),At()?(rt=Date.now(),(!vt||rt>vt+500)&&(vt=rt,ur())):Cn())},Le.get().streaming.wallclockTimeUpdateInterval))}function gt(){clearInterval(je),je=null}function Rt(rt){var Pt=ve.convertRepresentationToRepresentationInfo(rt.currentRepresentation),an=Pt?Pt.mediaInfo.streamInfo:null;an!==null&&De.id===an.id&&(De=an)}function It(){Fe.trigger(i.Z.CAN_PLAY)}function xt(){Fe.trigger(i.Z.CAN_PLAY_THROUGH)}function zt(rt){rt.streamId===se.getActiveStreamInfo().id&&(tt=rt.state===h.Z.BUFFER_EMPTY,Le.get().streaming.buffer.setStallState&&ye.setStallState(rt.mediaType,rt.state===h.Z.BUFFER_EMPTY))}function qt(){ie.info("Native video element event: play"),Cn(),St(),Fe.trigger(i.Z.PLAYBACK_STARTED,{startTime:Mt()})}function In(){ie.info("Native video element event: waiting"),Fe.trigger(i.Z.PLAYBACK_WAITING,{playingTime:Mt()})}function Pn(){ie.info("Native video element event: playing"),st=!1,Fe.trigger(i.Z.PLAYBACK_PLAYING,{playingTime:Mt()})}function yr(){ie.info("Native video element event: pause"),Fe.trigger(i.Z.PLAYBACK_PAUSED,{ended:Jt()})}function ar(){if(!st){var rt=Mt();isNaN(Me)||Me===rt||(rt=Me),Me=NaN,ie.info("Seeking to: "+rt),St(),Fe.trigger(i.Z.PLAYBACK_SEEKING,{seekTime:rt,streamId:De.id})}}function lr(){ie.info("Native video element event: seeked"),st=!1,Fe.trigger(i.Z.PLAYBACK_SEEKED)}function ur(){De&&Fe.trigger(i.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:Ne(),time:Mt(),streamId:De.id})}function wr(){Fe.trigger(i.Z.PLAYBACK_PROGRESS,{streamId:De.id})}function Jr(){var rt=_n();ie.info("Native video element event: ratechange: ",rt),Fe.trigger(i.Z.PLAYBACK_RATE_CHANGED,{playbackRate:rt})}function Xr(){ie.info("Native video element event: loadedmetadata"),Fe.trigger(i.Z.PLAYBACK_METADATA_LOADED),St()}function ri(){ie.info("Native video element event: loadeddata"),Fe.trigger(i.Z.PLAYBACK_LOADED_DATA)}function hi(){ie.info("Native video element event: ended"),xe(),gt();var rt=se?se.getActiveStreamInfo():null;rt&&Fe.trigger(i.Z.PLAYBACK_ENDED,{isLast:rt.isLast})}function Ei(){Fe.trigger(i.Z.PLAYBACK_VOLUME_CHANGED)}function ui(rt){if(je&&rt.isLast){ie.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Pt=rt.seekTime?rt.seekTime:lt();ye.setCurrentTime(Pt),xe(),gt()}}function Sn(rt){var Pt=rt.target||rt.srcElement;Fe.trigger(i.Z.PLAYBACK_ERROR,{error:Pt.error})}function sr(rt){if(rt.stream===!1&&mt&&!isNaN(rt.request.duration)){var Pt=1.2*rt.request.duration;Pt>He&&(ie.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Pt.toFixed(2)),He=Pt,Be=Pt)}}function $n(rt){Fe.trigger(i.Z.PLAYBACK_STALLED,{e:rt})}function Yt(rt){var Pt;(Pt=rt.mediaInfo)&&Pt.supplementalProperties&&Pt.supplementalProperties[l.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]==="true"&&(ie.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),mt=!0)}function yn(rt){var Pt=se.getActiveStreamInfo();rt&&Pt&&rt.currentRepresentation&&rt.streamId&&rt.streamId===Pt.id&&rt.mediaType&&(rt.mediaType===l.Z.VIDEO||rt.mediaType===l.Z.AUDIO)&&(ct=rt.currentRepresentation.availabilityTimeComplete,(mt=!ct)&&!he&&(he=!0))}function Ht(){ft=!0}function tn(){ft=!1}return ae={initialize:function(rt,Pt){De=rt,Pt!==!0&&(ye.addEventListener("canplay",It),ye.addEventListener("canplaythrough",xt),ye.addEventListener("play",qt),ye.addEventListener("waiting",In),ye.addEventListener("playing",Pn),ye.addEventListener("pause",yr),ye.addEventListener("error",Sn),ye.addEventListener("seeking",ar),ye.addEventListener("seeked",lr),ye.addEventListener("timeupdate",ur),ye.addEventListener("progress",wr),ye.addEventListener("ratechange",Jr),ye.addEventListener("loadedmetadata",Xr),ye.addEventListener("loadeddata",ri),ye.addEventListener("stalled",$n),ye.addEventListener("ended",hi),ye.addEventListener("volumechange",Ei),We=De.manifestInfo.isDynamic,tt=!1,st=!1,Fe.on(i.Z.DATA_UPDATE_COMPLETED,Rt,ae),Fe.on(i.Z.LOADING_PROGRESS,sr,ae),Fe.on(i.Z.MANIFEST_UPDATED,Ht,ae),Fe.on(i.Z.STREAMS_COMPOSED,tn,ae),Fe.on(r.Z.PLAYBACK_ENDED,ui,ae,{priority:y.Z.EVENT_PRIORITY_HIGH}),Fe.on(r.Z.STREAM_INITIALIZING,Yt,ae),Fe.on(r.Z.REPRESENTATION_SWITCH,yn,ae),Fe.on(r.Z.BUFFER_LEVEL_STATE_CHANGED,zt,ae),qe&&(qe=!1,$e()))},setConfig:function(rt){rt&&(rt.streamController&&(se=rt.streamController),rt.serviceDescriptionController&&(Re=rt.serviceDescriptionController),rt.dashMetrics&&(Ae=rt.dashMetrics),rt.adapter&&(ve=rt.adapter),rt.videoModel&&(ye=rt.videoModel),rt.timelineConverter&&(Oe=rt.timelineConverter),rt.settings&&(Le=rt.settings))},getTimeToStreamEnd:Ne,getBufferLevel:function(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Pt=null;return se.getActiveStreamProcessors().forEach(function(an){if(!rt||rt.length===0||rt.indexOf(an.getType())===-1){var On=an.getBufferLevel();Pt=Pt===null?On:Math.min(Pt,On)}}),Pt},getPlaybackStalled:function(){return tt},getTime:Mt,getLowLatencyModeEnabled:function(){return mt},getInitialCatchupModeActivated:function(){return he},getIsManifestUpdateInProgress:function(){return ft},getPlaybackRate:_n,getPlayedRanges:function(){return De&&ye?ye.getPlayedRanges():null},getEnded:Jt,getIsDynamic:un,getStreamController:function(){return se},computeAndSetLiveDelay:function(rt,Pt){var an,On,Wn,mr=!isNaN(rt)&&isFinite(rt)?rt:NaN,Zi=ve.getSuggestedPresentationDelay(),Pa=Re.getServiceDescriptionSettings();return an=isNaN(Le.get().streaming.delay.liveDelay)?Le.get().streaming.delay.liveDelayFragmentCount===null||isNaN(Le.get().streaming.delay.liveDelayFragmentCount)||isNaN(mr)?Pa&&!isNaN(Pa.liveDelay)&&Pa.liveDelay>0?Pa.liveDelay:Le.get().streaming.delay.useSuggestedPresentationDelay===!0&&Zi!==null&&!isNaN(Zi)&&Zi>0?Zi:isNaN(mr)?Pt&&!isNaN(Pt.minBufferTime)?4*Pt.minBufferTime:4*De.manifestInfo.minBufferTime:4*mr:mr*Le.get().streaming.delay.liveDelayFragmentCount:Le.get().streaming.delay.liveDelay,(Wn=ve.getAvailabilityStartTime())!==null&&(ot=Wn),On=Pt&&Pt.dvrWindowSize>0?Math.min(an,Pt.dvrWindowSize):an,He=On,Be=On,On},getLiveDelay:function(){return He},getOriginalLiveDelay:function(){return Be},getCurrentLiveLatency:function(){if(!We||isNaN(ot))return NaN;var rt=Mt();if(isNaN(rt)||rt===0)return 0;var Pt=new Date().getTime()+1e3*Oe.getClientTimeOffset();return Math.max(((Pt-ot-1e3*rt)/1e3).toFixed(3),0)},play:$e,isPaused:At,isStalled:Kt,pause:xe,isSeeking:Ot,getStreamEndTime:lt,seek:et,seekToOriginalLive:function(){var rt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Pt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],an=arguments.length>2&&arguments[2]!==void 0&&arguments[2],On=Et();On!==0&&et(On-(He=Be),rt,Pt,an)},seekToCurrentLive:function(){var rt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Pt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],an=arguments.length>2&&arguments[2]!==void 0&&arguments[2],On=Et();On!==0&&et(On-He,rt,Pt,an)},reset:Pe,updateCurrentTime:Cn,getAvailabilityStartTime:function(){return ot}},ie=(0,d.Z)(Ve).getInstance().getLogger(ae),Pe(),ae}t.__dashjs_factory_name="PlaybackController";const u=g.Z.getSingletonFactory(t);var m=I(3186),S="loading",A="executed",_="failed";function v(ae){var ie,se,Re,Ae,ve=(ae=ae||{}).eventBus,ye=ae.events,Oe=ae.dashMetrics,je=ae.fragmentLoader,He=ae.debug,Be=ae.streamInfo,De=ae.type;function We(he){var Le;return!!he&&(Le=!1,Re.some(function(Ve){if(Fe=he,Pe=Ve,!isNaN(Fe.index)&&Fe.startTime===Pe.startTime&&Fe.adaptationIndex===Pe.adaptationIndex&&Fe.type===Pe.type||function(Ne,lt){return isNaN(Ne.index)&&isNaN(lt.index)&&Ne.quality===lt.quality}(he,Ve)||function(Ne,lt){return Ne.action===m.Z.ACTION_COMPLETE&&Ne.action===lt.action}(he,Ve))return Le=!0;var Fe,Pe}),Le)}function qe(he){return isNaN(he.duration)?.25:Math.min(he.duration/8,.5)}function vt(he){Re=Re.filter(function(Le){var Ve=qe(Le);return isNaN(Le.startTime)||he!==void 0&&Le.startTime>=he-Ve})}function ot(he,Le){Le<=he+.5||(Re=Re.filter(function(Ve){var Fe=qe(Ve);return isNaN(Ve.startTime)||Ve.startTime>=Le-Fe||isNaN(Ve.duration)||Ve.startTime+Ve.duration<=he+Fe}))}function ct(he,Le,Ve){for(var Fe=he.length-1;Fe>=0;Fe--){var Pe=he[Fe],Ne=Pe.startTime,lt=Ne+Pe.duration;if(Ve=isNaN(Ve)?qe(Pe):Ve,!isNaN(Ne)&&!isNaN(lt)&&Le+Ve>=Ne&&Le-Ve<lt||isNaN(Ne)&&isNaN(Le))return Pe}return null}function mt(he,Le){Oe.addSchedulingInfo(he,Le),Oe.addRequestsQueue(he.mediaType,Ae,Re)}function Me(he){he.sender===je&&(Ae.splice(Ae.indexOf(he.request),1),he.response&&!he.error&&Re.push(he.request),mt(he.request,he.error?_:A),ve.trigger(ye.FRAGMENT_LOADING_COMPLETED,{request:he.request,response:he.response,error:he.error,sender:this},{streamId:Be.id,mediaType:De}))}function st(he){he.sender===je&&ve.trigger(ye.FRAGMENT_LOADING_PROGRESS,{request:he.request,response:he.response,error:he.error,sender:this},{streamId:Be.id,mediaType:De})}function tt(he){he.sender===je&&ve.trigger(ye.FRAGMENT_LOADING_ABANDONED,{request:he.request},{streamId:Be.id,mediaType:De})}function ft(){Re=[],Ae=[]}return ie={getStreamId:function(){return Be.id},getType:function(){return De},getRequests:function(he){var Le=he?he.state instanceof Array?he.state:[he.state]:[],Ve=[];return Le.forEach(function(Fe){var Pe=function(Ne){var lt;switch(Ne){case S:lt=Ae;break;case A:lt=Re;break;default:lt=[]}return lt}(Fe);Ve=Ve.concat(function(Ne,lt){return lt.hasOwnProperty("time")?[ct(Ne,lt.time,lt.threshold)]:Ne.filter(function($e){for(var xe in lt)if(xe!=="state"&&lt.hasOwnProperty(xe)&&$e[xe]!=lt[xe])return!1;return!0})}(Pe,he))}),Ve},isFragmentLoaded:We,isFragmentLoadedOrPending:function(he){var Le,Ve=!1,Fe=0;if(!(Ve=We(he)))for(Fe=0;Fe<Ae.length;Fe++)Le=Ae[Fe],he.url===Le.url&&he.startTime===Le.startTime&&(Ve=!0);return Ve},removeExecutedRequestsBeforeTime:vt,removeExecutedRequestsAfterTime:function(he){Re=Re.filter(function(Le){return isNaN(Le.startTime)||he!==void 0&&Le.startTime<he})},syncExecutedRequestsWithBufferedRange:function(he,Le){if(he&&he.length!==0){for(var Ve=0,Fe=0,Pe=he.length;Fe<Pe;Fe++)ot(Ve,he.start(Fe)),Ve=he.end(Fe);Le>0&&ot(Ve,Le)}else vt()},abortRequests:function(){se.debug("abort requests"),je.abort(),Ae=[]},executeRequest:function(he){he.action===m.Z.ACTION_DOWNLOAD?(mt(he,S),Ae.push(he),function(Le){ve.trigger(ye.FRAGMENT_LOADING_STARTED,{request:Le},{streamId:Be.id,mediaType:De}),je.load(Le)}(he)):se.warn("Unknown request action.")},reset:function(){ve.off(ye.LOADING_COMPLETED,Me,this),ve.off(ye.LOADING_DATA_PROGRESS,st,this),ve.off(ye.LOADING_ABANDONED,tt,this),je&&je.reset(),ft()},resetInitialSettings:ft,addExecutedRequest:function(he){Re.push(he)}},se=He.getLogger(ie),ft(),ve.on(ye.LOADING_COMPLETED,Me,ie),ve.on(ye.LOADING_DATA_PROGRESS,st,ie),ve.on(ye.LOADING_ABANDONED,tt,ie),ie}v.__dashjs_factory_name="FragmentModel";var f=g.Z.getClassFactory(v);f.FRAGMENT_MODEL_LOADING=S,f.FRAGMENT_MODEL_EXECUTED=A,f.FRAGMENT_MODEL_CANCELED="canceled",f.FRAGMENT_MODEL_FAILED=_,g.Z.updateClassFactory(v.__dashjs_factory_name,f);const b=f;var p=I(5459);function k(ae){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},k(ae)}function P(ae,ie){return P=Object.setPrototypeOf||function(se,Re){return se.__proto__=Re,se},P(ae,ie)}function j(ae){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},j(ae)}const U=new(function(ae){(function(ve,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(ye&&ye.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),ye&&P(ve,ye)})(Ae,ae);var ie,se,Re=(ie=Ae,se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ve,ye=j(ie);if(se){var Oe=j(this).constructor;ve=Reflect.construct(ye,arguments,Oe)}else ve=ye.apply(this,arguments);return function(je,He){return!He||k(He)!=="object"&&typeof He!="function"?function(Be){if(Be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Be}(je):He}(this,ve)});function Ae(){var ve;return function(ye,Oe){if(!(ye instanceof Oe))throw new TypeError("Cannot call a class as a function")}(this,Ae),(ve=Re.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,ve.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,ve.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,ve.SEGMENT_BASE_LOADER_ERROR_CODE=15,ve.TIME_SYNC_FAILED_ERROR_CODE=16,ve.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,ve.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,ve.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,ve.APPEND_ERROR_CODE=20,ve.REMOVE_ERROR_CODE=21,ve.DATA_UPDATE_FAILED_ERROR_CODE=22,ve.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,ve.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,ve.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,ve.DOWNLOAD_ERROR_ID_SIDX_CODE=26,ve.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,ve.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,ve.DOWNLOAD_ERROR_ID_XLINK_CODE=29,ve.MANIFEST_ERROR_ID_PARSE_CODE=31,ve.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,ve.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,ve.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,ve.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,ve.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",ve.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",ve.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",ve.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",ve.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",ve.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",ve.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",ve.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",ve.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",ve.APPEND_ERROR_MESSAGE="chunk is not defined",ve.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",ve.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",ve.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",ve.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",ve.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",ve.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",ve}return Ae}(I(2230).Z));var G=I(1264),ee=I(7855);function ne(ae){var ie,se,Re,Ae,ve,ye,Oe=this.context,je=(0,G.Z)(Oe).getInstance(),He=ae.textController,Be=ae.eventBus,De=[],We=[],qe=!1,vt=ae.mediaSource,ot=null;function ct(Pe){return new Promise(function(Ne){Fe(function(){Ae.changeType&&Ae.changeType(Pe),Ne()})})}function mt(Pe){return Ae=He.getTextSourceBuffer(Pe),Promise.resolve()}function Me(){if(typeof Ae.addEventListener=="function")try{Ae.addEventListener("updateend",Le,!1),Ae.addEventListener("error",Ve,!1),Ae.addEventListener("abort",Ve,!1)}catch{ye=setInterval(Le,50)}else ye=setInterval(Le,50)}function st(Pe){return new Promise(function(Ne){Ae&&je.get().streaming.buffer.useAppendWindow?Fe(function(){try{if(!Ae)return void Ne();var lt=vt.duration,$e=0;Pe&&!isNaN(Pe.start)&&!isNaN(Pe.duration)&&isFinite(Pe.duration)&&(lt=Pe.start+Pe.duration),Pe&&!isNaN(Pe.start)&&($e=Pe.start),Ae.appendWindowEnd===lt&&Ae.appendWindowStart===$e||(Ae.appendWindowStart=0,Ae.appendWindowEnd=lt+.01,Ae.appendWindowStart=Math.max($e-.1,0),Re.debug("Updated append window for ".concat(ve.type,". Set start to ").concat(Ae.appendWindowStart," and end to ").concat(Ae.appendWindowEnd))),Ne()}catch{Re.warn("Failed to set append window"),Ne()}}):Ne()})}function tt(Pe){return new Promise(function(Ne){Ae?Fe(function(){try{Ae.timestampOffset===Pe||isNaN(Pe)||(Ae.timestampOffset=Pe,Re.debug("Set MSE timestamp offset to ".concat(Pe))),Ne()}catch{Ne()}}):Ne()})}function ft(){if(!qe&&We.length>0){qe=!0;var Pe=We[0];We.splice(0,1);var Ne=function(){qe=!1,We.length>0&&ft.call(this),Pe&&Pe.data&&Pe.data.segmentType&&Pe.data.segmentType!==ee.w.INIT_SEGMENT_TYPE&&delete Pe.data.bytes,Pe.promise.resolve({chunk:Pe.data})};try{ot=Pe.request,Pe.data.bytes.byteLength===0?Ne.call(this):(Ae.appendBuffer?Ae.appendBuffer(Pe.data.bytes):Ae.append(Pe.data.bytes,Pe.data),Fe(Ne.bind(this)))}catch(lt){Re.fatal('SourceBuffer append failed "'+lt+'"'),We.length>0?ft():qe=!1,delete Pe.data.bytes,Pe.promise.reject({chunk:Pe.data,error:new p.Z(lt.code,lt.message)})}}}function he(){De.length>0&&(Ae.updating||(De.shift()(),he()))}function Le(){Ae.updating||he()}function Ve(Pe){var Ne,lt,$e=Pe.target||{};Ne=i.Z.SOURCE_BUFFER_ERROR,lt={error:$e,lastRequestAppended:ot},Be.trigger(Ne,lt,{streamId:ve.streamInfo.id,mediaType:se})}function Fe(Pe){De.push(Pe),Ae.updating||he()}return ie={getType:function(){return se},getAllBufferRanges:function(){try{return Ae.buffered}catch(Pe){return Re.error("getAllBufferRanges exception: "+Pe.message),null}},getBuffer:function(){return Ae},append:function(Pe){var Ne=this,lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function($e,xe){Pe?(We.push({data:Pe,promise:{resolve:$e,reject:xe},request:lt}),Fe(ft.bind(Ne))):xe({chunk:Pe,error:new p.Z(U.APPEND_ERROR_CODE,U.APPEND_ERROR_MESSAGE)})})},remove:function(Pe){return new Promise(function(Ne,lt){var $e=Pe.start,xe=Pe.end;$e>=0&&xe>$e?Fe(function(){try{Ae.remove($e,xe),Fe(function(){Ne({from:$e,to:xe,unintended:!1}),Pe.resolve&&Pe.resolve()})}catch(et){lt({from:$e,to:xe,unintended:!1,error:new p.Z(U.REMOVE_ERROR_CODE,U.REMOVE_ERROR_MESSAGE)}),Pe.reject&&Pe.reject(et)}}):Ne()})},abort:function(){return new Promise(function(Pe){try{We=[],vt.readyState==="open"?Fe(function(){try{Ae&&Ae.abort(),Pe()}catch{Pe()}}):(Ae&&Ae.setTextTrack&&vt.readyState==="ended"&&Ae.abort(),Pe())}catch{Pe()}})},reset:function(){if(Ae){try{De=[],function(){try{typeof Ae.removeEventListener=="function"&&(Ae.removeEventListener("updateend",Le,!1),Ae.removeEventListener("error",Ve,!1),Ae.removeEventListener("abort",Ve,!1)),clearInterval(ye)}catch(Pe){Re.error(Pe)}}(),qe=!1,We=[],Ae.getClassName&&Ae.getClassName()==="TextSourceBuffer"||(Re.debug("Removing sourcebuffer from media source"),vt.removeSourceBuffer(Ae))}catch{}Ae=null}ot=null},updateTimestampOffset:tt,initializeForStreamSwitch:function(Pe,Ne,lt){se=(ve=Pe).type;var $e=ve.codec;(function(et){Ae=et.getBuffer()})(lt),Me();var xe=[];return xe.push(new Promise(function(et){Fe(function(){var Et=Ae.appendWindowStart,kt=Ae.appendWindowEnd;Ae&&(Ae.abort(),Ae.appendWindowStart=Et,Ae.appendWindowEnd=kt),et()})})),xe.push(st(ve.streamInfo)),je.get().streaming.buffer.useChangeTypeForTrackSwitch&&xe.push(ct($e)),Ne&&Ne.MSETimeOffset!==void 0&&xe.push(tt(Ne.MSETimeOffset)),Promise.all(xe)},initializeForFirstUse:function(Pe,Ne,lt){se=(ve=Ne).type;var $e=ve.codec;try{if($e.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return mt(Pe);Ae=vt.addSourceBuffer($e),Me();var xe=[];return xe.push(st(ve.streamInfo)),lt&&lt.MSETimeOffset!==void 0&&xe.push(tt(lt.MSETimeOffset)),Promise.all(xe)}catch(et){return ve.type==l.Z.TEXT&&!ve.isFragmented||$e.indexOf('codecs="stpp')!==-1||$e.indexOf('codecs="vtt')!==-1?mt(Pe):Promise.reject(et)}},updateAppendWindow:st,changeType:ct},Re=(0,d.Z)(Oe).getInstance().getLogger(ie),ie}ne.__dashjs_factory_name="SourceBufferSink";const re=g.Z.getClassFactory(ne);function oe(ae){var ie,se,Re,Ae=this.context,ve=[],ye=ae;function Oe(je,He){return ve=ve.filter(function(Be){return!((isNaN(He)||Be.start<He)&&(isNaN(je)||Be.end>je))}),Promise.resolve()}return ie={getAllBufferRanges:function(){for(var je=[],He=0;He<ve.length;He++){var Be=ve[He];je.length===0||Be.start>je[je.length-1].end?je.push({start:Be.start,end:Be.end}):je[je.length-1].end=Be.end}var De={start:function(We){return je[We].start},end:function(We){return je[We].end}};return Object.defineProperty(De,"length",{get:function(){return je.length}}),De},append:function(je){return je.segmentType!=="InitializationSegment"?(ve.push(je),ve.sort(function(He,Be){return He.start-Be.start}),Re=null):Re=je,se.debug("PreBufferSink appended chunk s: "+je.start+"; e: "+je.end),ye&&ye({chunk:je}),Promise.resolve()},remove:Oe,abort:function(){return Promise.resolve()},discharge:function(je,He){var Be=function(De,We){return ve.filter(function(qe){return(isNaN(We)||qe.start<We)&&(isNaN(De)||qe.end>De)})}(je,He);return Re&&(Be.push(Re),Re=null),Oe(je,He),Be},reset:function(){ve=[],Re=null,ye=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(je){je()},getBuffer:function(){return this}},se=(0,d.Z)(Ae).getInstance().getLogger(ie),ie}oe.__dashjs_factory_name="PreBufferSink";const W=g.Z.getClassFactory(oe);function Te(){var ae={};return{save:function(ie){var se=ie.streamId,Re=ie.representationId;ae[se]=ae[se]||{},ae[se][Re]=ie},extract:function(ie,se){return ae&&ae[ie]&&ae[ie][se]?ae[ie][se]:null},reset:function(){ae={}}}}Te.__dashjs_factory_name="InitCache";const Ue=g.Z.getSingletonFactory(Te);var ze=.01,le="BufferController";function Se(ae){ae=ae||{};var ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We,qe,vt,ot,ct,mt,Me,st,tt,ft,he=this.context,Le=(0,y.Z)(he).getInstance(),Ve=ae.errHandler,Fe=ae.fragmentModel,Pe=ae.representationController,Ne=ae.adapter,lt=ae.textController,$e=ae.abrController,xe=ae.playbackController,et=ae.streamInfo,Et=ae.type,kt=ae.settings;function Mt(Ht){var tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(rt,Pt){ye=Ht,He&&tn&&typeof He.discharge=="function"?(Be=He,Ot(tn).then(function(){rt()}).catch(function(an){Pt(an)})):rt()})}function At(Ht){return Ne.convertRepresentationToRepresentationInfo(Pe.getRepresentationForQuality(Ht))}function Ot(Ht){var tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(rt,Pt){Me&&Ht?ye?(De=!1,Kt(Ht,tn).then(function(an){rt(an)}).catch(function(an){Pt(an)})):(De=!0,function(){var an=this;return new Promise(function(On,Wn){var mr=$e.getQualityFor(Et,et.id);He=W(he).create(mn.bind(an)),Xr(At(mr)).then(function(){On(He)}).catch(function(){Wn()})})}().then(function(an){rt(an)}).catch(function(an){Pt(an)})):rt(null)})}function Kt(Ht,tn){return new Promise(function(rt,Pt){var an=$e.getQualityFor(Et,et.id);He=re(he).create({mediaSource:ye,textController:lt,eventBus:Le}),function(On,Wn,mr){var Zi=At(mr);return Wn&&Wn[Et]&&(Et===l.Z.VIDEO||Et===l.Z.AUDIO)?He.initializeForStreamSwitch(On,Zi,Wn[Et]):He.initializeForFirstUse(et,On,Zi)}(Ht,tn,an).then(function(){return Xr(At(an))}).then(function(){rt(He)}).catch(function(On){se.fatal("Caught error on create SourceBuffer: "+On),Ve.error(new p.Z(U.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,U.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+Et)),Pt(On)})})}function _n(Ht){kt.get().streaming.cacheInitSegments&&(se.info("Init fragment finished loading saving to",Et+"'s init cache"),Me.save(Ht.chunk)),se.debug("Append Init fragment",Et," with representationId:",Ht.chunk.representationId," and quality:",Ht.chunk.quality,", data size:",Ht.chunk.bytes.byteLength),un(Ht.chunk)}function Jt(Ht){un(Ht.chunk,Ht.request)}function un(Ht){var tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;He.append(Ht,tn).then(function(rt){mn(rt)}).catch(function(rt){mn(rt)}),Ht.mediaInfo.type===l.Z.VIDEO&&Yt(i.Z.VIDEO_CHUNK_RECEIVED,{chunk:Ht})}function Cn(Ht){if(Ht&&Ht.length>0)for(var tn=0,rt=Ht.length;tn<rt;tn++)se.debug("Buffered range: "+Ht.start(tn)+" - "+Ht.end(tn)+", currentTime = ",xe.getTime())}function mn(Ht){if(Ht.error)return Ht.error.code===22&&function(){if(mt=!0,ve=.8*Sn(),se.warn("Quota exceeded, Critical Buffer: "+ve),ve>0){var Pt=Math.max(.2*ve,1),an=ve-Pt,On=Math.min(kt.get().streaming.buffer.bufferTimeAtTopQuality,.9*an),Wn=Math.min(kt.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*an),mr={streaming:{buffer:{bufferToKeep:parseFloat(Pt.toFixed(5)),bufferTimeAtTopQuality:parseFloat(On.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Wn.toFixed(5))}}};kt.update(mr)}}(),void(Ht.error.code!==22&&$n()||(se.warn("Clearing playback buffer to overcome quota exceed situation"),Yt(i.Z.QUOTA_EXCEEDED,{criticalBufferLevel:ve,quotaExceededTime:Ht.chunk.start}),ur(lr())));if(He&&(qt(),mt=!1,(vt=Ht.chunk)&&vt.endFragment)){vt&&!isNaN(vt.index)&&(Oe=Math.max(vt.index,Oe),In());var tn=He.getAllBufferRanges();vt.segmentType===ee.w.MEDIA_SEGMENT_TYPE&&(Cn(tn),Rt(),function(){if(!isNaN(ft)&&!De)if(Et===l.Z.AUDIO||Et===l.Z.VIDEO){var Pt=xe.getTime(),an=zt(Pt,0),On=zt(ft,0);if(an&&On&&an.start===On.start)ft=NaN;else{var Wn=Pe.getCurrentRepresentation().segmentDuration,mr=zt(ft,Wn);mr&&(kt.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Pt-ft)>Wn?ft<=mr.end&&xe.seek(Math.max(ft,mr.start),!1,!0):Pt<mr.start&&xe.seek(mr.start,!1,!0))}}else ft=NaN}());var rt=!1;We&&(We.indexOf(vt)>0&&(rt=!0),We=null),vt&&!rt&&Yt(i.Z.BYTES_APPENDED_END_FRAGMENT,{quality:vt.quality,startTime:vt.start,index:vt.index,bufferedRanges:tn,segmentType:vt.segmentType,mediaType:Et})}}function St(){return new Promise(function(Ht,tn){var rt=gt();if(!rt||rt.length===0)return Rt(),void Ht();ur(rt).then(function(){Ht()}).catch(function(Pt){tn(Pt)})})}function gt(Ht){var tn=[],rt=He.getAllBufferRanges();if(!rt||rt.length===0)return tn;if(!Ht&&Ht!==0||isNaN(Ht))tn.push({start:rt.start(0),end:rt.end(rt.length-1)+.5});else{var Pt=function(On,Wn){var mr=kt.get().streaming.buffer.bufferToKeep,Zi=Wn.start(0);if(On-Zi>mr){var Pa=Math.max(0,On-mr),Ea=Fe.getRequests({state:b.FRAGMENT_MODEL_EXECUTED,time:On,threshold:ze})[0];if(Ea&&(Pa=Math.min(Ea.startTime,Pa)),Pa>0)return{start:Zi,end:Pa}}return null}(Ht,rt),an=function(On,Wn){var mr=Wn.end(Wn.length-1)+.5,Zi=sr(On),Pa=et.manifestInfo.duration>=kt.get().streaming.buffer.longFormContentDurationThreshold?kt.get().streaming.buffer.bufferTimeAtTopQualityLongForm:kt.get().streaming.buffer.bufferTimeAtTopQuality,Ea=isNaN(Zi)?On:Math.min(Zi,On+Pa);if(Ea>=Wn.end(Wn.length-1))return null;var $a=Fe.getRequests({state:b.FRAGMENT_MODEL_EXECUTED,time:On,threshold:ze})[0];if($a&&(Ea=Math.max($a.startTime+$a.duration,Ea)),kt.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var Fa=0;Fa<Wn.length;Fa++)if(Wn.start(Fa)<=On&&On<=Wn.end(Fa)&&Wn.start(Fa)<=Ea&&Ea<=Wn.end(Fa)){var Co=Ea;Ea=Fa+1<Wn.length?Wn.start(Fa+1):Wn.end(Fa)+1,se.debug("Buffered range ["+Wn.start(Fa)+", "+Wn.end(Fa)+"] overlaps with targetTime "+On+" and range to be pruned ["+Co+", "+mr+"], using ["+Ea+", "+mr+"] instead"+(Ea<mr?"":" (no actual pruning)"));break}}return Ea<Wn.end(Wn.length-1)?{start:Ea,end:mr}:null}(Ht,rt);Pt&&tn.push(Pt),an&&tn.push(an)}return tn}function Rt(){(!tt||Et===l.Z.TEXT&&lt.isTextEnabled())&&qt()}function It(){Pn()}function xt(){Pn(),ft=NaN}function zt(Ht,tn){var rt,Pt,an=He.getAllBufferRanges(),On=0,Wn=0,mr=null,Zi=null,Pa=0,Ea=isNaN(tn)?.15:tn;if(an!=null){for(Pt=0,rt=an.length;Pt<rt;Pt++)if(On=an.start(Pt),Wn=an.end(Pt),mr===null)Pa=Math.abs(On-Ht),(Ht>=On&&Ht<Wn||Pa<=Ea)&&(mr=On,Zi=Wn);else{if(!((Pa=On-Zi)<=Ea))break;Zi=Wn}if(mr!==null)return{start:mr,end:Zi}}return null}function qt(){if(xe){var Ht=xe.getTime()||0;De&&(Ht=isNaN(ft)?0:ft);var tn=kt.get().streaming.gaps.jumpGaps&&!isNaN(kt.get().streaming.gaps.smallGapLimit)?kt.get().streaming.gaps.smallGapLimit:NaN;Ae=Math.max(function(rt,Pt){var an;return kt.get().streaming.gaps.jumpGaps&&(Pt=kt.get().streaming.gaps.smallGapLimit),(an=zt(rt,Pt))===null?0:an.end-rt}(Ht,tn),0),Yt(i.Z.BUFFER_LEVEL_UPDATED,{mediaType:Et,bufferLevel:Ae}),Pn()}}function In(){var Ht=Oe>=je-1,tn=xe.getTimeToStreamEnd(et)-Ae<1e-5;!Ht&&!tn||Re||(ui(!0),se.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(et.id," and type ").concat(Et)))}function Pn(){Et!==l.Z.AUDIO&&Et!==l.Z.VIDEO||((!xe.getLowLatencyModeEnabled()&&Ae<kt.get().streaming.buffer.stallThreshold||Ae===0)&&!Re?yr(h.Z.BUFFER_EMPTY):(Re||Ae>=kt.get().streaming.buffer.stallThreshold||xe.getLowLatencyModeEnabled()&&Ae>0)&&yr(h.Z.BUFFER_LOADED))}function yr(Ht){qe===Ht||Ht===h.Z.BUFFER_EMPTY&&xe.getTime()===0||Et===l.Z.TEXT&&!lt.isTextEnabled()||(qe=Ht,Yt(i.Z.BUFFER_LEVEL_STATE_CHANGED,{state:Ht}),Yt(Ht===h.Z.BUFFER_LOADED?i.Z.BUFFER_LOADED:i.Z.BUFFER_EMPTY),se.debug(Ht===h.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function ar(){He&&Et!==l.Z.TEXT&&(Re||ur(lr()))}function lr(){var Ht=[],tn=He.getAllBufferRanges();if(!tn||tn.length===0)return Ht;var rt=xe.getTime(),Pt=Math.max(0,rt-kt.get().streaming.buffer.bufferToKeep),an=Fe.getRequests({state:b.FRAGMENT_MODEL_EXECUTED,time:rt,threshold:ze})[0];if(an)Pt=Math.min(an.startTime,Pt);else if(rt===0&&xe.getIsDynamic())return[];if(tn.start(0)<=Pt){for(var On={start:0,end:Pt},Wn=0;Wn<tn.length&&tn.end(Wn)<=Pt;Wn++)On.end=tn.end(Wn);On.start<On.end&&Ht.push(On)}return Ht}function ur(Ht){return new Promise(function(tn,rt){if(Ht&&He&&Ht.length!==0){var Pt=[];Ht.forEach(function(an){Pt.push(function(On){return new Promise(function(Wn,mr){On.resolve=Wn,On.reject=mr,st.push(On)})}(an))}),ct||wr(),Promise.all(Pt).then(function(){tn()}).catch(function(an){rt(an)})}else tn()})}function wr(){try{if(st.length===0||!He)return se.debug("Nothing to prune, halt pruning"),st=[],void(ct=!1);var Ht=He.getBuffer();if(!Ht||!Ht.buffered||Ht.buffered.length===0)return se.debug("SourceBuffer is empty (or does not exist), halt pruning"),st=[],void(ct=!1);var tn=st.shift();se.debug("".concat(Et,": Removing buffer from: ").concat(tn.start," to ").concat(tn.end)),ct=!0,xe.getTime()<tn.end&&ui(!1),He.remove(tn).then(function(rt){Jr(rt)}).catch(function(rt){Jr(rt)})}catch{ct=!1}}function Jr(Ht){se.debug("onRemoved buffer from:",Ht.from,"to",Ht.to),Cn(He.getAllBufferRanges()),st.length===0&&(ct=!1,qt()),Ht.unintended&&(se.warn("Detected unintended removal from:",Ht.from,"to",Ht.to,"setting streamprocessor time to",Ht.from),Yt(i.Z.SEEK_TARGET,{time:Ht.from})),ct?wr():(tt?tt=!1:qt(),Yt(i.Z.BUFFER_CLEARED,{from:Ht.from,to:Ht.to,unintended:Ht.unintended,hasEnoughSpaceToAppend:$n(),quotaExceeded:mt}))}function Xr(Ht){return new Promise(function(tn){Ht&&Ht.MSETimeOffset!==void 0&&He&&He.updateTimestampOffset?He.updateTimestampOffset(Ht.MSETimeOffset).then(function(){tn()}).catch(function(){tn()}):tn()})}function ri(){return He&&!Re?He.updateAppendWindow(et):Promise.resolve()}function hi(){++ot*(kt.get().streaming.wallclockTimeUpdateInterval/1e3)>=kt.get().streaming.buffer.bufferPruningInterval&&(ot=0,ar())}function Ei(){Pn()}function ui(Ht){(Re=Ht)?Yt(i.Z.BUFFERING_COMPLETED):je=Number.POSITIVE_INFINITY}function Sn(){try{var Ht,tn,rt=He.getAllBufferRanges(),Pt=0;if(!rt)return Pt;for(tn=0,Ht=rt.length;tn<Ht;tn++)Pt+=rt.end(tn)-rt.start(tn);return Pt}catch{return 0}}function sr(Ht){try{var tn=Ht,rt=He.getAllBufferRanges();if(!rt||rt.length===0)return NaN;for(var Pt=0;tn===Ht&&Pt<rt.length;){var an=rt.start(Pt),On=rt.end(Pt);tn>=an&&tn<=On&&(tn=On),Pt+=1}return tn===Ht?NaN:tn}catch{}}function $n(){var Ht=Sn();return isNaN(Ht)||Ht<ve}function Yt(Ht,tn){var rt=tn||{};Le.trigger(Ht,rt,{streamId:et.id,mediaType:Et})}function yn(Ht,tn){if(ve=Number.POSITIVE_INFINITY,qe=void 0,je=Number.POSITIVE_INFINITY,Oe=0,vt=null,Re=!1,ct=!1,mt=!1,Ae=0,ot=0,st=[],ft=NaN,De=!1,He){var rt=He;He=null,Ht||tn||rt.abort().then(function(){rt.reset(tn),rt=null})}tt=!1}return ie={initialize:function(Ht){Mt(Ht),Le.on(i.Z.INIT_FRAGMENT_LOADED,_n,ie),Le.on(i.Z.MEDIA_FRAGMENT_LOADED,Jt,ie),Le.on(i.Z.WALLCLOCK_TIME_UPDATED,hi,ie),Le.on(r.Z.PLAYBACK_PLAYING,xt,ie),Le.on(r.Z.PLAYBACK_PROGRESS,Rt,ie),Le.on(r.Z.PLAYBACK_TIME_UPDATED,Rt,ie),Le.on(r.Z.PLAYBACK_RATE_CHANGED,Ei,ie),Le.on(r.Z.PLAYBACK_STALLED,It,ie)},getStreamId:function(){return et.id},getType:function(){return Et},getBufferControllerType:function(){return le},createBufferSink:Ot,dischargePreBuffer:function(){if(He&&Be&&typeof Be.discharge=="function"){var Ht=Be.getAllBufferRanges();if(Ht.length>0){for(var tn="Beginning "+Et+"PreBuffer discharge, adding buffer for:",rt=0;rt<Ht.length;rt++)tn+=" start: "+Ht.start(rt)+", end: "+Ht.end(rt)+";";se.debug(tn)}else se.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");We=[];for(var Pt=Be.discharge(),an=null,On=0;On<Pt.length;On++){var Wn=Pt[On];if(Wn.segmentType!==ee.w.INIT_SEGMENT_TYPE){var mr=Me.extract(Wn.streamId,Wn.representationId);mr&&an!==mr&&(We.push(mr),He.append(mr),an=mr)}We.push(Wn),He.append(Wn)}Be.reset(),Be=null}},getBuffer:function(){return He},getBufferLevel:function(){return Ae},getRangeAt:zt,hasBufferAtTime:function(Ht){try{var tn=He.getAllBufferRanges();if(!tn||tn.length===0)return!1;for(var rt=0;rt<tn.length;){var Pt=tn.start(rt),an=tn.end(rt);if(Ht>=Pt&&Ht<=an)return!0;rt+=1}return!1}catch(On){return se.error(On),!1}},pruneBuffer:ar,setMediaSource:Mt,getMediaSource:function(){return ye},appendInitSegmentFromCache:function(Ht){var tn=Me.extract(et.id,Ht);return!!tn&&(se.info("Append Init fragment",Et," with representationId:",tn.representationId," and quality:",tn.quality,", data size:",tn.bytes.byteLength),un(tn),!0)},getIsBufferingCompleted:function(){return Re},setIsBufferingCompleted:ui,getIsPruningInProgress:function(){return ct},reset:function(Ht,tn){Le.off(i.Z.INIT_FRAGMENT_LOADED,_n,this),Le.off(i.Z.MEDIA_FRAGMENT_LOADED,Jt,this),Le.off(i.Z.WALLCLOCK_TIME_UPDATED,hi,this),Le.off(r.Z.PLAYBACK_PLAYING,xt,this),Le.off(r.Z.PLAYBACK_PROGRESS,Rt,this),Le.off(r.Z.PLAYBACK_TIME_UPDATED,Rt,this),Le.off(r.Z.PLAYBACK_RATE_CHANGED,Ei,this),Le.off(r.Z.PLAYBACK_STALLED,It,this),yn(Ht,tn)},prepareForPlaybackSeek:function(){return Re&&ui(!1),He.abort()},prepareForReplacementTrackSwitch:function(Ht){return new Promise(function(tn,rt){He.abort().then(function(){return ri()}).then(function(){return kt.get().streaming.buffer.useChangeTypeForTrackSwitch?He.changeType(Ht):Promise.resolve()}).then(function(){return St()}).then(function(){ui(!1),tn()}).catch(function(Pt){rt(Pt)})})},prepareForNonReplacementTrackSwitch:function(Ht){return new Promise(function(tn,rt){ri().then(function(){return kt.get().streaming.buffer.useChangeTypeForTrackSwitch?He.changeType(Ht):Promise.resolve()}).then(function(){tn()}).catch(function(Pt){rt(Pt)})})},prepareForForceReplacementQualitySwitch:function(Ht){return new Promise(function(tn,rt){He.abort().then(function(){return ri()}).then(function(){return St()}).then(function(){return Xr(Ht)}).then(function(){ui(!1),tn()}).catch(function(Pt){rt(Pt)})})},updateAppendWindow:ri,getAllRangesWithSafetyFactor:gt,getContinuousBufferTimeForTargetTime:sr,clearBuffers:ur,pruneAllSafely:St,updateBufferTimestampOffset:Xr,setSeekTarget:function(Ht){ft=Ht},segmentRequestingCompleted:function(Ht){isNaN(Ht)||(je=Ht,In())}},se=(0,d.Z)(he).getInstance().getLogger(ie),Me=Ue(he).getInstance(),yn(),ie}Se.__dashjs_factory_name=le;const be=g.Z.getClassFactory(Se);var Y="NotFragmentedTextBufferController";function Q(ae){ae=ae||{};var ie,se,Re,Ae,ve,ye,Oe=this.context,je=(0,y.Z)(Oe).getInstance(),He=ae.textController,Be=ae.errHandler,De=ae.streamInfo,We=ae.type;function qe(ct){Ae=ct}function vt(ct){var mt,Me;se!==ct&&(se=ct)&&(mt=i.Z.BUFFERING_COMPLETED,Me={},je.trigger(mt,Me,{streamId:De.id,mediaType:We}))}function ot(ct){ct.chunk.bytes&&!se&&(ye.save(ct.chunk),ve.append(ct.chunk),vt(!0))}return ie={initialize:function(ct){qe(ct)},getStreamId:function(){return De.id},getType:function(){return We},getBufferControllerType:function(){return Y},createBufferSink:function(ct){return new Promise(function(mt,Me){try{(ve=re(Oe).create({mediaSource:Ae,textController:He,eventBus:je})).initializeForFirstUse(De,ct),Re||(ve.getBuffer()&&typeof ve.getBuffer().initialize=="function"&&ve.getBuffer().initialize(),Re=!0),mt(ve)}catch(st){Be.error(new p.Z(U.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,U.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+We)),Me(st)}})},dischargePreBuffer:function(){},getBuffer:function(){return ve},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:qe,getMediaSource:function(){return Ae},appendInitSegmentFromCache:function(ct){return ye.extract(De.id,ct)!==null},getIsBufferingCompleted:function(){return se},setIsBufferingCompleted:vt,getIsPruningInProgress:function(){return!1},reset:function(ct){je.off(i.Z.INIT_FRAGMENT_LOADED,ot,ie),!ct&&ve&&(ve.abort(),ve.reset(),ve=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return se=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},Re=!1,Ae=null,se=!1,ye=Ue(Oe).getInstance(),je.on(i.Z.INIT_FRAGMENT_LOADED,ot,ie),ie}Q.__dashjs_factory_name=Y;const J=g.Z.getClassFactory(Q);function fe(ae){ae=ae||{};var ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We,qe=this.context,vt=(0,y.Z)(qe).getInstance(),ot=ae.dashMetrics,ct=ae.mediaPlayerModel,mt=ae.fragmentModel,Me=ae.abrController,st=ae.playbackController,tt=ae.textController,ft=ae.type,he=ae.bufferController,Le=ae.representationController,Ve=ae.settings;function Fe(At){if(!he.getIsBufferingCompleted()){Pe();var Ot=isNaN(At)?0:At;ve=setTimeout(Ne,Ot)}}function Pe(){ve&&(clearTimeout(ve),ve=null)}function Ne(){try{if(function(){try{return ft===l.Z.TEXT&&!tt.isTextEnabled()||st.isPaused()&&(!st.getStreamController().getInitialPlayback()||!st.getStreamController().getAutoPlay())&&!Ve.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}())return void Pe();if(function(){try{return Le.getCurrentRepresentationInfo()&&(isNaN(He)||Be||(Kt=se.id,_n=Me.getMaxAllowedIndexFor(ft,Kt),!(!isNaN(je)&&je==_n||(Re.info("Top quality "+ft+" index has changed from "+je+" to "+_n),je=_n,0)))||function(){var Jt=Le.getCurrentRepresentationInfo();return!ft||!Jt||ot.getCurrentBufferLevel(ft)<lt()}())}catch{return!1}var Kt,_n}()){var At=!1;We&&(At=Me.checkPlaybackQuality(ft,se.id)),At||(Ot=Le.getCurrentRepresentationInfo(),De||Ot.quality!==He||Be?(Be?(Re.debug("Switch track for "+ft+", representation id = "+Ot.id),Be=!1):Re.debug("Quality has changed, get init request for representationid = "+Ot.id),vt.trigger(i.Z.INIT_FRAGMENT_NEEDED,{representationId:Ot.id,sender:ie},{streamId:se.id,mediaType:ft}),We=!1,De=!1):(Re.debug("Media segment needed for ".concat(ft," and stream id ").concat(se.id)),vt.trigger(i.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:se.id,mediaType:ft}),We=!0))}else Fe(st.getLowLatencyModeEnabled()?Ve.get().streaming.scheduling.lowLatencyTimeout:Ve.get().streaming.scheduling.defaultTimeout)}catch{Fe(st.getLowLatencyModeEnabled()?Ve.get().streaming.scheduling.lowLatencyTimeout:Ve.get().streaming.scheduling.defaultTimeout)}var Ot}function lt(){var At=NaN,Ot=Le.getCurrentRepresentationInfo();return ft&&Ot&&(At=ft===l.Z.TEXT?function(){try{if(tt.isTextEnabled()){var Kt=Le.getCurrentRepresentationInfo();if(isNaN(Kt.fragmentDuration)){var _n=ot.getCurrentSchedulingInfo(h.Z.SCHEDULING_INFO);return _n?_n.duration:0}return Kt.fragmentDuration}return 0}catch{return 0}}():ft===l.Z.AUDIO&&ye?function(){try{var Kt=ot.getCurrentBufferLevel(l.Z.VIDEO),_n=Le.getCurrentRepresentationInfo();return isNaN(_n.fragmentDuration)?Kt+1:Math.max(Kt+1,_n.fragmentDuration)}catch{return 0}}():function(){try{var Kt=Le.getCurrentRepresentationInfo().mediaInfo.streamInfo;return Me.isPlayingAtTopQuality(Kt)?Kt.manifestInfo.duration>=Ve.get().streaming.buffer.longFormContentDurationThreshold?Ve.get().streaming.buffer.bufferTimeAtTopQualityLongForm:Ve.get().streaming.buffer.bufferTimeAtTopQuality:ct.getStableBufferTime()}catch{return ct.getStableBufferTime()}}()),At}function $e(){xe(!0)}function xe(At){if(st&&mt){var Ot=mt.getRequests({state:b.FRAGMENT_MODEL_EXECUTED,time:st.getTime(),threshold:0})[0];Ot&&st.getTime()>=Ot.startTime&&((!Oe.mediaInfo||Ot.mediaInfo.type===Oe.mediaInfo.type&&Ot.mediaInfo.id!==Oe.mediaInfo.id)&&At&&vt.trigger(i.Z.TRACK_CHANGE_RENDERED,{mediaType:ft,oldMediaInfo:Oe.mediaInfo,newMediaInfo:Ot.mediaInfo,streamId:se.id}),Ot.quality===Oe.quality&&Ot.adaptationIndex===Oe.adaptationIndex||!At||(Re.debug("Quality change rendered for streamId ".concat(se.id," and type ").concat(ft)),vt.trigger(i.Z.QUALITY_CHANGE_RENDERED,{mediaType:ft,oldQuality:Oe.quality,newQuality:Ot.quality,streamId:se.id})),Oe={mediaInfo:Ot.mediaInfo,quality:Ot.quality,adaptationIndex:Ot.adaptationIndex})}}function et(){mt.abortRequests(),Pe()}function Et(){Ve.get().streaming.scheduling.scheduleWhilePaused||Fe()}function kt(At){ot.updatePlayListTraceMetrics({playbackspeed:At.playbackRate.toString()})}function Mt(){We=!0,Ae=0,He=NaN,Oe={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},je=NaN,Be=!1,De=!1}return ie={initialize:function(At){ye=At,vt.on(i.Z.URL_RESOLUTION_FAILED,et,ie),vt.on(r.Z.PLAYBACK_STARTED,Et,ie),vt.on(r.Z.PLAYBACK_RATE_CHANGED,kt,ie),vt.on(r.Z.PLAYBACK_TIME_UPDATED,$e,ie)},getType:function(){return ft},getStreamId:function(){return se.id},setTimeToLoadDelay:function(At){Ae=At},getTimeToLoadDelay:function(){return Ae},setSwitchTrack:function(At){Be=At},getSwitchTrack:function(){return Be},startScheduleTimer:Fe,clearScheduleTimer:Pe,reset:function(){vt.off(i.Z.URL_RESOLUTION_FAILED,et,ie),vt.off(r.Z.PLAYBACK_STARTED,Et,ie),vt.off(r.Z.PLAYBACK_RATE_CHANGED,kt,ie),vt.off(r.Z.PLAYBACK_TIME_UPDATED,$e,ie),Pe(),xe(!1),Mt(),se=null},getBufferTarget:lt,getPlaybackController:function(){return st},setCheckPlaybackQuality:function(At){We=At},setInitSegmentRequired:function(At){De=At},setLastInitializedQuality:function(At){He=At}},Re=(0,d.Z)(qe).getInstance().getLogger(ie),Mt(),se=ae.streamInfo,ie}fe.__dashjs_factory_name="ScheduleController";const Ce=g.Z.getClassFactory(fe);var V=I(7387);function H(ae){var ie,se,Re,Ae,ve,ye,Oe=(ae=ae||{}).eventBus,je=ae.events,He=ae.abrController,Be=ae.dashMetrics,De=ae.playbackController,We=ae.timelineConverter,qe=ae.type,vt=ae.streamInfo,ot=ae.dashConstants,ct=ae.segmentsController,mt=ae.isDynamic,Me=ae.adapter;function st(){return qe}function tt(){if(!(He&&Be&&De&&We))throw new Error(l.Z.MISSING_CONFIG_ERROR)}function ft(){return Re}function he(){return ye}function Le(){se=null,Re=!0,Ae=[],ve=null}function Ve(xe){return new Promise(function(et,Et){var kt=xe.hasInitialization(),Mt=xe.hasSegments(),At=[];At.push(ct.updateInitData(xe,kt)),At.push(ct.updateSegmentData(xe,Mt)),Promise.all(At).then(function(Ot){var Kt;Ot[0]&&!Ot[0].error&&(xe=function(_n,Jt){return Jt&&!Jt.error&&Jt.representation?Jt.representation:_n}(xe,Ot[0])),Ot[1]&&!Ot[1].error&&(xe=function(_n,Jt){if(Jt&&!Jt.error){var un,Cn,mn,St,gt=Jt.segments,Rt=[],It=0;for(un=0,Cn=gt?gt.length:0;un<Cn;un++)mn=gt[un],(St=(0,V.TJ)(We,mt,_n,mn.startTime,mn.duration,mn.timescale,mn.media,mn.mediaRange,It))&&(Rt.push(St),St=null,It++);return Rt.length>0&&(_n.segments=Rt),_n}}(xe,Ot[1])),(Kt=xe).mediaFinishedInformation=ct.getMediaFinishedInformation(Kt),function(_n){if(ft()){var Jt,un,Cn=Be.getCurrentManifestUpdate(),mn=!1;if(Cn){for(var St=0;St<Cn.representationInfo.length;St++)if((Jt=Cn.representationInfo[St]).index===_n.index&&Jt.mediaType===st()){mn=!0;break}mn||Be.addManifestUpdateRepresentationInfo(_n,st())}if(function(){for(var Rt=0,It=Ae.length;Rt<It;Rt++){var xt=Ae[Rt].segmentInfoType;if(!Ae[Rt].hasInitialization()||(xt===ot.SEGMENT_BASE||xt===ot.BASE_URL)&&!Ae[Rt].segments)return!1}return!0}()){He.setPlaybackQuality(qe,vt,(un=ye,Ae.indexOf(un)));var gt=Be.getCurrentDVRInfo(qe);gt&&Be.updateManifestUpdateInfo({latency:gt.range.end-De.getTime()}),Be.getCurrentRepresentationSwitch(he().adaptation.type)||Fe(),Ne()}}}(xe),et()}).catch(function(Ot){Et(Ot)})})}function Fe(){tt();var xe=new Date,et=he(),Et=1e3*De.getTime();et&&Be.addRepresentationSwitch(et.adaptation.type,xe,Et,et.id),Oe.trigger(r.Z.REPRESENTATION_SWITCH,{mediaType:qe,streamId:vt.id,currentRepresentation:et,numberOfRepresentations:Ae.length},{streamId:vt.id,mediaType:qe})}function Pe(xe){return xe==null||xe>=Ae.length?null:Ae[xe]}function Ne(xe){Re=!1,Oe.trigger(je.DATA_UPDATE_COMPLETED,{data:se,currentRepresentation:ye,error:xe},{streamId:vt.id,mediaType:qe})}function lt(xe){ye=xe,ve=Me.convertRepresentationToRepresentationInfo(ye)}function $e(xe){if(xe.newDuration){var et=he();et&&et.adaptation.period&&(et.adaptation.period.duration=xe.newDuration)}}return ie={getStreamId:function(){return vt.id},getType:st,getData:function(){return se},isUpdating:ft,updateData:function(xe,et,Et,kt,Mt){if(tt(),Re=!0,Ae=et,lt(Pe(Mt)),se=xe,Et!==l.Z.VIDEO&&Et!==l.Z.AUDIO&&(Et!==l.Z.TEXT||!kt))return Ne(),Promise.resolve();for(var At=[],Ot=0,Kt=Ae.length;Ot<Kt;Ot++){var _n=Ae[Ot];At.push(Ve(_n))}return Promise.all(At)},getCurrentRepresentation:he,getCurrentRepresentationInfo:function(){return ve},getRepresentationForQuality:Pe,prepareQualityChange:function(xe){lt(Pe(xe)),Fe()},reset:function(){Oe.off(r.Z.MANIFEST_VALIDITY_CHANGED,$e,ie),Le()}},Le(),Oe.on(r.Z.MANIFEST_VALIDITY_CHANGED,$e,ie),ie}H.__dashjs_factory_name="RepresentationController";const z=g.Z.getClassFactory(H);var X=I(3106),de=I(9326),ge=I(7473),Ge=I(2594);function it(ae,ie){if(!(ae instanceof ie))throw new TypeError("Cannot call a class as a function")}var Ye=function ae(){it(this,ae),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};Ye.INITIAL_PLAYOUT_START_REASON="initial_playout",Ye.SEEK_START_REASON="seek",Ye.RESUME_FROM_PAUSE_START_REASON="resume",Ye.METRICS_COLLECTION_START_REASON="metrics_collection_start";var Ke=function ae(){it(this,ae),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};Ke.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",Ke.REBUFFERING_REASON="rebuffering",Ke.USER_REQUEST_STOP_REASON="user_request",Ke.END_OF_PERIOD_STOP_REASON="end_of_period",Ke.END_OF_CONTENT_STOP_REASON="end_of_content",Ke.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",Ke.FAILURE_STOP_REASON="failure";var dt=I(7802);function me(){return{ntpToUTC:function(ae){var ie=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(ie.getTime()+ae).getTime()}}}me.__dashjs_factory_name="TimeUtils";const ke=g.Z.getSingletonFactory(me);function Je(ae){ae=ae||{};var ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We,qe,vt,ot=this.context,ct=(0,y.Z)(ot).getInstance(),mt=ae.streamInfo,Me=ae.type,st=ae.errHandler,tt=ae.mimeType,ft=ae.timelineConverter,he=ae.adapter,Le=ae.manifestModel,Ve=ae.mediaPlayerModel,Fe=ae.fragmentModel,Pe=ae.abrController,Ne=ae.playbackController,lt=ae.mediaController,$e=ae.textController,xe=ae.dashMetrics,et=ae.settings,Et=ae.boxParser,kt=ae.segmentBlacklistController;function Mt(){return mt.id}function At(){return Me}function Ot(){return he.getIsTextTrack(je.getData())}function Kt(){ve=[],Ae=null,qe=0,He=!1,Be=!1,vt=null}function _n(Yt){return!isNaN(Yt)&&!isNaN(mt.duration)&&isFinite(mt.duration)&&Yt>=mt.start+mt.duration}function Jt(Yt){var yn=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Yt.sender){if(Ne.getIsManifestUpdateInProgress())St();else if((!Ot()||$e.isTextEnabled())&&ye&&Yt.representationId&&!ye.appendInitSegmentFromCache(Yt.representationId)){var Ht=je.getCurrentRepresentation();if(Ht.range===0)return void un();var tn=De?De.getInitRequest(Ae,Ht):null;tn?Fe.executeRequest(tn):yn&&(Oe.setInitSegmentRequired(!0),St())}}}function un(Yt){var yn=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Ne.getIsManifestUpdateInProgress()||ye.getIsPruningInProgress())St();else{var Ht=function(){var tn,rt=Xr();if(isNaN(qe)||At()===l.Z.TEXT&&!$e.isTextEnabled())return null;if(De){var Pt=je&&rt?je.getRepresentationForQuality(rt.quality):null;tn=He?De.getSegmentRequestForTime(Ae,Pt,qe):De.getNextSegmentRequest(Ae,Pt)}return tn}();Ht?(He=!1,Cn(Ht)):mn(yn)}}function Cn(Yt){isNaN(Yt.startTime+Yt.duration)||(qe=Yt.startTime+Yt.duration),Yt.delayLoadingTime=new Date().getTime()+Oe.getTimeToLoadDelay(),Oe.setTimeToLoadDelay(0),function(yn){var Ht=yn.url;return yn.range&&(Ht=Ht.concat("_",yn.range)),kt.contains(Ht)}(Yt)?(se.warn("Fragment request url ".concat(Yt.url," for stream id ").concat(mt.id," and media type ").concat(Me," is on the ignore list and will be skipped")),St()):(se.debug("Next fragment request url for stream id ".concat(mt.id," and media type ").concat(Me," is ").concat(Yt.url)),Fe.executeRequest(Yt))}function mn(Yt){var yn,Ht=je.getCurrentRepresentation();if(!et.get().streaming.gaps.enableSeekFix||!He&&Ne.getTime()!==0||(Re?Re&&Ht.segmentInfoType===c.Z.SEGMENT_TIMELINE&&(yn=De.getValidTimeAheadOfTargetTime(qe,Ae,Ht,et.get().streaming.gaps.threshold)):yn=De.getValidTimeAheadOfTargetTime(qe,Ae,Ht,et.get().streaming.gaps.threshold),isNaN(yn)||yn===qe)){if(De.isLastSegmentRequested(Ht,qe)){var tn=De.getCurrentIndex();return se.debug("Segment requesting for stream ".concat(mt.id," has finished")),ct.trigger(i.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:tn},{streamId:mt.id,mediaType:Me}),ye.segmentRequestingCompleted(tn),void Oe.clearScheduleTimer()}Yt&&St()}else Ne.isSeeking()||Ne.getTime()===0?(se.warn("Adjusting playback time ".concat(yn," because of gap in the manifest. Seeking by ").concat(yn-qe)),Ne.seek(yn,!1,!1)):(se.warn("Adjusting buffering time ".concat(yn," because of gap in the manifest. Adjusting time by ").concat(yn-qe)),$n(yn),Yt&&St())}function St(){Oe.startScheduleTimer(Ne.getLowLatencyModeEnabled()?et.get().streaming.scheduling.lowLatencyTimeout:et.get().streaming.scheduling.defaultTimeout)}function gt(Yt){Yt.error||ye.getIsBufferingCompleted()||ye.updateBufferTimestampOffset(Yt.currentRepresentation)}function Rt(Yt){xe.addBufferState(Me,Yt.state,Oe.getBufferTarget()),Yt.state!==h.Z.BUFFER_EMPTY||Ne.isSeeking()||(se.info("Buffer is empty! Stalling!"),xe.pushPlayListTraceMetrics(new Date,Ke.REBUFFERING_REASON))}function It(Yt){Fe.syncExecutedRequestsWithBufferedRange(ye.getBuffer().getAllBufferRanges(),mt.duration),Yt.quotaExceeded&&Yt.from>Ne.getTime()&&$n(Yt.from),Yt.hasEnoughSpaceToAppend&&Yt.quotaExceeded&&Oe.startScheduleTimer()}function xt(Yt){if(Yt&&Yt.lastRequestAppended&&Yt.lastRequestAppended.url){var yn=Yt.lastRequestAppended.url;Yt.lastRequestAppended.range&&(yn=yn.concat("_",Yt.lastRequestAppended.range)),se.warn("Blacklisting segment with url ".concat(yn)),kt.add(yn)}}function zt(Yt){if(se.debug("Appended bytes for ".concat(Yt.mediaType," and stream id ").concat(Yt.streamId)),Yt.segmentType===ee.w.INIT_SEGMENT_TYPE){var yn=Yt.quality;Oe.setLastInitializedQuality(yn),se.info("["+Me+"] lastInitializedRepresentationInfo changed to "+Yt.quality)}vt?qt(vt):Oe.startScheduleTimer(0)}function qt(Yt){var yn=Fe.getRequests({state:b.FRAGMENT_MODEL_LOADING});if(yn&&yn.length>0)return se.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(vt=Yt);ye.updateBufferTimestampOffset(Yt).then(function(){Ae.segmentAlignment||Ae.subSegmentAlignment?Oe.startScheduleTimer():Sn(),vt=null,Be=!1}).catch(function(){vt=null,Be=!1})}function In(Yt){se.info("onFragmentLoadingAbandoned request: "+Yt.request.url+" has been aborted"),Ne.isSeeking()||Oe.getSwitchTrack()||Be||(se.info("onFragmentLoadingAbandoned request: "+Yt.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Yt.request&&Yt.request.isInitializationRequest()?Oe.setInitSegmentRequired(!0):$n(Yt.request.startTime+Yt.request.duration/2),Oe.startScheduleTimer(0))}function Pn(Yt){se.info("OnFragmentLoadingCompleted for stream id "+mt.id+" and media type "+Me+" - Url:",Yt.request?Yt.request.url:"undefined",Yt.request.range?", Range:"+Yt.request.range:""),Ot()&&Oe.startScheduleTimer(0),Yt.error&&Yt.request.serviceLocation&&function(yn){se.info("Fragment loading completed with an error"),yn&&yn.request&&yn.request.type&&(yn.request.type===ee.w.INIT_SEGMENT_TYPE?Jt({representationId:yn.request.representationId,sender:{}},!1):yn.request.type===ee.w.MEDIA_SEGMENT_TYPE&&($n(yn.request.startTime+yn.request.duration/2),un({},!1)))}(Yt)}function yr(){$n(Ne.getTime()),Jr().startScheduleTimer()}function ar(Yt){var yn=Yt.currentTrackInfo;if(yn){var Ht=ve.find(function(tn){return tn.index===yn.index&&tn.lang===yn.lang});Ht&&wr(Ht).then(function(){ye.setIsBufferingCompleted(!1),$n(Ne.getTime()),Oe.setInitSegmentRequired(!0),Oe.startScheduleTimer()})}}function lr(Yt){$n(Yt.quotaExceededTime),Oe.clearScheduleTimer()}function ur(){return ye?ye.getBuffer():null}function wr(Yt){Yt===Ae||Yt&&Ae&&Yt.type!==Ae.type||(Ae=Yt);var yn=he.getRealAdaptation(mt,Ae),Ht=he.getVoRepresentations(Ae);if(je){var tn,rt=je.getData(),Pt=Pe.getMaxAllowedIndexFor(Me,mt.id),an=Pe.getMinAllowedIndexFor(Me,mt.id),On=null;return rt!==null&&rt.id===yn.id||Me===l.Z.TEXT?tn=Pe.getQualityFor(Me,mt.id):(On=Pe.getThroughputHistory().getAverageThroughput(Me,Re)||Pe.getInitialBitrateFor(Me,mt.id),tn=Pe.getQualityForBitrate(Ae,On,mt.id)),an!==void 0&&tn<an&&(tn=an),tn>Pt&&(tn=Pt),je.updateData(yn,Ht,Me,Ae.isFragmented,tn)}return Promise.resolve()}function Jr(){return Oe}function Xr(Yt){var yn;return Yt!==void 0?((0,X.SE)(Yt),yn=je?je.getRepresentationForQuality(Yt):null):yn=je?je.getCurrentRepresentation():null,he.convertRepresentationToRepresentationInfo(yn)}function ri(){return!!ye&&ye.getIsBufferingCompleted()}function hi(Yt){if(et.get().streaming.enableManifestTimescaleMismatchFix){var yn=Yt.chunk,Ht=yn.bytes,tn=Xr(yn.quality),rt=je&&tn?je.getRepresentationForQuality(tn.quality):null;tn&&rt&&(rt.timescale=Et.getMediaTimescaleFromMoov(Ht))}}function Ei(Yt){var yn=Yt.chunk,Ht=yn.bytes,tn=yn.quality,rt=Xr(tn),Pt=je&&rt?je.getRepresentationForQuality(rt.quality):null;if(rt&&Pt){var an;if(et.get().streaming.parseInbandPrft&&Yt.request.type===ee.w.MEDIA_SEGMENT_TYPE){var On=function(Ea,$a){var Fa=Ea.getBoxes("prft"),Co=[];return Fa.forEach(function(Gr){Co.push(function(Bo,Ss){var ko="unknown";switch(Bo.flags){case 0:ko=c.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:ko=c.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:ko=c.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var zo=1e3*Bo.ntp_timestamp_sec+Bo.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:ko,ntpTimestamp:zo=ke(ot).getInstance().ntpToUTC(zo),mediaTime:Bo.media_time/Ss}}(Gr,$a))}),Co}(an=an||Et.parse(Ht),Pt.timescale);On&&On.length&&ct.trigger(r.Z.INBAND_PRFT,{data:On},{streamId:mt.id,mediaType:Me})}var Wn=he.getEventsFor(rt.mediaInfo,null,mt),mr=he.getEventsFor(rt,Pt,mt);if(Wn&&Wn.length>0||mr&&mr.length>0){var Zi=Fe.getRequests({state:b.FRAGMENT_MODEL_EXECUTED,quality:tn,index:yn.index})[0],Pa=function(Ea,$a,Fa,Co){try{for(var Gr={},Bo=[],Ss=Fa.concat(Co),ko=0,zo=Ss.length;ko<zo;ko++)Gr[Ss[ko].schemeIdUri+"/"+Ss[ko].value]=Ss[ko];var is=Ea.getBoxes("emsg");if(!is||is.length===0)return Bo;for(var Mo=Ea.getBox("sidx"),Ks=!Mo||isNaN(Mo.earliest_presentation_time)||isNaN(Mo.timescale)?$a&&!isNaN($a.mediaStartTime)?$a.mediaStartTime:0:Mo.earliest_presentation_time/Mo.timescale,Bu=Math.max(Ks,0),ju=je.getCurrentRepresentation(),du=0,hu=is.length;du<hu;du++){var Gu=he.getEvent(is[du],Gr,Bu,ju);Gu&&Bo.push(Gu)}return Bo}catch{return[]}}(an=an||Et.parse(Ht),Zi,Wn,mr);ct.trigger(i.Z.INBAND_EVENTS,{events:Pa},{streamId:mt.id})}}}function ui(){var Yt=Ne.getTime();et.get().streaming.buffer.flushBufferAtTrackSwitch&&Ne.seek(Yt+.001,!1,!0),$n(Yt),ye.setSeekTarget(Yt),Oe.startScheduleTimer()}function Sn(){var Yt=Ne.getTime(),yn=ye.getContinuousBufferTimeForTargetTime(Yt);$n(isNaN(yn)?Yt:yn),Oe.startScheduleTimer()}function sr(Yt){Yt&&!isNaN(Yt.time)&&($n(Yt.time),ye.setSeekTarget(Yt.time))}function $n(Yt){qe=Yt,He=!0}return ie={initialize:function(Yt,yn,Ht){We=(0,dt.Z)(ot).create({events:i.Z,eventBus:ct,streamInfo:mt,timelineConverter:ft,dashConstants:c.Z,segmentBaseController:ae.segmentBaseController,type:Me}),De=(0,de.Z)(ot).create({streamInfo:mt,type:Me,timelineConverter:ft,dashMetrics:xe,mediaPlayerModel:Ve,baseURLController:ae.baseURLController,errHandler:st,segmentsController:We,settings:et,boxParser:Et,events:i.Z,eventBus:ct,errors:U,debug:(0,d.Z)(ot).getInstance(),requestModifier:(0,ge.Z)(ot).getInstance(),dashConstants:c.Z,constants:l.Z,urlUtils:(0,Ge.Z)(ot).getInstance()}),Re=mt.manifestInfo.isDynamic,De.initialize(Re),Pe.registerStreamType(Me,ie),je=z(ot).create({streamInfo:mt,type:Me,abrController:Pe,dashMetrics:xe,playbackController:Ne,timelineConverter:ft,dashConstants:c.Z,events:i.Z,eventBus:ct,errors:U,isDynamic:Re,adapter:he,segmentsController:We}),ye=function(tn,rt){return tn?tn!==l.Z.TEXT||rt?be(ot).create({streamInfo:mt,type:tn,mediaPlayerModel:Ve,manifestModel:Le,fragmentModel:Fe,errHandler:st,mediaController:lt,representationController:je,adapter:he,textController:$e,abrController:Pe,playbackController:Ne,settings:et}):J(ot).create({streamInfo:mt,type:tn,mimeType:tt,fragmentModel:Fe,textController:$e,errHandler:st,settings:et}):(st.error(new p.Z(U.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,U.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(Me,Ht),ye&&ye.initialize(Yt),(Oe=Ce(ot).create({streamInfo:mt,type:Me,mimeType:tt,adapter:he,dashMetrics:xe,mediaPlayerModel:Ve,fragmentModel:Fe,abrController:Pe,playbackController:Ne,textController:$e,mediaController:lt,bufferController:ye,representationController:je,settings:et})).initialize(yn),qe=0,He=!1},getStreamId:Mt,getType:At,isUpdating:function(){return!!je&&je.isUpdating()},getBufferController:function(){return ye},dischargePreBuffer:function(){ye.dischargePreBuffer()},getFragmentModel:function(){return Fe},getScheduleController:Jr,getRepresentationController:function(){return je},getRepresentationInfo:Xr,getBufferLevel:function(){return ye?ye.getBufferLevel():0},isBufferingCompleted:ri,createBufferSinks:function(Yt){var yn=ur();return yn?Promise.resolve(yn):ye?ye.createBufferSink(Ae,Yt):Promise.resolve(null)},updateStreamInfo:function(Yt){return mt=Yt,ri()?Promise.resolve():ye.updateAppendWindow()},getStreamInfo:function(){return mt},selectMediaInfo:wr,clearMediaInfoArray:function(){ve=[]},addMediaInfo:function(Yt){ve.indexOf(Yt)===-1&&ve.push(Yt)},prepareTrackSwitch:function(){return new Promise(function(Yt){se.debug("Preparing track switch for type ".concat(Me));var yn=Me===l.Z.TEXT||et.get().streaming.trackSwitchMode[Me]===l.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&Ne.getTimeToStreamEnd(mt)>et.get().streaming.buffer.stallThreshold;if(ye.getIsBufferingCompleted()&&!yn)return ye.prepareForNonReplacementTrackSwitch(Ae.codec).then(function(){ct.trigger(i.Z.BUFFERING_COMPLETED,{},{streamId:mt.id,mediaType:Me})}).catch(function(){ct.trigger(i.Z.BUFFERING_COMPLETED,{},{streamId:mt.id,mediaType:Me})}),void Yt();Oe.clearScheduleTimer(),Oe.setSwitchTrack(!0),yn?(ct.trigger(i.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Me,streamId:mt.id},{mediaType:Me,streamId:mt.id}),Fe.abortRequests(),ye.prepareForReplacementTrackSwitch(Ae.codec).then(function(){var Ht=Xr();return ye.updateBufferTimestampOffset(Ht)}).then(function(){ui(),Yt()}).catch(function(){ui(),Yt()})):ye.prepareForNonReplacementTrackSwitch(Ae.codec).then(function(){Sn(),Yt()}).catch(function(){Sn(),Yt()})})},prepareQualityChange:function(Yt){vt&&se.warning("Canceling queued representation switch to ".concat(vt.quality," for ").concat(Me)),se.debug("Preparing quality switch for type ".concat(Me));var yn=Yt.newQuality;Be=!0,Oe.clearScheduleTimer(),je.prepareQualityChange(yn);var Ht=Xr(yn);Yt.reason&&Yt.reason.forceReplace?function(tn){Fe.abortRequests(),ct.trigger(i.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Me,streamId:mt.id},{mediaType:Me,streamId:mt.id}),ye.prepareForForceReplacementQualitySwitch(tn).then(function(){ui(),Be=!1}).catch(function(){ui(),Be=!1})}(Ht):et.get().streaming.buffer.fastSwitchEnabled?function(tn){var rt=Ne.getTime(),Pt=1.5*(isNaN(tn.fragmentDuration)?1:tn.fragmentDuration),an=Fe.getRequests({state:b.FRAGMENT_MODEL_EXECUTED,time:rt+Pt,threshold:0})[0];if(an&&!Ot()){var On=ye.getBufferLevel(),Wn=Pe.getAbandonmentStateFor(mt.id,Me);an.quality<tn.quality&&On>=Pt&&Wn!==h.Z.ABANDON_LOAD?ye.updateBufferTimestampOffset(tn).then(function(){Fe.abortRequests(),$n(rt+Pt),Oe.setCheckPlaybackQuality(!1),Oe.startScheduleTimer(),Be=!1}).catch(function(){Be=!1}):qt(tn)}else Oe.startScheduleTimer(),Be=!1}(Ht):qt(Ht),xe.pushPlayListTraceMetrics(new Date,Ke.REPRESENTATION_SWITCH_STOP_REASON),xe.createPlaylistTraceMetrics(Ht.id,1e3*Ne.getTime(),Ne.getPlaybackRate())},getMediaInfo:function(){return Ae},getMediaSource:function(){return ye.getMediaSource()},setMediaSource:function(Yt){return ye.setMediaSource(Yt,Ae)},getBuffer:ur,setExplicitBufferingTime:$n,finalisePlayList:function(Yt,yn){xe.pushPlayListTraceMetrics(Yt,yn)},probeNextRequest:function(){var Yt=Xr(),yn=je&&Yt?je.getRepresentationForQuality(Yt.quality):null;return De.getNextSegmentRequestIdempotent(Ae,yn)},prepareInnerPeriodPlaybackSeeking:function(Yt){return new Promise(function(yn){if(ye.hasBufferAtTime(Yt.seekTime))return ye.pruneBuffer(),_n(ye.getContinuousBufferTimeForTargetTime(Yt.seekTime))&&ye.setIsBufferingCompleted(!0),void yn();Oe.clearScheduleTimer(),Fe.abortRequests(),ye.prepareForPlaybackSeek().then(function(){var Ht=ye.getAllRangesWithSafetyFactor(Yt.seekTime);return ye.clearBuffers(Ht)}).then(function(){var Ht=ye.getContinuousBufferTimeForTargetTime(Yt.seekTime);if(_n(Ht))ye.setIsBufferingCompleted(!0),yn();else{var tn=isNaN(Ht)?Yt.seekTime:Ht;$n(tn),ye.setSeekTarget(tn);var rt=[];rt.push(ye.updateAppendWindow());var Pt=Xr();rt.push(ye.updateBufferTimestampOffset(Pt)),Promise.all(rt).then(function(){Oe.setInitSegmentRequired(!0),Oe.setCheckPlaybackQuality(!1),Oe.startScheduleTimer(),yn()})}}).catch(function(Ht){se.error(Ht)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(Yt,yn){try{Oe.clearScheduleTimer(),Fe.abortRequests(),ye.prepareForPlaybackSeek().then(function(){return ye.pruneAllSafely()}).then(function(){Yt()})}catch(Ht){yn(Ht)}})},reset:function(Yt,yn){De&&De.reset(),ye&&(ye.reset(Yt,yn),ye=null),Oe&&(Oe.reset(),Oe=null),je&&(je.reset(),je=null),We&&(We=null),Pe&&Pe.unRegisterStreamType(Mt(),Me),ct.off(i.Z.DATA_UPDATE_COMPLETED,gt,ie),ct.off(i.Z.INIT_FRAGMENT_NEEDED,Jt,ie),ct.off(i.Z.MEDIA_FRAGMENT_NEEDED,un,ie),ct.off(i.Z.INIT_FRAGMENT_LOADED,hi,ie),ct.off(i.Z.MEDIA_FRAGMENT_LOADED,Ei,ie),ct.off(i.Z.BUFFER_LEVEL_STATE_CHANGED,Rt,ie),ct.off(i.Z.BUFFER_CLEARED,It,ie),ct.off(i.Z.SEEK_TARGET,sr,ie),ct.off(i.Z.FRAGMENT_LOADING_ABANDONED,In,ie),ct.off(i.Z.FRAGMENT_LOADING_COMPLETED,Pn,ie),ct.off(i.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,yr,ie),ct.off(i.Z.SET_NON_FRAGMENTED_TEXT,ar,ie),ct.off(i.Z.QUOTA_EXCEEDED,lr,ie),ct.off(i.Z.SOURCE_BUFFER_ERROR,xt,ie),ct.off(i.Z.BYTES_APPENDED_END_FRAGMENT,zt,ie),Kt(),Me=null,mt=null}},se=(0,d.Z)(ot).getInstance().getLogger(ie),Kt(),ct.on(i.Z.DATA_UPDATE_COMPLETED,gt,ie,{priority:y.Z.EVENT_PRIORITY_HIGH}),ct.on(i.Z.INIT_FRAGMENT_NEEDED,Jt,ie),ct.on(i.Z.MEDIA_FRAGMENT_NEEDED,un,ie),ct.on(i.Z.INIT_FRAGMENT_LOADED,hi,ie),ct.on(i.Z.MEDIA_FRAGMENT_LOADED,Ei,ie),ct.on(i.Z.BUFFER_LEVEL_STATE_CHANGED,Rt,ie),ct.on(i.Z.BUFFER_CLEARED,It,ie),ct.on(i.Z.SEEK_TARGET,sr,ie),ct.on(i.Z.FRAGMENT_LOADING_ABANDONED,In,ie),ct.on(i.Z.FRAGMENT_LOADING_COMPLETED,Pn,ie),ct.on(i.Z.QUOTA_EXCEEDED,lr,ie),ct.on(i.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,yr,ie),ct.on(i.Z.SET_NON_FRAGMENTED_TEXT,ar,ie),ct.on(i.Z.SOURCE_BUFFER_ERROR,xt,ie),ct.on(i.Z.BYTES_APPENDED_END_FRAGMENT,zt,ie),ie}Je.__dashjs_factory_name="StreamProcessor";const Xe=g.Z.getClassFactory(Je),nt=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null};var Tt=I(9032);function bt(ae,ie){if(ae){if(typeof ae=="string")return Ft(ae,ie);var se=Object.prototype.toString.call(ae).slice(8,-1);return se==="Object"&&ae.constructor&&(se=ae.constructor.name),se==="Map"||se==="Set"?Array.from(ae):se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(se)?Ft(ae,ie):void 0}}function Ft(ae,ie){(ie==null||ie>ae.length)&&(ie=ae.length);for(var se=0,Re=new Array(ie);se<ie;se++)Re[se]=ae[se];return Re}function pn(ae){ae=ae||{};var ie,se,Re=this.context,Ae=ae.requestModifier,ve=ae.lowLatencyThroughputModel,ye=ae.boxParser,Oe=(0,G.Z)(Re).getInstance();function je(De){var We,qe=new Date,vt=De.request,ot=new Headers;if(vt.range&&ot.append("Range","bytes="+vt.range),De.headers)for(var ct in De.headers){var mt=De.headers[ct];mt&&ot.append(ct,mt)}vt.requestStartDate||(vt.requestStartDate=qe),Ae&&Ae.modifyRequestHeader&&Ae.modifyRequestHeader({setRequestHeader:function(he,Le){ot.append(he,Le)}},{url:De.url}),typeof window.AbortController=="function"&&(We=new AbortController,De.abortController=We,We.signal.onabort=De.onabort);var Me={method:De.method,headers:ot,credentials:De.withCredentials?"include":void 0,signal:We?We.signal:void 0},st=Oe.get().streaming.abr.fetchThroughputCalculationMode,tt=Date.now(),ft=0;new Promise(function(he){if(st===l.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&ve&&(ft=ve.getThroughputCapacityDelayMS(vt,1e3*se.getCurrentBufferLevel(vt.mediaType))))return setTimeout(he,ft);he()}).then(function(){var he=Date.now();fetch(De.url,Me).then(function(Le){De.response||(De.response={}),De.response.status=Le.status,De.response.statusText=Le.statusText,De.response.responseURL=Le.url,Le.ok||De.onerror();var Ve,Fe="",Pe=function(Rt,It){var xt;if(typeof Symbol>"u"||Rt[Symbol.iterator]==null){if(Array.isArray(Rt)||(xt=bt(Rt))){xt&&(Rt=xt);var zt=0,qt=function(){};return{s:qt,n:function(){return zt>=Rt.length?{done:!0}:{done:!1,value:Rt[zt++]}},e:function(ar){throw ar},f:qt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var In,Pn=!0,yr=!1;return{s:function(){xt=Rt[Symbol.iterator]()},n:function(){var ar=xt.next();return Pn=ar.done,ar},e:function(ar){yr=!0,In=ar},f:function(){try{Pn||xt.return==null||xt.return()}finally{if(yr)throw In}}}}(Le.headers.keys());try{for(Pe.s();!(Ve=Pe.n()).done;){var Ne=Ve.value;Fe+=Ne+": "+Le.headers.get(Ne)+`\r
`}}catch(Rt){Pe.e(Rt)}finally{Pe.f()}if(De.response.responseHeaders=Fe,!Le.body)return Le.arrayBuffer().then(function(Rt){De.response.response=Rt;var It={loaded:Rt.byteLength,total:Rt.byteLength,stream:!1};De.progress(It),De.onload(),De.onend()});var lt,$e,xe,et=parseInt(Le.headers.get("Content-Length"),10),Et=0,kt=!1,Mt=new Uint8Array,At=0;if(st===l.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&ve){var Ot=he,Kt=0,_n=function(Rt){if(Array.isArray(Rt))return Rt}(xe=Le.body.tee())||function(Rt,It){if(typeof Symbol<"u"&&Symbol.iterator in Object(Rt)){var xt=[],zt=!0,qt=!1,In=void 0;try{for(var Pn,yr=Rt[Symbol.iterator]();!(zt=(Pn=yr.next()).done)&&(xt.push(Pn.value),xt.length!==2);zt=!0);}catch(ar){qt=!0,In=ar}finally{try{zt||yr.return==null||yr.return()}finally{if(qt)throw In}}return xt}}(xe)||bt(xe,2)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(),Jt=_n[0],un=_n[1];lt=Jt.getReader(),$e=[],lt.read().then(function Rt(It){var xt=It.value,zt=It.done;if(Kt=Date.now(),xt&&xt.length){var qt=Kt-Ot,In=xt.length;$e.push({chunkDownloadTimeRelativeMS:Kt-he,chunkDownloadDurationMS:qt,chunkBytes:In,kbps:Math.round(8*In/(qt/1e3)),bufferLevel:se.getCurrentBufferLevel(vt.mediaType)})}if(zt){var Pn=Kt-he,yr=$e.reduce(function(ar,lr){return ar+lr.chunkBytes},0);return ve.addMeasurement(vt,Pn,$e,tt,ft,Fe),void De.progress({loaded:yr,total:yr,lengthComputable:!0,time:ve.getEstimatedDownloadDurationMS(vt),stream:!0})}return Ot=Date.now(),lt.read().then(Rt)}),De.reader=un.getReader()}else De.reader=Le.body.getReader();var Cn=[],mn=[],St=[],gt=!0;He(De,function Rt(It){var xt=It.value;if(It.done){if(Mt){if(st!==l.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var zt=null,qt=null;st===l.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(zt=function(ar,lr){try{var ur,wr;ur=ar.filter(function(Sn,sr){return sr<ar.length-1}),wr=lr.filter(function(Sn,sr){return sr<lr.length-1});var Jr=[];if(ur.length>1){for(var Xr=0,ri=0,hi=0;hi<ur.length;hi++)if(ur[hi]&&wr[hi]){var Ei=wr[hi].ts-ur[hi].ts;if(Ei>1)Jr.push(8*wr[hi].bytes/Ei),ri=0;else{ri===0&&(ri=ur[hi].ts,Xr=0);var ui=wr[hi].ts-ri;ui>1?(Xr+=wr[hi].bytes,Jr.push(8*Xr/ui),ri=0):Xr+=wr[hi].bytes}}if(Jr.length>0)return Jr.reduce(function(Sn,sr){return Sn+sr},0)/Jr.length}return null}catch{return null}}(mn,St),zt&&(qt=8*Et/zt)):st===l.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(qt=Be(Cn,Et)),De.progress({loaded:Et,total:isNaN(et)?Et:et,lengthComputable:!0,time:qt,stream:!0})}De.response.response=Mt.buffer}return De.onload(),void De.onend()}if(xt&&xt.length>0){Mt=function(ar,lr){if(ar.length===0)return lr;var ur=new Uint8Array(ar.length+lr.length);return ur.set(ar),ur.set(lr,ar.length),ur}(Mt,xt),Et+=xt.length,Cn.push({ts:Date.now(),bytes:xt.length}),st===l.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&gt&&ye.findLastTopIsoBoxCompleted(["moof"],Mt,At).found&&(gt=!1,mn.push({ts:performance.now(),bytes:xt.length}));var In=ye.findLastTopIsoBoxCompleted(["moov","mdat"],Mt,At);if(In.found){var Pn,yr=In.lastCompletedOffset+In.size;st!==l.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||gt||(gt=!0,St.push({ts:performance.now(),bytes:Mt.length})),yr===Mt.length?(Pn=Mt,Mt=new Uint8Array):(Pn=new Uint8Array(Mt.subarray(0,yr)),Mt=Mt.subarray(yr)),De.progress({data:Pn.buffer,lengthComputable:!1,noTrace:!0}),At=0}else At=In.lastCompletedOffset,kt||(De.progress({lengthComputable:!1,noTrace:!0}),kt=!0)}He(De,Rt)})}).catch(function(Le){De.onerror&&De.onerror(Le)})})}function He(De,We){De.reader.read().then(We).catch(function(qe){De.onerror&&De.response.status===200&&De.onerror(qe)})}function Be(De,We){try{if((De=De.filter(function(ot){return ot.bytes>We/4/De.length})).length>1){var qe=0,vt=(De[De.length-1].ts-De[0].ts)/De.length;return De.forEach(function(ot,ct){var mt=De[ct+1];if(mt){var Me=mt.ts-ot.ts;qe+=Me<vt?Me:0}}),qe}return null}catch{return null}}return ie={load:function(De){Ae&&Ae.modifyRequest?(0,ge.k)(De,Ae).then(function(){return je(De)}):je(De)},abort:function(De){if(De.abortController)De.abortController.abort();else if(De.reader)try{De.reader.cancel(),De.onabort()}catch{}},calculateDownloadedTime:Be,setup:function(De){se=De.dashMetrics}},ie}pn.__dashjs_factory_name="FetchLoader";const wn=g.Z.getClassFactory(pn);var hn=I(1180);const Xn=function(){function ae(){(function(se,Re){if(!(se instanceof Re))throw new TypeError("Cannot call a class as a function")})(this,ae),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var ie;return(ie=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==c.Z.BASE_URL&&this.segmentInfoType!==c.Z.SEGMENT_BASE&&!this.indexRange}}])&&function(se,Re){for(var Ae=0;Ae<Re.length;Ae++){var ve=Re[Ae];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(se,ve.key,ve)}}(ae.prototype,ie),ae}(),on=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.period=null,this.index=-1,this.type=null};var Zn=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};Zn.DEFAULT_ID="defaultId";const Bn=Zn,Rr=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN};var Nr=I(2610);const Ir=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN};var nn=function ae(ie,se,Re,Ae){(function(ve,ye){if(!(ve instanceof ye))throw new TypeError("Cannot call a class as a function")})(this,ae),this.url=ie||"",this.serviceLocation=se||ie||"",this.dvb_priority=Re||1,this.dvb_weight=Ae||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};nn.DEFAULT_DVB_PRIORITY=1,nn.DEFAULT_DVB_WEIGHT=1;const rn=nn,$t=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},Nt=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},en=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0},_t=function(){function ae(){(function(se,Re){if(!(se instanceof Re))throw new TypeError("Cannot call a class as a function")})(this,ae),this.schemeIdUri=null,this.value=null,this.id=null}var ie;return(ie=[{key:"init",value:function(se){return se&&(this.schemeIdUri=se.schemeIdUri?se.schemeIdUri:null,this.value=se.value?se.value:null,this.id=se.id?se.id:null),this}}])&&function(se,Re){for(var Ae=0;Ae<Re.length;Ae++){var ve=Re[Ae];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(se,ve.key,ve)}}(ae.prototype,ie),ae}();var pt=I(3101),wt=I.n(pt);function Dt(){return{areEqual:function(ae,ie){return wt()(ae,ie)}}}Dt.__dashjs_factory_name="ObjectUtils";const Vt=g.Z.getSingletonFactory(Dt);var Wt=I(7803);const fn=function ae(ie,se){(function(Re,Ae){if(!(Re instanceof Ae))throw new TypeError("Cannot call a class as a function")})(this,ae),this.url=ie||"",this.serviceLocation=se||null,this.queryParams={}},ht=function ae(ie,se,Re){(function(Ae,ve){if(!(Ae instanceof ve))throw new TypeError("Cannot call a class as a function")})(this,ae),this.url=ie||"",this.serviceLocation=se||null,this.ttl=Re||NaN,this.queryParams={}};function jn(ae,ie){var se;if(typeof Symbol>"u"||ae[Symbol.iterator]==null){if(Array.isArray(ae)||(se=vn(ae))||ie&&ae&&typeof ae.length=="number"){se&&(ae=se);var Re=0,Ae=function(){};return{s:Ae,n:function(){return Re>=ae.length?{done:!0}:{done:!1,value:ae[Re++]}},e:function(je){throw je},f:Ae}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ve,ye=!0,Oe=!1;return{s:function(){se=ae[Symbol.iterator]()},n:function(){var je=se.next();return ye=je.done,je},e:function(je){Oe=!0,ve=je},f:function(){try{ye||se.return==null||se.return()}finally{if(Oe)throw ve}}}}function vn(ae,ie){if(ae){if(typeof ae=="string")return fr(ae,ie);var se=Object.prototype.toString.call(ae).slice(8,-1);return se==="Object"&&ae.constructor&&(se=ae.constructor.name),se==="Map"||se==="Set"?Array.from(ae):se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(se)?fr(ae,ie):void 0}}function fr(ae,ie){(ie==null||ie>ae.length)&&(ie=ae.length);for(var se=0,Re=new Array(ie);se<ie;se++)Re[se]=ae[se];return Re}function Sr(){var ae,ie,se,Re,Ae=this.context,ve=(0,Ge.Z)(Ae).getInstance(),ye=Number.isInteger||function(he){return typeof he=="number"&&isFinite(he)&&Math.floor(he)===he};function Oe(he,Le){if(!he)throw new Error("adaptation is not defined");if(!Le)throw new Error("type is not defined");if(he.Representation_asArray&&he.Representation_asArray.length){var Ve=ct(he.Representation_asArray[0]);if(Ve&&Ve.length>0&&Wt.Y.indexOf(Ve[0].schemeIdUri)>=0)return Le===l.Z.IMAGE}if(he.ContentComponent_asArray&&he.ContentComponent_asArray.length>0){if(he.ContentComponent_asArray.length>1)return Le===l.Z.MUXED;if(he.ContentComponent_asArray[0].contentType===Le)return!0}var Fe=Le===l.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(Le);if(he.Representation_asArray&&he.Representation_asArray.length){var Pe=he.Representation_asArray[0].codecs;if(Fe.test(Pe))return!0}if(he.hasOwnProperty(c.Z.MIME_TYPE))return Fe.test(he.mimeType);if(he.Representation_asArray){for(var Ne,lt=0;lt<he.Representation_asArray.length;lt++)if((Ne=he.Representation_asArray[lt]).hasOwnProperty(c.Z.MIME_TYPE))return Fe.test(Ne.mimeType)}return!1}function je(he){if(!he)throw new Error("adaptation is not defined");if(he.hasOwnProperty(c.Z.SEGMENT_TEMPLATE)||he.hasOwnProperty(c.Z.SEGMENT_TIMELINE)||he.hasOwnProperty(c.Z.SEGMENT_LIST)||he.hasOwnProperty(c.Z.SEGMENT_BASE))return!0;if(he.Representation_asArray&&he.Representation_asArray.length>0){var Le=he.Representation_asArray[0];if(Le.hasOwnProperty(c.Z.SEGMENT_TEMPLATE)||Le.hasOwnProperty(c.Z.SEGMENT_TIMELINE)||Le.hasOwnProperty(c.Z.SEGMENT_LIST)||Le.hasOwnProperty(c.Z.SEGMENT_BASE))return!0}return!1}function He(he){return Oe(he,l.Z.VIDEO)}function Be(he){return Oe(he,l.Z.TEXT)}function De(he){return Oe(he,l.Z.IMAGE)}function We(he){return he&&Array.isArray(he.Representation_asArray)&&he.Representation_asArray.sort(function(Le,Ve){return Le.bandwidth-Ve.bandwidth}),he}function qe(he,Le){return he&&he.Period_asArray&&ye(Le)&&he.Period_asArray[Le]?he.Period_asArray[Le].AdaptationSet_asArray:[]}function vt(he){return he&&he.Period_asArray?he.Period_asArray:[]}function ot(he){var Le=!1;return he&&he.hasOwnProperty("type")&&(Le=he.type===c.Z.DYNAMIC),Le}function ct(he){return he&&he.EssentialProperty_asArray&&he.EssentialProperty_asArray.length?he.EssentialProperty_asArray.map(function(Le){return{schemeIdUri:Le.schemeIdUri,value:Le.value}}):null}function mt(he){if(!he||!he.S_asArray)return NaN;var Le=he.S_asArray[0],Ve=he.S_asArray[1];return Le.hasOwnProperty("d")?Le.d:Ve.t-Le.t}function Me(he,Le){if(!he)throw new Error("Period cannot be null or undefined");var Ve=Bn.DEFAULT_ID+"_"+Le;return he.hasOwnProperty(c.Z.ID)&&he.id.length>0&&he.id!=="__proto__"&&(Ve=he.id),Ve}function st(he,Le,Ve){var Fe,Pe=[];if(!he)return Pe;for(Fe=0;Fe<he.length;Fe++){var Ne=new $t;if(Ne.timescale=1,Ne.representation=Le,!he[Fe].hasOwnProperty(l.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Ne.schemeIdUri=he[Fe].schemeIdUri,he[Fe].hasOwnProperty(c.Z.TIMESCALE)&&(Ne.timescale=he[Fe].timescale),he[Fe].hasOwnProperty(c.Z.VALUE)&&(Ne.value=he[Fe].value),Pe.push(Ne),Ne.period=Ve}return Pe}function tt(he){var Le=[],Ve=he.BaseURL_asArray||[he.baseUri],Fe=!1;return Ve.some(function(Pe){if(Pe){var Ne=new rn,lt=Pe.__text||Pe;return ve.isRelative(lt)&&(Fe=!0,he.baseUri&&(lt=ve.resolve(lt,he.baseUri))),Ne.url=lt,Pe.hasOwnProperty(c.Z.SERVICE_LOCATION)&&Pe.serviceLocation.length?Ne.serviceLocation=Pe.serviceLocation:Ne.serviceLocation=lt,Pe.hasOwnProperty(c.Z.DVB_PRIORITY)&&(Ne.dvb_priority=Pe[c.Z.DVB_PRIORITY]),Pe.hasOwnProperty(c.Z.DVB_WEIGHT)&&(Ne.dvb_weight=Pe[c.Z.DVB_WEIGHT]),Pe.hasOwnProperty(c.Z.AVAILABILITY_TIME_OFFSET)&&(Ne.availabilityTimeOffset=Pe[c.Z.AVAILABILITY_TIME_OFFSET]),Pe.hasOwnProperty(c.Z.AVAILABILITY_TIME_COMPLETE)&&(Ne.availabilityTimeComplete=Pe[c.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),Le.push(Ne),Fe}}),Le}function ft(he){var Le=new en;return Le.serverUrl=he.__text,he.hasOwnProperty(c.Z.DEFAULT_SERVICE_LOCATION)&&(Le.defaultServiceLocation=he[c.Z.DEFAULT_SERVICE_LOCATION],Le.defaultServiceLocationArray=Le.defaultServiceLocation.split(" ")),he.hasOwnProperty(c.Z.QUERY_BEFORE_START)&&(Le.queryBeforeStart=he[c.Z.QUERY_BEFORE_START].toLowerCase()==="true"),he.hasOwnProperty(c.Z.CLIENT_REQUIREMENT)&&(Le.clientRequirement=he[c.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),Le}return ae={getIsTypeOf:Oe,getIsText:Be,getIsFragmented:je,getProducerReferenceTimesForAdaptation:function(he){var Le=he&&he.hasOwnProperty(c.Z.PRODUCERREFERENCETIME_ASARRAY)?he[c.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(he&&he.hasOwnProperty(c.Z.REPRESENTATION_ASARRAY)?he[c.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(Fe){var Pe;Fe.hasOwnProperty(c.Z.PRODUCERREFERENCETIME_ASARRAY)&&Le.push.apply(Le,function(Ne){if(Array.isArray(Ne))return fr(Ne)}(Pe=Fe[c.Z.PRODUCERREFERENCETIME_ASARRAY])||function(Ne){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ne))return Array.from(Ne)}(Pe)||vn(Pe)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())});var Ve=[];return Le.forEach(function(Fe){var Pe=new Nt;Fe.hasOwnProperty(c.Z.ID)&&(Pe[c.Z.ID]=Fe[c.Z.ID],Fe.hasOwnProperty(c.Z.WALL_CLOCK_TIME)&&(Pe[c.Z.WALL_CLOCK_TIME]=Fe[c.Z.WALL_CLOCK_TIME],Fe.hasOwnProperty(c.Z.PRESENTATION_TIME)&&(Pe[c.Z.PRESENTATION_TIME]=Fe[c.Z.PRESENTATION_TIME],Fe.hasOwnProperty(c.Z.INBAND)&&(Pe[c.Z.INBAND]=Fe[c.Z.INBAND]!=="false"),Fe.hasOwnProperty(c.Z.TYPE)&&(Pe[c.Z.TYPE]=Fe[c.Z.TYPE]),Ve.push(Pe))))}),Ve},getLanguageForAdaptation:function(he){var Le="";return he&&he.hasOwnProperty(c.Z.LANG)&&(Le=he.lang),Le},getViewpointForAdaptation:function(he){return he&&he.hasOwnProperty(c.Z.VIEWPOINT_ASARRAY)&&he[c.Z.VIEWPOINT_ASARRAY].length?he[c.Z.VIEWPOINT_ASARRAY].map(function(Le){return new _t().init(Le)}):[]},getRolesForAdaptation:function(he){return he&&he.hasOwnProperty(c.Z.ROLE_ASARRAY)&&he[c.Z.ROLE_ASARRAY].length?he[c.Z.ROLE_ASARRAY].map(function(Le){return new _t().init(Le)}):[]},getAccessibilityForAdaptation:function(he){return he&&he.hasOwnProperty(c.Z.ACCESSIBILITY_ASARRAY)&&he[c.Z.ACCESSIBILITY_ASARRAY].length?he[c.Z.ACCESSIBILITY_ASARRAY].map(function(Le){return new _t().init(Le)}):[]},getAudioChannelConfigurationForAdaptation:function(he){return he&&he.hasOwnProperty(c.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&he[c.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?he[c.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(Le){return new _t().init(Le)}):[]},getAudioChannelConfigurationForRepresentation:function(he){return he&&he.hasOwnProperty(c.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&he[c.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?he[c.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(Le){return new _t().init(Le)}):[]},getAdaptationForIndex:function(he,Le,Ve){var Fe=qe(Le,Ve);return Fe.length>0&&ye(he)?Fe[he]:null},getIndexForAdaptation:function(he,Le,Ve){if(!he)return-1;for(var Fe=qe(Le,Ve),Pe=0;Pe<Fe.length;Pe++)if(Vt(Ae).getInstance().areEqual(Fe[Pe],he))return Pe;return-1},getAdaptationForId:function(he,Le,Ve){var Fe,Pe,Ne=qe(Le,Ve);for(Fe=0,Pe=Ne.length;Fe<Pe;Fe++)if(Ne[Fe].hasOwnProperty(c.Z.ID)&&Ne[Fe].id===he)return Ne[Fe];return null},getAdaptationsForType:function(he,Le,Ve){var Fe,Pe,Ne=qe(he,Le),lt=[];for(Fe=0,Pe=Ne.length;Fe<Pe;Fe++)Oe(Ne[Fe],Ve)&&lt.push(We(Ne[Fe]));return lt},getRealPeriods:vt,getRealPeriodForIndex:function(he,Le){var Ve=vt(Le);return Ve.length>0&&ye(he)?Ve[he]:null},getCodec:function(he,Le,Ve){var Fe=null;if(he&&he.Representation_asArray&&he.Representation_asArray.length>0){var Pe=ye(Le)&&Le>=0&&Le<he.Representation_asArray.length?he.Representation_asArray[Le]:he.Representation_asArray[0];Pe&&(Fe=Pe.mimeType+';codecs="'+Pe.codecs+'"',Ve&&Pe.width!==void 0&&(Fe+=';width="'+Pe.width+'";height="'+Pe.height+'"'))}return Fe&&(Fe=Fe.replace(/\sprofiles=[^;]*/g,"")),Fe},getSelectionPriority:function(he){try{var Le=he&&he.selectionPriority!==void 0?parseInt(he.selectionPriority):1;return isNaN(Le)?1:Le}catch{return 1}},getMimeType:function(he){return he&&he.Representation_asArray&&he.Representation_asArray.length>0?he.Representation_asArray[0].mimeType:null},getKID:function(he){return he&&he.hasOwnProperty(c.Z.CENC_DEFAULT_KID)?he[c.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(he){if(!he||!Array.isArray(he.Label_asArray))return[];for(var Le=[],Ve=0;Ve<he.Label_asArray.length;Ve++)Le.push({lang:he.Label_asArray[Ve].lang,text:he.Label_asArray[Ve].__text||he.Label_asArray[Ve]});return Le},getContentProtectionData:function(he){return he&&he.hasOwnProperty(c.Z.CONTENTPROTECTION_ASARRAY)&&he.ContentProtection_asArray.length!==0?he.ContentProtection_asArray:null},getIsDynamic:ot,getId:function(he){return he&&he[c.Z.ID]||null},hasProfile:function(he,Le){var Ve=!1;return he&&he.profiles&&he.profiles.length>0&&(Ve=he.profiles.indexOf(Le)!==-1),Ve},getDuration:function(he){return he&&he.hasOwnProperty(c.Z.MEDIA_PRESENTATION_DURATION)?he.mediaPresentationDuration:he&&he.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(he){return he&&he.bandwidth?he.bandwidth:NaN},getManifestUpdatePeriod:function(he){var Le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ve=NaN;return he&&he.hasOwnProperty(c.Z.MINIMUM_UPDATE_PERIOD)&&(Ve=he.minimumUpdatePeriod),isNaN(Ve)?Ve:Math.max(Ve-Le,1)},getPublishTime:function(he){return he&&he.hasOwnProperty(c.Z.PUBLISH_TIME)?new Date(he[c.Z.PUBLISH_TIME]):null},getRepresentationCount:function(he){return he&&Array.isArray(he.Representation_asArray)?he.Representation_asArray.length:0},getBitrateListForAdaptation:function(he){var Le=We(he);return(Le&&Array.isArray(Le.Representation_asArray)?Le.Representation_asArray:[]).map(function(Ve){return{bandwidth:Ve.bandwidth,width:Ve.width||0,height:Ve.height||0,scanType:Ve.scanType||null,id:Ve.id||null}})},getRepresentationFor:function(he,Le){return Le&&Le.Representation_asArray&&Le.Representation_asArray.length>0&&ye(he)?Le.Representation_asArray[he]:null},getRepresentationsForAdaptation:function(he){var Le,Ve,Fe,Pe,Ne=[],lt=function(At){if(At&&At.period&&ye(At.period.index)){var Ot=At.period.mpd.manifest.Period_asArray[At.period.index];if(Ot&&Ot.AdaptationSet_asArray&&ye(At.index))return We(Ot.AdaptationSet_asArray[At.index])}}(he);if(lt&&lt.Representation_asArray){if(he&&he.period&&ye(he.period.index)){var $e=tt(he.period.mpd.manifest);$e&&(Ve=$e[0])}for(var xe=0,et=lt.Representation_asArray.length;xe<et;++xe){var Et=lt.Representation_asArray[xe],kt=new Xn;if(kt.index=xe,kt.adaptation=he,Et.hasOwnProperty(c.Z.ID)&&(kt.id=Et.id),Et.hasOwnProperty(c.Z.CODECS)&&(kt.codecs=Et.codecs),Et.hasOwnProperty(c.Z.MIME_TYPE)&&(kt.mimeType=Et[c.Z.MIME_TYPE]),Et.hasOwnProperty(c.Z.CODEC_PRIVATE_DATA)&&(kt.codecPrivateData=Et.codecPrivateData),Et.hasOwnProperty(c.Z.BANDWITH)&&(kt.bandwidth=Et.bandwidth),Et.hasOwnProperty(c.Z.WIDTH)&&(kt.width=Et.width),Et.hasOwnProperty(c.Z.HEIGHT)&&(kt.height=Et.height),Et.hasOwnProperty(c.Z.SCAN_TYPE)&&(kt.scanType=Et.scanType),Et.hasOwnProperty(c.Z.MAX_PLAYOUT_RATE)&&(kt.maxPlayoutRate=Et.maxPlayoutRate),Et.hasOwnProperty(c.Z.SEGMENT_BASE)?(Le=Et.SegmentBase,kt.segmentInfoType=c.Z.SEGMENT_BASE):Et.hasOwnProperty(c.Z.SEGMENT_LIST)?(Le=Et.SegmentList).hasOwnProperty(c.Z.SEGMENT_TIMELINE)?kt.segmentInfoType=c.Z.SEGMENT_TIMELINE:kt.segmentInfoType=c.Z.SEGMENT_LIST:Et.hasOwnProperty(c.Z.SEGMENT_TEMPLATE)?((Le=Et.SegmentTemplate).hasOwnProperty(c.Z.SEGMENT_TIMELINE)?kt.segmentInfoType=c.Z.SEGMENT_TIMELINE:kt.segmentInfoType=c.Z.SEGMENT_TEMPLATE,Le.hasOwnProperty(c.Z.INITIALIZATION_MINUS)&&(kt.initialization=Le.initialization.split("$Bandwidth$").join(Et.bandwidth).split("$RepresentationID$").join(Et.id))):kt.segmentInfoType=c.Z.BASE_URL,kt.essentialProperties=ct(Et),Le){if(Le.hasOwnProperty(c.Z.INITIALIZATION)){var Mt=Le.Initialization;Mt.hasOwnProperty(c.Z.SOURCE_URL)&&(kt.initialization=Mt.sourceURL),Mt.hasOwnProperty(c.Z.RANGE)&&(kt.range=Mt.range)}else Be(lt)&&je(lt)&&lt.mimeType&&lt.mimeType.indexOf("application/mp4")===-1&&(kt.range=0);Le.hasOwnProperty(c.Z.TIMESCALE)&&(kt.timescale=Le.timescale),Le.hasOwnProperty(c.Z.DURATION)?kt.segmentDuration=Le.duration/kt.timescale:Et.hasOwnProperty(c.Z.SEGMENT_TEMPLATE)&&(Le=Et.SegmentTemplate).hasOwnProperty(c.Z.SEGMENT_TIMELINE)&&(kt.segmentDuration=mt(Le.SegmentTimeline)/kt.timescale),Le.hasOwnProperty(c.Z.MEDIA)&&(kt.media=Le.media),Le.hasOwnProperty(c.Z.START_NUMBER)&&(kt.startNumber=Le.startNumber),Le.hasOwnProperty(c.Z.INDEX_RANGE)&&(kt.indexRange=Le.indexRange),Le.hasOwnProperty(c.Z.PRESENTATION_TIME_OFFSET)&&(kt.presentationTimeOffset=Le.presentationTimeOffset/kt.timescale),Le.hasOwnProperty(c.Z.AVAILABILITY_TIME_OFFSET)?kt.availabilityTimeOffset=Le.availabilityTimeOffset:Ve&&Ve.availabilityTimeOffset!==void 0&&(kt.availabilityTimeOffset=Ve.availabilityTimeOffset),Le.hasOwnProperty(c.Z.AVAILABILITY_TIME_COMPLETE)?kt.availabilityTimeComplete=Le.availabilityTimeComplete!=="false":Ve&&Ve.availabilityTimeComplete!==void 0&&(kt.availabilityTimeComplete=Ve.availabilityTimeComplete)}kt.MSETimeOffset=(Pe=(Fe=kt).presentationTimeOffset,Fe.adaptation.period.start-Pe),kt.path=[he.period.index,he.index,xe],Ne.push(kt)}}return Ne},getAdaptationsForPeriod:function(he){var Le,Ve,Fe,Pe=he&&ye(he.index)?he.mpd.manifest.Period_asArray[he.index]:null,Ne=[];if(Pe&&Pe.AdaptationSet_asArray)for(Fe=0;Fe<Pe.AdaptationSet_asArray.length;Fe++)Ve=Pe.AdaptationSet_asArray[Fe],Le=new on,Ve.hasOwnProperty(c.Z.ID)&&(Le.id=Ve.id),Le.index=Fe,Le.period=he,Oe(Ve,l.Z.MUXED)?Le.type=l.Z.MUXED:Oe(Ve,l.Z.AUDIO)?Le.type=l.Z.AUDIO:He(Ve)?Le.type=l.Z.VIDEO:Be(Ve)?Le.type=l.Z.TEXT:De(Ve)?Le.type=l.Z.IMAGE:ie.warn("Unknown Adaptation stream type"),Ne.push(Le);return Ne},getRegularPeriods:function(he){var Le,Ve,Fe=!!he&&ot(he.manifest),Pe=[],Ne=null,lt=null,$e=null,xe=null;for(Ve=0,Le=he&&he.manifest&&he.manifest.Period_asArray?he.manifest.Period_asArray.length:0;Ve<Le;Ve++)(lt=he.manifest.Period_asArray[Ve]).hasOwnProperty(c.Z.START)?(xe=new Bn).start=lt.start:Ne!==null&&Ne.hasOwnProperty(c.Z.DURATION)&&$e!==null?(xe=new Bn).start=parseFloat(($e.start+$e.duration).toFixed(5)):Ve!==0||Fe||((xe=new Bn).start=0),$e!==null&&isNaN($e.duration)&&(xe!==null?$e.duration=parseFloat((xe.start-$e.start).toFixed(5)):ie.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),xe!==null&&(xe.id=Me(lt,Ve),xe.index=Ve,xe.mpd=he,lt.hasOwnProperty(c.Z.DURATION)&&(xe.duration=lt.duration),$e&&($e.nextPeriodId=xe.id),Pe.push(xe),Ne=lt,$e=xe),lt=null,xe=null;return Pe.length===0||$e!==null&&isNaN($e.duration)&&($e.duration=parseFloat((function(et){(function(){if(!se||!se.hasOwnProperty("error"))throw new Error(l.Z.MISSING_CONFIG_ERROR)})();var Et,kt=ot(et.mpd.manifest);return et.mpd.manifest.mediaPresentationDuration?Et=et.mpd.manifest.mediaPresentationDuration:et.duration?Et=et.duration:kt?Et=Number.POSITIVE_INFINITY:se.error(new p.Z(U.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",et)),Et}($e)-$e.start).toFixed(5))),Pe},getMpd:function(he){var Le=new Rr;return he&&(Le.manifest=he,he.hasOwnProperty(c.Z.AVAILABILITY_START_TIME)?Le.availabilityStartTime=new Date(he.availabilityStartTime.getTime()):he.loadedTime&&(Le.availabilityStartTime=new Date(he.loadedTime.getTime())),he.hasOwnProperty(c.Z.AVAILABILITY_END_TIME)&&(Le.availabilityEndTime=new Date(he.availabilityEndTime.getTime())),he.hasOwnProperty(c.Z.MINIMUM_UPDATE_PERIOD)&&(Le.minimumUpdatePeriod=he.minimumUpdatePeriod),he.hasOwnProperty(c.Z.MEDIA_PRESENTATION_DURATION)&&(Le.mediaPresentationDuration=he.mediaPresentationDuration),he.hasOwnProperty(c.Z.SUGGESTED_PRESENTATION_DELAY)&&(Le.suggestedPresentationDelay=he.suggestedPresentationDelay),he.hasOwnProperty(c.Z.TIMESHIFT_BUFFER_DEPTH)&&(Le.timeShiftBufferDepth=he.timeShiftBufferDepth),he.hasOwnProperty(c.Z.MAX_SEGMENT_DURATION)&&(Le.maxSegmentDuration=he.maxSegmentDuration),he.hasOwnProperty(c.Z.PUBLISH_TIME)&&(Le.publishTime=new Date(he.publishTime))),Le},getEventsForPeriod:function(he){var Le,Ve,Fe=he&&he.mpd&&he.mpd.manifest?he.mpd.manifest:null,Pe=Fe?Fe.Period_asArray:null,Ne=Pe&&he&&ye(he.index)?Pe[he.index].EventStream_asArray:null,lt=[];if(Ne)for(Le=0;Le<Ne.length;Le++){var $e=new $t;if($e.period=he,$e.timescale=1,!Ne[Le].hasOwnProperty(l.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for($e.schemeIdUri=Ne[Le][l.Z.SCHEME_ID_URI],Ne[Le].hasOwnProperty(c.Z.TIMESCALE)&&($e.timescale=Ne[Le][c.Z.TIMESCALE]),Ne[Le].hasOwnProperty(c.Z.VALUE)&&($e.value=Ne[Le][c.Z.VALUE]),Ne[Le].hasOwnProperty(c.Z.PRESENTATION_TIME_OFFSET)&&($e.presentationTimeOffset=Ne[Le][c.Z.PRESENTATION_TIME_OFFSET]),Ve=0;Ne[Le].Event_asArray&&Ve<Ne[Le].Event_asArray.length;Ve++){var xe=Ne[Le].Event_asArray[Ve],et=new Ir;et.presentationTime=0,et.eventStream=$e,xe.hasOwnProperty(c.Z.PRESENTATION_TIME)&&(et.presentationTime=xe.presentationTime);var Et=$e.presentationTimeOffset?$e.presentationTimeOffset/$e.timescale:0;et.calculatedPresentationTime=et.presentationTime/$e.timescale+he.start-Et,xe.hasOwnProperty(c.Z.DURATION)&&(et.duration=xe.duration/$e.timescale),xe.hasOwnProperty(c.Z.ID)?et.id=xe.id:et.id=null,xe.Signal&&xe.Signal.Binary?et.messageData=Re.decodeArray(xe.Signal.Binary.toString()):et.messageData=xe.messageData||xe.__cdata||xe.__text,lt.push(et)}}return lt},getEssentialPropertiesForRepresentation:ct,getEventStreamForAdaptationSet:function(he,Le,Ve){var Fe,Pe,Ne;return he&&he.Period_asArray&&Le&&Le.period&&ye(Le.period.index)&&(Pe=he.Period_asArray[Le.period.index])&&Pe.AdaptationSet_asArray&&ye(Le.index)&&(Ne=Pe.AdaptationSet_asArray[Le.index])&&(Fe=Ne.InbandEventStream_asArray),st(Fe,null,Ve)},getEventStreamForRepresentation:function(he,Le,Ve){var Fe,Pe,Ne,lt;return he&&he.Period_asArray&&Le&&Le.adaptation&&Le.adaptation.period&&ye(Le.adaptation.period.index)&&(Pe=he.Period_asArray[Le.adaptation.period.index])&&Pe.AdaptationSet_asArray&&ye(Le.adaptation.index)&&(Ne=Pe.AdaptationSet_asArray[Le.adaptation.index])&&Ne.Representation_asArray&&ye(Le.index)&&(lt=Ne.Representation_asArray[Le.index])&&(Fe=lt.InbandEventStream_asArray),st(Fe,Le,Ve)},getUTCTimingSources:function(he){var Le=ot(he),Ve=!!he&&he.hasOwnProperty(c.Z.AVAILABILITY_START_TIME),Fe=he?he.UTCTiming_asArray:null,Pe=[];return(Le||Ve)&&Fe&&Fe.forEach(function(Ne){var lt=new Nr.Z;Ne.hasOwnProperty(l.Z.SCHEME_ID_URI)&&(lt.schemeIdUri=Ne.schemeIdUri,Ne.hasOwnProperty(c.Z.VALUE)&&(lt.value=Ne.value.toString(),Pe.push(lt)))}),Pe},getBaseURLsFromElement:tt,getRepresentationSortFunction:function(){return function(he,Le){return he.bandwidth-Le.bandwidth}},getContentSteering:function(he){if(he&&he.hasOwnProperty(c.Z.CONTENT_STEERING_AS_ARRAY))return ft(he[c.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(he){return he&&he.hasOwnProperty(c.Z.LOCATION_AS_ARRAY)?he[c.Z.LOCATION_AS_ARRAY].map(function(Le){var Ve=Le.__text||Le,Fe=Le.hasOwnProperty(c.Z.SERVICE_LOCATION)?Le[c.Z.SERVICE_LOCATION]:null;return new fn(Ve,Fe)}):[]},getPatchLocation:function(he){return he&&he.hasOwnProperty(c.Z.PATCH_LOCATION_AS_ARRAY)?he[c.Z.PATCH_LOCATION_AS_ARRAY].map(function(Le){var Ve=Le.__text||Le,Fe=Le.hasOwnProperty(c.Z.SERVICE_LOCATION)?Le[c.Z.SERVICE_LOCATION]:null,Pe=Le.hasOwnProperty(c.Z.TTL)?1e3*parseFloat(Le[c.Z.TTL]):NaN;return new ht(Ve,Fe,Pe)}):[]},getSuggestedPresentationDelay:function(he){return he&&he.hasOwnProperty(c.Z.SUGGESTED_PRESENTATION_DELAY)?he.suggestedPresentationDelay:null},getAvailabilityStartTime:function(he){return he&&he.hasOwnProperty(c.Z.AVAILABILITY_START_TIME)&&he.availabilityStartTime!==null?he.availabilityStartTime.getTime():null},getServiceDescriptions:function(he){var Le=[];if(he&&he.hasOwnProperty(c.Z.SERVICE_DESCRIPTION)){var Ve,Fe=jn(he.ServiceDescription_asArray);try{for(Fe.s();!(Ve=Fe.n()).done;){var Pe=Ve.value,Ne=null,lt=null,$e=null,xe=null,et=null,Et=null,kt=null;for(var Mt in Pe)Pe.hasOwnProperty(Mt)&&(Mt===c.Z.ID?Ne=Pe[Mt]:Mt===c.Z.SERVICE_DESCRIPTION_SCOPE?lt=Pe[Mt].schemeIdUri:Mt===c.Z.SERVICE_DESCRIPTION_LATENCY?$e={target:parseInt(Pe[Mt].target),max:parseInt(Pe[Mt].max),min:parseInt(Pe[Mt].min),referenceId:parseInt(Pe[Mt].referenceId)}:Mt===c.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?xe={max:parseFloat(Pe[Mt].max),min:parseFloat(Pe[Mt].min)}:Mt===c.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?et={mediaType:Pe[Mt].mediaType,max:parseInt(Pe[Mt].max),min:parseInt(Pe[Mt].min),target:parseInt(Pe[Mt].target),type:Pe[Mt].type,maxQualityDifference:parseInt(Pe[Mt].maxQualityDifference)}:Mt===c.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?Et={mediaType:Pe[Mt].mediaType,max:parseInt(Pe[Mt].max),min:parseInt(Pe[Mt].min),target:parseInt(Pe[Mt].target)}:Mt===c.Z.CONTENT_STEERING&&(kt=ft(Pe[Mt])));Le.push({id:Ne,schemeIdUri:lt,latency:$e,playbackRate:xe,operatingQuality:et,operatingBandwidth:Et,contentSteering:kt})}}catch(At){Fe.e(At)}finally{Fe.f()}}return Le},getSegmentAlignment:function(he){return!(!he||!he.hasOwnProperty(c.Z.SEGMENT_ALIGNMENT))&&he[c.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(he){return!(!he||!he.hasOwnProperty(c.Z.SUB_SEGMENT_ALIGNMENT))&&he[c.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(he){var Le={};if(he&&he.hasOwnProperty(c.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var Ve,Fe=jn(he.SupplementalProperty_asArray);try{for(Fe.s();!(Ve=Fe.n()).done;){var Pe=Ve.value;Pe.hasOwnProperty(l.Z.SCHEME_ID_URI)&&Pe.hasOwnProperty(c.Z.VALUE)&&(Le[Pe[l.Z.SCHEME_ID_URI]]=Pe[c.Z.VALUE])}}catch(Ne){Fe.e(Ne)}finally{Fe.f()}}return Le},getSupplementalPropertiesAsArrayForAdaptation:function(he){return he&&he.hasOwnProperty(c.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&he.SupplementalProperty_asArray.length?he.SupplementalProperty_asArray.map(function(Le){return new _t().init(Le)}):[]},getSupplementalPropertiesForRepresentation:function(he){var Le={};if(he&&he.hasOwnProperty(c.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var Ve,Fe=jn(he.SupplementalProperty_asArray);try{for(Fe.s();!(Ve=Fe.n()).done;){var Pe=Ve.value;Pe.hasOwnProperty(l.Z.SCHEME_ID_URI)&&Pe.hasOwnProperty(c.Z.VALUE)&&(Le[Pe[l.Z.SCHEME_ID_URI]]=Pe[c.Z.VALUE])}}catch(Ne){Fe.e(Ne)}finally{Fe.f()}}return Le},getSupplementalPropertiesAsArrayForRepresentation:function(he){return he&&he.hasOwnProperty(c.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&he.SupplementalProperty_asArray.length?he.SupplementalProperty_asArray.map(function(Le){return new _t().init(Le)}):[]},setConfig:function(he){he&&(he.errHandler&&(se=he.errHandler),he.BASE64&&(Re=he.BASE64))}},ie=(0,d.Z)(Ae).getInstance().getLogger(ae),ae}Sr.__dashjs_factory_name="DashManifestModel";const Zr=g.Z.getSingletonFactory(Sr);var zn=I(703);function gn(ae,ie){var se;if(typeof Symbol>"u"||ae[Symbol.iterator]==null){if(Array.isArray(ae)||(se=function(je,He){if(je){if(typeof je=="string")return En(je,He);var Be=Object.prototype.toString.call(je).slice(8,-1);return Be==="Object"&&je.constructor&&(Be=je.constructor.name),Be==="Map"||Be==="Set"?Array.from(je):Be==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Be)?En(je,He):void 0}}(ae))||ie&&ae&&typeof ae.length=="number"){se&&(ae=se);var Re=0,Ae=function(){};return{s:Ae,n:function(){return Re>=ae.length?{done:!0}:{done:!1,value:ae[Re++]}},e:function(je){throw je},f:Ae}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ve,ye=!0,Oe=!1;return{s:function(){se=ae[Symbol.iterator]()},n:function(){var je=se.next();return ye=je.done,je},e:function(je){Oe=!0,ve=je},f:function(){try{ye||se.return==null||se.return()}finally{if(Oe)throw ve}}}}function En(ae,ie){(ie==null||ie>ae.length)&&(ie=ae.length);for(var se=0,Re=new Array(ie);se<ie;se++)Re[se]=ae[se];return Re}function Nn(){var ae,ie,se,Re,Ae,ve,ye,Oe,je,He,Be=this.context,De=(0,y.Z)(Be).getInstance(),We=(0,G.Z)(Be).getInstance();function qe(){se={pr:1,nor:null,st:null,sf:null,sid:"".concat(zn.Z.generateUuid()),cid:null},je={},Oe={},He={},ot()}function vt(){ot()}function ot(){if(ve){var Pe=ve.getStreamController();if(Pe&&typeof Pe.getActiveStream=="function"){var Ne=Pe.getActiveStream();Ne&&(ye=Ne.getProcessors())}}}function ct(Pe,Ne){var lt,$e={},xe=gn(Ne);try{for(xe.s();!(lt=xe.n()).done;){var et=lt.value;Pe[et]&&($e[et]=Pe[et])}}catch(Et){xe.e(Et)}finally{xe.f()}return $e}function mt(Pe){var Ne=We.get().streaming.cmcd.enabledKeys;return Pe.filter(function(lt){return Ne.includes(lt)})}function Me(Pe){try{return Pe.type===ee.w.MPD_TYPE?((lt=st()).ot="m",lt):Pe.type===ee.w.MEDIA_SEGMENT_TYPE?(Ne=Pe.mediaType,He.hasOwnProperty(Ne)||(He[Ne]=!1),Oe.hasOwnProperty(Ne)||(Oe[Ne]=!1),je.hasOwnProperty(Ne)||(je[Ne]=!1),function($e){var xe,et=st(),Et=function(Cn){try{var mn=Cn.quality,St=Cn.mediaInfo.bitrateList;return parseInt(St[mn].bandwidth/1e3)}catch{return null}}($e),kt=function(Cn){try{return isNaN(Cn.duration)?null:Math.round(1e3*Cn.duration)}catch{return null}}($e),Mt=function(Cn){try{return 100*parseInt(Re.getThroughputHistory().getSafeAverageThroughput(Cn)/100)}catch{return null}}($e.mediaType),At=function(Cn){try{var mn=se.pr,St=Ae.getCurrentBufferLevel(Cn);return isNaN(mn)||isNaN(St)?null:100*parseInt(St/mn*10)}catch{return null}}($e.mediaType),Ot=tt($e.mediaType),Kt=function(Cn){try{var mn=Re.getTopBitrateInfoFor(Cn);return Math.round(mn.bitrate/1e3)}catch{return null}}($e.mediaType),_n=se.pr,Jt=function(Cn){if(ye&&ye.length!==0){var mn,St=gn(ye);try{for(St.s();!(mn=St.n()).done;){var gt=mn.value;if(gt.getType()===Cn)return gt.probeNextRequest()}}catch(Rt){St.e(Rt)}finally{St.f()}}}($e.mediaType);$e.mediaType===l.Z.VIDEO&&(xe="v"),$e.mediaType===l.Z.AUDIO&&(xe="a"),$e.mediaType===l.Z.TEXT&&(xe=$e.mediaInfo.mimeType==="application/mp4"?"tt":"c");var un=We.get().streaming.cmcd.rtp;return un||(un=function(Cn){var mn=ve.getPlaybackRate();mn||(mn=1);var St=Cn.quality,gt=Cn.mediaType,Rt=Cn.mediaInfo,It=Cn.duration,xt=tt(gt);xt===0&&(xt=500);var zt=Rt.bitrateList[St].bandwidth*It/1e3/(xt/mn/1e3),qt=We.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(We.get().streaming.cmcd.rtpSafetyFactor)?We.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(zt*qt/100)+1)}($e)),et.rtp=un,Jt&&($e.url!==Jt.url?et.nor=encodeURIComponent(zn.Z.getRelativeUrl($e.url,Jt.url)):Jt.range&&(et.nrr=Jt.range)),Et&&(et.br=Et),xe&&(et.ot=xe),isNaN(kt)||(et.d=kt),isNaN(Mt)||(et.mtp=Mt),isNaN(At)||(et.dl=At),isNaN(Ot)||(et.bl=Ot),isNaN(Kt)||(et.tb=Kt),isNaN(_n)||_n===1||(et.pr=_n),je[$e.mediaType]&&(et.bs=!0,je[$e.mediaType]=!1),!Oe[$e.mediaType]&&He[$e.mediaType]||(et.su=!0,Oe[$e.mediaType]=!1,He[$e.mediaType]=!0),et}(Pe)):Pe.type===ee.w.INIT_SEGMENT_TYPE?function(){var $e=st();return $e.ot="i",$e.su=!0,$e}():Pe.type===ee.w.OTHER_TYPE||Pe.type===ee.w.XLINK_EXPANSION_TYPE?function(){var $e=st();return $e.ot="o",$e}():Pe.type===ee.w.LICENSE?function($e){var xe=st();return xe.ot="k",xe}():null}catch{return null}var Ne,lt}function st(){var Pe={},Ne=We.get().streaming.cmcd.cid?We.get().streaming.cmcd.cid:se.cid;return Pe.v=1,Pe.sid=We.get().streaming.cmcd.sid?We.get().streaming.cmcd.sid:se.sid,Pe.sid="".concat(Pe.sid),Ne&&(Pe.cid="".concat(Ne)),isNaN(se.pr)||se.pr===1||se.pr===null||(Pe.pr=se.pr),se.st&&(Pe.st=se.st),se.sf&&(Pe.sf=se.sf),Pe}function tt(Pe){try{var Ne=Ae.getCurrentBufferLevel(Pe);return isNaN(Ne)?null:100*parseInt(10*Ne)}catch{return null}}function ft(Pe){try{se.pr=Pe.playbackRate}catch{}}function he(Pe){try{var Ne=ae.getIsDynamic(Pe.data)?"l":"v",lt=Pe.protocol&&Pe.protocol==="MSS"?"s":"d";se.st="".concat(Ne),se.sf="".concat(lt)}catch{}}function Le(Pe){try{Pe.state&&Pe.mediaType&&Pe.state===r.Z.BUFFER_EMPTY&&(je[Pe.mediaType]||(je[Pe.mediaType]=!0),Oe[Pe.mediaType]||(Oe[Pe.mediaType]=!0))}catch{}}function Ve(){for(var Pe in je)je.hasOwnProperty(Pe)&&(je[Pe]=!0);for(var Ne in Oe)Oe.hasOwnProperty(Ne)&&(Oe[Ne]=!0)}function Fe(Pe){try{if(!Pe)return null;var Ne=Object.keys(Pe).sort(function(xe,et){return xe.localeCompare(et)}),lt=Ne.length,$e=Ne.reduce(function(xe,et,Et){return et==="v"&&Pe[et]===1||(typeof Pe[et]=="string"&&et!=="ot"&&et!=="sf"&&et!=="st"?xe+="".concat(et,"=").concat(JSON.stringify(Pe[et])):xe+="".concat(et,"=").concat(Pe[et]),Et<lt-1&&(xe+=",")),xe},"");return($e=$e.replace(/=true/g,"")).replace(/,\s*$/,"")}catch{return null}}return ie={getQueryParameter:function(Pe){try{if(We.get().streaming.cmcd&&We.get().streaming.cmcd.enabled){var Ne=Me(Pe),lt=function(xe){try{var et=We.get().streaming.cmcd.enabledKeys;return Object.keys(xe).filter(function(Et){return et.includes(Et)}).reduce(function(Et,kt){return Et[kt]=xe[kt],Et},{})}catch{return xe}}(Ne),$e=Fe(lt);return De.trigger(hn.Z.CMCD_DATA_GENERATED,{url:Pe.url,mediaType:Pe.mediaType,cmcdData:Ne,cmcdString:$e}),{key:"CMCD",value:$e}}return null}catch{return null}},getHeaderParameters:function(Pe){try{if(We.get().streaming.cmcd&&We.get().streaming.cmcd.enabled){var Ne=Me(Pe),lt=ct(Ne,mt(["br","d","ot","tb"])),$e=ct(Ne,mt(["bl","dl","mtp","nor","nrr","su"])),xe=ct(Ne,mt(["bs","rtp"])),et=ct(Ne,mt(["cid","pr","sf","sid","st","v"])),Et={"CMCD-Object":Fe(lt),"CMCD-Request":Fe($e),"CMCD-Status":Fe(xe),"CMCD-Session":Fe(et)};return De.trigger(hn.Z.CMCD_DATA_GENERATED,{url:Pe.url,mediaType:Pe.mediaType,cmcdData:Ne,headers:Et}),Et}return null}catch{return null}},setConfig:function(Pe){Pe&&(Pe.abrController&&(Re=Pe.abrController),Pe.dashMetrics&&(Ae=Pe.dashMetrics),Pe.playbackController&&(ve=Pe.playbackController))},reset:function(){De.off(r.Z.PLAYBACK_RATE_CHANGED,ft,this),De.off(r.Z.MANIFEST_LOADED,he,this),De.off(r.Z.BUFFER_LEVEL_STATE_CHANGED,Le,ie),De.off(r.Z.PLAYBACK_SEEKED,Ve,ie),qe()},initialize:function(){De.on(r.Z.PLAYBACK_RATE_CHANGED,ft,ie),De.on(r.Z.MANIFEST_LOADED,he,ie),De.on(r.Z.BUFFER_LEVEL_STATE_CHANGED,Le,ie),De.on(r.Z.PLAYBACK_SEEKED,Ve,ie),De.on(r.Z.PERIOD_SWITCH_COMPLETED,vt,ie)}},ae=Zr(Be).getInstance(),qe(),ie}Nn.__dashjs_factory_name="CmcdModel";const pr=g.Z.getSingletonFactory(Nn);function Or(ae){return Or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},Or(ae)}function ci(ae,ie){ci=function(Oe,je){return new ve(Oe,void 0,je)};var se=di(RegExp),Re=RegExp.prototype,Ae=new WeakMap;function ve(Oe,je,He){var Be=se.call(this,Oe,je);return Ae.set(Be,He||Ae.get(Oe)),Be}function ye(Oe,je){var He=Ae.get(je);return Object.keys(He).reduce(function(Be,De){return Be[De]=Oe[He[De]],Be},Object.create(null))}return function(Oe,je){if(typeof je!="function"&&je!==null)throw new TypeError("Super expression must either be null or a function");Oe.prototype=Object.create(je&&je.prototype,{constructor:{value:Oe,writable:!0,configurable:!0}}),je&&Ni(Oe,je)}(ve,se),ve.prototype.exec=function(Oe){var je=Re.exec.call(this,Oe);return je&&(je.groups=ye(je,this)),je},ve.prototype[Symbol.replace]=function(Oe,je){if(typeof je=="string"){var He=Ae.get(this);return Re[Symbol.replace].call(this,Oe,je.replace(/\$<([^>]+)>/g,function(De,We){return"$"+He[We]}))}if(typeof je=="function"){var Be=this;return Re[Symbol.replace].call(this,Oe,function(){var De=[];return De.push.apply(De,arguments),Or(De[De.length-1])!=="object"&&De.push(ye(De,Be)),je.apply(this,De)})}return Re[Symbol.replace].call(this,Oe,je)},ci.apply(this,arguments)}function di(ae){var ie=typeof Map=="function"?new Map:void 0;return di=function(se){if(se===null||(Re=se,Function.toString.call(Re).indexOf("[native code]")===-1))return se;var Re;if(typeof se!="function")throw new TypeError("Super expression must either be null or a function");if(ie!==void 0){if(ie.has(se))return ie.get(se);ie.set(se,Ae)}function Ae(){return Fi(se,arguments,Ui(this).constructor)}return Ae.prototype=Object.create(se.prototype,{constructor:{value:Ae,enumerable:!1,writable:!0,configurable:!0}}),Ni(Ae,se)},di(ae)}function Fi(ae,ie,se){return Fi=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(Re,Ae,ve){var ye=[null];ye.push.apply(ye,Ae);var Oe=new(Function.bind.apply(Re,ye));return ve&&Ni(Oe,ve.prototype),Oe},Fi.apply(null,arguments)}function Ni(ae,ie){return Ni=Object.setPrototypeOf||function(se,Re){return se.__proto__=Re,se},Ni(ae,ie)}function Ui(ae){return Ui=Object.setPrototypeOf?Object.getPrototypeOf:function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},Ui(ae)}var Ri="static",_i="dynamic",ki="cmsd-",Za=ki+Ri,Oa=ki+_i,Bi="stream",Tr=["mb","st","sf","v"],ji={video:"v",audio:"a",text:"tt",stream:Bi},fo=/^[-0-9]/;function xi(){var ae,ie,se,Re,Ae=this.context,ve=(0,y.Z)(Ae).getInstance();function ye(){se={},Re={}}function Oe(qe){qe&&Object.keys(qe).forEach(function(vt){Tr.includes(vt)||delete qe[vt]})}function je(qe){return!qe||qe.toLowerCase()!=="false"&&(fo.test(qe)?parseInt(qe,10):qe.replace(/["]+/g,""))}function He(qe){try{for(var vt={},ot=qe.split(","),ct=0;ct<ot.length;ct++){var mt=ot[ct].split("="),Me=mt[0],st=je(mt[1]);vt[Me]=st}return vt}catch(tt){ie.error("Failed to parse CMSD-Static response header value:",tt)}}function Be(qe){try{for(var vt={},ot=qe.split(","),ct=ot[ot.length-1].split(";"),mt=1;mt<ct.length;mt++){var Me=ct[mt].split("="),st=Me[0],tt=je(Me[1]);vt[st]=tt}return vt}catch(ft){return ie.error("Failed to parse CMSD-Dynamic response header value:",ft),[]}}function De(qe){return ji[qe]||"o"}function We(qe,vt,ot){var ct=qe===Ri?se:Re,mt=ct[vt]||{},Me=ct[Bi]||{};return mt[ot]||Me[ot]}return ae={setConfig:function(){},initialize:function(){},reset:function(){ye()},parseResponseHeaders:function(qe,vt){for(var ot=null,ct=null,mt=qe.split(`\r
`),Me=mt.length-1;Me>=0;Me--){var st=mt[Me].match(ci(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(st&&st.groups){var tt=st.groups.key.toLowerCase(),ft=st.groups.value;switch(tt){case Za:ot=He(ft),ve.trigger(i.Z.CMSD_STATIC_HEADER,ot);break;case Oa:ct||(ct=Be(ft))}}}var he=Bi;return ot&&ot.ot?he=ot.ot:vt&&(he=De(vt)),Oe(se[he]),Oe(Re[he]),ot&&(se[he]=Object.assign(se[he]||{},ot)),ct&&(Re[he]=Object.assign(Re[he]||{},ct)),{static:ot,dynamic:ct}},getMaxBitrate:function(qe){var vt=De(qe);return We(_i,vt,"mb")||-1},getEstimatedThroughput:function(qe){var vt=De(qe);return We(_i,vt,"etp")||null},getResponseDelay:function(qe){var vt=De(qe);return We(_i,vt,"rd")||null},getRoundTripTime:function(qe){var vt=De(qe);return We(_i,vt,"rtt")||null}},ie=(0,d.Z)(Ae).getInstance().getLogger(ae),ye(),ae}xi.__dashjs_factory_name="CmsdModel";const bo=g.Z.getSingletonFactory(xi);function ho(){var ae,ie,se=this.context,Re={};function Ae(){ie=(0,d.Z)(se).getInstance().getLogger(ae)}function ve(Oe){for(var je={},He=0,Be=0,De=0,We=0,qe=Oe.length,vt=0;vt<qe;++vt)He+=Oe[vt].chunkDownloadTimeRelativeMS,Be+=Oe[vt].bufferLevel,De+=Oe[vt].chunkDownloadTimeRelativeMS*Oe[vt].bufferLevel,We+=Oe[vt].chunkDownloadTimeRelativeMS*Oe[vt].chunkDownloadTimeRelativeMS;return je.m=(De-He*Be/qe)/(We-He*He/qe),je.b=Be/qe-je.m*He/qe,function(ot){return je.m*ot+je.b}}function ye(Oe){var je,He=!0,Be=Oe.reduce(function(De,We){return De+We.bufferLevelAtSegmentEnd},0)/Oe.length;return Oe.forEach(function(De){Math.abs(De.bufferLevelAtSegmentEnd/De.bufferLevelAtSegmentStart)<.95&&(He=!1),De.bufferLevelAtSegmentEnd/Be<.8&&(He=!1),je?je>De.bitrate&&(He=!1):je=De.bitrate}),He}return ae={setup:Ae,addMeasurement:function(Oe,je,He,Be,De){Oe&&Oe.mediaType&&!Re[Oe.mediaType]&&(Re[Oe.mediaType]=[]);var We=Oe.mediaInfo.bitrateList.find(function(qe){return qe.id===Oe.representationId});Re[Oe.mediaType].push({index:Oe.index,repId:Oe.representationId,mediaType:Oe.mediaType,requestTimeMS:Be,adjustedAvailabilityStartTimeMS:Oe.availabilityStartTime.getTime(),segDurationMS:1e3*Oe.duration,chunksDurationMS:He.reduce(function(qe,vt){return qe+vt.chunkDownloadDurationMS},0),segmentBytes:He.reduce(function(qe,vt){return qe+vt.chunkBytes},0),bitrate:We&&We.bandwidth,bitrateList:Oe.mediaInfo.bitrateList,chunkMeasurements:He,fetchDownloadDurationMS:je,throughputCapacityDelayMS:De,getEstimatedBufferLevel:ve(He.slice(1))}),Re[Oe.mediaType].length>10&&Re[Oe.mediaType].shift()},getThroughputCapacityDelayMS:function(Oe,je){var He=Re[Oe.mediaType]&&Re[Oe.mediaType].slice(-3);return!He||He.length<3?0:ye(He)?je/4>250?250:je/4:0},getEstimatedDownloadDurationMS:function(Oe){var je=Re[Oe.mediaType].slice(-1).pop(),He=Re[Oe.mediaType].slice(-3),Be=je.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;je.bufferLevelAtSegmentStart=je.getEstimatedBufferLevel(Be/2),je.bufferLevelAtSegmentEnd=je.getEstimatedBufferLevel(Be);var De=ye(He),We=De?.6:.8;if(je.isBufferStable&&1.05*je.segDurationMS<je.fetchDownloadDurationMS)return je.fetchDownloadDurationMS;if(!De||je.segDurationMS<je.fetchDownloadDurationMS||je.adjustedAvailabilityStartTimeMS<=je.requestTimeMS+je.throughputCapacityDelayMS-je.segDurationMS)return .8*je.fetchDownloadDurationMS;for(var qe=je.requestTimeMS+je.throughputCapacityDelayMS-je.adjustedAvailabilityStartTimeMS,vt=0,ot=0,ct=0,mt=0;mt<je.chunkMeasurements.length;mt++){var Me=je.chunkMeasurements[mt];if(qe<ot+Me.chunkDownloadDurationMS)break;ot+=Me.chunkDownloadDurationMS,vt+=Me.chunkBytes,ct++}if(qe<0&&ie.warn("request time was before adjusted availibitly start time"),vt&&ot&&ct>.2*je.chunkMeasurements.length){var st=vt/ot,tt=je.segmentBytes/st;return je.fetchDownloadDurationMS<tt?je.fetchDownloadDurationMS*We:tt*We}var ft=je.bitrate;return je.bitrateList.some(function(he){if(he.bandwidth>je.bitrate)return ft=he.bandwidth,!0}),ft===je.bitrate?je.fetchDownloadDurationMS*We:We*je.segmentBytes*8*1e3/ft}},Ae(),ae}ho.__dashjs_factory_name="LowLatencyThroughputModel";const ni=g.Z.getSingletonFactory(ho);var kn=I(5717);function nr(ae,ie,se){return ie in ae?Object.defineProperty(ae,ie,{value:se,enumerable:!0,configurable:!0,writable:!0}):ae[ie]=se,ae}function $r(ae){ae=ae||{};var ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We=this.context,qe=ae.errHandler,vt=ae.dashMetrics,ot=ae.mediaPlayerModel,ct=ae.requestModifier,mt=ae.boxParser,Me=ae.errors,st=ae.requestTimeout||0,tt=(0,y.Z)(We).getInstance(),ft=(0,G.Z)(We).getInstance();function he(Le,Ve){var Fe,Pe=Le.request,Ne=[],lt=!0,$e=!0,xe=new Date,et=xe,Et=0,kt=null,Mt=null;if(!ct||!vt||!qe)throw new Error("config object is not correct or missing");var At,Ot=function(xt){if($e=!1,Pe.requestStartDate=xe,Pe.requestEndDate=new Date,Pe.firstByteDate=Pe.firstByteDate||xe,Pe.fileLoaderType=Mt,!Pe.checkExistenceOnly){var zt=Fe.response?Fe.response.responseURL:null,qt=Fe.response?Fe.response.status:null,In=Fe.response&&Fe.response.getAllResponseHeaders?Fe.response.getAllResponseHeaders():Fe.response?Fe.response.responseHeaders:null,Pn=ft.get().streaming.cmsd&&ft.get().streaming.cmsd.enabled?Oe.parseResponseHeaders(In,Pe.mediaType):null;vt.addHttpRequest(Pe,zt,qt,In,xt?Ne:null,Pn),Pe.type===ee.w.MPD_TYPE&&(vt.addManifestUpdate(Pe),tt.trigger(i.Z.MANIFEST_LOADING_FINISHED,{request:Pe}))}},Kt=function(){if(kt&&(clearTimeout(kt),kt=null),se.indexOf(Fe)!==-1&&(se.splice(se.indexOf(Fe),1),$e))if(Ot(!1),Ve>0){try{ft.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&Pe.type===ee.w.MEDIA_SEGMENT_TYPE&&ot.getRetryAttemptsForType(ee.w.MEDIA_SEGMENT_TYPE)===Ve&&tt.trigger(i.Z.ATTEMPT_BACKGROUND_SYNC)}catch{}Ve--;var xt={config:Le};Ae.push(xt),xt.timeout=setTimeout(function(){Ae.indexOf(xt)!==-1&&(Ae.splice(Ae.indexOf(xt),1),he(Le,Ve))},ot.getRetryIntervalsForType(Pe.type))}else{if(Pe.type===ee.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;qe.error(new p.Z(ve[Pe.type],Pe.url+" is not available",{request:Pe,response:Fe.response})),Le.error&&Le.error(Pe,"error",Fe.response.statusText,Fe.response),Le.complete&&Le.complete(Pe,Fe.response.statusText)}};Pe.hasOwnProperty("availabilityTimeComplete")&&Pe.availabilityTimeComplete===!1&&window.fetch&&Pe.responseType==="arraybuffer"&&Pe.type===ee.w.MEDIA_SEGMENT_TYPE?((At=wn(We).create({requestModifier:ct,lowLatencyThroughputModel:He,boxParser:mt})).setup({dashMetrics:vt}),Mt=l.Z.FILE_LOADER_TYPES.FETCH):(At=(0,Tt.Z)(We).create({requestModifier:ct}),Mt=l.Z.FILE_LOADER_TYPES.XHR);var _n=null,Jt=ct.modifyRequestURL?ct.modifyRequestURL(Pe.url):Pe.url;if(ft.get().streaming.cmcd&&ft.get().streaming.cmcd.enabled){var un=ft.get().streaming.cmcd.mode;if(un===l.Z.CMCD_MODE_QUERY){var Cn=function(xt){try{var zt=[],qt=ye.getQueryParameter(xt);return qt&&zt.push(qt),zt}catch{return[]}}(Pe);Jt=zn.Z.addAditionalQueryParameterToUrl(Jt,Cn)}else un===l.Z.CMCD_MODE_HEADER&&(_n=ye.getHeaderParameters(Pe))}var mn=Pe.checkExistenceOnly?ee.w.HEAD:ee.w.GET,St=je.getXHRWithCredentialsForType(Pe.type);if(Pe.queryParams){var gt=Object.keys(Pe.queryParams).map(function(xt){return{key:xt,value:Pe.queryParams[xt]}});Jt=zn.Z.addAditionalQueryParameterToUrl(Jt,gt)}Pe.url=Jt,Fe={url:Jt,method:mn,withCredentials:St,request:Pe,onload:function(){Fe.response.status>=200&&Fe.response.status<=299&&(Ot(!0),Le.success&&Le.success(Fe.response.response,Fe.response.statusText,Fe.response.responseURL),Le.complete&&Le.complete(Pe,Fe.response.statusText))},onend:Kt,onerror:Kt,progress:function(xt){var zt=new Date;lt&&(lt=!1,(!xt.lengthComputable||xt.lengthComputable&&xt.total!==xt.loaded)&&(Pe.firstByteDate=zt)),xt.lengthComputable&&(Pe.bytesLoaded=xt.loaded,Pe.bytesTotal=xt.total),xt.noTrace||(Ne.push({s:et,d:xt.time?xt.time:zt.getTime()-et.getTime(),b:[xt.loaded?xt.loaded-Et:0]}),et=zt,Et=xt.loaded),kt&&(clearTimeout(kt),kt=null),ft.get().streaming.fragmentRequestProgressTimeout>0&&(kt=setTimeout(function(){Be.warn("Abort request "+Fe.url+" due to progress timeout"),Fe.response.onabort=null,Fe.loader.abort(Fe),Kt()},ft.get().streaming.fragmentRequestProgressTimeout)),Le.progress&&xt&&Le.progress(xt)},onabort:function(){kt&&(clearTimeout(kt),kt=null),Le.abort&&Le.abort(Pe)},ontimeout:function(xt){var zt;if(xt.lengthComputable){var qt=xt.loaded/xt.total*100;zt="Request timeout: loaded: "+xt.loaded+", out of: "+xt.total+" : "+qt.toFixed(3)+"% Completed"}else zt="Request timeout: non-computable download size";Be.warn(zt)},loader:At,timeout:st,headers:_n};var Rt=new Date().getTime();if(isNaN(Pe.delayLoadingTime)||Rt>=Pe.delayLoadingTime)se.push(Fe),At.load(Fe);else{var It={httpRequest:Fe};Re.push(It),It.delayTimeout=setTimeout(function(){if(Re.indexOf(It)!==-1){Re.splice(Re.indexOf(It),1);try{xe=new Date,et=xe,se.push(It.httpRequest),At.load(It.httpRequest)}catch{It.httpRequest.onerror()}}},Pe.delayLoadingTime-Rt)}}return ie={load:function(Le){Le.request?he(Le,ot.getRetryAttemptsForType(Le.request.type)):Le.error&&Le.error(Le.request,"error")},abort:function(){Ae.forEach(function(Le){clearTimeout(Le.timeout),Le.config.request&&Le.config.abort&&Le.config.abort(Le.config.request)}),Ae=[],Re.forEach(function(Le){return clearTimeout(Le.delayTimeout)}),Re=[],se.forEach(function(Le){Le.request.type!==ee.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(Le.onloadend=Le.onerror=Le.onprogress=void 0,Le.loader.abort(Le))}),se=[]}},Be=(0,d.Z)(We).getInstance().getLogger(ie),se=[],Re=[],Ae=[],ye=pr(We).getInstance(),Oe=bo(We).getInstance(),He=ni(We).getInstance(),je=(0,kn.Z)(We).getInstance(),nr(De={},ee.w.MPD_TYPE,Me.DOWNLOAD_ERROR_ID_MANIFEST_CODE),nr(De,ee.w.XLINK_EXPANSION_TYPE,Me.DOWNLOAD_ERROR_ID_XLINK_CODE),nr(De,ee.w.INIT_SEGMENT_TYPE,Me.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),nr(De,ee.w.MEDIA_SEGMENT_TYPE,Me.DOWNLOAD_ERROR_ID_CONTENT_CODE),nr(De,ee.w.INDEX_SEGMENT_TYPE,Me.DOWNLOAD_ERROR_ID_CONTENT_CODE),nr(De,ee.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,Me.DOWNLOAD_ERROR_ID_CONTENT_CODE),nr(De,ee.w.OTHER_TYPE,Me.DOWNLOAD_ERROR_ID_CONTENT_CODE),ve=De,ie}$r.__dashjs_factory_name="HTTPLoader";const Ji=g.Z.getClassFactory($r);function ea(){var ae;function ie(){ae={}}function se(){ie()}return se(),{getLoader:function(Re){for(var Ae in ae)if(ae.hasOwnProperty(Ae)&&Re.startsWith(Ae))return ae[Ae];return Ji},registerLoader:function(Re,Ae){ae[Re]=Ae},unregisterLoader:function(Re){ae[Re]&&delete ae[Re]},unregisterAllLoader:ie,reset:se}}ea.__dashjs_factory_name="SchemeLoaderFactory";const ta=g.Z.getSingletonFactory(ea);function Li(ae){ae=ae||{};var ie,se,Re=this.context;return ie=ta(Re).getInstance(),{load:function(Ae){if(!se){var ve=ie.getLoader(Ae&&Ae.request?Ae.request.url:null);se=ve(Re).create({errHandler:ae.errHandler,mediaPlayerModel:ae.mediaPlayerModel,requestModifier:ae.requestModifier,dashMetrics:ae.dashMetrics,boxParser:ae.boxParser?ae.boxParser:null,constants:ae.constants?ae.constants:null,dashConstants:ae.dashConstants?ae.dashConstants:null,urlUtils:ae.urlUtils?ae.urlUtils:null,requestTimeout:isNaN(ae.requestTimeout)?0:ae.requestTimeout,errors:ae.errors})}se.load(Ae)},abort:function(){se&&se.abort()}}}Li.__dashjs_factory_name="URLLoader";const fa=g.Z.getClassFactory(Li);function ai(ae){return ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},ai(ae)}function Yi(ae,ie){return Yi=Object.setPrototypeOf||function(se,Re){return se.__proto__=Re,se},Yi(ae,ie)}function to(ae){return to=Object.setPrototypeOf?Object.getPrototypeOf:function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},to(ae)}const Aa=function(ae){(function(ve,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(ye&&ye.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),ye&&Yi(ve,ye)})(Ae,ae);var ie,se,Re=(ie=Ae,se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ve,ye=to(ie);if(se){var Oe=to(this).constructor;ve=Reflect.construct(ye,arguments,Oe)}else ve=ye.apply(this,arguments);return function(je,He){return!He||ai(He)!=="object"&&typeof He!="function"?function(Be){if(Be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Be}(je):He}(this,ve)});function Ae(ve){var ye;return function(Oe,je){if(!(Oe instanceof je))throw new TypeError("Cannot call a class as a function")}(this,Ae),(ye=Re.call(this,ve)).checkForExistenceOnly=!0,ye}return Ae}(m.Z);function Ka(ae){ae=ae||{};var ie,se,Re=this.context,Ae=ae.eventBus,ve=ae.events,ye=ae.urlUtils,Oe=ae.errors,je=ae.streamId;return ie={checkForExistence:function(He){var Be=function(We){Ae.trigger(ve.CHECK_FOR_EXISTENCE_COMPLETED,{request:He,exists:We})};if(He){var De=new Aa(He.url);se.load({request:De,success:function(){Be(!0)},error:function(){Be(!1)}})}else Be(!1)},load:function(He){var Be=function(De,We){Ae.trigger(ve.LOADING_COMPLETED,{request:He,response:De||null,error:We||null,sender:ie})};He?se.load({request:He,progress:function(De){Ae.trigger(ve.LOADING_PROGRESS,{request:He,stream:De.stream,streamId:je}),De.data&&Ae.trigger(ve.LOADING_DATA_PROGRESS,{request:He,response:De.data||null,error:null,sender:ie})},success:function(De){Be(De)},error:function(De,We,qe){Be(void 0,new p.Z(Oe.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,qe,We))},abort:function(De){De&&Ae.trigger(ve.LOADING_ABANDONED,{mediaType:De.mediaType,request:De,sender:ie})}}):Be(void 0,new p.Z(Oe.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,Oe.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){se&&se.abort()},reset:function(){se&&(se.abort(),se=null)}},se=fa(Re).create({errHandler:ae.errHandler,errors:Oe,dashMetrics:ae.dashMetrics,mediaPlayerModel:ae.mediaPlayerModel,requestModifier:ae.requestModifier,urlUtils:ye,constants:l.Z,boxParser:ae.boxParser,dashConstants:ae.dashConstants,requestTimeout:ae.settings.get().streaming.fragmentRequestTimeout}),ie}Ka.__dashjs_factory_name="FragmentLoader";const Oi=g.Z.getClassFactory(Ka);function Bt(){return{modifyResponseAsync:function(ae){return Promise.resolve(ae)}}}Bt.__dashjs_factory_name="SegmentResponseModifier";const dn=g.Z.getSingletonFactory(Bt);function Un(ae){ae=ae||{};var ie,se,Re,Ae=this.context,ve=(0,y.Z)(Ae).getInstance(),ye=ae.errHandler,Oe=ae.mediaPlayerModel,je=ae.dashMetrics,He=(0,d.Z)(Ae).getInstance(),Be=dn(Ae).getInstance(),De=ae.streamInfo;function We(){return De.id}function qe(){for(var ot in Re)Re[ot].reset();Re={}}function vt(ot){if(ot.sender){var ct=ot.request,mt=ot.response,Me=ct.isInitializationRequest(),st=ct.mediaInfo.streamInfo;if(ot.error&&(ct.mediaType===l.Z.AUDIO||ct.mediaType===l.Z.VIDEO||ct.mediaType===l.Z.TEXT&&ct.mediaInfo.isFragmented)&&ve.trigger(i.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:ot.request.serviceLocation}),mt&&st){var tt=function(ft,he,Le,Ve){var Fe=new nt;return Fe.streamId=Le,Fe.mediaInfo=he.mediaInfo,Fe.segmentType=he.type,Fe.start=he.startTime,Fe.duration=he.duration,Fe.end=Fe.start+Fe.duration,Fe.bytes=ft,Fe.index=he.index,Fe.quality=he.quality,Fe.representationId=he.representationId,Fe.endFragment=Ve,Fe}(mt,ct,De.id,ot.type!==i.Z.FRAGMENT_LOADING_PROGRESS);Be.modifyResponseAsync(tt).then(function(ft){ve.trigger(Me?i.Z.INIT_FRAGMENT_LOADED:i.Z.MEDIA_FRAGMENT_LOADED,{chunk:ft,request:ct},{streamId:st.id,mediaType:ct.mediaType})}).catch(function(ft){se.error(ft),ve.trigger(Me?i.Z.INIT_FRAGMENT_LOADED:i.Z.MEDIA_FRAGMENT_LOADED,{chunk:tt,request:ct},{streamId:st.id,mediaType:ct.mediaType})})}else se.warn("No "+ct.mediaType+" bytes to push or stream is inactive.")}}return ie={getStreamId:We,getModel:function(ot){var ct=Re[ot];return ct||(ct=b(Ae).create({streamInfo:De,type:ot,dashMetrics:je,fragmentLoader:Oi(Ae).create({dashMetrics:je,mediaPlayerModel:Oe,errHandler:ye,requestModifier:(0,ge.Z)(Ae).getInstance(),settings:ae.settings,boxParser:ae.boxParser,eventBus:ve,events:i.Z,errors:U,dashConstants:ae.dashConstants,urlUtils:ae.urlUtils,streamId:We()}),debug:He,eventBus:ve,events:i.Z}),Re[ot]=ct),ct},reset:function(){ve.off(r.Z.FRAGMENT_LOADING_COMPLETED,vt,this),ve.off(r.Z.FRAGMENT_LOADING_PROGRESS,vt,this),qe()}},se=He.getLogger(ie),qe(),ve.on(r.Z.FRAGMENT_LOADING_COMPLETED,vt,ie),ve.on(r.Z.FRAGMENT_LOADING_PROGRESS,vt,ie),ie}Un.__dashjs_factory_name="FragmentController";const or=g.Z.getClassFactory(Un),ir=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},gr=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function Hr(ae){var ie,se,Re=this.context,Ae=ae.streamInfo;function ve(Oe){se.setTrackByIndex(Oe)}function ye(){se&&se.reset()}return ie={getStreamId:function(){return Ae.id},initialize:function(){se.addTracks();var Oe=se.getTracks();Oe&&Oe.length>0&&ve(0)},provide:function(Oe,je){if(typeof je=="function"){var He,Be,De=se.getCurrentTrack();if(!De||De.segmentDuration<=0||Oe==null)je(null);else{(Be=se.getThumbnailRequestForTime(Oe))&&(De.segmentDuration=Be.duration),He=Oe%De.segmentDuration;var We=Math.floor(He*De.tilesHor*De.tilesVert/De.segmentDuration),qe=new ir;if(qe.width=Math.floor(De.widthPerTile),qe.height=Math.floor(De.heightPerTile),qe.x=Math.floor(We%De.tilesHor)*De.widthPerTile,qe.y=Math.floor(We/De.tilesHor)*De.heightPerTile,"readThumbnail"in De)return De.readThumbnail(Oe,function(ot){qe.url=ot,je(qe)});if(Be)qe.url=Be.url,De.segmentDuration=NaN;else{var vt=Math.floor(Oe/De.segmentDuration);qe.url=function(ot,ct){var mt=ct+ot.startNumber,Me=(0,V.vi)(ot.templateUrl,"Number",mt);return Me=(0,V.vi)(Me,"Time",(mt-1)*ot.segmentDuration*ot.timescale),Me=(0,V.vi)(Me,"Bandwidth",ot.bandwidth),(0,V.eR)(Me)}(De,vt)}je(qe)}}},setTrackByIndex:ve,getCurrentTrackIndex:function(){return se.getCurrentTrackIndex()},getBitrateList:function(){var Oe=se.getTracks(),je=0;return Oe.map(function(He){var Be=new gr;return Be.mediaType=l.Z.IMAGE,Be.qualityIndex=je++,Be.bitrate=He.bitrate,Be.width=He.width,Be.height=He.height,Be})},reset:ye},ye(),se=(0,Wt.Z)(Re).create({streamInfo:Ae,adapter:ae.adapter,baseURLController:ae.baseURLController,timelineConverter:ae.timelineConverter,debug:ae.debug,eventBus:ae.eventBus,events:ae.events,dashConstants:ae.dashConstants,dashMetrics:ae.dashMetrics,segmentBaseController:ae.segmentBaseController}),ie}Hr.__dashjs_factory_name="ThumbnailController";const qr=g.Z.getClassFactory(Hr);var Dr=I(7417);function Br(ae){var ie;ae=ae||{};var se=[],Re=(0,y.Z)(this.context).getInstance(),Ae=ae.updateEventName,ve=ae.addBlacklistEventName;function ye(Oe){se.indexOf(Oe)===-1&&(se.push(Oe),Re.trigger(Ae,{entry:Oe}))}return ie={add:ye,contains:function(Oe){return!!(se.length&&Oe&&Oe.length)&&se.indexOf(Oe)!==-1},reset:function(){se=[]}},ve&&Re.on(ve,function(Oe){ye(Oe.entry)},ie),ie}Br.__dashjs_factory_name="BlackListController";const pi=g.Z.getClassFactory(Br);var zi=[l.Z.VIDEO,l.Z.AUDIO,l.Z.TEXT,l.Z.MUXED,l.Z.IMAGE];function Mi(ae){ae=ae||{};var ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We,qe,vt,ot,ct,mt,Me,st=this.context,tt=(0,y.Z)(st).getInstance(),ft=(0,Ge.Z)(st).getInstance(),he=ae.manifestModel,Le=ae.mediaPlayerModel,Ve=ae.dashMetrics,Fe=ae.manifestUpdater,Pe=ae.adapter,Ne=ae.timelineConverter,lt=ae.capabilities,$e=ae.errHandler,xe=ae.abrController,et=ae.playbackController,Et=ae.eventController,kt=ae.mediaController,Mt=ae.protectionController,At=ae.textController,Ot=ae.videoModel,Kt=ae.streamInfo,_n=ae.settings;function Jt(Sn,sr){return new Promise(function($n,Yt){zt(),Be=!0,In();var yn=Ot.getElement(),Ht=[];zi.forEach(function(tn){(tn!==l.Z.TEXT||Sn)&&(tn!==l.Z.VIDEO||!yn||yn&&/^VIDEO$/i.test(yn.nodeName))&&Ht.push(un(tn,Sn))}),Promise.all(Ht).then(function(){return tn=sr,new Promise(function(rt){var Pt={},an=Re.map(function(On){return On.createBufferSinks(tn)});Promise.all(an).then(function(On){On.forEach(function(Wn){Wn&&(Pt[Wn.getType()]=Wn)}),rt(Pt)}).catch(function(){rt(Pt)})});var tn}).then(function(tn){if(Be=!1,Re.length===0){var rt="No streams to play.";$e.error(new p.Z(U.MANIFEST_ERROR_ID_NOSTREAMS_CODE,rt,he.getValue())),se.fatal(rt)}else Pn();Sn&&At.createTracks(Kt),$n(tn)}).catch(function(tn){Yt(tn)})})}function un(Sn,sr){var $n,Yt=Pe.getAllMediaInfoForType(Kt,Sn),yn=[],Ht=null;if(!Yt||Yt.length===0)return se.info("No "+Sn+" data."),Promise.resolve();Sn===l.Z.VIDEO&&(Oe=!0),Sn===l.Z.AUDIO&&(je=!0);for(var tn=0,rt=Yt.length;tn<rt;tn++)Ht=Yt[tn],Sn===l.Z.TEXT&&Ht.isEmbedded&&(At.addEmbeddedTrack(Kt,Ht),yn.push(Ht)),Cn(Ht)&&kt.addTrack(Ht);if(yn.length>0&&(kt.setInitialMediaSettingsForType(Sn,Kt),At.addMediaInfosToBuffer(Kt,Sn,yn)),Yt=Yt.filter(function(an){return!an.isEmbedded}),Yt.length===0)return Promise.resolve();if(Sn===l.Z.IMAGE)return(We=qr(st).create({streamInfo:Kt,adapter:Pe,baseURLController:ae.baseURLController,timelineConverter:ae.timelineConverter,debug:ct,eventBus:tt,events:i.Z,dashConstants:c.Z,dashMetrics:ae.dashMetrics,segmentBaseController:ae.segmentBaseController})).initialize(),Promise.resolve();tt.trigger(i.Z.STREAM_INITIALIZING,{streamInfo:Kt,mediaInfo:Ht}),kt.setInitialMediaSettingsForType(Sn,Kt);var Pt=function(an,On){var Wn=an&&an.length>0?an[0]:null,mr=De.getModel(Wn?Wn.type:null),Zi=Wn?Wn.type:null,Pa=Wn?Wn.mimeType:null,Ea=Wn?Wn.isFragmented:null,$a=Xe(st).create({streamInfo:Kt,type:Zi,mimeType:Pa,timelineConverter:Ne,adapter:Pe,manifestModel:he,mediaPlayerModel:Le,fragmentModel:mr,dashMetrics:ae.dashMetrics,baseURLController:ae.baseURLController,segmentBaseController:ae.segmentBaseController,abrController:xe,playbackController:et,mediaController:kt,textController:At,errHandler:$e,settings:_n,boxParser:ot,segmentBlacklistController:qe});$a.initialize(On,Oe,Ea),Re.push($a);for(var Fa=0;Fa<an.length;Fa++)$a.addMediaInfo(an[Fa]);return Zi===l.Z.TEXT&&At.addMediaInfosToBuffer(Kt,Zi,an,mr),$a}(Yt,sr);return($n=kt.getCurrentTrackFor(Sn,Kt.id))?(xe.updateTopQualityIndex($n),Pt.selectMediaInfo(Sn===l.Z.TEXT&&$n.isEmbedded?Yt[0]:$n)):Promise.resolve()}function Cn(Sn){var sr,$n=Sn?Sn.type:null;return $n===l.Z.MUXED?(sr="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",se.fatal(sr),$e.error(new p.Z(U.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,sr,he.getValue())),!1):!($n!==l.Z.TEXT&&$n!==l.Z.IMAGE&&Sn.contentProtection&&!lt.supportsEncryptedMedia()&&($e.error(new p.Z(U.CAPABILITY_MEDIAKEYS_ERROR_CODE,U.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function mn(Sn){for(var sr=Re?Re.length:0,$n=0;$n<sr;$n++){var Yt=Re[$n].getFragmentModel();Yt.abortRequests(),Yt.resetInitialSettings(),Re[$n].reset(!1,Sn)}At&&At.deactivateStream(Kt),Re=[],ve=!1,ye=!1,Ei(!1),gt(!1),tt.trigger(i.Z.STREAM_DEACTIVATED,{streamInfo:Kt})}function St(Sn){mn(Sn),Ae=!1,Oe=!1,je=!1,He={},Be=!1,mt=!1,Me=[]}function gt(Sn){mt=Sn}function Rt(){return Kt?Kt.start:NaN}function It(){return Kt?Kt.id:null}function xt(){return Kt}function zt(){if(!Ot||!xe)throw new Error(l.Z.MISSING_CONFIG_ERROR)}function qt(Sn){Sn.error&&($e.error(Sn.error),se.fatal(Sn.error.message))}function In(){if(Et){var Sn=Pe.getEventsFor(Kt);Sn&&Sn.length>0&&Et.addInlineEvents(Sn,Kt.id)}}function Pn(){for(var Sn=Re.length,sr=He.audio||He.video?new p.Z(U.DATA_UPDATE_FAILED_ERROR_CODE,U.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,$n=0;$n<Sn;$n++)if(Re[$n].isUpdating()||Be)return;if(Mt){Mt.clearMediaInfoArray();for(var Yt=0;Yt<Sn&&Re[Yt];Yt++){var yn=Re[Yt].getType(),Ht=Re[Yt].getMediaInfo();if(yn===l.Z.AUDIO||yn===l.Z.VIDEO||yn===l.Z.TEXT&&Ht.isFragmented){var tn=Re[Yt].getMediaInfo();tn&&Mt.initializeForMedia(tn)}}Mt.handleKeySystemFromManifest()}sr?$e.error(sr):Ae||(Ae=!0,Ot.waitForReadyState(l.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){tt.trigger(i.Z.STREAM_INITIALIZED,{streamInfo:Kt})}))}function yr(){var Sn=Jr(),sr=Sn.length;if(sr!==0){for(var $n=0;$n<sr;$n++)if(!Sn[$n].isBufferingCompleted()&&(Sn[$n].getType()===l.Z.AUDIO||Sn[$n].getType()===l.Z.VIDEO))return void se.debug("onBufferingCompleted - One streamProcessor has finished but",Sn[$n].getType(),"one is not buffering completed");se.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),ye=!0,tt.trigger(i.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:Kt},{streamInfo:Kt})}else se.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ar(Sn){He[Sn.mediaType]=Sn.error,Pn()}function lr(Sn){Et&&Et.addInbandEvents(Sn.events,Kt.id)}function ur(Sn){return Sn&&Sn.type?wr(Sn.type):null}function wr(Sn){return Sn?Jr().filter(function(sr){return sr.getType()===Sn})[0]:null}function Jr(){for(var Sn,sr,$n=[],Yt=0;Yt<Re.length;Yt++)(Sn=(sr=Re[Yt]).getType())!==l.Z.AUDIO&&Sn!==l.Z.VIDEO&&Sn!==l.Z.TEXT||$n.push(sr);return $n}function Xr(Sn,sr){var $n=xt(),Yt=sr.getStreamInfo();if(!Yt||!$n)return!0;var yn=Pe.getAdaptationForType(Yt.index,Sn,Yt),Ht=Pe.getAdaptationForType($n.index,Sn,$n);return yn&&Ht?!(!ri(Ht)&&ri(yn)):!yn&&!Ht}function ri(Sn){return!!Sn&&!!(Sn.ContentProtection||Sn.Representation_asArray&&Sn.Representation_asArray.length>0&&Sn.Representation_asArray[0].ContentProtection)}function hi(Sn,sr){var $n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!Sn||!Sn.hasOwnProperty("getStreamInfo"))return!1;var Yt=Sn.getStreamInfo(),yn=$n?$n.getStreamInfo():xt();if(!Yt||!yn)return!1;var Ht=Pe.getAdaptationForType(Yt.index,sr,Yt),tn=Pe.getAdaptationForType(yn.index,sr,yn);if(!Ht||!tn)return!Ht&&!tn;var rt=Ht&&tn&&Ht.mimeType===tn.mimeType,Pt=tn.Representation_asArray.map(function(mr){return mr.codecs}),an=Ht.Representation_asArray.map(function(mr){return mr.codecs}),On=an.some(function(mr){return Pt.indexOf(mr)>-1}),Wn=an.some(function(mr){return Pt.some(function(Zi){return lt.codecRootCompatibleWithCodec(Zi,mr)})});return On||Wn&&rt}function Ei(Sn){vt=Sn}function ui(){return vt}return ie={initialize:function(){tt.on(i.Z.BUFFERING_COMPLETED,yr,ie),tt.on(i.Z.DATA_UPDATE_COMPLETED,ar,ie),tt.on(i.Z.INBAND_EVENTS,lr,ie),Mt&&(tt.on(i.Z.KEY_ERROR,qt,ie),tt.on(i.Z.SERVER_CERTIFICATE_UPDATED,qt,ie),tt.on(i.Z.LICENSE_REQUEST_COMPLETE,qt,ie),tt.on(i.Z.KEY_SYSTEM_SELECTED,qt,ie),tt.on(i.Z.KEY_SESSION_CREATED,qt,ie),tt.on(i.Z.KEY_STATUSES_CHANGED,qt,ie)),At.initializeForStream(Kt),tt.trigger(i.Z.STREAM_UPDATED,{streamInfo:Kt})},getStreamId:function(){return Kt?Kt.id:null},activate:function(Sn,sr){return new Promise(function($n,Yt){if(!ve)return ui()?(ve=!0,tt.trigger(i.Z.STREAM_ACTIVATED,{streamInfo:Kt}),void $n(sr)):void function(yn,Ht){return Jt(yn,Ht)}(Sn,sr).then(function(yn){ve=!0,tt.trigger(i.Z.STREAM_ACTIVATED,{streamInfo:Kt}),$n(yn)}).catch(function(yn){Yt(yn)});$n(sr)})},deactivate:mn,getIsActive:function(){return ve},getDuration:function(){return Kt?Kt.duration:NaN},getStartTime:Rt,getId:It,getStreamInfo:xt,getHasAudioTrack:function(){return je},getHasVideoTrack:function(){return Oe},startPreloading:function(Sn,sr){return new Promise(function($n,Yt){ui()?Yt():(se.info("[startPreloading] Preloading next stream with id ".concat(It())),Ei(!0),Jt(Sn,sr).then(function(){for(var yn=0;yn<Re.length&&Re[yn];yn++)Re[yn].setExplicitBufferingTime(Rt()),Re[yn].getScheduleController().startScheduleTimer();$n()}).catch(function(){Ei(!1),Yt()}))})},initializeForTextWithMediaSource:function(Sn){return new Promise(function(sr,$n){un(l.Z.TEXT,Sn).then(function(){return(Yt=wr(l.Z.TEXT))?Yt.createBufferSinks():Promise.resolve();var Yt}).then(function(){At.createTracks(Kt),sr()}).catch(function(Yt){$n(Yt)})})},getThumbnailController:function(){return We},getBitrateListFor:function(Sn){if(zt(),Sn===l.Z.IMAGE)return We?We.getBitrateList():[];var sr=function($n){for(var Yt=null,yn=0;yn<Re.length;yn++)if((Yt=Re[yn]).getType()===$n)return Yt.getMediaInfo();return null}(Sn);return xe.getBitrateList(sr)},updateData:function(Sn){return new Promise(function(sr){Be=!0,Kt=Sn,Et&&In();for(var $n=[],Yt=0,yn=Re.length;Yt<yn;Yt++){var Ht=Re[Yt],tn=Ht.getMediaInfo();$n.push(Ht.updateStreamInfo(Kt));var rt=Pe.getAllMediaInfoForType(Kt,Ht.getType());if(rt=rt.filter(function(On){return!On.isEmbedded})){Ht.clearMediaInfoArray();for(var Pt=0;Pt<rt.length;Pt++){var an=rt[Pt];Ht.addMediaInfo(rt[Pt]),Pe.areMediaInfosEqual(tn,an)&&(xe.updateTopQualityIndex(an),$n.push(Ht.selectMediaInfo(an)))}}}Promise.all($n).then(function(){for($n=[];Me.length>0;){var On=Me.pop(),Wn=On.newMediaInfo,mr=ur(On.oldMediaInfo);if(!mr)return;$n.push(mr.prepareTrackSwitch()),$n.push(mr.selectMediaInfo(Wn))}return Promise.all($n)}).then(function(){Be=!1,Pn(),tt.trigger(i.Z.STREAM_UPDATED,{streamInfo:Kt}),sr()})})},reset:function(Sn){De&&(De.reset(),De=null),xe&&Kt&&xe.clearDataForStream(Kt.id),qe&&(qe.reset(),qe=null),St(Sn),Kt=null,tt.off(i.Z.DATA_UPDATE_COMPLETED,ar,ie),tt.off(i.Z.BUFFERING_COMPLETED,yr,ie),tt.off(i.Z.INBAND_EVENTS,lr,ie),Mt&&(tt.off(i.Z.KEY_ERROR,qt,ie),tt.off(i.Z.SERVER_CERTIFICATE_UPDATED,qt,ie),tt.off(i.Z.LICENSE_REQUEST_COMPLETE,qt,ie),tt.off(i.Z.KEY_SYSTEM_SELECTED,qt,ie),tt.off(i.Z.KEY_SESSION_CREATED,qt,ie),tt.off(i.Z.KEY_STATUSES_CHANGED,qt,ie))},getProcessors:Jr,setMediaSource:function(Sn){return new Promise(function(sr,$n){for(var Yt=[],yn=0;yn<Re.length;)Cn(Re[yn].getMediaInfo())?(Yt.push(Re[yn].setMediaSource(Sn)),yn++):(Re[yn].reset(),Re.splice(yn,1));Promise.all(Yt).then(function(){for(var Ht=0;Ht<Re.length;Ht++)Re[Ht].dischargePreBuffer();if(Re.length===0){var tn="No streams to play.";$e.error(new p.Z(U.MANIFEST_ERROR_ID_NOSTREAMS_CODE,tn+"nostreams",he.getValue())),se.fatal(tn)}sr()}).catch(function(Ht){se.error(Ht),$n(Ht)})})},isMediaCodecCompatible:function(Sn){var sr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return hi(Sn,l.Z.VIDEO,sr)&&hi(Sn,l.Z.AUDIO,sr)},isProtectionCompatible:function(Sn){return!Sn||Xr(l.Z.VIDEO,Sn)&&Xr(l.Z.AUDIO,Sn)},getPreloaded:ui,getIsEndedEventSignaled:function(){return mt},setIsEndedEventSignaled:gt,getAdapter:function(){return Pe},getHasFinishedBuffering:function(){return ye},setPreloaded:Ei,startScheduleControllers:function(){for(var Sn=Re.length,sr=0;sr<Sn&&Re[sr];sr++)Re[sr].getScheduleController().startScheduleTimer()},prepareTrackChange:function(Sn){if(ve&&Kt){ye=!1;var sr=Sn.newMediaInfo,$n=he.getValue();Pe.setCurrentMediaInfo(Kt.id,sr.type,sr);var Yt=ur(sr);if(Yt){var yn=et.getTime();se.info("Stream -  Process track changed at current time "+yn),$n.refreshManifestOnSwitchTrack?(Me.push(Sn),Fe.getIsUpdating()||(se.debug("Stream -  Refreshing manifest for switch track"),Fe.refreshManifest())):Yt.selectMediaInfo(sr).then(function(){sr.type!==l.Z.VIDEO&&sr.type!==l.Z.AUDIO||xe.updateTopQualityIndex(sr),Yt.prepareTrackSwitch()})}}},prepareQualityChange:function(Sn){var sr=wr(Sn.mediaType);sr&&sr.prepareQualityChange(Sn)}},function(){try{ct=(0,d.Z)(st).getInstance(),se=ct.getLogger(ie),St(),ot=(0,Dr.Z)(st).getInstance(),qe=pi(st).create({updateEventName:i.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:i.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),De=or(st).create({streamInfo:Kt,mediaPlayerModel:Le,dashMetrics:Ve,errHandler:$e,settings:_n,boxParser:ot,dashConstants:c.Z,urlUtils:ft})}catch(Sn){throw Sn}}(),ie}Mi.__dashjs_factory_name="Stream";const ga=g.Z.getClassFactory(Mi),Wi=function ae(ie){(function(se,Re){if(!(se instanceof Re))throw new TypeError("Cannot call a class as a function")})(this,ae),this.url=ie||null,this.type=ee.w.CONTENT_STEERING_TYPE,this.responseType="json"},Gi=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function Yn(){var ae,ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We,qe,vt,ot=this.context,ct=(0,Ge.Z)(ot).getInstance();function mt(xe){he(xe,"baseUrl")}function Me(xe){he(xe,"location")}function st(xe){if(xe&&xe.request&&xe.request.serviceLocation&&xe.request.requestStartDate&&xe.request.requestEndDate&&!isNaN(xe.request.bytesTotal)){var et=xe.request.serviceLocation,Et=xe.request.requestEndDate.getTime()-xe.request.requestStartDate.getTime();ft(et,parseInt(8*xe.request.bytesTotal/Et*1e3))}}function tt(xe){xe&&xe.httpRequest&&xe.httpRequest._serviceLocation&&!isNaN(xe.throughput)&&ft(xe.httpRequest._serviceLocation,1e3*xe.throughput)}function ft(xe,et){Ae[xe]||(Ae[xe]=[]),Ae[xe].push(et),Ae[xe].length>4&&Ae[xe].shift()}function he(xe,et){if(xe&&xe.request&&xe.request.serviceLocation){var Et=xe.request.serviceLocation;Re[et].all.indexOf(Et)===-1&&Re[et].all.push(Et),Re[et].current=Et}}function Le(){var xe=Be.getValue(),et=vt.getContentSteering(xe);return et||(et=We.getServiceDescriptionSettings().contentSteering),et}function Ve(){return new Promise(function(xe){try{var et=Le();if(!et||!et.serverUrl)return void xe();var Et=function(Mt){var At=Mt.serverUrl;se&&se.reloadUri&&(At=ct.isRelative(se.reloadUri)?ct.resolve(se.reloadUri,Mt.serverUrl):se.reloadUri);var Ot=[],Kt=Re.baseUrl.all.concat(Re.location.all);if(Kt.length>0){var _n=Kt.map(function(Cn){var mn=function(St){if(!St||!Ae[St]||Ae[St].length===0)return-1;var gt=Ae[St].reduce(function(Rt,It){return Rt+It})/Ae[St].length;return parseInt(gt)}(Cn);return{serviceLocation:Cn,throughput:mn}});_n.sort(function(Cn,mn){return mn.throughput-Cn.throughput});var Jt="",un="";_n.forEach(function(Cn,mn){mn!==0&&(Jt="".concat(Jt,","),Cn.throughput>-1&&(un="".concat(un,","))),Jt="".concat(Jt).concat(Cn.serviceLocation),Cn.throughput>-1&&(un="".concat(un).concat(Cn.throughput))}),Ot.push({key:"_DASH_pathway",value:'"'.concat(Jt,'"')}),Ot.push({key:"_DASH_throughput",value:un})}return zn.Z.addAditionalQueryParameterToUrl(At,Ot)}(et),kt=new Wi(Et);ye.load({request:kt,success:function(Mt){(function(At){At&&At[c.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(At[c.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((se=new Gi).version=At[c.Z.CONTENT_STEERING_RESPONSE.VERSION],At[c.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(At[c.Z.CONTENT_STEERING_RESPONSE.TTL])&&(se.ttl=At[c.Z.CONTENT_STEERING_RESPONSE.TTL]),At[c.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(se.reloadUri=At[c.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),At[c.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(se.pathwayPriority=At[c.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),At[c.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(se.pathwayClones=At[c.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],se.pathwayClones=se.pathwayClones.filter(function(Ot){return function(Kt){return Kt[c.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&Kt[c.Z.CONTENT_STEERING_RESPONSE.ID]&&Kt[c.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&Kt[c.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][c.Z.CONTENT_STEERING_RESPONSE.HOST]}(Ot)})),Ne())})(Mt),qe.trigger(r.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:se,url:Et}),xe()},error:function(Mt,At,Ot,Kt){(function(_n,Jt){try{switch(ie.warn("Error fetching data from content steering server",_n),Jt.status){case 410:break;case 429:var un=Jt&&Jt.getResponseHeader?Jt.getResponseHeader("retry-after"):null;un!==null&&(se||(se={}),se.ttl=parseInt(un)),Ne();break;default:Ne()}}catch(Cn){ie.error(Cn)}})(Mt,Kt),xe(Mt)},complete:function(){Re.baseUrl.all=Fe(Re.baseUrl),Re.location.all=Fe(Re.location)}})}catch(Mt){xe(Mt)}})}function Fe(xe){return xe.all&&xe.all.length!==0&&xe.current?xe.all.filter(function(et){return et===xe.current}):[]}function Pe(xe){try{var et=[];return xe&&xe.length!==0&&se&&se.pathwayClones&&se.pathwayClones.length!==0&&se.pathwayClones.forEach(function(Et){var kt=xe.filter(function(Kt){return Et[c.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===Kt.serviceLocation}),Mt=null;if(kt&&kt.length>0&&(Mt=kt[0]),Mt){var At=new URL(Mt.url),Ot={synthesizedUrl:"".concat(Et[c.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][c.Z.CONTENT_STEERING_RESPONSE.HOST]).concat(At.pathname),serviceLocation:Et[c.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:Et[c.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][c.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:Mt};et.push(Ot)}}),et}catch(Et){return ie.error(Et),[]}}function Ne(){se&&se.ttl&&!isNaN(se.ttl)&&(ve&&clearTimeout(ve),ve=setTimeout(function(){Ve()},1e3*se.ttl))}function lt(){ve&&clearTimeout(ve),ve=null}function $e(){se=null,Ae={},Re={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},lt()}return ae={reset:function(){$e(),qe.off(r.Z.FRAGMENT_LOADING_STARTED,mt,ae),qe.off(r.Z.MANIFEST_LOADING_STARTED,Me,ae),qe.off(r.Z.MANIFEST_LOADING_FINISHED,st,ae),qe.off(r.Z.THROUGHPUT_MEASUREMENT_STORED,tt,ae)},setConfig:function(xe){xe&&(xe.adapter&&(vt=xe.adapter),xe.errHandler&&(Oe=xe.errHandler),xe.dashMetrics&&(je=xe.dashMetrics),xe.mediaPlayerModel&&(He=xe.mediaPlayerModel),xe.requestModifier&&(De=xe.requestModifier),xe.manifestModel&&(Be=xe.manifestModel),xe.serviceDescriptionController&&(We=xe.serviceDescriptionController),xe.eventBus&&(qe=xe.eventBus))},loadSteeringData:Ve,getCurrentSteeringResponseData:function(){return se},shouldQueryBeforeStart:function(){var xe=Le();return!!xe&&xe.queryBeforeStart},getSteeringDataFromManifest:Le,stopSteeringRequestTimer:lt,getSynthesizedBaseUrlElements:function(xe){try{return Pe(xe).map(function(et){var Et=new rn(et.synthesizedUrl,et.serviceLocation);return Et.queryParams=et.queryParams,Et.dvb_priority=et.reference.dvb_priority,Et.dvb_weight=et.reference.dvb_weight,Et.availabilityTimeOffset=et.reference.availabilityTimeOffset,Et.availabilityTimeComplete=et.reference.availabilityTimeComplete,Et})}catch(et){return ie.error(et),[]}},getSynthesizedLocationElements:function(xe){try{return Pe(xe).map(function(et){var Et=new fn(et.synthesizedUrl,et.serviceLocation);return Et.queryParams=et.queryParams,Et})}catch(et){return ie.error(et),[]}},initialize:function(){ye=fa(ot).create({errHandler:Oe,dashMetrics:je,mediaPlayerModel:He,requestModifier:De,errors:U}),qe.on(r.Z.FRAGMENT_LOADING_STARTED,mt,ae),qe.on(r.Z.MANIFEST_LOADING_STARTED,Me,ae),qe.on(r.Z.MANIFEST_LOADING_FINISHED,st,ae),qe.on(r.Z.THROUGHPUT_MEASUREMENT_STORED,tt,ae)}},ie=(0,d.Z)(ot).getInstance().getLogger(ae),$e(),ae}Yn.__dashjs_factory_name="ContentSteeringController";const na=g.Z.getSingletonFactory(Yn);function Ar(){var ae,ie,se,Re=this.context,Ae=(0,G.Z)(Re).getInstance();return ae={select:function(ve){if(!ve||ve.length===0)return null;var ye=null;return Ae.get().streaming.applyContentSteering&&(ye=function(Oe){var je=se.getCurrentSteeringResponseData();return je&&je.pathwayPriority&&je.pathwayPriority.length>0?function(){for(var He=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],De=0,We=null,qe=function(){var vt=He[De],ot=Be.findIndex(function(ct){return ct.serviceLocation&&ct.serviceLocation===vt});if(ot!==-1&&!ie.contains(Be[ot].serviceLocation))return We=Be[ot],"break";De+=1};De<He.length&&qe()!=="break";);return We}(je.pathwayPriority,Oe):null}(ve)),ye||(ye=function(Oe){return Oe[0]}(ve)),ye},setConfig:function(ve){ve.blacklistController&&(ie=ve.blacklistController),ve.contentSteeringController&&(se=ve.contentSteeringController)},reset:function(){ie.reset()}},ie=pi(Re).create({updateEventName:i.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:i.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),se=na(Re).getInstance(),ae}Ar.__dashjs_factory_name="LocationSelector";const Ma=g.Z.getClassFactory(Ar);function Io(){var ae,ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We,qe,vt=this.context,ot=(0,y.Z)(vt).getInstance(),ct=(0,Ge.Z)(vt).getInstance();function mt(){se=NaN,ye=!1,Ae=!0,ve=!1,Me()}function Me(){Re!==null&&(clearTimeout(Re),Re=null)}function st(Ne){Me(),ve||(isNaN(Ne)&&!isNaN(se)&&(Ne=1e3*se),isNaN(Ne)||(ie.debug("Refresh manifest in "+Ne+" milliseconds."),Re=setTimeout(he,Ne)))}function tt(){var Ne=arguments.length>0&&arguments[0]!==void 0&&arguments[0];ye=!0;var lt=je.getValue(),$e=lt.url,xe=null,et=Be.getPatchLocation(lt),Et=He.select(et),kt=null;if(Et&&!Ne)$e=Et.url,xe=Et.serviceLocation,kt=Et.queryParams;else{var Mt=function(Ot){var Kt=Be.getLocation(Ot),_n=We.getSynthesizedLocationElements(Kt);return Kt.concat(_n)}(lt),At=He.select(Mt);At&&($e=At.url,xe=At.serviceLocation,kt=At.queryParams)}ct.isRelative($e)&&($e=ct.resolve($e,lt.url)),Oe.load($e,xe,kt)}function ft(Ne){if(Ne){if(Be.getIsPatch(Ne)){var lt=Ne;Ne=je.getValue();var $e=Be.isPatchValid(Ne,lt),xe=$e;if($e){var et=Be.getPublishTime(Ne);xe=Be.applyPatchToManifest(Ne,lt);var Et=Be.getPublishTime(Ne);xe=et.getTime()!=Et.getTime()}if(!xe)return ie.debug("Patch provided is invalid, performing full manifest refresh"),void tt(!0);Ne.loadedTime=new Date}}else(Ne=je.getValue()).loadedTime=new Date;if(je.getValue()&&je.getValue().type===c.Z.DYNAMIC&&Ne.type===c.Z.STATIC)return ot.trigger(i.Z.DYNAMIC_TO_STATIC),ye=!1,void(ve=!0);je.setValue(Ne);var kt=new Date,Mt=(kt.getTime()-Ne.loadedTime.getTime())/1e3;1e3*(se=Be.getManifestUpdatePeriod(Ne,Mt))>2147483647&&(se=2147483647e-3),ot.trigger(i.Z.MANIFEST_UPDATED,{manifest:Ne}),ie.info("Manifest has been refreshed at "+kt+"["+kt.getTime()/1e3+"] "),Ae||st()}function he(){Ae||(ye?st(qe.get().streaming.manifestUpdateRetryInterval):tt())}function Le(Ne){Ne.error?Ne.error.code===U.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&De.error(Ne.error):ft(Ne.manifest)}function Ve(){Ae=!1,st()}function Fe(){(Ae=!qe.get().streaming.scheduling.scheduleWhilePaused)&&Me()}function Pe(){ye=!1}return ae={initialize:function(){mt(),ot.on(i.Z.STREAMS_COMPOSED,Pe,this),ot.on(r.Z.PLAYBACK_STARTED,Ve,this),ot.on(r.Z.PLAYBACK_PAUSED,Fe,this),ot.on(i.Z.INTERNAL_MANIFEST_LOADED,Le,this)},setManifest:function(Ne){ft(Ne)},refreshManifest:tt,getIsUpdating:function(){return ye},setConfig:function(Ne){Ne&&(Ne.manifestModel&&(je=Ne.manifestModel),Ne.adapter&&(Be=Ne.adapter),Ne.manifestLoader&&(Oe=Ne.manifestLoader),Ne.errHandler&&(De=Ne.errHandler),Ne.locationSelector&&(He=Ne.locationSelector),Ne.settings&&(qe=Ne.settings),Ne.contentSteeringController&&(We=Ne.contentSteeringController))},reset:function(){ot.off(r.Z.PLAYBACK_STARTED,Ve,this),ot.off(r.Z.PLAYBACK_PAUSED,Fe,this),ot.off(i.Z.STREAMS_COMPOSED,Pe,this),ot.off(i.Z.INTERNAL_MANIFEST_LOADED,Le,this),mt()}},ie=(0,d.Z)(vt).getInstance().getLogger(ae),He=Ma(vt).create(),ae}Io.__dashjs_factory_name="ManifestUpdater";const ma=g.Z.getClassFactory(Io);function Wa(){var ae,ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We,qe,vt,ot,ct=this.context,mt=(0,y.Z)(ct).getInstance(),Me=(0,Ge.Z)(ct).getInstance();function st(){Oe=[],je=[],He=null,Be=null,We=null,De=NaN,se=!1,Re=!1,qe=Ae.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function tt(){Ae.get().streaming.utcSynchronization.enabled&&!se&&!Re&&We&&We.value&&We.schemeIdUri&&!isNaN(De)&&!isNaN(Ae.get().streaming.utcSynchronization.backgroundAttempts)&&(Be&&(Date.now()-Be)/1e3<30||(Oe=[],Re=!0,ft(isNaN(Ae.get().streaming.utcSynchronization.backgroundAttempts)?2:Ae.get().streaming.utcSynchronization.backgroundAttempts)))}function ft(At){try{if(At<=0)return void kt();var Ot=Date.now();ve[We.schemeIdUri](We.value,function(Kt){var _n=Date.now(),Jt=Le(Ot,_n,Kt);Oe.push(Jt),ft(At-1)},function(){kt()})}catch{kt()}}function he(){var At=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||0;if(!je||je.length===0||At>=je.length)Ve();else{var Ot=je[At];if(Ot)if(ve.hasOwnProperty(Ot.schemeIdUri)){var Kt=new Date().getTime();ve[Ot.schemeIdUri](Ot.value,function(_n){var Jt=new Date().getTime(),un=Le(Kt,Jt,_n);We=Ot,Ve(un)},function(){he(At+1)})}else he(At+1);else Ve()}}function Le(At,Ot,Kt){return Kt-(Ot-(Ot-At)/2)}function Ve(){var At=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,Ot=isNaN(At);Ot&&Ae.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?function(){var Kt=ye.getLatestMPDRequestHeaderValueByID("Date"),_n=Kt!==null?new Date(Kt).getTime():Number.NaN;isNaN(_n)?Et(!0):Et(!1,_n-Date.now())}():Et(Ot,At)}function Fe(At){var Ot=Date.parse(At);return isNaN(Ot)&&(Ot=function(Kt){var _n,Jt,un=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(Kt);return _n=Date.UTC(parseInt(un[1],10),parseInt(un[2],10)-1,parseInt(un[3],10),parseInt(un[4],10),parseInt(un[5],10),un[6]&&(parseInt(un[6],10)||0),un[7]&&1e3*parseFloat(un[7])||0),un[9]&&un[10]&&(Jt=60*parseInt(un[9],10)+parseInt(un[10],10),_n+=(un[8]==="+"?-1:1)*Jt*60*1e3),new Date(_n).getTime()}(At)),Ot}function Pe(At){return Date.parse(At)}function Ne(At){return Date.parse(At)}function lt(At,Ot,Kt){Kt()}function $e(At,Ot,Kt){var _n=Fe(At);isNaN(_n)?Kt():Ot(_n)}function xe(At,Ot,Kt,_n,Jt){var un,Cn,mn=!1,St=new XMLHttpRequest,gt=Jt?ee.w.HEAD:ee.w.GET,Rt=Ot.match(/\S+/g);if(Ot=Rt.shift(),un=function(){mn||(mn=!0,Rt.length?xe(At,Rt.join(" "),Kt,_n,Jt):_n())},Cn=function(){var xt,zt;St.status===200&&(xt=Jt?St.getResponseHeader("Date"):St.response,zt=At(xt),isNaN(zt)||(Kt(zt),mn=!0))},Me.isRelative(Ot)){var It=ot.resolve();It&&(Ot=Me.resolve(Ot,It.url))}St.open(gt,Ot),St.timeout=5e3,St.onload=Cn,St.onloadend=un,St.send()}function et(At,Ot,Kt){xe(Ne,At,Ot,Kt,!0)}function Et(At,Ot){if(isNaN(De)||isNaN(Ot)||At||function(_n){try{var Jt,un=Mt(_n),Cn=isNaN(qe)?30:qe,mn=isNaN(Ae.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:Ae.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,St=isNaN(Ae.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:Ae.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,gt=isNaN(Ae.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:Ae.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;un?(Jt=Math.min(Cn*mn,St),ie.debug("Increasing timeBetweenSyncAttempts to ".concat(Jt))):(Jt=Math.max(Cn/mn,gt),ie.debug("Decreasing timeBetweenSyncAttempts to ".concat(Jt))),qe=Jt}catch{}}(Ot),!At&&!isNaN(Ot)){He=Date.now(),se=!1;var Kt=isNaN(De);De=Ot,Kt&&tt(),ie.debug("Completed UTC sync. Setting client - server offset to ".concat(Ot))}At&&(We=null,se=!1,vt.error(new p.Z(U.TIME_SYNC_FAILED_ERROR_CODE,U.TIME_SYNC_FAILED_ERROR_MESSAGE))),mt.trigger(i.Z.UPDATE_TIME_SYNC_OFFSET,{offset:Ot}),mt.trigger(i.Z.TIME_SYNCHRONIZATION_COMPLETED)}function kt(){if(Oe&&Oe.length!==0){var At=Oe.reduce(function(Ot,Kt){return Ot+Kt},0)/Oe.length;Mt(At)?ie.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(ie.debug("Completed background UTC sync. Setting client - server offset to ".concat(At)),De=At,mt.trigger(i.Z.UPDATE_TIME_SYNC_OFFSET,{offset:De})),Re=!1,Be=Date.now()}}function Mt(At){try{if(isNaN(De))return!0;var Ot=Ae.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(Ae.get().streaming.utcSynchronization.maximumAllowedDrift)?Ae.get().streaming.utcSynchronization.maximumAllowedDrift:100;return At>=De-Ot&&At<=De+Ot}catch{return!0}}return ae={initialize:function(){st(),ve={"urn:mpeg:dash:utc:http-head:2014":et,"urn:mpeg:dash:utc:http-xsdate:2014":xe.bind(null,Fe),"urn:mpeg:dash:utc:http-iso:2014":xe.bind(null,Pe),"urn:mpeg:dash:utc:direct:2014":$e,"urn:mpeg:dash:utc:http-head:2012":et,"urn:mpeg:dash:utc:http-xsdate:2012":xe.bind(null,Fe),"urn:mpeg:dash:utc:http-iso:2012":xe.bind(null,Pe),"urn:mpeg:dash:utc:direct:2012":$e,"urn:mpeg:dash:utc:http-ntp:2014":lt,"urn:mpeg:dash:utc:ntp:2014":lt,"urn:mpeg:dash:utc:sntp:2014":lt}},attemptSync:function(At,Ot){je=At,se||(function(Kt){try{if(!Kt||!Ae.get().streaming.utcSynchronization.enabled)return!1;var _n=isNaN(qe)?30:qe;return!(He&&_n&&!isNaN(_n))||(Date.now()-He)/1e3>=_n}catch{return!0}}(Ot)?(se=!0,he()):mt.trigger(i.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(At){At&&(At.dashMetrics&&(ye=At.dashMetrics),At.baseURLController&&(ot=At.baseURLController),At.errHandler&&(vt=At.errHandler),At.settings&&(Ae=At.settings))},reset:function(){st(),mt.off(i.Z.ATTEMPT_BACKGROUND_SYNC,tt,ae)}},ie=(0,d.Z)(ct).getInstance().getLogger(ae),mt.on(i.Z.ATTEMPT_BACKGROUND_SYNC,tt,ae),ae}Wa.__dashjs_factory_name="TimeSyncController";var Ta=g.Z.getSingletonFactory(Wa);Ta.HTTP_TIMEOUT_MS=5e3,g.Z.updateSingletonFactory(Wa.__dashjs_factory_name,Ta);const Uo=Ta;function Xa(){var ae,ie,se,Re=this.context;return ae={createMediaSource:function(){var Ae="WebKitMediaSource"in window;return"MediaSource"in window?ie=new MediaSource:Ae&&(ie=new WebKitMediaSource),ie},attachMediaSource:function(Ae){var ve=window.URL.createObjectURL(ie);return Ae.setSource(ve),ve},detachMediaSource:function(Ae){Ae.setSource(null)},setDuration:function Ae(ve){ie&&ie.readyState==="open"&&(ve===null&&isNaN(ve)||ie.duration!==ve&&(function(ye){for(var Oe=ye.sourceBuffers,je=0;je<Oe.length;je++)if(Oe[je].updating)return!0;return!1}(ie)?setTimeout(Ae.bind(null,ve),50):(se.info("Set MediaSource duration:"+ve),ie.duration=ve)))},setSeekable:function(Ae,ve){ie&&typeof ie.setLiveSeekableRange=="function"&&typeof ie.clearLiveSeekableRange=="function"&&ie.readyState==="open"&&Ae>=0&&Ae<ve&&(ie.clearLiveSeekableRange(),ie.setLiveSeekableRange(Ae,ve))},signalEndOfStream:function(Ae){if(Ae&&Ae.readyState==="open"){for(var ve=Ae.sourceBuffers,ye=0;ye<ve.length;ye++)if(ve[ye].updating||ve[ye].buffered.length===0)return;se.info("call to mediaSource endOfStream"),Ae.endOfStream()}}},se=(0,d.Z)(Re).getInstance().getLogger(ae),ae}Xa.__dashjs_factory_name="MediaSourceController";const Qa=g.Z.getSingletonFactory(Xa);function io(){var ae,ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De="urn:mpeg:dash:event:2012",We="updated",qe="added",vt=this.context,ot=(0,y.Z)(vt).getInstance();function ct(){if(!ye||!Oe)throw new Error("setConfig function has to be called previously")}function mt(){Be=!1,se={},Re={},Ae=null,He=!1,ve=Date.now()/1e3}function Me(){try{if(!He){He=!0;var Ne=Oe.getTime(),lt=Ne-ve;lt=ve>0?Math.max(0,lt):0,st(Re,lt,Ne),st(se,lt,Ne),tt(Re),tt(se),ve=Ne,He=!1}}catch($e){He=!1,ie.error($e)}}function st(Ne,lt,$e){try{Ve(Ne,function(xe){if(xe!==void 0){var et=isNaN(xe.duration)?0:xe.duration;xe.calculatedPresentationTime<=$e&&xe.calculatedPresentationTime+lt+et>=$e?Pe(xe,r.Z.EVENT_MODE_ON_START):(Fe($e,et+lt,xe.calculatedPresentationTime)||function(Et){try{var kt=Et.eventStream.period.start+Et.eventStream.period.duration;return Et.calculatedPresentationTime>kt}catch(Mt){return ie.error(Mt),!1}}(xe))&&(ie.debug("Removing event ".concat(xe.id," from period ").concat(xe.eventStream.period.id," as it is expired or invalid")),function(Et,kt){try{var Mt=kt.eventStream.schemeIdUri,At=kt.eventStream.period.id,Ot=kt.eventStream.value,Kt=kt.id;Et[At][Mt]=Et[At][Mt].filter(function(_n){return Ot&&_n.eventStream.value&&_n.eventStream.value!==Ot||_n.id!==Kt}),Et[At][Mt].length===0&&delete Et[At][Mt]}catch(_n){ie.error(_n)}}(Ne,xe))}})}catch(xe){ie.error(xe)}}function tt(Ne){try{for(var lt in Ne)Ne.hasOwnProperty(lt)&&Object.keys(Ne[lt]).length===0&&delete Ne[lt]}catch($e){ie.error($e)}}function ft(Ne,lt){var $e=arguments.length>2&&arguments[2]!==void 0&&arguments[2],xe=Ne.eventStream.schemeIdUri,et=Ne.eventStream.value,Et=Ne.id,kt="discarded";lt[xe]||(lt[xe]=[]);var Mt=lt[xe].findIndex(function(Ot){return(!et||Ot.eventStream.value&&Ot.eventStream.value===et)&&Ot.id===Et});if(Mt===-1)lt[xe].push(Ne),Ne.triggeredReceivedEvent=!1,Ne.triggeredStartEvent=!1,kt=qe;else if($e){var At=lt[xe][Mt];Ne.triggeredReceivedEvent=At.triggeredReceivedEvent,Ne.triggeredStartEvent=At.triggeredStartEvent,lt[xe][Mt]=Ne,kt=We}return kt}function he(Ne){try{if(Ne.eventStream.value==1){var lt,$e=Ne.calculatedPresentationTime;lt=Ne.calculatedPresentationTime==4294967295?NaN:Ne.calculatedPresentationTime+Ne.duration,ot.trigger(r.Z.MANIFEST_VALIDITY_CHANGED,{id:Ne.id,validUntil:$e,newDuration:lt,newManifestValidAfter:NaN},{mode:r.Z.EVENT_MODE_ON_START})}}catch(xe){ie.error(xe)}}function Le(Ne){try{var lt=Oe.getTime();Ve(Ne,function($e){var xe=$e.eventStream&&$e.eventStream.period&&!isNaN($e.eventStream.period.duration)?$e.eventStream.period.duration:NaN,et=$e.eventStream&&$e.eventStream.period&&!isNaN($e.eventStream.period.start)?$e.eventStream.period.start:NaN;if(!isNaN(xe)&&!isNaN(et)){var Et=$e.calculatedPresentationTime;Math.abs(Et-lt)<300&&Pe($e,r.Z.EVENT_MODE_ON_START)}})}catch($e){ie.error($e)}}function Ve(Ne,lt){try{if(Ne)for(var $e=Object.keys(Ne),xe=0;xe<$e.length;xe++)for(var et=Ne[$e[xe]],Et=Object.keys(et),kt=0;kt<Et.length;kt++)et[Et[kt]].forEach(function(Mt){Mt!==void 0&&lt(Mt)})}catch(Mt){ie.error(Mt)}}function Fe(Ne,lt,$e){try{return Ne-lt>$e}catch(xe){return ie.error(xe),!1}}function Pe(Ne,lt){try{var $e=Oe.getTime(),xe=Ne.id;if(lt===r.Z.EVENT_MODE_ON_RECEIVE&&!Ne.triggeredReceivedEvent)return ie.debug("Received event ".concat(xe)),Ne.triggeredReceivedEvent=!0,void ot.trigger(Ne.eventStream.schemeIdUri,{event:Ne},{mode:lt});Ne.triggeredStartEvent||(Ne.eventStream.schemeIdUri===De&&Ne.eventStream.value==1?Ne.duration===0&&Ne.presentationTimeDelta===0||(ie.debug("Starting manifest refresh event ".concat(xe," at ").concat($e)),function(){try{ct(),ye.refreshManifest()}catch(et){ie.error(et)}}()):Ne.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&Ne.eventStream.value==1?(ie.debug("Starting callback event ".concat(xe," at ").concat($e)),function(et){try{(0,Tt.Z)(vt).create({}).load({method:"get",url:et,request:{responseType:"arraybuffer"}})}catch(Et){ie.error(Et)}}(Ne.messageData)):(ie.debug("Starting event ".concat(xe," from period ").concat(Ne.eventStream.period.id," at ").concat($e)),ot.trigger(Ne.eventStream.schemeIdUri,{event:Ne},{mode:lt})),Ne.triggeredStartEvent=!0)}catch(et){ie.error(et)}}return ae={addInlineEvents:function(Ne,lt){try{if(ct(),se[lt]||(se[lt]={}),Ne)for(var $e=0;$e<Ne.length;$e++){var xe=Ne[$e];if(!Fe(Oe.getTime(),isNaN(xe.duration)?0:xe.duration,xe.calculatedPresentationTime)){var et=ft(xe,se[lt],!0);et===qe?(ie.debug("Added inline event with id ".concat(xe.id," from period ").concat(lt)),Pe(xe,r.Z.EVENT_MODE_ON_RECEIVE)):et===We&&ie.debug("Updated inline event with id ".concat(xe.id," from period ").concat(lt))}}}catch(Et){throw Et}},addInbandEvents:function(Ne,lt){try{ct(),Re[lt]||(Re[lt]={});for(var $e=0;$e<Ne.length;$e++){var xe=Ne[$e];Fe(Oe.getTime(),isNaN(xe.duration)?0:xe.duration,xe.calculatedPresentationTime)||(ft(xe,Re[lt],!1)===qe?(xe.eventStream.schemeIdUri===De&&he(xe),ie.debug("Added inband event with id ".concat(xe.id," from period ").concat(lt)),Pe(xe,r.Z.EVENT_MODE_ON_RECEIVE)):ie.debug("Inband event with scheme_id_uri ".concat(xe.eventStream.schemeIdUri,", value ").concat(xe.eventStream.value,", period id ").concat(lt," and event id ").concat(xe.id," was ignored because it has been added before.")))}Me()}catch(et){throw et}},getInbandEvents:function(){return Re},getInlineEvents:function(){return se},start:function(){try{ct(),ie.debug("Start Event Controller");var Ne=je.get().streaming.eventControllerRefreshDelay;Be||isNaN(Ne)||(Be=!0,Ae=setInterval(Me,Ne))}catch(lt){throw lt}},setConfig:function(Ne){try{if(!Ne)return;Ne.manifestUpdater&&(ye=Ne.manifestUpdater),Ne.playbackController&&(Oe=Ne.playbackController),Ne.settings&&(je=Ne.settings)}catch(lt){throw lt}},reset:function(){(function(){try{Ae!==null&&Be&&(clearInterval(Ae),Ae=null,Be=!1,function(){try{Le(Re),Le(se)}catch(Ne){ie.error(Ne)}}())}catch(Ne){throw Ne}})(),mt()}},ie=(0,d.Z)(vt).getInstance().getLogger(ae),mt(),ae}io.__dashjs_factory_name="EventController";const qo=g.Z.getSingletonFactory(io),Ai={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function To(ae,ie){(ie==null||ie>ae.length)&&(ie=ae.length);for(var se=0,Re=new Array(ie);se<ie;se++)Re[se]=ae[se];return Re}function ia(){var ae,ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We,qe,vt,ot,ct,mt,Me,st,tt,ft,he,Le,Ve,Fe,Pe,Ne,lt,$e,xe,et,Et,kt,Mt,At,Ot,Kt,_n,Jt,un,Cn,mn,St,gt,Rt,It,xt,zt=this.context,qt=(0,y.Z)(zt).getInstance();function In(){if(!(ve&&ve.hasOwnProperty("load")&&tt&&tt.hasOwnProperty("initialize")&&tt.hasOwnProperty("reset")&&tt.hasOwnProperty("getClientTimeOffset")&&ye&&st&&je&&Et))throw new Error(l.Z.MISSING_CONFIG_ERROR)}function Pn(){(function(){try{var Qt=Oe.getStreamsInfo();if(!he&&Qt.length===0)throw new Error("There are no periods in the MPD");he&&Qt.length>0&&je.updateManifestUpdateInfo({currentTime:Et.getTime(),buffered:et.getBufferRange(),presentationStartTime:Qt[0].start,clientTimeOffset:tt.getClientTimeOffset()}),ft.length>0&&function(gi){gi.length!==0?ft=ft.filter(function(er){var ba=gi.filter(function(sa){return sa.id===er.getId()}).length>0||er.getId()===he.getId();return ba||(ie.debug("Removing stream ".concat(er.getId())),er.reset(!0)),ba}):ie.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(Qt);for(var Mn=[],_r=0,Fr=Qt.length;_r<Fr;_r++){var bi=Qt[_r];Mn.push(ar(bi)),je.addManifestUpdateStreamInfo(bi)}Promise.all(Mn).then(function(){return new Promise(function(gi,er){he?gi():lr(Qt,gi,er)})}).then(function(){qt.trigger(i.Z.STREAMS_COMPOSED),Wn()}).catch(function(gi){throw gi})}catch(gi){st.error(new p.Z(U.MANIFEST_ERROR_ID_NOSTREAMS_CODE,gi.message+" nostreamscomposed",ye.getValue())),$e=!0,hu()}})()}function yr(){gt=!0}function ar(Qt){var Mn=Bu(Qt.id);return Mn?Mn.updateData(Qt):(Mn=ga(zt).create({manifestModel:ye,mediaPlayerModel:Mt,dashMetrics:je,manifestUpdater:Ae,adapter:Oe,timelineConverter:tt,capabilities:se,capabilitiesFilter:Re,errHandler:st,baseURLController:We,segmentBaseController:qe,textController:Ve,abrController:ot,playbackController:Et,eventController:mt,mediaController:ct,protectionController:Le,videoModel:et,streamInfo:Qt,settings:St}),ft.push(Mn),Mn.initialize(),Promise.resolve())}function lr(Qt,Mn,_r){try{Yt();var Fr=je.getCurrentDVRInfo().range;if(Fr.end<Fr.start){Rt&&clearTimeout(Rt);var bi=Math.min(1e3*(-1*(Fr.end-Fr.start)+2),2147483647);return ie.debug("Waiting for ".concat(bi," ms before playback can start")),qt.trigger(i.Z.AST_IN_FUTURE,{delay:bi}),void(Rt=setTimeout(function(){lr(Qt,Mn,_r)},bi))}St.get().streaming.applyProducerReferenceTime&&kt.calculateProducerReferenceTimeOffsets(Qt);var gi=Qt[0].manifestInfo;if(St.get().streaming.applyServiceDescription&&kt.applyServiceDescription(gi),Oe.getIsDynamic()){var er=Gr(Qt,gi);Et.computeAndSetLiveDelay(er,gi)}(St.get().streaming.applyContentSteering&&De.shouldQueryBeforeStart()?De.loadSteeringData():Promise.resolve()).then(function(){var ba=ye.getValue();ba&&We.update(ba),ur(),Mn()}).catch(function(ba){ie.error(ba),ur(),Mn()})}catch(ba){_r(ba)}}function ur(){var Qt=function(){var Fr;if(Oe.getIsDynamic()){var bi=je.getCurrentDVRInfo();Fr=(bi&&bi.range?bi.range.end:0)-Et.getOriginalLiveDelay();var gi=bi?bi.range:null;if(gi){if(isNaN(It)&&It.toString().indexOf("posix:")===-1){var er=$a(!0);isNaN(er)||(ie.info("Start time from URI parameters: ".concat(er)),Fr=Math.min(Fr,er))}else{ie.info("Start time provided by the app: ".concat(It));var ba=Fa(!0,It);isNaN(ba)||(Fr=Math.min(Fr,ba))}var sa=St.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;Fr=Math.max(Fr,gi.start+sa)}}else if(Fr=Hu()[0].getStreamInfo().start,isNaN(It)){var Ya=$a(!1);isNaN(Ya)||(ie.info("Start time from URI parameters: ".concat(Ya)),Fr=Math.max(Fr,Ya))}else{ie.info("Start time provided by the app: ".concat(It));var Sa=Fa(!1,It);isNaN(Sa)||(Fr=Math.max(Fr,Sa))}return Fr}(),Mn=$n(Qt),_r=Mn!==null?Mn:ft[0];qt.trigger(i.Z.INITIAL_STREAM_SWITCH,{startTime:Qt}),wr(_r,null,Qt),Jt||(Jt=setInterval(function(){!Ne&&Et.getTimeToStreamEnd()<=0&&!Et.isSeeking()&&qt.trigger(i.Z.PLAYBACK_ENDED,{isLast:Ks().isLast})},200))}function wr(Qt,Mn,_r){try{if(Ne||!Qt||Mn===Qt&&Qt.getIsActive())return;Ne=!0,qt.trigger(i.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:Mn?Mn.getStreamInfo():null,toStreamInfo:Qt.getStreamInfo()});var Fr=!1;he=Qt,Mn&&(Fr=Sn(Qt,Mn),Mn.deactivate(Fr)),_r=isNaN(_r)?!Fr&&Mn?Qt.getStreamInfo().start:NaN:_r,ie.info("Switch to stream ".concat(Qt.getId(),". Seektime is ").concat(_r,", current playback time is ").concat(Et.getTime(),". Seamless period switch is set to ").concat(Fr)),Cn=Cn.filter(function(bi){return bi.getId()!==he.getId()}),Et.initialize(Ks(),!!Mn),et.getElement()?Jr(_r,Fr,!1):Xr(_r,Fr)}catch{Ne=!1}}function Jr(Qt,Mn){var _r,Fr=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function bi(){if(xe&&xe.readyState==="open"){ie.debug("MediaSource is open!"),window.URL.revokeObjectURL(_r),xe.removeEventListener("sourceopen",bi),xe.removeEventListener("webkitsourceopen",bi),Ea();var er=je.getCurrentDVRInfo();He.setSeekable(er.range.start,er.range.end),Fr?(isNaN(Qt)||Et.seek(Qt,!0,!0),he.setMediaSource(xe).then(function(){he.initializeForTextWithMediaSource(xe)})):Xr(Qt,Mn)}}function gi(){xe.addEventListener("sourceopen",bi,!1),xe.addEventListener("webkitsourceopen",bi,!1),_r=He.attachMediaSource(et),ie.debug("MediaSource attached to element.  Waiting on open...")}xe?Mn?Xr(Qt,Mn):(He.detachMediaSource(et),gi()):(xe=He.createMediaSource(),gi())}function Xr(Qt,Mn){he.activate(xe,Mn?un:void 0,Qt).then(function(_r){if(_r){var Fr=Object.keys(_r);Fr.length>0&&_r[Fr[0]].getBuffer().changeType&&(mn=!0),un=_r}isNaN(Qt)||(qt.trigger(i.Z.SEEK_TARGET,{time:Qt},{streamId:he.getId()}),Et.seek(Qt,!1,!0),he.startScheduleControllers()),Ne=!1,qt.trigger(i.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Ks()})})}function ri(Qt){var Mn=$n(Qt.seekTime);Mn&&Mn!==he?Mn&&Mn!==he&&(hi(),function(_r,Fr){var bi=_r&&!isNaN(_r.seekTime)?_r.seekTime:NaN,gi=he.getProcessors().map(function(er){return er.prepareOuterPeriodPlaybackSeeking(_r)});Promise.all(gi).then(function(){wr(Fr,he,bi)}).catch(function(er){st.error(er)})}(Qt,Mn)):(hi(),function(_r){he.getProcessors().forEach(function(Fr){return Fr.prepareInnerPeriodPlaybackSeeking(_r)}),zo(Ke.USER_REQUEST_STOP_REASON)}(Qt)),is(Ye.SEEK_START_REASON)}function hi(){Ei()}function Ei(){Cn&&Cn.length>0&&(Cn.forEach(function(Qt){Qt.deactivate(!0)}),Cn=[])}function ui(Qt){Qt.newMediaInfo.streamInfo.id===he.getId()&&(Ei(),he.prepareTrackChange(Qt))}function Sn(Qt,Mn){try{return St.get().streaming.buffer.reuseExistingSourceBuffers&&(Mn.isProtectionCompatible(Qt)||gt)&&(mn&&St.get().streaming.buffer.useChangeTypeForTrackSwitch||Mn.isMediaCodecCompatible(Qt,Mn))}catch{return!1}}function sr(Qt){var Mn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;xe&&!Qt.getPreloaded()&&Sn(Qt,Mn)&&Qt.startPreloading(xe,un).then(function(){Cn.push(Qt)})}function $n(Qt){if(isNaN(Qt))return null;for(var Mn=ft.length,_r=0;_r<Mn;_r++){var Fr=ft[_r];if(Qt<parseFloat((Fr.getStartTime()+Fr.getDuration()).toFixed(5)))return Fr}return null}function Yt(){try{var Qt=Oe.getIsDynamic(),Mn=Oe.getStreamsInfo()[0].manifestInfo,_r=Et.getTime(),Fr=tt.calcTimeShiftBufferWindow(ft,Qt),bi=Zi();if(Fr.start===void 0||Fr.end===void 0)return;bi&&bi.length!==0?bi.forEach(function(gi){je.addDVRInfo(gi.getType(),_r,Mn,Fr)}):je.addDVRInfo(l.Z.VIDEO,_r,Mn,Fr)}catch{}}function yn(Qt){if(Kt&&Pe){var Mn=Mt.getInitialBufferLevel(),_r=[l.Z.TEXT];(isNaN(Mn)||Mn<=Et.getBufferLevel(_r)||Oe.getIsDynamic()&&Mn>Et.getLiveDelay())&&(Kt=!1,is(Ye.INITIAL_PLAYOUT_START_REASON),Et.play())}Qt&&Qt.mediaType&&je.addBufferLevel(Qt.mediaType,new Date,1e3*Qt.bufferLevel)}function Ht(Qt){Qt.streamInfo.id===he.getId()&&Qt.reason&&Qt.reason.forceReplace&&Ei(),Bu(Qt.streamInfo.id).prepareQualityChange(Qt)}function tn(){if(Oe.getIsDynamic()&&Et.getOriginalLiveDelay()!==0&&he){var Qt=Oe.getStreamsInfo();if(Qt.length>0){var Mn=Qt[0].manifestInfo,_r=Gr(Qt,Mn);Et.computeAndSetLiveDelay(_r,Mn)}}}function rt(){if(Ss()){var Qt=et.getPlaybackQuality();Qt&&je.addDroppedFrames(Qt)}}function Pt(){ie.debug("[onPlaybackStarted]"),!Kt&&Ot&&is(Ye.RESUME_FROM_PAUSE_START_REASON),Kt&&(Kt=!1),_n&&(_n=!1,St.get().streaming.applyContentSteering&&!De.shouldQueryBeforeStart()&&De.loadSteeringData()),Ot=!1}function an(Qt){ie.debug("[onPlaybackPaused]"),Qt.ended||(Ot=!0,zo(Ke.USER_REQUEST_STOP_REASON))}function On(Qt){ie.debug("Stream with id ".concat(Qt.streamInfo.id," finished buffering"));var Mn=Qt.streamInfo.isLast;xe&&Mn?(ie.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),He.signalEndOfStream(xe)):Wn()}function Wn(){if(he&&he.getHasFinishedBuffering())for(var Qt=function(){var bi=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var gi=bi||he||null;if(gi){var er=gi.getStreamInfo();return ft.filter(function(ba){var sa=ba.getStreamInfo();return sa.start>er.start&&er.id!==sa.id})}}catch{return[]}}(he),Mn=0;Mn<Qt.length;){var _r=Qt[Mn],Fr=Mn===0?he:Qt[Mn-1];!_r.getPreloaded()&&Fr.getHasFinishedBuffering()&&xe&&sr(_r,Fr),Mn+=1}}function mr(){Jt&&(clearInterval(Jt),Jt=null)}function Zi(){return he?he.getProcessors():[]}function Pa(Qt){if(he&&!he.getIsEndedEventSignaled()){he.setIsEndedEventSignaled(!0);var Mn=function(){var _r=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||he||null;if(!_r)return null;for(var Fr=_r.getStreamInfo(),bi=Fr.start,gi=0,er=-1,ba=NaN;gi<ft.length;){var sa=ft[gi].getStreamInfo(),Ya=sa.start-bi;Ya>0&&(isNaN(ba)||Ya<ba)&&Fr.id!==sa.id&&(ba=Ya,er=gi),gi+=1}return er>=0?ft[er]:null}();Mn?(ie.debug("StreamController onEnded, found next stream with id ".concat(Mn.getStreamInfo().id,". Switching from ").concat(he.getStreamInfo().id," to ").concat(Mn.getStreamInfo().id)),wr(Mn,he,NaN)):(ie.debug("StreamController no next stream found"),he.setIsEndedEventSignaled(!1)),zo(Mn?Ke.END_OF_PERIOD_STOP_REASON:Ke.END_OF_CONTENT_STOP_REASON)}Qt&&Qt.isLast&&(mr(),De.stopSteeringRequestTimer())}function Ea(Qt){var Mn=Qt||Ks().manifestInfo.duration;He.setDuration(Mn)}function $a(Qt){var Mn=vt.getURIFragmentData();if(!Mn||!Mn.t)return NaN;var _r=Hu()[0].getStreamInfo().start;return Mn.t=Mn.t.split(",")[0],Co(Qt,Mn.t,_r)}function Fa(Qt,Mn){var _r=0;return Qt||(_r=Hu()[0].getStreamInfo().start),Co(Qt,Mn,_r)}function Co(Qt,Mn,_r){var Fr=Oe.getRegularPeriods()[0],bi=Mn.toString(),gi=bi.indexOf("posix:")!==-1?bi.substring(6)==="now"?Date.now()/1e3:parseFloat(bi.substring(6)):NaN;return Qt&&!isNaN(gi)?tt.calcPresentationTimeFromWallTime(new Date(1e3*gi),Fr):parseFloat(bi)+_r}function Gr(Qt,Mn){try{var _r=NaN;if(Mn&&!isNaN(Mn.maxFragmentDuration)&&isFinite(Mn.maxFragmentDuration))return Mn.maxFragmentDuration;if(Qt&&Qt.length===1){var Fr=Qt[0],bi=[l.Z.VIDEO,l.Z.AUDIO,l.Z.TEXT].reduce(function(er,ba){var sa=Oe.getMediaInfoForType(Fr,ba);return sa&&sa.isFragmented!==!1&&er.push(sa),er},[]).reduce(function(er,ba){var sa=Oe.getVoRepresentations(ba);return sa&&sa.length>0&&sa.forEach(function(Ya){Ya&&er.push(Ya)}),er},[]).reduce(function(er,ba){var sa=Oe.convertRepresentationToRepresentationInfo(ba);return sa&&sa.fragmentDuration&&!isNaN(sa.fragmentDuration)&&er.push(sa.fragmentDuration),er},[]);_r=Math.max.apply(Math,function(er){if(Array.isArray(er))return To(er)}(gi=bi)||function(er){if(typeof Symbol<"u"&&Symbol.iterator in Object(er))return Array.from(er)}(gi)||function(er,ba){if(er){if(typeof er=="string")return To(er,ba);var sa=Object.prototype.toString.call(er).slice(8,-1);return sa==="Object"&&er.constructor&&(sa=er.constructor.name),sa==="Map"||sa==="Set"?Array.from(er):sa==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(sa)?To(er,ba):void 0}}(gi)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())}return isFinite(_r)?_r:NaN}catch{return NaN}var gi}function Bo(Qt){if(Qt.error)$e=!0,hu();else{ie.info("Manifest updated... updating data system wide.");var Mn=Qt.manifest;Oe.updatePeriods(Mn);var _r=Oe.getUTCTimingSources();!Oe.getIsDynamic()||_r&&_r.length!==0||qt.trigger(r.Z.CONFORMANCE_VIOLATION,{level:Ai.LEVELS.WARNING,event:Ai.EVENTS.NO_UTC_TIMING_ELEMENT});var Fr=Oe.getIsDynamic()?_r.concat(At.getUTCTimingSources()):_r;Re.filterUnsupportedFeatures(Mn).then(function(){We.initialize(Mn),Be.attemptSync(Fr,Oe.getIsDynamic())})}}function Ss(){return!!he&&he.getHasVideoTrack()}function ko(){return!!he&&he.getHasAudioTrack()}function zo(Qt,Mn){Mn=Mn||new Date,Zi().forEach(function(_r){_r.finalisePlayList(Mn,Qt)}),je.addPlayList()}function is(Qt){je.createPlaylistMetrics(1e3*Et.getTime(),Qt)}function Mo(Qt){if(Qt.error){var Mn="";switch(Qt.error.code){case 1:Mn="MEDIA_ERR_ABORTED";break;case 2:Mn="MEDIA_ERR_NETWORK";break;case 3:Mn="MEDIA_ERR_DECODE",xt.counts.mediaErrorDecode+=1;break;case 4:Mn="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:Mn="MEDIA_ERR_ENCRYPTED";break;default:Mn="UNKNOWN"}Mn==="MEDIA_ERR_DECODE"&&St.get().errors.recoverAttempts.mediaErrorDecode>=xt.counts.mediaErrorDecode?function(){ie.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var _r=Et.getTime();he.deactivate(!1),ie.warn("MediaSource has been resetted. Resuming playback from time ".concat(_r)),Jr(_r,!1,!1)}():(lt=!0,Qt.error.message&&(Mn+=" ("+Qt.error.message+")"),Qt.error.msExtendedCode&&(Mn+=" (0x"+(Qt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),ie.fatal("Video Element Error: "+Mn),Qt.error&&ie.fatal(Qt.error),st.error(new p.Z(Qt.error.code,Mn)),hu())}}function Ks(){return he?he.getStreamInfo():null}function Bu(Qt){for(var Mn=0,_r=ft.length;Mn<_r;Mn++)if(ft[Mn].getId()===Qt)return ft[Mn];return null}function ju(Qt){isNaN(Qt.newDuration)||Ea(Qt.newDuration)}function du(){ft=[],It=NaN,Le=null,Ne=!1,he=null,lt=!1,$e=!1,Kt=!0,_n=!0,Ot=!1,Pe=!0,Jt=null,gt=!1,mn=!1,Cn=[],Rt=null,xt={counts:{mediaErrorDecode:0}}}function hu(){In(),Be.reset(),zo(lt||$e?Ke.FAILURE_STOP_REASON:Ke.USER_REQUEST_STOP_REASON);for(var Qt=0,Mn=ft?ft.length:0;Qt<Mn;Qt++)ft[Qt].reset(lt);qt.off(r.Z.PLAYBACK_TIME_UPDATED,rt,ae),qt.off(r.Z.PLAYBACK_SEEKING,ri,ae),qt.off(r.Z.PLAYBACK_ERROR,Mo,ae),qt.off(r.Z.PLAYBACK_STARTED,Pt,ae),qt.off(r.Z.PLAYBACK_PAUSED,an,ae),qt.off(r.Z.PLAYBACK_ENDED,Pa,ae),qt.off(r.Z.METRIC_ADDED,Gu,ae),qt.off(r.Z.MANIFEST_VALIDITY_CHANGED,ju,ae),qt.off(r.Z.BUFFER_LEVEL_UPDATED,yn,ae),qt.off(r.Z.QUALITY_CHANGE_REQUESTED,Ht,ae),i.Z.KEY_SESSION_UPDATED&&qt.off(i.Z.KEY_SESSION_UPDATED,yr,ae),qt.off(i.Z.MANIFEST_UPDATED,Bo,ae),qt.off(i.Z.STREAM_BUFFERING_COMPLETED,On,ae),qt.off(i.Z.TIME_SYNCHRONIZATION_COMPLETED,Pn,ae),qt.off(i.Z.CURRENT_TRACK_CHANGED,ui,ae),qt.off(i.Z.SETTING_UPDATED_LIVE_DELAY,tn,ae),qt.off(i.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,tn,ae),We.reset(),Ae.reset(),mt.reset(),je.clearAllCurrentMetrics(),ye.setValue(null),ve.reset(),tt.reset(),Me.reset(),xe&&(He.detachMediaSource(et),xe=null),et=null,Le&&(Le=null,Fe=null,ye.getValue()&&qt.trigger(i.Z.PROTECTION_DESTROYED,{data:ye.getValue().url})),mr(),qt.trigger(i.Z.STREAM_TEARDOWN_COMPLETE),du()}function Gu(Qt){if(Qt.metric===h.Z.DVR_INFO){var Mn=ko()?l.Z.AUDIO:l.Z.VIDEO;Qt.mediaType===Mn&&He.setSeekable(Qt.value.range.start,Qt.value.range.end)}}function Hu(){return ft}return ae={initialize:function(Qt,Mn){In(),Pe=Qt,Fe=Mn,tt.initialize(),(Ae=ma(zt).create()).setConfig({manifestModel:ye,adapter:Oe,manifestLoader:ve,errHandler:st,settings:St,contentSteeringController:De}),Ae.initialize(),(mt=qo(zt).getInstance()).setConfig({manifestUpdater:Ae,playbackController:Et,settings:St}),mt.start(),Be.setConfig({dashMetrics:je,baseURLController:We,errHandler:st,settings:St}),Be.initialize(),Le&&(qt.trigger(i.Z.PROTECTION_CREATED,{controller:Le}),Le.setMediaElement(et.getElement()),Fe&&Le.setProtectionData(Fe)),qt.on(r.Z.PLAYBACK_TIME_UPDATED,rt,ae),qt.on(r.Z.PLAYBACK_SEEKING,ri,ae),qt.on(r.Z.PLAYBACK_ERROR,Mo,ae),qt.on(r.Z.PLAYBACK_STARTED,Pt,ae),qt.on(r.Z.PLAYBACK_PAUSED,an,ae),qt.on(r.Z.PLAYBACK_ENDED,Pa,ae),qt.on(r.Z.METRIC_ADDED,Gu,ae),qt.on(r.Z.MANIFEST_VALIDITY_CHANGED,ju,ae),qt.on(r.Z.BUFFER_LEVEL_UPDATED,yn,ae),qt.on(r.Z.QUALITY_CHANGE_REQUESTED,Ht,ae),i.Z.KEY_SESSION_UPDATED&&qt.on(i.Z.KEY_SESSION_UPDATED,yr,ae),qt.on(i.Z.MANIFEST_UPDATED,Bo,ae),qt.on(i.Z.STREAM_BUFFERING_COMPLETED,On,ae),qt.on(i.Z.TIME_SYNCHRONIZATION_COMPLETED,Pn,ae),qt.on(i.Z.CURRENT_TRACK_CHANGED,ui,ae),qt.on(i.Z.SETTING_UPDATED_LIVE_DELAY,tn,ae),qt.on(i.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,tn,ae)},getActiveStreamInfo:Ks,addDVRMetric:Yt,hasVideoTrack:Ss,hasAudioTrack:ko,getStreamById:Bu,getStreamForTime:$n,getTimeRelativeToStreamId:function(Qt,Mn){for(var _r=null,Fr=0,bi=0,gi=null,er=0;er<ft.length;er++){if(bi=(_r=ft[er]).getStartTime(),gi=_r.getDuration(),Number.isFinite(bi)&&(Fr=bi),_r.getId()===Mn)return Qt-Fr;Number.isFinite(gi)&&(Fr+=gi)}return null},load:function(Qt){var Mn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;In(),It=Mn,ve.load(Qt)},loadWithManifest:function(Qt){var Mn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;(function(){if(!Ae||!Ae.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")})(),It=Mn,Ae.setManifest(Qt)},getActiveStreamProcessors:Zi,setConfig:function(Qt){Qt&&(Qt.capabilities&&(se=Qt.capabilities),Qt.capabilitiesFilter&&(Re=Qt.capabilitiesFilter),Qt.manifestLoader&&(ve=Qt.manifestLoader),Qt.manifestModel&&(ye=Qt.manifestModel),Qt.mediaPlayerModel&&(Mt=Qt.mediaPlayerModel),Qt.customParametersModel&&(At=Qt.customParametersModel),Qt.protectionController&&(Le=Qt.protectionController),Qt.adapter&&(Oe=Qt.adapter),Qt.dashMetrics&&(je=Qt.dashMetrics),Qt.errHandler&&(st=Qt.errHandler),Qt.timelineConverter&&(tt=Qt.timelineConverter),Qt.videoModel&&(et=Qt.videoModel),Qt.playbackController&&(Et=Qt.playbackController),Qt.serviceDescriptionController&&(kt=Qt.serviceDescriptionController),Qt.contentSteeringController&&(De=Qt.contentSteeringController),Qt.textController&&(Ve=Qt.textController),Qt.abrController&&(ot=Qt.abrController),Qt.mediaController&&(ct=Qt.mediaController),Qt.settings&&(St=Qt.settings),Qt.baseURLController&&(We=Qt.baseURLController),Qt.uriFragmentModel&&(vt=Qt.uriFragmentModel),Qt.segmentBaseController&&(qe=Qt.segmentBaseController))},setProtectionData:function(Qt){Fe=Qt,Le&&Le.setProtectionData(Fe)},getIsStreamSwitchInProgress:function(){return Ne},switchToVideoElement:function(Qt){he&&(Et.initialize(Ks()),Jr(Qt,!1,!0))},getHasMediaOrInitialisationError:function(){return lt||$e},getStreams:Hu,getActiveStream:function(){return he},getInitialPlayback:function(){return Kt},getAutoPlay:function(){return Pe},reset:hu},ie=(0,d.Z)(zt).getInstance().getLogger(ae),Be=Uo(zt).getInstance(),He=Qa(zt).getInstance(),Me=Ue(zt).getInstance(),du(),ae}ia.__dashjs_factory_name="StreamController";const wa=g.Z.getSingletonFactory(ia);function Ci(){var ae,ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We=this.context,qe=(0,y.Z)(We).getInstance();function vt(){De.debug("Stopping the gap controller"),Ae&&(clearInterval(Ae),Ae=null),function(){qe.off(i.Z.WALLCLOCK_TIME_UPDATED,st,this),qe.off(i.Z.INITIAL_STREAM_SWITCH,Me,this),qe.off(i.Z.PLAYBACK_SEEKING,ot,this),qe.off(i.Z.BUFFER_REPLACEMENT_STARTED,ct,ae),qe.off(i.Z.TRACK_CHANGE_RENDERED,mt,ae)}(),Ae=null,ve=NaN,Re=0,He=null,Be={}}function ot(){He&&(clearTimeout(He),He=null)}function ct(he){try{if(he.streamId!==Oe.getActiveStreamInfo().id||he.mediaType!==l.Z.VIDEO&&he.mediaType!==l.Z.AUDIO)return;he.streamId===Oe.getActiveStreamInfo().id&&(Be[he.mediaType]=!0)}catch(Le){De.error(Le)}}function mt(he){he&&he.mediaType&&(Be[he.mediaType]=!1)}function Me(){Ae||function(){try{Ae||(De.debug("Starting the gap controller"),Ae=setInterval(function(){tt()&&ft(ye.getTime())},100))}catch{}}()}function st(){if(tt(se.get().streaming.gaps.enableSeekFix)&&++Re>=10){var he=ye.getTime();ie===he?ft(he,!0):(ie=he,ve=NaN),Re=0}}function tt(){var he=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!Oe.getActiveStream())return!1;var Le=Object.keys(Be).some(function(Fe){return Be[Fe]}),Ve=!!he&&function(){var Fe=Oe.getActiveStream(),Pe=parseFloat((Fe.getStartTime()+Fe.getDuration()).toFixed(5));return ye.getTime()+se.get().streaming.gaps.threshold>=Pe}();return!Le&&se.get().streaming.gaps.jumpGaps&&Oe.getActiveStreamProcessors().length>0&&(!ye.isSeeking()||Ve)&&!ye.isPaused()&&!Oe.getIsStreamSwitchInProgress()&&!Oe.getHasMediaOrInitialisationError()}function ft(he){var Le,Ve=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Fe=se.get().streaming.gaps.enableStallFix,Pe=se.get().streaming.gaps.stallSeek,Ne=se.get().streaming.gaps.smallGapLimit,lt=se.get().streaming.gaps.jumpLargeGaps,$e=je.getBufferRange(),xe=NaN,et=!1;if(Le=function(Cn,mn){try{if(!Cn||Cn.length<=1&&mn>0)return NaN;for(var St=NaN,gt=0;isNaN(St)&&gt<Cn.length;){var Rt=gt>0?Cn.end(gt-1):0;mn<Cn.start(gt)&&Rt-mn<se.get().streaming.gaps.threshold&&(St=gt),gt+=1}return St}catch{return null}}($e,he),!isNaN(Le)){var Et=$e.start(Le),kt=Et-he;kt>0&&(kt<=Ne||lt)&&(xe=Et)}var Mt=ye.getTimeToStreamEnd();if(isNaN(xe)&&Ve&&isFinite(Mt)&&!isNaN(Mt)&&Mt<Ne&&(xe=parseFloat(ye.getStreamEndTime().toFixed(5)),et=!0),Fe&&isNaN(xe)&&Ve&&isNaN(Le)&&function(Cn,mn){for(var St=0,gt=Cn.length;St<gt;St++)if(mn>=Cn.start(St)&&mn<=Cn.end(St))return!0;return!1}($e,he)&&(Pe===0?(De.warn("Toggle play pause to break stall"),je.pause(),je.play()):(De.warn("Jumping ".concat(Pe,"s to break stall")),xe=he+Pe)),xe>0&&ve!==xe&&xe>he&&!He){var At=xe-he;if(et){var Ot=Oe.getStreamForTime(xe),Kt=Ot&&!!Ot.getPreloaded();De.warn("Jumping to end of stream because of gap from ".concat(he," to ").concat(xe,". Gap duration: ").concat(At)),ye.seek(xe,!0,Kt)}else{var _n=ye.getIsDynamic(),Jt=Le>0?$e.end(Le-1):he,un=_n?1e3*Math.max(0,At-.1):0;He=window.setTimeout(function(){ye.seek(xe,!0,!0),De.warn("Jumping gap occuring in period ".concat(Oe.getActiveStream().getStreamId()," starting at ").concat(Jt," and ending at ").concat(xe,". Jumping by: ").concat(xe-Jt)),He=null},un)}ve=xe}}return ae={reset:vt,setConfig:function(he){he&&(he.settings&&(se=he.settings),he.playbackController&&(ye=he.playbackController),he.streamController&&(Oe=he.streamController),he.videoModel&&(je=he.videoModel))},initialize:function(){(function(){qe.on(i.Z.WALLCLOCK_TIME_UPDATED,st,this),qe.on(i.Z.INITIAL_STREAM_SWITCH,Me,this),qe.on(i.Z.PLAYBACK_SEEKING,ot,this),qe.on(i.Z.BUFFER_REPLACEMENT_STARTED,ct,ae),qe.on(i.Z.TRACK_CHANGE_RENDERED,mt,ae)})()}},De=(0,d.Z)(We).getInstance().getLogger(ae),vt(),ae}Ci.__dashjs_factory_name="GapController";const pa=g.Z.getSingletonFactory(Ci);function qa(){var ae,ie,se,Re,Ae,ve,ye,Oe,je,He,Be=this.context,De=(0,y.Z)(Be).getInstance();function We(){ie=!1;var ft=zn.Z.parseUserAgent();se=ft&&ft.browser&&ft.browser.name&&ft.browser.name.toLowerCase()==="safari"}function qe(){ie=!1}function vt(ft){if(ft.streamId===ve.getActiveStreamInfo().id&&je){var he=ye.getLiveDelay();ye.getBufferLevel()>he/2&&(je=!1)}}function ot(ft){ft.streamId===ve.getActiveStreamInfo().id&&(je=ft.state===h.Z.BUFFER_EMPTY)}function ct(){Oe.getCatchupModeEnabled()||Re.setPlaybackRate(1)}function mt(){ye.getIsDynamic()&&Oe.getCatchupModeEnabled()&&(Oe.getCatchupPlaybackRates().max>0||Oe.getCatchupPlaybackRates().min<0)&&!ye.isPaused()&&!ye.isSeeking()&&function(){try{return!(!ye.getTime()>0||ie)&&(st()===l.Z.LIVE_CATCHUP_MODE_LOLP?function(ft,he){try{return Math.abs(Me())>0||ft<he}catch{return!1}}(ye.getBufferLevel(),Ae.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(Me())>0}catch{return!1}}())}catch{return!1}}()&&function(){if(!ie&&Re){var ft,he=Re.getPlaybackRate(),Le=Oe.getCatchupPlaybackRates(),Ve=ye.getBufferLevel(),Fe=Me(),Pe=Oe.getCatchupMaxDrift();if(!isNaN(Pe)&&Pe>0&&Fe>Pe)He.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),ie=!0,ye.seekToCurrentLive(!0,!1);else{var Ne=ye.getCurrentLiveLatency(),lt=ye.getLiveDelay();ft=st()===l.Z.LIVE_CATCHUP_MODE_LOLP?function(xe,et,Et,kt,Mt){var At;if(Mt<kt){var Ot=Math.abs(xe.min),Kt=5*(Mt-kt);At=1-Ot+2*Ot/(1+Math.pow(Math.E,-Kt)),He.debug("[LoL+ playback control_buffer-based] bufferLevel: "+Mt+", newRate: "+At)}else{var _n=xe.max;if(Math.abs(et-Et)<=.02*Et)At=1;else{var Jt=5*(et-Et);At=1-_n+2*_n/(1+Math.pow(Math.E,-Jt))}He.debug("[LoL+ playback control_latency-based] latency: "+et+", newRate: "+At)}return At}(Le,Ne,lt,Ae.get().streaming.liveCatchup.playbackBufferMin,Ve):function(xe,et,Et,kt){if(je)return 1;var Mt=et-Et,At=Mt<0?Math.abs(xe.min):xe.max,Ot=5*Mt,Kt=1-At+2*At/(1+Math.pow(Math.E,-Ot));return ye.getPlaybackStalled()&&kt<=Et/2&&Mt>0&&(Kt=1),Kt}(Le,Ne,lt,Ve);var $e=se?.25:.02/(.5/Le.max);ft&&Math.abs(he-ft)>=$e&&(He.debug("[CatchupController]: Setting playback rate to ".concat(ft)),Re.setPlaybackRate(ft))}}}()}function Me(){return ye.getCurrentLiveLatency()-ye.getLiveDelay()}function st(){var ft=Ae.get().streaming.liveCatchup.playbackBufferMin;return Ae.get().streaming.liveCatchup.mode!==l.Z.LIVE_CATCHUP_MODE_LOLP||ft===null||isNaN(ft)?l.Z.LIVE_CATCHUP_MODE_DEFAULT:l.Z.LIVE_CATCHUP_MODE_LOLP}function tt(){Oe.getCatchupPlaybackRates(!0)}return ae={reset:function(){De.off(r.Z.BUFFER_LEVEL_UPDATED,vt,ae),De.off(r.Z.BUFFER_LEVEL_STATE_CHANGED,ot,ae),De.off(r.Z.PLAYBACK_PROGRESS,mt,ae),De.off(r.Z.PLAYBACK_TIME_UPDATED,mt,ae),De.off(r.Z.PLAYBACK_SEEKED,mt,ae),De.off(i.Z.SETTING_UPDATED_CATCHUP_ENABLED,ct,ae),De.off(i.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,tt,ae),De.off(i.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,tt,ae),De.off(r.Z.STREAM_INITIALIZED,tt,ae),We(),Re.setPlaybackRate(1,!0)},setConfig:function(ft){ft&&(ft.settings&&(Ae=ft.settings),ft.videoModel&&(Re=ft.videoModel),ft.streamController&&(ve=ft.streamController),ft.playbackController&&(ye=ft.playbackController),ft.mediaPlayerModel&&(Oe=ft.mediaPlayerModel))},initialize:function(){De.on(r.Z.BUFFER_LEVEL_UPDATED,vt,ae),De.on(r.Z.BUFFER_LEVEL_STATE_CHANGED,ot,ae),De.on(r.Z.PLAYBACK_PROGRESS,mt,ae),De.on(r.Z.PLAYBACK_TIME_UPDATED,mt,ae),De.on(r.Z.PLAYBACK_SEEKED,qe,ae),De.on(i.Z.SETTING_UPDATED_CATCHUP_ENABLED,ct,ae),De.on(i.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,tt,ae),De.on(i.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,tt,ae),De.on(r.Z.STREAM_INITIALIZED,tt,ae),tt()}},He=(0,d.Z)(Be).getInstance().getLogger(ae),We(),ae}qa.__dashjs_factory_name="CatchupController";const jr=g.Z.getSingletonFactory(qa);var Xi=[l.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],Ia="video",Da="audio";function po(){var ae,ie,se,Re,Ae,ve=this.context;function ye(){ie={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},se=[]}function Oe(je,He,Be){try{ie[je][He]=Be/1e3}catch(De){Re.error(De)}}return ae={getServiceDescriptionSettings:function(){return ie},getProducerReferenceTimeOffsets:function(){return se},calculateProducerReferenceTimeOffsets:function(je){try{var He=[];if(je&&je.length>0){var Be=[l.Z.VIDEO,l.Z.AUDIO,l.Z.TEXT],De=Ae.getAvailabilityStartTime()/1e3;je.forEach(function(We){var qe=Be.reduce(function(vt,ot){return vt.concat(Ae.getAllMediaInfoForType(We,ot))},[]).reduce(function(vt,ot){return Ae.getProducerReferenceTimes(We,ot).forEach(function(ct){var mt=Ae.getVoRepresentations(ot);if(mt&&mt.length>0&&mt[0].adaptation&&mt[0].segmentInfoType===c.Z.SEGMENT_TEMPLATE){var Me=mt[0],st=new Date(ct[c.Z.WALL_CLOCK_TIME]).getTime()/1e3-(ct[c.Z.PRESENTATION_TIME]/Me[c.Z.TIMESCALE]-Me[c.Z.PRESENTATION_TIME_OFFSET]+We.start),tt=De-st;vt.push({id:ct[c.Z.ID],to:tt})}}),vt},[]);He=He.concat(qe)})}se=He}catch(We){Re.error(We),se=[]}},applyServiceDescription:function(je){if(je&&je.serviceDescriptions){var He=je.serviceDescriptions.filter(function(We){return Xi.includes(We.schemeIdUri)}),Be=je.serviceDescriptions.filter(function(We){return We.schemeIdUri==null}),De=He.length>0?He[He.length-1]:Be[Be.length-1];De&&(De.latency&&De.latency.target>0&&function(We){var qe;if(We.schemeIdUri,l.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,qe=function(mt){return{liveDelay:mt.latency.target/1e3,maxDrift:!isNaN(mt.latency.max)&&mt.latency.max>mt.latency.target?(mt.latency.max-mt.latency.target+500)/1e3:NaN,referenceId:mt.latency.referenceId||NaN}}(We),se.length>0){var vt=function(mt){var Me,st=0,tt=se.filter(function(ft){return ft.id===mt.referenceId});return tt.length===0?(st=se.length>0?se[0].to:0,Me=se[0].id||NaN):(st=tt[0].to||0,Me=tt[0].id||NaN),{to:st,id:Me}}(qe),ot=vt.to,ct=vt.id;ie.liveDelay=qe.liveDelay-ot,ie.liveCatchup.maxDrift=qe.maxDrift,Re.debug(`
                Found latency properties coming from service description. Applied time offset of `.concat(ot," from ProducerReferenceTime element with id ").concat(ct,`.
                Live Delay: `).concat(qe.liveDelay-ot,", Live catchup max drift: ").concat(qe.maxDrift,`
            `))}else ie.liveDelay=qe.liveDelay,ie.liveCatchup.maxDrift=qe.maxDrift,Re.debug("Found latency properties coming from service description: Live Delay: ".concat(qe.liveDelay,", Live catchup max drift: ").concat(qe.maxDrift))}(De),De.playbackRate&&function(We){var qe=We.playbackRate.min?Math.round(1e3*(We.playbackRate.min-1))/1e3:NaN,vt=We.playbackRate.max?Math.round(1e3*(We.playbackRate.max-1))/1e3:NaN;ie.liveCatchup.playbackRate.min=qe,ie.liveCatchup.playbackRate.max=vt,Re.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(qe)),Re.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(vt))}(De),De.operatingQuality,De.operatingBandwidth&&function(We){if(We&&We.operatingBandwidth&&We.operatingBandwidth.mediaType&&We.operatingBandwidth.mediaType!=="all"){var qe={};qe.minBandwidth=We.operatingBandwidth.min,qe.maxBandwidth=We.operatingBandwidth.max,qe.targetBandwidth=We.operatingBandwidth.target;var vt=[];We.operatingBandwidth.mediaType===Ia||We.operatingBandwidth.mediaType===Da?vt.push(We.operatingBandwidth.mediaType):We.operatingBandwidth.mediaType==="any"&&(vt.push(Da),vt.push(Ia)),vt.forEach(function(ot){isNaN(qe.minBandwidth)||Oe("minBitrate",ot,qe.minBandwidth),isNaN(qe.maxBandwidth)||Oe("maxBitrate",ot,qe.maxBandwidth),isNaN(qe.targetBandwidth)||Oe("initialBitrate",ot,qe.targetBandwidth)})}}(De),De.contentSteering&&function(We){ie.contentSteering=We.contentSteering}(De))}},reset:function(){ye()},setConfig:function(je){je&&je.adapter&&(Ae=je.adapter)}},Re=(0,d.Z)(ve).getInstance().getLogger(ae),ye(),ae}po.__dashjs_factory_name="ServiceDescriptionController";const _o=g.Z.getSingletonFactory(po);var es=I(3973),ps=I.n(es),ts=I(3039);function gs(){var ae,ie,se,Re,Ae,ve,ye,Oe,je=this.context,He=(0,y.Z)(je).getInstance();function Be($e,xe){return $e&&se[xe]&&se[xe][$e]?se[xe][$e].list:[]}function De($e,xe){return $e&&se[xe]&&se[xe][$e]?se[xe][$e].current:null}function We($e){var xe=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if($e&&$e.streamInfo){var et=$e.type,Et=$e.streamInfo.id,kt=De(et,Et);if(se[Et]&&se[Et][et]&&(se[Et][et].current=$e,se[Et][et].current&&(et!==l.Z.TEXT&&!ot($e,kt)||et===l.Z.TEXT&&$e.isFragmented)&&He.trigger(i.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:kt,newMediaInfo:$e,switchMode:Re.get().streaming.trackSwitchMode[et]},{streamId:Et}),!xe)){var Mt=function(At){var Ot={lang:At.lang,viewpoint:At.viewpoint,roles:At.roles,accessibility:At.accessibility,audioChannelConfiguration:At.audioChannelConfiguration};return Ot.lang||Ot.viewpoint||Ot.role&&Ot.role.length>0||Ot.accessibility&&Ot.accessibility.length>0||Ot.audioChannelConfiguration&&Ot.audioChannelConfiguration.length>0?Ot:null}($e);if(!Mt||!se[Et][et].storeLastSettings)return;Mt.roles&&(Mt.role=Mt.roles[0],delete Mt.roles),Mt.accessibility&&(Mt.accessibility=Mt.accessibility[0]),Mt.audioChannelConfiguration&&(Mt.audioChannelConfiguration=Mt.audioChannelConfiguration[0]),ve[et]=Mt,Oe.setSavedMediaSettings(et,Mt)}}}function qe($e,xe){$e&&xe&&(Ae[$e]=xe)}function vt($e){return $e?Ae[$e]:null}function ot($e,xe){if(!$e&&!xe)return!0;if(!$e||!xe)return!1;var et=$e.id===xe.id,Et=$e.viewpoint===xe.viewpoint,kt=JSON.stringify($e.viewpointsWithSchemeIdUri)===JSON.stringify(xe.viewpointsWithSchemeIdUri),Mt=$e.lang===xe.lang,At=$e.codec===xe.codec,Ot=$e.roles.toString()===xe.roles.toString(),Kt=JSON.stringify($e.rolesWithSchemeIdUri)===JSON.stringify(xe.rolesWithSchemeIdUri),_n=$e.accessibility.toString()===xe.accessibility.toString(),Jt=JSON.stringify($e.accessibilitiesWithSchemeIdUri)===JSON.stringify(xe.accessibilitiesWithSchemeIdUri),un=$e.audioChannelConfiguration.toString()===xe.audioChannelConfiguration.toString(),Cn=JSON.stringify($e.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(xe.audioChannelConfigurationsWithSchemeIdUri);return et&&At&&Et&&kt&&Mt&&Ot&&Kt&&_n&&Jt&&un&&Cn}function ct(){se={},ve={},Ae={audio:null,video:null,text:null}}function mt($e,xe,et){var Et=[];return $e.forEach(function(kt){xe(et,kt)&&Et.push(kt)}),Et.length!==0?Et:$e}function Me($e,xe){return!$e.lang||$e.lang instanceof RegExp?xe.lang.match($e.lang):xe.lang!==""&&(0,ts.extendedFilter)(xe.lang,ps()($e.lang)).length>0}function st($e,xe){return $e.index===void 0||$e.index===null||xe.index===$e.index}function tt($e,xe){return!$e.viewpoint||$e.viewpoint===xe.viewpoint}function ft($e,xe){var et=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return!$e.role||!!xe.roles.filter(function(Et){return Et===$e.role})[0]||xe.type===l.Z.AUDIO&&et}function he($e,xe){return $e.accessibility?!!xe.accessibility.filter(function(et){return et===$e.accessibility})[0]:!xe.accessibility.length}function Le($e,xe){return!$e.audioChannelConfiguration||!!xe.audioChannelConfiguration.filter(function(et){return et===$e.audioChannelConfiguration})[0]}function Ve($e){var xe,et=0,Et=[];return $e.forEach(function(kt){(xe=Math.max.apply(Math,kt.bitrateList.map(function(Mt){return Mt.bandwidth})))>et?(et=xe,Et=[kt]):xe===et&&Et.push(kt)}),Et}function Fe($e){var xe,et=1/0,Et=[];return $e.forEach(function(kt){var Mt=kt.bitrateList.reduce(function(At,Ot){var Kt=Math.max(1,Ot.width*Ot.height);return At+Ot.bandwidth/Kt},0);(xe=Mt/kt.bitrateList.length)<et?(et=xe,Et=[kt]):xe===et&&Et.push(kt)}),Et}function Pe($e){var xe,et=0,Et=[];return $e.forEach(function(kt){(xe=kt.representationCount)>et?(et=xe,Et=[kt]):xe===et&&Et.push(kt)}),Et}function Ne($e,xe){if($e===l.Z.TEXT)return xe[0];var et,Et=Re.get().streaming.selectionModeForInitialTrack,kt=ye.getCustomInitialTrackSelectionFunction();if(kt&&typeof kt=="function")et=kt(xe);else switch(Et){case l.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:et=function(Mt){var At,Ot,Kt=(At=0,Ot=[],Mt.forEach(function(_n){isNaN(_n.selectionPriority)||(_n.selectionPriority>At?(At=_n.selectionPriority,Ot=[_n]):_n.selectionPriority===At&&Ot.push(_n))}),Ot);return Kt.length>1&&(Kt=Ve(Kt)),Kt.length>1&&(Kt=Pe(Kt)),Kt}(xe);break;case l.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:et=function(Mt){var At=Ve(Mt);return At.length>1&&(At=Pe(At)),At}(xe);break;case l.Z.TRACK_SELECTION_MODE_FIRST_TRACK:et=lt(xe);break;case l.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:et=function(Mt){var At=Fe(Mt);return At.length>1&&(At=Ve(At)),At}(xe);break;case l.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:et=function(Mt){var At=Pe(Mt);return At.length>1&&(At=Ve(Mt)),At}(xe);break;default:ie.warn("Track selection mode ".concat(Et," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),et=lt(xe)}return et.length>0?et[0]:xe[0]}function lt($e){return $e[0]}return ae={setInitialMediaSettingsForType:function($e,xe){var et=ve[$e]||vt($e),Et=Be($e,xe.id),kt=[];et||qe($e,et=Oe.getSavedMediaSettings($e)),Et&&Et.length!==0&&(et&&(kt=mt(kt=Array.from(Et),Me,et),kt=mt(kt,st,et),kt=mt(kt,tt,et),$e===l.Z.AUDIO&&ve[$e]||(kt=mt(kt,ft,et)),kt=mt(kt,he,et),kt=mt(kt,Le,et)),kt.length===0?We(Ne($e,Et),!0):kt.length>1?We(Ne($e,kt,ve[$e])):We(kt[0]))},addTrack:function($e){if($e){var xe=$e.type;if((et=xe)===l.Z.AUDIO||et===l.Z.VIDEO||et===l.Z.TEXT||et===l.Z.IMAGE){var et,Et=$e.streamInfo.id;se[Et]||(se[Et]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var kt=se[Et][xe].list,Mt=0,At=kt.length;Mt<At;++Mt)if(ot(kt[Mt],$e))return;kt.push($e)}}},getTracksFor:Be,getCurrentTrackFor:De,isCurrentTrack:function($e){if(!$e)return!1;var xe=$e.type,et=$e.streamInfo.id;return se[et]&&se[et][xe]&&ot(se[et][xe].current,$e)},setTrack:We,selectInitialTrack:Ne,setInitialSettings:qe,getInitialSettings:vt,getTracksWithHighestBitrate:Ve,getTracksWithHighestEfficiency:Fe,getTracksWithWidestRange:Pe,isTracksEqual:ot,matchSettings:function($e,xe){var et=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var Et=!1;if($e.lang){if($e.lang instanceof RegExp)Et=xe.lang.match($e.lang);else if(xe.lang!==""){var kt=ps()($e.lang);kt&&(Et=(0,ts.extendedFilter)(xe.lang,kt).length>0)}}else Et=!0;var Mt=$e.index===void 0||$e.index===null||xe.index===$e.index,At=!$e.viewpoint||$e.viewpoint===xe.viewpoint,Ot=!$e.role||!!xe.roles.filter(function(Jt){return Jt===$e.role})[0],Kt=!$e.accessibility||!!xe.accessibility.filter(function(Jt){return Jt===$e.accessibility})[0],_n=!$e.audioChannelConfiguration||!!xe.audioChannelConfiguration.filter(function(Jt){return Jt===$e.audioChannelConfiguration})[0];return Et&&Mt&&At&&(Ot||xe.type===l.Z.AUDIO&&et)&&Kt&&_n}catch{return!1}},matchSettingsLang:Me,matchSettingsIndex:st,matchSettingsViewPoint:tt,matchSettingsRole:ft,matchSettingsAccessibility:he,matchSettingsAudioChannelConfig:Le,saveTextSettingsDisabled:function(){Oe.setSavedMediaSettings(l.Z.TEXT,null)},setConfig:function($e){$e&&($e.domStorage&&(Oe=$e.domStorage),$e.settings&&(Re=$e.settings),$e.customParametersModel&&(ye=$e.customParametersModel))},reset:ct},ie=(0,d.Z)(je).getInstance().getLogger(ae),ct(),ae}gs.__dashjs_factory_name="MediaController";var Fs=g.Z.getSingletonFactory(gs);g.Z.updateSingletonFactory(gs.__dashjs_factory_name,Fs);const tu=Fs;var ns=NaN,nu=function ae(ie,se){(function(Re,Ae){if(!(Re instanceof Ae))throw new TypeError("Cannot call a class as a function")})(this,ae),this.data={baseUrls:ie||null,selectedIdx:se||ns},this.children=[]};function Us(){var ae,ie,se,Re,Ae=this.context,ve=Vt(Ae).getInstance();function ye(Be,De,We){var qe=Oe(We);Be[De]?ve.areEqual(qe,Be[De].data.baseUrls)||(Be[De].data.baseUrls=qe,Be[De].data.selectedIdx=ns):Be[De]=new nu(qe)}function Oe(Be){var De=se.getBaseURLsFromElement(Be),We=Re.getSynthesizedBaseUrlElements(De);return We&&We.length>0&&(De=De.concat(We)),De}function je(Be,De){var We=De||ie;Be(We.data),We.children&&We.children.forEach(function(qe){return je(Be,qe)})}function He(){ie=new nu}return ae={reset:He,update:function(Be){(function(De){(function(){if(!se||!se.hasOwnProperty("getBaseURLsFromElement")||!se.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var We=Oe(De);ve.areEqual(We,ie.data.baseUrls)||(ie.data.baseUrls=We,ie.data.selectedIdx=ns),De&&De.Period_asArray&&De.Period_asArray.forEach(function(qe,vt){ye(ie.children,vt,qe),qe.AdaptationSet_asArray&&qe.AdaptationSet_asArray.forEach(function(ot,ct){ye(ie.children[vt].children,ct,ot),ot.Representation_asArray&&ot.Representation_asArray.sort(se.getRepresentationSortFunction()).forEach(function(mt,Me){ye(ie.children[vt].children[ct].children,Me,mt)})})})})(Be)},getForPath:function(Be){var De=ie,We=[De.data];return Be&&Be.forEach(function(qe){(De=De.children[qe])&&We.push(De.data)}),We.filter(function(qe){return qe.baseUrls.length})},invalidateSelectedIndexes:function(Be){je(function(De){isNaN(De.selectedIdx)||Be===De.baseUrls[De.selectedIdx].serviceLocation&&(De.selectedIdx=ns)})},setConfig:function(Be){Be.adapter&&(se=Be.adapter),Be.contentSteeringController&&(Re=Be.contentSteeringController)},getBaseUrls:function(Be){return Oe(Be)}},He(),ae}Us.__dashjs_factory_name="BaseURLTreeModel";const ao=g.Z.getClassFactory(Us);function no(ae){var ie=(ae=ae||{}).blacklistController;return{select:function(se){return se&&function(Ae){var ve,ye,Oe=0,je=[],He=0;if((ye=Ae.sort(function(Be,De){var We=Be.dvb_priority-De.dvb_priority;return isNaN(We)?0:We}).filter(function(Be,De,We){return!De||We[0].dvb_priority&&Be.dvb_priority&&We[0].dvb_priority===Be.dvb_priority})).length)return ye.length>1&&(ye.forEach(function(Be){Oe+=Be.dvb_weight,je.push(Oe)}),ve=Math.floor(Math.random()*(Oe-1)),je.every(function(Be,De){return He=De,!(ve<Be)})),ye[He]}((Re=[],se.filter(function(Ae){return!ie.contains(Ae.serviceLocation)||(Ae.dvb_priority&&Re.push(Ae.dvb_priority),!1)}).filter(function(Ae){return!Re.length||!Ae.dvb_priority||Re.indexOf(Ae.dvb_priority)===-1})));var Re}}}no.__dashjs_factory_name="DVBSelector";const ru=g.Z.getClassFactory(no);function al(ae){var ie=(ae=ae||{}).blacklistController;return{select:function(se){var Re,Ae=0;return se&&se.some(function(ve,ye){return Ae=ye,!ie.contains(ve.serviceLocation)})&&(Re=se[Ae]),Re}}}al.__dashjs_factory_name="BasicSelector";const iu=g.Z.getClassFactory(al);function ol(){var ae,ie,se,Re=this.context;function Ae(){for(var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Oe=0,je=NaN,He=function(){var Be=ve[Oe],De=ye.findIndex(function(We){return We.serviceLocation&&We.serviceLocation===Be});if(De!==-1&&!se.contains(ye[De].serviceLocation))return je=De,"break";Oe+=1};Oe<ve.length&&He()!=="break";);return je}return ae={selectBaseUrlIndex:function(ve){var ye=NaN;if(isNaN(ve.selectedIdx)){var Oe=ie.getSteeringDataFromManifest();Oe&&Oe.defaultServiceLocationArray.length>0&&(ye=Ae(Oe.defaultServiceLocationArray,ve.baseUrls))}var je=ie.getCurrentSteeringResponseData();return ve.baseUrls&&ve.baseUrls.length&&je&&je.pathwayPriority&&je.pathwayPriority.length&&(ye=Ae(je.pathwayPriority,ve.baseUrls)),ye},setConfig:function(ve){ve.blacklistController&&(se=ve.blacklistController),ve.contentSteeringController&&(ie=ve.contentSteeringController)}},ie=na(Re).getInstance(),ae}ol.__dashjs_factory_name="ContentSteeringSelector";const Yc=g.Z.getClassFactory(ol);function Zl(){var ae,ie,se,Re,Ae,ve,ye=this.context,Oe=(0,y.Z)(ye).getInstance(),je=(0,G.Z)(ye).getInstance();function He(){ie.reset()}return ae={chooseSelector:function(Be){(0,X.PS)(Be,"boolean"),ve=Be?Re:se},select:function(Be){if(Be){if(je.get().streaming.applyContentSteering){var De=Ae.selectBaseUrlIndex(Be);isNaN(De)||De===-1||(Be.selectedIdx=De)}if(!isNaN(Be.selectedIdx))return Be.baseUrls[Be.selectedIdx];var We=ve.select(Be.baseUrls);return We?(Be.selectedIdx=Be.baseUrls.indexOf(We),We):(Oe.trigger(i.Z.URL_RESOLUTION_FAILED,{error:new p.Z(U.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,U.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(ve===se&&He()))}},reset:He,setConfig:function(Be){Be.selector&&(ve=Be.selector),Be.contentSteeringSelector&&(Ae=Be.contentSteeringSelector)}},ie=pi(ye).create({updateEventName:i.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:i.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),se=iu(ye).create({blacklistController:ie}),Re=ru(ye).create({blacklistController:ie}),(Ae=Yc(ye).create()).setConfig({blacklistController:ie}),ve=se,ae}Zl.__dashjs_factory_name="BaseURLSelector";const gd=g.Z.getClassFactory(Zl);function sl(){var ae,ie,se,Re,Ae,ve=this.context,ye=(0,y.Z)(ve).getInstance(),Oe=(0,Ge.Z)(ve).getInstance();function je(Be){se.update(Be),Re.chooseSelector(ie.getIsDVB(Be)),ye.trigger(r.Z.BASE_URLS_UPDATED,{baseUrls:He(Be)})}function He(Be){return se.getBaseUrls(Be)}return ae={reset:function(){se.reset(),Re.reset()},initialize:function(Be){se.setConfig({adapter:ie,contentSteeringController:Ae}),je(Be)},resolve:function(Be){var De=se.getForPath(Be).reduce(function(We,qe){var vt=Re.select(qe);return vt?(Oe.isRelative(vt.url)?We.url=Oe.resolve(vt.url,We.url):(We.url=vt.url,We.serviceLocation=vt.serviceLocation),We.availabilityTimeOffset=vt.availabilityTimeOffset,We.availabilityTimeComplete=vt.availabilityTimeComplete,We.queryParams=vt.queryParams,We):new rn},new rn);if(!Oe.isRelative(De.url))return De},setConfig:function(Be){Be.baseURLTreeModel&&(se=Be.baseURLTreeModel),Be.baseURLSelector&&(Re=Be.baseURLSelector),Be.adapter&&(ie=Be.adapter),Be.contentSteeringController&&(Ae=Be.contentSteeringController)},getBaseUrls:He,update:je},se=ao(ve).create(),Re=gd(ve).create(),ye.on(i.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(Be){se.invalidateSelectedIndexes(Be.entry)},ae),ae}sl.__dashjs_factory_name="BaseURLController";const md=g.Z.getClassFactory(sl);function au(ae){return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},au(ae)}function Kl(ae,ie){return Kl=Object.setPrototypeOf||function(se,Re){return se.__proto__=Re,se},Kl(ae,ie)}function Ru(ae){return Ru=Object.setPrototypeOf?Object.getPrototypeOf:function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},Ru(ae)}const zc=function(ae){(function(ve,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(ye&&ye.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),ye&&Kl(ve,ye)})(Ae,ae);var ie,se,Re=(ie=Ae,se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ve,ye=Ru(ie);if(se){var Oe=Ru(this).constructor;ve=Reflect.construct(ye,arguments,Oe)}else ve=ye.apply(this,arguments);return function(je,He){return!He||au(He)!=="object"&&typeof He!="function"?function(Be){if(Be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Be}(je):He}(this,ve)});function Ae(ve,ye){var Oe;return function(je,He){if(!(je instanceof He))throw new TypeError("Cannot call a class as a function")}(this,Ae),(Oe=Re.call(this)).url=ve||null,Oe.type=ye||null,Oe.mediaType=l.Z.STREAM,Oe.responseType="",Oe}return Ae}(m.Z);function Wc(ae){ae=ae||{};var ie=this.context,se=(0,y.Z)(ie).getInstance(),Re=fa(ie).create({errHandler:ae.errHandler,dashMetrics:ae.dashMetrics,mediaPlayerModel:ae.mediaPlayerModel,requestModifier:ae.requestModifier,errors:U});return{load:function(Ae,ve,ye){var Oe=function(He,Be){ve.resolved=!0,ve.resolvedContent=He||null,se.trigger(i.Z.XLINK_ELEMENT_LOADED,{element:ve,resolveObject:ye,error:He||Be?null:new p.Z(U.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,U.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+Ae)})};if(Ae==="urn:mpeg:dash:resolve-to-zero:2013")Oe(null,!0);else{var je=new zc(Ae,ee.w.XLINK_EXPANSION_TYPE);Re.load({request:je,success:function(He){Oe(He)},error:function(){Oe(null)}})}},reset:function(){Re&&(Re.abort(),Re=null)}}}Wc.__dashjs_factory_name="XlinkLoader";const vd=g.Z.getClassFactory(Wc),yd=function(ae){function ie(Me){var st=Me.localName;return st==null&&(st=Me.baseName),st!=null&&st!=""||(st=Me.nodeName),st}function se(Me){return typeof Me=="string"?Me.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):Me}function Re(Me,st,tt,ft){for(var he=0;he<Me.length;he++){var Le=Me[he];if(typeof Le=="string"){if(Le==ft)break}else if(Le instanceof RegExp){if(Le.test(ft))break}else if(typeof Le=="function"&&Le(st,tt,ft))break}return he!=Me.length}function Ae(Me,st,tt){ae.arrayAccessForm==="property"&&(Me[st]instanceof Array?Me[st+"_asArray"]=Me[st]:Me[st+"_asArray"]=[Me[st]]),!(Me[st]instanceof Array)&&ae.arrayAccessFormPaths.length>0&&Re(ae.arrayAccessFormPaths,Me,st,tt)&&(Me[st]=[Me[st]])}function ve(Me){var st=Me.split(/[-T:+Z]/g),tt=new Date(st[0],st[1]-1,st[2]),ft=st[5].split(".");if(tt.setHours(st[3],st[4],ft[0]),ft.length>1&&tt.setMilliseconds(ft[1]),st[6]&&st[7]){var he=60*st[6]+Number(st[7]);he=0+((/\d\d-\d\d:\d\d$/.test(Me)?"-":"+")=="-"?-1*he:he),tt.setMinutes(tt.getMinutes()-he-tt.getTimezoneOffset())}else Me.indexOf("Z",Me.length-1)!==-1&&(tt=new Date(Date.UTC(tt.getFullYear(),tt.getMonth(),tt.getDate(),tt.getHours(),tt.getMinutes(),tt.getSeconds(),tt.getMilliseconds())));return tt}function ye(Me,st,tt,ft){return!(st==1&&ae.xmlElementsFilter.length>0)||Re(ae.xmlElementsFilter,Me,tt,ft)}function Oe(Me,st){if(Me.nodeType==9){for(var tt=new Object,ft=Me.childNodes,he=0;he<ft.length;he++)(Ve=ft[he]).nodeType==1&&(ae.ignoreRoot?tt=Oe(Ve):(tt={})[Fe=ie(Ve)]=Oe(Ve));return tt}if(Me.nodeType==1){(tt=new Object).__cnt=0;var Le=[];for(ft=Me.childNodes,he=0;he<ft.length;he++){var Ve,Fe=ie(Ve=ft[he]);if(Ve.nodeType!=8){var Pe=st+"."+Fe;if(ye(tt,Ve.nodeType,Fe,Pe))if(tt.__cnt++,tt[Fe]==null){var Ne=Oe(Ve,Pe);(Fe!="#text"||/[^\s]/.test(Ne))&&((lt={})[Fe]=Ne,Le.push(lt)),tt[Fe]=Ne,Ae(tt,Fe,Pe)}else{var lt;tt[Fe]!=null&&(tt[Fe]instanceof Array||(tt[Fe]=[tt[Fe]],Ae(tt,Fe,Pe))),Ne=Oe(Ve,Pe),(Fe!="#text"||/[^\s]/.test(Ne))&&((lt={})[Fe]=Ne,Le.push(lt)),tt[Fe][tt[Fe].length]=Ne}}}tt.__children=Le;for(var $e=ie(Me),xe=0;xe<Me.attributes.length;xe++){var et=Me.attributes[xe];tt.__cnt++;for(var Et=et.value,kt=0,Mt=ae.matchers.length;kt<Mt;kt++){var At=ae.matchers[kt];At.test(et,$e)&&(Et=At.converter(et.value))}tt[ae.attributePrefix+et.name]=Et}var Ot=function(Kt){return Kt.prefix}(Me);return Ot!=null&&Ot!=""&&(tt.__cnt++,tt.__prefix=Ot),tt["#text"]!=null&&(tt.__text=tt["#text"],tt.__text instanceof Array&&(tt.__text=tt.__text.join(`
`)),ae.stripWhitespaces&&(tt.__text=tt.__text.trim()),delete tt["#text"],ae.arrayAccessForm=="property"&&delete tt["#text_asArray"],tt.__text=function(Kt,_n,Jt){if(ae.datetimeAccessFormPaths.length>0){var un=Jt.split(".#")[0];return Re(ae.datetimeAccessFormPaths,Kt,_n,un)?ve(Kt):Kt}return Kt}(tt.__text,Fe,st+"."+Fe)),tt["#cdata-section"]!=null&&(tt.__cdata=tt["#cdata-section"],delete tt["#cdata-section"],ae.arrayAccessForm=="property"&&delete tt["#cdata-section_asArray"]),tt.__cnt==0&&ae.emptyNodeForm=="text"?tt="":tt.__cnt==1&&tt.__text!=null?tt=tt.__text:tt.__cnt!=1||tt.__cdata==null||ae.keepCData?tt.__cnt>1&&tt.__text!=null&&ae.skipEmptyTextNodesForObj&&(ae.stripWhitespaces&&tt.__text==""||tt.__text.trim()=="")&&delete tt.__text:tt=tt.__cdata,delete tt.__cnt,!ae.enableToStringFunc||tt.__text==null&&tt.__cdata==null||(tt.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),tt}if(Me.nodeType==3||Me.nodeType==4)return Me.nodeValue}function je(Me,st,tt,ft){var he="<"+(Me!=null&&Me.__prefix!=null?Me.__prefix+":":"")+st;if(tt!=null)for(var Le=0;Le<tt.length;Le++){var Ve=tt[Le],Fe=Me[Ve];ae.escapeMode&&(Fe=se(Fe)),he+=" "+Ve.substr(ae.attributePrefix.length)+"=",ae.useDoubleQuotes?he+='"'+Fe+'"':he+="'"+Fe+"'"}return he+(ft?"/>":">")}function He(Me,st){return"</"+(Me.__prefix!=null?Me.__prefix+":":"")+st+">"}function Be(Me,st){return ae.arrayAccessForm=="property"&&(tt=st.toString()).indexOf("_asArray",tt.length-8)!==-1||st.toString().indexOf(ae.attributePrefix)==0||st.toString().indexOf("__")==0||Me[st]instanceof Function;var tt}function De(Me){var st=0;if(Me instanceof Object)for(var tt in Me)Be(Me,tt)||st++;return st}function We(Me,st,tt){return ae.jsonPropertiesFilter.length==0||tt==""||Re(ae.jsonPropertiesFilter,Me,st,tt)}function qe(Me){var st=[];if(Me instanceof Object)for(var tt in Me)tt.toString().indexOf("__")==-1&&tt.toString().indexOf(ae.attributePrefix)==0&&st.push(tt);return st}function vt(Me){var st="";return Me instanceof Object?st+=function(tt){var ft="";return tt.__cdata!=null&&(ft+="<![CDATA["+tt.__cdata+"]]>"),tt.__text!=null&&(ae.escapeMode?ft+=se(tt.__text):ft+=tt.__text),ft}(Me):Me!=null&&(ae.escapeMode?st+=se(Me):st+=Me),st}function ot(Me,st){return Me===""?st:Me+"."+st}function ct(Me,st,tt,ft){var he="";if(Me.length==0)he+=je(Me,st,tt,!0);else for(var Le=0;Le<Me.length;Le++)he+=je(Me[Le],st,qe(Me[Le]),!1),he+=mt(Me[Le],ot(ft,st)),he+=He(Me[Le],st);return he}function mt(Me,st){var tt="";if(De(Me)>0){for(var ft in Me)if(!Be(Me,ft)&&(st==""||We(Me,ft,ot(st,ft)))){var he=Me[ft],Le=qe(he);he==null||he==null?tt+=je(he,ft,Le,!0):he instanceof Object?he instanceof Array?tt+=ct(he,ft,Le,st):he instanceof Date?(tt+=je(he,ft,Le,!1),tt+=he.toISOString(),tt+=He(he,ft)):De(he)>0||he.__text!=null||he.__cdata!=null?(tt+=je(he,ft,Le,!1),tt+=mt(he,ot(st,ft)),tt+=He(he,ft)):tt+=je(he,ft,Le,!0):(tt+=je(he,ft,Le,!1),tt+=vt(he),tt+=He(he,ft))}}return tt+vt(Me)}(ae=ae||{}).escapeMode===void 0&&(ae.escapeMode=!0),ae.attributePrefix===void 0&&(ae.attributePrefix="_"),ae.arrayAccessForm=ae.arrayAccessForm||"none",ae.emptyNodeForm=ae.emptyNodeForm||"text",ae.enableToStringFunc===void 0&&(ae.enableToStringFunc=!0),ae.arrayAccessFormPaths=ae.arrayAccessFormPaths||[],ae.skipEmptyTextNodesForObj===void 0&&(ae.skipEmptyTextNodesForObj=!0),ae.stripWhitespaces===void 0&&(ae.stripWhitespaces=!0),ae.datetimeAccessFormPaths=ae.datetimeAccessFormPaths||[],ae.useDoubleQuotes===void 0&&(ae.useDoubleQuotes=!1),ae.xmlElementsFilter=ae.xmlElementsFilter||[],ae.jsonPropertiesFilter=ae.jsonPropertiesFilter||[],ae.keepCData===void 0&&(ae.keepCData=!1),ae.ignoreRoot===void 0&&(ae.ignoreRoot=!1),this.parseXmlString=function(Me){var st;if(Me===void 0)return null;if(window.DOMParser){var tt=new window.DOMParser;try{(st=tt.parseFromString(Me,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(st=null)}catch{st=null}}else Me.indexOf("<?")==0&&(Me=Me.substr(Me.indexOf("?>")+2)),(st=new ActiveXObject("Microsoft.XMLDOM")).async="false",st.loadXML(Me);return st},this.asArray=function(Me){return Me===void 0||Me==null?[]:Me instanceof Array?Me:[Me]},this.toXmlDateTime=function(Me){return Me instanceof Date?Me.toISOString():typeof Me=="number"?new Date(Me).toISOString():null},this.asDateTime=function(Me){return typeof Me=="string"?ve(Me):Me},this.xml2json=function(Me){return Oe(Me)},this.xml_str2json=function(Me){var st=this.parseXmlString(Me);return st!=null?this.xml2json(st):null},this.json2xml_str=function(Me){return mt(Me,"")},this.json2xml=function(Me){var st=this.json2xml_str(Me);return this.parseXmlString(st)},this.getVersion=function(){return"1.2.0"}};var Cu="onLoad";function Ed(ae){ae=ae||{};var ie,se,Re,Ae,ve,ye,Oe=this.context,je=(0,y.Z)(Oe).getInstance(),He=(0,Ge.Z)(Oe).getInstance();function Be(ot,ct,mt){var Me,st,tt={};tt.elements=ot,tt.type=ct,tt.resolveType=mt,tt.elements.length===0&&We(tt);for(var ft=0;ft<tt.elements.length;ft++)Me=tt.elements[ft],st=He.isHTTPURL(Me.url)?Me.url:Me.originalContent.BaseURL+Me.url,ye.load(st,Me,tt)}function De(ot){var ct,mt,Me="";if(ct=ot.element,mt=ot.resolveObject,ct.resolvedContent){var st=0;ct.resolvedContent.indexOf("<?xml")===0&&(st=ct.resolvedContent.indexOf("?>")+2),Me=ct.resolvedContent.substr(0,st)+"<response>"+ct.resolvedContent.substr(st)+"</response>",ct.resolvedContent=ve.xml_str2json(Me)}(function(tt){var ft;for(ft=0;ft<tt.elements.length;ft++)if(tt.elements[ft].resolved===!1)return!1;return!0})(mt)&&We(mt)}function We(ot){var ct,mt,Me=[];if(function(st){var tt,ft,he,Le,Ve,Fe,Pe=[];for(Le=st.elements.length-1;Le>=0;Le--){if(ft=(tt=st.elements[Le]).type+"_asArray",tt.resolvedContent){if(tt.resolvedContent)for(Ve=0;Ve<tt.resolvedContent[ft].length;Ve++)he=tt.resolvedContent[ft][Ve],Pe.push(he)}else delete tt.originalContent["xlink:actuate"],delete tt.originalContent["xlink:href"],Pe.push(tt.originalContent);for(tt.parentElement[ft].splice(tt.index,1),Fe=0;Fe<Pe.length;Fe++)tt.parentElement[ft].splice(tt.index+Fe,0,Pe[Fe]);Pe=[]}st.elements.length>0&&Re.run(Ae)}(ot),ot.resolveType==="onActuate"&&je.trigger(i.Z.XLINK_READY,{manifest:Ae}),ot.resolveType===Cu)switch(ot.type){case c.Z.PERIOD:for(ct=0;ct<Ae[c.Z.PERIOD+"_asArray"].length;ct++)(mt=Ae[c.Z.PERIOD+"_asArray"][ct]).hasOwnProperty(c.Z.ADAPTATION_SET+"_asArray")&&(Me=Me.concat(qe(mt[c.Z.ADAPTATION_SET+"_asArray"],mt,c.Z.ADAPTATION_SET,Cu))),mt.hasOwnProperty(c.Z.EVENT_STREAM+"_asArray")&&(Me=Me.concat(qe(mt[c.Z.EVENT_STREAM+"_asArray"],mt,c.Z.EVENT_STREAM,Cu)));Be(Me,c.Z.ADAPTATION_SET,Cu);break;case c.Z.ADAPTATION_SET:je.trigger(i.Z.XLINK_READY,{manifest:Ae})}}function qe(ot,ct,mt,Me){var st,tt,ft,he=[];for(tt=ot.length-1;tt>=0;tt--)(st=ot[tt]).hasOwnProperty("xlink:href")&&st["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&ot.splice(tt,1);for(tt=0;tt<ot.length;tt++)(st=ot[tt]).hasOwnProperty("xlink:href")&&st.hasOwnProperty("xlink:actuate")&&st["xlink:actuate"]===Me&&(ft=vt(st["xlink:href"],ct,mt,tt,Me,st),he.push(ft));return he}function vt(ot,ct,mt,Me,st,tt){return{url:ot,parentElement:ct,type:mt,index:Me,resolveType:st,originalContent:tt,resolvedContent:null,resolved:!1}}return ie={resolveManifestOnLoad:function(ot){ve=new yd({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:se}),(Ae=ot).Period_asArray?Be(qe(Ae.Period_asArray,Ae,c.Z.PERIOD,Cu),c.Z.PERIOD,Cu):je.trigger(i.Z.XLINK_READY,{manifest:Ae})},setMatchers:function(ot){ot&&(se=ot)},setIron:function(ot){ot&&(Re=ot)},reset:function(){je.off(i.Z.XLINK_ELEMENT_LOADED,De,ie),ye&&(ye.reset(),ye=null)}},je.on(i.Z.XLINK_ELEMENT_LOADED,De,ie),ye=vd(Oe).create({errHandler:ae.errHandler,dashMetrics:ae.dashMetrics,mediaPlayerModel:ae.mediaPlayerModel,requestModifier:ae.requestModifier,settings:ae.settings}),ie}Ed.__dashjs_factory_name="XlinkController";const Qp=g.Z.getClassFactory(Ed);function Bs(ae){return Bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},Bs(ae)}function bd(ae){function ie(Ae,ve){for(var ye in Ae)ve.hasOwnProperty(ye)||(ve[ye]=Ae[ye])}function se(Ae,ve,ye){for(var Oe=0,je=Ae.length;Oe<je;++Oe){var He=Ae[Oe];if(ve[He.name])if(ye[He.name]){if(He.merge){var Be=ve[He.name],De=ye[He.name];Bs(Be)==="object"&&Bs(De)==="object"?ie(Be,De):ye[He.name]=Be+De}}else ye[He.name]=ve[He.name]}}function Re(Ae,ve){for(var ye=0,Oe=Ae.children.length;ye<Oe;++ye){var je=Ae.children[ye],He=ve[je.name+"_asArray"];if(He)for(var Be=0,De=He.length;Be<De;++Be){var We=He[Be];se(Ae.properties,ve,We),Re(je,We)}}}return{run:function(Ae){if(Ae===null||Bs(Ae)!=="object")return Ae;if(Ae.Period_asArray&&"period"in ae)for(var ve=ae.period,ye=Ae.Period_asArray,Oe=0,je=ye.length;Oe<je;++Oe){var He=ye[Oe];if(Re(ve,He),"adaptationset"in ae){var Be=He.AdaptationSet_asArray;if(Be)for(var De=ae.adaptationset,We=0,qe=Be.length;We<qe;++We)Re(De,Be[We])}}return Ae}}}bd.__dashjs_factory_name="ObjectIron";const Ra=g.Z.getClassFactory(bd),ou=function(){function ae(se,Re){(function(Ae,ve){if(!(Ae instanceof ve))throw new TypeError("Cannot call a class as a function")})(this,ae),this._test=se,this._converter=Re}var ie;return(ie=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&function(se,Re){for(var Ae=0;Ae<Re.length;Ae++){var ve=Re[Ae];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(se,ve.key,ve)}}(ae.prototype,ie),ae}();function ql(ae){return ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},ql(ae)}function va(ae,ie,se){return ie in ae?Object.defineProperty(ae,ie,{value:se,enumerable:!0,configurable:!0,writable:!0}):ae[ie]=se,ae}function ul(ae,ie){return ul=Object.setPrototypeOf||function(se,Re){return se.__proto__=Re,se},ul(ae,ie)}function ll(ae){return ll=Object.setPrototypeOf?Object.getPrototypeOf:function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},ll(ae)}const $p=function(ae){(function(ve,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(ye&&ye.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),ye&&ul(ve,ye)})(Ae,ae);var ie,se,Re=(ie=Ae,se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ve,ye=ll(ie);if(se){var Oe=ll(this).constructor;ve=Reflect.construct(ye,arguments,Oe)}else ve=ye.apply(this,arguments);return function(je,He){return!He||ql(He)!=="object"&&typeof He!="function"?function(Be){if(Be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Be}(je):He}(this,ve)});function Ae(){return function(ve,ye){if(!(ve instanceof ye))throw new TypeError("Cannot call a class as a function")}(this,Ae),Re.call(this,function(ve,ye){var Oe,je=(va(Oe={},c.Z.MPD,[c.Z.ID,c.Z.PROFILES]),va(Oe,c.Z.PERIOD,[c.Z.ID]),va(Oe,c.Z.BASE_URL,[c.Z.SERVICE_LOCATION,c.Z.BYTE_RANGE]),va(Oe,c.Z.SEGMENT_BASE,[c.Z.INDEX_RANGE]),va(Oe,c.Z.INITIALIZATION,[c.Z.RANGE]),va(Oe,c.Z.REPRESENTATION_INDEX,[c.Z.RANGE]),va(Oe,c.Z.SEGMENT_LIST,[c.Z.INDEX_RANGE]),va(Oe,c.Z.BITSTREAM_SWITCHING,[c.Z.RANGE]),va(Oe,c.Z.SEGMENT_URL,[c.Z.MEDIA_RANGE,c.Z.INDEX_RANGE]),va(Oe,c.Z.SEGMENT_TEMPLATE,[c.Z.INDEX_RANGE,c.Z.MEDIA,c.Z.INDEX,c.Z.INITIALIZATION_MINUS,c.Z.BITSTREAM_SWITCHING_MINUS]),va(Oe,c.Z.ASSET_IDENTIFIER,[c.Z.VALUE,c.Z.ID]),va(Oe,c.Z.EVENT_STREAM,[c.Z.VALUE]),va(Oe,c.Z.ADAPTATION_SET,[c.Z.PROFILES,c.Z.MIME_TYPE,c.Z.SEGMENT_PROFILES,c.Z.CODECS,c.Z.CONTENT_TYPE]),va(Oe,c.Z.FRAME_PACKING,[c.Z.VALUE,c.Z.ID]),va(Oe,c.Z.AUDIO_CHANNEL_CONFIGURATION,[c.Z.VALUE,c.Z.ID]),va(Oe,c.Z.CONTENT_PROTECTION,[c.Z.VALUE,c.Z.ID]),va(Oe,c.Z.ESSENTIAL_PROPERTY,[c.Z.VALUE,c.Z.ID]),va(Oe,c.Z.SUPPLEMENTAL_PROPERTY,[c.Z.VALUE,c.Z.ID]),va(Oe,c.Z.INBAND_EVENT_STREAM,[c.Z.VALUE,c.Z.ID]),va(Oe,c.Z.ACCESSIBILITY,[c.Z.VALUE,c.Z.ID]),va(Oe,c.Z.ROLE,[c.Z.VALUE,c.Z.ID]),va(Oe,c.Z.RATING,[c.Z.VALUE,c.Z.ID]),va(Oe,c.Z.VIEWPOINT,[c.Z.VALUE,c.Z.ID]),va(Oe,c.Z.CONTENT_COMPONENT,[c.Z.CONTENT_TYPE]),va(Oe,c.Z.REPRESENTATION,[c.Z.ID,c.Z.DEPENDENCY_ID,c.Z.MEDIA_STREAM_STRUCTURE_ID]),va(Oe,c.Z.SUBSET,[c.Z.ID]),va(Oe,c.Z.METRICS,[c.Z.METRICS_MINUS]),va(Oe,c.Z.REPORTING,[c.Z.VALUE,c.Z.ID]),Oe);if(je.hasOwnProperty(ye)){var He=je[ye];return He!==void 0&&He.indexOf(ve.name)>=0}return!1},function(ve){return String(ve)})}return Ae}(ou);function Xc(ae){return Xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},Xc(ae)}function Yl(ae,ie){return Yl=Object.setPrototypeOf||function(se,Re){return se.__proto__=Re,se},Yl(ae,ie)}function su(ae){return su=Object.setPrototypeOf?Object.getPrototypeOf:function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},su(ae)}var zl=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;const Td=function(ae){(function(ve,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(ye&&ye.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),ye&&Yl(ve,ye)})(Ae,ae);var ie,se,Re=(ie=Ae,se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ve,ye=su(ie);if(se){var Oe=su(this).constructor;ve=Reflect.construct(ye,arguments,Oe)}else ve=ye.apply(this,arguments);return function(je,He){return!He||Xc(He)!=="object"&&typeof He!="function"?function(Be){if(Be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Be}(je):He}(this,ve)});function Ae(){return function(ve,ye){if(!(ve instanceof ye))throw new TypeError("Cannot call a class as a function")}(this,Ae),Re.call(this,function(ve){for(var ye=[c.Z.MIN_BUFFER_TIME,c.Z.MEDIA_PRESENTATION_DURATION,c.Z.MINIMUM_UPDATE_PERIOD,c.Z.TIMESHIFT_BUFFER_DEPTH,c.Z.MAX_SEGMENT_DURATION,c.Z.MAX_SUBSEGMENT_DURATION,c.Z.SUGGESTED_PRESENTATION_DELAY,c.Z.START,l.Z.START_TIME,c.Z.DURATION],Oe=ye.length,je=0;je<Oe;je++)if(ve.nodeName===ye[je])return zl.test(ve.value);return!1},function(ve){var ye=zl.exec(ve),Oe=31536e3*parseFloat(ye[3]||0)+2592e3*parseFloat(ye[5]||0)+86400*parseFloat(ye[7]||0)+3600*parseFloat(ye[9]||0)+60*parseFloat(ye[11]||0)+parseFloat(ye[13]||0);return ye[1]!==void 0&&(Oe=-Oe),Oe})}return Ae}(ou);function Wl(ae){return Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},Wl(ae)}function Xl(ae,ie){return Xl=Object.setPrototypeOf||function(se,Re){return se.__proto__=Re,se},Xl(ae,ie)}function ms(ae){return ms=Object.setPrototypeOf?Object.getPrototypeOf:function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},ms(ae)}var _d=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;const Sd=function(ae){(function(ve,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(ye&&ye.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),ye&&Xl(ve,ye)})(Ae,ae);var ie,se,Re=(ie=Ae,se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ve,ye=ms(ie);if(se){var Oe=ms(this).constructor;ve=Reflect.construct(ye,arguments,Oe)}else ve=ye.apply(this,arguments);return function(je,He){return!He||Wl(He)!=="object"&&typeof He!="function"?function(Be){if(Be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Be}(je):He}(this,ve)});function Ae(){return function(ve,ye){if(!(ve instanceof ye))throw new TypeError("Cannot call a class as a function")}(this,Ae),Re.call(this,function(ve){return _d.test(ve.value)},function(ve){var ye,Oe=_d.exec(ve);if(ye=Date.UTC(parseInt(Oe[1],10),parseInt(Oe[2],10)-1,parseInt(Oe[3],10),parseInt(Oe[4],10),parseInt(Oe[5],10),Oe[6]&&parseInt(Oe[6],10)||0,Oe[7]&&1e3*parseFloat(Oe[7])||0),Oe[9]&&Oe[10]){var je=60*parseInt(Oe[9],10)+parseInt(Oe[10],10);ye+=(Oe[8]==="+"?-1:1)*je*60*1e3}return new Date(ye)})}return Ae}(ou);function js(ae){return js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},js(ae)}function ku(ae,ie){return ku=Object.setPrototypeOf||function(se,Re){return se.__proto__=Re,se},ku(ae,ie)}function cl(ae){return cl=Object.setPrototypeOf?Object.getPrototypeOf:function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},cl(ae)}var Ad=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/;const ya=function(ae){(function(ve,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(ye&&ye.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),ye&&ku(ve,ye)})(Ae,ae);var ie,se,Re=(ie=Ae,se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ve,ye=cl(ie);if(se){var Oe=cl(this).constructor;ve=Reflect.construct(ye,arguments,Oe)}else ve=ye.apply(this,arguments);return function(je,He){return!He||js(He)!=="object"&&typeof He!="function"?function(Be){if(Be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Be}(je):He}(this,ve)});function Ae(){return function(ve,ye){if(!(ve instanceof ye))throw new TypeError("Cannot call a class as a function")}(this,Ae),Re.call(this,function(ve){return Ad.test(ve.value)},function(ve){return parseFloat(ve)})}return Ae}(ou);function vs(ae){return vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},vs(ae)}function uu(ae,ie,se){return ie in ae?Object.defineProperty(ae,ie,{value:se,enumerable:!0,configurable:!0,writable:!0}):ae[ie]=se,ae}function Gs(ae,ie){return Gs=Object.setPrototypeOf||function(se,Re){return se.__proto__=Re,se},Gs(ae,ie)}function No(ae){return No=Object.setPrototypeOf?Object.getPrototypeOf:function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},No(ae)}const wd=function(ae){(function(ve,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(ye&&ye.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),ye&&Gs(ve,ye)})(Ae,ae);var ie,se,Re=(ie=Ae,se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ve,ye=No(ie);if(se){var Oe=No(this).constructor;ve=Reflect.construct(ye,arguments,Oe)}else ve=ye.apply(this,arguments);return function(je,He){return!He||vs(He)!=="object"&&typeof He!="function"?function(Be){if(Be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Be}(je):He}(this,ve)});function Ae(){return function(ve,ye){if(!(ve instanceof ye))throw new TypeError("Cannot call a class as a function")}(this,Ae),Re.call(this,function(ve,ye){var Oe,je=(uu(Oe={},c.Z.ADAPTATION_SET,[c.Z.LANG]),uu(Oe,c.Z.REPRESENTATION,[c.Z.LANG]),uu(Oe,c.Z.CONTENT_COMPONENT,[c.Z.LANG]),uu(Oe,c.Z.LABEL,[c.Z.LANG]),uu(Oe,c.Z.GROUP_LABEL,[c.Z.LANG]),Oe);if(je.hasOwnProperty(ye)){var He=je[ye];return He!==void 0&&He.indexOf(ve.name)>=0}return!1},function(ve){var ye=ps()(ve);return ye!==void 0?ye:String(ve)})}return Ae}(ou),si=function(){function ae(se){var Re;(function(Ae,ve){if(!(Ae instanceof ve))throw new TypeError("Cannot call a class as a function")})(this,ae),this._name=se,this._merge=(Re=se)&&Re.length&&Re.charAt(0)===Re.charAt(0).toUpperCase()}var ie;return(ie=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&function(se,Re){for(var Ae=0;Ae<Re.length;Ae++){var ve=Re[Ae];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(se,ve.key,ve)}}(ae.prototype,ie),ae}(),lu=function(){function ae(se,Re,Ae){var ve=this;(function(ye,Oe){if(!(ye instanceof Oe))throw new TypeError("Cannot call a class as a function")})(this,ae),this._name=se||"",this._properties=[],this._children=Ae||[],Array.isArray(Re)&&Re.forEach(function(ye){ve._properties.push(new si(ye))})}var ie;return(ie=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&function(se,Re){for(var Ae=0;Ae<Re.length;Ae++){var ve=Re[Ae];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(se,ve.key,ve)}}(ae.prototype,ie),ae}();function Ou(ae){return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},Ou(ae)}function wi(ae,ie){return wi=Object.setPrototypeOf||function(se,Re){return se.__proto__=Re,se},wi(ae,ie)}function ys(ae){return ys=Object.setPrototypeOf?Object.getPrototypeOf:function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},ys(ae)}const Id=function(ae){(function(ve,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(ye&&ye.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),ye&&wi(ve,ye)})(Ae,ae);var ie,se,Re=(ie=Ae,se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ve,ye=ys(ie);if(se){var Oe=ys(this).constructor;ve=Reflect.construct(ye,arguments,Oe)}else ve=ye.apply(this,arguments);return function(je,He){return!He||Ou(He)!=="object"&&typeof He!="function"?function(Be){if(Be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Be}(je):He}(this,ve)});function Ae(){(function(ye,Oe){if(!(ye instanceof Oe))throw new TypeError("Cannot call a class as a function")})(this,Ae);var ve=[c.Z.PROFILES,c.Z.WIDTH,c.Z.HEIGHT,c.Z.SAR,c.Z.FRAMERATE,c.Z.AUDIO_SAMPLING_RATE,c.Z.MIME_TYPE,c.Z.SEGMENT_PROFILES,c.Z.CODECS,c.Z.MAXIMUM_SAP_PERIOD,c.Z.START_WITH_SAP,c.Z.MAX_PLAYOUT_RATE,c.Z.CODING_DEPENDENCY,c.Z.SCAN_TYPE,c.Z.FRAME_PACKING,c.Z.AUDIO_CHANNEL_CONFIGURATION,c.Z.CONTENT_PROTECTION,c.Z.ESSENTIAL_PROPERTY,c.Z.ESSENTIAL_PROPERTY+"_asArray",c.Z.SUPPLEMENTAL_PROPERTY,c.Z.INBAND_EVENT_STREAM];return Re.call(this,c.Z.ADAPTATION_SET,ve,[new lu(c.Z.REPRESENTATION,ve,[new lu(c.Z.SUB_REPRESENTATION,ve)])])}return Ae}(lu);function Du(ae){return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},Du(ae)}function Hs(ae,ie){return Hs=Object.setPrototypeOf||function(se,Re){return se.__proto__=Re,se},Hs(ae,ie)}function Hi(ae){return Hi=Object.setPrototypeOf?Object.getPrototypeOf:function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},Hi(ae)}const Es=function(ae){(function(ve,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(ye&&ye.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),ye&&Hs(ve,ye)})(Ae,ae);var ie,se,Re=(ie=Ae,se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ve,ye=Hi(ie);if(se){var Oe=Hi(this).constructor;ve=Reflect.construct(ye,arguments,Oe)}else ve=ye.apply(this,arguments);return function(je,He){return!He||Du(He)!=="object"&&typeof He!="function"?function(Be){if(Be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Be}(je):He}(this,ve)});function Ae(){(function(ye,Oe){if(!(ye instanceof Oe))throw new TypeError("Cannot call a class as a function")})(this,Ae);var ve=[c.Z.SEGMENT_BASE,c.Z.SEGMENT_TEMPLATE,c.Z.SEGMENT_LIST];return Re.call(this,c.Z.PERIOD,ve,[new lu(c.Z.ADAPTATION_SET,ve,[new lu(c.Z.REPRESENTATION,ve)])])}return Ae}(lu);function xo(ae){ae=ae||{};var ie,se,Re,Ae,ve,ye=this.context,Oe=ae.debug;return ie={parse:function(je){var He,Be=window.performance.now();if(!(He=Ae.xml_str2json(je)))throw new Error("parsing the manifest failed");var De=window.performance.now();He.Patch?((He=He.Patch).add_asArray&&He.add_asArray.forEach(function(qe){return ve.run(qe)}),He.replace_asArray&&He.replace_asArray.forEach(function(qe){return ve.run(qe)})):(He=He.MPD,ve.run(He));var We=window.performance.now();return se.info("Parsing complete: ( xml2json: "+(De-Be).toPrecision(3)+"ms, objectiron: "+(We-De).toPrecision(3)+"ms, total: "+((We-Be)/1e3).toPrecision(3)+"s)"),He.protocol="DASH",He},getMatchers:function(){return Re},getIron:function(){return ve}},se=Oe.getLogger(ie),Re=[new Td,new Sd,new ya,new wd,new $p],Ae=new yd({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:Re}),ve=Ra(ye).create({adaptationset:new Id,period:new Es}),ie}xo.__dashjs_factory_name="DashParser";const Rd=g.Z.getClassFactory(xo);function Qc(ae){ae=ae||{};var ie,se,Re,Ae,ve,ye=this.context,Oe=ae.debug,je=ae.settings,He=(0,y.Z)(ye).getInstance(),Be=(0,Ge.Z)(ye).getInstance(),De=ae.mssHandler,We=ae.errHandler;function qe(ot){He.trigger(i.Z.INTERNAL_MANIFEST_LOADED,{manifest:ot.manifest})}function vt(ot){var ct=null;return ot.indexOf("SmoothStreamingMedia")>-1?(De&&(ct=De.createMssParser(),De.createMssFragmentProcessor(),De.registerEvents()),ct):ot.indexOf("MPD")>-1||ot.indexOf("Patch")>-1?Rd(ye).create({debug:Oe}):ct}return ie={load:function(ot){var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,mt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Me=new Date,st=new zc(ot,ee.w.MPD_TYPE);ct&&(st.serviceLocation=ct),mt&&(st.queryParams=mt),st.requestStartDate||(st.requestStartDate=Me),He.trigger(i.Z.MANIFEST_LOADING_STARTED,{request:st}),Re.load({request:st,success:function(tt,ft,he){var Le,Ve,Fe;if(Ae)if(he&&he!==ot?(Ve=Be.parseBaseUrl(he),Le=he):(Be.isRelative(ot)&&(ot=Be.resolve(ot,window.location.href)),Ve=Be.parseBaseUrl(ot)),ft!="No Content")if(ve===null&&(ve=vt(tt)),ve!==null){Ae.setMatchers(ve.getMatchers()),Ae.setIron(ve.getIron());try{Fe=ve.parse(tt)}catch{return void He.trigger(i.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new p.Z(U.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,U.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(ot))})}if(Fe){if(Fe.url=Le||ot,Fe.originalUrl||(Fe.originalUrl=Fe.url),je&&je.get().streaming.enableManifestDurationMismatchFix&&Fe.mediaPresentationDuration&&Fe.Period_asArray.length>1){var Pe=Fe.Period_asArray.reduce(function(Ne,lt){return Ne+lt.duration},0);!isNaN(Pe)&&Fe.mediaPresentationDuration>Pe&&(se.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),Fe.mediaPresentationDuration=Pe)}Fe.baseUri=Ve,Fe.loadedTime=new Date,Ae.resolveManifestOnLoad(Fe),He.trigger(i.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:tt})}else He.trigger(i.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new p.Z(U.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,U.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(ot))})}else He.trigger(i.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new p.Z(U.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,U.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(ot))});else He.trigger(i.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(tt,ft,he){He.trigger(i.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new p.Z(U.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,U.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(ot,", ").concat(he))})}})},reset:function(){He.off(i.Z.XLINK_READY,qe,ie),De&&De.reset(),Ae&&(Ae.reset(),Ae=null),Re&&(Re.abort(),Re=null)}},se=Oe.getLogger(ie),He.on(i.Z.XLINK_READY,qe,ie),Re=fa(ye).create({errHandler:ae.errHandler,dashMetrics:ae.dashMetrics,mediaPlayerModel:ae.mediaPlayerModel,requestModifier:ae.requestModifier,urlUtils:Be,constants:l.Z,dashConstants:c.Z,errors:U,requestTimeout:ae.settings.get().streaming.manifestRequestTimeout}),Ae=Qp(ye).create({errHandler:We,dashMetrics:ae.dashMetrics,mediaPlayerModel:ae.mediaPlayerModel,requestModifier:ae.requestModifier,settings:ae.settings}),ve=null,ie}Qc.__dashjs_factory_name="ManifestLoader";const Ql=g.Z.getClassFactory(Qc);function bs(){var ae=this.context,ie=(0,y.Z)(ae).getInstance();return{error:function(se){ie.trigger(i.Z.ERROR,{error:se})}}}bs.__dashjs_factory_name="ErrorHandler";const Cd=g.Z.getSingletonFactory(bs);var fl=I(1715);function Vs(){var ae,ie,se,Re,Ae,ve,ye=this.context,Oe=(0,y.Z)(ye).getInstance();function je(He,Be){if(!Be||!Be.Period_asArray||Be.Period_asArray.length===0)return Promise.resolve();var De=[];return Be.Period_asArray.forEach(function(We){De.push(function(qe,vt){return new Promise(function(ot){if(qe&&qe.AdaptationSet_asArray&&qe.AdaptationSet_asArray.length!==0){var ct=[];qe.AdaptationSet_asArray.forEach(function(mt){ie.getIsTypeOf(mt,vt)&&ct.push(function(Me,st){return new Promise(function(tt){if(Me.Representation_asArray&&Me.Representation_asArray.length!==0){var ft=[],he=[];Me.Representation_asArray.forEach(function(Le,Ve){var Fe=ie.getCodec(Me,Ve,!1),Pe=function(Ne,lt,$e){switch(Ne){case l.Z.VIDEO:return function(xe,et){return{codec:et,width:xe.width||null,height:xe.height||null,framerate:xe.frameRate||null,bitrate:xe.bandwidth||null}}(lt,$e);case l.Z.AUDIO:return function(xe,et){var Et=xe.audioSamplingRate||null;return{codec:et,bitrate:xe.bandwidth||null,samplerate:Et}}(lt,$e);default:return null}}(st,Le,Fe);he.push(Pe),ft.push(se.supportsCodec(Pe,st))}),Promise.all(ft).then(function(Le){Me.Representation_asArray=Me.Representation_asArray.filter(function(Ve,Fe){return Le[Fe]||ve.debug("[Stream] Codec ".concat(he[Fe].codec," not supported ")),Le[Fe]}),tt()}).catch(function(){tt()})}else tt()})}(mt,vt))}),Promise.all(ct).then(function(){qe.AdaptationSet_asArray=qe.AdaptationSet_asArray.filter(function(mt){var Me=mt.Representation_asArray&&mt.Representation_asArray.length>0;return Me||(Oe.trigger(i.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:mt}),ve.warn("AdaptationSet has been removed because of no supported Representation")),Me}),ot()}).catch(function(){ot()})}else ot()})}(We,He))}),Promise.all(De)}return ae={setConfig:function(He){He&&(He.adapter&&(ie=He.adapter),He.capabilities&&(se=He.capabilities),He.settings&&(Re=He.settings),He.customParametersModel&&(Ae=He.customParametersModel))},filterUnsupportedFeatures:function(He){return new Promise(function(Be){var De=[];De.push(je(l.Z.VIDEO,He)),De.push(je(l.Z.AUDIO,He)),Promise.all(De).then(function(){Re.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(We){We&&We.Period_asArray&&We.Period_asArray.length!==0&&We.Period_asArray.forEach(function(qe){qe.AdaptationSet_asArray=qe.AdaptationSet_asArray.filter(function(vt){return!vt.Representation_asArray||vt.Representation_asArray.length===0||(vt.Representation_asArray=vt.Representation_asArray.filter(function(ot){var ct=ie.getEssentialPropertiesForRepresentation(ot);if(ct&&ct.length>0)for(var mt=0;mt<ct.length;){if(!se.supportsEssentialProperty(ct[mt]))return ve.debug("[Stream] EssentialProperty not supported: "+ct[mt].schemeIdUri),!1;mt+=1}return!0}),vt.Representation_asArray&&vt.Representation_asArray.length>0)})})}(He),function(We){var qe=Ae.getCustomCapabilitiesFilters();qe&&qe.length!==0&&We&&We.Period_asArray&&We.Period_asArray.length!==0&&We.Period_asArray.forEach(function(vt){vt.AdaptationSet_asArray=vt.AdaptationSet_asArray.filter(function(ot){return!ot.Representation_asArray||ot.Representation_asArray.length===0||(ot.Representation_asArray=ot.Representation_asArray.filter(function(ct){return!qe.some(function(mt){return!mt(ct)})}),ot.Representation_asArray&&ot.Representation_asArray.length>0)})})}(He),Be()}).catch(function(){Be()})})}},ve=(0,d.Z)(ye).getInstance().getLogger(ae),ae}Vs.__dashjs_factory_name="CapabilitiesFilter";const aa=g.Z.getSingletonFactory(Vs),da=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function $c(){var ae;return{initialize:function(ie){if(ae=new da,!ie)return null;var se=ie.indexOf("#");if(se!==-1)for(var Re=ie.substr(se+1).split("&"),Ae=0,ve=Re.length;Ae<ve;++Ae){var ye=Re[Ae],Oe=ye.indexOf("=");if(Oe!==-1){var je=ye.substring(0,Oe);ae.hasOwnProperty(je)&&(ae[je]=ye.substr(Oe+1))}}},getURIFragmentData:function(){return ae}}}$c.__dashjs_factory_name="URIFragmentModel";const kd=g.Z.getSingletonFactory($c);function Jc(){var ae,ie=this.context,se=(0,y.Z)(ie).getInstance();return{getValue:function(){return ae},setValue:function(Re){ae=Re,Re&&se.trigger(i.Z.MANIFEST_LOADED,{data:Re})}}}Jc.__dashjs_factory_name="ManifestModel";const dl=g.Z.getSingletonFactory(Jc);var hl=-.5;function Od(){var ae,ie,se,Re,Ae=this.context,ve=(0,G.Z)(Ae).getInstance();function ye(He,Be){return isNaN(He)?0:He>0?(Be&&ie.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):He<hl?(Be&&ie.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(hl,": ").concat(-50,"% playback speed.")),hl):He}function Oe(He,Be){return isNaN(He)?0:He<0?(Be&&ie.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):He>1?(Be&&ie.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):He}function je(){var He=ve.get().streaming.buffer.stableBufferTime>0?ve.get().streaming.buffer.stableBufferTime:ve.get().streaming.buffer.fastSwitchEnabled?20:12,Be=se.getLiveDelay();return!isNaN(Be)&&Be>0?Math.min(He,Be):He}return ae={getCatchupMaxDrift:function(){if(!isNaN(ve.get().streaming.liveCatchup.maxDrift)&&ve.get().streaming.liveCatchup.maxDrift>0)return ve.get().streaming.liveCatchup.maxDrift;var He=Re.getServiceDescriptionSettings();return He&&He.liveCatchup&&!isNaN(He.liveCatchup.maxDrift)&&He.liveCatchup.maxDrift>0?He.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return ve.get().streaming.liveCatchup.enabled!==null?ve.get().streaming.liveCatchup.enabled:se.getInitialCatchupModeActivated()},getStableBufferTime:je,getInitialBufferLevel:function(){var He=ve.get().streaming.buffer.initialBufferLevel;return isNaN(He)||He<0?0:Math.min(je(),He)},getRetryAttemptsForType:function(He){var Be=isNaN(ve.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:ve.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return se.getLowLatencyModeEnabled()?ve.get().streaming.retryAttempts[He]*Be:ve.get().streaming.retryAttempts[He]},getRetryIntervalsForType:function(He){var Be=isNaN(ve.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:ve.get().streaming.retryIntervals.lowLatencyReductionFactor;return se.getLowLatencyModeEnabled()?ve.get().streaming.retryIntervals[He]/Be:ve.get().streaming.retryIntervals[He]},getCatchupPlaybackRates:function(He){var Be=ve.get().streaming.liveCatchup.playbackRate;if(!isNaN(Be.min)||!isNaN(Be.max))return{min:ye(Be.min,He),max:Oe(Be.max,He)};var De=Re.getServiceDescriptionSettings();if(De&&De.liveCatchup&&(!isNaN(De.liveCatchup.playbackRate.min)||!isNaN(De.liveCatchup.playbackRate.max))){var We=De.liveCatchup.playbackRate;return{min:ye(We.min,He),max:Oe(We.max,He)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(He,Be){try{var De=ve.get().streaming.abr[He][Be];if(!isNaN(De)&&De!==-1)return De;var We=Re.getServiceDescriptionSettings();return We&&We[He]&&!isNaN(We[He][Be])?We[He][Be]:-1}catch{return-1}},setConfig:function(He){He.playbackController&&(se=He.playbackController),He.serviceDescriptionController&&(Re=He.serviceDescriptionController)},reset:function(){}},ie=(0,d.Z)(Ae).getInstance().getLogger(ae),ae}Od.__dashjs_factory_name="MediaPlayerModel";const Vi=g.Z.getSingletonFactory(Od);var Ts=I(1767);function ef(ae){var ie=(ae=ae||{}).abrController,se=ae.switchHistory,Re=ae.droppedFramesHistory,Ae=ae.currentRequest,ve=ae.useBufferOccupancyABR,ye=ae.useL2AABR,Oe=ae.useLoLPABR,je=ae.streamProcessor?ae.streamProcessor.getScheduleController():null,He=ae.streamProcessor?ae.streamProcessor.getRepresentationInfo():null,Be=ae.videoModel?ae.videoModel:null;function De(){return He?He.mediaInfo:null}return{getMediaType:function(){var We=De();return We?We.type:null},getMediaInfo:De,getDroppedFramesHistory:function(){return Re},getCurrentRequest:function(){return Ae},getSwitchHistory:function(){return se},getStreamInfo:function(){var We=De();return We?We.streamInfo:null},getScheduleController:function(){return je},getAbrController:function(){return ie},getRepresentationInfo:function(){return He},useBufferOccupancyABR:function(){return ve},useL2AABR:function(){return ye},useLoLPABR:function(){return Oe},getVideoModel:function(){return Be}}}ef.__dashjs_factory_name="RulesContext";const ra=g.Z.getClassFactory(ef);var oa=I(2068);function Pu(){var ae=[],ie=[];return{push:function(se){se.newValue===oa.Z.NO_CHANGE&&(se.newValue=se.oldValue),ae[se.oldValue]||(ae[se.oldValue]={noDrops:0,drops:0,dropSize:0});var Re=se.newValue-se.oldValue,Ae=Re<0?1:0,ve=Ae?-Re:0,ye=Ae?0:1;if(ae[se.oldValue].drops+=Ae,ae[se.oldValue].dropSize+=ve,ae[se.oldValue].noDrops+=ye,ie.push({idx:se.oldValue,noDrop:ye,drop:Ae,dropSize:ve}),ie.length>8){var Oe=ie.shift();ae[Oe.idx].drops-=Oe.drop,ae[Oe.idx].dropSize-=Oe.dropSize,ae[Oe.idx].noDrops-=Oe.noDrop}},getSwitchRequests:function(){return ae},reset:function(){ae=[],ie=[]}}}Pu.__dashjs_factory_name="SwitchRequestHistory";const Dd=g.Z.getClassFactory(Pu);function cu(){var ae={},ie={},se={};return{push:function(Re,Ae,ve){if(Ae){ae[Re]||(ae[Re]=[],ie[Re]=0,se[Re]=0);var ye=ve&&ve.droppedVideoFrames?ve.droppedVideoFrames:0,Oe=ve&&ve.totalVideoFrames?ve.totalVideoFrames:0,je=ye-ie[Re];ie[Re]=ye;var He=Oe-se[Re];se[Re]=Oe;var Be=ae[Re];isNaN(Ae)||(Be[Ae]?(Be[Ae].droppedVideoFrames+=je,Be[Ae].totalVideoFrames+=He):Be[Ae]={droppedVideoFrames:je,totalVideoFrames:He})}},getFrameHistory:function(Re){return ae[Re]},clearForStream:function(Re){try{delete ae[Re],delete ie[Re],delete se[Re]}catch{}},reset:function(){ae={},ie={},se={}}}}cu.__dashjs_factory_name="DroppedFramesHistory";const Pd=g.Z.getClassFactory(cu);function pl(ae){var ie,se,Re,Ae,ve,ye=this.context,Oe=(ae=ae||{}).settings,je=(0,y.Z)(ye).getInstance();function He(ot,ct,mt,Me){var st=Math.pow(.5,mt/Me.fast);ot.fastEstimate=(1-st)*ct+st*ot.fastEstimate;var tt=Math.pow(.5,mt/Me.slow);ot.slowEstimate=(1-tt)*ct+tt*ot.slowEstimate,ot.totalWeight+=mt}function Be(ot,ct,mt){return Oe.get().streaming.abr.movingAverageMethod!==l.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(Me,st){var tt=Me?ve.throughputHalfLife:ve.latencyHalfLife,ft=Me?Re[st]:Ae[st];if(!ft||ft.totalWeight<=0)return NaN;var he=ft.fastEstimate/(1-Math.pow(.5,ft.totalWeight/tt.fast)),Le=ft.slowEstimate/(1-Math.pow(.5,ft.totalWeight/tt.slow));return Me?Math.min(he,Le):Math.max(he,Le)}(ot,ct):function(Me,st,tt){var ft=function(Le,Ve,Fe){var Pe,Ne;if(Le?(Pe=ie[Ve],Ne=Fe?3:4):(Pe=se[Ve],Ne=4),Pe){if(Ne>=Pe.length)Ne=Pe.length;else if(Le)for(var lt=1;lt<Ne;++lt){var $e=Pe[Pe.length-lt]/Pe[Pe.length-lt-1];if(($e>=1.3||$e<=.7692307692307692)&&(Ne+=1)===Pe.length)break}}else Ne=0;return Ne}(Me,st,tt),he=(Me?ie:se)[st];return ft!==0&&he&&he.length!==0?(he=he.slice(-ft)).reduce(function(Le,Ve){return Le+Ve})/he.length:NaN}(ot,ct,mt)}function De(ot,ct){return Be(!0,ot,ct)}function We(ot){ie[ot]=ie[ot]||[],se[ot]=se[ot]||[],Re[ot]=Re[ot]||{fastEstimate:0,slowEstimate:0,totalWeight:0},Ae[ot]=Ae[ot]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function qe(){ie={},se={},Re={},Ae={}}var vt={push:function(ot,ct,mt){if(ct.trace&&ct.trace.length){var Me,st=ct.tresponse.getTime()-ct.trequest.getTime()||1,tt=ct._tfinish.getTime()-ct.tresponse.getTime()||1,ft=ct.trace.reduce(function(Fe,Pe){return Fe+Pe.b[0]},0),he=0;if((Me=ct._fileLoaderType&&ct._fileLoaderType===l.Z.FILE_LOADER_TYPES.FETCH?ct.trace.reduce(function(Fe,Pe){return Fe+Pe.d},0):mt?tt:st+tt)!==0&&(he=Math.round(8*ft/Me)),ct.cmsd){var Le=ct.cmsd.dynamic&&ct.cmsd.dynamic.etp?ct.cmsd.dynamic.etp:null;if(Le){var Ve=Oe.get().streaming.cmsd.abr.etpWeightRatio;Ve>0&&Ve<=1&&(he=he*(1-Ve)+Le*Ve)}}if(We(ot),function(Fe,Pe,Ne){return Fe===l.Z.VIDEO?Ne<Oe.get().streaming.cacheLoadThresholds[l.Z.VIDEO]:Fe===l.Z.AUDIO?Ne<Oe.get().streaming.cacheLoadThresholds[l.Z.AUDIO]:void 0}(ot,0,tt)){if(ie[ot].length>0&&!ie[ot].hasCachedEntries)return;ie[ot].hasCachedEntries=!0}else ie[ot]&&ie[ot].hasCachedEntries&&function(Fe){delete ie[Fe],delete se[Fe],delete Re[Fe],delete Ae[Fe],We(Fe)}(ot);ie[ot].push(he),je.trigger(r.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:he,mediaType:ot,httpRequest:ct}),ie[ot].length>20&&ie[ot].shift(),se[ot].push(st),se[ot].length>20&&se[ot].shift(),He(Re[ot],he,.001*tt,ve.throughputHalfLife),He(Ae[ot],st,1,ve.latencyHalfLife)}},getAverageThroughput:De,getSafeAverageThroughput:function(ot,ct){var mt=De(ot,ct);return isNaN(mt)||(mt*=Oe.get().streaming.abr.bandwidthSafetyFactor),mt},getAverageLatency:function(ot){return Be(!1,ot)},reset:qe};return ve={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},qe(),vt}pl.__dashjs_factory_name="ThroughputHistory";const gl=g.Z.getClassFactory(pl);function tf(){var ae,ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We,qe,vt,ot,ct,mt,Me,st,tt,ft,he,Le,Ve,Fe,Pe,Ne=this.context,lt=(0,d.Z)(Ne).getInstance(),$e=(0,y.Z)(Ne).getInstance();function xe(){Ae={},ve={},Oe={},ye={},st={},he={},Le={},Ve={},He===void 0&&(He=!1),tt&&tt.reset(),Me=void 0,tt=void 0,ft=void 0,clearTimeout(je),je=null}function et(St){var gt=St.request.mediaType,Rt=St.streamId;if(gt&&Rt&&ye[Rt]&&Pe.get().streaming.abr.autoSwitchBitrate[gt]){var It=ye[Rt][gt];if(It){var xt=ra(Ne).create({abrController:ae,streamProcessor:It,currentRequest:St.request,useBufferOccupancyABR:he[gt],useL2AABR:Le[gt],useLoLPABR:Ve[gt],videoModel:qe}),zt=se.shouldAbandonFragment(xt,Rt);zt.quality>oa.Z.NO_CHANGE&&It.getFragmentModel().getRequests({state:b.FRAGMENT_MODEL_LOADING,index:St.request.index})[0]&&(Oe[Rt][gt].state=h.Z.ABANDON_LOAD,st[Rt][gt].reset(),st[Rt][gt].push({oldValue:Ot(gt,Rt),newValue:zt.quality,confidence:1,reason:zt.reason}),Kt(gt,Re.getActiveStreamInfo(),zt.quality,zt.reason),clearTimeout(je),je=setTimeout(function(){Oe[Rt][gt].state=h.Z.ALLOW_LOAD,je=null},Pe.get().streaming.abandonLoadTimeout))}}}function Et(St){St.mediaType===l.Z.VIDEO&&(Me!==void 0&&tt.push(St.streamId,Me,qe.getPlaybackQuality()),Me=St.newQuality)}function kt(St){var gt,Rt;St.metric!==h.Z.HTTP_REQUEST||!St.value||St.value.type!==ee.w.MEDIA_SEGMENT_TYPE||St.mediaType!==l.Z.AUDIO&&St.mediaType!==l.Z.VIDEO||ft.push(St.mediaType,St.value,Pe.get().streaming.abr.useDeadTimeLatency),St.metric!==h.Z.BUFFER_LEVEL||St.mediaType!==l.Z.AUDIO&&St.mediaType!==l.Z.VIDEO||(gt=St.mediaType,Rt=.001*St.value.level,Pe.get().streaming.abr.ABRStrategy===l.Z.ABR_STRATEGY_DYNAMIC&&function(It,xt){try{var zt=vt.getStableBufferTime(),qt=zt,In=.5*zt,Pn=he[It],yr=xt>(Pn?In:qt);he[It]=yr,yr!==Pn&&(yr?ie.info("["+It+"] switching from throughput to buffer occupancy ABR rule (buffer: "+xt.toFixed(3)+")."):ie.info("["+It+"] switching from buffer occupancy to throughput ABR rule (buffer: "+xt.toFixed(3)+")."))}catch(ar){ie.error(ar)}}(gt,Rt))}function Mt(St,gt){try{var Rt;return Ae[gt]=Ae[gt]||{},Ae[gt].hasOwnProperty(St)||(Ae[gt][St]=0),Rt=function(It,xt){var zt=Ae[xt][It],qt=zt;if(!ye[xt]||!ye[xt][It])return qt;var In=At(It,xt);In!==void 0&&(qt=Math.max(zt,In));var Pn=function(yr,ar){try{var lr=vt.getAbrBitrateParameter("maxBitrate",yr);return lr>-1?un(ye[ar][yr].getMediaInfo(),lr,ar):void 0}catch{return}}(It,xt);return Pn!==void 0&&(qt=Math.min(qt,Pn)),qt}(St,gt),Rt=function(It,xt,zt){var qt=Ae[zt][xt],In=Pe.get().streaming.abr.maxRepresentationRatio[xt];return isNaN(In)||In>=1||In<0?It:Math.min(It,Math.round(qt*In))}(Rt,St,gt),Rt=function(It,xt,zt){if(xt!==l.Z.VIDEO||!Pe.get().streaming.abr.limitBitrateByPortal||!ye[zt]||!ye[zt][xt])return It;He||mn();var qt=ye[zt][xt].getStreamInfo(),In=We.getAdaptationForType(qt.index,xt,qt).Representation_asArray,Pn=It;if(Be>0&&De>0){for(;Pn>0&&In[Pn]&&Be<In[Pn].width&&Be-In[Pn-1].width<In[Pn].width-Be;)Pn-=1;for(;Pn<In.length-1&&In[Pn].width===In[Pn+1].width;)Pn+=1}return Pn}(Rt,St,gt),Pe.get().streaming.cmsd.enabled&&Pe.get().streaming.cmsd.abr.applyMb&&(Rt=function(It,xt,zt){if(xt!=="video")return It;var qt=ct.getMaxBitrate(xt);if(qt<0)return It;var In=Jt(zt,"audio",Ot("audio",zt));qt-=In?In.bitrate/1e3:0;var Pn=un(ye[zt][xt].getMediaInfo(),qt,zt);return ie.debug("Stream ID: "+zt+" ["+xt+"] Apply max bit rate from CMSD: "+qt),Math.min(It,Pn)}(Rt,St,gt)),Rt}catch{return}}function At(St,gt){try{return function(Rt,It){try{var xt=vt.getAbrBitrateParameter("minBitrate",Rt);if(xt>-1){var zt=ye[It][Rt].getMediaInfo(),qt=Cn(zt),In=un(zt,xt,It);return qt[In]&&In<qt.length-1&&qt[In].bitrate<1e3*xt&&In++,In}return}catch{return}}(St,gt)}catch{return}}function Ot(St){var gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return gt||(gt=Re.getActiveStreamInfo().id),St&&ye[gt]&&ye[gt][St]&&gt?(ve[gt]=ve[gt]||{},ve[gt].hasOwnProperty(St)||(ve[gt][St]=0),ve[gt][St]):0}catch{return 0}}function Kt(St,gt,Rt){var It=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(gt&&gt.id&&St){var xt=gt.id,zt=Ot(St,xt);(0,X.SE)(Rt);var qt=Mt(St,xt);Rt!==zt&&Rt>=0&&Rt<=qt&&_n(St,zt,Rt,qt,It,xt)}}function _n(St,gt,Rt,It,xt,zt){if(St&&ye[zt]&&ye[zt][St]){var qt=ye[zt][St].getStreamInfo(),In=qt&&qt.manifestInfo&&qt.manifestInfo.isDynamic,Pn=Fe.getCurrentBufferLevel(St);ie.info("Stream ID: "+zt+" ["+St+"] switch from "+gt+" to "+Rt+"/"+It+" (buffer: "+Pn+") "+(xt?JSON.stringify(xt):".")),ve[zt]=ve[zt]||{},ve[zt][St]=Rt;var yr=Jt(zt,St,Rt);$e.trigger(i.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:gt,newQuality:Rt,reason:xt,streamInfo:qt,bitrateInfo:yr,maxIdx:It,mediaType:St},{streamId:qt.id,mediaType:St});var ar=ft.getAverageThroughput(St,In);isNaN(ar)||mt.setSavedBitrateSettings(St,ar)}}function Jt(St,gt,Rt){if(gt&&ye&&ye[St]&&ye[St][gt]){var It=Cn(ye[St][gt].getMediaInfo());return It[Rt]?It[Rt]:null}return null}function un(St,gt,Rt){var It=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,xt=St&&St.type?ye[Rt][St.type].getRepresentationInfo():null;if(Pe.get().streaming.abr.useDeadTimeLatency&&It&&xt&&xt.fragmentDuration){It/=1e3;var zt=xt.fragmentDuration;if(It>zt)return 0;gt*=1-It/zt}for(var qt=Cn(St),In=qt.length-1;In>=0;In--)if(1e3*gt>=qt[In].bitrate)return In;return 0}function Cn(St){var gt=[];if(!St||!St.bitrateList)return gt;for(var Rt,It=St.bitrateList,xt=St.type,zt=0,qt=It.length;zt<qt;zt++)(Rt=new gr).mediaType=xt,Rt.qualityIndex=zt,Rt.bitrate=It[zt].bandwidth,Rt.width=It[zt].width,Rt.height=It[zt].height,Rt.scanType=It[zt].scanType,gt.push(Rt);return gt}function mn(){if(qe){var St=Pe.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;Be=qe.getClientWidth()*St,De=qe.getClientHeight()*St}}return ae={initialize:function(){tt=Pd(Ne).create(),ft=gl(Ne).create({settings:Pe}),(se=(0,Ts.Z)(Ne).create({dashMetrics:Fe,customParametersModel:ot,mediaPlayerModel:vt,settings:Pe})).initialize(),$e.on(r.Z.QUALITY_CHANGE_RENDERED,Et,ae),$e.on(r.Z.METRIC_ADDED,kt,ae),$e.on(i.Z.LOADING_PROGRESS,et,ae)},isPlayingAtTopQuality:function(St){var gt=St?St.id:null,Rt=Ot(l.Z.AUDIO,gt),It=Ot(l.Z.VIDEO,gt);return Rt===Mt(l.Z.AUDIO,gt)&&It===Mt(l.Z.VIDEO,gt)},updateTopQualityIndex:function(St){var gt=St.type,Rt=St.streamInfo.id,It=St.representationCount-1;return Ae[Rt]=Ae[Rt]||{},Ae[Rt][gt]=It,It},clearDataForStream:function(St){tt&&tt.clearForStream(St),ye[St]&&delete ye[St],st[St]&&delete st[St],Oe[St]&&delete Oe[St]},getThroughputHistory:function(){return ft},getBitrateList:Cn,getQualityForBitrate:un,getTopBitrateInfoFor:function(St){var gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(gt||(gt=Re.getActiveStreamInfo().id),St&&ye&&ye[gt]&&ye[gt][St]){var Rt=Mt(St,gt),It=Cn(ye[gt][St].getMediaInfo());return It[Rt]?It[Rt]:null}return null},getMinAllowedIndexFor:At,getMaxAllowedIndexFor:Mt,getInitialBitrateFor:function(St,gt){if(function(){if(!mt||!mt.hasOwnProperty("getSavedBitrateSettings"))throw new Error(l.Z.MISSING_CONFIG_ERROR)}(),St===l.Z.TEXT)return NaN;var Rt=mt.getSavedBitrateSettings(St),It=vt.getAbrBitrateParameter("initialBitrate",St),xt=Pe.get().streaming.abr.initialRepresentationRatio[St];if(It===-1)if(xt>-1){var zt=ye[gt][St].getStreamInfo(),qt=We.getAdaptationForType(zt.index,St,zt).Representation_asArray;It=Array.isArray(qt)?qt[Math.max(Math.round(qt.length*xt)-1,0)].bandwidth/1e3:0}else It=isNaN(Rt)?St===l.Z.VIDEO?1e3:100:Rt;return It},getQualityFor:Ot,getAbandonmentStateFor:function(St,gt){return Oe[St]&&Oe[St][gt]?Oe[St][gt].state:null},setPlaybackQuality:Kt,checkPlaybackQuality:function(St,gt){try{if(!(St&&ye&&ye[gt]&&ye[gt][St]))return!1;if(tt){var Rt=qe.getPlaybackQuality();Rt&&tt.push(gt,Me,Rt)}if(!Pe.get().streaming.abr.autoSwitchBitrate[St])return!1;var It=Ot(St,gt),xt=ra(Ne).create({abrController:ae,switchHistory:st[gt][St],droppedFramesHistory:tt,streamProcessor:ye[gt][St],currentValue:It,useBufferOccupancyABR:he[St],useL2AABR:Le[St],useLoLPABR:Ve[St],videoModel:qe}),zt=At(St,gt),qt=Mt(St,gt),In=se.getMaxQuality(xt),Pn=In.quality;return zt!==void 0&&(Pn>oa.Z.NO_CHANGE?Pn:It)<zt&&(Pn=zt),Pn>qt&&(Pn=qt),st[gt][St].push({oldValue:It,newValue:Pn}),Pn>oa.Z.NO_CHANGE&&Pn!==It&&(Oe[gt][St].state===h.Z.ALLOW_LOAD||Pn<It)&&(_n(St,It,Pn,qt,In.reason,gt),!0)}catch{return!1}},setElementSize:mn,setWindowResizeEventCalled:function(St){He=St},registerStreamType:function(St,gt){var Rt=gt.getStreamInfo().id;ye[Rt]||(ye[Rt]={}),st[Rt]||(st[Rt]={}),Oe[Rt]||(Oe[Rt]={}),st[Rt][St]=Dd(Ne).create(),ye[Rt][St]=gt,Oe[Rt][St]={},Oe[Rt][St].state=h.Z.ALLOW_LOAD,function(It){var xt=Pe.get().streaming.abr.ABRStrategy;xt===l.Z.ABR_STRATEGY_L2A?(he[It]=!1,Ve[It]=!1,Le[It]=!0):xt===l.Z.ABR_STRATEGY_LoLP?(he[It]=!1,Ve[It]=!0,Le[It]=!1):xt===l.Z.ABR_STRATEGY_BOLA?(he[It]=!0,Ve[It]=!1,Le[It]=!1):xt===l.Z.ABR_STRATEGY_THROUGHPUT?(he[It]=!1,Ve[It]=!1,Le[It]=!1):xt===l.Z.ABR_STRATEGY_DYNAMIC&&(he[It]=!(!he||!he[It])&&he[It],Ve[It]=!1,Le[It]=!1)}(St),St===l.Z.VIDEO&&mn()},unRegisterStreamType:function(St,gt){try{ye[St]&&ye[St][gt]&&delete ye[St][gt],st[St]&&st[St][gt]&&delete st[St][gt],Oe[St]&&Oe[St][gt]&&delete Oe[St][gt]}catch{}},setConfig:function(St){St&&(St.streamController&&(Re=St.streamController),St.domStorage&&(mt=St.domStorage),St.mediaPlayerModel&&(vt=St.mediaPlayerModel),St.customParametersModel&&(ot=St.customParametersModel),St.cmsdModel&&(ct=St.cmsdModel),St.dashMetrics&&(Fe=St.dashMetrics),St.adapter&&(We=St.adapter),St.videoModel&&(qe=St.videoModel),St.settings&&(Pe=St.settings))},reset:function(){xe(),$e.off(i.Z.LOADING_PROGRESS,et,ae),$e.off(r.Z.QUALITY_CHANGE_RENDERED,Et,ae),$e.off(r.Z.METRIC_ADDED,kt,ae),se&&se.reset()}},ie=lt.getLogger(ae),xe(),ae}tf.__dashjs_factory_name="AbrController";var $l=g.Z.getSingletonFactory(tf);$l.QUALITY_DEFAULT=0,g.Z.updateSingletonFactory(tf.__dashjs_factory_name,$l);const Nd=$l;var nf=new Map([[l.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[l.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[l.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[l.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function ml(){var ae,ie,se,Re,Ae,ve,ye=this.context,Oe=(0,y.Z)(ye).getInstance(),je=[];function He(){se&&(se.playbackRate=1,se.removeEventListener("canplay",He))}function Be(){return je.length>0}function De(){if(se&&Be()&&se.playbackRate===0){var Me=document.createEvent("Event");Me.initEvent("waiting",!0,!1),se.dispatchEvent(Me)}}function We(Me,st){se&&se.addEventListener(Me,st)}function qe(Me,st){se&&se.removeEventListener(Me,st)}function vt(){return se?se.readyState:NaN}function ot(){return se?se.buffered:null}function ct(Me,st,tt,ft,he){if(se){for(var Le=0;Le<se.textTracks.length;Le++)if(se.textTracks[Le].kind===Me&&(!st||se.textTracks[Le].label==st)&&se.textTracks[Le].language===tt&&se.textTracks[Le].isTTML===ft&&se.textTracks[Le].isEmbedded===he)return se.textTracks[Le]}return null}function mt(Me,st){Me===l.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||vt()>=Me?st():function(tt,ft){We(tt,function he(){qe(tt,he),ft(tt)})}(nf.get(Me),st)}return ae={initialize:function(){Oe.on(i.Z.PLAYBACK_PLAYING,De,this)},setCurrentTime:function(Me,st){se&&(Re=Me,mt(l.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(se.currentTime!==Re)try{Re=st?function(tt){var ft=ot(),he=tt,Le=9999999999;if(ft)for(var Ve=0;Ve<ft.length;Ve++){var Fe=ft.start(Ve),Pe=ft.end(Ve),Ne=Math.abs(Fe-tt),lt=Math.abs(Pe-tt);if(tt>=Fe&&tt<=Pe)return tt;Ne<Le&&(Le=Ne,he=Fe),lt<Le&&(Le=lt,he=Pe)}return he}(Re):Re,se.currentTime=Re,Re=NaN}catch(tt){se.readyState===0&&tt.code===tt.INVALID_STATE_ERR&&setTimeout(function(){se.currentTime=Re,Re=NaN},400)}else Re=NaN}))},play:function(){if(se){se.autoplay=!0;var Me=se.play();Me&&Me.catch&&typeof Promise<"u"&&Me.catch(function(st){st.name==="NotAllowedError"&&Oe.trigger(i.Z.PLAYBACK_NOT_ALLOWED),ie.warn("Caught pending play exception - continuing (".concat(st,")"))})}},isPaused:function(){return se?se.paused:null},pause:function(){se&&(se.pause(),se.autoplay=!1)},isStalled:Be,isSeeking:function(){return se?se.seeking||!isNaN(Re):null},getTime:function(){return se?isNaN(Re)?se.currentTime:Re:null},getPlaybackRate:function(){return se?se.playbackRate:null},setPlaybackRate:function(Me){se&&(!(arguments.length>1&&arguments[1]!==void 0&&arguments[1])&&se.readyState<=2&&Me>0?se.addEventListener("canplay",He):se.playbackRate=Me)},getPlayedRanges:function(){return se?se.played:null},getEnded:function(){return se?se.ended:null},setStallState:function(Me,st){(function(tt,ft){ft?function(he){he!==null&&se&&!se.seeking&&je.indexOf(he)===-1&&je.push(he)}(tt):function(he){var Le=je.indexOf(he);he!==null&&Le!==-1&&je.splice(Le,1)}(tt)})(Me,st)},getElement:function(){return se},setElement:function(Me){if(!(Me==null||Me&&/^(VIDEO|AUDIO)$/i.test(Me.nodeName)))throw"element is not video or audio DOM type!";(se=Me)&&(se.preload="auto")},setSource:function(Me){se&&(Me?se.src=Me:(se.removeAttribute("src"),se.load()))},getSource:function(){return se?se.src:null},getTTMLRenderingDiv:function(){return Ae},setTTMLRenderingDiv:function(Me){(Ae=Me).style.position="absolute",Ae.style.display="flex",Ae.style.overflow="hidden",Ae.style.pointerEvents="none",Ae.style.top=0,Ae.style.left=0},getVttRenderingDiv:function(){return ve},setVttRenderingDiv:function(Me){ve=Me},getPlaybackQuality:function(){if(!se)return null;var Me="webkitDroppedFrameCount"in se&&"webkitDecodedFrameCount"in se,st=null;return"getVideoPlaybackQuality"in se?st=se.getVideoPlaybackQuality():Me&&(st={droppedVideoFrames:se.webkitDroppedFrameCount,totalVideoFrames:se.webkitDroppedFrameCount+se.webkitDecodedFrameCount,creationTime:new Date}),st},addEventListener:We,removeEventListener:qe,getReadyState:vt,getBufferRange:ot,getClientWidth:function(){return se?se.clientWidth:NaN},getClientHeight:function(){return se?se.clientHeight:NaN},getTextTracks:function(){return se?se.textTracks:[]},getTextTrack:ct,addTextTrack:function(Me,st,tt,ft,he){if(!se)return null;var Le=ct(Me,st,tt,ft,he);return Le||((Le=se.addTextTrack(Me,st,tt)).isEmbedded=he,Le.isTTML=ft),Le},appendChild:function(Me){se&&(se.appendChild(Me),Me.isTTML!==void 0&&(se.textTracks[se.textTracks.length-1].isTTML=Me.isTTML,se.textTracks[se.textTracks.length-1].isEmbedded=Me.isEmbedded))},removeChild:function(Me){se&&se.removeChild(Me)},getVideoWidth:function(){return se?se.videoWidth:NaN},getVideoHeight:function(){return se?se.videoHeight:NaN},getVideoRelativeOffsetTop:function(){if(se){var Me=se.parentNode.host||se.parentNode;return Me?se.getBoundingClientRect().top-Me.getBoundingClientRect().top:NaN}return NaN},getVideoRelativeOffsetLeft:function(){if(se){var Me=se.parentNode.host||se.parentNode;return Me?se.getBoundingClientRect().left-Me.getBoundingClientRect().left:NaN}return NaN},waitForReadyState:mt,reset:function(){Oe.off(i.Z.PLAYBACK_PLAYING,De,this)}},ie=(0,d.Z)(ye).getInstance().getLogger(ae),Re=NaN,ae}ml.__dashjs_factory_name="VideoModel";const Jl=g.Z.getSingletonFactory(ml);var _a=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],rf="dashjs_?_bitrate",Zs="dashjs_?_settings",Ro="localStorage",vl="lastBitrate",af="lastMediaSettings";function ha(ae){ae=ae||{};var ie,se,Re,Ae=this.context,ve=ae.settings;function ye(Be){if(Re!==void 0)return Re;var De;Re=!1;try{typeof window<"u"&&(De=window[Be])}catch(We){return se.warn("DOMStorage access denied: "+We.message),Re}if(!De||Be!==Ro&&Be!=="sessionStorage")return Re;try{De.setItem("1","1"),De.removeItem("1"),Re=!0}catch(We){se.warn("DOMStorage is supported, but cannot be used: "+We.message)}return Re}function Oe(){var Be=6e5;return Math.round(new Date().getTime()/Be)*Be}function je(Be,De){return ye(Be)&&ve.get().streaming[De+"CachingInfo"].enabled}function He(){if(!ve)throw new Error(l.Z.MISSING_CONFIG_ERROR)}return ie={getSavedBitrateSettings:function(Be){if(He(),!ve.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var De=NaN;if(je(Ro,vl)){var We=rf.replace(/\?/,Be);try{var qe=JSON.parse(localStorage.getItem(We))||{},vt=new Date().getTime()-parseInt(qe.timestamp,10)>=ve.get().streaming.lastBitrateCachingInfo.ttl||!1,ot=parseFloat(qe.bitrate);isNaN(ot)||vt?vt&&localStorage.removeItem(We):(De=ot,se.debug("Last saved bitrate for "+Be+" was "+ot))}catch{return null}}return De},setSavedBitrateSettings:function(Be,De){if(je(Ro,vl)&&De){var We=rf.replace(/\?/,Be);try{localStorage.setItem(We,JSON.stringify({bitrate:De.toFixed(3),timestamp:Oe()}))}catch(qe){se.error(qe.message)}}},getSavedMediaSettings:function(Be){if(He(),!ve.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var De=null;if(je(Ro,af)){var We=Zs.replace(/\?/,Be);try{var qe=JSON.parse(localStorage.getItem(We))||{},vt=new Date().getTime()-parseInt(qe.timestamp,10)>=ve.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;De=qe.settings,vt&&(localStorage.removeItem(We),De=null)}catch{return null}}return De},setSavedMediaSettings:function(Be,De){if(je(Ro,af)){var We=Zs.replace(/\?/,Be);try{localStorage.setItem(We,JSON.stringify({settings:De,timestamp:Oe()}))}catch(qe){se.error(qe.message)}}}},se=(0,d.Z)(Ae).getInstance().getLogger(ie),ye(Ro)&&_a.forEach(function(Be){var De=localStorage.getItem(Be.oldKey);if(De){localStorage.removeItem(Be.oldKey);try{localStorage.setItem(Be.newKey,De)}catch(We){se.error(We.message)}}}),ie}ha.__dashjs_factory_name="DOMStorage";const xd=g.Z.getSingletonFactory(ha);var _s=I(2032),yl=I(2011);function Ld(){var ae,ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We,qe=this.context;function vt(Me,st,tt,ft){var he=null,Le=Me?We.resolve(Me.path):null,Ve=ft||{init:!0,url:Le?Le.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:st};ie.debug("Start searching for initialization.");var Fe=mt(Ve);Oe.load({request:Fe,success:function(Pe){if(Ve.bytesLoaded=Ve.range.end,!(he=Re.findInitRange(Pe)))return Ve.range.end=Ve.bytesLoaded+Ve.bytesToLoad,vt(Me,st,tt,Ve);Me.range=he,tt(Me)},error:function(){tt(Me)}}),ie.debug("Perform init search: "+Ve.url)}function ot(Me,st,tt,ft,he,Le){if(tt&&(tt.start===void 0||tt.end===void 0)){var Ve=tt?tt.toString().split("-"):null;tt=Ve?{start:parseFloat(Ve[0]),end:parseFloat(Ve[1])}:null}he=he||ct;var Fe=null,Pe=null,Ne=!!tt,lt=Me?We.resolve(Me.path):null,$e={init:!1,url:lt?lt.url:void 0,range:Ne?tt:{start:0,end:1500},searching:!Ne,bytesLoaded:Le?Le.bytesLoaded:0,bytesToLoad:1500,mediaType:st},xe=mt($e);Oe.load({request:xe,success:function(et){var Et=$e.bytesToLoad,kt=et.byteLength;if($e.bytesLoaded=$e.range.end-$e.range.start,Fe=Re.parse(et),(Pe=Fe.getBox("sidx"))&&Pe.isComplete){var Mt,At,Ot=Pe.references;if(Ot!=null&&Ot.length>0&&(Mt=Ot[0].reference_type===1),Mt){var Kt,_n,Jt,un;ie.debug("Initiate multiple SIDX load."),$e.range.end=$e.range.start+Pe.size;var Cn=[],mn=0,St=(Pe.offset||$e.range.start)+Pe.size,gt=function(It){It?(Cn=Cn.concat(It),++mn>=_n&&(Cn.sort(function(xt,zt){return xt.startTime-zt.startTime<0?-1:0}),he(Cn,Me,ft))):he(null,Me,ft)};for(Kt=0,_n=Ot.length;Kt<_n;Kt++)Jt=St,un=St+Ot[Kt].referenced_size-1,St+=Ot[Kt].referenced_size,ot(Me,st,{start:Jt,end:un},ft,gt,$e)}else ie.debug("Parsing segments from SIDX. representation "+st+" - id: "+Me.id+" for range : "+$e.range.start+" - "+$e.range.end),At=function(It,xt){for(var zt,qt,In,Pn,yr=It.references,ar=yr.length,lr=It.timescale,ur=It.earliest_presentation_time,wr=xt.range.start+It.offset+It.first_offset+It.size,Jr=[],Xr=0;Xr<ar;Xr++)In=yr[Xr].subsegment_duration,Pn=yr[Xr].referenced_size,(zt=new yl.Z).duration=In,zt.startTime=ur,zt.timescale=lr,qt=wr+Pn-1,zt.mediaRange=wr+"-"+qt,Jr.push(zt),ur+=In,wr+=Pn;return Jr}(Pe,$e),he(At,Me,ft)}else{if(Pe)$e.range.start=Pe.offset||$e.range.start,$e.range.end=$e.range.start+(Pe.size||Et);else{if(kt<$e.bytesLoaded)return void he(null,Me,ft);var Rt=Fe.getLastBox();Rt&&Rt.size?($e.range.start=Rt.offset+Rt.size,$e.range.end=$e.range.start+Et):$e.range.end+=Et}ot(Me,st,$e.range,ft,null,$e)}},error:function(){he(null,Me,ft)}}),ie.debug("Perform SIDX load for type ".concat(st," : ").concat($e.url," with range ").concat($e.range.start," - ").concat($e.range.end))}function ct(Me,st,tt){tt({segments:Me,representation:st,error:Me?void 0:new p.Z(je.SEGMENT_BASE_LOADER_ERROR_CODE,je.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function mt(Me){if(Me.url){var st=new m.Z;return st.setInfo(Me),st}}return ae={setConfig:function(Me){Me.baseURLController&&(We=Me.baseURLController),Me.dashMetrics&&(ve=Me.dashMetrics),Me.mediaPlayerModel&&(ye=Me.mediaPlayerModel),Me.errHandler&&(se=Me.errHandler),Me.boxParser&&(Re=Me.boxParser),Me.debug&&(ie=Me.debug.getLogger(ae)),Me.requestModifier&&(Ae=Me.requestModifier),Me.errors&&(je=Me.errors),Me.urlUtils&&(De=Me.urlUtils),Me.constants&&(He=Me.constants),Me.dashConstants&&(Be=Me.dashConstants)},initialize:function(){Oe=fa(qe).create({errHandler:se,dashMetrics:ve,mediaPlayerModel:ye,requestModifier:Ae,boxParser:Re,errors:je,urlUtils:De,constants:He,dashConstants:Be})},loadInitialization:function(Me,st){return new Promise(function(tt){vt(Me,st,tt)})},loadSegments:function(Me,st,tt){return new Promise(function(ft){ot(Me,st,tt,ft)})},reset:function(){Oe&&(Oe.abort(),Oe=null)}}}Ld.__dashjs_factory_name="SegmentBaseLoader";const ec=g.Z.getSingletonFactory(Ld);function Yo(ae){var ie;ae=ae||{};var se=new DataView(ae.data),Re=0;function Ae(ye,Oe){var je=!0,He=0;if(Oe===void 0&&(Oe=!1),ye.tag>16777215?(se.getUint32(Re)!==ye.tag&&(je=!1),He=4):ye.tag>65535?(256*se.getUint16(Re)+se.getUint8(Re+2)!==ye.tag&&(je=!1),He=3):ye.tag>255?(se.getUint16(Re)!==ye.tag&&(je=!1),He=2):(se.getUint8(Re)!==ye.tag&&(je=!1),He=1),!je&&ye.required&&!Oe)throw new Error("required tag not found");return je&&(Re+=He),je}function ve(ye){var Oe=1,je=128,He=-1,Be=0,De=se.getUint8(Re),We=0;for(We=0;We<8;We+=1){if((De&je)===je){Be=ye===void 0?De&~je:De,He=We;break}je>>=1}for(We=0;We<He;We+=1,Oe+=1)Be=Be<<8|255&se.getUint8(Re+Oe);return Re+=Oe,Be}return ie={getPos:function(){return Re},setPos:function(ye){Re=ye},consumeTag:Ae,consumeTagAndSize:function(ye,Oe){var je=Ae(ye,Oe);return je&&ve(),je},parseTag:function(ye){var Oe;return Ae(ye),Oe=ve(),ie[ye.parse](Oe)},skipOverElement:function(ye,Oe){var je,He=Ae(ye,Oe);return He&&(je=ve(),Re+=je),He},getMatroskaCodedNum:ve,getMatroskaFloat:function(ye){var Oe;switch(ye){case 4:Oe=se.getFloat32(Re),Re+=4;break;case 8:Oe=se.getFloat64(Re),Re+=8}return Oe},getMatroskaUint:function(ye){if(ye>4)return function(He){for(var Be=Math.floor(Number.MAX_SAFE_INTEGER/256),De=0,We=0;We<He;We+=1){if(De>Be)throw new Error("Value exceeds safe integer limit");De*=256;var qe=se.getUint8(Re+We);if(De>Number.MAX_SAFE_INTEGER-qe)throw new Error("Value exceeds safe integer limit");De+=qe}return Re+=He,De}(ye);for(var Oe=0,je=0;je<ye;je+=1)Oe<<=8,Oe|=255&se.getUint8(Re+je);return Re+=ye,Oe>>>0},moreData:function(){return Re<se.byteLength}}}Yo.__dashjs_factory_name="EBMLParser";const Nu=g.Z.getClassFactory(Yo);function Md(){var ae,ie,se,Re,Ae,ve,ye,Oe,je,He,Be=this.context;function De(We){var qe=new m.Z;return qe.setInfo(We),qe}return ae={setConfig:function(We){if(!(We.baseURLController&&We.dashMetrics&&We.mediaPlayerModel&&We.errHandler))throw new Error(l.Z.MISSING_CONFIG_ERROR);He=We.baseURLController,ve=We.dashMetrics,ye=We.mediaPlayerModel,Re=We.errHandler,je=We.errors,ie=We.debug.getLogger(ae),Ae=We.requestModifier},initialize:function(){Oe=fa(Be).create({errHandler:Re,dashMetrics:ve,mediaPlayerModel:ye,requestModifier:Ae,errors:je})},loadInitialization:function(We,qe){return new Promise(function(vt){var ot=null,ct=We?He.resolve(We.path):null,mt=We?We.range.split("-"):null,Me={range:{start:mt?parseFloat(mt[0]):null,end:mt?parseFloat(mt[1]):null},request:ot,url:ct?ct.url:void 0,init:!0,mediaType:qe};ie.info("Start loading initialization."),ot=De(Me),Oe.load({request:ot,success:function(){vt(We)},error:function(){vt(We)}}),ie.debug("Perform init load: "+Me.url)})},loadSegments:function(We,qe,vt){return new Promise(function(ot){var ct=null,mt=We?He.resolve(We.path):null,Me=mt?mt.url:void 0;ct=De({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:ct,url:Me,init:!1,mediaType:qe}),ie.debug("Parsing ebml header"),Oe.load({request:ct,success:function(st){(function(tt,ft,he,Le){if(tt&&tt.byteLength!==0){var Ve,Fe,Pe,Ne,lt=Nu(Be).create({data:tt}),$e=he?he.split("-"):null,xe=null,et={url:ft,range:{start:$e?parseFloat($e[0]):null,end:$e?parseFloat($e[1]):null},request:xe};for(ie.debug("Parse EBML header: "+et.url),lt.skipOverElement(se.EBML),lt.consumeTag(se.Segment),Pe=lt.getMatroskaCodedNum(),Pe+=lt.getPos(),Ne=lt.getPos();lt.moreData()&&!lt.consumeTagAndSize(se.Segment.Info,!0);)if(!(lt.skipOverElement(se.Segment.SeekHead,!0)||lt.skipOverElement(se.Segment.Tracks,!0)||lt.skipOverElement(se.Segment.Cues,!0)||lt.skipOverElement(se.Void,!0)))throw new Error("no valid top level element found");for(;Ve===void 0;){var Et=lt.getMatroskaCodedNum(!0),kt=lt.getMatroskaCodedNum();Et===se.Segment.Info.Duration.tag?Ve=lt[se.Segment.Info.Duration.parse](kt):lt.setPos(lt.getPos()+kt)}xe=De(et),Oe.load({request:xe,success:function(Mt){Fe=function(At,Ot,Kt,_n){var Jt,un,Cn,mn,St,gt,Rt,It;for(Cn=[],St=0,gt=(un=function(xt){var zt,qt,In=[],Pn=Nu(Be).create({data:xt});for(Pn.consumeTagAndSize(se.Segment.Cues);Pn.moreData()&&Pn.consumeTagAndSize(se.Segment.Cues.CuePoint,!0);){for((zt={}).CueTime=Pn.parseTag(se.Segment.Cues.CuePoint.CueTime),zt.CueTracks=[];Pn.moreData()&&Pn.consumeTag(se.Segment.Cues.CuePoint.CueTrackPositions,!0);){var yr=Pn.getMatroskaCodedNum(),ar=Pn.getPos();if((qt={}).Track=Pn.parseTag(se.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),qt.Track===0)throw new Error("Cue track cannot be 0");qt.ClusterPosition=Pn.parseTag(se.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),zt.CueTracks.push(qt),Pn.setPos(ar+yr)}if(zt.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");In.push(zt)}if(In.length===0)throw new Error("mandatory cuepoint not found");return In}(At)).length;St<gt;St+=1)mn=new yl.Z,Jt=St<un.length-1?un[St+1].CueTime-un[St].CueTime:_n-un[St].CueTime,mn.duration=Jt,mn.startTime=un[St].CueTime,mn.timescale=1e3,Rt=un[St].CueTracks[0].ClusterPosition+Ot,It=St<un.length-1?un[St+1].CueTracks[0].ClusterPosition+Ot-1:Kt-1,mn.mediaRange=Rt+"-"+It,Cn.push(mn);return ie.debug("Parsed cues: "+Cn.length+" cues."),Cn}(Mt,Ne,Pe,Ve),Le(Fe)},error:function(){ie.error("Download Error: Cues "+et.url),Le(null)}}),ie.debug("Perform cues load: "+et.url+" bytes="+et.range.start+"-"+et.range.end)}else Le(null)})(st,Me,vt,function(tt){ot({segments:tt,representation:We,error:tt?void 0:new p.Z(je.SEGMENT_BASE_LOADER_ERROR_CODE,je.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){ot({representation:We,error:new p.Z(je.SEGMENT_BASE_LOADER_ERROR_CODE,je.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){Oe&&(Oe.abort(),Oe=null)}},se={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},ae}Md.__dashjs_factory_name="WebmSegmentBaseLoader";const El=g.Z.getSingletonFactory(Md);function of(ae){ae=ae||{};var ie,se,Re,Ae=this.context,ve=ae.eventBus,ye=ae.events,Oe=ae.dashMetrics,je=ae.mediaPlayerModel,He=ae.errHandler,Be=ae.baseURLController,De=ae.debug,We=ae.boxParser,qe=ae.requestModifier,vt=ae.errors;function ot(ct){return(ct?ct.split("/")[1]:"").toLowerCase()==="webm"}return ie={initialize:function(){se.initialize(),Re.initialize()},getSegmentBaseInitSegment:function(ct){return ot(ct.representation.mimeType)?Re.loadInitialization(ct.representation,ct.mediaType):se.loadInitialization(ct.representation,ct.mediaType)},getSegmentList:function(ct){return ot(ct.mimeType)?Re.loadSegments(ct.representation,ct.mediaType,ct.representation?ct.representation.indexRange:null):se.loadSegments(ct.representation,ct.mediaType,ct.representation?ct.representation.indexRange:null)},reset:function(){se.reset(),Re.reset()}},se=ec(Ae).getInstance(),Re=El(Ae).getInstance(),se.setConfig({baseURLController:Be,dashMetrics:Oe,mediaPlayerModel:je,errHandler:He,eventBus:ve,events:ye,errors:vt,debug:De,boxParser:We,requestModifier:qe}),Re.setConfig({baseURLController:Be,dashMetrics:Oe,mediaPlayerModel:je,errHandler:He,eventBus:ve,events:ye,errors:vt,debug:De,requestModifier:qe}),ie}of.__dashjs_factory_name="SegmentBaseController";const Jp=g.Z.getSingletonFactory(of),bl=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},tc=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},sf=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},Fd=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null},uf=function(){function ae(se){var Re=this;(function(Ae,ve){if(!(Ae instanceof ve))throw new TypeError("Cannot call a class as a function")})(this,ae),this.valid=se[0]=="/",this.path=se.split("/").filter(function(Ae){return Ae.length!==0}).map(function(Ae){var ve={name:Ae},ye=Ae.indexOf("[");if(ye!=-1){ve.name=Ae.substring(0,ye);var Oe=Ae.substring(ye+1,Ae.length-1);Re.valid=Re.valid&&Oe.indexOf("[")==-1;var je=Oe.indexOf("=");je!=-1?(ve.attribute={name:Oe.substring(1,je),value:Oe.substring(je+1)},["'",'"'].indexOf(ve.attribute.value[0])!=-1&&(ve.attribute.value=ve.attribute.value.substring(1,ve.attribute.value.length-1))):ve.position=parseInt(Oe,10)-1}return ve})}var ie;return(ie=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function(se,Re){for(var Ae=null,ve=se,ye=1,Oe="MPD";ye<this.path.length&&ve!==null;){Ae=ve;var je=this.path[ye];if(Oe=je.name,ye!==this.path.length-1||!Oe.startsWith("@")){var He=Ae[Oe+"_asArray"]||[];He.length===0&&Ae[Oe]&&He.push(Ae[Oe]),je.position?ve=He[je.position]||null:je.attribute?function(){var Be=je.attribute;ve=He.filter(function(De){return De[Be.name]==Be.value})[0]||null}():ve=He[0]||null}ye++}return ve===null?null:Oe.startsWith("@")?{name:Oe.substring(1),leaf:ve,target:ve}:{name:Oe,leaf:ve,target:Re?Ae:ve}}}])&&function(se,Re){for(var Ae=0;Ae<Re.length;Ae++){var ve=Re[Ae];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(se,ve.key,ve)}}(ae.prototype,ie),ae}(),Ud=function(){function ae(se,Re,Ae){(function(ve,ye){if(!(ve instanceof ye))throw new TypeError("Cannot call a class as a function")})(this,ae),this.action=se,this.xpath=Re,this.value=Ae,this.position=null}var ie;return(ie=[{key:"getMpdTarget",value:function(se){var Re=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(se,Re)}}])&&function(se,Re){for(var Ae=0;Ae<Re.length;Ae++){var ve=Re[Ae];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(se,ve.key,ve)}}(ae.prototype,ie),ae}();function xu(){var ae,ie,se=this.context;return ae={getIsPatch:function(Re){return Re&&Re.hasOwnProperty(c.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(Re){return Re&&Re.hasOwnProperty(c.Z.PUBLISH_TIME)?new Date(Re[c.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(Re){return Re&&Re.hasOwnProperty(c.Z.ORIGINAL_PUBLISH_TIME)?new Date(Re[c.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(Re){return Re&&Re[c.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(Re){return Re?(Re.__children||[]).map(function(Ae){var ve=Object.keys(Ae)[0];if(ve!=="add"&&ve!=="remove"&&ve!=="replace")return ie.warn("Ignoring node of invalid action: ".concat(ve)),null;var ye=Ae[ve],Oe=ye.sel;if(ve==="add"&&ye.type){if(!ye.type.startsWith("@"))return ie.warn("Ignoring add action for prefixed namespace declaration: ".concat(ye.type,"=").concat(ye.__text)),null;Oe="".concat(Oe,"/").concat(ye.type)}var je=new uf(Oe);if(!je.isValid())return ie.warn("Ignoring action with invalid selector: ".concat(ve," - ").concat(Oe)),null;var He=null;je.findsAttribute()?He=ye.__text||"":ve!=="remove"&&(He=ye.__children.reduce(function(De,We){var qe=Object.keys(We)[0];return qe!=="#text"&&(De[qe]=De[qe]||[],De[qe].push(We[qe])),De},{}));var Be=new Ud(ve,je,He);return ve==="add"&&(Be.position=ye.pos),Be}).filter(function(Ae){return!!Ae}):[]}},ie=(0,d.Z)(se).getInstance().getLogger(ae),ae}xu.__dashjs_factory_name="PatchManifestModel";const Bd=g.Z.getSingletonFactory(xu);function lf(){var ae,ie,se,Re,Ae,ve,ye,Oe=this.context;function je(Ve,Fe,Pe){var Ne,lt=ie.getAdaptationsForType(Re[0].mpd.manifest,Ve,Fe);if(!lt||lt.length===0)return null;if(lt.length>1&&Pe){var $e=De(Pe,Fe);if(Ae[Pe.id]&&Ae[Pe.id][Fe]){for(var xe=0,et=lt.length;xe<et;xe++)if(He(Ae[Pe.id][Fe],$e[xe]))return lt[xe]}for(var Et=0,kt=lt.length;Et<kt;Et++)if(Ne=lt[Et],ie.getRolesForAdaptation(Ne).filter(function(Mt){return Mt.value===c.Z.MAIN})[0])return lt[Et]}return lt[0]}function He(Ve,Fe){if(!Ve||!Fe)return!1;var Pe=Ve.id===Fe.id,Ne=Ve.codec===Fe.codec,lt=Ve.viewpoint===Fe.viewpoint,$e=JSON.stringify(Ve.viewpointsWithSchemeIdUri)===JSON.stringify(Fe.viewpointsWithSchemeIdUri),xe=Ve.lang===Fe.lang,et=Ve.roles.toString()===Fe.roles.toString(),Et=JSON.stringify(Ve.rolesWithSchemeIdUri)===JSON.stringify(Fe.rolesWithSchemeIdUri),kt=Ve.accessibility.toString()===Fe.accessibility.toString(),Mt=JSON.stringify(Ve.accessibilitiesWithSchemeIdUri)===JSON.stringify(Fe.accessibilitiesWithSchemeIdUri),At=Ve.audioChannelConfiguration.toString()===Fe.audioChannelConfiguration.toString(),Ot=JSON.stringify(Ve.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(Fe.audioChannelConfigurationsWithSchemeIdUri);return Pe&&Ne&&lt&&$e&&xe&&et&&Et&&kt&&Mt&&At&&Ot}function Be(Ve,Fe,Pe,Ne,lt,$e){var xe,et,Et,kt,Mt,At,Ot=[];if(!Ne||Ne.length===0)return[];var Kt=ie.getAdaptationsForPeriod(Fe);for(kt=0,At=Ne.length;kt<At;kt++)if(xe=Ne[kt],et=Me(Kt[Et=ie.getIndexForAdaptation(xe,Ve,Pe.index)]),$e){var _n=et.accessibility.length;for(Mt=0;Mt<_n;Mt++)if(et){var Jt=et.accessibility[Mt];if(Jt.indexOf("cea-608:")===0){var un=Jt.substring(8).split(";");if(un[0].substring(0,2)==="CC")for(Mt=0;Mt<un.length;Mt++)et||(et=Me.call(this,Kt[Et])),st(et,un[Mt].substring(0,3),un[Mt].substring(4)),Ot.push(et),et=null;else for(Mt=0;Mt<un.length;Mt++)et||(et=Me.call(this,Kt[Et])),st(et,"CC"+(Mt+1),un[Mt]),Ot.push(et),et=null}else Jt.indexOf("cea-608")===0&&(st(et,ve.CC1,"eng"),Ot.push(et),et=null)}}else lt===ve.IMAGE?(et.type=ve.IMAGE,Ot.push(et),et=null):et&&Ot.push(et);return Ot}function De(Ve,Fe,Pe){var Ne=Re,lt=Pe,$e=[];if(lt)ft(),Ne=We(lt);else{if(!(Re.length>0))return $e;lt=Re[0].mpd.manifest}var xe=mt(Ve,Ne),et=ie.getAdaptationsForType(lt,Ve?Ve.index:null,Fe);return $e=Be(lt,xe,Ve,et,Fe),Fe===ve.TEXT&&(et=ie.getAdaptationsForType(lt,Ve?Ve.index:null,ve.VIDEO),$e=$e.concat(Be(lt,xe,Ve,et,Fe,!0))),$e}function We(Ve){var Fe=qe(Ve);return ie.getRegularPeriods(Fe)}function qe(Ve){var Fe=ot(Ve);return ie.getMpd(Fe)}function vt(){Re=[],Ae={}}function ot(Ve){return Ve||(Re.length>0?Re[0].mpd.manifest:null)}function ct(Ve){try{var Fe=mt(Ve.streamInfo,Re),Pe=ie.getAdaptationsForPeriod(Fe);return Ve&&Ve.streamInfo&&Ve.streamInfo.id!==void 0&&Pe?Pe[Ve.index]:null}catch{return null}}function mt(Ve,Fe){for(var Pe=Fe.length,Ne=0;Ne<Pe;Ne++){var lt=Fe[Ne];if(Ve&&Ve.id===lt.id)return lt}return null}function Me(Ve){if(!Ve)return null;var Fe,Pe,Ne,lt,$e,xe=new tc,et=Ve.period.mpd.manifest.Period_asArray[Ve.period.index].AdaptationSet_asArray[Ve.index];if(xe.id=Ve.id,xe.index=Ve.index,xe.type=Ve.type,xe.streamInfo=tt(Ve.period),xe.representationCount=ie.getRepresentationCount(et),xe.labels=ie.getLabelsForAdaptation(et),xe.lang=ie.getLanguageForAdaptation(et),xe.segmentAlignment=ie.getSegmentAlignment(et),xe.subSegmentAlignment=ie.getSubSegmentAlignment(et),Fe=ie.getViewpointForAdaptation(et),xe.viewpoint=Fe.length?Fe[0].value:void 0,xe.viewpointsWithSchemeIdUri=Fe,$e=ie.getAccessibilityForAdaptation(et),xe.accessibility=$e.map(function(Ot){var Kt=Ot.value,_n=Kt;return Ot.schemeIdUri&&Ot.schemeIdUri.search("cea-608")>=0&&ye!==void 0&&(_n=Kt?"cea-608:"+Kt:"cea-608",xe.embeddedCaptions=!0),_n}),xe.accessibilitiesWithSchemeIdUri=$e,Pe=ie.getAudioChannelConfigurationForAdaptation(et),xe.audioChannelConfiguration=Pe.map(function(Ot){return Ot.value}),xe.audioChannelConfigurationsWithSchemeIdUri=Pe,xe.audioChannelConfiguration.length===0&&Array.isArray(et.Representation_asArray)&&et.Representation_asArray.length>0&&(Ne=ie.getAudioChannelConfigurationForRepresentation(et.Representation_asArray[0]),xe.audioChannelConfiguration=Ne.map(function(Ot){return Ot.value}),xe.audioChannelConfigurationsWithSchemeIdUri=Ne),lt=ie.getRolesForAdaptation(et),xe.roles=lt.map(function(Ot){return Ot.value}),xe.rolesWithSchemeIdUri=lt,xe.codec=ie.getCodec(et),xe.mimeType=ie.getMimeType(et),xe.contentProtection=ie.getContentProtectionData(et),xe.bitrateList=ie.getBitrateListForAdaptation(et),xe.selectionPriority=ie.getSelectionPriority(et),xe.contentProtection){var Et=xe.contentProtection.map(function(Ot){return ie.getKID(Ot)}).filter(function(Ot){return Ot!==null});if(Et.length){var kt=Et[0];xe.contentProtection.forEach(function(Ot){Ot.keyId=kt})}}if(xe.isText=ie.getIsText(et),xe.supplementalProperties=ie.getSupplementalPropertiesForAdaptation(et),(!xe.supplementalProperties||Object.keys(xe.supplementalProperties).length===0)&&Array.isArray(et.Representation_asArray)&&et.Representation_asArray.length>0){var Mt=et.Representation_asArray.map(function(Ot){return ie.getSupplementalPropertiesForRepresentation(Ot)});Mt.every(function(Ot){return JSON.stringify(Ot)===JSON.stringify(Mt[0])})&&(xe.supplementalProperties=Mt[0])}if(xe.supplementalPropertiesAsArray=ie.getSupplementalPropertiesAsArrayForAdaptation(et),(!xe.supplementalPropertiesAsArray||xe.supplementalPropertiesAsArray.length===0)&&Array.isArray(et.Representation_asArray)&&et.Representation_asArray.length>0){var At=et.Representation_asArray.map(function(Ot){return ie.getSupplementalPropertiesAsArrayForRepresentation(Ot)});At.every(function(Ot){return JSON.stringify(Ot)===JSON.stringify(At[0])})&&(xe.supplementalPropertiesAsArray=At[0])}return xe.isFragmented=ie.getIsFragmented(et),xe.isEmbedded=!1,xe}function st(Ve,Fe,Pe){Ve.id=Fe,Ve.index=100+parseInt(Fe.substring(2,3)),Ve.type=ve.TEXT,Ve.codec="cea-608-in-SEI",Ve.isEmbedded=!0,Ve.isFragmented=!1,Ve.lang=ps()(Pe),Ve.roles=["caption"],Ve.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function tt(Ve){var Fe,Pe,Ne=new sf;return Ne.id=Ve.id,Ne.index=Ve.index,Ne.start=Ve.start,Ne.duration=Ve.duration,Ne.manifestInfo=(Fe=Ve.mpd,(Pe=new Fd).dvrWindowSize=Fe.timeShiftBufferDepth,Pe.loadedTime=Fe.manifest.loadedTime,Pe.availableFrom=Fe.availabilityStartTime,Pe.minBufferTime=Fe.manifest.minBufferTime,Pe.maxFragmentDuration=Fe.maxSegmentDuration,Pe.duration=ie.getDuration(Fe.manifest),Pe.isDynamic=ie.getIsDynamic(Fe.manifest),Pe.serviceDescriptions=ie.getServiceDescriptions(Fe.manifest),Pe.protocol=Fe.manifest.protocol,Pe),Ne.isLast=Ve.mpd.manifest.Period_asArray.length===1||Math.abs(Ne.start+Ne.duration-Ne.manifestInfo.duration)<1,Ne}function ft(){if(!ve)throw new Error("setConfig function has to be called previously")}function he(Ve){return Re.length>0?Re[0].mpd.manifest.Period_asArray[Ve]:null}function Le(Ve,Fe,Pe){var Ne,lt,$e,xe,et;if(Ve){for(Ne=Ve.AdaptationSet_asArray,xe=0;xe<Ne.length;xe+=1)for($e=Ne[xe].Representation_asArray,et=0;et<$e.length;et+=1)if(Fe===(lt=$e[et]).id)return Pe?et:lt}return null}return ae={getBandwidthForRepresentation:function(Ve,Fe){var Pe;return(Pe=Le(he(Fe),Ve))?Pe.bandwidth:null},getIndexForRepresentation:function(Ve,Fe){return function(Pe,Ne){var lt=Le(Pe,Ne,!0);return lt!==null?lt:-1}(he(Fe),Ve)},getMaxIndexForBufferType:function(Ve,Fe){return function(Pe,Ne){var lt,$e,xe,et;if(!Pe||!Ne)return-1;for($e=Pe.AdaptationSet_asArray,et=0;et<$e.length;et+=1)if(xe=(lt=$e[et]).Representation_asArray,ie.getIsTypeOf(lt,Ne))return xe.length;return-1}(he(Fe),Ve)},convertRepresentationToRepresentationInfo:function(Ve){if(Ve){var Fe=new bl,Pe=Ve.adaptation.period.mpd.manifest.Period_asArray[Ve.adaptation.period.index].AdaptationSet_asArray[Ve.adaptation.index],Ne=ie.getRepresentationFor(Ve.index,Pe);return Fe.id=Ve.id,Fe.quality=Ve.index,Fe.bandwidth=ie.getBandwidth(Ne),Fe.fragmentDuration=Ve.segmentDuration||(Ve.segments&&Ve.segments.length>0?Ve.segments[0].duration:NaN),Fe.MSETimeOffset=Ve.MSETimeOffset,Fe.mediaInfo=Me(Ve.adaptation),Fe}return null},getStreamsInfo:function(Ve,Fe){var Pe=[],Ne=Re;if(Ve&&(ft(),Ne=We(Ve)),Ne.length>0){(!Fe||Fe>Ne.length)&&(Fe=Ne.length);for(var lt=0;lt<Fe;lt++)Pe.push(tt(Ne[lt]))}return Pe},getMediaInfoForType:function(Ve,Fe){if(Re.length===0||!Ve)return null;var Pe=mt(Ve,Re);if(!Pe)return null;var Ne=ie.getAdaptationsForPeriod(Pe),lt=je(Ve.index,Fe,Ve);return lt?Me(Ne[ie.getIndexForAdaptation(lt,Re[0].mpd.manifest,Ve.index)]):null},getAllMediaInfoForType:De,getAdaptationForType:je,getRealAdaptation:function(Ve,Fe){var Pe,Ne,lt=mt(Ve,Re);return Pe=Fe?Fe.id:null,Re.length>0&&lt&&(Ne=Pe?ie.getAdaptationForId(Pe,Re[0].mpd.manifest,lt.index):ie.getAdaptationForIndex(Fe?Fe.index:null,Re[0].mpd.manifest,lt.index)),Ne},getProducerReferenceTimes:function(Ve,Fe){var Pe,Ne,lt=mt(Ve,Re);return Pe=Fe?Fe.id:null,Re.length>0&&lt&&(Ne=Pe?ie.getAdaptationForId(Pe,Re[0].mpd.manifest,lt.index):ie.getAdaptationForIndex(Fe?Fe.index:null,Re[0].mpd.manifest,lt.index)),Ne?ie.getProducerReferenceTimesForAdaptation(Ne):[]},getRealPeriodByIndex:function(Ve){return ie.getRealPeriodForIndex(Ve,Re[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(Ve){try{return ie.getEssentialPropertiesForRepresentation(Ve)}catch{return[]}},getVoRepresentations:function(Ve){var Fe=ct(Ve);return ie.getRepresentationsForAdaptation(Fe)},getEventsFor:function(Ve,Fe,Pe){var Ne=[];if(Re.length>0){var lt=Re[0].mpd.manifest;if(Ve instanceof sf){var $e=mt(Ve,Re);Ne=ie.getEventsForPeriod($e)}else if(Ve instanceof tc){var xe=mt(Pe,Re);Ne=ie.getEventStreamForAdaptationSet(lt,ct(Ve),xe)}else if(Ve instanceof bl){var et=mt(Pe,Re);Ne=ie.getEventStreamForRepresentation(lt,Fe,et)}}return Ne},getEvent:function(Ve,Fe,Pe,Ne){try{if(!Ve||!Fe||isNaN(Pe)||!Ne)return null;var lt=Ve.scheme_id_uri,$e=Ve.value;if(!Fe[lt+"/"+$e])return null;var xe,et=new Ir,Et=Ve.timescale||1,kt=Ne.adaptation.period.start,Mt=Fe[lt+"/"+$e],At=isNaN(Ne.presentationTimeOffset)?isNaN(Mt.presentationTimeOffset)?0:Mt.presentationTimeOffset:Ne.presentationTimeOffset,Ot=Ve.presentation_time_delta/Et;xe=Ve.version===0?kt+Pe-At+Ot:kt-At+Ot;var Kt=Ve.event_duration/Et,_n=Ve.id,Jt=Ve.message_data;return et.eventStream=Mt,et.eventStream.value=$e,et.eventStream.timescale=Et,et.duration=Kt,et.id=_n,et.calculatedPresentationTime=xe,et.messageData=Jt,et.presentationTimeDelta=Ot,et}catch{return null}},getMpd:qe,setConfig:function(Ve){Ve&&(Ve.constants&&(ve=Ve.constants),Ve.cea608parser&&(ye=Ve.cea608parser),Ve.errHandler&&ie.setConfig({errHandler:Ve.errHandler}),Ve.BASE64&&ie.setConfig({BASE64:Ve.BASE64}))},updatePeriods:function(Ve){if(!Ve)return null;ft(),Re=We(Ve)},getIsTextTrack:function(Ve){return ie.getIsText(Ve)},getUTCTimingSources:function(){var Ve=ot();return ie.getUTCTimingSources(Ve)},getSuggestedPresentationDelay:function(){var Ve=Re.length>0?Re[0].mpd:null;return ie.getSuggestedPresentationDelay(Ve)},getAvailabilityStartTime:function(Ve){var Fe=qe(Ve);return ie.getAvailabilityStartTime(Fe)},getIsTypeOf:function(Ve,Fe){return ie.getIsTypeOf(Ve,Fe)},getIsDynamic:function(Ve){var Fe=ot(Ve);return ie.getIsDynamic(Fe)},getDuration:function(Ve){var Fe=ot(Ve);return ie.getDuration(Fe)},getRegularPeriods:We,getContentSteering:function(Ve){return ie.getContentSteering(Ve)},getLocation:function(Ve){return ie.getLocation(Ve)},getPatchLocation:function(Ve){var Fe=ie.getPatchLocation(Ve),Pe=ie.getPublishTime(Ve);return Fe&&Fe.length!==0&&Pe?Fe.filter(function(Ne){return isNaN(Ne.ttl)||Pe.getTime()+Ne.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(Ve){var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ie.getManifestUpdatePeriod(Ve,Fe)},getPublishTime:function(Ve){return ie.getPublishTime(Ve)},getIsDVB:function(Ve){return ie.hasProfile(Ve,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(Ve){return se.getIsPatch(Ve)},getBaseURLsFromElement:function(Ve){return ie.getBaseURLsFromElement(Ve)},getRepresentationSortFunction:function(){return ie.getRepresentationSortFunction()},getCodec:function(Ve,Fe,Pe){return ie.getCodec(Ve,Fe,Pe)},getPeriodById:function(Ve){if(!Ve||Re.length===0)return null;var Fe=Re.filter(function(Pe){return Pe.id===Ve});return Fe&&Fe.length>0?Fe[0]:null},setCurrentMediaInfo:function(Ve,Fe,Pe){Ae[Ve]=Ae[Ve]||{},Ae[Ve][Fe]=Ae[Ve][Fe]||{},Ae[Ve][Fe]=Pe},isPatchValid:function(Ve,Fe){var Pe=ie.getId(Ve),Ne=se.getMpdId(Fe),lt=ie.getPublishTime(Ve),$e=se.getPublishTime(Fe),xe=se.getOriginalPublishTime(Fe);return!!(Pe&&Ne&&Pe==Ne&&lt&&xe&&lt.getTime()==xe.getTime()&&$e&&lt.getTime()<$e.getTime())},applyPatchToManifest:function(Ve,Fe){se.getPatchOperations(Fe).forEach(function(Pe){var Ne=Pe.getMpdTarget(Ve);if(Ne!==null){var lt=Ne.name,$e=Ne.target,xe=Ne.leaf;if(Pe.xpath.findsAttribute())switch(Pe.action){case"add":case"replace":$e[lt]=Pe.value;break;case"remove":delete $e[lt]}else{var et=($e[lt+"_asArray"]||[]).indexOf(xe),Et=Pe.position==="prepend"||Pe.position==="before";if((Pe.action==="remove"||Pe.action==="replace")&&(delete $e[lt],et!=-1)){var kt=$e[lt+"_asArray"];kt.splice(et,1),kt.length>1?$e[lt]=kt:kt.length==1?$e[lt]=kt[0]:delete $e[lt+"_asArray"]}Pe.action!=="add"&&Pe.action!=="replace"||Object.keys(Pe.value).forEach(function(Mt){var At=Pe.value[Mt],Ot=$e[Mt+"_asArray"]||[];if(Ot.length===0&&$e[Mt]&&Ot.push($e[Mt]),Ot.length===0)Ot=At;else{var Kt=Ot.length;Kt=Mt==lt&&et!=-1?et+(Et?0:1)+(Pe.action=="replace"?-1:0):Et?0:Ot.length,Ot.splice.apply(Ot,[Kt,0].concat(At))}$e[Mt+"_asArray"]=Ot,$e[Mt]=Ot.length==1?Ot[0]:Ot})}}})},areMediaInfosEqual:He,reset:vt},ie=Zr(Oe).getInstance(),se=Bd(Oe).getInstance(),vt(),ae}lf.__dashjs_factory_name="DashAdapter";const jd=g.Z.getSingletonFactory(lf);var Gd=function(){function ae(){(function(se,Re){if(!(se instanceof Re))throw new TypeError("Cannot call a class as a function")})(this,ae)}var ie;return ie=[{key:"round10",value:function(se,Re){return function(Ae,ve,ye){return ye===void 0||+ye==0?Math[Ae](ve):(ye=+ye,(ve=+ve)===null||isNaN(ve)||typeof ye!="number"||ye%1!=0?NaN:(ve=ve.toString().split("e"),+((ve=(ve=Math[Ae](+(ve[0]+"e"+(ve[1]?+ve[1]-ye:-ye)))).toString().split("e"))[0]+"e"+(ve[1]?+ve[1]+ye:ye))))}("round",se,Re)}}],ie&&function(se,Re){for(var Ae=0;Ae<Re.length;Ae++){var ve=Re[Ae];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(se,ve.key,ve)}}(ae,ie),ae}();const cf=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Hd=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.t=null,this.mt=null,this.to=null,this.lto=null},Vd=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.t=null,this.level=null},nc=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.target=null,this.state=h.Z.BUFFER_EMPTY},Zd=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.time=null,this.range=null,this.manifestInfo=null},rc=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.time=null,this.droppedFrames=null};function ic(ae,ie){if(!(ae instanceof ie))throw new TypeError("Cannot call a class as a function")}var eg=function ae(){ic(this,ae),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},tg=function ae(){ic(this,ae),this.id=null,this.index=null,this.start=null,this.duration=null},ng=function ae(){ic(this,ae),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null};const rg=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},ac=function ae(){(function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")})(this,ae),this.loadingRequests=[],this.executedRequests=[]};function Tl(ae){var ie,se,Re=(ae=ae||{}).settings,Ae=this.context,ve=(0,y.Z)(Ae).getInstance();function ye(){ve.trigger(i.Z.METRICS_CHANGED)}function Oe(qe){ve.trigger(i.Z.METRIC_CHANGED,{mediaType:qe}),ye()}function je(qe,vt,ot){ve.trigger(i.Z.METRIC_UPDATED,{mediaType:qe,metric:vt,value:ot}),Oe(qe)}function He(qe,vt,ot){ve.trigger(i.Z.METRIC_ADDED,{mediaType:qe,metric:vt,value:ot}),Oe(qe)}function Be(qe,vt){var ot=null;return qe&&(se.hasOwnProperty(qe)?ot=se[qe]:vt||(ot=new cf,se[qe]=ot)),ot}function De(qe,vt,ot){var ct=Be(qe);ct!==null&&(ct[vt].push(ot),ct[vt].length>Re.get().streaming.metrics.maxListDepth&&ct[vt].shift())}function We(qe,vt,ot){De(qe,vt,ot),He(qe,vt,ot)}return ie={clearCurrentMetricsForType:function(qe){delete se[qe],Oe(qe)},clearAllCurrentMetrics:function(){se={},ye()},getMetricsFor:Be,addHttpRequest:function qe(vt,ot,ct,mt,Me,st,tt,ft,he,Le,Ve,Fe,Pe,Ne,lt,$e,xe){var et=new ee.w;st&&st!==mt&&(qe(vt,null,ct,mt,Me,null,null,ft,he,null,null,null,Pe,null,null,$e,xe),et.actualurl=st),et.tcpid=ot,et.type=ct,et.url=mt,et.range=ft,et.trequest=he,et.tresponse=Le,et.responsecode=Fe,et.cmsd=xe,et._tfinish=Ve,et._stream=vt,et._mediaduration=Pe,et._quality=Me,et._responseHeaders=Ne,et._serviceLocation=tt,et._fileLoaderType=$e,lt?lt.forEach(function(Et){(function(kt,Mt,At,Ot){var Kt=new ee.O;Kt.s=Mt,Kt.d=At,Kt.b=Ot,kt.trace.push(Kt),kt.interval||(kt.interval=0),kt.interval+=At})(et,Et.s,Et.d,Et.b)}):(delete et.interval,delete et.trace),We(vt,h.Z.HTTP_REQUEST,et)},addRepresentationSwitch:function(qe,vt,ot,ct,mt){var Me=new Hd;Me.t=vt,Me.mt=ot,Me.to=ct,mt?Me.lto=mt:delete Me.lto,We(qe,h.Z.TRACK_SWITCH,Me)},addBufferLevel:function(qe,vt,ot){var ct=new Vd;ct.t=vt,ct.level=ot,We(qe,h.Z.BUFFER_LEVEL,ct)},addBufferState:function(qe,vt,ot){var ct=new nc;ct.target=ot,ct.state=vt,We(qe,h.Z.BUFFER_STATE,ct)},addDVRInfo:function(qe,vt,ot,ct){var mt=new Zd;mt.time=vt,mt.range=ct,mt.manifestInfo=ot,We(qe,h.Z.DVR_INFO,mt)},addDroppedFrames:function(qe,vt){var ot=new rc,ct=Be(qe).DroppedFrames;vt&&(ot.time=vt.creationTime,ot.droppedFrames=vt.droppedVideoFrames,ct.length>0&&ct[ct.length-1]==ot||We(qe,h.Z.DROPPED_FRAMES,ot))},addSchedulingInfo:function(qe,vt,ot,ct,mt,Me,st,tt,ft){var he=new rg;he.mediaType=qe,he.t=vt,he.type=ot,he.startTime=ct,he.availabilityStartTime=mt,he.duration=Me,he.quality=st,he.range=tt,he.state=ft,We(qe,h.Z.SCHEDULING_INFO,he)},addRequestsQueue:function(qe,vt,ot){var ct=new ac;ct.loadingRequests=vt,ct.executedRequests=ot,Be(qe).RequestsQueue=ct,He(qe,h.Z.REQUESTS_QUEUE,ct)},addManifestUpdate:function(qe,vt,ot,ct,mt,Me,st,tt,ft,he){var Le=new eg;Le.mediaType=qe,Le.type=vt,Le.requestTime=ot,Le.fetchTime=ct,Le.availabilityStartTime=mt,Le.presentationStartTime=Me,Le.clientTimeOffset=st,Le.currentTime=tt,Le.buffered=ft,Le.latency=he,De(l.Z.STREAM,h.Z.MANIFEST_UPDATE,Le),He(qe,h.Z.MANIFEST_UPDATE,Le)},updateManifestUpdateInfo:function(qe,vt){if(qe){for(var ot in vt)qe[ot]=vt[ot];je(qe.mediaType,h.Z.MANIFEST_UPDATE,qe)}},addManifestUpdateStreamInfo:function(qe,vt,ot,ct,mt){if(qe){var Me=new tg;Me.id=vt,Me.index=ot,Me.start=ct,Me.duration=mt,qe.streamInfo.push(Me),je(qe.mediaType,h.Z.MANIFEST_UPDATE_STREAM_INFO,qe)}},addManifestUpdateRepresentationInfo:function(qe,vt,ot,ct,mt,Me,st,tt){if(qe&&qe.representationInfo){var ft=new ng;ft.id=vt,ft.index=ot,ft.streamIndex=ct,ft.mediaType=mt,ft.startNumber=st,ft.fragmentInfoType=tt,ft.presentationTimeOffset=Me,qe.representationInfo.push(ft),je(qe.mediaType,h.Z.MANIFEST_UPDATE_TRACK_INFO,qe)}},addPlayList:function(qe){qe.trace&&Array.isArray(qe.trace)?qe.trace.forEach(function(vt){vt.hasOwnProperty("subreplevel")&&!vt.subreplevel&&delete vt.subreplevel}):delete qe.trace,We(l.Z.STREAM,h.Z.PLAY_LIST,qe)},addDVBErrors:function(qe){We(l.Z.STREAM,h.Z.DVB_ERRORS,qe)}},se={},ie}Tl.__dashjs_factory_name="MetricsModel";const Kd=g.Z.getSingletonFactory(Tl);function ff(ae){ae=ae||{};var ie,se,Re,Ae,ve=this.context,ye=ae.metricsModel;function Oe(Be){var De=ye.getMetricsFor(Be,!0);if(!De)return null;var We,qe=De.HttpList,vt=null;if(!qe||qe.length<=0)return null;for(We=qe.length-1;We>=0;){if(qe[We].responsecode){vt=qe[We];break}We--}return vt}function je(Be){var De=ye.getMetricsFor(Be,!0);return De&&De.HttpList?De.HttpList:[]}function He(Be,De){if(!Be)return null;var We=Be[De];return We&&We.length!==0?We[We.length-1]:null}return ie={getCurrentRepresentationSwitch:function(Be){return He(ye.getMetricsFor(Be,!0),h.Z.TRACK_SWITCH)},getCurrentBufferState:function(Be){return He(ye.getMetricsFor(Be,!0),h.Z.BUFFER_STATE)},getCurrentBufferLevel:function(Be){var De=He(ye.getMetricsFor(Be,!0),h.Z.BUFFER_LEVEL);return De?Gd.round10(De.level/1e3,-3):0},getCurrentHttpRequest:Oe,getHttpRequests:je,getCurrentDroppedFrames:function(){return He(ye.getMetricsFor(l.Z.VIDEO,!0),h.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(Be){return He(ye.getMetricsFor(Be,!0),h.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(Be){return He(Be?ye.getMetricsFor(Be,!0):ye.getMetricsFor(l.Z.VIDEO,!0)||ye.getMetricsFor(l.Z.AUDIO,!0),h.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return He(ye.getMetricsFor(l.Z.STREAM),h.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(Be,De){if(!De)return null;var We={},qe=Oe(Be);qe&&(We=zn.Z.parseHttpHeaders(qe._responseHeaders));var vt=We[De.toLowerCase()];return vt===void 0?null:vt},getLatestMPDRequestHeaderValueByID:function(Be){if(!Be)return null;var De,We,qe,vt={};for(qe=(De=je(l.Z.STREAM)).length-1;qe>=0;qe--)if((We=De[qe]).type===ee.w.MPD_TYPE){vt=zn.Z.parseHttpHeaders(We._responseHeaders);break}var ot=vt[Be.toLowerCase()];return ot===void 0?null:ot},addRepresentationSwitch:function(Be,De,We,qe,vt){ye.addRepresentationSwitch(Be,De,We,qe,vt)},addDVRInfo:function(Be,De,We,qe){ye.addDVRInfo(Be,De,We,qe)},updateManifestUpdateInfo:function(Be){var De=this.getCurrentManifestUpdate();ye.updateManifestUpdateInfo(De,Be)},addManifestUpdateStreamInfo:function(Be){if(Be){var De=this.getCurrentManifestUpdate();ye.addManifestUpdateStreamInfo(De,Be.id,Be.index,Be.start,Be.duration)}},addManifestUpdateRepresentationInfo:function(Be,De){if(Be){var We=this.getCurrentManifestUpdate();ye.addManifestUpdateRepresentationInfo(We,Be.id,Be.index,Be.streamIndex,De,Be.presentationTimeOffset,Be.startNumber,Be.fragmentInfoType)}},addManifestUpdate:function(Be){ye.addManifestUpdate(l.Z.STREAM,Be.type,Be.requestStartDate,Be.requestEndDate)},addHttpRequest:function(Be,De,We,qe,vt,ot){ye.addHttpRequest(Be.mediaType,null,Be.type,Be.url,Be.quality,De,Be.serviceLocation||null,Be.range||null,Be.requestStartDate,Be.firstByteDate,Be.requestEndDate,We,Be.duration,qe,vt,Be.fileLoaderType,ot)},addSchedulingInfo:function(Be,De){ye.addSchedulingInfo(Be.mediaType,new Date,Be.type,Be.startTime,Be.availabilityStartTime,Be.duration,Be.quality,Be.range,De)},addRequestsQueue:function(Be,De,We){ye.addRequestsQueue(Be,De,We)},addBufferLevel:function(Be,De,We){ye.addBufferLevel(Be,De,We)},addBufferState:function(Be,De,We){ye.addBufferState(Be,De,We)},addDroppedFrames:function(Be){ye.addDroppedFrames(l.Z.VIDEO,Be)},addPlayList:function(){Ae&&(ye.addPlayList(Ae),Ae=null)},addDVBErrors:function(Be){ye.addDVBErrors(Be)},createPlaylistMetrics:function(Be,De){(Ae=new Ye).start=new Date,Ae.mstart=Be,Ae.starttype=De},createPlaylistTraceMetrics:function(Be,De,We){se===!0&&(se=!1,(Re=new Ke).representationid=Be,Re.start=new Date,Re.mstart=De,Re.playbackspeed=We!==null?We.toString():null)},updatePlayListTraceMetrics:function(Be){if(Re)for(var De in Re)Re[De]=Be[De]},pushPlayListTraceMetrics:function(Be,De){if(se===!1&&Ae&&Re&&Re.start){var We=Re.start,qe=Be.getTime()-We.getTime();Re.duration=qe,Re.stopreason=De,Ae.trace.push(Re),se=!0}},clearAllCurrentMetrics:function(){ye.clearAllCurrentMetrics()}},ye=ye||Kd(ve).getInstance({settings:ae.settings}),se=!0,Re=null,Ae=null,ie}ff.__dashjs_factory_name="DashMetrics";const Lu=g.Z.getSingletonFactory(ff);function Lo(){var ae,ie,se,Re,Ae=this.context,ve=(0,y.Z)(Ae).getInstance(),ye=(0,G.Z)(Ae).getInstance();function Oe(mt){Re=mt}function je(mt,Me,st,tt){var ft,he=Me.adaptation.period.mpd,Le=he.availabilityStartTime;if(tt)ft=st&&he.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(Le.getTime()+1e3*(mt+he.timeShiftBufferDepth)):he.availabilityEndTime;else if(st){var Ve=Me.availabilityTimeOffset;ft=new Date(Le.getTime()+1e3*(mt-Ve))}else ft=Le;return ft}function He(mt,Me){return(mt.getTime()-Me.mpd.availabilityStartTime.getTime()+1e3*Re)/1e3}function Be(mt,Me){return mt+(Me.adaptation.period.start-Me.presentationTimeOffset)}function De(mt){var Me={start:NaN,end:NaN},st=mt[0].getAdapter().getRegularPeriods()[0],tt=He(new Date,st);if(!mt||mt.length===0)return{range:Me,now:tt};mt.forEach(function(he){var Le=he.getAdapter(),Ve=Le.getMediaInfoForType(he.getStreamInfo(),l.Z.VIDEO)||Le.getMediaInfoForType(he.getStreamInfo(),l.Z.AUDIO),Fe=Le.getVoRepresentations(Ve)[0],Pe={start:NaN,end:NaN};if(Fe)if(Fe.segmentInfoType===c.Z.SEGMENT_TIMELINE)Pe=function(lt){var $e,xe,et,Et,kt=lt.adaptation.period.mpd.manifest.Period_asArray[lt.adaptation.period.index].AdaptationSet_asArray[lt.adaptation.index],Mt=ie.getRepresentationFor(lt.index,kt),At=Mt.SegmentTemplate.SegmentTimeline,Ot=Mt.SegmentTemplate.timescale,Kt=At.S_asArray,_n={start:0,end:0},Jt=Kt[0].t,un=!isNaN(Jt),Cn=un?Jt:0,mn=0;for(un&&(_n.start=Be(Cn/Ot,lt)),et=0,Et=Kt.length;et<Et;et++)xe=0,($e=Kt[et]).hasOwnProperty("r")&&(xe=$e.r),mn+=$e.d*(1+xe);return _n.end=Be((Cn+mn)/Ot,lt),_n}(Fe);else{var Ne=Fe.adaptation.period;Pe.start=Ne.start,Pe.end=Math.max(tt,Ne.start+Ne.duration)}!isNaN(Pe.start)&&(isNaN(Me.start)||Me.start>Pe.start)&&(Me.start=Pe.start),!isNaN(Pe.end)&&(isNaN(Me.end)||Me.end<Pe.end)&&(Me.end=Pe.end)}),Me.end=Math.min(tt,Me.end);var ft=qe(mt,Me.end,!0);return Me.end=isNaN(ft)?Me.end:ft,Me.start=st&&st.mpd&&st.mpd.timeShiftBufferDepth&&!isNaN(st.mpd.timeShiftBufferDepth)&&!isNaN(Me.end)?Math.max(Me.end-st.mpd.timeShiftBufferDepth,Me.start):Me.start,Me.start=qe(mt,Me.start),{range:Me,now:tt}}function We(mt,Me){se=mt-Me.end}function qe(mt,Me){var st=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var tt=0,ft=!1,he=NaN;!ft&&tt<mt.length;){var Le=mt[tt].getStreamInfo();Le.start<=Me&&(!isFinite(Le.duration)||Le.start+Le.duration>=Me)?(he=Me,ft=!0):!st&&Le.start>Me&&(isNaN(he)||Le.start<he)?he=Le.start:st&&Le.start+Le.duration<Me&&(isNaN(he)||Le.start+Le.duration>he)&&(he=Le.start+Le.duration),tt+=1}return he}catch{return Me}}function vt(mt){mt.offset===void 0||isNaN(mt.offset)||Oe(mt.offset/1e3)}function ot(){Re=0,se=0}function ct(){ve.off(i.Z.UPDATE_TIME_SYNC_OFFSET,vt,this),ot()}return ae={initialize:function(){ot(),ve.on(i.Z.UPDATE_TIME_SYNC_OFFSET,vt,this)},getClientTimeOffset:function(){return Re},setClientTimeOffset:Oe,getClientReferenceTime:function(){return Date.now()-1e3*se+1e3*Re},calcAvailabilityStartTimeFromPresentationTime:function(mt,Me,st){return je(mt,Me,st)},calcAvailabilityEndTimeFromPresentationTime:function(mt,Me,st){return je(mt,Me,st,!0)},calcPresentationTimeFromWallTime:He,calcPresentationTimeFromMediaTime:Be,calcPeriodRelativeTimeFromMpdRelativeTime:function(mt,Me){return Me-mt.adaptation.period.start},calcMediaTimeFromPresentationTime:function(mt,Me){return mt-Me.adaptation.period.start+Me.presentationTimeOffset},calcWallTimeForSegment:function(mt,Me){var st,tt,ft;return Me&&(st=mt.representation.adaptation.period.mpd.suggestedPresentationDelay,tt=mt.presentationStartTime+st,ft=new Date(mt.availabilityStartTime.getTime()+1e3*tt)),ft},calcTimeShiftBufferWindow:function(mt,Me){if(!Me)return function(tt){var ft={start:NaN,end:NaN},he=0,Le=NaN;return tt.forEach(function(Ve){var Fe=Ve.getStreamInfo();he+=Fe.duration,(isNaN(Le)||Fe.start<Le)&&(Le=Fe.start)}),ft.start=Le,ft.end=Le+he,ft}(mt);if(ye.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var st=De(mt);return We(st.now,st.range),st.range}return function(tt){var ft={start:NaN,end:NaN};if(!tt||tt.length===0)return ft;var he=tt[0].getAdapter().getRegularPeriods()[0],Le=He(new Date,he),Ve=he.mpd.timeShiftBufferDepth,Fe=isNaN(Ve)?0:Le-Ve;if(ft.start=qe(tt,Fe),ft.end=!isNaN(ft.start)&&Le<ft.start?Le:qe(tt,Le,!0),!isNaN(Ve)&&ft.end<Le-Ve&&(ft.end=NaN),ye.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var Pe=De(tt);if(Pe.range.end<ft.start)return ve.trigger(r.Z.CONFORMANCE_VIOLATION,{level:Ai.LEVELS.WARNING,event:Ai.EVENTS.INVALID_DVR_WINDOW}),We(Pe.now,Pe.range),Pe.range}return ft}(mt)},reset:ct},ie=Zr(Ae).getInstance(),ct(),ae}Lo.__dashjs_factory_name="TimelineConverter";const fu=g.Z.getSingletonFactory(Lo);var df=I(4593),_l=I(6934);function hf(ae){return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},hf(ae)}function oc(ae,ie){return oc=Object.setPrototypeOf||function(se,Re){return se.__proto__=Re,se},oc(ae,ie)}function Mu(ae){return Mu=Object.setPrototypeOf?Object.getPrototypeOf:function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},Mu(ae)}const qd=function(ae){(function(ve,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(ye&&ye.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),ye&&oc(ve,ye)})(Ae,ae);var ie,se,Re=(ie=Ae,se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ve,ye=Mu(ie);if(se){var Oe=Mu(this).constructor;ve=Reflect.construct(ye,arguments,Oe)}else ve=ye.apply(this,arguments);return function(je,He){return!He||hf(He)!=="object"&&typeof He!="function"?function(Be){if(Be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Be}(je):He}(this,ve)});function Ae(){var ve;return function(ye,Oe){if(!(ye instanceof Oe))throw new TypeError("Cannot call a class as a function")}(this,Ae),(ve=Re.call(this)).captionData=null,ve.label=null,ve.defaultTrack=!1,ve.kind=null,ve.isFragmented=!1,ve.isEmbedded=!1,ve.isTTML=null,ve}return Ae}(tc);var Yd=I(2295);function sc(){var ae=0;function ie(Oe){for(var je="",He=0;He<Oe.length;++He)je+=Oe[He].uchar;return je.length-je.replace(/^\s+/,"").length}function se(Oe){return"left: "+3.125*Oe.x+"%; top: "+6.66*Oe.y1+"%; width: "+(100-3.125*Oe.x)+"%; height: "+6.66*Math.max(Oe.y2-1-Oe.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function Re(Oe){return Oe==="red"?"rgb(255, 0, 0)":Oe==="green"?"rgb(0, 255, 0)":Oe==="blue"?"rgb(0, 0, 255)":Oe==="cyan"?"rgb(0, 255, 255)":Oe==="magenta"?"rgb(255, 0, 255)":Oe==="yellow"?"rgb(255, 255, 0)":Oe==="white"?"rgb(255, 255, 255)":Oe==="black"?"rgb(0, 0, 0)":Oe}function Ae(Oe,je){var He=Oe.videoHeight/15;return je?"font-size: "+He+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(je.foreground?Re(je.foreground):"rgb(255, 255, 255)")+"; font-style: "+(je.italics?"italic":"normal")+"; text-decoration: "+(je.underline?"underline":"none")+"; white-space: pre; background-color: "+(je.background?Re(je.background):"transparent")+";":"font-size: "+He+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function ve(Oe){return Oe.replace(/^\s+/g,"")}function ye(Oe){return Oe.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(Oe,je,He,Be){var De,We,qe=null,vt=!1,ot=-1,ct={start:je,end:He,spans:[]},mt="style_cea608_white_black",Me={},st={},tt=[];for(De=0;De<15;++De){var ft=Be.rows[De],he="",Le=null;if(ft.isEmpty()===!1){var Ve=ie(ft.chars);qe===null&&(qe={x:Ve,y1:De,y2:De+1,p:[]}),Ve!==ot&&vt&&(qe.p.push(ct),ct={start:je,end:He,spans:[]},qe.y2=De,qe.name="region_"+qe.x+"_"+qe.y1+"_"+qe.y2,Me.hasOwnProperty(qe.name)===!1?(tt.push(qe),Me[qe.name]=qe):Me[qe.name].p.contat(qe.p),qe={x:Ve,y1:De,y2:De+1,p:[]});for(var Fe=0;Fe<ft.chars.length;++Fe){var Pe=ft.chars[Fe],Ne=Pe.penState;if(Le===null||!Ne.equals(Le)){he.trim().length>0&&(ct.spans.push({name:mt,line:he,row:De}),he="");var lt="style_cea608_"+Ne.foreground+"_"+Ne.background;Ne.underline&&(lt+="_underline"),Ne.italics&&(lt+="_italics"),st.hasOwnProperty(lt)||(st[lt]=JSON.parse(JSON.stringify(Ne))),Le=Ne,mt=lt}he+=Pe.uchar}he.trim().length>0&&ct.spans.push({name:mt,line:he,row:De}),vt=!0,ot=Ve}else vt=!1,ot=-1,qe&&(qe.p.push(ct),ct={start:je,end:He,spans:[]},qe.y2=De,qe.name="region_"+qe.x+"_"+qe.y1+"_"+qe.y2,Me.hasOwnProperty(qe.name)===!1?(tt.push(qe),Me[qe.name]=qe):Me[qe.name].p.contat(qe.p),qe=null)}qe&&(qe.p.push(ct),qe.y2=De+1,qe.name="region_"+qe.x+"_"+qe.y1+"_"+qe.y2,Me.hasOwnProperty(qe.name)===!1?(tt.push(qe),Me[qe.name]=qe):Me[qe.name].p.contat(qe.p),qe=null);var $e=[];for(De=0;De<tt.length;++De){var xe=tt[De],et="sub_cea608_"+ae++,Et=document.createElement("div");Et.id=et;var kt=se(xe);Et.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+kt;var Mt=document.createElement("div");Mt.className="paragraph bodyStyle",Mt.style.cssText=Ae(Oe);var At=document.createElement("div");At.className="cueUniWrapper",At.style.cssText="unicode-bidi: normal; direction: ltr;";for(var Ot=0;Ot<xe.p.length;++Ot){var Kt=xe.p[Ot],_n=0;for(We=0;We<Kt.spans.length;++We){var Jt=Kt.spans[We];if(Jt.line.length>0){if(We!==0&&_n!=Jt.row){var un=document.createElement("br");un.className="lineBreak",At.appendChild(un)}var Cn=!1;_n===Jt.row&&(Cn=!0),_n=Jt.row;var mn=st[Jt.name],St=document.createElement("span");St.className="spanPadding "+Jt.name+" customSpanColor",St.style.cssText=Ae(Oe,mn),We!==0&&Cn?We===Kt.spans.length-1?St.textContent=ye(Jt.line):St.textContent=Jt.line:Kt.spans.length>1&&We<Kt.spans.length-1&&Jt.row===Kt.spans[We+1].row?St.textContent=ve(Jt.line):St.textContent=Jt.line.trim(),At.appendChild(St)}}}Mt.appendChild(At),Et.appendChild(Mt);var gt={bodyStyle:["%",90]};for(var Rt in st)st.hasOwnProperty(Rt)&&(gt[Rt]=["%",90]);$e.push({type:"html",start:je,end:He,cueHTMLElement:Et,cueID:et,cellResolution:[32,15],isFromCEA608:!0,fontSize:gt,lineHeight:{},linePadding:{}})}return $e}}}sc.__dashjs_factory_name="EmbeddedTextHtmlRender";const uc=g.Z.getSingletonFactory(sc);function Fu(ae){var ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We,qe,vt,ot,ct,mt=ae.errHandler,Me=ae.manifestModel,st=ae.mediaController,tt=ae.videoModel,ft=ae.textTracks,he=ae.vttParser,Le=ae.vttCustomRenderingParser,Ve=ae.ttmlParser,Fe=ae.streamInfo,Pe=ae.settings,Ne=this.context,lt=(0,y.Z)(Ne).getInstance(),$e=!1;function xe(){ye=null,je=NaN,He=[],Be=null,Oe=!1,ve=[],Ae=null}function et(Jt){var un=new qd;for(var Cn in Jt)un[Cn]=Jt[Cn];un.labels=Jt.labels,un.defaultTrack=function(mn){var St=!1;return We.length>1&&mn.isEmbedded?St=mn.id&&mn.id===l.Z.CC1:We.length===1?mn.id&&typeof mn.id=="string"&&mn.id.substring(0,2)==="CC"&&(St=!0):We.length===0&&(St=mn.index===ve[0].index),St}(Jt),un.isFragmented=Jt.isFragmented,un.isEmbedded=!!Jt.isEmbedded,un.isTTML=function(mn){return mn.codec&&mn.codec.search(l.Z.STPP)>=0||mn.mimeType&&mn.mimeType.search(l.Z.TTML)>=0}(Jt),un.kind=function(mn,St){var gt=mn.roles&&mn.roles.length>0?St[mn.roles[0]]:St.caption;return gt===St.caption||gt===St.subtitle?gt:St.caption}(Jt,{subtitle:"subtitles",caption:"captions"}),ft.addTextTrack(un)}function Et(Jt){var un=Jt.chunk;un.mediaInfo.embeddedCaptions&&Mt(un.bytes,un)}function kt(Jt){De=Jt}function Mt(Jt,un){var Cn=un.mediaInfo,mn=Cn.type,St=Cn.mimeType,gt=Cn.codec||St;gt?Cn.codec.indexOf("application/mp4")!==-1?function(Rt,It,xt){var zt;if(It.segmentType==="InitializationSegment")Oe=!0,je=Re.getMediaTimescaleFromMoov(Rt);else{if(!Oe)return;(zt=Re.getSamplesInfo(Rt).sampleList).length>0&&(Be=zt[0].cts-It.start*je),xt.search(l.Z.STPP)>=0?function(qt,In,Pn){var yr,ar;for(Ae=Ae!==null?Ae:Kt(Pn),yr=0;yr<In.length;yr++){var lr=In[yr],ur=lr.cts,wr=Ot(),Jr=wr+ur/je,Xr=Jr+lr.duration/je;ie.buffered.add(Jr,Xr);var ri=new DataView(qt,lr.offset,lr.subSizes[0]),hi=_l.Utils.dataViewToString(ri,l.Z.UTF8),Ei=[],ui=lr.offset+lr.subSizes[0];for(ar=1;ar<lr.subSizes.length;ar++){var Sn=new Uint8Array(qt,ui,lr.subSizes[ar]),sr=String.fromCharCode.apply(null,Sn);Ei.push(sr),ui+=lr.subSizes[ar]}try{var $n=Me.getValue().ttmlTimeIsRelative?ur/je:0,Yt=Ae.parse(hi,$n,ur/je,(ur+lr.duration)/je,Ei);ft.addCaptions(De,wr,Yt)}catch(yn){ye.removeExecutedRequestsBeforeTime(),this.remove(),se.error("TTML parser error: "+yn.message)}}}(Rt,zt,xt):function(qt,In){var Pn,yr,ar,lr=[];for(Pn=0;Pn<In.length;Pn++){var ur=In[Pn];ur.cts-=Be;var wr=Ot()+ur.cts/je,Jr=wr+ur.duration/je;ie.buffered.add(wr,Jr);var Xr=qt.slice(ur.offset,ur.offset+ur.size),ri=_l.parseBuffer(Xr);for(yr=0;yr<ri.boxes.length;yr++){var hi=ri.boxes[yr];if(se.debug("VTT box1: "+hi.type),hi.type!=="vtte"&&hi.type==="vttc"){se.debug("VTT vttc boxes.length = "+hi.boxes.length);var Ei={styles:{}};for(ar=0;ar<hi.boxes.length;ar++){var ui=hi.boxes[ar];if(se.debug("VTT box2: "+ui.type),ui.type==="payl")Ei.start=ur.cts/je,Ei.end=(ur.cts+ur.duration)/je,Ei.data=ui.cue_text;else if(ui.type==="sttg"&&ui.settings&&ui.settings!=="")try{var Sn=ui.settings.split(" ");Ei.styles=he.getCaptionStyles(Sn)}catch{}}Ei&&Ei.data&&(lr.push(Ei),se.debug("VTT  ".concat(Ei.start," - ").concat(Ei.end," :  ").concat(Ei.data)))}}}lr.length>0&&ft.addCaptions(De,0,lr)}(Rt,zt)}}(Jt,un,gt):mn===l.Z.VIDEO?function(Rt,It){var xt,zt;if(It.segmentType===ee.w.INIT_SEGMENT_TYPE)qe===0&&(qe=Re.getMediaTimescaleFromMoov(Rt));else if(It.segmentType===ee.w.MEDIA_SEGMENT_TYPE){if(qe===0)return void se.warn("CEA-608: No timescale for embeddedTextTrack yet");var qt=(zt=Re.getSamplesInfo(Rt)).lastSequenceNumber;if(ot[0]||ot[1]||function(){for(var lr,ur=0;ur<We.length;ur++){if((lr=ft.getTrackIdxForId(We[ur].id))===-1)return void se.warn("CEA-608: data before track is ready.");var wr=At(lr);ot[ur]=new(T()).Cea608Parser(ur+1,{newCue:wr},null)}}(),qe){if(vt!==null&&qt!==vt+zt.numSequences)for(xt=0;xt<ot.length;xt++)ot[xt]&&ot[xt].reset();for(var In=function(lr,ur){if(ur.length===0)return null;for(var wr={splits:[],fields:[[],[]]},Jr=new DataView(lr),Xr=0;Xr<ur.length;Xr++)for(var ri=ur[Xr],hi=T().findCea608Nalus(Jr,ri.offset,ri.size),Ei=null,ui=0,Sn=0;Sn<hi.length;Sn++)for(var sr=T().extractCea608DataFromRange(Jr,hi[Sn]),$n=0;$n<2;$n++)if(sr[$n].length>0){ri.cts!==Ei?ui=0:ui+=1;var Yt=Ot();wr.fields[$n].push([ri.cts+Yt*qe,sr[$n],ui]),Ei=ri.cts}return wr.fields.forEach(function(yn){yn.sort(function(Ht,tn){return Ht[0]===tn[0]?Ht[2]-tn[2]:Ht[0]-tn[0]})}),wr}(Rt,zt.sampleList),Pn=0;Pn<ot.length;Pn++){var yr=In.fields[Pn],ar=ot[Pn];if(ar)for(xt=0;xt<yr.length;xt++)ar.addData(yr[xt][0]/qe,yr[xt][1])}vt=qt}}}(Jt,un):function(Rt,It,xt){var zt,qt,In=new DataView(Rt,0,Rt.byteLength);qt=_l.Utils.dataViewToString(In,l.Z.UTF8);try{zt=Kt(xt).parse(qt,0),ft.addCaptions(ft.getCurrentTrackIdx(),0,zt),ie.buffered&&ie.buffered.add(It.start,It.end)}catch(Pn){mt.error(new p.Z(U.TIMED_TEXT_ERROR_ID_PARSE_CODE,U.TIMED_TEXT_ERROR_MESSAGE_PARSE+Pn.message,qt))}}(Jt,un,gt):se.error("No text type defined")}function At(Jt){return function(un,Cn,mn){var St;(St=tt.getTTMLRenderingDiv()?ct.createHTMLCaptionsFromScreen(tt.getElement(),un,Cn,mn):[{start:un,end:Cn,data:mn.getDisplayText(),styles:{}}])&&ft.addCaptions(Jt,0,St)}}function Ot(){return isNaN(ie.timestampOffset)?0:ie.timestampOffset}function Kt(Jt){var un;return Jt.search(l.Z.VTT)>=0?un=Pe.get().streaming.text.webvtt.customRenderingEnabled&&Le?Le:he:(Jt.search(l.Z.TTML)>=0||Jt.search(l.Z.STPP)>=0)&&(un=Ve),un}function _n(Jt){We.forEach(function(un){var Cn=ft.getTrackIdxForId(un.id);Cn>=0&&ft.deleteCuesFromTrackIdx(Cn,Jt.from,Jt.to)})}return ie={initialize:function(){$e||(We=[],De=null,qe=0,ot=[],vt=null,$e=!0,ct=uc(Ne).getInstance(),lt.on(i.Z.VIDEO_CHUNK_RECEIVED,Et,ie),lt.on(i.Z.BUFFER_CLEARED,_n,ie))},addMediaInfos:function(Jt,un,Cn){if(ve=ve.concat(un),Jt===l.Z.TEXT&&un[0].isFragmented&&!un[0].isEmbedded){ye=Cn,ie.buffered=(0,Yd.Z)(Ne).create(),He=st.getTracksFor(l.Z.TEXT,Fe.id).filter(function(Rt){return Rt.isFragmented});for(var mn=st.getCurrentTrackFor(l.Z.TEXT,Fe.id),St=0;St<He.length;St++)if(He[St]===mn){kt(St);break}}for(var gt=0;gt<un.length;gt++)et(un[gt])},resetMediaInfos:function(){ve=[]},getStreamId:function(){return Fe.id},append:Mt,abort:function(){},addEmbeddedTrack:function(Jt){if($e&&Jt)if(Jt.id===l.Z.CC1||Jt.id===l.Z.CC3){for(var un=0;un<We.length;un++)if(We[un].id===Jt.id)return;We.push(Jt)}else se.warn("Embedded track "+Jt.id+" not supported!")},resetEmbedded:function(){lt.off(i.Z.VIDEO_CHUNK_RECEIVED,Et,ie),lt.off(i.Z.BUFFER_CLEARED,_n,ie),ft&&ft.deleteAllTextTracks(),$e=!1,We=[],ot=[null,null],vt=null},getConfig:function(){return{fragmentModel:ye,fragmentedTracks:He,videoModel:tt}},setCurrentFragmentedTrackIdx:kt,remove:function(Jt,un){Jt===void 0&&Jt===un&&(Jt=ie.buffered.start(0),un=ie.buffered.end(ie.buffered.length-1)),ie.buffered.remove(Jt,un),ft.deleteCuesFromTrackIdx(De,Jt,un)},reset:function(){xe(),ve=[],Re=null}},se=(0,d.Z)(Ne).getInstance().getLogger(ie),Re=(0,Dr.Z)(Ne).getInstance(),xe(),ie}Fu.__dashjs_factory_name="TextSourceBuffer";const Uu=g.Z.getClassFactory(Fu);var lc=I(4403);function rs(ae,ie){(ie==null||ie>ae.length)&&(ie=ae.length);for(var se=0,Re=new Array(ie);se<ie;se++)Re[se]=ae[se];return Re}var Sl=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function pf(ae){var ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We,qe,vt,ot,ct,mt,Me,st=this.context,tt=(0,y.Z)(st).getInstance(),ft=ae.videoModel,he=ae.streamInfo,Le=ae.settings;function Ve(gt,Rt,It,xt,zt,qt){var In=0,Pn=0;gt/Rt>It/xt?In=(Pn=Rt)/xt*It:Pn=(In=gt)/It*xt;var yr,ar,lr=0,ur=0;return In/Pn>zt?(ur=Pn,lr=Pn*zt):(lr=In,ur=In/zt),yr=(gt-lr)/2,ar=(Rt-ur)/2,qt?{x:yr+.1*lr,y:ar+.1*ur,w:.8*lr,h:.8*ur}:{x:yr,y:ar,w:lr,h:ur}}function Fe(gt,Rt){var It=ft.getClientWidth(),xt=ft.getClientHeight(),zt=ft.getVideoWidth(),qt=ft.getVideoHeight(),In=ft.getVideoRelativeOffsetTop(),Pn=ft.getVideoRelativeOffsetLeft();if(zt!==0&&qt!==0){var yr=zt/qt,ar=!1;gt.isFromCEA608&&(yr=1.1666666666666667,ar=!0);var lr=Ve.call(this,It,xt,zt,qt,yr,ar),ur=lr.w,wr=lr.h,Jr=lr.x,Xr=lr.y;if(ur!=He||wr!=Be||Jr!=Oe||Xr!=je||Rt){if(Oe=Jr+Pn,je=Xr+In,He=ur,Be=wr,De){var ri=De.style;ri&&(ri.left=Oe+"px",ri.top=je+"px",ri.width=He+"px",ri.height=Be+"px",ri.zIndex=vt&&document[vt]||ot?mt:null,tt.trigger(r.Z.CAPTION_CONTAINER_RESIZE))}var hi=gt.activeCues;if(hi)for(var Ei=hi.length,ui=0;ui<Ei;++ui){var Sn=hi[ui];Sn.scaleCue(Sn)}}}}function Pe(gt){var Rt,It,xt,zt,qt,In=He,Pn=Be;if(gt.cellResolution){var yr=[In/gt.cellResolution[0],Pn/gt.cellResolution[1]];if(gt.linePadding){for(Rt in gt.linePadding)if(gt.linePadding.hasOwnProperty(Rt)){It=(gt.linePadding[Rt]*yr[0]).toString();for(var ar=document.getElementsByClassName("spanPadding"),lr=0;lr<ar.length;lr++)ar[lr].style.cssText=ar[lr].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+It),ar[lr].style.cssText=ar[lr].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+It)}}if(gt.fontSize){for(Rt in gt.fontSize)if(gt.fontSize.hasOwnProperty(Rt)){gt.fontSize[Rt][0]==="%"?xt=gt.fontSize[Rt][1]/100:gt.fontSize[Rt][0]==="c"&&(xt=gt.fontSize[Rt][1]),It=(xt*yr[1]).toString(),qt=Rt!=="defaultFontSize"?document.getElementsByClassName(Rt):document.getElementsByClassName("paragraph");for(var ur=0;ur<qt.length;ur++)qt[ur].style.cssText=qt[ur].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+It)}if(gt.lineHeight){for(Rt in gt.lineHeight)if(gt.lineHeight.hasOwnProperty(Rt)){gt.lineHeight[Rt][0]==="%"?zt=gt.lineHeight[Rt][1]/100:gt.fontSize[Rt][0]==="c"&&(zt=gt.lineHeight[Rt][1]),It=(zt*yr[1]).toString(),qt=document.getElementsByClassName(Rt);for(var wr=0;wr<qt.length;wr++)qt[wr].style.cssText=qt[wr].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+It)}}}}if(gt.isd){var Jr=document.getElementById(gt.cueID);Jr&&De.removeChild(Jr),lt(gt)}}function Ne(gt,Rt){var It=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,xt=/^#(.*)$/;if(It.test(Rt)){var zt=It.exec(Rt),qt=parseInt(zt[4],10)-1;return"data:image/png;base64,"+btoa(gt.images[qt])}if(xt.test(Rt)){var In=xt.exec(Rt)[1];return"data:image/png;base64,"+gt.embeddedImages[In]}return Rt}function lt(gt){if(De){var Rt=document.createElement("div");De.appendChild(Rt),ct=(0,lc.renderHTML)(gt.isd,Rt,function(It){return Ne(gt,It)},De.clientHeight,De.clientWidth,!1,function(It){se.info("renderCaption :",It)},ct,!0),Rt.id=gt.cueID,tt.trigger(r.Z.CAPTION_RENDERED,{captionDiv:Rt,currentTrackIdx:ye})}}function $e(gt,Rt){if(!Le.get().streaming.text.extendSegmentedCues||!Rt.cues||Rt.cues.length===0)return!1;var It=Rt.cues[Rt.cues.length-1];return!(It.endTime<gt.startTime||!function(xt,zt,qt){for(var In=0;In<qt.length;In++){var Pn=qt[In];if(JSON.stringify(xt[Pn])!==JSON.stringify(zt[Pn]))return!1}return!0}(It,gt,Sl)||(It.endTime=Math.max(It.endTime,gt.endTime),0))}function xe(gt,Rt){Rt&&Rt.forEach(function(It){It.kind&&It.kind==="image"&&(It.src=Ne(gt,It.src)),xe(gt,It.contents)})}function et(gt,Rt,It){var xt=At(gt);if(xt&&Array.isArray(It)&&It.length!==0)for(var zt=0;zt<It.length;zt++){var qt=void 0,In=It[zt];xt.cellResolution=In.cellResolution,xt.isFromCEA608=In.isFromCEA608,isNaN(In.start)||isNaN(In.end)||(qt=In.type==="html"&&De?Et(In,Rt,xt):In.data?kt(In,Rt,xt):null);try{qt?_n(xt,qt)||(Le.get().streaming.text.webvtt.customRenderingEnabled?(xt.manualCueList||(xt.manualCueList=[]),xt.manualCueList.push(qt)):$e(qt,xt)||xt.addCue(qt)):se.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Pn){throw un(xt),xt.addCue(qt),Pn}}}function Et(gt,Rt,It){var xt=this,zt=new Re(gt.start+Rt,gt.end+Rt,"");return zt.cueHTMLElement=gt.cueHTMLElement,zt.isd=gt.isd,zt.images=gt.images,zt.embeddedImages=gt.embeddedImages,zt.cueID=gt.cueID,zt.scaleCue=Pe.bind(xt),zt.cellResolution=gt.cellResolution,zt.lineHeight=gt.lineHeight,zt.linePadding=gt.linePadding,zt.fontSize=gt.fontSize,De.style.left=Oe+"px",De.style.top=je+"px",De.style.width=He+"px",De.style.height=Be+"px",zt.isd&&xe(zt,zt.isd.contents),zt.onenter=function(){It.mode===l.Z.TEXT_SHOWING&&(this.isd?(lt(this),se.debug("Cue enter id:"+this.cueID)):(De.appendChild(this.cueHTMLElement),Pe.call(xt,this),tt.trigger(r.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:ye})))},zt.onexit=function(){if(De)for(var qt=De.childNodes,In=0;In<qt.length;++In)qt[In].id===this.cueID&&(se.debug("Cue exit id:"+qt[In].id),De.removeChild(qt[In]),--In)},zt}function kt(gt,Rt,It){var xt=new Re(gt.start-Rt,gt.end-Rt,gt.data);if(xt.cueID="".concat(xt.startTime,"_").concat(xt.endTime),xt.isActive=!1,gt.styles)try{gt.styles.align!==void 0&&"align"in xt&&(xt.align=gt.styles.align),gt.styles.line!==void 0&&"line"in xt&&(xt.line=gt.styles.line),gt.styles.snapToLines!==void 0&&"snapToLines"in xt&&(xt.snapToLines=gt.styles.snapToLines),gt.styles.position!==void 0&&"position"in xt&&(xt.position=gt.styles.position),gt.styles.size!==void 0&&"size"in xt&&(xt.size=gt.styles.size)}catch(zt){se.error(zt)}return xt.onenter=function(){It.mode===l.Z.TEXT_SHOWING&&tt.trigger(r.Z.CAPTION_RENDERED,{currentTrackIdx:ye})},xt}function Mt(){var gt,Rt=[],It=function(zt,qt){var In;if(typeof Symbol>"u"||zt[Symbol.iterator]==null){if(Array.isArray(zt)||(In=function(wr,Jr){if(wr){if(typeof wr=="string")return rs(wr,Jr);var Xr=Object.prototype.toString.call(wr).slice(8,-1);return Xr==="Object"&&wr.constructor&&(Xr=wr.constructor.name),Xr==="Map"||Xr==="Set"?Array.from(wr):Xr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Xr)?rs(wr,Jr):void 0}}(zt))){In&&(zt=In);var Pn=0,yr=function(){};return{s:yr,n:function(){return Pn>=zt.length?{done:!0}:{done:!1,value:zt[Pn++]}},e:function(wr){throw wr},f:yr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ar,lr=!0,ur=!1;return{s:function(){In=zt[Symbol.iterator]()},n:function(){var wr=In.next();return lr=wr.done,wr},e:function(wr){ur=!0,ar=wr},f:function(){try{lr||In.return==null||In.return()}finally{if(ur)throw ar}}}}(ft.getTextTracks());try{for(It.s();!(gt=It.n()).done;){var xt=gt.value;xt.manualMode===l.Z.TEXT_SHOWING&&Rt.push(xt)}}catch(zt){It.e(zt)}finally{It.f()}return Rt}function At(gt){return gt>=0&&Ae[gt]?ft.getTextTrack(Ae[gt].kind,Ae[gt].id,Ae[gt].lang,Ae[gt].isTTML,Ae[gt].isEmbedded):null}function Ot(gt){var Rt=this;if(gt!==ye){var It=At(ye=gt);Kt.call(this,It),qe&&(clearInterval(qe),qe=null),It&&It.renderingType==="html"&&(Fe.call(this,It,!0),window.ResizeObserver?(Me=new window.ResizeObserver(function(){Fe.call(Rt,It,!0)})).observe(ft.getElement()):qe=setInterval(Fe.bind(this,It),500))}}function Kt(gt){St.call(this),gt&&gt.renderingType==="html"?Cn.call(this):mn.call(this)}function _n(gt,Rt){if(!gt.cues)return!1;for(var It=0;It<gt.cues.length;It++)if(gt.cues[It].startTime===Rt.startTime&&gt.cues[It].endTime===Rt.endTime)return!0;return!1}function Jt(gt,Rt,It){var xt=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return(isNaN(Rt)||(xt?gt.startTime:gt.endTime)>=Rt)&&(isNaN(It)||(xt?gt.endTime:gt.startTime)<=It)}function un(gt,Rt,It){var xt=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(gt.cues)for(var zt=gt.cues,qt=zt.length-1;qt>=0;qt--)Jt(zt[qt],Rt,It,xt)&&(zt[qt].onexit&&zt[qt].onexit(),gt.removeCue(zt[qt]))}function Cn(){var gt=document.getElementById("native-cue-style");if(!gt){(gt=document.createElement("style")).id="native-cue-style",document.head.appendChild(gt);var Rt=gt.sheet,It=ft.getElement();try{It&&(It.id?Rt.insertRule("#"+It.id+"::cue {background: transparent}",0):It.classList.length!==0?Rt.insertRule("."+It.className+"::cue {background: transparent}",0):Rt.insertRule("video::cue {background: transparent}",0))}catch(xt){se.info(""+xt.message)}}}function mn(){var gt=document.getElementById("native-cue-style");gt&&document.head.removeChild(gt)}function St(){if(De)for(;De.firstChild;)De.removeChild(De.firstChild)}return ie={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(Re=window.VTTCue||window.TextTrackCue,Ae=[],ve=[],ye=-1,Oe=0,je=0,He=0,Be=0,De=null,We=null,qe=null,ot=!1,mt=2147483647,ct=null,document.fullscreenElement!==void 0?vt="fullscreenElement":document.webkitIsFullScreen!==void 0?vt="webkitIsFullScreen":document.msFullscreenElement?vt="msFullscreenElement":document.mozFullScreen&&(vt="mozFullScreen"))},getStreamId:function(){return he.id},addTextTrack:function(gt){Ae.push(gt)},addCaptions:et,createTracks:function(){Ae.sort(function(wr,Jr){return wr.index-Jr.index}),De=ft.getTTMLRenderingDiv(),We=ft.getVttRenderingDiv();for(var gt,Rt,It,xt,zt,qt,In=-1,Pn=0;Pn<Ae.length;Pn++){var yr=(Rt=(gt=Ae[Pn]).kind,It=gt.id!==void 0?gt.id:gt.lang,xt=gt.lang,zt=gt.isTTML,qt=gt.isEmbedded,ft.addTextTrack(Rt,It,xt,zt,qt));ve.push(yr),Ae[Pn].defaultTrack&&(yr.default=!0,In=Pn);var ar=At(Pn);ar&&(ar.mode=l.Z.TEXT_SHOWING,De&&(Ae[Pn].isTTML||Ae[Pn].isEmbedded)?ar.renderingType="html":ar.renderingType="default"),et(Pn,0,Ae[Pn].captionData),tt.trigger(r.Z.TEXT_TRACK_ADDED)}if(Ot.call(this,In),In>=0){tt.on(r.Z.PLAYBACK_METADATA_LOADED,function wr(){var Jr=At(In);Jr&&Jr.renderingType==="html"&&Fe.call(this,Jr,!0),tt.off(r.Z.PLAYBACK_METADATA_LOADED,wr,this)},this);for(var lr=0;lr<Ae.length;lr++){var ur=At(lr);ur&&(ur.mode=lr===In?l.Z.TEXT_SHOWING:l.Z.TEXT_HIDDEN,ur.manualMode=lr===In?l.Z.TEXT_SHOWING:l.Z.TEXT_HIDDEN)}}tt.trigger(i.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:ye,tracks:Ae,streamId:he.id})},getCurrentTrackIdx:function(){return ye},setCurrentTrackIdx:Ot,getTrackIdxForId:function(gt){for(var Rt=-1,It=0;It<Ae.length;It++)if(Ae[It].id===gt){Rt=It;break}return Rt},getCurrentTrackInfo:function(){return Ae[ye]},setModeForTrackIdx:function(gt,Rt){var It=At(gt);It&&It.mode!==Rt&&(It.mode=Rt),It&&It.manualMode!==Rt&&(It.manualMode=Rt)},deleteCuesFromTrackIdx:function(gt,Rt,It){var xt=At(gt);xt&&un(xt,Rt,It)},deleteAllTextTracks:function(){for(var gt=ve?ve.length:0,Rt=0;Rt<gt;Rt++){var It=At(Rt);It&&un.call(this,It,he.start,he.start+he.duration,!1)}ve=[],Ae=[],qe&&(clearInterval(qe),qe=null),Me&&ft&&(Me.unobserve(ft.getElement()),Me=null),ye=-1,St.call(this)},deleteTextTrack:function(gt){ft.removeChild(ve[gt]),ve.splice(gt,1)},manualCueProcessing:function(gt){var Rt=Mt();if(Rt&&Rt.length>0){var It=Rt[0].manualCueList;It&&It.length>0&&It.forEach(function(xt){if(xt.startTime<=gt&&xt.endTime>=gt&&!xt.isActive)xt.isActive=!0,WebVTT.processCues(window,[xt],We,xt.cueID);else if(xt.isActive&&(xt.startTime>gt||xt.endTime<gt)&&(xt.isActive=!1,We))for(var zt=We.childNodes,qt=0;qt<zt.length;++qt)zt[qt].id===xt.cueID&&(We.removeChild(zt[qt]),--qt)})}},disableManualTracks:function(){var gt=Mt();if(gt&&gt.length>0){var Rt=gt[0].manualCueList;Rt&&Rt.length>0&&Rt.forEach(function(It){if(It.isActive&&(It.isActive=!1,We))for(var xt=We.childNodes,zt=0;zt<xt.length;++zt)xt[zt].id===It.cueID&&(We.removeChild(xt[zt]),--zt)})}}},se=(0,d.Z)(st).getInstance().getLogger(ie),ie}pf.__dashjs_factory_name="TextTracks";const zd=g.Z.getClassFactory(pf);function gf(){var ae,ie,se,Re,Ae,ve,ye=this.context;function Oe(De){var We=De.split(":"),qe=We.length-1;return De=60*parseInt(We[qe-1],10)+parseFloat(We[qe]),qe===2&&(De+=3600*parseInt(We[0],10)),De}function je(De){var We=De.split(Re),qe=We[1].split(ve);return qe.shift(),We[1]=qe[0],qe.shift(),{cuePoints:We,styles:He(qe)}}function He(De){var We={};return De.forEach(function(qe){if(qe.split(/:/).length>1){var vt=qe.split(/:/)[1],ot=!1;vt&&vt.search(/%/)!=-1&&(ot=!0,vt=parseInt(vt.replace(/%/,""),10)),(qe.match(/align/)||qe.match(/A/))&&(We.align=vt),(qe.match(/line/)||qe.match(/L/))&&(We.line=vt==="auto"?vt:parseInt(vt,10),ot&&(We.snapToLines=!1)),(qe.match(/position/)||qe.match(/P/))&&(We.position=vt),(qe.match(/size/)||qe.match(/S/))&&(We.size=vt)}}),We}function Be(De,We){for(var qe,vt=We,ot="",ct="";De[vt]!==""&&vt<De.length;)vt++;if((qe=vt-We)>1)for(var mt=0;mt<qe;mt++){if((ct=De[We+mt]).match(Re)){ot="";break}ot+=ct,mt!==qe-1&&(ot+=`
`)}else(ct=De[We]).match(Re)||(ot=ct);return ot}return ae={parse:function(De){var We,qe,vt=[];if(!De)return vt;We=(De=De.split(se)).length,qe=-1;for(var ot=0;ot<We;ot++){var ct=De[ot];if(ct.length>0&&ct!=="WEBVTT"&&ct.match(Re)){var mt=je(ct),Me=mt.cuePoints,st=mt.styles,tt=Be(De,ot+1),ft=Oe(Me[0].replace(Ae,"")),he=Oe(Me[1].replace(Ae,""));!isNaN(ft)&&!isNaN(he)&&ft>=qe&&he>ft?tt!==""?(qe=ft,vt.push({start:ft,end:he,data:tt,styles:st})):ie.error("Skipping cue due to empty/malformed cue text"):ie.error("Skipping cue due to incorrect cue timing")}}return vt},getCaptionStyles:He},ie=(0,d.Z)(ye).getInstance().getLogger(ae),se=/(?:\r\n|\r|\n)/gm,Re=/-->/,Ae=/(^[\s]+|[\s]+$)/g,ve=/\s\b/g,ae}gf.__dashjs_factory_name="VTTParser";const Wd=g.Z.getSingletonFactory(gf);function Xd(){var ae,ie;return ae={parse:function(se){var Re=[];return ie.oncue=function(Ae){Ae.start=Ae.startTime,Ae.end=Ae.endTime,Ae.data=Ae.text,Ae.styles={align:Ae.align,line:Ae.line,position:Ae.position,size:Ae.size},Re.push(Ae)},ie.parse(se),Re}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(ie=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}}(),ae}Xd.__dashjs_factory_name="VttCustomRenderingParser";const ig=g.Z.getSingletonFactory(Xd);function Qd(){var ae,ie,se=this.context,Re=(0,y.Z)(se).getInstance(),Ae=0;return ae={parse:function(ve,ye,Oe,je,He){var Be,De,We,qe="",vt=[],ot={},ct={},mt="",Me="",st={onOpenTag:function(Ve,Fe,Pe){if(Pe[" imagetype"]&&!Pe[" imageType"]&&(Re.trigger(r.Z.CONFORMANCE_VIOLATION,{level:Ai.LEVELS.ERROR,event:Ai.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),Pe[" imageType"]=Pe[" imagetype"]),Fe==="image"&&(Ve==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||Ve==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!Pe[" imageType"]||Pe[" imageType"].value!=="PNG")return void ie.warn("smpte-tt imageType != PNG. Discarded");mt=Pe["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){mt&&(ct[mt]=Me.trim()),Me="",mt=""},onText:function(Ve){mt&&(Me+=Ve)}};if(!ve)throw qe="no ttml data to parse",new Error(qe);ot.data=ve,Re.trigger(i.Z.TTML_TO_PARSE,ot);var tt=(0,lc.fromXML)(ot.data,function(Ve){qe=Ve},st);Re.trigger(i.Z.TTML_PARSED,{ttmlString:ot.data,ttmlDoc:tt});var ft,he=tt.getMediaTimeEvents();for(We=0;We<he.length;We++){var Le=(0,lc.generateISD)(tt,he[We],function(Ve){qe=Ve});Le.contents.some(function(Ve){return Ve.contents.length})&&(Be=he[We]+ye)<(De=he[We+1]+ye)&&vt.push({start:Be,end:De,type:"html",cueID:(ft="cue_TTML_"+Ae,Ae++,ft),isd:Le,images:He,embeddedImages:ct})}if(qe!=="")throw ie.error(qe),new Error(qe);return vt}},ie=(0,d.Z)(se).getInstance().getLogger(ae),ae}Qd.__dashjs_factory_name="TTMLParser";const cc=g.Z.getSingletonFactory(Qd);function fc(ae){var ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We,qe=this.context,vt=ae.adapter,ot=ae.errHandler,ct=ae.manifestModel,mt=ae.mediaController,Me=ae.videoModel,st=ae.settings;function tt(Ne){var lt=Ne.tracks,$e=Ne.index,xe=Ne.streamId;if(st.get().streaming.text.defaultEnabled===!1&&!Le()||We)Ve(xe,-1);else{var et=mt.getCurrentTrackFor(l.Z.TEXT,xe);if(et){var Et={lang:et.lang,role:et.roles[0],index:et.index,codec:et.codec,accessibility:et.accessibility[0]};lt.some(function(kt,Mt){if(mt.matchSettings(Et,kt))return Ve(xe,Mt),$e=Mt,!0})}He=!1}se[xe].lastEnabledIndex=$e,je.trigger(r.Z.TEXT_TRACKS_ADDED,{enabled:Le(),index:$e,tracks:lt,streamId:xe}),De=!0}function ft(Ne){try{var lt=Ne.streamId;if(!Ae[lt]||isNaN(Ne.time))return;Ae[lt].manualCueProcessing(Ne.time)}catch{}}function he(Ne){try{var lt=Ne.streamId;if(!Ae[lt])return;Ae[lt].disableManualTracks()}catch{}}function Le(){var Ne=!0;return He&&!Be&&(Ne=!1),Ne}function Ve(Ne,lt){(He=lt===-1)&&mt&&mt.saveTextSettingsDisabled();var $e=Fe(Ne);if($e!==lt&&Ae[Ne]){Ae[Ne].disableManualTracks(),Ae[Ne].setModeForTrackIdx($e,l.Z.TEXT_HIDDEN),Ae[Ne].setCurrentTrackIdx(lt),Ae[Ne].setModeForTrackIdx(lt,l.Z.TEXT_SHOWING);var xe=Ae[Ne].getCurrentTrackInfo();xe&&xe.isFragmented&&!xe.isEmbedded?function(et,Et,kt){if(Re[et])for(var Mt=Re[et].getConfig().fragmentedTracks,At=0;At<Mt.length;At++){var Ot=Mt[At];if(Et.lang===Ot.lang&&(Ot.id?Et.id===Ot.id:Et.index===Ot.index)){var Kt=mt.getCurrentTrackFor(l.Z.TEXT,et);(Ot.id?Kt.id!==Ot.id:Kt.index!==Ot.index)?(Ae[et].deleteCuesFromTrackIdx(kt),Re[et].setCurrentFragmentedTrackIdx(At)):kt===-1&&je.trigger(i.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:et,mediaType:l.Z.TEXT})}}}(Ne,xe,$e):xe&&!xe.isFragmented&&function(et,Et){je.trigger(i.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Et},{streamId:et,mediaType:l.Z.TEXT})}(Ne,xe),mt.setTrack(xe)}}function Fe(Ne){return Ae[Ne].getCurrentTrackIdx()}function Pe(){Re={},Ae={},se={},He=!0,De=!1,We=!1}return ie={deactivateStream:function(Ne){if(Ne){var lt=Ne.id;Re[lt]&&Re[lt].resetMediaInfos(),Ae[lt]&&Ae[lt].deleteAllTextTracks()}},initialize:function(){je.on(i.Z.TEXT_TRACKS_QUEUE_INITIALIZED,tt,ie),st.get().streaming.text.webvtt.customRenderingEnabled&&(je.on(i.Z.PLAYBACK_TIME_UPDATED,ft,ie),je.on(i.Z.PLAYBACK_SEEKING,he,ie))},initializeForStream:function(Ne){var lt=Ne.id,$e=zd(qe).create({videoModel:Me,settings:st,streamInfo:Ne});$e.initialize(),Ae[lt]=$e;var xe=Uu(qe).create({errHandler:ot,adapter:vt,manifestModel:ct,mediaController:mt,videoModel:Me,textTracks:$e,vttParser:ve,vttCustomRenderingParser:ye,ttmlParser:Oe,streamInfo:Ne,settings:st});xe.initialize(),Re[lt]=xe,se[lt]={},se[lt].lastEnabledIndex=-1},createTracks:function(Ne){var lt=Ne.id;Ae[lt]&&Ae[lt].createTracks()},getTextSourceBuffer:function(Ne){var lt=Ne.id;if(Re&&Re[lt])return Re[lt]},getAllTracksAreDisabled:function(){return He},addEmbeddedTrack:function(Ne,lt){var $e=Ne.id;Re[$e]&&Re[$e].addEmbeddedTrack(lt)},enableText:function(Ne,lt){return(0,X.PS)(lt,"boolean"),Le()!==lt&&(lt&&Ve(Ne,se[Ne].lastEnabledIndex),lt||(se[Ne].lastEnabledIndex=Fe(Ne),De?Ve(Ne,-1):We=!0)),!0},isTextEnabled:Le,setTextTrack:Ve,getCurrentTrackIdx:Fe,enableForcedTextStreaming:function(Ne){return(0,X.PS)(Ne,"boolean"),Be=Ne,!0},addMediaInfosToBuffer:function(Ne,lt,$e){var xe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,et=Ne.id;Re[et]&&Re[et].addMediaInfos(lt,$e,xe)},reset:function(){Pe(),je.off(i.Z.TEXT_TRACKS_QUEUE_INITIALIZED,tt,ie),st.get().streaming.text.webvtt.customRenderingEnabled&&(je.off(i.Z.PLAYBACK_TIME_UPDATED,ft,ie),je.off(i.Z.PLAYBACK_SEEKING,he,ie)),Object.keys(Re).forEach(function(Ne){Re[Ne].resetEmbedded(),Re[Ne].reset()})}},Be=!1,De=!1,We=!1,ve=Wd(qe).getInstance(),ye=ig(qe).getInstance(),Oe=cc(qe).getInstance(),je=(0,y.Z)(qe).getInstance(),Pe(),ie}fc.__dashjs_factory_name="TextController";const $d=g.Z.getClassFactory(fc);function dc(){var ae,ie,se,Re,Ae,ve,ye,Oe,je,He,Be,De,We,qe,vt,ot,ct,mt,Me,st,tt,ft,he,Le,Ve,Fe,Pe,Ne,lt,$e,xe,et,Et,kt,Mt,At,Ot,Kt,_n,Jt="You must first call initialize() and set a source before calling this method",un="You must first call initialize() and set a valid source and view before calling this method",Cn="You must first call attachView() to set the video element before calling this method",mn="You must first call attachSource() with a valid source before calling this method",St="MediaPlayer not initialized!",gt=this.context,Rt=(0,y.Z)(gt).getInstance(),It=(0,G.Z)(gt).getInstance(),xt=(0,d.Z)(gt).getInstance({settings:It});function zt(){ui(null),hi(null),Re=null,qe&&(qe.reset(),qe=null),vt&&(vt.reset(),vt=null),st&&st.reset(),It.reset(),ct&&(ct.reset(),ct=null)}function qt(){return!!se&&!!At.getElement()}function In(){return(0,_s.e)()}function Pn(){if(!ye)throw un;return Ne.isPaused()}function yr(){if(!ye)throw un;return Ne.getIsDynamic()}function ar(rt){var Pt=Ve&&Ve.hasVideoTrack()?l.Z.VIDEO:l.Z.AUDIO,an=et.getCurrentDVRInfo(Pt);if(!an)return 0;var On=Ne.getOriginalLiveDelay(),Wn=an.range.start+rt;return Wn>an.range.end-On&&(Wn=an.range.end-On),Wn}function lr(rt){if(!ye)throw un;var Pt=ri().currentTime;if(rt!==void 0)Pt=Ve.getTimeRelativeToStreamId(Pt,rt);else if(Ne.getIsDynamic()){var an=Ve&&Ve.hasVideoTrack()?l.Z.VIDEO:l.Z.AUDIO,On=et.getCurrentDVRInfo(an);Pt=On===null||Pt===0?0:Math.max(0,Pt-On.range.start)}return Pt}function ur(){if(!ye)throw un;var rt=ri().duration;if(Ne.getIsDynamic()){var Pt=Ve&&Ve.hasVideoTrack()?l.Z.VIDEO:l.Z.AUDIO,an=et.getCurrentDVRInfo(Pt);rt=an?an.range.end-an.range.start:0}return rt}function wr(rt){(0,X.PS)(rt,"boolean"),Oe=rt}function Jr(){st.restoreDefaultUTCTimingSources()}function Xr(){return et}function ri(){if(!At.getElement())throw Cn;return At.getElement()}function hi(rt){if(!Ae)throw St;At.setElement(rt),rt&&(Yt(),function(){if(!vt){var Pt=dashjs.MetricsReporting;if(typeof Pt=="function"){var an=Pt(gt).create();vt=an.createMetricsReporting({debug:xt,eventBus:Rt,mediaElement:ri(),adapter:mt,dashMetrics:et,mediaPlayerModel:Me,events:i.Z,constants:l.Z,metricsConstants:h.Z})}}}(),function(){if(!ot){var Pt=dashjs.MssHandler;typeof Pt=="function"&&(U.extend(Pt.errors),ot=Pt(gt).create({eventBus:Rt,mediaPlayerModel:Me,dashMetrics:et,manifestModel:Et,playbackController:Ne,streamController:Ve,protectionController:qe,baseURLController:ft,errHandler:tt,events:i.Z,constants:l.Z,debug:xt,initSegmentType:ee.w.INIT_SEGMENT_TYPE,BASE64:df,ISOBoxer:_l,settings:It}))}}(),Ve&&Ve.switchToVideoElement(je)),ye&&sr(),tn(je)}function Ei(rt){if(!ve)throw Jt;var Pt=Ve.getActiveStreamInfo();return Pt?We.getTracksFor(rt,Pt.id):[]}function ui(rt){var Pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!Ae)throw St;typeof rt=="string"&&Ot.initialize(rt),Pt==null&&(Pt=NaN),isNaN(Pt)||(Pt=Math.max(0,Pt)),je=Pt,se=rt,(ve||ye)&&sr(),qt()&&tn(je)}function Sn(){if(!ve)throw Jt;var rt=Ve.getActiveStreamInfo();return rt?Ve.getStreamById(rt.id):null}function sr(){ye=!1,ve=!1,mt.reset(),Ve.reset(),Pe.reset(),xe.reset(),Ne.reset(),lt.reset(),$e.reset(),He.reset(),We.reset(),_n.reset(),qe&&(It.get().streaming.protection.keepProtectionMediaKeys?qe.stop():(qe.reset(),qe=null,Yt())),Fe.reset(),kt.reset(),Mt.reset()}function $n(){return Ql(gt).create({debug:xt,errHandler:tt,dashMetrics:et,mediaPlayerModel:Me,requestModifier:(0,ge.Z)(gt).getInstance(),mssHandler:ot,settings:It})}function Yt(){if(qe)return qe;var rt=dashjs.Protection;if(typeof rt=="function"){var Pt=rt(gt).create();return i.Z.extend(rt.events),r.Z.extend(rt.events,{publicOnly:!0}),U.extend(rt.errors),he||(he=(0,fl.Z)(gt).getInstance()),qe=Pt.createProtectionSystem({debug:xt,errHandler:tt,videoModel:At,customParametersModel:st,capabilities:he,eventBus:Rt,events:i.Z,BASE64:df,constants:l.Z,cmcdModel:kt,settings:It})}return null}function yn(){if(!Ae)throw St;if(ct)return ct;var rt=dashjs.OfflineController;if(typeof rt=="function"){i.Z.extend(rt.events),r.Z.extend(rt.events,{publicOnly:!0}),U.extend(rt.errors);var Pt=$n(),an=ma(gt).create();return an.setConfig({manifestModel:Et,adapter:mt,manifestLoader:Pt,errHandler:tt,contentSteeringController:$e}),ct=rt(gt).create({debug:xt,manifestUpdater:an,baseURLController:ft,manifestLoader:Pt,manifestModel:Et,mediaPlayerModel:Me,abrController:He,playbackController:Ne,adapter:mt,errHandler:tt,dashMetrics:et,timelineConverter:De,segmentBaseController:_n,schemeLoaderFactory:Be,eventBus:Rt,events:i.Z,errors:U,constants:l.Z,settings:It,dashConstants:c.Z,urlUtils:(0,Ge.Z)(gt).getInstance()})}return null}function Ht(rt){var Pt=Ve&&Ve.hasVideoTrack()?l.Z.VIDEO:l.Z.AUDIO,an=et.getCurrentDVRInfo(Pt);return an?rt+(an.manifestInfo.availableFrom.getTime()/1e3+an.range.start):0}function tn(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;ct&&ct.resetRecords(),!ve&&se&&(ve=!0,ie.info("Streaming Initialized"),function(){var Pt=$n();Ve||(Ve=wa(gt).getInstance()),Fe||(Fe=$d(gt).create({errHandler:tt,manifestModel:Et,adapter:mt,mediaController:We,videoModel:At,settings:It})),Le.setConfig({capabilities:he,customParametersModel:st,adapter:mt,settings:It,manifestModel:Et,errHandler:tt}),Ve.setConfig({capabilities:he,capabilitiesFilter:Le,manifestLoader:Pt,manifestModel:Et,mediaPlayerModel:Me,customParametersModel:st,protectionController:qe,textController:Fe,adapter:mt,dashMetrics:et,errHandler:tt,timelineConverter:De,videoModel:At,playbackController:Ne,serviceDescriptionController:lt,contentSteeringController:$e,abrController:He,mediaController:We,settings:It,baseURLController:ft,uriFragmentModel:Ot,segmentBaseController:_n}),Pe.setConfig({settings:It,playbackController:Ne,streamController:Ve,videoModel:At,timelineConverter:De,adapter:mt}),Ne.setConfig({streamController:Ve,serviceDescriptionController:lt,dashMetrics:et,adapter:mt,videoModel:At,timelineConverter:De,settings:It}),xe.setConfig({streamController:Ve,playbackController:Ne,mediaPlayerModel:Me,videoModel:At,settings:It}),He.setConfig({streamController:Ve,domStorage:Kt,mediaPlayerModel:Me,customParametersModel:st,cmsdModel:Mt,dashMetrics:et,adapter:mt,videoModel:At,settings:It}),kt.setConfig({abrController:He,dashMetrics:et,playbackController:Ne}),Mt.setConfig({}),He.initialize(),Ve.initialize(Oe,Re),Fe.initialize(),Pe.initialize(),xe.initialize(),kt.initialize(),Mt.initialize(),$e.initialize(),_n.initialize()}(),typeof se=="string"?Ve.load(se,rt):Ve.loadWithManifest(se,rt)),!ye&&qt()&&(ye=!0,ie.info("Playback Initialized"))}return ae={initialize:function(rt,Pt,an){var On=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;he||(he=(0,fl.Z)(gt).getInstance()).setConfig({settings:It}),tt||(tt=Cd(gt).getInstance()),he.supportsMediaSource()?(Ae||(Ae=!0,De=fu(gt).getInstance(),He||(He=Nd(gt).getInstance()).setConfig({settings:It}),Be||(Be=ta(gt).getInstance()),Ne||(Ne=u(gt).getInstance()),We||(We=tu(gt).getInstance()),Ve||(Ve=wa(gt).getInstance()),Pe||(Pe=pa(gt).getInstance()),xe||(xe=jr(gt).getInstance()),lt||(lt=_o(gt).getInstance()),$e||($e=na(gt).getInstance()),Le||(Le=aa(gt).getInstance()),mt=jd(gt).getInstance(),Et=dl(gt).getInstance(),kt=pr(gt).getInstance(),Mt=bo(gt).getInstance(),et=Lu(gt).getInstance({settings:It}),Kt=xd(gt).getInstance({settings:It}),mt.setConfig({constants:l.Z,cea608parser:T(),errHandler:tt,BASE64:df}),ft||(ft=md(gt).create()),ft.setConfig({adapter:mt,contentSteeringController:$e}),lt.setConfig({adapter:mt}),_n||(_n=Jp(gt).getInstance({dashMetrics:et,mediaPlayerModel:Me,errHandler:tt,baseURLController:ft,events:i.Z,eventBus:Rt,debug:xt,boxParser:(0,Dr.Z)(gt).getInstance(),requestModifier:(0,ge.Z)(gt).getInstance(),errors:U})),We.setConfig({domStorage:Kt,settings:It,customParametersModel:st}),Me.setConfig({playbackController:Ne,serviceDescriptionController:lt}),$e.setConfig({adapter:mt,errHandler:tt,dashMetrics:et,mediaPlayerModel:Me,manifestModel:Et,serviceDescriptionController:lt,eventBus:Rt,requestModifier:(0,ge.Z)(gt).getInstance()}),Jr(),wr(an===void 0||an),yn()),rt&&hi(rt),Pt&&ui(Pt,On),ie.info("[dash.js "+In()+"] MediaPlayer has been initialized")):tt.error(new p.Z(U.CAPABILITY_MEDIASOURCE_ERROR_CODE,U.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(rt){rt&&(rt.capabilities&&(he=rt.capabilities),rt.capabilitiesFilter&&(Le=rt.capabilitiesFilter),rt.streamController&&(Ve=rt.streamController),rt.textController&&(Fe=rt.textController),rt.gapController&&(Pe=rt.gapController),rt.playbackController&&(Ne=rt.playbackController),rt.serviceDescriptionController&&(lt=rt.serviceDescriptionController),rt.contentSteeringController&&($e=rt.contentSteeringController),rt.catchupController&&(xe=rt.catchupController),rt.mediaPlayerModel&&(Me=rt.mediaPlayerModel),rt.customParametersModel&&(st=rt.customParametersModel),rt.abrController&&(He=rt.abrController),rt.schemeLoaderFactory&&(Be=rt.schemeLoaderFactory),rt.mediaController&&(We=rt.mediaController),rt.settings&&(It=rt.settings))},on:function(rt,Pt,an,On){Rt.on(rt,Pt,an,On)},off:function(rt,Pt,an){Rt.off(rt,Pt,an)},extend:function(rt,Pt,an){g.Z.extend(rt,Pt,an,gt)},attachView:hi,attachSource:ui,isReady:qt,preload:function(){if(!At.getElement()&&!ve){if(!se)throw mn;tn(je)}},play:function(){if(!ye)throw un;(!Oe||Pn()&&ye)&&Ne.play(!0)},isPaused:Pn,pause:function(){if(!ye)throw un;Ne.pause()},isSeeking:function(){if(!ye)throw un;return Ne.isSeeking()},isDynamic:yr,getLowLatencyModeEnabled:function(){if(!ye)throw un;return Ne.getLowLatencyModeEnabled()},seek:function(rt){if(!ye)throw un;if((0,X.PS)(rt,"number"),isNaN(rt))throw l.Z.BAD_ARGUMENT_ERROR;rt<0&&(rt=0);var Pt=Ne.getIsDynamic()?ar(rt):rt,an=ri();!Ne.getIsDynamic()&&an.duration&&(Pt=Math.min(an.duration,Pt)),Ne.seek(Pt,!1,!1,!0)},seekToOriginalLive:function(){ye&&yr()&&Ne.seekToOriginalLive()},setPlaybackRate:function(rt){ri().playbackRate=rt},getPlaybackRate:function(){return ri().playbackRate},setMute:function(rt){(0,X.PS)(rt,"boolean"),ri().muted=rt},isMuted:function(){return ri().muted},setVolume:function(rt){if(typeof rt!="number"||isNaN(rt)||rt<0||rt>1)throw l.Z.BAD_ARGUMENT_ERROR;ri().volume=rt},getVolume:function(){return ri().volume},time:lr,duration:ur,timeAsUTC:function(){if(!ye)throw un;return lr()<0?NaN:Ht(lr())},durationAsUTC:function(){if(!ye)throw un;return Ht(ur())},getActiveStream:Sn,getDVRWindowSize:function(){var rt=Ve&&Ve.hasVideoTrack()?l.Z.VIDEO:l.Z.AUDIO,Pt=et.getCurrentDVRInfo(rt);return Pt?Pt.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:ar,getAvailableBaseUrls:function(){var rt=Et.getValue();return rt?ft.getBaseUrls(rt):[]},getAvailableLocations:function(){var rt=Et.getValue();if(!rt)return[];var Pt=mt.getLocation(rt),an=$e.getSynthesizedLocationElements(Pt);return Pt.concat(an)},getTargetLiveDelay:function(){if(!ye)throw un;return Ne.getOriginalLiveDelay()},convertToTimeCode:function(rt){rt=Math.max(rt,0);var Pt=Math.floor(rt/3600),an=Math.floor(rt%3600/60),On=Math.floor(rt%3600%60);return(Pt===0?"":Pt<10?"0"+Pt.toString()+":":Pt.toString()+":")+(an<10?"0"+an.toString():an.toString())+":"+(On<10?"0"+On.toString():On.toString())},formatUTC:function(rt,Pt,an){var On=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Wn=new Date(1e3*rt),mr=Wn.toLocaleDateString(Pt),Zi=Wn.toLocaleTimeString(Pt,{hour12:an});return On?Zi+" "+mr:Zi},getVersion:In,getDebug:function(){return xt},getBufferLength:function(rt){var Pt=[l.Z.VIDEO,l.Z.AUDIO,l.Z.TEXT];if(rt)return Pt.indexOf(rt)!==-1?Xr().getCurrentBufferLevel(rt)||NaN:(ie.warn("getBufferLength requested for invalid type"),NaN);var an=Pt.map(function(On){return Ei(On).length>0?Xr().getCurrentBufferLevel(On):Number.MAX_VALUE}).reduce(function(On,Wn){return Math.min(On,Wn)});return an===Number.MAX_VALUE?NaN:an},getTTMLRenderingDiv:function(){return At?At.getTTMLRenderingDiv():null},getVideoElement:ri,getSource:function(){if(!se)throw mn;return se},updateSource:function(rt){se=rt,Ve.load(se)},getCurrentLiveLatency:function(){if(!Ae)throw St;return ye?Ne.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(rt){if(!ve)throw Jt;return He.getTopBitrateInfoFor(rt)},setAutoPlay:wr,getAutoPlay:function(){return Oe},getDashMetrics:Xr,getQualityFor:function(rt){if(!ve)throw Jt;if(rt===l.Z.IMAGE){var Pt=Sn();if(!Pt)return-1;var an=Pt.getThumbnailController();return an?an.getCurrentTrackIndex():-1}return He.getQualityFor(rt)},setQualityFor:function(rt,Pt){var an=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!ve)throw Jt;if(rt===l.Z.IMAGE){var On=Sn();if(!On)return;var Wn=On.getThumbnailController();Wn&&Wn.setTrackByIndex(Pt)}He.setPlaybackQuality(rt,Ve.getActiveStreamInfo(),Pt,{forceReplace:an})},updatePortalSize:function(){He.setElementSize(),He.setWindowResizeEventCalled(!0)},enableText:function(rt){var Pt=Ve.getActiveStreamInfo();return!(!Pt||!Fe)&&Fe.enableText(Pt.id,rt)},enableForcedTextStreaming:function(rt){return!(!Ve.getActiveStreamInfo()||!Fe)&&Fe.enableForcedTextStreaming(rt)},isTextEnabled:function(){var rt=Ve.getActiveStreamInfo();return!(!rt||!Fe)&&Fe.isTextEnabled(rt)},setTextTrack:function(rt){if(!ye)throw un;var Pt=Ve.getActiveStreamInfo();Pt&&Fe&&Fe.setTextTrack(Pt.id,rt)},getBitrateInfoListFor:function(rt){if(!ve)throw Jt;var Pt=Sn();return Pt?Pt.getBitrateListFor(rt):[]},getStreamsFromManifest:function(rt){if(!ve)throw Jt;return mt.getStreamsInfo(rt)},getTracksFor:Ei,getTracksForTypeFromManifest:function(rt,Pt,an){if(!ve)throw Jt;return(an=an||mt.getStreamsInfo(Pt,1)[0])?mt.getAllMediaInfoForType(an,rt,Pt):[]},getCurrentTrackFor:function(rt){if(!ve)throw Jt;var Pt=Ve.getActiveStreamInfo();return We.getCurrentTrackFor(rt,Pt.id)},setInitialMediaSettingsFor:function(rt,Pt){if(!Ae)throw St;We.setInitialSettings(rt,Pt)},getInitialMediaSettingsFor:function(rt){if(!Ae)throw St;return We.getInitialSettings(rt)},setCurrentTrack:function(rt){if(!ve)throw Jt;We.setTrack(rt)},addABRCustomRule:function(rt,Pt,an){st.addAbrCustomRule(rt,Pt,an)},removeABRCustomRule:function(rt){st.removeAbrCustomRule(rt)},removeAllABRCustomRule:function(){st.removeAllAbrCustomRule()},getABRCustomRules:function(){return st.getAbrCustomRules()},getAverageThroughput:function(rt){var Pt=He.getThroughputHistory(),an=Ne.getIsDynamic();return Pt?Pt.getAverageThroughput(rt,an):0},retrieveManifest:function(rt,Pt){var an=$n(),On=this;Rt.on(i.Z.INTERNAL_MANIFEST_LOADED,function Wn(mr){mr.error?Pt(null,mr.error):Pt(mr.manifest),Rt.off(i.Z.INTERNAL_MANIFEST_LOADED,Wn,On),an.reset()},On),Ot.initialize(rt),an.load(rt)},addUTCTimingSource:function(rt,Pt){st.addUTCTimingSource(rt,Pt)},removeUTCTimingSource:function(rt,Pt){st.removeUTCTimingSource(rt,Pt)},clearDefaultUTCTimingSources:function(){st.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:Jr,setXHRWithCredentialsForType:function(rt,Pt){st.setXHRWithCredentialsForType(rt,Pt)},getXHRWithCredentialsForType:function(rt){return st.getXHRWithCredentialsForType(rt)},getProtectionController:function(){return Yt()},attachProtectionController:function(rt){qe=rt},setProtectionData:function(rt){Re=rt,Ve&&Ve.setProtectionData(Re)},registerLicenseRequestFilter:function(rt){st.registerLicenseRequestFilter(rt)},registerLicenseResponseFilter:function(rt){st.registerLicenseResponseFilter(rt)},unregisterLicenseRequestFilter:function(rt){st.unregisterLicenseRequestFilter(rt)},unregisterLicenseResponseFilter:function(rt){st.unregisterLicenseResponseFilter(rt)},registerCustomCapabilitiesFilter:function(rt){st.registerCustomCapabilitiesFilter(rt)},unregisterCustomCapabilitiesFilter:function(rt){st.unregisterCustomCapabilitiesFilter(rt)},setCustomInitialTrackSelectionFunction:function(rt){st.setCustomInitialTrackSelectionFunction(rt)},resetCustomInitialTrackSelectionFunction:function(){st.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(rt){if(!At.getElement())throw Cn;At.setTTMLRenderingDiv(rt)},attachVttRenderingDiv:function(rt){if(!At.getElement())throw Cn;At.setVttRenderingDiv(rt)},getCurrentTextTrackIndex:function(){var rt=Ve.getActiveStreamInfo();if(rt&&Fe)return Fe.getCurrentTrackIdx(rt.id)},provideThumbnail:function(rt,Pt){if(typeof Pt=="function")if(rt<0)Pt(null);else{var an=Ne.getIsDynamic()?ar(rt):rt,On=Ve.getStreamForTime(an);if(On!==null){var Wn=On.getThumbnailController();if(Wn)return Wn.provide(an,Pt);Pt(null)}else Pt(null)}},getDashAdapter:function(){return mt},getOfflineController:function(){return yn()},triggerSteeringRequest:function(){if($e)return $e.loadSteeringData()},getCurrentSteeringResponseData:function(){if($e)return $e.getCurrentSteeringResponseData()},getSettings:function(){return It.get()},updateSettings:function(rt){It.update(rt)},resetSettings:function(){It.reset()},reset:zt,destroy:function(){zt(),g.Z.deleteSingletonInstances(gt)}},ie=xt.getLogger(ae),Ae=!1,ye=!1,ve=!1,Oe=!0,je=NaN,qe=null,ct=null,Re=null,mt=null,_n=null,i.Z.extend(r.Z),Me=Vi(gt).getInstance(),st=(0,kn.Z)(gt).getInstance(),At=Jl(gt).getInstance(),Ot=kd(gt).getInstance(),ae}dc.__dashjs_factory_name="MediaPlayer";var hc=g.Z.getClassFactory(dc);hc.events=r.Z,hc.errors=U,g.Z.updateClassFactory(dc.__dashjs_factory_name,hc);const ag=hc},8825:(C,R,I)=>{function E(y){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},E(y)}function T(y,i){return T=Object.setPrototypeOf||function(g,d){return g.__proto__=d,g},T(y,i)}function l(y,i){return!i||E(i)!=="object"&&typeof i!="function"?function(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(y):i}function c(y){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},c(y)}I.d(R,{Z:()=>h});const h=new(function(y){(function(t,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(u&&u.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),u&&T(t,u)})(r,y);var i,g,d=(i=r,g=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var t,u=c(i);if(g){var m=c(this).constructor;t=Reflect.construct(u,arguments,m)}else t=u.apply(this,arguments);return l(this,t)});function r(){var t;return function(u,m){if(!(u instanceof m))throw new TypeError("Cannot call a class as a function")}(this,r),(t=d.call(this)).AST_IN_FUTURE="astInFuture",t.BASE_URLS_UPDATED="baseUrlsUpdated",t.BUFFER_EMPTY="bufferStalled",t.BUFFER_LOADED="bufferLoaded",t.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",t.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",t.DYNAMIC_TO_STATIC="dynamicToStatic",t.ERROR="error",t.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",t.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",t.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",t.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",t.LOG="log",t.MANIFEST_LOADING_STARTED="manifestLoadingStarted",t.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",t.MANIFEST_LOADED="manifestLoaded",t.METRICS_CHANGED="metricsChanged",t.METRIC_CHANGED="metricChanged",t.METRIC_ADDED="metricAdded",t.METRIC_UPDATED="metricUpdated",t.PERIOD_SWITCH_STARTED="periodSwitchStarted",t.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",t.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",t.QUALITY_CHANGE_RENDERED="qualityChangeRendered",t.TRACK_CHANGE_RENDERED="trackChangeRendered",t.STREAM_INITIALIZING="streamInitializing",t.STREAM_UPDATED="streamUpdated",t.STREAM_ACTIVATED="streamActivated",t.STREAM_DEACTIVATED="streamDeactivated",t.STREAM_INITIALIZED="streamInitialized",t.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",t.TEXT_TRACKS_ADDED="allTextTracksAdded",t.TEXT_TRACK_ADDED="textTrackAdded",t.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",t.TTML_PARSED="ttmlParsed",t.TTML_TO_PARSE="ttmlToParse",t.CAPTION_RENDERED="captionRendered",t.CAPTION_CONTAINER_RESIZE="captionContainerResize",t.CAN_PLAY="canPlay",t.CAN_PLAY_THROUGH="canPlayThrough",t.PLAYBACK_ENDED="playbackEnded",t.PLAYBACK_ERROR="playbackError",t.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",t.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",t.PLAYBACK_LOADED_DATA="playbackLoadedData",t.PLAYBACK_PAUSED="playbackPaused",t.PLAYBACK_PLAYING="playbackPlaying",t.PLAYBACK_PROGRESS="playbackProgress",t.PLAYBACK_RATE_CHANGED="playbackRateChanged",t.PLAYBACK_SEEKED="playbackSeeked",t.PLAYBACK_SEEKING="playbackSeeking",t.PLAYBACK_STALLED="playbackStalled",t.PLAYBACK_STARTED="playbackStarted",t.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",t.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",t.PLAYBACK_WAITING="playbackWaiting",t.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",t.EVENT_MODE_ON_START="eventModeOnStart",t.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",t.CONFORMANCE_VIOLATION="conformanceViolation",t.REPRESENTATION_SWITCH="representationSwitch",t.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",t.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",t.INBAND_PRFT="inbandPrft",t}return r}(I(8342).Z))},3393:(C,R,I)=>{I.d(R,{Z:()=>E});const E=new(function(){function T(){(function(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")})(this,T),this.init()}var l;return(l=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&function(c,h){for(var y=0;y<h.length;y++){var i=h[y];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(c,i.key,i)}}(T.prototype,l),T}())},3860:(C,R,I)=>{I.d(R,{Z:()=>E});const E=new(function(){function T(){(function(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")})(this,T),this.init()}var l;return(l=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&function(c,h){for(var y=0;y<h.length;y++){var i=h[y];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(c,i.key,i)}}(T.prototype,l),T}())},8080:(C,R,I)=>{I.d(R,{default:()=>z});var E=function X(){(function(de,ge){if(!(de instanceof ge))throw new TypeError("Cannot call a class as a function")})(this,X),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};E.SSL_CONNECTION_FAILED_PREFIX="SSL",E.DNS_RESOLUTION_FAILED="C00",E.HOST_UNREACHABLE="C01",E.CONNECTION_REFUSED="C02",E.CONNECTION_ERROR="C03",E.CORRUPT_MEDIA_ISOBMFF="M00",E.CORRUPT_MEDIA_OTHER="M01",E.BASE_URL_CHANGED="F00",E.BECAME_REPORTER="S00";const T=E;var l=I(1180);function c(X){var de,ge,Ge=(X=X||{}).eventBus,it=X.dashMetrics,Ye=X.metricsConstants,Ke=X.events;function dt(Tt){var bt=new T;if(ge){for(var Ft in Tt)Tt.hasOwnProperty(Ft)&&(bt[Ft]=Tt[Ft]);bt.mpdurl||(bt.mpdurl=ge.originalUrl||ge.url),bt.terror||(bt.terror=new Date),it.addDVBErrors(bt)}}function me(Tt){Tt.error||(ge=Tt.manifest)}function ke(Tt){dt({errorcode:T.BASE_URL_CHANGED,servicelocation:Tt.entry})}function Je(){dt({errorcode:T.BECAME_REPORTER})}function Xe(Tt){var bt;Tt.metric===Ye.HTTP_REQUEST&&((bt=Tt.value).responsecode===0||bt.responsecode==null||bt.responsecode>=400||bt.responsecode<100||bt.responsecode>=600)&&dt({errorcode:bt.responsecode||T.CONNECTION_ERROR,url:bt.url,terror:bt.tresponse,servicelocation:bt._serviceLocation})}function nt(Tt){var bt;switch(Tt.error?Tt.error.code:0){case MediaError.MEDIA_ERR_NETWORK:bt=T.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:bt=T.CORRUPT_MEDIA_OTHER;break;default:return}dt({errorcode:bt})}return de={initialize:function(){Ge.on(Ke.MANIFEST_UPDATED,me,de),Ge.on(Ke.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,ke,de),Ge.on(Ke.METRIC_ADDED,Xe,de),Ge.on(Ke.METRIC_UPDATED,Xe,de),Ge.on(Ke.PLAYBACK_ERROR,nt,de),Ge.on(l.Z.BECAME_REPORTING_PLAYER,Je,de)},reset:function(){Ge.off(Ke.MANIFEST_UPDATED,me,de),Ge.off(Ke.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,ke,de),Ge.off(Ke.METRIC_ADDED,Xe,de),Ge.off(Ke.METRIC_UPDATED,Xe,de),Ge.off(Ke.PLAYBACK_ERROR,nt,de),Ge.off(l.Z.BECAME_REPORTING_PLAYER,Je,de)}}}c.__dashjs_factory_name="DVBErrorsTranslator";const h=dashjs.FactoryMaker.getSingletonFactory(c);var y=I(2295);function i(X){X=X||{};var de,ge,Ge=!1,it=this.context,Ye=X.mediaElement;return de={initialize:function(Ke){Ke&&Ke.length&&(Ke.forEach(function(dt){var me=dt.starttime,ke=me+dt.duration;ge.add(me,ke)}),Ge=!!Ke[0]._useWallClockTime)},reset:function(){ge.clear()},isEnabled:function(){var Ke,dt=ge.length;if(!dt)return!0;Ke=Ge?new Date().getTime()/1e3:Ye.currentTime;for(var me=0;me<dt;me+=1){var ke=ge.start(me),Je=ge.end(me);if(ke<=Ke&&Ke<Je)return!0}return!1}},ge=(0,y.Z)(it).create(),de}i.__dashjs_factory_name="RangeController";const g=dashjs.FactoryMaker.getClassFactory(i);function d(){return{serialise:function X(de){var ge,Ge,it=[],Ye=[];for(ge in de)if(de.hasOwnProperty(ge)&&ge.indexOf("_")!==0){if((Ge=de[ge])==null&&(Ge=""),Array.isArray(Ge)){if(!Ge.length)continue;Ye=[],Ge.forEach(function(Ke){var dt=Object.prototype.toString.call(Ke).slice(8,-1)!=="Object";Ye.push(dt?Ke:X(Ke))}),Ge=Ye.map(encodeURIComponent).join(",")}else typeof Ge=="string"?Ge=encodeURIComponent(Ge):Ge instanceof Date?Ge=Ge.toISOString():typeof Ge=="number"&&(Ge=Math.round(Ge));it.push(ge+"="+Ge)}return it.join("&")}}}d.__dashjs_factory_name="MetricSerialiser";const r=dashjs.FactoryMaker.getSingletonFactory(d);function t(){var X,de,ge,Ge=window.crypto||window.msCrypto,it=Uint32Array,Ye=Math.pow(2,8*it.BYTES_PER_ELEMENT)-1;function Ke(){Ge&&(X||(X=new it(10)),Ge.getRandomValues(X),de=0)}return ge={random:function(dt,me){var ke;return dt||(dt=0),me||(me=1),Ge?(de===X.length&&Ke(),ke=X[de]/Ye,de+=1):ke=Math.random(),ke*(me-dt)+dt}},Ke(),ge}t.__dashjs_factory_name="RNG";const u=dashjs.FactoryMaker.getSingletonFactory(t);var m=I(5717);function S(X){var de;X=X||{};var ge,Ge,it,Ye,Ke,dt,me,ke=this.context,Je=[],Xe=X.metricsConstants;function nt(){Ye=!1,Ke=!1,dt=null,me=null}return de={report:function(Tt,bt){Array.isArray(bt)||(bt=[bt]),Ke&&me.isEnabled()&&bt.forEach(function(Ft){var pn=ge.serialise(Ft);Tt!==Xe.DVB_ERRORS&&(pn="metricname=".concat(Tt,"&").concat(pn)),function(wn,hn,Xn){var on=new XMLHttpRequest;on.withCredentials=Ge.getXHRWithCredentialsForType(Xe.HTTP_REQUEST_DVB_REPORTING_TYPE);var Zn=function(){var Bn=Je.indexOf(on);Bn!==-1&&(Je.splice(Bn,1),!(on.status>=200&&on.status<300)&&Xn&&Xn())};Je.push(on);try{on.open("GET",wn),on.onloadend=Zn,on.onerror=Zn,on.send()}catch{on.onerror()}}(pn="".concat(dt,"?").concat(pn),0,function(){Ke=!1})})},initialize:function(Tt,bt){var Ft;if(me=bt,!(dt=Tt.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");Ye||((Ft=Tt.dvb_probability)&&(Ft===1e3||Ft/1e3>=it.random())&&(Ke=!0),Ye=!0)},reset:function(){nt()}},ge=r(ke).getInstance(),it=u(ke).getInstance(),Ge=(0,m.Z)(ke).getInstance(),nt(),de}S.__dashjs_factory_name="DVBReporting";const A=dashjs.FactoryMaker.getClassFactory(S);function _(X){X=X||{};var de={"urn:dvb:dash:reporting:2014":A},ge=this.context,Ge=X.debug?X.debug.getLogger(void 0):{},it=X.metricsConstants,Ye=X.mediaPlayerModel||{};return{create:function(Ke,dt){var me;try{(me=de[Ke.schemeIdUri](ge).create({metricsConstants:it,mediaPlayerModel:Ye})).initialize(Ke,dt)}catch(ke){me=null,Ge.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(Ke.schemeIdUri," (").concat(ke.message,")"))}return me},register:function(Ke,dt){de[Ke]=dt},unregister:function(Ke){delete de[Ke]}}}_.__dashjs_factory_name="ReportingFactory";const v=dashjs.FactoryMaker.getSingletonFactory(_);function f(X){var de=[],ge=v(this.context).getInstance(X);return{initialize:function(Ge,it){Ge.some(function(Ye){var Ke=ge.create(Ye,it);if(Ke)return de.push(Ke),!0})},reset:function(){de.forEach(function(Ge){return Ge.reset()}),de=[]},report:function(Ge,it){de.forEach(function(Ye){return Ye.report(Ge,it)})}}}f.__dashjs_factory_name="ReportingController";const b=dashjs.FactoryMaker.getClassFactory(f);function p(){return{reconstructFullMetricName:function(X,de,ge){var Ge=X;return de&&(Ge+="("+de,ge&&ge.length&&(Ge+=","+ge),Ge+=")"),Ge},validateN:function(X){if(!X)throw new Error("missing n");if(isNaN(X))throw new Error("n is NaN");if(X<0)throw new Error("n must be positive");return X}}}p.__dashjs_factory_name="HandlerHelpers";const k=dashjs.FactoryMaker.getSingletonFactory(p);function P(X){var de,ge,Ge,it,Ye;X=X||{};var Ke=this.context,dt=k(Ke).getInstance(),me=[],ke=X.metricsConstants;function Je(){var Xe=function(){try{return Object.keys(me).map(function(nt){return me[nt]}).reduce(function(nt,Tt){return nt.level<Tt.level?nt:Tt})}catch{return}}();Xe&&Ye!==Xe.t&&(Ye=Xe.t,de.report(Ge,Xe))}return{initialize:function(Xe,nt,Tt){nt&&(ge=dt.validateN(Tt),de=nt,Ge=dt.reconstructFullMetricName(Xe,Tt),it=setInterval(Je,ge))},reset:function(){clearInterval(it),it=null,ge=0,de=null,Ye=null},handleNewMetric:function(Xe,nt,Tt){Xe===ke.BUFFER_LEVEL&&(me[Tt]=nt)}}}P.__dashjs_factory_name="BufferLevelHandler";const j=dashjs.FactoryMaker.getClassFactory(P),U=dashjs.FactoryMaker.getClassFactory(function(X){var de,ge=(X=X||{}).eventBus,Ge=X.metricsConstants;function it(){ge.off(l.Z.METRICS_INITIALISATION_COMPLETE,it,this),ge.trigger(l.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(Ye,Ke){Ke&&(de=Ke,ge.on(l.Z.METRICS_INITIALISATION_COMPLETE,it,this))},reset:function(){de=null},handleNewMetric:function(Ye,Ke){Ye===Ge.DVB_ERRORS&&de&&de.report(Ye,Ke)}}});function G(X){var de,ge,Ge,it,Ye;X=X||{};var Ke=[],dt=k(this.context).getInstance(),me=X.metricsConstants;function ke(){var Je=Ke;Je.length&&de&&de.report(it,Je),Ke=[]}return{initialize:function(Je,Xe,nt,Tt){Xe&&(ge=dt.validateN(nt),de=Xe,Tt&&Tt.length&&(Ge=Tt),it=dt.reconstructFullMetricName(Je,nt,Tt),Ye=setInterval(ke,ge))},reset:function(){clearInterval(Ye),Ye=null,ge=null,Ge=null,Ke=[],de=null},handleNewMetric:function(Je,Xe){Je===me.HTTP_REQUEST&&(Ge&&Ge!==Xe.type||Ke.push(Xe))}}}G.__dashjs_factory_name="HttpListHandler";const ee=dashjs.FactoryMaker.getClassFactory(G);function ne(){var X,de;return{initialize:function(ge,Ge){X=ge,de=Ge},reset:function(){de=null,X=void 0},handleNewMetric:function(ge,Ge){ge===X&&de&&de.report(X,Ge)}}}ne.__dashjs_factory_name="GenericMetricHandler";const re=dashjs.FactoryMaker.getClassFactory(ne);function oe(X){var de=(X=X||{}).debug?X.debug.getLogger(void 0):{},ge=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,Ge=this.context,it={BufferLevel:j,DVBErrors:U,HttpList:ee,PlayList:re,RepSwitchList:re,TcpList:re};return{create:function(Ye,Ke){var dt,me=Ye.match(ge);if(me){try{(dt=it[me[1]](Ge).create({eventBus:X.eventBus,metricsConstants:X.metricsConstants})).initialize(me[1],Ke,me[3],me[5])}catch(ke){dt=null,de.error("MetricsHandlerFactory: Could not create handler for type ".concat(me[1]," with args ").concat(me[3],", ").concat(me[5]," (").concat(ke.message,")"))}return dt}},register:function(Ye,Ke){it[Ye]=Ke},unregister:function(Ye){delete it[Ye]}}}oe.__dashjs_factory_name="MetricsHandlerFactory";const W=dashjs.FactoryMaker.getSingletonFactory(oe);function Te(X){X=X||{};var de,ge=[],Ge=this.context,it=X.eventBus,Ye=X.events,Ke=W(Ge).getInstance({debug:X.debug,eventBus:X.eventBus,metricsConstants:X.metricsConstants});function dt(me){ge.forEach(function(ke){ke.handleNewMetric(me.metric,me.value,me.mediaType)})}return de={initialize:function(me,ke){me.split(",").forEach(function(Je,Xe,nt){var Tt;if(Je.indexOf("(")!==-1&&Je.indexOf(")")===-1){var bt=nt[Xe+1];bt&&bt.indexOf("(")===-1&&bt.indexOf(")")!==-1&&(Je+=","+bt,delete nt[Xe+1])}(Tt=Ke.create(Je,ke))&&ge.push(Tt)}),it.on(Ye.METRIC_ADDED,dt,de),it.on(Ye.METRIC_UPDATED,dt,de)},reset:function(){it.off(Ye.METRIC_ADDED,dt,de),it.off(Ye.METRIC_UPDATED,dt,de),ge.forEach(function(me){return me.reset()}),ge=[]}}}Te.__dashjs_factory_name="MetricsHandlersController";const Ue=dashjs.FactoryMaker.getClassFactory(Te);function ze(X){var de,ge,Ge;X=X||{};var it=this.context;function Ye(){de&&de.reset(),ge&&ge.reset(),Ge&&Ge.reset()}return{initialize:function(Ke){try{(Ge=g(it).create({mediaElement:X.mediaElement})).initialize(Ke.Range),(ge=b(it).create({debug:X.debug,metricsConstants:X.metricsConstants,mediaPlayerModel:X.mediaPlayerModel})).initialize(Ke.Reporting,Ge),(de=Ue(it).create({debug:X.debug,eventBus:X.eventBus,metricsConstants:X.metricsConstants,events:X.events})).initialize(Ke.metrics,ge)}catch(dt){throw Ye(),dt}},reset:Ye}}ze.__dashjs_factory_name="MetricsController";const le=dashjs.FactoryMaker.getClassFactory(ze),Se=function X(){(function(de,ge){if(!(de instanceof ge))throw new TypeError("Cannot call a class as a function")})(this,X),this.metrics="",this.Range=[],this.Reporting=[]},be=function X(){(function(de,ge){if(!(de instanceof ge))throw new TypeError("Cannot call a class as a function")})(this,X),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},Y=function X(){(function(de,ge){if(!(de instanceof ge))throw new TypeError("Cannot call a class as a function")})(this,X),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3};function Q(X){var de=(X=X||{}).adapter,ge=X.constants;return{getMetrics:function(Ge){var it=[];return Ge&&Ge.Metrics_asArray&&Ge.Metrics_asArray.forEach(function(Ye){var Ke=new Se,dt=de.getIsDynamic(Ge);Ye.hasOwnProperty("metrics")&&(Ke.metrics=Ye.metrics,Ye.Range_asArray&&Ye.Range_asArray.forEach(function(me){var ke=new be;ke.starttime=function(Je,Xe,nt){var Tt,bt,Ft=0;return Xe?Ft=de.getAvailabilityStartTime(Je)/1e3:(Tt=de.getRegularPeriods(Je)).length&&(Ft=Tt[0].start),bt=Ft,nt&&nt.hasOwnProperty(ge.START_TIME)&&(bt+=nt.starttime),bt}(Ge,dt,me),me.hasOwnProperty("duration")?ke.duration=me.duration:ke.duration=de.getDuration(Ge),ke._useWallClockTime=dt,Ke.Range.push(ke)}),Ye.Reporting_asArray&&(Ye.Reporting_asArray.forEach(function(me){var ke=new Y;me.hasOwnProperty(ge.SCHEME_ID_URI)&&(ke.schemeIdUri=me.schemeIdUri,me.hasOwnProperty("value")&&(ke.value=me.value),me.hasOwnProperty(ge.DVB_REPORTING_URL)&&(ke.dvb_reportingUrl=me[ge.DVB_REPORTING_URL]),me.hasOwnProperty(ge.DVB_PROBABILITY)&&(ke.dvb_probability=me[ge.DVB_PROBABILITY]),Ke.Reporting.push(ke))}),it.push(Ke)))}),it}}}Q.__dashjs_factory_name="ManifestParsing";const J=dashjs.FactoryMaker.getSingletonFactory(Q);function fe(X){var de;X=X||{};var ge={},Ge=this.context,it=X.eventBus,Ye=X.events;function Ke(me){if(!me.error){var ke=Object.keys(ge);J(Ge).getInstance({adapter:X.adapter,constants:X.constants}).getMetrics(me.manifest).forEach(function(Je){var Xe=JSON.stringify(Je);if(ge.hasOwnProperty(Xe))ke.splice(Xe,1);else try{var nt=le(Ge).create(X);nt.initialize(Je),ge[Xe]=nt}catch{}}),ke.forEach(function(Je){ge[Je].reset(),delete ge[Je]}),it.trigger(l.Z.METRICS_INITIALISATION_COMPLETE)}}function dt(){Object.keys(ge).forEach(function(me){ge[me].reset()}),ge={}}return de={reset:function(){it.off(Ye.MANIFEST_UPDATED,Ke,de),it.off(Ye.STREAM_TEARDOWN_COMPLETE,dt,de)}},it.on(Ye.MANIFEST_UPDATED,Ke,de),it.on(Ye.STREAM_TEARDOWN_COMPLETE,dt,de),de}fe.__dashjs_factory_name="MetricsCollectionController";const Ce=dashjs.FactoryMaker.getClassFactory(fe);function V(){var X=this.context;return{createMetricsReporting:function(de){return h(X).getInstance({eventBus:de.eventBus,dashMetrics:de.dashMetrics,metricsConstants:de.metricsConstants,events:de.events}).initialize(),Ce(X).create(de)},getReportingFactory:function(){return v(X).getInstance()},getMetricsHandlerFactory:function(){return W(X).getInstance()}}}V.__dashjs_factory_name="MetricsReporting";var H=dashjs.FactoryMaker.getClassFactory(V);H.events=l.Z,dashjs.FactoryMaker.updateClassFactory(V.__dashjs_factory_name,H);const z=H},1180:(C,R,I)=>{function E(y){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},E(y)}function T(y,i){return T=Object.setPrototypeOf||function(g,d){return g.__proto__=d,g},T(y,i)}function l(y,i){return!i||E(i)!=="object"&&typeof i!="function"?function(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(y):i}function c(y){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},c(y)}I.d(R,{Z:()=>h});const h=new(function(y){(function(t,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(u&&u.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),u&&T(t,u)})(r,y);var i,g,d=(i=r,g=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var t,u=c(i);if(g){var m=c(this).constructor;t=Reflect.construct(u,arguments,m)}else t=u.apply(this,arguments);return l(this,t)});function r(){var t;return function(u,m){if(!(u instanceof m))throw new TypeError("Cannot call a class as a function")}(this,r),(t=d.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",t.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",t.CMCD_DATA_GENERATED="cmcdDataGenerated",t}return r}(I(8342).Z))},5717:(C,R,I)=>{I.d(R,{Z:()=>g});var E=I(2610),T=I(5448),l=I(1264),c=I(3106),h=I(1767),y=I(3393);function i(){var d,r,t,u,m,S,A,_,v=this.context,f=(0,l.Z)(v).getInstance();function b(){u=[],m=[],S=[],_=[],A=null,r=[]}function p(U,G){var ee=-1;U.some(function(ne,re){if(ne===G)return ee=re,!0}),ee<0||U.splice(ee,1)}function k(U){var G;for(G=0;G<_.length;G++)if(_[G].rulename===U)return G;return-1}function P(U,G){j(U,G);var ee=new E.Z;ee.schemeIdUri=U,ee.value=G,r.push(ee)}function j(U,G){(0,c.PS)(U,"string"),(0,c.PS)(G,"string"),r.forEach(function(ee,ne){ee.schemeIdUri===U&&ee.value===G&&r.splice(ne,1)})}return d={getCustomInitialTrackSelectionFunction:function(){return A},setCustomInitialTrackSelectionFunction:function(U){A=U},resetCustomInitialTrackSelectionFunction:function(){A=null},getLicenseResponseFilters:function(){return m},getLicenseRequestFilters:function(){return u},getCustomCapabilitiesFilters:function(){return S},registerCustomCapabilitiesFilter:function(U){S.push(U)},registerLicenseResponseFilter:function(U){m.push(U)},registerLicenseRequestFilter:function(U){u.push(U)},unregisterCustomCapabilitiesFilter:function(U){p(S,U)},unregisterLicenseResponseFilter:function(U){p(m,U)},unregisterLicenseRequestFilter:function(U){p(u,U)},addAbrCustomRule:function(U,G,ee){if(typeof U!="string"||U!==h.Z.ABANDON_FRAGMENT_RULES&&U!==h.Z.QUALITY_SWITCH_RULES||typeof G!="string")throw y.Z.BAD_ARGUMENT_ERROR;var ne=k(G);ne===-1?_.push({type:U,rulename:G,rule:ee}):(_[ne].type=U,_[ne].rule=ee)},removeAllAbrCustomRule:function(){_=[]},removeAbrCustomRule:function(U){if(U){var G=k(U);G!==-1&&_.splice(G,1)}else _=[]},getAbrCustomRules:function(){return _},addUTCTimingSource:P,removeUTCTimingSource:j,getUTCTimingSources:function(){return r},clearDefaultUTCTimingSources:function(){r=[]},restoreDefaultUTCTimingSources:function(){var U=f.get().streaming.utcSynchronization.defaultTimingSource;P(U.scheme,U.value)},setXHRWithCredentialsForType:function U(G,ee){G?t[G]=!!ee:Object.keys(t).forEach(function(ne){U(ne,ee)})},getXHRWithCredentialsForType:function(U){var G=t[U];return G===void 0?t.default:G},setConfig:function(){},reset:function(){b()}},t={default:!1},b(),d}i.__dashjs_factory_name="CustomParametersModel";const g=T.Z.getSingletonFactory(i)},9032:(C,R,I)=>{I.d(R,{Z:()=>c});var E=I(5448),T=I(7473);function l(h){var y=(h=h||{}).requestModifier;function i(g){var d=new Date,r=g.request,t=new XMLHttpRequest;if(t.open(g.method,g.url,!0),r.responseType&&(t.responseType=r.responseType),r.range&&t.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=d),y&&y.modifyRequestHeader&&(t=y.modifyRequestHeader(t,{url:g.url})),g.headers)for(var u in g.headers){var m=g.headers[u];m&&t.setRequestHeader(u,m)}t.withCredentials=g.withCredentials,t.onload=g.onload,t.onloadend=g.onend,t.onerror=g.onerror,t.onprogress=g.progress,t.onabort=g.onabort,t.ontimeout=g.ontimeout,t.timeout=g.timeout,t.send(),g.response=t}return{load:function(g){y&&y.modifyRequest?(0,T.k)(g,y).then(function(){return i(g)}):i(g)},abort:function(g){var d=g.response;d.onloadend=d.onerror=d.onprogress=void 0,d.abort()}}}l.__dashjs_factory_name="XHRLoader";const c=E.Z.getClassFactory(l)},1737:(C,R,I)=>{I.d(R,{default:()=>Ir});var E={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]};const T=function(){function nn(){(function($t,Nt){if(!($t instanceof Nt))throw new TypeError("Cannot call a class as a function")})(this,nn)}var rn;return rn=[{key:"findCencContentProtection",value:function($t){for(var Nt=null,en=0;en<$t.length;++en){var _t=$t[en];_t.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||_t.value.toLowerCase()!=="cenc"&&_t.value.toLowerCase()!=="cbcs"||(Nt=_t)}return Nt}},{key:"getPSSHData",value:function($t){var Nt=8,en=new DataView($t),_t=en.getUint8(Nt);return Nt+=20,_t>0&&(Nt+=4+16*en.getUint32(Nt)),Nt+=4,$t.slice(Nt)}},{key:"getPSSHForKeySystem",value:function($t,Nt){var en=nn.parsePSSHList(Nt);return $t&&en.hasOwnProperty($t.uuid.toLowerCase())?en[$t.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function($t,Nt){return"pssh"in $t?($t.pssh.__text=$t.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),Nt.decodeArray($t.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function($t){if($t==null)return[];for(var Nt=new DataView($t.buffer||$t),en={},_t=0;;){var pt,wt,Dt=void 0,Vt=_t;if(_t>=Nt.buffer.byteLength)break;if(pt=_t+Nt.getUint32(_t),_t+=4,Nt.getUint32(_t)===1886614376)if(_t+=4,(wt=Nt.getUint8(_t))===0||wt===1){_t++,_t+=3,Dt="";var Wt=void 0,fn=void 0;for(Wt=0;Wt<4;Wt++)Dt+=(fn=Nt.getUint8(_t+Wt).toString(16)).length===1?"0"+fn:fn;for(_t+=4,Dt+="-",Wt=0;Wt<2;Wt++)Dt+=(fn=Nt.getUint8(_t+Wt).toString(16)).length===1?"0"+fn:fn;for(_t+=2,Dt+="-",Wt=0;Wt<2;Wt++)Dt+=(fn=Nt.getUint8(_t+Wt).toString(16)).length===1?"0"+fn:fn;for(_t+=2,Dt+="-",Wt=0;Wt<2;Wt++)Dt+=(fn=Nt.getUint8(_t+Wt).toString(16)).length===1?"0"+fn:fn;for(_t+=2,Dt+="-",Wt=0;Wt<6;Wt++)Dt+=(fn=Nt.getUint8(_t+Wt).toString(16)).length===1?"0"+fn:fn;_t+=6,_t+=4,en[Dt=Dt.toLowerCase()]=Nt.buffer.slice(Vt,pt),_t=pt}else _t=pt;else _t=pt}return en}},{key:"getLicenseServerUrlFromMediaInfo",value:function($t,Nt){try{if(!$t||$t.length===0)return null;for(var en=0,_t=null;en<$t.length&&!_t;){var pt=$t[en];if(pt&&pt.contentProtection&&pt.contentProtection.length>0){var wt=pt.contentProtection.filter(function(vn){return vn.schemeIdUri&&vn.schemeIdUri===Nt});if(wt&&wt.length>0)for(var Dt=0;Dt<wt.length&&!_t;){for(var Vt=wt[Dt],Wt=0;Wt<E.attributes.length&&!_t;){for(var fn=0,ht=E.attributes[Wt];fn<E.prefixes.length&&!_t;){var jn=E.prefixes[fn];Vt[ht]&&Vt[ht].__prefix&&Vt[ht].__prefix===jn&&Vt[ht].__text&&(_t=Vt[ht].__text),fn+=1}Wt+=1}Dt+=1}}en+=1}return _t}catch{return null}}}],rn&&function($t,Nt){for(var en=0;en<Nt.length;en++){var _t=Nt[en];_t.enumerable=_t.enumerable||!1,_t.configurable=!0,"value"in _t&&(_t.writable=!0),Object.defineProperty($t,_t.key,_t)}}(nn,rn),nn}(),l=function nn(rn,$t){(function(Nt,en){if(!(Nt instanceof en))throw new TypeError("Cannot call a class as a function")})(this,nn),this.contentType=rn,this.robustness=$t},c=function nn(rn,$t,Nt,en,_t){(function(pt,wt){if(!(pt instanceof wt))throw new TypeError("Cannot call a class as a function")})(this,nn),this.initDataTypes=["cenc"],rn&&rn.length&&(this.audioCapabilities=rn),$t&&$t.length&&(this.videoCapabilities=$t),this.distinctiveIdentifier=Nt,this.persistentState=en,this.sessionTypes=_t};function h(nn){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rn){return typeof rn}:function(rn){return rn&&typeof Symbol=="function"&&rn.constructor===Symbol&&rn!==Symbol.prototype?"symbol":typeof rn},h(nn)}function y(nn,rn){return y=Object.setPrototypeOf||function($t,Nt){return $t.__proto__=Nt,$t},y(nn,rn)}function i(nn){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(rn){return rn.__proto__||Object.getPrototypeOf(rn)},i(nn)}const g=new(function(nn){(function(_t,pt){if(typeof pt!="function"&&pt!==null)throw new TypeError("Super expression must either be null or a function");_t.prototype=Object.create(pt&&pt.prototype,{constructor:{value:_t,writable:!0,configurable:!0}}),pt&&y(_t,pt)})(en,nn);var rn,$t,Nt=(rn=en,$t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _t,pt=i(rn);if($t){var wt=i(this).constructor;_t=Reflect.construct(pt,arguments,wt)}else _t=pt.apply(this,arguments);return function(Dt,Vt){return!Vt||h(Vt)!=="object"&&typeof Vt!="function"?function(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}(Dt):Vt}(this,_t)});function en(){var _t;return function(pt,wt){if(!(pt instanceof wt))throw new TypeError("Cannot call a class as a function")}(this,en),(_t=Nt.call(this)).MEDIA_KEYERR_CODE=100,_t.MEDIA_KEYERR_UNKNOWN_CODE=101,_t.MEDIA_KEYERR_CLIENT_CODE=102,_t.MEDIA_KEYERR_SERVICE_CODE=103,_t.MEDIA_KEYERR_OUTPUT_CODE=104,_t.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,_t.MEDIA_KEYERR_DOMAIN_CODE=106,_t.MEDIA_KEY_MESSAGE_ERROR_CODE=107,_t.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,_t.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,_t.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,_t.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,_t.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,_t.KEY_SESSION_CREATED_ERROR_CODE=113,_t.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,_t.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",_t.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",_t.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",_t.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",_t.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",_t.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",_t.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",_t.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",_t.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",_t.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",_t.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",_t.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",_t.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",_t.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",_t}return en}(I(2230).Z));var d=I(5459);const r=function nn(rn,$t,Nt,en,_t,pt,wt,Dt){(function(Vt,Wt){if(!(Vt instanceof Wt))throw new TypeError("Cannot call a class as a function")})(this,nn),this.url=rn,this.method=$t,this.responseType=Nt,this.headers=en,this.withCredentials=_t,this.messageType=pt,this.sessionId=wt,this.data=Dt},t=function nn(rn,$t,Nt){(function(en,_t){if(!(en instanceof _t))throw new TypeError("Cannot call a class as a function")})(this,nn),this.url=rn,this.headers=$t,this.data=Nt};var u=I(7855),m=I(703),S=I(3393),A=I(5448);function _(nn){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rn){return typeof rn}:function(rn){return rn&&typeof Symbol=="function"&&rn.constructor===Symbol&&rn!==Symbol.prototype?"symbol":typeof rn},_(nn)}function v(nn){var rn,$t,Nt,en,_t,pt,wt,Dt,Vt,Wt,fn,ht=(nn=nn||{}).protectionKeyController,jn=nn.protectionModel,vn=nn.eventBus,fr=nn.events,Sr=nn.debug,Zr=nn.BASE64,zn=nn.constants,gn=[],En=nn.cmcdModel,Nn=nn.settings,pr=nn.customParametersModel;function Or(){if(!(vn&&vn.hasOwnProperty("on")&&ht&&ht.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function ci(kn,nr){Dt||Vt?Dt&&di():function($r,Ji){if(!Vt){Vt=!0;var ea,ta=[];$r=$r.sort(function(ai,Yi){return(_t&&_t[ai.ks.systemString]&&_t[ai.ks.systemString].priority>=0?_t[ai.ks.systemString].priority:$r.length)-(_t&&_t[Yi.ks.systemString]&&_t[Yi.ks.systemString].priority>=0?_t[Yi.ks.systemString].priority:$r.length)});for(var Li=0;Li<$r.length;Li++){var fa=Za($r[Li]);ta.push({ks:$r[Li].ks,configs:[fa],protData:$r[Li].protData})}jn.requestKeySystemAccess(ta).then(function(ai){var Yi=(ea=ai.data).mksa&&ea.mksa.selectedSystemString?ea.mksa.selectedSystemString:ea.keySystem.systemString;return $t.info("DRM: KeySystem Access Granted for system string ("+Yi+")!  Selecting key system..."),jn.selectKeySystem(ea)}).then(function(ai){if(Dt=ai,Vt=!1,jn){vn.trigger(fr.KEY_SYSTEM_SELECTED,{data:ea});var Yi=Ri(Dt);Yi&&Yi.serverCertificate&&Yi.serverCertificate.length>0&&jn.setServerCertificate(Zr.decodeArray(Yi.serverCertificate).buffer),di()}}).catch(function(ai){Dt=null,Vt=!1,Ji||vn.trigger(fr.KEY_SYSTEM_SELECTED,{data:null,error:new d.Z(g.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,g.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+ai.error)})})}}(kn,nr)}function di(){for(var kn,nr=0;nr<Nt.length;nr++)for(kn=0;kn<Nt[nr].length;kn++)if(Dt===Nt[nr][kn].ks){Fi(Nt[nr][kn]);break}Nt=[]}function Fi(kn){if(ht.isClearKey(Dt)&&kn.protData&&kn.protData.hasOwnProperty("clearkeys")&&Object.keys(kn.protData.clearkeys).length!==0){var nr={kids:Object.keys(kn.protData.clearkeys)};kn.initData=new TextEncoder().encode(JSON.stringify(nr))}kn.sessionId?Ni(kn):kn.initData!==null&&Ui(kn)}function Ni(kn){Or(),jn.loadKeySession(kn)}function Ui(kn){var nr=T.getPSSHForKeySystem(Dt,kn?kn.initData:null);if(nr){if(function($r){if(!$r)return!1;try{for(var Ji=jn.getSessions(),ea=0;ea<Ji.length;ea++)if(Ji[ea].getKeyId()===$r)return!0;return!1}catch{return!1}}(kn.keyId)||_i(nr))return;try{kn.initData=nr,jn.createKeySession(kn)}catch($r){vn.trigger(fr.KEY_SESSION_CREATED,{data:null,error:new d.Z(g.KEY_SESSION_CREATED_ERROR_CODE,g.KEY_SESSION_CREATED_ERROR_MESSAGE+$r.message)})}}else kn&&kn.initData?jn.createKeySession(kn):vn.trigger(fr.KEY_SESSION_CREATED,{data:null,error:new d.Z(g.KEY_SESSION_CREATED_ERROR_CODE,g.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(Dt?Dt.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function Ri(kn){if(kn){var nr=kn.systemString;if(_t)return nr in _t?_t[nr]:null}return null}function _i(kn){if(!kn)return!1;try{for(var nr=jn.getAllInitData(),$r=0;$r<nr.length;$r++)if(ht.initDataEquals(kn,nr[$r]))return $t.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function ki(kn){Or(),kn?(jn.setMediaElement(kn),vn.on(fr.NEED_KEY,ni,rn)):kn===null&&(jn.setMediaElement(kn),vn.off(fr.NEED_KEY,ni,rn))}function Za(kn){var nr=kn.protData,$r=[],Ji=[],ea=nr&&nr.audioRobustness&&nr.audioRobustness.length>0?nr.audioRobustness:wt,ta=nr&&nr.videoRobustness&&nr.videoRobustness.length>0?nr.videoRobustness:wt,Li=kn.sessionType,fa=nr&&nr.distinctiveIdentifier?nr.distinctiveIdentifier:"optional",ai=nr&&nr.persistentState?nr.persistentState:Li==="temporary"?"optional":"required";return en.forEach(function(Yi){Yi.type===zn.AUDIO?$r.push(new l(Yi.codec,ea)):Yi.type===zn.VIDEO&&Ji.push(new l(Yi.codec,ta))}),new c($r,Ji,fa,ai,[Li])}function Oa(kn){kn.error?vn.trigger(fr.KEY_STATUSES_CHANGED,{data:null,error:kn.error}):$t.debug("DRM: key status = "+kn.status)}function Bi(kn){$t.debug("DRM: onKeyMessage");var nr=kn.data;vn.trigger(fr.KEY_MESSAGE,{data:nr});var $r=nr.messageType?nr.messageType:"license-request",Ji=nr.message,ea=nr.sessionToken,ta=Ri(Dt),Li=ht.getLicenseServerModelInstance(Dt,ta,$r),fa={sessionToken:ea,messageType:$r};if(Ji&&Ji.byteLength!==0){if(!Li)return $t.debug("DRM: License server request not required for this message (type = "+kn.data.messageType+").  Session ID = "+ea.getSessionId()),void Tr(fa);if(ht.isClearKey(Dt)){var ai=ht.processClearKeyLicenseRequest(Dt,ta,Ji);if(ai&&ai.keyPairs&&ai.keyPairs.length>0)return $t.debug("DRM: ClearKey license request handled by application!"),Tr(fa),void jn.updateKeySession(ea,ai)}(function(Yi,to,Aa){var Ka=Yi.sessionToken,Oi=Yi.messageType?Yi.messageType:"license-request",Bt={sessionToken:Ka,messageType:Oi},dn=Dt?Dt.systemString:null,Un=function(Yn,na,Ar,Ma,Io){var ma=null,Wa=Ma.message;if(Yn&&Yn.serverURL){var Ta=Yn.serverURL;typeof Ta=="string"&&Ta!==""?ma=Ta:_(Ta)==="object"&&Ta.hasOwnProperty(na)&&(ma=Ta[na])}else if(Yn&&Yn.laURL&&Yn.laURL!=="")ma=Yn.laURL;else if(!(ma=T.getLicenseServerUrlFromMediaInfo(en,Dt.schemeIdURI))&&!ht.isClearKey(Dt)){var Uo=T.getPSSHData(Ar.initData);(ma=Dt.getLicenseServerURLFromInitData(Uo))||(ma=Ma.laURL)}return Io.getServerURLFromMessage(ma,Wa,na)}(Aa,Oi,Ka,Yi,to);if(Un){var or={},ir=!1;Aa&&xi(or,Aa.httpRequestHeaders);var gr=Yi.message;xi(or,Dt.getRequestHeadersFromMessage(gr)),Object.keys(or).forEach(function(Yn){Yn.toLowerCase()==="authorization"&&(ir=!0)}),Aa&&typeof Aa.withCredentials=="boolean"&&(ir=Aa.withCredentials);var Hr=function(Yn){if(jn)if(Yn.status>=200&&Yn.status<=299){var na=m.Z.parseHttpHeaders(Yn.getAllResponseHeaders?Yn.getAllResponseHeaders():null),Ar=new t(Yn.responseURL,na,Yn.response);ho(pr.getLicenseResponseFilters(),Ar).then(function(){var Ma=to.getLicenseMessage(Ar.data,dn,Oi);Ma!==null?(Tr(Bt),jn.updateKeySession(Ka,Ma)):bo(Yn,Bt,dn,Oi,to)})}else bo(Yn,Bt,dn,Oi,to)},qr=function(Yn){Tr(Bt,new d.Z(g.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,g.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+dn+' update, XHR aborted. status is "'+Yn.statusText+'" ('+Yn.status+"), readyState is "+Yn.readyState))},Dr=function(Yn){Tr(Bt,new d.Z(g.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,g.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+dn+' update, XHR error. status is "'+Yn.statusText+'" ('+Yn.status+"), readyState is "+Yn.readyState))},Br=Dt.getLicenseRequestFromMessage(gr),pi=to.getHTTPMethod(Oi),zi=to.getResponseType(dn,Oi),Mi=Aa&&!isNaN(Aa.httpTimeout)?Aa.httpTimeout:8e3,ga=Ka.getSessionId()||null,Wi=new r(Un,pi,zi,or,ir,Oi,ga,Br),Gi=isNaN(Nn.get().streaming.retryAttempts[u.w.LICENSE])?3:Nn.get().streaming.retryAttempts[u.w.LICENSE];ho(pr.getLicenseRequestFilters(),Wi).then(function(){ji(Wi,Gi,Mi,Hr,qr,Dr)})}else Tr(Bt,new d.Z(g.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,g.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(nr,Li,ta)}else Tr(fa,new d.Z(g.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,g.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function Tr(kn,nr){vn.trigger(fr.LICENSE_REQUEST_COMPLETE,{data:kn,error:nr})}function ji(kn,nr,$r,Ji,ea,ta){var Li=new XMLHttpRequest;if(Nn.get().streaming.cmcd&&Nn.get().streaming.cmcd.enabled&&Nn.get().streaming.cmcd.mode===S.Z.CMCD_MODE_QUERY){var fa=En.getQueryParameter({url:kn.url,type:u.w.LICENSE});fa&&(kn.url=m.Z.addAditionalQueryParameterToUrl(kn.url,[fa]))}for(var ai in Li.open(kn.method,kn.url,!0),Li.responseType=kn.responseType,Li.withCredentials=kn.withCredentials,$r>0&&(Li.timeout=$r),kn.headers)Li.setRequestHeader(ai,kn.headers[ai]);if(Nn.get().streaming.cmcd&&Nn.get().streaming.cmcd.enabled&&Nn.get().streaming.cmcd.mode===S.Z.CMCD_MODE_HEADER){var Yi=En.getHeaderParameters({url:kn.url,type:u.w.LICENSE});if(Yi)for(var to in Yi){var Aa=Yi[to];Aa&&Li.setRequestHeader(to,Aa)}}var Ka=function(){nr--;var Oi=isNaN(Nn.get().streaming.retryIntervals[u.w.LICENSE])?1e3:Nn.get().streaming.retryIntervals[u.w.LICENSE];fn=setTimeout(function(){ji(kn,nr,$r,Ji,ea,ta)},Oi)};Li.onload=function(){Wt=null,this.status>=200&&this.status<=299||nr<=0?Ji(this):($t.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+nr),Ka())},Li.ontimeout=Li.onerror=function(){Wt=null,nr<=0?ta(this):($t.warn("License request network request failed . Retrying it... Pending retries: "+nr),Ka())},Li.onabort=function(){ea(this)},vn.trigger(fr.LICENSE_REQUEST_SENDING,{url:kn.url,headers:kn.headers,payload:kn.data,sessionId:kn.sessionId}),Wt=Li,Li.send(kn.data)}function fo(){Wt&&(Wt.onloadend=Wt.onerror=Wt.onprogress=void 0,Wt.abort(),Wt=null),fn&&(clearTimeout(fn),fn=null)}function xi(kn,nr){if(nr)for(var $r in nr)kn[$r]=nr[$r]}function bo(kn,nr,$r,Ji,ea){var ta="NONE",Li=null;kn.response&&(ta=ea.getErrorResponse(kn.response,$r,Ji),Li={serverResponse:kn.response||null,responseCode:kn.status||null,responseText:kn.statusText||null}),Tr(nr,new d.Z(g.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,g.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+$r+' update, XHR complete. status is "'+kn.statusText+'" ('+kn.status+"), readyState is "+kn.readyState+".  Response is "+ta,Li))}function ho(kn,nr){return kn?kn.reduce(function($r,Ji){return $r.then(function(){return Ji(nr)})},Promise.resolve()):Promise.resolve()}function ni(kn,nr){if(!Nn.get().streaming.protection.ignoreEmeEncryptedEvent){if($t.debug("DRM: onNeedKey"),kn.key.initDataType!=="cenc")return void $t.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+kn.key.initDataType);if(en.length===0&&($t.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(nr=nr===void 0?1:nr+1)<5))return void gn.push(setTimeout(function(){ni(kn,nr)},500));var $r=kn.key.initData;if(ArrayBuffer.isView($r)&&($r=$r.buffer),Dt){var Ji=T.getPSSHForKeySystem(Dt,$r);if(Ji&&_i(Ji))return}$t.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array($r)));var ea=ht.getSupportedKeySystemsFromSegmentPssh($r,_t,pt);if(ea.length===0)return void $t.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(ta){Nt.push(ta),ci(ta,!1)})(ea)}}return rn={initializeForMedia:function(kn){if(!kn)throw new Error("mediaInfo can not be null or undefined");Or(),en.push(kn)},clearMediaInfoArray:function(){en=[]},handleKeySystemFromManifest:function(){if(en&&en.length!==0){var kn=[];en.forEach(function(nr){var $r=ht.getSupportedKeySystemsFromContentProtection(nr.contentProtection,_t,pt);$r.length>0&&(kn.length===0&&(kn=$r),Nt.push($r))}),kn&&kn.length>0&&ci(kn,!0)}},createKeySession:Ui,loadKeySession:Ni,removeKeySession:function(kn){Or(),jn.removeKeySession(kn)},closeKeySession:function(kn){Or(),jn.closeKeySession(kn)},setServerCertificate:function(kn){Or(),jn.setServerCertificate(kn)},setMediaElement:ki,setSessionType:function(kn){pt=kn},setRobustnessLevel:function(kn){wt=kn},setProtectionData:function(kn){_t=kn,ht.setProtectionData(kn)},getSupportedKeySystemsFromContentProtection:function(kn){return Or(),ht.getSupportedKeySystemsFromContentProtection(kn,_t,pt)},getKeySystems:function(){return ht?ht.getKeySystems():[]},setKeySystems:function(kn){ht&&ht.setKeySystems(kn)},stop:function(){fo(),jn&&jn.stop()},reset:function(){vn.off(fr.INTERNAL_KEY_MESSAGE,Bi,rn),vn.off(fr.INTERNAL_KEY_STATUS_CHANGED,Oa,rn),Or(),fo(),ki(null),Dt=null,Vt=!1,jn&&(jn.reset(),jn=null),gn.forEach(function(kn){return clearTimeout(kn)}),gn=[],en=[],Nt=[]}},$t=Sr.getLogger(rn),Nt=[],en=[],pt="temporary",wt="",Wt=null,fn=null,vn.on(fr.INTERNAL_KEY_MESSAGE,Bi,rn),vn.on(fr.INTERNAL_KEY_STATUS_CHANGED,Oa,rn),rn}v.__dashjs_factory_name="ProtectionController";const f=A.Z.getClassFactory(v),b=function nn(rn,$t){(function(Nt,en){if(!(Nt instanceof en))throw new TypeError("Cannot call a class as a function")})(this,nn),this.keyID=rn,this.key=$t},p=function(){function nn($t,Nt){if(function(en,_t){if(!(en instanceof _t))throw new TypeError("Cannot call a class as a function")}(this,nn),Nt&&Nt!=="persistent"&&Nt!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=$t,this.type=Nt}var rn;return(rn=[{key:"toJWK",value:function(){var $t,Nt=this.keyPairs.length,en={keys:[]};for($t=0;$t<Nt;$t++){var _t={kty:"oct",alg:"A128KW",kid:this.keyPairs[$t].keyID,k:this.keyPairs[$t].key};en.keys.push(_t)}this.type&&(en.type=this.type);var pt=JSON.stringify(en),wt=pt.length,Dt=new ArrayBuffer(wt),Vt=new Uint8Array(Dt);for($t=0;$t<wt;$t++)Vt[$t]=pt.charCodeAt($t);return Dt}}])&&function($t,Nt){for(var en=0;en<Nt.length;en++){var _t=Nt[en];_t.enumerable=_t.enumerable||!1,_t.configurable=!0,"value"in _t&&(_t.writable=!0),Object.defineProperty($t,_t.key,_t)}}(nn.prototype,rn),nn}(),k=new(function(){function nn(){(function($t,Nt){if(!($t instanceof Nt))throw new TypeError("Cannot call a class as a function")})(this,nn),this.init()}var rn;return(rn=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&function($t,Nt){for(var en=0;en<Nt.length;en++){var _t=Nt[en];_t.enumerable=_t.enumerable||!1,_t.configurable=!0,"value"in _t&&(_t.writable=!0),Object.defineProperty($t,_t.key,_t)}}(nn.prototype,rn),nn}());var P="e2719d58-a985-b3c9-781a-b030af78d30e",j=k.CLEARKEY_KEYSTEM_STRING,U="urn:uuid:"+P;function G(nn){var rn=(nn=nn||{}).BASE64;return{uuid:P,schemeIdURI:U,systemString:j,getInitData:function($t,Nt){try{var en=T.parseInitDataFromContentProtection($t,rn);if(!en&&Nt){var _t={kids:[function(pt){try{var wt=pt.replace(/-/g,"");return(wt=btoa(wt.match(/\w{2}/g).map(function(Dt){return String.fromCharCode(parseInt(Dt,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}}(Nt["cenc:default_KID"])]};en=new TextEncoder().encode(JSON.stringify(_t))}return en}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function($t){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array($t))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function($t,Nt){var en=null;if($t){for(var _t=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Nt))),pt=[],wt=0;wt<_t.kids.length;wt++){var Dt=_t.kids[wt],Vt=$t.clearkeys&&$t.clearkeys.hasOwnProperty(Dt)?$t.clearkeys[Dt]:null;if(!Vt)throw new Error("DRM: ClearKey keyID ("+Dt+") is not known!");pt.push(new b(Dt,Vt))}en=new p(pt)}return en}}}G.__dashjs_factory_name="KeySystemClearKey";const ee=dashjs.FactoryMaker.getSingletonFactory(G);var ne="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",re=k.CLEARKEY_KEYSTEM_STRING,oe="urn:uuid:"+ne;function W(nn){var rn=nn.BASE64,$t=nn.debug.getLogger(void 0);return{uuid:ne,schemeIdURI:oe,systemString:re,getInitData:function(Nt){return T.parseInitDataFromContentProtection(Nt,rn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(Nt){return new Uint8Array(Nt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(Nt,en){var _t=null;if(Nt){for(var pt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(en))),wt=[],Dt=0;Dt<pt.kids.length;Dt++){var Vt=pt.kids[Dt],Wt=Nt.clearkeys&&Nt.clearkeys.hasOwnProperty(Vt)?Nt.clearkeys[Vt]:null;if(!Wt)throw new Error("DRM: ClearKey keyID ("+Vt+") is not known!");wt.push(new b(Vt,Wt))}_t=new p(wt),$t.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return _t}}}W.__dashjs_factory_name="KeySystemW3CClearKey";const Te=dashjs.FactoryMaker.getSingletonFactory(W);var Ue="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",ze=k.WIDEVINE_KEYSTEM_STRING,le="urn:uuid:"+Ue;function Se(nn){var rn=(nn=nn||{}).BASE64;return{uuid:Ue,schemeIdURI:le,systemString:ze,getInitData:function($t){return T.parseInitDataFromContentProtection($t,rn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function($t){return new Uint8Array($t)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Se.__dashjs_factory_name="KeySystemWidevine";const be=dashjs.FactoryMaker.getSingletonFactory(Se);var Y="9a04f079-9840-4286-ab92-e65be0885f95",Q=k.PLAYREADY_KEYSTEM_STRING,J="urn:uuid:"+Y;function fe(nn){var rn="utf-16",$t=(nn=nn||{}).BASE64,Nt=nn.settings;function en(){if(!$t||!$t.hasOwnProperty("decodeArray")||!$t.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:Y,schemeIdURI:J,systemString:Q,getInitData:function(_t){var pt,wt,Dt,Vt,Wt,fn=new Uint8Array([112,115,115,104,0,0,0,0]),ht=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),jn=0,vn=null;if(en(),!_t)return null;if("pssh"in _t)return T.parseInitDataFromContentProtection(_t,$t);if("pro"in _t)vn=$t.decodeArray(_t.pro.__text);else{if(!("prheader"in _t))return null;vn=$t.decodeArray(_t.prheader.__text)}return pt=vn.length,wt=4+fn.length+ht.length+4+pt,Dt=new ArrayBuffer(wt),Vt=new Uint8Array(Dt),(Wt=new DataView(Dt)).setUint32(jn,wt),jn+=4,Vt.set(fn,jn),jn+=fn.length,Vt.set(ht,jn),jn+=ht.length,Wt.setUint32(jn,pt),jn+=4,Vt.set(vn,jn),jn+=pt,Vt.buffer},getRequestHeadersFromMessage:function(_t){var pt,wt,Dt={},Vt=new DOMParser;if(Nt&&Nt.get().streaming.protection.detectPlayreadyMessageFormat&&rn==="utf-16"&&_t&&_t.byteLength%2==1)return Dt["Content-Type"]="text/xml; charset=utf-8",Dt;var Wt=rn==="utf-16"?new Uint16Array(_t):new Uint8Array(_t);pt=String.fromCharCode.apply(null,Wt);for(var fn=(wt=Vt.parseFromString(pt,"application/xml")).getElementsByTagName("name"),ht=wt.getElementsByTagName("value"),jn=0;jn<fn.length;jn++)Dt[fn[jn].childNodes[0].nodeValue]=ht[jn].childNodes[0].nodeValue;return Dt.hasOwnProperty("Content")&&(Dt["Content-Type"]=Dt.Content,delete Dt.Content),Dt.hasOwnProperty("Content-Type")||(Dt["Content-Type"]="text/xml; charset=utf-8"),Dt},getLicenseRequestFromMessage:function(_t){var pt=null,wt=new DOMParser;if(Nt&&Nt.get().streaming.protection.detectPlayreadyMessageFormat&&rn==="utf-16"&&_t&&_t.byteLength%2==1)return _t;var Dt=rn==="utf-16"?new Uint16Array(_t):new Uint8Array(_t);en();var Vt=String.fromCharCode.apply(null,Dt),Wt=wt.parseFromString(Vt,"application/xml");if(!Wt.getElementsByTagName("PlayReadyKeyMessage")[0])return _t;var fn=Wt.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return fn&&(pt=$t.decode(fn)),pt},getLicenseServerURLFromInitData:function(_t){if(_t)for(var pt=new DataView(_t),wt=pt.getUint16(4,!0),Dt=6,Vt=new DOMParser,Wt=0;Wt<wt;Wt++){var fn=pt.getUint16(Dt,!0);Dt+=2;var ht=pt.getUint16(Dt,!0);if(Dt+=2,fn===1){var jn=_t.slice(Dt,Dt+ht),vn=String.fromCharCode.apply(null,new Uint16Array(jn)),fr=Vt.parseFromString(vn,"application/xml");if(fr.getElementsByTagName("LA_URL")[0]){var Sr=fr.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Sr)return Sr}if(fr.getElementsByTagName("LUI_URL")[0]){var Zr=fr.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Zr)return Zr}}else Dt+=ht}return null},getCDMData:function(_t){var pt,wt,Dt,Vt;if(en(),!_t)return null;for(pt=[],Vt=0;Vt<_t.length;++Vt)pt.push(_t.charCodeAt(Vt)),pt.push(0);for(pt=String.fromCharCode.apply(null,pt),pt=$t.encode(pt),wt='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",pt),Dt=[],Vt=0;Vt<wt.length;++Vt)Dt.push(wt.charCodeAt(Vt)),Dt.push(0);return new Uint8Array(Dt).buffer},setPlayReadyMessageFormat:function(_t){if(_t!=="utf-8"&&_t!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');rn=_t}}}fe.__dashjs_factory_name="KeySystemPlayReady";const Ce=dashjs.FactoryMaker.getSingletonFactory(fe);function V(nn){var rn=(nn=nn||{}).BASE64,$t={};return $t[k.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(Nt){return rn.decodeArray(Nt.license)},getErrorResponse:function(Nt){return Nt}},$t[k.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(Nt){return Nt},getErrorResponse:function(Nt){return String.fromCharCode.apply(null,new Uint8Array(Nt))}},{getServerURLFromMessage:function(Nt){return Nt},getHTTPMethod:function(){return"POST"},getResponseType:function(Nt){return $t[Nt].responseType},getLicenseMessage:function(Nt,en){return function(){if(!rn||!rn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),$t[en].getLicenseMessage(Nt)},getErrorResponse:function(Nt,en){return $t[en].getErrorResponse(Nt)}}}V.__dashjs_factory_name="DRMToday";const H=dashjs.FactoryMaker.getSingletonFactory(V);function z(){var nn="http://schemas.xmlsoap.org/soap/envelope/";function rn(en){var _t=String.fromCharCode.apply(null,new Uint8Array(en));return decodeURIComponent(escape(_t))}function $t(en){if(window.DOMParser){var _t=rn(en),pt=new window.DOMParser().parseFromString(_t,"text/xml"),wt=pt?pt.getElementsByTagNameNS(nn,"Envelope")[0]:null,Dt=wt?wt.getElementsByTagNameNS(nn,"Body")[0]:null;if(Dt&&Dt.getElementsByTagNameNS(nn,"Fault")[0])return null}return en}function Nt(en){var _t="",pt="",wt="",Dt=-1,Vt=-1;if(window.DOMParser){var Wt=rn(en),fn=new window.DOMParser().parseFromString(Wt,"text/xml"),ht=fn?fn.getElementsByTagNameNS(nn,"Envelope")[0]:null,jn=ht?ht.getElementsByTagNameNS(nn,"Body")[0]:null,vn=jn?jn.getElementsByTagNameNS(nn,"Fault")[0]:null,fr=vn?vn.getElementsByTagName("detail")[0]:null,Sr=fr?fr.getElementsByTagName("Exception")[0]:null,Zr=null;if(vn===null)return Wt;_t=(Zr=vn.getElementsByTagName("faultstring")[0].firstChild)?Zr.nodeValue:null,Sr!==null&&(pt=(Zr=Sr.getElementsByTagName("StatusCode")[0])?Zr.firstChild.nodeValue:null,Dt=(wt=(Zr=Sr.getElementsByTagName("Message")[0])?Zr.firstChild.nodeValue:null)?wt.lastIndexOf("[")+1:-1,Vt=wt?wt.indexOf("]"):-1,wt=wt?wt.substring(Dt,Vt):"")}var zn="code: ".concat(pt,", name: ").concat(_t);return wt&&(zn+=", message: ".concat(wt)),zn}return{getServerURLFromMessage:function(en){return en},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(en){return $t.call(this,en)},getErrorResponse:function(en){return Nt.call(this,en)}}}z.__dashjs_factory_name="PlayReady";const X=A.Z.getSingletonFactory(z);function de(){return{getServerURLFromMessage:function(nn){return nn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(nn){return nn},getErrorResponse:function(nn){return String.fromCharCode.apply(null,new Uint8Array(nn))}}}de.__dashjs_factory_name="Widevine";const ge=dashjs.FactoryMaker.getSingletonFactory(de);function Ge(){return{getServerURLFromMessage:function(nn){return nn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(nn){if(!nn.hasOwnProperty("keys"))return null;for(var rn=[],$t=0;$t<nn.keys.length;$t++){var Nt=nn.keys[$t],en=Nt.kid.replace(/=/g,""),_t=Nt.k.replace(/=/g,"");rn.push(new b(en,_t))}return new p(rn)},getErrorResponse:function(nn){return String.fromCharCode.apply(null,new Uint8Array(nn))}}}Ge.__dashjs_factory_name="ClearKey";const it=dashjs.FactoryMaker.getSingletonFactory(Ge);function Ye(){var nn,rn,$t,Nt,en,_t,pt,wt,Dt=this.context;function Vt(ht,jn){return jn&&ht in jn?jn[ht]:null}function Wt(ht,jn){return ht&&ht.sessionId?ht.sessionId:jn&&jn.sessionId?jn.sessionId:null}function fn(ht,jn){return ht&&ht.sessionType?ht.sessionType:jn}return nn={initialize:function(){var ht;Nt=[],ht=Ce(Dt).getInstance({BASE64:en,settings:_t}),Nt.push(ht),ht=be(Dt).getInstance({BASE64:en}),Nt.push(ht),ht=ee(Dt).getInstance({BASE64:en}),Nt.push(ht),pt=ht,ht=Te(Dt).getInstance({BASE64:en,debug:rn}),Nt.push(ht),wt=ht},setProtectionData:function(ht){for(var jn,vn,fr=0;fr<Nt.length;fr++){var Sr=Nt[fr];Sr.hasOwnProperty("init")&&Sr.init((jn=Sr.systemString,vn=void 0,vn=null,ht&&(vn=jn in ht?ht[jn]:null),vn))}},isClearKey:function(ht){return ht===pt||ht===wt},initDataEquals:function(ht,jn){if(ht.byteLength===jn.byteLength){for(var vn=new Uint8Array(ht),fr=new Uint8Array(jn),Sr=0;Sr<vn.length;Sr++)if(vn[Sr]!==fr[Sr])return!1;return!0}return!1},getKeySystems:function(){return Nt},setKeySystems:function(ht){Nt=ht},getKeySystemBySystemString:function(ht){for(var jn=0;jn<Nt.length;jn++)if(Nt[jn].systemString===ht)return Nt[jn];return null},getSupportedKeySystemsFromContentProtection:function(ht,jn,vn){var fr,Sr,Zr,zn,gn=[];if(ht){var En=T.findCencContentProtection(ht);for(Zr=0;Zr<Nt.length;++Zr){var Nn=Vt((Sr=Nt[Zr]).systemString,jn);for(zn=0;zn<ht.length;++zn)if((fr=ht[zn]).schemeIdUri.toLowerCase()===Sr.schemeIdURI){var pr=Sr.getInitData(fr,En);gn.push({ks:Nt[Zr],keyId:fr.keyId,initData:pr,protData:Nn,cdmData:Sr.getCDMData(Nn?Nn.cdmData:null),sessionId:Wt(Nn,fr),sessionType:fn(Nn,vn)})}}}return gn},getSupportedKeySystemsFromSegmentPssh:function(ht,jn,vn){for(var fr,Sr=[],Zr=T.parsePSSHList(ht),zn=0;zn<Nt.length;++zn){var gn=Vt((fr=Nt[zn]).systemString,jn);fr.uuid in Zr&&Sr.push({ks:fr,initData:Zr[fr.uuid],protData:gn,cdmData:fr.getCDMData(gn?gn.cdmData:null),sessionId:Wt(gn),sessionType:fn(gn,vn)})}return Sr},getLicenseServerModelInstance:function(ht,jn,vn){if(vn==="license-release"||vn==="individualization-request")return null;var fr=null;return jn&&jn.hasOwnProperty("drmtoday")?fr=H(Dt).getInstance({BASE64:en}):ht.systemString===k.WIDEVINE_KEYSTEM_STRING?fr=ge(Dt).getInstance():ht.systemString===k.PLAYREADY_KEYSTEM_STRING?fr=X(Dt).getInstance():ht.systemString===k.CLEARKEY_KEYSTEM_STRING&&(fr=it(Dt).getInstance()),fr},processClearKeyLicenseRequest:function(ht,jn,vn){try{return ht.getClearKeysFromProtectionData(jn,vn)}catch{return $t.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(ht){ht&&(ht.debug&&(rn=ht.debug,$t=rn.getLogger(nn)),ht.BASE64&&(en=ht.BASE64),ht.settings&&(_t=ht.settings))}},nn}Ye.__dashjs_factory_name="ProtectionKeyController";const Ke=dashjs.FactoryMaker.getSingletonFactory(Ye);function dt(nn){return dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rn){return typeof rn}:function(rn){return rn&&typeof Symbol=="function"&&rn.constructor===Symbol&&rn!==Symbol.prototype?"symbol":typeof rn},dt(nn)}function me(nn,rn){return me=Object.setPrototypeOf||function($t,Nt){return $t.__proto__=Nt,$t},me(nn,rn)}function ke(nn){return ke=Object.setPrototypeOf?Object.getPrototypeOf:function(rn){return rn.__proto__||Object.getPrototypeOf(rn)},ke(nn)}const Je=new(function(nn){(function(_t,pt){if(typeof pt!="function"&&pt!==null)throw new TypeError("Super expression must either be null or a function");_t.prototype=Object.create(pt&&pt.prototype,{constructor:{value:_t,writable:!0,configurable:!0}}),pt&&me(_t,pt)})(en,nn);var rn,$t,Nt=(rn=en,$t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _t,pt=ke(rn);if($t){var wt=ke(this).constructor;_t=Reflect.construct(pt,arguments,wt)}else _t=pt.apply(this,arguments);return function(Dt,Vt){return!Vt||dt(Vt)!=="object"&&typeof Vt!="function"?function(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}(Dt):Vt}(this,_t)});function en(){var _t;return function(pt,wt){if(!(pt instanceof wt))throw new TypeError("Cannot call a class as a function")}(this,en),(_t=Nt.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",_t.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",_t.KEY_ADDED="public_keyAdded",_t.KEY_ERROR="public_keyError",_t.KEY_MESSAGE="public_keyMessage",_t.KEY_SESSION_CLOSED="public_keySessionClosed",_t.KEY_SESSION_CREATED="public_keySessionCreated",_t.KEY_SESSION_REMOVED="public_keySessionRemoved",_t.KEY_STATUSES_CHANGED="public_keyStatusesChanged",_t.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",_t.KEY_SYSTEM_SELECTED="public_keySystemSelected",_t.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",_t.LICENSE_REQUEST_SENDING="public_licenseRequestSending",_t.NEED_KEY="needkey",_t.PROTECTION_CREATED="public_protectioncreated",_t.PROTECTION_DESTROYED="public_protectiondestroyed",_t.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",_t.TEARDOWN_COMPLETE="protectionTeardownComplete",_t.VIDEO_ELEMENT_SELECTED="videoElementSelected",_t.KEY_SESSION_UPDATED="public_keySessionUpdated",_t}return en}(I(8342).Z)),Xe=function nn(rn,$t){(function(Nt,en){if(!(Nt instanceof en))throw new TypeError("Cannot call a class as a function")})(this,nn),this.initData=rn,this.initDataType=$t},nt=function nn(rn,$t,Nt,en){(function(_t,pt){if(!(_t instanceof pt))throw new TypeError("Cannot call a class as a function")})(this,nn),this.sessionToken=rn,this.message=$t,this.defaultURL=Nt,this.messageType=en||"license-request"},Tt=function nn(rn,$t){(function(Nt,en){if(!(Nt instanceof en))throw new TypeError("Cannot call a class as a function")})(this,nn),this.keySystem=rn,this.ksConfiguration=$t};var bt={};function Ft(nn){nn=nn||{};var rn,$t,Nt,en,_t,pt,wt,Dt,Vt=this.context,Wt=nn.eventBus,fn=nn.events,ht=nn.debug;function jn(gn,En,Nn,pr){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var Or="Insecure origins are not allowed";return Wt.trigger(fn.KEY_SYSTEM_ACCESS_COMPLETE,{error:Or}),void pr({error:Or})}var ci=gn[En].protData&&gn[En].protData.systemStringPriority?gn[En].protData.systemStringPriority:null,di=gn[En].configs,Fi=gn[En].ks,Ni=Fi.systemString;(function(Ui,Ri){return new Promise(function(_i,ki){vn(Ui,Ri,0,_i,ki)})})(ci||(bt[Ni]?bt[Ni]:[Ni]),di).then(function(Ui){var Ri=typeof Ui.getConfiguration=="function"?Ui.getConfiguration():null,_i=new Tt(Fi,Ri);_i.mksa=Ui,Wt.trigger(fn.KEY_SYSTEM_ACCESS_COMPLETE,{data:_i}),Nn({data:_i})}).catch(function(Ui){if(En+1<gn.length)jn(gn,En+1,Nn,pr);else{var Ri="Key system access denied! ";Wt.trigger(fn.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ri+Ui.message}),pr({error:Ri+Ui.message})}})}function vn(gn,En,Nn,pr,Or){var ci=gn[Nn];$t.debug("Requesting key system access for system string ".concat(ci)),navigator.requestMediaKeySystemAccess(ci,En).then(function(di){di.selectedSystemString=ci,pr(di)}).catch(function(di){Nn+1<gn.length?vn(gn,En,Nn+1,pr,Or):Or(di)})}function fr(gn){var En=gn.session;return En.removeEventListener("keystatuseschange",gn),En.removeEventListener("message",gn),En.close()}function Sr(gn){for(var En=0;En<pt.length;En++)if(pt[En]===gn){pt.splice(En,1);break}}function Zr(gn){var En,Nn;return gn&&gn.length>0&&(gn[0]&&(typeof gn[0]=="string"?En=gn[0]:Nn=gn[0]),gn[1]&&(typeof gn[1]=="string"?En=gn[1]:Nn=gn[1])),{status:En,keyId:Nn}}function zn(gn,En){var Nn={session:gn,keyId:En.keyId,initData:En.initData,sessionId:En.sessionId,sessionType:En.sessionType,handleEvent:function(pr){switch(pr.type){case"keystatuseschange":Wt.trigger(fn.KEY_STATUSES_CHANGED,{data:this}),pr.target.keyStatuses.forEach(function(){var ci=Zr(arguments);ci.status==="expired"?Wt.trigger(fn.INTERNAL_KEY_STATUS_CHANGED,{error:new d.Z(g.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,g.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):Wt.trigger(fn.INTERNAL_KEY_STATUS_CHANGED,ci)});break;case"message":var Or=ArrayBuffer.isView(pr.message)?pr.message.buffer:pr.message;Wt.trigger(fn.INTERNAL_KEY_MESSAGE,{data:new nt(this,Or,void 0,pr.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return gn.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return gn.expiration},getKeyStatuses:function(){return gn.keyStatuses},getUsable:function(){var pr=!1;return gn.keyStatuses.forEach(function(){Zr(arguments).status==="usable"&&(pr=!0)}),pr}};return gn.addEventListener("keystatuseschange",Nn),gn.addEventListener("message",Nn),gn.closed.then(function(){Sr(Nn),$t.debug("DRM: Session closed.  SessionID = "+Nn.getSessionId()),Wt.trigger(fn.KEY_SESSION_CLOSED,{data:Nn.getSessionId()})}),pt.push(Nn),Nn}return rn={getAllInitData:function(){for(var gn=[],En=0;En<pt.length;En++)pt[En].initData&&gn.push(pt[En].initData);return gn},getSessions:function(){return pt},requestKeySystemAccess:function(gn){return new Promise(function(En,Nn){jn(gn,0,En,Nn)})},selectKeySystem:function(gn){return new Promise(function(En,Nn){gn.mksa.createMediaKeys().then(function(pr){return Nt=gn.keySystem,_t=pr,en?en.setMediaKeys(_t):Promise.resolve()}).then(function(){En(Nt)}).catch(function(){Nn({error:"Error selecting keys system ("+gn.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(gn){en!==gn&&(en&&(en.removeEventListener("encrypted",wt),en.setMediaKeys&&en.setMediaKeys(null)),(en=gn)&&(en.addEventListener("encrypted",wt),en.setMediaKeys&&_t&&en.setMediaKeys(_t)))},setServerCertificate:function(gn){if(!Nt||!_t)throw new Error("Can not set server certificate until you have selected a key system");_t.setServerCertificate(gn).then(function(){$t.info("DRM: License server certificate successfully updated."),Wt.trigger(fn.SERVER_CERTIFICATE_UPDATED)}).catch(function(En){Wt.trigger(fn.SERVER_CERTIFICATE_UPDATED,{error:new d.Z(g.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,g.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+En.name)})})},createKeySession:function(gn){if(!Nt||!_t)throw new Error("Can not create sessions until you have selected a key system");var En=_t.createSession(gn.sessionType),Nn=zn(En,gn),pr=Nt.systemString===k.CLEARKEY_KEYSTEM_STRING&&(gn.initData||gn.protData&&gn.protData.clearkeys)?k.INITIALIZATION_DATA_TYPE_KEYIDS:k.INITIALIZATION_DATA_TYPE_CENC;En.generateRequest(pr,gn.initData).then(function(){$t.debug("DRM: Session created.  SessionID = "+Nn.getSessionId()),Wt.trigger(fn.KEY_SESSION_CREATED,{data:Nn})}).catch(function(Or){Sr(Nn),Wt.trigger(fn.KEY_SESSION_CREATED,{data:null,error:new d.Z(g.KEY_SESSION_CREATED_ERROR_CODE,g.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+Or.name)})})},updateKeySession:function(gn,En){var Nn=gn.session;Dt.isClearKey(Nt)&&(En=En.toJWK()),Nn.update(En).then(function(){Wt.trigger(fn.KEY_SESSION_UPDATED)}).catch(function(pr){Wt.trigger(fn.KEY_ERROR,{error:new d.Z(g.MEDIA_KEYERR_CODE,"Error sending update() message! "+pr.name,gn)})})},loadKeySession:function(gn){if(!Nt||!_t)throw new Error("Can not load sessions until you have selected a key system");for(var En=gn.sessionId,Nn=0;Nn<pt.length;Nn++)if(En===pt[Nn].sessionId)return void $t.warn("DRM: Ignoring session ID because we have already seen it!");var pr=_t.createSession(gn.sessionType),Or=zn(pr,gn);pr.load(En).then(function(ci){ci?($t.debug("DRM: Session loaded.  SessionID = "+Or.getSessionId()),Wt.trigger(fn.KEY_SESSION_CREATED,{data:Or})):(Sr(Or),Wt.trigger(fn.KEY_SESSION_CREATED,{data:null,error:new d.Z(g.KEY_SESSION_CREATED_ERROR_CODE,g.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+En+")")}))}).catch(function(ci){Sr(Or),Wt.trigger(fn.KEY_SESSION_CREATED,{data:null,error:new d.Z(g.KEY_SESSION_CREATED_ERROR_CODE,g.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+En+")! "+ci.name)})})},removeKeySession:function(gn){gn.session.remove().then(function(){$t.debug("DRM: Session removed.  SessionID = "+gn.getSessionId()),Wt.trigger(fn.KEY_SESSION_REMOVED,{data:gn.getSessionId()})},function(En){Wt.trigger(fn.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+gn.getSessionId()+"). "+En.name})})},closeKeySession:function(gn){fr(gn).catch(function(En){Sr(gn),Wt.trigger(fn.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+gn.getSessionId()+") "+En.name})})},stop:function(){for(var gn,En=0;En<pt.length;En++)(gn=pt[En]).getUsable()||fr(gn).catch(function(){Sr(gn)})},reset:function(){var gn,En=pt.length;En!==0?function(){for(var Nn=function(Or){Sr(Or),pt.length===0&&(en?(en.removeEventListener("encrypted",wt),en.setMediaKeys(null).then(function(){Wt.trigger(fn.TEARDOWN_COMPLETE)})):Wt.trigger(fn.TEARDOWN_COMPLETE))},pr=0;pr<En;pr++)(function(Or){gn.session.closed.then(function(){Nn(Or)}),fr(gn).catch(function(){Nn(Or)})})(gn=pt[pr])}():Wt.trigger(fn.TEARDOWN_COMPLETE)}},$t=ht.getLogger(rn),Nt=null,en=null,_t=null,pt=[],Dt=Ke(Vt).getInstance(),wt={handleEvent:function(gn){if(gn.type==="encrypted"&&gn.initData){var En=ArrayBuffer.isView(gn.initData)?gn.initData.buffer:gn.initData;Wt.trigger(fn.NEED_KEY,{key:new Xe(En,gn.initDataType)})}}},rn}bt[k.PLAYREADY_KEYSTEM_STRING]=[k.PLAYREADY_KEYSTEM_STRING,k.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],bt[k.WIDEVINE_KEYSTEM_STRING]=[k.WIDEVINE_KEYSTEM_STRING],bt[k.CLEARKEY_KEYSTEM_STRING]=[k.CLEARKEY_KEYSTEM_STRING],Ft.__dashjs_factory_name="ProtectionModel_21Jan2015";const pn=dashjs.FactoryMaker.getClassFactory(Ft);function wn(nn){nn=nn||{};var rn,$t,Nt,en,_t,pt,wt,Dt,Vt,Wt=this.context,fn=nn.eventBus,ht=nn.events,jn=nn.debug,vn=nn.api;function fr(){try{for(var zn=0;zn<wt.length;zn++)Sr(wt[zn]);Nt&&Nt.removeEventListener(vn.needkey,Dt),fn.trigger(ht.TEARDOWN_COMPLETE)}catch(gn){fn.trigger(ht.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+gn.message})}}function Sr(zn){var gn=zn.session;gn.removeEventListener(vn.error,zn),gn.removeEventListener(vn.message,zn),gn.removeEventListener(vn.ready,zn),gn.removeEventListener(vn.close,zn);for(var En=0;En<wt.length;En++)if(wt[En]===zn){wt.splice(En,1);break}gn[vn.release]()}function Zr(){var zn=null,gn=function(){Nt.removeEventListener("loadedmetadata",zn),Nt[vn.setMediaKeys](_t),fn.trigger(ht.VIDEO_ELEMENT_SELECTED)};Nt.readyState>=1?gn():(zn=gn.bind(this),Nt.addEventListener("loadedmetadata",zn))}return rn={getAllInitData:function(){for(var zn=[],gn=0;gn<wt.length;gn++)zn.push(wt[gn].initData);return zn},getSessions:function(){return wt},requestKeySystemAccess:function(zn){return new Promise(function(gn,En){for(var Nn=!1,pr=0;pr<zn.length;pr++)for(var Or=zn[pr].ks.systemString,ci=zn[pr].configs,di=null,Fi=null,Ni=0;Ni<ci.length;Ni++){var Ui=ci[Ni].audioCapabilities,Ri=ci[Ni].videoCapabilities;if(Ui&&Ui.length!==0){di=[];for(var _i=0;_i<Ui.length;_i++)window[vn.MediaKeys].isTypeSupported(Or,Ui[_i].contentType)&&di.push(Ui[_i])}if(Ri&&Ri.length!==0){Fi=[];for(var ki=0;ki<Ri.length;ki++)window[vn.MediaKeys].isTypeSupported(Or,Ri[ki].contentType)&&Fi.push(Ri[ki])}if(!(!di&&!Fi||di&&di.length===0||Fi&&Fi.length===0)){Nn=!0;var Za=new c(di,Fi),Oa=Vt.getKeySystemBySystemString(Or),Bi=new Tt(Oa,Za);fn.trigger(ht.KEY_SYSTEM_ACCESS_COMPLETE,{data:Bi}),gn({data:Bi});break}}if(!Nn){var Tr="Key system access denied! -- No valid audio/video content configurations detected!";fn.trigger(ht.KEY_SYSTEM_ACCESS_COMPLETE,{error:Tr}),En({error:Tr})}})},selectKeySystem:function(zn){return new Promise(function(gn,En){try{_t=zn.mediaKeys=new window[vn.MediaKeys](zn.keySystem.systemString),en=zn.keySystem,pt=zn,Nt&&Zr(),gn(en)}catch{En({error:"Error selecting keys system ("+en.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(zn){Nt!==zn&&(Nt&&Nt.removeEventListener(vn.needkey,Dt),(Nt=zn)&&(Nt.addEventListener(vn.needkey,Dt),_t&&Zr()))},createKeySession:function(zn){if(!en||!_t||!pt)throw new Error("Can not create sessions until you have selected a key system");var gn=null;if(pt.ksConfiguration.videoCapabilities&&pt.ksConfiguration.videoCapabilities.length>0&&(gn=pt.ksConfiguration.videoCapabilities[0]),gn===null&&pt.ksConfiguration.audioCapabilities&&pt.ksConfiguration.audioCapabilities.length>0&&(gn=pt.ksConfiguration.audioCapabilities[0]),gn===null)throw new Error("Can not create sessions for unknown content types.");var En=gn.contentType,Nn=_t.createSession(En,new Uint8Array(zn.initData),zn.cdmData?new Uint8Array(zn.cdmData):null),pr=function(Or,ci){return{session:Or,keyId:ci.keyId,initData:ci.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(di){switch(di.type){case vn.error:fn.trigger(ht.KEY_ERROR,{error:new d.Z(g.MEDIA_KEYERR_CODE,"KeyError",this)});break;case vn.message:var Fi=ArrayBuffer.isView(di.message)?di.message.buffer:di.message;fn.trigger(ht.INTERNAL_KEY_MESSAGE,{data:new nt(this,Fi,di.destinationURL)});break;case vn.ready:$t.debug("DRM: Key added."),fn.trigger(ht.KEY_ADDED);break;case vn.close:$t.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),fn.trigger(ht.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(Nn,zn);Nn.addEventListener(vn.error,pr),Nn.addEventListener(vn.message,pr),Nn.addEventListener(vn.ready,pr),Nn.addEventListener(vn.close,pr),wt.push(pr),$t.debug("DRM: Session created.  SessionID = "+pr.getSessionId()),fn.trigger(ht.KEY_SESSION_CREATED,{data:pr})},updateKeySession:function(zn,gn){var En=zn.session;Vt.isClearKey(en)?En.update(new Uint8Array(gn.toJWK())):En.update(new Uint8Array(gn)),fn.trigger(ht.KEY_SESSION_UPDATED)},closeKeySession:Sr,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:fr,reset:fr},$t=jn.getLogger(rn),Nt=null,en=null,_t=null,pt=null,wt=[],Vt=Ke(Wt).getInstance(),Dt={handleEvent:function(zn){if(zn.type===vn.needkey&&zn.initData){var gn=ArrayBuffer.isView(zn.initData)?zn.initData.buffer:zn.initData;fn.trigger(ht.NEED_KEY,{key:new Xe(gn,"cenc")})}}},rn}wn.__dashjs_factory_name="ProtectionModel_3Feb2014";const hn=dashjs.FactoryMaker.getClassFactory(wn);function Xn(nn){nn=nn||{};var rn,$t,Nt,en,_t,pt,wt,Dt,Vt,Wt=this.context,fn=nn.eventBus,ht=nn.events,jn=nn.debug,vn=nn.api,fr=nn.errHandler;function Sr(){Nt&&gn();for(var En=0;En<wt.length;En++)Zr(wt[En]);fn.trigger(ht.TEARDOWN_COMPLETE)}function Zr(En){try{Nt[vn.cancelKeyRequest](en.systemString,En.sessionId)}catch(Nn){fn.trigger(ht.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+En.sessionId+") "+Nn.message})}}function zn(En,Nn){if(Nn&&En){for(var pr=En.length,Or=0;Or<pr;Or++)if(En[Or].sessionId==Nn)return En[Or];return null}return null}function gn(){Nt.removeEventListener(vn.keyerror,Vt),Nt.removeEventListener(vn.needkey,Vt),Nt.removeEventListener(vn.keymessage,Vt),Nt.removeEventListener(vn.keyadded,Vt)}return rn={getAllInitData:function(){for(var En=[],Nn=0;Nn<pt.length;Nn++)En.push(pt[Nn].initData);for(var pr=0;pr<wt.length;pr++)En.push(wt[pr].initData);return En},getSessions:function(){return wt.concat(pt)},requestKeySystemAccess:function(En){return new Promise(function(Nn,pr){var Or=Nt;Or||(Or=document.createElement("video"));for(var ci=!1,di=0;di<En.length;di++)for(var Fi=En[di].ks.systemString,Ni=En[di].configs,Ui=null,Ri=0;Ri<Ni.length;Ri++){var _i=Ni[Ri].videoCapabilities;if(_i&&_i.length!==0){Ui=[];for(var ki=0;ki<_i.length;ki++)Or.canPlayType(_i[ki].contentType,Fi)!==""&&Ui.push(_i[ki])}if(Ui&&(!Ui||Ui.length!==0)){ci=!0;var Za=new c(null,Ui),Oa=_t.getKeySystemBySystemString(Fi),Bi=new Tt(Oa,Za);fn.trigger(ht.KEY_SYSTEM_ACCESS_COMPLETE,{data:Bi}),Nn({data:Bi});break}}if(!ci){var Tr="Key system access denied! -- No valid audio/video content configurations detected!";fn.trigger(ht.KEY_SYSTEM_ACCESS_COMPLETE,{error:Tr}),pr({error:Tr})}})},selectKeySystem:function(En){return en=En.keySystem,Promise.resolve(en)},setMediaElement:function(En){if(Nt!==En){if(Nt){gn();for(var Nn=0;Nn<wt.length;Nn++)Zr(wt[Nn]);wt=[]}(Nt=En)&&(Nt.addEventListener(vn.keyerror,Vt),Nt.addEventListener(vn.needkey,Vt),Nt.addEventListener(vn.keymessage,Vt),Nt.addEventListener(vn.keyadded,Vt),fn.trigger(ht.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(En){if(!en)throw new Error("Can not create sessions until you have selected a key system");if(Dt||wt.length===0){var Nn={sessionId:null,keyId:En.keyId,initData:En.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return pt.push(Nn),Nt[vn.generateKeyRequest](en.systemString,new Uint8Array(En.initData)),Nn}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(En,Nn){var pr=En.sessionId;if(_t.isClearKey(en))for(var Or=0;Or<Nn.keyPairs.length;Or++)Nt[vn.addKey](en.systemString,Nn.keyPairs[Or].key,Nn.keyPairs[Or].keyID,pr);else Nt[vn.addKey](en.systemString,new Uint8Array(Nn),new Uint8Array(En.initData),pr);fn.trigger(ht.KEY_SESSION_UPDATED)},closeKeySession:Zr,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Sr,reset:Sr},$t=jn.getLogger(rn),Nt=null,en=null,pt=[],wt=[],_t=Ke(Wt).getInstance(),Vt={handleEvent:function(En){var Nn=null;switch(En.type){case vn.needkey:var pr=ArrayBuffer.isView(En.initData)?En.initData.buffer:En.initData;fn.trigger(ht.NEED_KEY,{key:new Xe(pr,"cenc")});break;case vn.keyerror:if((Nn=zn(wt,En.sessionId))||(Nn=zn(pt,En.sessionId)),Nn){var Or=g.MEDIA_KEYERR_CODE,ci="";switch(En.errorCode.code){case 1:Or=g.MEDIA_KEYERR_UNKNOWN_CODE,ci+="MEDIA_KEYERR_UNKNOWN - "+g.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:Or=g.MEDIA_KEYERR_CLIENT_CODE,ci+="MEDIA_KEYERR_CLIENT - "+g.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:Or=g.MEDIA_KEYERR_SERVICE_CODE,ci+="MEDIA_KEYERR_SERVICE - "+g.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:Or=g.MEDIA_KEYERR_OUTPUT_CODE,ci+="MEDIA_KEYERR_OUTPUT - "+g.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:Or=g.MEDIA_KEYERR_HARDWARECHANGE_CODE,ci+="MEDIA_KEYERR_HARDWARECHANGE - "+g.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:Or=g.MEDIA_KEYERR_DOMAIN_CODE,ci+="MEDIA_KEYERR_DOMAIN - "+g.MEDIA_KEYERR_DOMAIN_MESSAGE}ci+="  System Code = "+En.systemCode,fn.trigger(ht.KEY_ERROR,{error:new d.Z(Or,ci,Nn)})}else $t.error("No session token found for key error");break;case vn.keyadded:(Nn=zn(wt,En.sessionId))||(Nn=zn(pt,En.sessionId)),Nn?($t.debug("DRM: Key added."),fn.trigger(ht.KEY_ADDED,{data:Nn})):$t.debug("No session token found for key added");break;case vn.keymessage:if((Dt=En.sessionId!==null&&En.sessionId!==void 0)?!(Nn=zn(wt,En.sessionId))&&pt.length>0&&(Nn=pt.shift(),wt.push(Nn),Nn.sessionId=En.sessionId,fn.trigger(ht.KEY_SESSION_CREATED,{data:Nn})):pt.length>0&&(Nn=pt.shift(),wt.push(Nn),pt.length!==0&&fr.error(new d.Z(g.MEDIA_KEY_MESSAGE_ERROR_CODE,g.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),Nn){var di=ArrayBuffer.isView(En.message)?En.message.buffer:En.message;Nn.keyMessage=di,fn.trigger(ht.INTERNAL_KEY_MESSAGE,{data:new nt(Nn,di,En.defaultURL)})}else $t.warn("No session token found for key message")}}},rn}Xn.__dashjs_factory_name="ProtectionModel_01b";const on=dashjs.FactoryMaker.getClassFactory(Xn);var Zn=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],Bn=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Rr(){var nn,rn=this.context;function $t(Nt,en){for(var _t=0;_t<en.length;_t++){var pt=en[_t];if(typeof Nt[pt[Object.keys(pt)[0]]]=="function")return pt}return null}return nn={createProtectionSystem:function(Nt){var en=null,_t=Ke(rn).getInstance();_t.setConfig({debug:Nt.debug,BASE64:Nt.BASE64,settings:Nt.settings}),_t.initialize();var pt=function(wt){var Dt=wt.debug,Vt=Dt.getLogger(nn),Wt=wt.eventBus,fn=wt.errHandler,ht=wt.videoModel?wt.videoModel.getElement():null;return ht&&ht.onencrypted===void 0||ht&&ht.mediaKeys===void 0?$t(ht,Bn)?(Vt.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),hn(rn).create({debug:Dt,eventBus:Wt,events:wt.events,api:$t(ht,Bn)})):$t(ht,Zn)?(Vt.info("EME detected on this user agent! (ProtectionModel_01b)"),on(rn).create({debug:Dt,eventBus:Wt,errHandler:fn,events:wt.events,api:$t(ht,Zn)})):(Vt.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Vt.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),pn(rn).create({debug:Dt,eventBus:Wt,events:wt.events}))}(Nt);return!en&&pt&&(en=f(rn).create({protectionModel:pt,protectionKeyController:_t,eventBus:Nt.eventBus,debug:Nt.debug,events:Nt.events,BASE64:Nt.BASE64,constants:Nt.constants,cmcdModel:Nt.cmcdModel,customParametersModel:Nt.customParametersModel,settings:Nt.settings}),Nt.capabilities.setEncryptedMediaSupported(!0)),en}}}Rr.__dashjs_factory_name="Protection";var Nr=dashjs.FactoryMaker.getClassFactory(Rr);Nr.events=Je,Nr.errors=g,dashjs.FactoryMaker.updateClassFactory(Rr.__dashjs_factory_name,Nr);const Ir=Nr},2068:(C,R,I)=>{I.d(R,{Z:()=>h});var E=I(5448),T={DEFAULT:.5,STRONG:1,WEAK:0};function l(y,i,g){var d,r;return d=y===void 0?-1:y,r=function(t){var u=T.DEFAULT;return t!==T.DEFAULT&&t!==T.STRONG&&t!==T.WEAK||(u=t),u}(g),{quality:d,reason:i===void 0?null:i,priority:r}}l.__dashjs_factory_name="SwitchRequest";var c=E.Z.getClassFactory(l);c.NO_CHANGE=-1,c.PRIORITY=T,E.Z.updateClassFactory(l.__dashjs_factory_name,c);const h=c},1767:(C,R,I)=>{I.d(R,{Z:()=>_});var E=I(5628),T=I(6535),l=I(7423),c=I(895),h=I(6070),y=I(3112),i=I(1914),g=I(5435),d=I(5448),r=I(2068),t=I(3393),u="qualitySwitchRules",m="abandonFragmentRules";function S(v){v=v||{};var f,b,p=this.context,k=v.mediaPlayerModel,P=v.customParametersModel,j=v.dashMetrics,U=v.settings;function G(ne){return ne.filter(function(re){return re.quality>r.Z.NO_CHANGE})}function ee(ne){var re,oe,W,Te,Ue,ze={},le=null;if(ne.length!==0){for(ze[r.Z.PRIORITY.STRONG]={quality:r.Z.NO_CHANGE,reason:null},ze[r.Z.PRIORITY.WEAK]={quality:r.Z.NO_CHANGE,reason:null},ze[r.Z.PRIORITY.DEFAULT]={quality:r.Z.NO_CHANGE,reason:null},re=0,oe=ne.length;re<oe;re+=1)(W=ne[re]).quality!==r.Z.NO_CHANGE&&(ze[W.priority].quality===r.Z.NO_CHANGE||ze[W.priority].quality>W.quality)&&(ze[W.priority].quality=W.quality,ze[W.priority].reason=W.reason||null);return ze[r.Z.PRIORITY.WEAK].quality!==r.Z.NO_CHANGE&&(le=ze[r.Z.PRIORITY.WEAK]),ze[r.Z.PRIORITY.DEFAULT].quality!==r.Z.NO_CHANGE&&(le=ze[r.Z.PRIORITY.DEFAULT]),ze[r.Z.PRIORITY.STRONG].quality!==r.Z.NO_CHANGE&&(le=ze[r.Z.PRIORITY.STRONG]),le&&(Te=le.quality,Ue=le.reason),(0,r.Z)(p).create(Te,Ue)}}return{initialize:function(){f=[],b=[],U.get().streaming.abr.useDefaultABRRules&&(U.get().streaming.abr.ABRStrategy===t.Z.ABR_STRATEGY_L2A?f.push((0,i.Z)(p).create({dashMetrics:j,settings:U})):U.get().streaming.abr.ABRStrategy===t.Z.ABR_STRATEGY_LoLP?f.push((0,g.Z)(p).create({dashMetrics:j})):(f.push((0,y.Z)(p).create({dashMetrics:j,mediaPlayerModel:k,settings:U})),f.push((0,E.Z)(p).create({dashMetrics:j})),U.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&f.push((0,T.Z)(p).create({dashMetrics:j,settings:U})),U.get().streaming.abr.additionalAbrRules.switchHistoryRule&&f.push((0,h.Z)(p).create()),U.get().streaming.abr.additionalAbrRules.droppedFramesRule&&f.push((0,c.Z)(p).create()),U.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&b.push((0,l.Z)(p).create({dashMetrics:j,mediaPlayerModel:k,settings:U})))),P.getAbrCustomRules().forEach(function(ne){ne.type===u&&f.push(ne.rule(p).create()),ne.type===m&&b.push(ne.rule(p).create())})},reset:function(){[f,b].forEach(function(ne){ne&&ne.length&&ne.forEach(function(re){return re.reset&&re.reset()})}),f=[],b=[]},getMaxQuality:function(ne){return ee(G(f.map(function(re){return re.getMaxIndex(ne)})))||(0,r.Z)(p).create()},getMinSwitchRequest:ee,shouldAbandonFragment:function(ne,re){return ee(G(b.map(function(oe){return oe.shouldAbandon(ne,re)})))||(0,r.Z)(p).create()},getQualitySwitchRules:function(){return f}}}S.__dashjs_factory_name="ABRRulesCollection";var A=d.Z.getClassFactory(S);A.QUALITY_SWITCH_RULES=u,A.ABANDON_FRAGMENT_RULES=m,d.Z.updateSingletonFactory(S.__dashjs_factory_name,A);const _=A},7423:(C,R,I)=>{I.d(R,{Z:()=>h});var E=I(2068),T=I(5448),l=I(6398);function c(y){y=y||{};var i,g,d,r,t,u=this.context,m=y.mediaPlayerModel,S=y.dashMetrics,A=y.settings;function _(){d={},r={},t=[]}return i={shouldAbandon:function(v){var f=(0,E.Z)(u).create(E.Z.NO_CHANGE,{name:c.__dashjs_factory_name});if(!(v&&v.hasOwnProperty("getMediaInfo")&&v.hasOwnProperty("getMediaType")&&v.hasOwnProperty("getCurrentRequest")&&v.hasOwnProperty("getRepresentationInfo")&&v.hasOwnProperty("getAbrController")))return f;var b,p,k=v.getMediaInfo(),P=v.getMediaType(),j=v.getStreamInfo(),U=j?j.id:null,G=v.getCurrentRequest();if(!isNaN(G.index)){b=P,p=G.index,d[b]=d[b]||{},d[b][p]=d[b][p]||{};var ee=m.getStableBufferTime();if(S.getCurrentBufferLevel(P)>ee)return f;var ne=d[P][G.index];if(ne===null||G.firstByteDate===null||r.hasOwnProperty(ne.id))return f;if(ne.firstByteTime===void 0&&(t[P]=[],ne.firstByteTime=G.firstByteDate.getTime(),ne.segmentDuration=G.duration,ne.bytesTotal=G.bytesTotal,ne.id=G.index),ne.bytesLoaded=G.bytesLoaded,ne.elapsedTime=new Date().getTime()-ne.firstByteTime,ne.bytesLoaded>0&&ne.elapsedTime>0&&function(Se,be){t[Se]=t[Se]||[],t[Se].push(be)}(P,Math.round(8*ne.bytesLoaded/ne.elapsedTime)),t[P].length>=5&&ne.elapsedTime>500&&ne.bytesLoaded<ne.bytesTotal){var re=t[P].reduce(function(Se,be){return Se+be},0);if(ne.measuredBandwidthInKbps=Math.round(re/t[P].length),ne.estimatedTimeOfDownload=+(8*ne.bytesTotal/ne.measuredBandwidthInKbps/1e3).toFixed(2),ne.estimatedTimeOfDownload<1.8*ne.segmentDuration||v.getRepresentationInfo().quality===0)return f;if(!r.hasOwnProperty(ne.id)){var oe=v.getAbrController(),W=ne.bytesTotal-ne.bytesLoaded,Te=oe.getBitrateList(k),Ue=oe.getQualityForBitrate(k,ne.measuredBandwidthInKbps*A.get().streaming.abr.bandwidthSafetyFactor,U),ze=oe.getMinAllowedIndexFor(P,U),le=ze!==void 0?Math.max(ze,Ue):Ue;W>ne.bytesTotal*Te[le].bitrate/Te[oe.getQualityFor(P,U)].bitrate&&(f.quality=le,f.reason.throughput=ne.measuredBandwidthInKbps,f.reason.fragmentID=ne.id,f.reason.rule=this.getClassName(),r[ne.id]=ne,g.debug("["+P+"] frag id",ne.id," is asking to abandon and switch to quality to ",le," measured bandwidth was",ne.measuredBandwidthInKbps),delete d[P][ne.id])}}else ne.bytesLoaded===ne.bytesTotal&&delete d[P][ne.id]}return f},reset:_},g=(0,l.Z)(u).getInstance().getLogger(i),_(),i}c.__dashjs_factory_name="AbandonRequestsRule";const h=T.Z.getClassFactory(c)},3112:(C,R,I)=>{I.d(R,{Z:()=>u});var E=I(3860),T=I(2068),l=I(5448),c=I(7855),h=I(5595),y=I(8512),i=I(6398),g=I(8825),d=I(3393),r=10;function t(m){m=m||{};var S,A,_,v=this.context,f=m.dashMetrics,b=m.mediaPlayerModel,p=(0,h.Z)(v).getInstance();function k(le,Se,be){var Y=be.reduce(function(fe,Ce,V){return Ce>be[fe]?V:fe},0);if(Y===0)return null;var Q=Math.max(le,r+2*Se.length),J=(be[Y]-1)/(Q/r-1);return{gp:J,Vp:r/J}}function P(le){le.placeholderBuffer=0,le.mostAdvancedSegmentStart=NaN,le.lastSegmentWasReplacement=!1,le.lastSegmentStart=NaN,le.lastSegmentDurationS=NaN,le.lastSegmentRequestTimeMs=NaN,le.lastSegmentFinishTimeMs=NaN}function j(le,Se){var be=b.getStableBufferTime();if(le.stableBufferTime!==be){var Y=k(be,le.bitrates,le.utilities);if(Y.Vp!==le.Vp||Y.gp!==le.gp){var Q=f.getCurrentBufferLevel(Se),J=Q+le.placeholderBuffer;J-=r,J*=Y.Vp/le.Vp,J+=r,le.stableBufferTime=be,le.Vp=Y.Vp,le.gp=Y.gp,le.placeholderBuffer=Math.max(0,J-Q)}}}function U(le,Se){return le.Vp*(le.utilities[Se]+le.gp)}function G(le,Se){for(var be=le.bitrates[Se],Y=le.utilities[Se],Q=0,J=Se-1;J>=0;--J)if(le.utilities[J]<le.utilities[Se]){var fe=le.bitrates[J],Ce=le.utilities[J],V=le.Vp*(le.gp+(be*Ce-fe*Y)/(be-fe));Q=Math.max(Q,V)}return Q}function ee(le){var Se=le.mediaType===d.Z.AUDIO?[d.Z.AUDIO]:_;for(var be in Se)_.hasOwnProperty(be)&&_[be].state===2&&(_[be].placeholderBuffer=0)}function ne(){for(var le in _)if(_.hasOwnProperty(le)){var Se=_[le];Se.state!==0&&(Se.state=1,P(Se))}}function re(le){if(le&&le.chunk&&le.chunk.mediaInfo){var Se=_[le.chunk.mediaInfo.type];if(Se&&Se.state!==0){var be=le.chunk.start;isNaN(Se.mostAdvancedSegmentStart)||be>Se.mostAdvancedSegmentStart?(Se.mostAdvancedSegmentStart=be,Se.lastSegmentWasReplacement=!1):Se.lastSegmentWasReplacement=!0,Se.lastSegmentStart=be,Se.lastSegmentDurationS=le.chunk.duration,Se.lastQuality=le.chunk.quality,W(Se,le.chunk.mediaInfo.type)}}}function oe(le){if(le&&le.metric===E.Z.HTTP_REQUEST&&le.value&&le.value.type===c.w.MEDIA_SEGMENT_TYPE&&le.value.trace&&le.value.trace.length){var Se=_[le.mediaType];Se&&Se.state!==0&&(Se.lastSegmentRequestTimeMs=le.value.trequest.getTime(),Se.lastSegmentFinishTimeMs=le.value._tfinish.getTime(),W(Se,le.mediaType))}}function W(le,Se){if(!isNaN(le.lastSegmentStart)&&!isNaN(le.lastSegmentRequestTimeMs)&&!isNaN(le.placeholderBuffer)){if(le.placeholderBuffer*=.99,!isNaN(le.lastSegmentFinishTimeMs)){var be=f.getCurrentBufferLevel(Se)+.001*(le.lastSegmentFinishTimeMs-le.lastSegmentRequestTimeMs),Y=U(le,le.lastQuality),Q=Math.max(0,Y-be);le.placeholderBuffer=Math.min(Q,le.placeholderBuffer)}le.lastSegmentWasReplacement&&!isNaN(le.lastSegmentDurationS)&&(le.placeholderBuffer+=le.lastSegmentDurationS),le.lastSegmentStart=NaN,le.lastSegmentRequestTimeMs=NaN}}function Te(le){if(le){var Se=_[le.mediaType];Se&&Se.state!==0&&(Se.abrQuality=le.newQuality)}}function Ue(le){if(le){var Se=_[le.mediaType];if(Se&&Se.state!==0){var be,Y=f.getCurrentBufferLevel(le.mediaType);be=Se.abrQuality>0?G(Se,Se.abrQuality):r;var Q=Math.max(0,be-Y);Se.placeholderBuffer=Math.min(Se.placeholderBuffer,Q)}}}function ze(){_={}}return S={getMaxIndex:function(le){var Se=(0,T.Z)(v).create();if(!(le&&le.hasOwnProperty("getMediaInfo")&&le.hasOwnProperty("getMediaType")&&le.hasOwnProperty("getScheduleController")&&le.hasOwnProperty("getStreamInfo")&&le.hasOwnProperty("getAbrController")&&le.hasOwnProperty("useBufferOccupancyABR")))return Se;var be=le.getMediaInfo(),Y=le.getMediaType(),Q=le.getScheduleController(),J=le.getStreamInfo(),fe=le.getAbrController(),Ce=fe.getThroughputHistory(),V=J?J.id:null,H=J&&J.manifestInfo&&J.manifestInfo.isDynamic,z=le.useBufferOccupancyABR();if(Se.reason=Se.reason||{},!z)return Se;Q.setTimeToLoadDelay(0);var X=function(me){var ke=me.getMediaType(),Je=_[ke];return Je?Je.state!==0&&j(Je,ke):(Je=function(Xe){var nt={},Tt=Xe.getMediaInfo().bitrateList.map(function(wn){return wn.bandwidth}),bt=function(wn){return wn.map(function(hn){return Math.log(hn)})}(Tt);bt=bt.map(function(wn){return wn-bt[0]+1});var Ft=b.getStableBufferTime(),pn=k(Ft,Tt,bt);return pn?(nt.state=1,nt.bitrates=Tt,nt.utilities=bt,nt.stableBufferTime=Ft,nt.Vp=pn.Vp,nt.gp=pn.gp,nt.lastQuality=0,P(nt)):nt.state=0,nt}(me),_[ke]=Je),Je}(le);if(X.state===0)return Se;var de,ge=f.getCurrentBufferLevel(Y),Ge=Ce.getAverageThroughput(Y,H),it=Ce.getSafeAverageThroughput(Y,H),Ye=Ce.getAverageLatency(Y);if(Se.reason.state=X.state,Se.reason.throughput=Ge,Se.reason.latency=Ye,isNaN(Ge))return Se;switch(X.state){case 1:de=fe.getQualityForBitrate(be,it,V,Ye),Se.quality=de,Se.reason.throughput=it,X.placeholderBuffer=Math.max(0,G(X,de)-ge),X.lastQuality=de,!isNaN(X.lastSegmentDurationS)&&ge>=X.lastSegmentDurationS&&(X.state=2);break;case 2:(function(me,ke){var Je=Date.now();if(isNaN(me.lastSegmentFinishTimeMs)){if(!isNaN(me.lastCallTimeMs)){var Xe=.001*(Je-me.lastCallTimeMs);me.placeholderBuffer+=Math.max(0,Xe)}}else{var nt=.001*(Je-me.lastSegmentFinishTimeMs);me.placeholderBuffer+=Math.max(0,nt)}me.lastCallTimeMs=Je,me.lastSegmentStart=NaN,me.lastSegmentRequestTimeMs=NaN,me.lastSegmentFinishTimeMs=NaN,j(me,ke)})(X,Y),de=function(me,ke){for(var Je=me.bitrates.length,Xe=NaN,nt=NaN,Tt=0;Tt<Je;++Tt){var bt=(me.Vp*(me.utilities[Tt]+me.gp)-ke)/me.bitrates[Tt];(isNaN(nt)||bt>=nt)&&(nt=bt,Xe=Tt)}return Xe}(X,ge+X.placeholderBuffer);var Ke=fe.getQualityForBitrate(be,it,V,Ye);de>X.lastQuality&&de>Ke&&(de=Math.max(Ke,X.lastQuality));var dt=Math.max(0,ge+X.placeholderBuffer-U(X,de));dt<=X.placeholderBuffer?(X.placeholderBuffer-=dt,dt=0):(dt-=X.placeholderBuffer,X.placeholderBuffer=0,de<fe.getMaxAllowedIndexFor(Y,V)?Q.setTimeToLoadDelay(1e3*dt):dt=0),Se.quality=de,Se.reason.throughput=Ge,Se.reason.latency=Ye,Se.reason.bufferLevel=ge,Se.reason.placeholderBuffer=X.placeholderBuffer,Se.reason.delay=dt,X.lastQuality=de;break;default:A.debug("BOLA ABR rule invoked in bad state."),Se.quality=fe.getQualityForBitrate(be,it,V,Ye),Se.reason.state=X.state,Se.reason.throughput=it,Se.reason.latency=Ye,X.state=1,P(X)}return Se},reset:function(){ze(),p.off(g.Z.BUFFER_EMPTY,ee,S),p.off(g.Z.PLAYBACK_SEEKING,ne,S),p.off(g.Z.METRIC_ADDED,oe,S),p.off(g.Z.QUALITY_CHANGE_REQUESTED,Te,S),p.off(g.Z.FRAGMENT_LOADING_ABANDONED,Ue,S),p.off(y.Z.MEDIA_FRAGMENT_LOADED,re,S)}},A=(0,i.Z)(v).getInstance().getLogger(S),ze(),p.on(g.Z.BUFFER_EMPTY,ee,S),p.on(g.Z.PLAYBACK_SEEKING,ne,S),p.on(g.Z.METRIC_ADDED,oe,S),p.on(g.Z.QUALITY_CHANGE_REQUESTED,Te,S),p.on(g.Z.FRAGMENT_LOADING_ABANDONED,Ue,S),p.on(y.Z.MEDIA_FRAGMENT_LOADED,re,S),S}t.__dashjs_factory_name="BolaRule";const u=l.Z.getClassFactory(t)},895:(C,R,I)=>{I.d(R,{Z:()=>h});var E=I(5448),T=I(2068),l=I(6398);function c(){var y,i,g=this.context;return y={getMaxIndex:function(d){var r=(0,T.Z)(g).create();if(!d||!d.hasOwnProperty("getDroppedFramesHistory"))return r;var t=d.getDroppedFramesHistory(),u=d.getStreamInfo().id;if(t){var m=t.getFrameHistory(u);if(!m||m.length===0)return r;for(var S=0,A=0,_=T.Z.NO_CHANGE,v=1;v<m.length;v++)if(m[v]&&(S=m[v].droppedVideoFrames,(A=m[v].totalVideoFrames)>375&&S/A>.15)){_=v-1,i.debug("index: "+_+" Dropped Frames: "+S+" Total Frames: "+A);break}return(0,T.Z)(g).create(_,{droppedFrames:S})}return r}},i=(0,l.Z)(g).getInstance().getLogger(y),y}c.__dashjs_factory_name="DroppedFramesRule";const h=E.Z.getClassFactory(c)},6535:(C,R,I)=>{I.d(R,{Z:()=>r});var E=I(5595),T=I(8512),l=I(5448),c=I(6398),h=I(2068),y=I(3393),i=I(3860),g=I(8825);function d(t){t=t||{};var u,m,S,A=this.context,_=(0,E.Z)(A).getInstance(),v=t.dashMetrics;function f(){(S={})[y.Z.VIDEO]={ignoreCount:2},S[y.Z.AUDIO]={ignoreCount:2}}function b(){f()}function p(k){isNaN(k.startTime)||k.mediaType!==y.Z.AUDIO&&k.mediaType!==y.Z.VIDEO||S[k.mediaType].ignoreCount>0&&S[k.mediaType].ignoreCount--}return u={getMaxIndex:function(k){var P=(0,h.Z)(A).create();if(!k||!k.hasOwnProperty("getMediaType"))return P;(function(){if(!v||!v.hasOwnProperty("getCurrentBufferLevel")||!v.hasOwnProperty("getCurrentBufferState"))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var j=k.getMediaType(),U=v.getCurrentBufferState(j),G=k.getRepresentationInfo().fragmentDuration,ee=k.getStreamInfo(),ne=ee?ee.id:null,re=k.getScheduleController(),oe=ee&&ee.manifestInfo&&ee.manifestInfo.isDynamic;if(function(Y,Q){return!Y&&S[Q].ignoreCount>0}(re.getPlaybackController().getLowLatencyModeEnabled(),j)||!G)return P;if(U&&U.state===i.Z.BUFFER_EMPTY)m.debug("["+j+"] Switch to index 0; buffer is empty."),P.quality=0,P.reason="InsufficientBufferRule: Buffer is empty";else{var W=k.getMediaInfo(),Te=k.getAbrController(),Ue=Te.getThroughputHistory(),ze=v.getCurrentBufferLevel(j),le=Ue.getAverageThroughput(j,oe),Se=Ue.getAverageLatency(j),be=le*(ze/G)*.5;P.quality=Te.getQualityForBitrate(W,be,ne,Se),P.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return P},reset:function(){f(),_.off(g.Z.PLAYBACK_SEEKING,b,u),_.off(T.Z.BYTES_APPENDED_END_FRAGMENT,p,u)}},m=(0,c.Z)(A).getInstance().getLogger(u),f(),_.on(g.Z.PLAYBACK_SEEKING,b,u),_.on(T.Z.BYTES_APPENDED_END_FRAGMENT,p,u),u}d.__dashjs_factory_name="InsufficientBufferRule";const r=l.Z.getClassFactory(d)},1914:(C,R,I)=>{I.d(R,{Z:()=>r});var E=I(3860),T=I(2068),l=I(5448),c=I(7855),h=I(5595),y=I(8512),i=I(6398),g=I(3393);function d(t){t=t||{};var u,m,S,A,_=this.context,v=t.dashMetrics,f=(0,h.Z)(_).getInstance();function b(ne){ne.placeholderBuffer=0,ne.mostAdvancedSegmentStart=NaN,ne.lastSegmentWasReplacement=!1,ne.lastSegmentStart=NaN,ne.lastSegmentDurationS=NaN,ne.lastSegmentRequestTimeMs=NaN,ne.lastSegmentFinishTimeMs=NaN}function p(){for(var ne in m)if(m.hasOwnProperty(ne)){var re=m[ne];re.state!==0&&(re.state=1,b(re))}}function k(ne){if(ne&&ne.chunk&&ne.chunk.mediaInfo){var re=m[ne.chunk.mediaInfo.type],oe=S[ne.chunk.mediaInfo.type];if(re&&re.state!==0){var W=ne.chunk.start;isNaN(re.mostAdvancedSegmentStart)||W>re.mostAdvancedSegmentStart?(re.mostAdvancedSegmentStart=W,re.lastSegmentWasReplacement=!1):re.lastSegmentWasReplacement=!0,re.lastSegmentStart=W,re.lastSegmentDurationS=ne.chunk.duration,re.lastQuality=ne.chunk.quality,j(re,oe)}}}function P(ne){if(ne&&ne.metric===E.Z.HTTP_REQUEST&&ne.value&&ne.value.type===c.w.MEDIA_SEGMENT_TYPE&&ne.value.trace&&ne.value.trace.length){var re=m[ne.mediaType],oe=S[ne.mediaType];re&&re.state!==0&&(re.lastSegmentRequestTimeMs=ne.value.trequest.getTime(),re.lastSegmentFinishTimeMs=ne.value._tfinish.getTime(),j(re,oe))}}function j(ne,re){isNaN(ne.lastSegmentStart)||isNaN(ne.lastSegmentRequestTimeMs)||(re.segment_request_start_s=.001*ne.lastSegmentRequestTimeMs,re.segment_download_finish_s=.001*ne.lastSegmentFinishTimeMs,ne.lastSegmentStart=NaN,ne.lastSegmentRequestTimeMs=NaN)}function U(ne){if(ne&&ne.mediaType){var re=m[ne.mediaType];re&&re.state!==0&&(re.abrQuality=ne.newQuality)}}function G(ne,re){if(ne.length!==re.length)return-1;for(var oe=0,W=0;W<ne.length;W++)oe+=ne[W]*re[W];return oe}function ee(){m={},S={}}return u={getMaxIndex:function(ne){var re,oe=(0,T.Z)(_).create(),W=Math.pow(4,.99),Te=Math.max(Math.pow(4,1),W*Math.sqrt(4)),Ue=ne.getMediaInfo(),ze=ne.getMediaType(),le=Ue.bitrateList.map(function(Ft){return Ft.bandwidth}),Se=le.length,be=ne.getScheduleController(),Y=ne.getStreamInfo(),Q=ne.getAbrController(),J=Q.getThroughputHistory(),fe=Y&&Y.manifestInfo&&Y.manifestInfo.isDynamic,Ce=ne.useL2AABR(),V=v.getCurrentBufferLevel(ze,!0),H=J.getSafeAverageThroughput(ze,fe),z=J.getAverageThroughput(ze,fe),X=J.getAverageLatency(ze),de=ne.getVideoModel().getPlaybackRate();if(!(ne&&ne.hasOwnProperty("getMediaInfo")&&ne.hasOwnProperty("getMediaType")&&ne.hasOwnProperty("getScheduleController")&&ne.hasOwnProperty("getStreamInfo")&&ne.hasOwnProperty("getAbrController")&&ne.hasOwnProperty("useL2AABR"))||(oe.reason=oe.reason||{},!Ce||ze===g.Z.AUDIO))return oe;be.setTimeToLoadDelay(0);var ge=function(Ft){var pn=Ft.getMediaType(),wn=m[pn];return wn||(wn=function(hn){var Xn={},on=hn.getMediaInfo(),Zn=on.bitrateList.map(function(Bn){return Bn.bandwidth/1e3});return Xn.state=1,Xn.bitrates=Zn,Xn.lastQuality=0,function(Bn){Bn&&Bn.type&&(S[Bn.type]={},S[Bn.type].w=[],S[Bn.type].prev_w=[],S[Bn.type].Q=0,S[Bn.type].segment_request_start_s=0,S[Bn.type].segment_download_finish_s=0,S[Bn.type].B_target=1.5)}(on),b(Xn),Xn}(Ft),m[pn]=wn),wn}(ne);if(ge.state===0)return oe;var Ge=S[ze];if(!Ge||(oe.reason.state=ge.state,oe.reason.throughput=z,oe.reason.latency=X,isNaN(z)))return oe;switch(ge.state){case 1:if(re=Q.getQualityForBitrate(Ue,H,Y.id,X),oe.quality=re,oe.reason.throughput=H,ge.lastQuality=re,!isNaN(ge.lastSegmentDurationS)&&V>=Ge.B_target){ge.state=2,Ge.Q=W;for(var it=0;it<Se;++it)it===ge.lastQuality?Ge.prev_w[it]=1:Ge.prev_w[it]=0}break;case 2:var Ye=[],Ke=v.getCurrentHttpRequest(ze).trace.reduce(function(Ft,pn){return Ft+pn.d},0),dt=v.getCurrentHttpRequest(ze).trace.reduce(function(Ft,pn){return Ft+pn.b[0]},0),me=Math.round(8*dt/Ke);me<1&&(me=1);for(var ke=ge.lastSegmentDurationS,Je=1,Xe=0;Xe<Se;++Xe)le[Xe]=le[Xe]/1e3,de*le[Xe]>me&&(Je=-1),Ge.w[Xe]=Ge.prev_w[Xe]+Je*(ke/(2*Te))*((Ge.Q+W)*(de*le[Xe]/me));Ge.w=function(Ft){for(var pn=Ft.length,wn=!1,hn=[],Xn=0;Xn<pn;++Xn)hn[Xn]=Ft[Xn];for(var on=Ft.sort(function(nn,rn){return rn-nn}),Zn=0,Bn=0,Rr=[],Nr=0;Nr<pn-1;++Nr)if((Bn=((Zn+=on[Nr])-1)/(Nr+1))>=on[Nr+1]){wn=!0;break}wn||(Bn=(Zn+on[pn-1]-1)/pn);for(var Ir=0;Ir<pn;++Ir)Rr[Ir]=Math.max(hn[Ir]-Bn,0);return Rr}(Ge.w);for(var nt=0;nt<Se;++nt)Ye[nt]=Ge.w[nt]-Ge.prev_w[nt],Ge.prev_w[nt]=Ge.w[nt];Ge.Q=Math.max(0,Ge.Q-ke+ke*de*((G(le,Ge.prev_w)+G(le,Ye))/me));for(var Tt=[],bt=0;bt<Se;++bt)Tt[bt]=Math.abs(le[bt]-G(Ge.w,le));(re=Tt.indexOf(Math.min.apply(Math,Tt)))>ge.lastQuality&&le[ge.lastQuality+1]<=me&&(re=ge.lastQuality+1),le[re]>=me&&(Ge.Q=2*Math.max(W,Ge.Q)),oe.quality=re,oe.reason.throughput=z,oe.reason.latency=X,oe.reason.bufferLevel=V,ge.lastQuality=oe.quality;break;default:A.debug("L2A ABR rule invoked in bad state."),oe.quality=Q.getQualityForBitrate(Ue,H,Y.id,X),oe.reason.state=ge.state,oe.reason.throughput=H,oe.reason.latency=X,ge.state=1,b(ge)}return oe},reset:function(){ee(),f.off(y.Z.PLAYBACK_SEEKING,p,u),f.off(y.Z.MEDIA_FRAGMENT_LOADED,k,u),f.off(y.Z.METRIC_ADDED,P,u),f.off(y.Z.QUALITY_CHANGE_REQUESTED,U,u)}},A=(0,i.Z)(_).getInstance().getLogger(u),ee(),f.on(y.Z.PLAYBACK_SEEKING,p,u),f.on(y.Z.MEDIA_FRAGMENT_LOADED,k,u),f.on(y.Z.METRIC_ADDED,P,u),f.on(y.Z.QUALITY_CHANGE_REQUESTED,U,u),u}d.__dashjs_factory_name="L2ARule";const r=l.Z.getClassFactory(d)},6070:(C,R,I)=>{I.d(R,{Z:()=>h});var E=I(5448),T=I(6398),l=I(2068);function c(){var y,i,g=this.context;return y={getMaxIndex:function(d){for(var r=d?d.getSwitchHistory():null,t=r?r.getSwitchRequests():[],u=0,m=0,S=0,A=(0,l.Z)(g).create(),_=0;_<t.length;_++)if(t[_]!==void 0&&(u+=t[_].drops,m+=t[_].noDrops,S+=t[_].dropSize,u+m>=6&&u/m>.075)){A.quality=_>0&&t[_].drops>0?_-1:_,A.reason={index:A.quality,drops:u,noDrops:m,dropSize:S},i.debug("Switch history rule index: "+A.quality+" samples: "+(u+m)+" drops: "+u);break}return A}},i=(0,T.Z)(g).getInstance().getLogger(y),y}c.__dashjs_factory_name="SwitchHistoryRule";const h=E.Z.getClassFactory(c)},5628:(C,R,I)=>{I.d(R,{Z:()=>y});var E=I(5448),T=I(2068),l=I(3393),c=I(3860);function h(i){i=i||{};var g=this.context,d=i.dashMetrics;return{getMaxIndex:function(r){var t=(0,T.Z)(g).create();if(!(r&&r.hasOwnProperty("getMediaInfo")&&r.hasOwnProperty("getMediaType")&&r.hasOwnProperty("useBufferOccupancyABR")&&r.hasOwnProperty("getAbrController")&&r.hasOwnProperty("getScheduleController")))return t;(function(){if(!d||!d.hasOwnProperty("getCurrentBufferState"))throw new Error(l.Z.MISSING_CONFIG_ERROR)})();var u=r.getMediaInfo(),m=r.getMediaType(),S=d.getCurrentBufferState(m),A=r.getScheduleController(),_=r.getAbrController(),v=r.getStreamInfo(),f=v?v.id:null,b=v&&v.manifestInfo?v.manifestInfo.isDynamic:null,p=_.getThroughputHistory(),k=p.getSafeAverageThroughput(m,b),P=p.getAverageLatency(m),j=r.useBufferOccupancyABR();return isNaN(k)||!S||j||_.getAbandonmentStateFor(f,m)!==c.Z.ABANDON_LOAD&&(S.state===c.Z.BUFFER_LOADED||b)&&(t.quality=_.getQualityForBitrate(u,k,f,P),A.setTimeToLoadDelay(0),t.reason={throughput:k,latency:P}),t},reset:function(){}}}h.__dashjs_factory_name="ThroughputRule";const y=E.Z.getClassFactory(h)},4722:(C,R,I)=>{I.d(R,{Z:()=>c});var E=I(5448),T=I(6398);function l(){var h,y,i,g,d,r,t,u,m,S=this.context;function A(){i=null,g=1,d=100,r=0,t=null,u=null,m="dynamic_weight_selection"}function _(){var k=0;if(i)for(var P=0;P<i.length;P++){var j=i[P];j.state.throughput>k&&(k=j.state.throughput)}return k}function v(k,P,j){var U=k.map(function(G,ee){return j[ee]*Math.pow(G-P[ee],2)}).reduce(function(G,ee){return G+ee});return(U<0?-1:1)*Math.sqrt(Math.abs(U))}function f(k,P){return v([k.state.throughput,k.state.latency,k.state.rebuffer,k.state.switch],[P.state.throughput,P.state.latency,P.state.rebuffer,P.state.switch],[1,1,1,1])}function b(k,P,j){for(var U=0;U<P.length;U++){var G=P[U],ee=f(G,k);p(G,j,Math.exp(-1*Math.pow(ee,2)/(2*Math.pow(.1,2))))}}function p(k,P,j){var U=k.state,G=[.01,.01,.01,.01];U.throughput=U.throughput+(P[0]-U.throughput)*G[0]*j,U.latency=U.latency+(P[1]-U.latency)*G[1]*j,U.rebuffer=U.rebuffer+(P[2]-U.rebuffer)*G[2]*j,U.switch=U.switch+(P[3]-U.switch)*G[3]*j}return h={getNextQuality:function(k,P,j,U,G,ee,ne){var re=j,oe=U,W=P,Te=function(Ge){if(!i){i=[];var it=Ge.bitrateList,Ye=[];r=it[0].bandwidth,it.forEach(function(ke){Ye.push(ke.bandwidth),ke.bandwidth<r&&(r=ke.bandwidth)}),me=Ye.map(function(ke){return Math.pow(ke,2)}).reduce(function(ke,Je){return ke+Je}),g=Math.sqrt(me);for(var Ke=0;Ke<it.length;Ke++){var dt={qualityIndex:Ke,bitrate:it[Ke].bandwidth,state:{throughput:it[Ke].bandwidth/g,latency:0,rebuffer:0,switch:0}};i.push(dt)}u=function(ke){var Je=[],Xe=function(_t){for(var pt=[],wt=0;wt<_t;wt++){var Dt=[Math.random()*_(),Math.random(),Math.random(),Math.random()];pt.push(Dt)}return pt}(Math.pow(ke.length,2));Je.push(Xe[0]);for(var nt=[1,1,1,1],Tt=1;Tt<ke.length;Tt++){for(var bt=null,Ft=null,pn=0;pn<Xe.length;pn++){for(var wn=Xe[pn],hn=null,Xn=0;Xn<Je.length;Xn++){var on=v(wn,Je[Xn],nt);(hn===null||on<hn)&&(hn=on)}(Ft===null||hn>Ft)&&(bt=wn,Ft=hn)}Je.push(bt)}for(var Zn=null,Bn=null,Rr=0;Rr<Je.length;Rr++){for(var Nr=0,Ir=0;Ir<Je.length;Ir++)Rr!==Ir&&(Nr+=v(Je[Rr],Je[Ir],nt));(Zn===null||Nr>Zn)&&(Zn=Nr,Bn=Rr)}var nn=[];for(nn.push(Je[Bn]),Je.splice(Bn,1);Je.length>0;){for(var rn=null,$t=null,Nt=0;Nt<Je.length;Nt++){var en=v(nn[0],Je[Nt],nt);(rn===null||en<rn)&&(rn=en,$t=Nt)}nn.push(Je[$t]),Je.splice($t,1)}return nn}(i)}var me;return i}(k),Ue=P/g;Ue>1&&(Ue=_()),j/=d,y.debug("getNextQuality called throughput:".concat(Ue," latency:").concat(j," bufferSize:").concat(U," currentQualityIndex:").concat(ee," playbackRate:").concat(G));var ze=Te[ee],le=ze.bitrate*ne.getSegmentDuration()/W,Se=Math.max(0,le-oe);if(oe-le<ne.getMinBuffer())return y.debug("Buffer is low for bitrate= ".concat(ze.bitrate," downloadTime=").concat(le," currentBuffer=").concat(oe," rebuffer=").concat(Se)),function(Ge,it){var Ye=0,Ke=Ge;if(i)for(var dt=0;dt<i.length;dt++){var me=i[dt];me.bitrate<Ge.bitrate&&me.bitrate>Ye&&it>me.bitrate&&(Ye=me.bitrate,Ke=me)}return Ke}(ze,W).qualityIndex;switch(m){case"manual_weight_selection":t=[.4,.4,.4,.4];break;case"random_weight_selection":(function(Ge){t=function(it,Ye){for(var Ke=[],dt=Math.sqrt(2/it),me=0;me<4;me++)Ke.push(Math.random()*dt);return t=Ke}(Ge.length)})(Te);break;default:(function(Ge,it,Ye,Ke,dt,me,ke){t||(t=u[u.length-1]);var Je=Ge.findWeightVector(it,Ye,Ke,dt,me,ke);Je!==null&&Je!==-1&&(t=Je)})(ne,Te,re,oe,Se,W,G)}for(var be=null,Y=null,Q=null,J=0;J<Te.length;J++){var fe=Te[J],Ce=fe.state,V=[Ce.throughput,Ce.latency,Ce.rebuffer,Ce.switch],H=t.slice(),z=ne.getNextBufferWithBitrate(fe.bitrate,oe,W),X=z<ne.getMinBuffer();X&&y.debug("Buffer is low for bitrate=".concat(fe.bitrate," downloadTime=").concat(le," currentBuffer=").concat(oe," nextBuffer=").concat(z)),(fe.bitrate>P-1e4||X)&&fe.bitrate!==r&&(H[0]=100);var de=v(V,[Ue,0,0,0],H);(be===null||de<be)&&(be=de,Y=fe.qualityIndex,Q=fe)}var ge=Math.abs(ze.bitrate-Q.bitrate)/g;return b(ze,Te,[Ue,j,Se,ge]),b(Q,Te,[Ue,0,0,ge]),Y},reset:function(){A()}},y=(0,T.Z)(S).getInstance().getLogger(h),A(),h}l.__dashjs_factory_name="LearningAbrController";const c=E.Z.getClassFactory(l)},5317:(C,R,I)=>{I.d(R,{Z:()=>c});var E=I(5448),T=I(2298);function l(){var h,y,i,g,d;function r(){y=null,i=null,g=null,d=null}function t(m,S,A,_){var v=new T.Z;return v.type=m,v.weights.bitrateReward=S||1,v.weights.bitrateSwitchPenalty=1,v.weights.rebufferPenalty=A||1e3,v.weights.latencyPenalty=[],v.weights.latencyPenalty.push({threshold:1.1,penalty:.05*_}),v.weights.latencyPenalty.push({threshold:1e8,penalty:.1*A}),v.weights.playbackSpeedPenalty=_||200,v}function u(m,S,A,_,v){v.bitrateWSum+=v.weights.bitrateReward*m,v.lastBitrate&&(v.bitrateSwitchWSum+=v.weights.bitrateSwitchPenalty*Math.abs(m-v.lastBitrate)),v.lastBitrate=m,v.rebufferWSum+=v.weights.rebufferPenalty*S;for(var f=0;f<v.weights.latencyPenalty.length;f++){var b=v.weights.latencyPenalty[f];if(A<=b.threshold){v.latencyWSum+=b.penalty*A;break}}v.playbackSpeedWSum+=v.weights.playbackSpeedPenalty*Math.abs(1-_),v.totalQoe=v.bitrateWSum-v.bitrateSwitchWSum-v.rebufferWSum-v.latencyWSum-v.playbackSpeedWSum}return h={setupPerSegmentQoe:function(m,S,A){y=t("segment",m,S,A),i=m,g=S,d=A},logSegmentMetrics:function(m,S,A,_){y&&u(m,S,A,_,y)},getPerSegmentQoe:function(){return y},calculateSingleUseQoe:function(m,S,A,_){var v=null;return i&&g&&d&&(v=t("segment",i,g,d)),v?(u(m,S,A,_,v),v.totalQoe):0},reset:function(){r()}},r(),h}l.__dashjs_factory_name="LoLpQoeEvaluator";const c=E.Z.getClassFactory(l)},5435:(C,R,I)=>{I.d(R,{Z:()=>r});var E=I(6398),T=I(5448),l=I(4722),c=I(5317),h=I(2068),y=I(3860),i=I(6523),g=I(3393);function d(t){var u,m,S,A,_=(t=t||{}).dashMetrics,v=this.context;return m={getMaxIndex:function(f){try{var b=(0,h.Z)(v).create(),p=f.getMediaInfo().type,k=f.getAbrController(),P=f.getStreamInfo(),j=k.getQualityFor(p,P.id),U=f.getMediaInfo(),G=_.getCurrentBufferState(p),ee=f.getScheduleController(),ne=_.getCurrentBufferLevel(p,!0),re=P&&P.manifestInfo?P.manifestInfo.isDynamic:null,oe=ee.getPlaybackController(),W=oe.getCurrentLiveLatency();if(!f.useLoLPABR()||p===g.Z.AUDIO)return b;W||(W=0);var Te=oe.getPlaybackRate(),Ue=k.getThroughputHistory().getSafeAverageThroughput(p,re);if(u.debug("Throughput ".concat(Math.round(Ue)," kbps")),isNaN(Ue)||!G||k.getAbandonmentStateFor(P.id,p)===y.Z.ABANDON_LOAD)return b;for(var ze=U.bitrateList,le=f.getRepresentationInfo().fragmentDuration,Se=ze[0].bandwidth/1e3,be=ze[ze.length-1].bandwidth/1e3,Y=0;Y<ze.length;Y++){var Q=ze[Y].bandwidth/1e3;Q>be?be=Q:Q<Se&&(Se=Q)}var J=ze[j].bandwidth/1e3,fe=_.getCurrentHttpRequest(p,!0),Ce=(fe.tresponse.getTime()-fe.trequest.getTime())/1e3,V=Ce>le?Ce-le:0;A.setupPerSegmentQoe(le,be,Se),A.logSegmentMetrics(J,V,W,Te);var H=(0,i.Z)(v).create({targetLatency:1.5,bufferMin:.3,segmentDuration:le,qoeEvaluator:A});return b.quality=S.getNextQuality(U,1e3*Ue,W,ne,Te,j,H),b.reason={throughput:Ue,latency:W},b.priority=h.Z.PRIORITY.STRONG,ee.setTimeToLoadDelay(0),b.quality!==j&&console.log("[TgcLearningRule]["+p+"] requesting switch to index: ",b.quality,"Average throughput",Math.round(Ue),"kbps"),b}catch(z){throw z}},reset:function(){S.reset(),A.reset()}},u=(0,E.Z)(v).getInstance().getLogger(m),S=(0,l.Z)(v).create(),A=(0,c.Z)(v).create(),m}d.__dashjs_factory_name="LoLPRule";const r=T.Z.getClassFactory(d)},6523:(C,R,I)=>{I.d(R,{Z:()=>l});var E=I(5448);function T(c){var h,y,i,g,d=c.targetLatency,r=c.bufferMin,t=c.segmentDuration,u=c.qoeEvaluator;function m(){return t}function S(A,_){var v=m();return _>v?A-v:A+v-_}return h={getMinBuffer:function(){return r},getSegmentDuration:m,getNextBufferWithBitrate:function(A,_,v){return S(_,A*t/v)},getNextBuffer:S,findWeightVector:function(A,_,v,f,b,p){var k=null,P=null,j=null,U=Math.abs(_-i);return A.forEach(function(G){y.forEach(function(ee){ee[0];var ne=ee[1],re=ee[2],oe=(ee[3],G.bitrate*t/b),W=S(v,oe),Te=(re===0?10:1/re)*Math.max(1e-5,oe-W),Ue=(ne===0?10:1/ne)*G.state.latency,ze=u.calculateSingleUseQoe(G.bitrate,Te,Ue,p);(k===null||ze>k)&&function(le,Se,be){return!(le>d+be)&&Se>=r}(_,W,U)&&(k=ze,P=ee,j=G.bitrate)})}),P===null&&j===null&&(P=-1),i=_,P}},y=function A(_,v,f){if(f===v)return _;for(var b=_.length,p=0;p<b;p++)for(var k=_.shift(),P=0;P<g.length;P++)_.push(k.concat(g[P]));return A(_,v,f+1)}((g=[.2,.4,.6,.8,1]).map(function(A){return[A]}),4,1),i=0,h}T.__dashjs_factory_name="LoLpWeightSelector";const l=E.Z.getClassFactory(T)},2298:(C,R,I)=>{I.d(R,{Z:()=>E});const E=function T(){(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,T),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:(C,R,I)=>{I.d(R,{Y:()=>t,Z:()=>m});var E=I(3393),T=I(1553),l=I(5448),c=I(2128),h=I(2594),y=I(7387),i=I(7417),g=I(9032),d=I(9326),r=I(7802),t=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function u(S){var A,_,v,f,b,p,k,P,j=this.context,U=S.adapter,G=S.baseURLController,ee=S.streamInfo,ne=S.timelineConverter,re=S.debug,oe=S.eventBus,W=S.events,Te=S.dashConstants,Ue=(0,h.Z)(j).getInstance();function ze(Se,be){var Y=new c.Z;Y.id=Se.id,Y.bitrate=Se.bandwidth,Y.width=Se.width,Y.height=Se.height,Y.tilesHor=1,Y.tilesVert=1,Se.essentialProperties&&Se.essentialProperties.forEach(function(Q){if(t.indexOf(Q.schemeIdUri)>=0&&Q.value){var J=Q.value.split("x");J.length!==2||isNaN(J[0])||isNaN(J[1])||(Y.tilesHor=parseInt(J[0],10),Y.tilesVert=parseInt(J[1],10))}}),be?p.updateSegmentData(Se).then(function(Q){(function(J,fe,Ce){var V=[],H=function(z,X){var de,ge,Ge,it,Ye=[],Ke=0;for(de=0,ge=z.segments.length;de<ge;de++)Ge=z.segments[de],(it=(0,y.TJ)(ne,U.getIsDynamic(),X,Ge.startTime,Ge.duration,Ge.timescale,Ge.media,Ge.mediaRange,Ke))&&(Ye.push(it),it=null,Ke++);return Ye}(Ce,fe);fe.segments=H,J.segmentDuration=fe.segments[0].duration,J.readThumbnail=function(z,X){var de=null;V.some(function(ge){if(ge.start<=z&&ge.end>z)return de=ge.url,!0}),de?X(de):fe.segments.some(function(ge){if(ge.mediaStartTime<=z&&ge.mediaStartTime+ge.duration>z){var Ge=G.resolve(fe.path);return k.load({method:"get",url:Ge.url,request:{range:ge.mediaRange,responseType:"arraybuffer"},onload:function(it){var Ye=P.getSamplesInfo(it.target.response),Ke=new Blob([it.target.response.slice(Ye.sampleList[0].offset,Ye.sampleList[0].offset+Ye.sampleList[0].size)],{type:"image/jpeg"}),dt=window.URL.createObjectURL(Ke);V.push({start:ge.mediaStartTime,end:ge.mediaStartTime+ge.duration,url:dt}),X&&X(dt)}}),!0}})}})(Y,Se,Q)}):(Y.startNumber=Se.startNumber,Y.segmentDuration=Se.segmentDuration,Y.timescale=Se.timescale,Y.templateUrl=function(Q){var J=Ue.isRelative(Q.media)?Ue.resolve(Q.media,G.resolve(Q.path).url):Q.media;return J?(0,y.Aj)(J,Q.id):""}(Se)),Y.tilesHor>0&&Y.tilesVert>0&&(Y.widthPerTile=Y.width/Y.tilesHor,Y.heightPerTile=Y.height/Y.tilesVert,_.push(Y))}function le(){_=[],f=-1,b=null}return A={getTracks:function(){return _},addTracks:function(){if(ee&&U&&(b=U.getMediaInfoForType(ee,E.Z.IMAGE))){var Se=U.getVoRepresentations(b);Se&&Se.length>0&&Se.forEach(function(be){(be.segmentInfoType===T.Z.SEGMENT_TEMPLATE&&be.segmentDuration>0&&be.media||be.segmentInfoType===T.Z.SEGMENT_TIMELINE)&&ze(be),be.segmentInfoType===T.Z.SEGMENT_BASE&&ze(be,!0)}),_.length>0&&_.sort(function(be,Y){return be.bitrate-Y.bitrate})}},reset:le,setTrackByIndex:function(Se){_&&_.length!==0&&(Se>=_.length&&(Se=_.length-1),f=Se)},getCurrentTrack:function(){return f<0?null:_[f]},getCurrentTrackIndex:function(){return f},getThumbnailRequestForTime:function(Se){for(var be,Y=U.getVoRepresentations(b),Q=0;Q<Y.length;Q++)if(_[f].id===Y[Q].id){be=Y[Q];break}return v.getSegmentRequestForTime(b,be,Se)}},le(),k=(0,g.Z)(j).create({}),P=(0,i.Z)(j).getInstance(),p=(0,r.Z)(j).create({events:W,eventBus:oe,streamInfo:ee,timelineConverter:ne,dashConstants:Te,dashMetrics:S.dashMetrics,segmentBaseController:S.segmentBaseController,type:E.Z.IMAGE}),(v=(0,d.Z)(j).create({streamInfo:ee,type:E.Z.IMAGE,timelineConverter:ne,segmentsController:p,baseURLController:G,debug:re,eventBus:oe,events:W,dashConstants:Te,urlUtils:Ue})).initialize(!!U&&U.getIsDynamic()),A}u.__dashjs_factory_name="ThumbnailTracks";const m=l.Z.getClassFactory(u)},7417:(C,R,I)=>{I.d(R,{Z:()=>i});var E=I(6398),T=I(8260),l=I(5448),c=I(6934),h=I(9597);function y(){var g,d,r=this.context;function t(S){if(!S)return null;S.fileStart===void 0&&(S.fileStart=0);var A=c.parseBuffer(S),_=(0,T.Z)(r).create();return _.setData(A),_}function u(S,A){return S[A+3]>>>0|S[A+2]<<8>>>0|S[A+1]<<16>>>0|S[A]<<24>>>0}function m(S,A){return String.fromCharCode(S[A++])+String.fromCharCode(S[A++])+String.fromCharCode(S[A++])+String.fromCharCode(S[A])}return d={parse:t,findLastTopIsoBoxCompleted:function(S,A,_){if(_===void 0&&(_=0),!A||_+8>=A.byteLength)return new h.Z(0,!1);for(var v,f=A instanceof ArrayBuffer?new Uint8Array(A):A,b=0;_<f.byteLength;){var p=u(f,_),k=m(f,_+4);if(p===0)break;_+p<=f.byteLength&&(S.indexOf(k)>=0?v=new h.Z(_,!0,p):b=_+p),_+=p}return v||new h.Z(b,!1)},getMediaTimescaleFromMoov:function(S){var A=t(S),_=A?A.getBox("mdhd"):void 0;return _?_.timescale:NaN},getSamplesInfo:function(S){if(!S||S.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var A,_,v,f,b,p,k,P,j,U,G,ee,ne,re,oe,W,Te=t(S),Ue=Te.getBoxes("moof"),ze=Te.getBoxes("mfhd");oe=Te.getBoxes("moof").length,re=ze[ze.length-1].sequence_number,_=0,b=[];var le=-1,Se=-1;for(U=0;U<Ue.length;U++){var be=Ue[U],Y=be.getChildBoxes("traf");for(P=0;P<Y.length;P++){var Q=Y[P],J=Q.getChildBox("tfhd"),fe=Q.getChildBox("tfdt");f=fe.baseMediaDecodeTime;var Ce=Q.getChildBoxes("trun"),V=Q.getChildBoxes("subs");for(j=0;j<Ce.length;j++){var H=Ce[j];for(_=H.sample_count,ne=(J.base_data_offset||0)+(H.data_offset||0),k=0;k<_;k++){A=(p=H.samples[k]).sample_duration!==void 0?p.sample_duration:J.default_sample_duration,v=p.sample_size!==void 0?p.sample_size:J.default_sample_size;var z={dts:f,cts:f+(p.sample_composition_time_offset!==void 0?p.sample_composition_time_offset:0),duration:A,offset:be.offset+ne,size:v,subSizes:[v]};if(V)for(G=0;G<V.length;G++){var X=V[G];if(le<X.entry_count-1&&k>Se&&(le++,Se+=X.entries[le].sample_delta),k==Se){z.subSizes=[];var de=X.entries[le];for(ee=0;ee<de.subsample_count;ee++)z.subSizes.push(de.subsamples[ee].subsample_size)}}b.push(z),ne+=v,f+=A}}W=f-fe.baseMediaDecodeTime}}return{sampleList:b,lastSequenceNumber:re,totalDuration:W,numSequences:oe}},findInitRange:function(S){var A=null,_=t(S);if(!_)return A;var v=_.getBox("ftyp"),f=_.getBox("moov");return g.debug("Searching for initialization."),f&&f.isComplete&&(A=(v?v.offset:f.offset)+"-"+(f.offset+f.size-1),g.debug("Found the initialization.  Range: "+A)),A},parsePayload:function(S,A,_){if(_===void 0&&(_=0),!A||_+8>=A.byteLength)return new h.Z(0,!1);for(var v,f=A instanceof ArrayBuffer?new Uint8Array(A):A,b=0;_<f.byteLength;){var p=u(f,_),k=m(f,_+4);if(p===0)break;_+p<=f.byteLength&&(S.indexOf(k)>=0?v=new h.Z(_,!0,p,k):b=_+p),_+=p}return v||new h.Z(b,!1)}},g=(0,E.Z)(r).getInstance().getLogger(d),d}y.__dashjs_factory_name="BoxParser";const i=l.Z.getSingletonFactory(y)},1715:(C,R,I)=>{I.d(R,{B:()=>h,Z:()=>i});var E=I(5448),T=I(7803),l=I(3393),c=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function h(){var g="WebKitMediaSource"in window,d="MediaSource"in window;return g||d}function y(){var g,d,r;return g={setConfig:function(t){t&&t.settings&&(d=t.settings)},supportsMediaSource:h,supportsEncryptedMedia:function(){return r},supportsCodec:function(t,u){return u!==l.Z.AUDIO&&u!==l.Z.VIDEO?Promise.resolve(!0):function(m,S){return d.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(m.codec&&S===l.Z.AUDIO||S===l.Z.VIDEO&&m.codec&&m.width&&m.height&&m.bitrate&&m.framerate)}(t,u)?function(m,S){return new Promise(function(A){if(m&&m.codec){var _={type:"media-source"};_[S]={},_[S].contentType=m.codec,_[S].width=m.width,_[S].height=m.height,_[S].bitrate=parseInt(m.bitrate),_[S].framerate=parseFloat(m.framerate),navigator.mediaCapabilities.decodingInfo(_).then(function(v){A(v.supported)}).catch(function(){A(!1)})}else A(!1)})}(t,u):function(m){return new Promise(function(S){if(m&&m.codec){var A=m.codec;m.width&&m.height&&(A+=';width="'+m.width+'";height="'+m.height+'"'),"MediaSource"in window&&MediaSource.isTypeSupported(A)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(A)?S(!0):S(!1)}else S(!1)})}(t)},setEncryptedMediaSupported:function(t){r=t},supportsEssentialProperty:function(t){try{return T.Y.indexOf(t.schemeIdUri)!==-1}catch{return!0}},codecRootCompatibleWithCodec:function(t,u){for(var m,S=t.split(".")[0],A=u.indexOf(S)===0,_=0;_<c.length;_++)if(c[_].codec===S){m=c[_];break}return m?A||m.compatibleCodecs.some(function(v){return u.indexOf(v)===0}):A}},r=!1,g}y.__dashjs_factory_name="Capabilities";const i=E.Z.getSingletonFactory(y)},2295:(C,R,I)=>{I.d(R,{Z:()=>c});var E=I(5448),T=I(3106);function l(){return{customTimeRangeArray:[],length:0,add:function(h,y){var i;for(i=0;i<this.customTimeRangeArray.length&&h>this.customTimeRangeArray[i].start;i++);for(this.customTimeRangeArray.splice(i,0,{start:h,end:y}),i=0;i<this.customTimeRangeArray.length-1;i++)this.mergeRanges(i,i+1)&&i--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(h,y){for(var i=0;i<this.customTimeRangeArray.length;i++)if(h<=this.customTimeRangeArray[i].start&&y>=this.customTimeRangeArray[i].end)this.customTimeRangeArray.splice(i,1),i--;else{if(h>this.customTimeRangeArray[i].start&&y<this.customTimeRangeArray[i].end){this.customTimeRangeArray.splice(i+1,0,{start:y,end:this.customTimeRangeArray[i].end}),this.customTimeRangeArray[i].end=h;break}h>this.customTimeRangeArray[i].start&&h<this.customTimeRangeArray[i].end?this.customTimeRangeArray[i].end=h:y>this.customTimeRangeArray[i].start&&y<this.customTimeRangeArray[i].end&&(this.customTimeRangeArray[i].start=y)}this.length=this.customTimeRangeArray.length},mergeRanges:function(h,y){var i=this.customTimeRangeArray[h],g=this.customTimeRangeArray[y];return i.start<=g.start&&g.start<=i.end&&i.end<=g.end?(i.end=g.end,this.customTimeRangeArray.splice(y,1),!0):g.start<=i.start&&i.start<=g.end&&g.end<=i.end?(i.start=g.start,this.customTimeRangeArray.splice(y,1),!0):g.start<=i.start&&i.start<=g.end&&i.end<=g.end?(this.customTimeRangeArray.splice(h,1),!0):i.start<=g.start&&g.start<=i.end&&g.end<=i.end&&(this.customTimeRangeArray.splice(y,1),!0)},start:function(h){return(0,T.SE)(h),h>=this.customTimeRangeArray.length||h<0?NaN:this.customTimeRangeArray[h].start},end:function(h){return(0,T.SE)(h),h>=this.customTimeRangeArray.length||h<0?NaN:this.customTimeRangeArray[h].end}}}l.__dashjs_factory_name="CustomTimeRanges";const c=E.Z.getClassFactory(l)},5:(C,R,I)=>{I.d(R,{Z:()=>l});var E=I(5448);function T(){var c,h=/^[a-z][a-z0-9+\-_.]*:/i,y=/^https?:\/\//i,i=/^https:\/\//i,g=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,d=function(v,f){try{return new window.URL(v,f).toString()}catch{return v}},r=function(v,f){var b=t;if(!f||!S(v))return v;A(v)&&(b=u),_(v)&&(b=m);var p=b(f),k=p.charAt(p.length-1)!=="/"&&v.charAt(0)!=="/"?"/":"";return[p,v].join(k)};function t(v){var f=v.indexOf("/"),b=v.lastIndexOf("/");return f!==-1?b===f+1?v:(v.indexOf("?")!==-1&&(v=v.substring(0,v.indexOf("?"))),v.substring(0,b+1)):""}function u(v){var f=v.match(g);return f?f[1]:""}function m(v){var f=v.match(h);return f?f[0]:""}function S(v){return!h.test(v)}function A(v){return S(v)&&v.charAt(0)==="/"}function _(v){return v.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),c=d}catch{}finally{c=c||r}}(),{parseBaseUrl:t,parseOrigin:u,parseScheme:m,isRelative:S,isPathAbsolute:A,isSchemeRelative:_,isHTTPURL:function(v){return y.test(v)},isHTTPS:function(v){return i.test(v)},removeHostname:function(v){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(v)[2].substring(1)},resolve:function(v,f){return c(v,f)}}}T.__dashjs_factory_name="DefaultURLUtils";const l=E.Z.getSingletonFactory(T)},8260:(C,R,I)=>{I.d(R,{Z:()=>c});var E=I(2839),T=I(5448);function l(){var h;function y(g){var d=[];if(!g||!h||typeof h.fetchAll!="function")return d;for(var r,t=h.fetchAll(g),u=0,m=t.length;u<m;u++)(r=i(t[u]))&&d.push(r);return d}function i(g){if(!g)return null;var d=new E.Z(g);return g.hasOwnProperty("_incomplete")&&(d.isComplete=!g._incomplete),d}return{getBox:function(g){return g&&h&&h.boxes&&h.boxes.length!==0&&typeof h.fetch=="function"?i(h.fetch(g)):null},getBoxes:y,setData:function(g){h=g},getLastBox:function(){if(!h||!h.boxes||!h.boxes.length)return null;var g=y(h.boxes[h.boxes.length-1].type);return g.length>0?g[g.length-1]:null}}}l.__dashjs_factory_name="IsoFile";const c=T.Z.getClassFactory(l)},7473:(C,R,I)=>{I.d(R,{Z:()=>c,k:()=>T});var E=I(5448);function T(h,y){var i={url:h.url,method:h.method,headers:Object.assign({},h.headers),credentials:h.withCredentials?"include":void 0};return Promise.resolve(y.modifyRequest(i)).then(function(){return Object.assign(h,i,{withCredentials:i.credentials==="include"})})}function l(){return{modifyRequest:null,modifyRequestURL:function(h){return h},modifyRequestHeader:function(h,y){return y.url,h}}}l.__dashjs_factory_name="RequestModifier";const c=E.Z.getSingletonFactory(l)},3106:(C,R,I)=>{I.d(R,{PS:()=>l,SE:()=>c});var E=I(3393);function T(h){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},T(h)}function l(h,y){if(T(h)!==y)throw E.Z.BAD_ARGUMENT_ERROR}function c(h){if(h===null||isNaN(h)||h%1!=0)throw E.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:(C,R,I)=>{I.d(R,{Z:()=>c});var E=I(5448),T=I(5);function l(){var h,y=[],i=this.context;function g(d,r,t){var u=function(m){var S;for(S=0;S<y.length;S++)if(y[S].regex.test(m))return y[S].utils;return h}(t||r);return u&&typeof u[d]=="function"?u[d](r,t):h[d](r,t)}return h=(0,T.Z)(i).getInstance(),{registerUrlRegex:function(d,r){y.push({regex:d,utils:r})},parseBaseUrl:function(d){return g("parseBaseUrl",d)},parseOrigin:function(d){return g("parseOrigin",d)},parseScheme:function(d){return g("parseScheme",d)},isRelative:function(d){return g("isRelative",d)},isPathAbsolute:function(d){return g("isPathAbsolute",d)},isSchemeRelative:function(d){return g("isSchemeRelative",d)},isHTTPURL:function(d){return g("isHTTPURL",d)},isHTTPS:function(d){return g("isHTTPS",d)},removeHostname:function(d){return g("removeHostname",d)},resolve:function(d,r){return g("resolve",d,r)}}}l.__dashjs_factory_name="URLUtils";const c=E.Z.getSingletonFactory(l)},5459:(C,R,I)=>{I.d(R,{Z:()=>E});const E=function T(l,c,h){(function(y,i){if(!(y instanceof i))throw new TypeError("Cannot call a class as a function")})(this,T),this.code=l||null,this.message=c||null,this.data=h||null}},3186:(C,R,I)=>{I.d(R,{Z:()=>l});var E=I(7855),T=function(){function c(y){(function(i,g){if(!(i instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c),this.action=c.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=y||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var h;return(h=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===E.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(y){this.type=y&&y.init?E.w.INIT_SEGMENT_TYPE:E.w.MEDIA_SEGMENT_TYPE,this.url=y&&y.url?y.url:null,this.range=y&&y.range?y.range.start+"-"+y.range.end:null,this.mediaType=y&&y.mediaType?y.mediaType:null}}])&&function(y,i){for(var g=0;g<i.length;g++){var d=i[g];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(y,d.key,d)}}(c.prototype,h),c}();T.ACTION_DOWNLOAD="download",T.ACTION_COMPLETE="complete";const l=T},2839:(C,R,I)=>{I.d(R,{Z:()=>E});const E=function(){function T(c){if(function(t,u){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this,T),this.offset=c._offset,this.type=c.type,this.size=c.size,this.boxes=[],c.boxes)for(var h=0;h<c.boxes.length;h++)this.boxes.push(new T(c.boxes[h]));switch(this.isComplete=!0,c.type){case"sidx":if(this.timescale=c.timescale,this.earliest_presentation_time=c.earliest_presentation_time,this.first_offset=c.first_offset,this.references=c.references,c.references){this.references=[];for(var y=0;y<c.references.length;y++){var i={reference_type:c.references[y].reference_type,referenced_size:c.references[y].referenced_size,subsegment_duration:c.references[y].subsegment_duration};this.references.push(i)}}break;case"emsg":this.id=c.id,this.version=c.version===1?1:0,this.value=c.value,this.timescale=c.timescale,this.scheme_id_uri=c.scheme_id_uri,this.presentation_time_delta=c.version===1?c.presentation_time:c.presentation_time_delta,this.event_duration=c.event_duration,this.message_data=c.message_data;break;case"mdhd":this.timescale=c.timescale;break;case"mfhd":this.sequence_number=c.sequence_number;break;case"subs":this.entry_count=c.entry_count,this.entries=c.entries;break;case"tfhd":this.base_data_offset=c.base_data_offset,this.sample_description_index=c.sample_description_index,this.default_sample_duration=c.default_sample_duration,this.default_sample_size=c.default_sample_size,this.default_sample_flags=c.default_sample_flags,this.flags=c.flags;break;case"tfdt":this.version=c.version,this.baseMediaDecodeTime=c.baseMediaDecodeTime,this.flags=c.flags;break;case"trun":if(this.sample_count=c.sample_count,this.first_sample_flags=c.first_sample_flags,this.data_offset=c.data_offset,this.flags=c.flags,this.samples=c.samples,c.samples){this.samples=[];for(var g=0,d=c.samples.length;g<d;g++){var r={sample_size:c.samples[g].sample_size,sample_duration:c.samples[g].sample_duration,sample_composition_time_offset:c.samples[g].sample_composition_time_offset};this.samples.push(r)}}break;case"prft":this.version=c.version,this.reference_track_ID=c.reference_track_ID,this.ntp_timestamp_sec=c.ntp_timestamp_sec,this.ntp_timestamp_frac=c.ntp_timestamp_frac,this.media_time=c.media_time,this.flags=c.flags}}var l;return(l=[{key:"getChildBox",value:function(c){for(var h=0;h<this.boxes.length;h++)if(this.boxes[h].type===c)return this.boxes[h]}},{key:"getChildBoxes",value:function(c){for(var h=[],y=0;y<this.boxes.length;y++)this.boxes[y].type===c&&h.push(this.boxes[y]);return h}}])&&function(c,h){for(var y=0;y<h.length;y++){var i=h[y];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(c,i.key,i)}}(T.prototype,l),T}()},9597:(C,R,I)=>{I.d(R,{Z:()=>E});const E=function T(l,c,h){(function(y,i){if(!(y instanceof i))throw new TypeError("Cannot call a class as a function")})(this,T),this.lastCompletedOffset=l,this.found=c,this.size=h}},2128:(C,R,I)=>{I.d(R,{Z:()=>E});const E=function T(){(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,T),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:(C,R,I)=>{function E(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}I.d(R,{O:()=>l,w:()=>T});var T=function c(){E(this,c),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},l=function c(){E(this,c),this.s=null,this.d=null,this.b=[]};T.GET="GET",T.HEAD="HEAD",T.MPD_TYPE="MPD",T.XLINK_EXPANSION_TYPE="XLinkExpansion",T.INIT_SEGMENT_TYPE="InitializationSegment",T.INDEX_SEGMENT_TYPE="IndexSegment",T.MEDIA_SEGMENT_TYPE="MediaSegment",T.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",T.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",T.DVB_REPORTING_TYPE="DVBReporting",T.LICENSE="license",T.CONTENT_STEERING_TYPE="ContentSteering",T.OTHER_TYPE="other"},3039:(C,R)=>{function I(T,l){return function(c,h){for(var y,i,g,d=E(c,"tag"),r=E(h??"*","range"),t=[],u=-1;++u<r.length;)if(y=r[u].toLowerCase(),l||y!=="*"){for(i=-1,g=[];++i<d.length;)if(T(d[i].toLowerCase(),y)){if(!l)return d[i];t.push(d[i])}else g.push(d[i]);d=g}return l?t:void 0}}function E(T,l){var c=T&&typeof T=="string"?[T]:T;if(!c||typeof c!="object"||!("length"in c))throw new Error("Invalid "+l+" `"+c+"`, expected non-empty string");return c}R.basicFilter=I(function(T,l){return l==="*"||T===l||T.indexOf(l+"-")>-1},!0),R.extendedFilter=I(function(T,l){var c=T.split("-"),h=l.split("-"),y=0,i=0;if(h[i]!=="*"&&c[y]!==h[i])return!1;for(y++,i++;i<h.length;)if(h[i]!=="*"){if(!c[y])return!1;if(c[y]!==h[i]){if(c[y].length===1)return!1;y++}else y++,i++}else i++;return!0},!0),R.lookup=I(function(T,l){for(var c,h=l;;){if(h==="*"||T===h)return!0;if((c=h.lastIndexOf("-"))<0)return!1;h.charAt(c-2)==="-"&&(c-=2),h=h.slice(0,c)}})},3973:(C,R,I)=>{C.exports=I(3854)},3854:(C,R,I)=>{var E=I(2415),T=I(3039),l=I(7778),c=I(5813),h=I(3165),y=I(9460);C.exports=function(S,A){var _,v=A||{},f=E.parse(String(S||"").toLowerCase(),v),b=E.stringify(f),p=-1;if(!b)return b;for(;++p<l.length;)T.extendedFilter(b,l[p].from).length&&(r(f,l[p].from,l[p].to),b=E.stringify(f));for(p=-1;++p<c.length;)t(f,c[p].from.field,c[p].from.value)&&u(f,c[p].to.field,c[p].to.value);for(b=E.stringify(Object.assign({},f,d)),p=-1;++p<h.length;)b===h[p]&&(r(f,h[p],h[p].split("-").slice(0,-1).join("-")),b=E.stringify(Object.assign({},f,d)));if(f.extensions.sort(m),v.warning)for(_ in y)i.call(y[_],f[_])&&v.warning("Deprecated "+_+" `"+f[_]+"`, expected one of `"+y[_][f[_]].join("`, `")+"`",null,7);return f.script&&(f.script=f.script.charAt(0).toUpperCase()+f.script.slice(1)),f.region&&(f.region=f.region.toUpperCase()),E.stringify(f)};var i={}.hasOwnProperty,g=new Intl.Collator,d={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function r(S,A,_){var v,f=E.parse(A),b=E.parse(_),p=[];for(v in f)f[v]&&f[v].length&&t(S,v,f[v])&&p.push(v);for(v in b)b[v]&&b[v].length&&(p.indexOf(v)>-1||!S[v]||!S[v].length)&&u(S,v,b[v])}function t(S,A,_){var v,f,b,p,k=!1;if(_){if(f=v=S[A],v&&typeof v=="object")for(f=[],b=-1;++b<v.length;)p=v[b],_.indexOf(p)<0?f.push(p):k=!0;else v===_&&(f=null,k=!0);S[A]=f}return k}function u(S,A,_){var v,f,b,p=S[A];if(p&&typeof p=="object")for(v=[].concat(_),f=-1;++f<v.length;)b=v[f],p.indexOf(b)<0&&p.push(b);else S[A]=_}function m(S,A){return g.compare(S.singleton,A.singleton)}},2415:(C,R,I)=>{R.parse=I(6903),R.stringify=I(6713)},6903:(C,R,I)=>{var E=I(2219),T=I(3516),l=I(395),c=I(858),h=I(8589);C.exports=function i(g,d){var r,t,u,m=d||{},S={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},A=String(g),_=A.toLowerCase(),v=0;if(g==null)throw new Error("Expected string, got `"+g+"`");if(y.call(h,_))return(m.normalize==null||m.normalize)&&h[_]?i(h[_]):(S[c.indexOf(_)===-1?"irregular":"regular"]=A,S);for(;T(_.charCodeAt(v))&&v<9;)v++;if(v>1&&v<9){if(S.language=A.slice(0,v),v<4)for(t=0;_.charCodeAt(v)===45&&T(_.charCodeAt(v+1))&&T(_.charCodeAt(v+2))&&T(_.charCodeAt(v+3))&&!T(_.charCodeAt(v+4));){if(t>2)return f(v,3,"Too many extended language subtags, expected at most 3 subtags");S.extendedLanguageSubtags.push(A.slice(v+1,v+4)),v+=4,t++}for(_.charCodeAt(v)===45&&T(_.charCodeAt(v+1))&&T(_.charCodeAt(v+2))&&T(_.charCodeAt(v+3))&&T(_.charCodeAt(v+4))&&!T(_.charCodeAt(v+5))&&(S.script=A.slice(v+1,v+5),v+=5),_.charCodeAt(v)===45&&(T(_.charCodeAt(v+1))&&T(_.charCodeAt(v+2))&&!T(_.charCodeAt(v+3))?(S.region=A.slice(v+1,v+3),v+=3):l(_.charCodeAt(v+1))&&l(_.charCodeAt(v+2))&&l(_.charCodeAt(v+3))&&!l(_.charCodeAt(v+4))&&(S.region=A.slice(v+1,v+4),v+=4));_.charCodeAt(v)===45;){for(u=r=v+1;E(_.charCodeAt(u));){if(u-r>7)return f(u,1,"Too long variant, expected at most 8 characters");u++}if(!(u-r>4||u-r>3&&l(_.charCodeAt(r))))break;S.variants.push(A.slice(r,u)),v=u}for(;_.charCodeAt(v)===45&&_.charCodeAt(v+1)!==120&&E(_.charCodeAt(v+1))&&_.charCodeAt(v+2)===45&&E(_.charCodeAt(v+3));){for(u=v+2,t=0;_.charCodeAt(u)===45&&E(_.charCodeAt(u+1))&&E(_.charCodeAt(u+2));)for(u=(r=u+1)+2,t++;E(_.charCodeAt(u));){if(u-r>7)return f(u,2,"Too long extension, expected at most 8 characters");u++}if(!t)return f(u,4,"Empty extension, extensions must have at least 2 characters of content");S.extensions.push({singleton:A.charAt(v+1),extensions:A.slice(v+3,u).split("-")}),v=u}}else v=0;if(v===0&&_.charCodeAt(v)===120||_.charCodeAt(v)===45&&_.charCodeAt(v+1)===120)for(u=v=v?v+2:1;_.charCodeAt(u)===45&&E(_.charCodeAt(u+1));){for(u=r=v+1;E(_.charCodeAt(u));){if(u-r>7)return f(u,5,"Too long private-use area, expected at most 8 characters");u++}S.privateuse.push(A.slice(v+1,u)),v=u}return v!==A.length?f(v,6,"Found superfluous content after tag"):S;function f(b,p,k){return m.warning&&m.warning(k,p,b),m.forgiving?S:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var y={}.hasOwnProperty},6713:C=>{C.exports=function(R){var I,E,T,l=R||{},c=[];if(l.irregular||l.regular)return l.irregular||l.regular;if(l.language)for(c=c.concat(l.language,l.extendedLanguageSubtags||[],l.script||[],l.region||[],l.variants||[]),I=l.extensions||[],E=-1;++E<I.length;)(T=I[E]).singleton&&T.extensions&&T.extensions.length&&(c=c.concat(T.singleton,T.extensions));return l.privateuse&&l.privateuse.length&&(c=c.concat("x",l.privateuse)),c.join("-")}},1549:(C,R,I)=>{var E=I(6693),T=I(2165),l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;R.Buffer=y,R.SlowBuffer=function(V){return+V!=V&&(V=0),y.alloc(+V)},R.INSPECT_MAX_BYTES=50;var c=2147483647;function h(V){if(V>c)throw new RangeError('The value "'+V+'" is invalid for option "size"');var H=new Uint8Array(V);return Object.setPrototypeOf(H,y.prototype),H}function y(V,H,z){if(typeof V=="number"){if(typeof H=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(V)}return i(V,H,z)}function i(V,H,z){if(typeof V=="string")return function(ge,Ge){if(typeof Ge=="string"&&Ge!==""||(Ge="utf8"),!y.isEncoding(Ge))throw new TypeError("Unknown encoding: "+Ge);var it=0|m(ge,Ge),Ye=h(it),Ke=Ye.write(ge,Ge);return Ke!==it&&(Ye=Ye.slice(0,Ke)),Ye}(V,H);if(ArrayBuffer.isView(V))return function(ge){if(J(ge,Uint8Array)){var Ge=new Uint8Array(ge);return t(Ge.buffer,Ge.byteOffset,Ge.byteLength)}return r(ge)}(V);if(V==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V);if(J(V,ArrayBuffer)||V&&J(V.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(J(V,SharedArrayBuffer)||V&&J(V.buffer,SharedArrayBuffer)))return t(V,H,z);if(typeof V=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var X=V.valueOf&&V.valueOf();if(X!=null&&X!==V)return y.from(X,H,z);var de=function(ge){if(y.isBuffer(ge)){var Ge=0|u(ge.length),it=h(Ge);return it.length===0||ge.copy(it,0,0,Ge),it}return ge.length!==void 0?typeof ge.length!="number"||fe(ge.length)?h(0):r(ge):ge.type==="Buffer"&&Array.isArray(ge.data)?r(ge.data):void 0}(V);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof V[Symbol.toPrimitive]=="function")return y.from(V[Symbol.toPrimitive]("string"),H,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V)}function g(V){if(typeof V!="number")throw new TypeError('"size" argument must be of type number');if(V<0)throw new RangeError('The value "'+V+'" is invalid for option "size"')}function d(V){return g(V),h(V<0?0:0|u(V))}function r(V){for(var H=V.length<0?0:0|u(V.length),z=h(H),X=0;X<H;X+=1)z[X]=255&V[X];return z}function t(V,H,z){if(H<0||V.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(V.byteLength<H+(z||0))throw new RangeError('"length" is outside of buffer bounds');var X;return X=H===void 0&&z===void 0?new Uint8Array(V):z===void 0?new Uint8Array(V,H):new Uint8Array(V,H,z),Object.setPrototypeOf(X,y.prototype),X}function u(V){if(V>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return 0|V}function m(V,H){if(y.isBuffer(V))return V.length;if(ArrayBuffer.isView(V)||J(V,ArrayBuffer))return V.byteLength;if(typeof V!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof V);var z=V.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&z===0)return 0;for(var de=!1;;)switch(H){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return be(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*z;case"hex":return z>>>1;case"base64":return Y(V).length;default:if(de)return X?-1:be(V).length;H=(""+H).toLowerCase(),de=!0}}function S(V,H,z){var X=!1;if((H===void 0||H<0)&&(H=0),H>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0)<=(H>>>=0))return"";for(V||(V="utf8");;)switch(V){case"hex":return re(this,H,z);case"utf8":case"utf-8":return U(this,H,z);case"ascii":return ee(this,H,z);case"latin1":case"binary":return ne(this,H,z);case"base64":return j(this,H,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,H,z);default:if(X)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),X=!0}}function A(V,H,z){var X=V[H];V[H]=V[z],V[z]=X}function _(V,H,z,X,de){if(V.length===0)return-1;if(typeof z=="string"?(X=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),fe(z=+z)&&(z=de?0:V.length-1),z<0&&(z=V.length+z),z>=V.length){if(de)return-1;z=V.length-1}else if(z<0){if(!de)return-1;z=0}if(typeof H=="string"&&(H=y.from(H,X)),y.isBuffer(H))return H.length===0?-1:v(V,H,z,X,de);if(typeof H=="number")return H&=255,typeof Uint8Array.prototype.indexOf=="function"?de?Uint8Array.prototype.indexOf.call(V,H,z):Uint8Array.prototype.lastIndexOf.call(V,H,z):v(V,[H],z,X,de);throw new TypeError("val must be string, number or Buffer")}function v(V,H,z,X,de){var ge,Ge=1,it=V.length,Ye=H.length;if(X!==void 0&&((X=String(X).toLowerCase())==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if(V.length<2||H.length<2)return-1;Ge=2,it/=2,Ye/=2,z/=2}function Ke(Je,Xe){return Ge===1?Je[Xe]:Je.readUInt16BE(Xe*Ge)}if(de){var dt=-1;for(ge=z;ge<it;ge++)if(Ke(V,ge)===Ke(H,dt===-1?0:ge-dt)){if(dt===-1&&(dt=ge),ge-dt+1===Ye)return dt*Ge}else dt!==-1&&(ge-=ge-dt),dt=-1}else for(z+Ye>it&&(z=it-Ye),ge=z;ge>=0;ge--){for(var me=!0,ke=0;ke<Ye;ke++)if(Ke(V,ge+ke)!==Ke(H,ke)){me=!1;break}if(me)return ge}return-1}function f(V,H,z,X){z=Number(z)||0;var de=V.length-z;X?(X=Number(X))>de&&(X=de):X=de;var ge=H.length;X>ge/2&&(X=ge/2);for(var Ge=0;Ge<X;++Ge){var it=parseInt(H.substr(2*Ge,2),16);if(fe(it))return Ge;V[z+Ge]=it}return Ge}function b(V,H,z,X){return Q(be(H,V.length-z),V,z,X)}function p(V,H,z,X){return Q(function(de){for(var ge=[],Ge=0;Ge<de.length;++Ge)ge.push(255&de.charCodeAt(Ge));return ge}(H),V,z,X)}function k(V,H,z,X){return Q(Y(H),V,z,X)}function P(V,H,z,X){return Q(function(de,ge){for(var Ge,it,Ye,Ke=[],dt=0;dt<de.length&&!((ge-=2)<0);++dt)it=(Ge=de.charCodeAt(dt))>>8,Ye=Ge%256,Ke.push(Ye),Ke.push(it);return Ke}(H,V.length-z),V,z,X)}function j(V,H,z){return H===0&&z===V.length?E.fromByteArray(V):E.fromByteArray(V.slice(H,z))}function U(V,H,z){z=Math.min(V.length,z);for(var X=[],de=H;de<z;){var ge,Ge,it,Ye,Ke=V[de],dt=null,me=Ke>239?4:Ke>223?3:Ke>191?2:1;if(de+me<=z)switch(me){case 1:Ke<128&&(dt=Ke);break;case 2:(192&(ge=V[de+1]))==128&&(Ye=(31&Ke)<<6|63&ge)>127&&(dt=Ye);break;case 3:ge=V[de+1],Ge=V[de+2],(192&ge)==128&&(192&Ge)==128&&(Ye=(15&Ke)<<12|(63&ge)<<6|63&Ge)>2047&&(Ye<55296||Ye>57343)&&(dt=Ye);break;case 4:ge=V[de+1],Ge=V[de+2],it=V[de+3],(192&ge)==128&&(192&Ge)==128&&(192&it)==128&&(Ye=(15&Ke)<<18|(63&ge)<<12|(63&Ge)<<6|63&it)>65535&&Ye<1114112&&(dt=Ye)}dt===null?(dt=65533,me=1):dt>65535&&(dt-=65536,X.push(dt>>>10&1023|55296),dt=56320|1023&dt),X.push(dt),de+=me}return function(ke){var Je=ke.length;if(Je<=G)return String.fromCharCode.apply(String,ke);for(var Xe="",nt=0;nt<Je;)Xe+=String.fromCharCode.apply(String,ke.slice(nt,nt+=G));return Xe}(X)}R.kMaxLength=c,y.TYPED_ARRAY_SUPPORT=function(){try{var V=new Uint8Array(1),H={foo:function(){return 42}};return Object.setPrototypeOf(H,Uint8Array.prototype),Object.setPrototypeOf(V,H),V.foo()===42}catch{return!1}}(),y.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}}),Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}}),y.poolSize=8192,y.from=function(V,H,z){return i(V,H,z)},Object.setPrototypeOf(y.prototype,Uint8Array.prototype),Object.setPrototypeOf(y,Uint8Array),y.alloc=function(V,H,z){return function(X,de,ge){return g(X),X<=0?h(X):de!==void 0?typeof ge=="string"?h(X).fill(de,ge):h(X).fill(de):h(X)}(V,H,z)},y.allocUnsafe=function(V){return d(V)},y.allocUnsafeSlow=function(V){return d(V)},y.isBuffer=function(V){return V!=null&&V._isBuffer===!0&&V!==y.prototype},y.compare=function(V,H){if(J(V,Uint8Array)&&(V=y.from(V,V.offset,V.byteLength)),J(H,Uint8Array)&&(H=y.from(H,H.offset,H.byteLength)),!y.isBuffer(V)||!y.isBuffer(H))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(V===H)return 0;for(var z=V.length,X=H.length,de=0,ge=Math.min(z,X);de<ge;++de)if(V[de]!==H[de]){z=V[de],X=H[de];break}return z<X?-1:X<z?1:0},y.isEncoding=function(V){switch(String(V).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(V,H){if(!Array.isArray(V))throw new TypeError('"list" argument must be an Array of Buffers');if(V.length===0)return y.alloc(0);var z;if(H===void 0)for(H=0,z=0;z<V.length;++z)H+=V[z].length;var X=y.allocUnsafe(H),de=0;for(z=0;z<V.length;++z){var ge=V[z];if(J(ge,Uint8Array))de+ge.length>X.length?y.from(ge).copy(X,de):Uint8Array.prototype.set.call(X,ge,de);else{if(!y.isBuffer(ge))throw new TypeError('"list" argument must be an Array of Buffers');ge.copy(X,de)}de+=ge.length}return X},y.byteLength=m,y.prototype._isBuffer=!0,y.prototype.swap16=function(){var V=this.length;if(V%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var H=0;H<V;H+=2)A(this,H,H+1);return this},y.prototype.swap32=function(){var V=this.length;if(V%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var H=0;H<V;H+=4)A(this,H,H+3),A(this,H+1,H+2);return this},y.prototype.swap64=function(){var V=this.length;if(V%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var H=0;H<V;H+=8)A(this,H,H+7),A(this,H+1,H+6),A(this,H+2,H+5),A(this,H+3,H+4);return this},y.prototype.toString=function(){var V=this.length;return V===0?"":arguments.length===0?U(this,0,V):S.apply(this,arguments)},y.prototype.toLocaleString=y.prototype.toString,y.prototype.equals=function(V){if(!y.isBuffer(V))throw new TypeError("Argument must be a Buffer");return this===V||y.compare(this,V)===0},y.prototype.inspect=function(){var V="",H=R.INSPECT_MAX_BYTES;return V=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim(),this.length>H&&(V+=" ... "),"<Buffer "+V+">"},l&&(y.prototype[l]=y.prototype.inspect),y.prototype.compare=function(V,H,z,X,de){if(J(V,Uint8Array)&&(V=y.from(V,V.offset,V.byteLength)),!y.isBuffer(V))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof V);if(H===void 0&&(H=0),z===void 0&&(z=V?V.length:0),X===void 0&&(X=0),de===void 0&&(de=this.length),H<0||z>V.length||X<0||de>this.length)throw new RangeError("out of range index");if(X>=de&&H>=z)return 0;if(X>=de)return-1;if(H>=z)return 1;if(this===V)return 0;for(var ge=(de>>>=0)-(X>>>=0),Ge=(z>>>=0)-(H>>>=0),it=Math.min(ge,Ge),Ye=this.slice(X,de),Ke=V.slice(H,z),dt=0;dt<it;++dt)if(Ye[dt]!==Ke[dt]){ge=Ye[dt],Ge=Ke[dt];break}return ge<Ge?-1:Ge<ge?1:0},y.prototype.includes=function(V,H,z){return this.indexOf(V,H,z)!==-1},y.prototype.indexOf=function(V,H,z){return _(this,V,H,z,!0)},y.prototype.lastIndexOf=function(V,H,z){return _(this,V,H,z,!1)},y.prototype.write=function(V,H,z,X){if(H===void 0)X="utf8",z=this.length,H=0;else if(z===void 0&&typeof H=="string")X=H,z=this.length,H=0;else{if(!isFinite(H))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");H>>>=0,isFinite(z)?(z>>>=0,X===void 0&&(X="utf8")):(X=z,z=void 0)}var de=this.length-H;if((z===void 0||z>de)&&(z=de),V.length>0&&(z<0||H<0)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");for(var ge=!1;;)switch(X){case"hex":return f(this,V,H,z);case"utf8":case"utf-8":return b(this,V,H,z);case"ascii":case"latin1":case"binary":return p(this,V,H,z);case"base64":return k(this,V,H,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,V,H,z);default:if(ge)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),ge=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var G=4096;function ee(V,H,z){var X="";z=Math.min(V.length,z);for(var de=H;de<z;++de)X+=String.fromCharCode(127&V[de]);return X}function ne(V,H,z){var X="";z=Math.min(V.length,z);for(var de=H;de<z;++de)X+=String.fromCharCode(V[de]);return X}function re(V,H,z){var X=V.length;(!H||H<0)&&(H=0),(!z||z<0||z>X)&&(z=X);for(var de="",ge=H;ge<z;++ge)de+=Ce[V[ge]];return de}function oe(V,H,z){for(var X=V.slice(H,z),de="",ge=0;ge<X.length-1;ge+=2)de+=String.fromCharCode(X[ge]+256*X[ge+1]);return de}function W(V,H,z){if(V%1!=0||V<0)throw new RangeError("offset is not uint");if(V+H>z)throw new RangeError("Trying to access beyond buffer length")}function Te(V,H,z,X,de,ge){if(!y.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>de||H<ge)throw new RangeError('"value" argument is out of bounds');if(z+X>V.length)throw new RangeError("Index out of range")}function Ue(V,H,z,X,de,ge){if(z+X>V.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function ze(V,H,z,X,de){return H=+H,z>>>=0,de||Ue(V,0,z,4),T.write(V,H,z,X,23,4),z+4}function le(V,H,z,X,de){return H=+H,z>>>=0,de||Ue(V,0,z,8),T.write(V,H,z,X,52,8),z+8}y.prototype.slice=function(V,H){var z=this.length;(V=~~V)<0?(V+=z)<0&&(V=0):V>z&&(V=z),(H=H===void 0?z:~~H)<0?(H+=z)<0&&(H=0):H>z&&(H=z),H<V&&(H=V);var X=this.subarray(V,H);return Object.setPrototypeOf(X,y.prototype),X},y.prototype.readUintLE=y.prototype.readUIntLE=function(V,H,z){V>>>=0,H>>>=0,z||W(V,H,this.length);for(var X=this[V],de=1,ge=0;++ge<H&&(de*=256);)X+=this[V+ge]*de;return X},y.prototype.readUintBE=y.prototype.readUIntBE=function(V,H,z){V>>>=0,H>>>=0,z||W(V,H,this.length);for(var X=this[V+--H],de=1;H>0&&(de*=256);)X+=this[V+--H]*de;return X},y.prototype.readUint8=y.prototype.readUInt8=function(V,H){return V>>>=0,H||W(V,1,this.length),this[V]},y.prototype.readUint16LE=y.prototype.readUInt16LE=function(V,H){return V>>>=0,H||W(V,2,this.length),this[V]|this[V+1]<<8},y.prototype.readUint16BE=y.prototype.readUInt16BE=function(V,H){return V>>>=0,H||W(V,2,this.length),this[V]<<8|this[V+1]},y.prototype.readUint32LE=y.prototype.readUInt32LE=function(V,H){return V>>>=0,H||W(V,4,this.length),(this[V]|this[V+1]<<8|this[V+2]<<16)+16777216*this[V+3]},y.prototype.readUint32BE=y.prototype.readUInt32BE=function(V,H){return V>>>=0,H||W(V,4,this.length),16777216*this[V]+(this[V+1]<<16|this[V+2]<<8|this[V+3])},y.prototype.readIntLE=function(V,H,z){V>>>=0,H>>>=0,z||W(V,H,this.length);for(var X=this[V],de=1,ge=0;++ge<H&&(de*=256);)X+=this[V+ge]*de;return X>=(de*=128)&&(X-=Math.pow(2,8*H)),X},y.prototype.readIntBE=function(V,H,z){V>>>=0,H>>>=0,z||W(V,H,this.length);for(var X=H,de=1,ge=this[V+--X];X>0&&(de*=256);)ge+=this[V+--X]*de;return ge>=(de*=128)&&(ge-=Math.pow(2,8*H)),ge},y.prototype.readInt8=function(V,H){return V>>>=0,H||W(V,1,this.length),128&this[V]?-1*(255-this[V]+1):this[V]},y.prototype.readInt16LE=function(V,H){V>>>=0,H||W(V,2,this.length);var z=this[V]|this[V+1]<<8;return 32768&z?4294901760|z:z},y.prototype.readInt16BE=function(V,H){V>>>=0,H||W(V,2,this.length);var z=this[V+1]|this[V]<<8;return 32768&z?4294901760|z:z},y.prototype.readInt32LE=function(V,H){return V>>>=0,H||W(V,4,this.length),this[V]|this[V+1]<<8|this[V+2]<<16|this[V+3]<<24},y.prototype.readInt32BE=function(V,H){return V>>>=0,H||W(V,4,this.length),this[V]<<24|this[V+1]<<16|this[V+2]<<8|this[V+3]},y.prototype.readFloatLE=function(V,H){return V>>>=0,H||W(V,4,this.length),T.read(this,V,!0,23,4)},y.prototype.readFloatBE=function(V,H){return V>>>=0,H||W(V,4,this.length),T.read(this,V,!1,23,4)},y.prototype.readDoubleLE=function(V,H){return V>>>=0,H||W(V,8,this.length),T.read(this,V,!0,52,8)},y.prototype.readDoubleBE=function(V,H){return V>>>=0,H||W(V,8,this.length),T.read(this,V,!1,52,8)},y.prototype.writeUintLE=y.prototype.writeUIntLE=function(V,H,z,X){V=+V,H>>>=0,z>>>=0,X||Te(this,V,H,z,Math.pow(2,8*z)-1,0);var de=1,ge=0;for(this[H]=255&V;++ge<z&&(de*=256);)this[H+ge]=V/de&255;return H+z},y.prototype.writeUintBE=y.prototype.writeUIntBE=function(V,H,z,X){V=+V,H>>>=0,z>>>=0,X||Te(this,V,H,z,Math.pow(2,8*z)-1,0);var de=z-1,ge=1;for(this[H+de]=255&V;--de>=0&&(ge*=256);)this[H+de]=V/ge&255;return H+z},y.prototype.writeUint8=y.prototype.writeUInt8=function(V,H,z){return V=+V,H>>>=0,z||Te(this,V,H,1,255,0),this[H]=255&V,H+1},y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(V,H,z){return V=+V,H>>>=0,z||Te(this,V,H,2,65535,0),this[H]=255&V,this[H+1]=V>>>8,H+2},y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(V,H,z){return V=+V,H>>>=0,z||Te(this,V,H,2,65535,0),this[H]=V>>>8,this[H+1]=255&V,H+2},y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(V,H,z){return V=+V,H>>>=0,z||Te(this,V,H,4,4294967295,0),this[H+3]=V>>>24,this[H+2]=V>>>16,this[H+1]=V>>>8,this[H]=255&V,H+4},y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(V,H,z){return V=+V,H>>>=0,z||Te(this,V,H,4,4294967295,0),this[H]=V>>>24,this[H+1]=V>>>16,this[H+2]=V>>>8,this[H+3]=255&V,H+4},y.prototype.writeIntLE=function(V,H,z,X){if(V=+V,H>>>=0,!X){var de=Math.pow(2,8*z-1);Te(this,V,H,z,de-1,-de)}var ge=0,Ge=1,it=0;for(this[H]=255&V;++ge<z&&(Ge*=256);)V<0&&it===0&&this[H+ge-1]!==0&&(it=1),this[H+ge]=(V/Ge>>0)-it&255;return H+z},y.prototype.writeIntBE=function(V,H,z,X){if(V=+V,H>>>=0,!X){var de=Math.pow(2,8*z-1);Te(this,V,H,z,de-1,-de)}var ge=z-1,Ge=1,it=0;for(this[H+ge]=255&V;--ge>=0&&(Ge*=256);)V<0&&it===0&&this[H+ge+1]!==0&&(it=1),this[H+ge]=(V/Ge>>0)-it&255;return H+z},y.prototype.writeInt8=function(V,H,z){return V=+V,H>>>=0,z||Te(this,V,H,1,127,-128),V<0&&(V=255+V+1),this[H]=255&V,H+1},y.prototype.writeInt16LE=function(V,H,z){return V=+V,H>>>=0,z||Te(this,V,H,2,32767,-32768),this[H]=255&V,this[H+1]=V>>>8,H+2},y.prototype.writeInt16BE=function(V,H,z){return V=+V,H>>>=0,z||Te(this,V,H,2,32767,-32768),this[H]=V>>>8,this[H+1]=255&V,H+2},y.prototype.writeInt32LE=function(V,H,z){return V=+V,H>>>=0,z||Te(this,V,H,4,2147483647,-2147483648),this[H]=255&V,this[H+1]=V>>>8,this[H+2]=V>>>16,this[H+3]=V>>>24,H+4},y.prototype.writeInt32BE=function(V,H,z){return V=+V,H>>>=0,z||Te(this,V,H,4,2147483647,-2147483648),V<0&&(V=4294967295+V+1),this[H]=V>>>24,this[H+1]=V>>>16,this[H+2]=V>>>8,this[H+3]=255&V,H+4},y.prototype.writeFloatLE=function(V,H,z){return ze(this,V,H,!0,z)},y.prototype.writeFloatBE=function(V,H,z){return ze(this,V,H,!1,z)},y.prototype.writeDoubleLE=function(V,H,z){return le(this,V,H,!0,z)},y.prototype.writeDoubleBE=function(V,H,z){return le(this,V,H,!1,z)},y.prototype.copy=function(V,H,z,X){if(!y.isBuffer(V))throw new TypeError("argument should be a Buffer");if(z||(z=0),X||X===0||(X=this.length),H>=V.length&&(H=V.length),H||(H=0),X>0&&X<z&&(X=z),X===z||V.length===0||this.length===0)return 0;if(H<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),V.length-H<X-z&&(X=V.length-H+z);var de=X-z;return this===V&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(H,z,X):Uint8Array.prototype.set.call(V,this.subarray(z,X),H),de},y.prototype.fill=function(V,H,z,X){if(typeof V=="string"){if(typeof H=="string"?(X=H,H=0,z=this.length):typeof z=="string"&&(X=z,z=this.length),X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!y.isEncoding(X))throw new TypeError("Unknown encoding: "+X);if(V.length===1){var de=V.charCodeAt(0);(X==="utf8"&&de<128||X==="latin1")&&(V=de)}}else typeof V=="number"?V&=255:typeof V=="boolean"&&(V=Number(V));if(H<0||this.length<H||this.length<z)throw new RangeError("Out of range index");if(z<=H)return this;var ge;if(H>>>=0,z=z===void 0?this.length:z>>>0,V||(V=0),typeof V=="number")for(ge=H;ge<z;++ge)this[ge]=V;else{var Ge=y.isBuffer(V)?V:y.from(V,X),it=Ge.length;if(it===0)throw new TypeError('The value "'+V+'" is invalid for argument "value"');for(ge=0;ge<z-H;++ge)this[ge+H]=Ge[ge%it]}return this};var Se=/[^+/0-9A-Za-z-_]/g;function be(V,H){var z;H=H||1/0;for(var X=V.length,de=null,ge=[],Ge=0;Ge<X;++Ge){if((z=V.charCodeAt(Ge))>55295&&z<57344){if(!de){if(z>56319){(H-=3)>-1&&ge.push(239,191,189);continue}if(Ge+1===X){(H-=3)>-1&&ge.push(239,191,189);continue}de=z;continue}if(z<56320){(H-=3)>-1&&ge.push(239,191,189),de=z;continue}z=65536+(de-55296<<10|z-56320)}else de&&(H-=3)>-1&&ge.push(239,191,189);if(de=null,z<128){if((H-=1)<0)break;ge.push(z)}else if(z<2048){if((H-=2)<0)break;ge.push(z>>6|192,63&z|128)}else if(z<65536){if((H-=3)<0)break;ge.push(z>>12|224,z>>6&63|128,63&z|128)}else{if(!(z<1114112))throw new Error("Invalid code point");if((H-=4)<0)break;ge.push(z>>18|240,z>>12&63|128,z>>6&63|128,63&z|128)}}return ge}function Y(V){return E.toByteArray(function(H){if((H=(H=H.split("=")[0]).trim().replace(Se,"")).length<2)return"";for(;H.length%4!=0;)H+="=";return H}(V))}function Q(V,H,z,X){for(var de=0;de<X&&!(de+z>=H.length||de>=V.length);++de)H[de+z]=V[de];return de}function J(V,H){return V instanceof H||V!=null&&V.constructor!=null&&V.constructor.name!=null&&V.constructor.name===H.name}function fe(V){return V!=V}var Ce=function(){for(var V="0123456789abcdef",H=new Array(256),z=0;z<16;++z)for(var X=16*z,de=0;de<16;++de)H[X+de]=V[z]+V[de];return H}()},6693:(C,R)=>{R.byteLength=function(i){var g=h(i),d=g[0],r=g[1];return 3*(d+r)/4-r},R.toByteArray=function(i){var g,d,r=h(i),t=r[0],u=r[1],m=new T(function(_,v,f){return 3*(v+f)/4-f}(0,t,u)),S=0,A=u>0?t-4:t;for(d=0;d<A;d+=4)g=E[i.charCodeAt(d)]<<18|E[i.charCodeAt(d+1)]<<12|E[i.charCodeAt(d+2)]<<6|E[i.charCodeAt(d+3)],m[S++]=g>>16&255,m[S++]=g>>8&255,m[S++]=255&g;return u===2&&(g=E[i.charCodeAt(d)]<<2|E[i.charCodeAt(d+1)]>>4,m[S++]=255&g),u===1&&(g=E[i.charCodeAt(d)]<<10|E[i.charCodeAt(d+1)]<<4|E[i.charCodeAt(d+2)]>>2,m[S++]=g>>8&255,m[S++]=255&g),m},R.fromByteArray=function(i){for(var g,d=i.length,r=d%3,t=[],u=16383,m=0,S=d-r;m<S;m+=u)t.push(y(i,m,m+u>S?S:m+u));return r===1?(g=i[d-1],t.push(I[g>>2]+I[g<<4&63]+"==")):r===2&&(g=(i[d-2]<<8)+i[d-1],t.push(I[g>>10]+I[g>>4&63]+I[g<<2&63]+"=")),t.join("")};for(var I=[],E=[],T=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0;c<64;++c)I[c]=l[c],E[l.charCodeAt(c)]=c;function h(i){var g=i.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var d=i.indexOf("=");return d===-1&&(d=g),[d,d===g?0:4-d%4]}function y(i,g,d){for(var r,t,u=[],m=g;m<d;m+=3)r=(i[m]<<16&16711680)+(i[m+1]<<8&65280)+(255&i[m+2]),u.push(I[(t=r)>>18&63]+I[t>>12&63]+I[t>>6&63]+I[63&t]);return u.join("")}E["-".charCodeAt(0)]=62,E["_".charCodeAt(0)]=63},2165:(C,R)=>{R.read=function(I,E,T,l,c){var h,y,i=8*c-l-1,g=(1<<i)-1,d=g>>1,r=-7,t=T?c-1:0,u=T?-1:1,m=I[E+t];for(t+=u,h=m&(1<<-r)-1,m>>=-r,r+=i;r>0;h=256*h+I[E+t],t+=u,r-=8);for(y=h&(1<<-r)-1,h>>=-r,r+=l;r>0;y=256*y+I[E+t],t+=u,r-=8);if(h===0)h=1-d;else{if(h===g)return y?NaN:1/0*(m?-1:1);y+=Math.pow(2,l),h-=d}return(m?-1:1)*y*Math.pow(2,h-l)},R.write=function(I,E,T,l,c,h){var y,i,g,d=8*h-c-1,r=(1<<d)-1,t=r>>1,u=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=l?0:h-1,S=l?1:-1,A=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(i=isNaN(E)?1:0,y=r):(y=Math.floor(Math.log(E)/Math.LN2),E*(g=Math.pow(2,-y))<1&&(y--,g*=2),(E+=y+t>=1?u/g:u*Math.pow(2,1-t))*g>=2&&(y++,g/=2),y+t>=r?(i=0,y=r):y+t>=1?(i=(E*g-1)*Math.pow(2,c),y+=t):(i=E*Math.pow(2,t-1)*Math.pow(2,c),y=0));c>=8;I[T+m]=255&i,m+=S,i/=256,c-=8);for(y=y<<c|i,d+=c;d>0;I[T+m]=255&y,m+=S,y/=256,d-=8);I[T+m-S]|=128*A}},6934:(C,R)=>{var I={parseBuffer:function(l){return new E(l).parse()},addBoxProcessor:function(l,c){typeof l=="string"&&typeof c=="function"&&(T.prototype._boxProcessors[l]=c)},createFile:function(){return new E},createBox:function(l,c,h){var y=T.create(l);return c&&c.append(y,h),y},createFullBox:function(l,c,h){var y=I.createBox(l,c,h);return y.version=0,y.flags=0,y},Utils:{}};I.Utils.dataViewToString=function(l,c){var h=c||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(h).decode(l);var y=[],i=0;if(h==="utf-8")for(;i<l.byteLength;){var g=l.getUint8(i++);g<128||(g<224?(g=(31&g)<<6,g|=63&l.getUint8(i++)):g<240?(g=(15&g)<<12,g|=(63&l.getUint8(i++))<<6,g|=63&l.getUint8(i++)):(g=(7&g)<<18,g|=(63&l.getUint8(i++))<<12,g|=(63&l.getUint8(i++))<<6,g|=63&l.getUint8(i++))),y.push(String.fromCharCode(g))}else for(;i<l.byteLength;)y.push(String.fromCharCode(l.getUint8(i++)));return y.join("")},I.Utils.utf8ToByteArray=function(l){var c,h;if(typeof TextEncoder<"u")c=new TextEncoder().encode(l);else for(c=[],h=0;h<l.length;++h){var y=l.charCodeAt(h);y<128?c.push(y):y<2048?(c.push(192|y>>6),c.push(128|63&y)):y<65536?(c.push(224|y>>12),c.push(128|63&y>>6),c.push(128|63&y)):(c.push(240|y>>18),c.push(128|63&y>>12),c.push(128|63&y>>6),c.push(128|63&y))}return c},I.Utils.appendBox=function(l,c,h){if(c._offset=l._cursor.offset,c._root=l._root?l._root:l,c._raw=l._raw,c._parent=l,h!==-1)if(h!=null){var y,i=-1;if(typeof h=="number")i=h;else{if(typeof h=="string")y=h;else{if(typeof h!="object"||!h.type)return void l.boxes.push(c);y=h.type}for(var g=0;g<l.boxes.length;g++)if(y===l.boxes[g].type){i=g+1;break}}l.boxes.splice(i,0,c)}else l.boxes.push(c)},R.parseBuffer=I.parseBuffer,R.addBoxProcessor=I.addBoxProcessor,R.createFile=I.createFile,R.createBox=I.createBox,R.createFullBox=I.createFullBox,R.Utils=I.Utils,I.Cursor=function(l){this.offset=l===void 0?0:l};var E=function(l){this._cursor=new I.Cursor,this.boxes=[],l&&(this._raw=new DataView(l))};E.prototype.fetch=function(l){var c=this.fetchAll(l,!0);return c.length?c[0]:null},E.prototype.fetchAll=function(l,c){var h=[];return E._sweep.call(this,l,h,c),h},E.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var l=T.parse(this);if(l.type===void 0)break;this.boxes.push(l)}return this},E._sweep=function(l,c,h){for(var y in this.type&&this.type==l&&c.push(this),this.boxes){if(c.length&&h)return;E._sweep.call(this.boxes[y],l,c,h)}},E.prototype.write=function(){var l,c=0;for(l=0;l<this.boxes.length;l++)c+=this.boxes[l].getLength(!1);var h=new Uint8Array(c);for(this._rawo=new DataView(h.buffer),this.bytes=h,this._cursor.offset=0,l=0;l<this.boxes.length;l++)this.boxes[l].write();return h.buffer},E.prototype.append=function(l,c){I.Utils.appendBox(this,l,c)};var T=function(){this._cursor=new I.Cursor};T.parse=function(l){var c=new T;return c._offset=l._cursor.offset,c._root=l._root?l._root:l,c._raw=l._raw,c._parent=l,c._parseBox(),l._cursor.offset=c._raw.byteOffset+c._raw.byteLength,c},T.create=function(l){var c=new T;return c.type=l,c.boxes=[],c},T.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],T.prototype._boxProcessors={},T.prototype._procField=function(l,c,h){this._parsing?this[l]=this._readField(c,h):this._writeField(c,h,this[l])},T.prototype._procFieldArray=function(l,c,h,y){var i;if(this._parsing)for(this[l]=[],i=0;i<c;i++)this[l][i]=this._readField(h,y);else for(i=0;i<this[l].length;i++)this._writeField(h,y,this[l][i])},T.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},T.prototype._procEntries=function(l,c,h){var y;if(this._parsing)for(this[l]=[],y=0;y<c;y++)this[l].push({}),h.call(this,this[l][y]);else for(y=0;y<c;y++)h.call(this,this[l][y])},T.prototype._procSubEntries=function(l,c,h,y){var i;if(this._parsing)for(l[c]=[],i=0;i<h;i++)l[c].push({}),y.call(this,l[c][i]);else for(i=0;i<h;i++)y.call(this,l[c][i])},T.prototype._procEntryField=function(l,c,h,y){this._parsing?l[c]=this._readField(h,y):this._writeField(h,y,l[c])},T.prototype._procSubBoxes=function(l,c){var h;if(this._parsing)for(this[l]=[],h=0;h<c;h++)this[l].push(T.parse(this));else for(h=0;h<c;h++)this._rawo?this[l][h].write():this.size+=this[l][h].getLength()},T.prototype._readField=function(l,c){switch(l){case"uint":return this._readUint(c);case"int":return this._readInt(c);case"template":return this._readTemplate(c);case"string":return c===-1?this._readTerminatedString():this._readString(c);case"data":return this._readData(c);case"utf8":return this._readUTF8String();default:return-1}},T.prototype._readInt=function(l){var c=null,h=this._cursor.offset-this._raw.byteOffset;switch(l){case 8:c=this._raw.getInt8(h);break;case 16:c=this._raw.getInt16(h);break;case 32:c=this._raw.getInt32(h);break;case 64:var y=this._raw.getInt32(h),i=this._raw.getInt32(h+4);c=y*Math.pow(2,32)+i}return this._cursor.offset+=l>>3,c},T.prototype._readUint=function(l){var c,h,y=null,i=this._cursor.offset-this._raw.byteOffset;switch(l){case 8:y=this._raw.getUint8(i);break;case 16:y=this._raw.getUint16(i);break;case 24:y=((c=this._raw.getUint16(i))<<8)+(h=this._raw.getUint8(i+2));break;case 32:y=this._raw.getUint32(i);break;case 64:c=this._raw.getUint32(i),h=this._raw.getUint32(i+4),y=c*Math.pow(2,32)+h}return this._cursor.offset+=l>>3,y},T.prototype._readString=function(l){for(var c="",h=0;h<l;h++){var y=this._readUint(8);c+=String.fromCharCode(y)}return c},T.prototype._readTemplate=function(l){return this._readUint(l/2)+this._readUint(l/2)/Math.pow(2,l/2)},T.prototype._readTerminatedString=function(){for(var l="";this._cursor.offset-this._offset<this._raw.byteLength;){var c=this._readUint(8);if(c===0)break;l+=String.fromCharCode(c)}return l},T.prototype._readData=function(l){var c=l>0?l:this._raw.byteLength-(this._cursor.offset-this._offset);if(c>0){var h=new Uint8Array(this._raw.buffer,this._cursor.offset,c);return this._cursor.offset+=c,h}return null},T.prototype._readUTF8String=function(){var l=this._raw.byteLength-(this._cursor.offset-this._offset),c=null;return l>0&&(c=new DataView(this._raw.buffer,this._cursor.offset,l),this._cursor.offset+=l),c&&I.Utils.dataViewToString(c)},T.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},T.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},T.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(T.parse(this))},T.prototype.append=function(l,c){I.Utils.appendBox(this,l,c)},T.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var l=0;l<this.boxes.length;l++)this.size+=this.boxes[l].getLength();return this._data&&this._writeData(this._data),this.size},T.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var l=0;l<this.boxes.length;l++)this.boxes[l].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},T.prototype._writeInt=function(l,c){if(this._rawo){var h=this._cursor.offset-this._rawo.byteOffset;switch(l){case 8:this._rawo.setInt8(h,c);break;case 16:this._rawo.setInt16(h,c);break;case 32:this._rawo.setInt32(h,c);break;case 64:var y=Math.floor(c/Math.pow(2,32)),i=c-y*Math.pow(2,32);this._rawo.setUint32(h,y),this._rawo.setUint32(h+4,i)}this._cursor.offset+=l>>3}else this.size+=l>>3},T.prototype._writeUint=function(l,c){if(this._rawo){var h,y,i=this._cursor.offset-this._rawo.byteOffset;switch(l){case 8:this._rawo.setUint8(i,c);break;case 16:this._rawo.setUint16(i,c);break;case 24:h=(16776960&c)>>8,y=255&c,this._rawo.setUint16(i,h),this._rawo.setUint8(i+2,y);break;case 32:this._rawo.setUint32(i,c);break;case 64:y=c-(h=Math.floor(c/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,h),this._rawo.setUint32(i+4,y)}this._cursor.offset+=l>>3}else this.size+=l>>3},T.prototype._writeString=function(l,c){for(var h=0;h<l;h++)this._writeUint(8,c.charCodeAt(h))},T.prototype._writeTerminatedString=function(l){if(l.length!==0){for(var c=0;c<l.length;c++)this._writeUint(8,l.charCodeAt(c));this._writeUint(8,0)}},T.prototype._writeTemplate=function(l,c){var h=Math.floor(c),y=(c-h)*Math.pow(2,l/2);this._writeUint(l/2,h),this._writeUint(l/2,y)},T.prototype._writeData=function(l){if(l)if(this._rawo){if(l instanceof Array){for(var c=this._cursor.offset-this._rawo.byteOffset,h=0;h<l.length;h++)this._rawo.setInt8(c+h,l[h]);this._cursor.offset+=l.length}l instanceof Uint8Array&&(this._root.bytes.set(l,this._cursor.offset),this._cursor.offset+=l.length)}else this.size+=l.length},T.prototype._writeUTF8String=function(l){var c=I.Utils.utf8ToByteArray(l);if(this._rawo)for(var h=new DataView(this._rawo.buffer,this._cursor.offset,c.length),y=0;y<c.length;y++)h.setUint8(y,c[y]);else this.size+=c.length},T.prototype._writeField=function(l,c,h){switch(l){case"uint":this._writeUint(c,h);break;case"int":this._writeInt(c,h);break;case"template":this._writeTemplate(c,h);break;case"string":c==-1?this._writeTerminatedString(h):this._writeString(c,h);break;case"data":this._writeData(h);break;case"utf8":this._writeUTF8String(h)}},T.prototype._boxProcessors.avc1=T.prototype._boxProcessors.avc2=T.prototype._boxProcessors.avc3=T.prototype._boxProcessors.avc4=T.prototype._boxProcessors.hvc1=T.prototype._boxProcessors.hev1=T.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},T.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(l){this._procEntryField(l,"sample_count","uint",32),this._procEntryField(l,"sample_offset",this.version===1?"int":"uint",32)})},T.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},T.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(l){this._procEntryField(l,"segment_duration","uint",this.version===1?64:32),this._procEntryField(l,"media_time","int",this.version===1?64:32),this._procEntryField(l,"media_rate_integer","int",16),this._procEntryField(l,"media_rate_fraction","int",16)})},T.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},T.prototype._boxProcessors.free=T.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},T.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},T.prototype._boxProcessors.ftyp=T.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var l=-1;this._parsing&&(l=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",l,"string",4)},T.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},T.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},T.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},T.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},T.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},T.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},T.prototype._boxProcessors.mp4a=T.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},T.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},T.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},T.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},T.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},T.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},T.prototype._boxProcessors.sdtp=function(){this._procFullBox();var l=-1;this._parsing&&(l=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",l,"uint",8)},T.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(l){this._parsing||(l.reference=(1&l.reference_type)<<31,l.reference|=2147483647&l.referenced_size,l.sap=(1&l.starts_with_SAP)<<31,l.sap|=(3&l.SAP_type)<<28,l.sap|=268435455&l.SAP_delta_time),this._procEntryField(l,"reference","uint",32),this._procEntryField(l,"subsegment_duration","uint",32),this._procEntryField(l,"sap","uint",32),this._parsing&&(l.reference_type=l.reference>>31&1,l.referenced_size=2147483647&l.reference,l.starts_with_SAP=l.sap>>31&1,l.SAP_type=l.sap>>28&7,l.SAP_delta_time=268435455&l.sap)})},T.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},T.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(l){this._procEntryField(l,"ranges_count","uint",32),this._procSubEntries(l,"ranges",l.ranges_count,function(c){this._procEntryField(c,"level","uint",8),this._procEntryField(c,"range_size","uint",24)})})},T.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},T.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},T.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(l){this._procEntryField(l,"sample_count","uint",32),this._procEntryField(l,"sample_delta","uint",32)})},T.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(l){this._procEntryField(l,"sample_delta","uint",32),this._procEntryField(l,"subsample_count","uint",16),this._procSubEntries(l,"subsamples",l.subsample_count,function(c){this._procEntryField(c,"subsample_size","uint",this.version===1?32:16),this._procEntryField(c,"subsample_priority","uint",8),this._procEntryField(c,"discardable","uint",8),this._procEntryField(c,"codec_specific_parameters","uint",32)})})},T.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},T.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},T.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},T.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(l){this._procEntryField(l,"time","uint",this.version===1?64:32),this._procEntryField(l,"moof_offset","uint",this.version===1?64:32),this._procEntryField(l,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(l,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(l,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},T.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},T.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},T.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(l){256&this.flags&&this._procEntryField(l,"sample_duration","uint",32),512&this.flags&&this._procEntryField(l,"sample_size","uint",32),1024&this.flags&&this._procEntryField(l,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(l,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},T.prototype._boxProcessors["url "]=T.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},T.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},T.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},T.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},T.prototype._boxProcessors.vtte=function(){}},5530:(C,R,I)=>{C.exports=I(6146).polyfill()},6146:function(C,R,I){C.exports=function(){function E(Y){return typeof Y=="function"}var T=Array.isArray?Array.isArray:function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},l=0,c=void 0,h=void 0,y=function(Y,Q){m[l]=Y,m[l+1]=Q,(l+=2)===2&&(h?h(S):b())},i=typeof window<"u"?window:void 0,g=i||{},d=g.MutationObserver||g.WebKitMutationObserver,r=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",t=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function u(){var Y=setTimeout;return function(){return Y(S,1)}}var m=new Array(1e3);function S(){for(var Y=0;Y<l;Y+=2)(0,m[Y])(m[Y+1]),m[Y]=void 0,m[Y+1]=void 0;l=0}var A,_,v,f,b=void 0;function p(Y,Q){var J=this,fe=new this.constructor(j);fe[P]===void 0&&le(fe);var Ce=J._state;if(Ce){var V=arguments[Ce-1];y(function(){return Ue(Ce,fe,V,J._result)})}else W(J,fe,Y,Q);return fe}function k(Y){if(Y&&typeof Y=="object"&&Y.constructor===this)return Y;var Q=new this(j);return ee(Q,Y),Q}b=r?function(){return process.nextTick(S)}:d?(_=0,v=new d(S),f=document.createTextNode(""),v.observe(f,{characterData:!0}),function(){f.data=_=++_%2}):t?((A=new MessageChannel).port1.onmessage=S,function(){return A.port2.postMessage(0)}):i===void 0?function(){try{var Y=Function("return this")().require("vertx");return(c=Y.runOnLoop||Y.runOnContext)!==void 0?function(){c(S)}:u()}catch{return u()}}():u();var P=Math.random().toString(36).substring(2);function j(){}var U=void 0;function G(Y,Q,J){Q.constructor===Y.constructor&&J===p&&Q.constructor.resolve===k?function(fe,Ce){Ce._state===1?re(fe,Ce._result):Ce._state===2?oe(fe,Ce._result):W(Ce,void 0,function(V){return ee(fe,V)},function(V){return oe(fe,V)})}(Y,Q):J===void 0?re(Y,Q):E(J)?function(fe,Ce,V){y(function(H){var z=!1,X=function(de,ge,Ge,it){try{de.call(ge,Ge,it)}catch(Ye){return Ye}}(V,Ce,function(de){z||(z=!0,Ce!==de?ee(H,de):re(H,de))},function(de){z||(z=!0,oe(H,de))},H._label);!z&&X&&(z=!0,oe(H,X))},fe)}(Y,Q,J):re(Y,Q)}function ee(Y,Q){if(Y===Q)oe(Y,new TypeError("You cannot resolve a promise with itself"));else if(Ce=typeof(fe=Q),fe===null||Ce!=="object"&&Ce!=="function")re(Y,Q);else{var J=void 0;try{J=Q.then}catch(V){return void oe(Y,V)}G(Y,Q,J)}var fe,Ce}function ne(Y){Y._onerror&&Y._onerror(Y._result),Te(Y)}function re(Y,Q){Y._state===U&&(Y._result=Q,Y._state=1,Y._subscribers.length!==0&&y(Te,Y))}function oe(Y,Q){Y._state===U&&(Y._state=2,Y._result=Q,y(ne,Y))}function W(Y,Q,J,fe){var Ce=Y._subscribers,V=Ce.length;Y._onerror=null,Ce[V]=Q,Ce[V+1]=J,Ce[V+2]=fe,V===0&&Y._state&&y(Te,Y)}function Te(Y){var Q=Y._subscribers,J=Y._state;if(Q.length!==0){for(var fe=void 0,Ce=void 0,V=Y._result,H=0;H<Q.length;H+=3)fe=Q[H],Ce=Q[H+J],fe?Ue(J,fe,Ce,V):Ce(V);Y._subscribers.length=0}}function Ue(Y,Q,J,fe){var Ce=E(J),V=void 0,H=void 0,z=!0;if(Ce){try{V=J(fe)}catch(X){z=!1,H=X}if(Q===V)return void oe(Q,new TypeError("A promises callback cannot return that same promise."))}else V=fe;Q._state!==U||(Ce&&z?ee(Q,V):z===!1?oe(Q,H):Y===1?re(Q,V):Y===2&&oe(Q,V))}var ze=0;function le(Y){Y[P]=ze++,Y._state=void 0,Y._result=void 0,Y._subscribers=[]}var Se=function(){function Y(Q,J){this._instanceConstructor=Q,this.promise=new Q(j),this.promise[P]||le(this.promise),T(J)?(this.length=J.length,this._remaining=J.length,this._result=new Array(this.length),this.length===0?re(this.promise,this._result):(this.length=this.length||0,this._enumerate(J),this._remaining===0&&re(this.promise,this._result))):oe(this.promise,new Error("Array Methods must be provided an Array"))}return Y.prototype._enumerate=function(Q){for(var J=0;this._state===U&&J<Q.length;J++)this._eachEntry(Q[J],J)},Y.prototype._eachEntry=function(Q,J){var fe=this._instanceConstructor,Ce=fe.resolve;if(Ce===k){var V=void 0,H=void 0,z=!1;try{V=Q.then}catch(de){z=!0,H=de}if(V===p&&Q._state!==U)this._settledAt(Q._state,J,Q._result);else if(typeof V!="function")this._remaining--,this._result[J]=Q;else if(fe===be){var X=new fe(j);z?oe(X,H):G(X,Q,V),this._willSettleAt(X,J)}else this._willSettleAt(new fe(function(de){return de(Q)}),J)}else this._willSettleAt(Ce(Q),J)},Y.prototype._settledAt=function(Q,J,fe){var Ce=this.promise;Ce._state===U&&(this._remaining--,Q===2?oe(Ce,fe):this._result[J]=fe),this._remaining===0&&re(Ce,this._result)},Y.prototype._willSettleAt=function(Q,J){var fe=this;W(Q,void 0,function(Ce){return fe._settledAt(1,J,Ce)},function(Ce){return fe._settledAt(2,J,Ce)})},Y}(),be=function(){function Y(Q){this[P]=ze++,this._result=this._state=void 0,this._subscribers=[],j!==Q&&(typeof Q!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Y?function(J,fe){try{fe(function(Ce){ee(J,Ce)},function(Ce){oe(J,Ce)})}catch(Ce){oe(J,Ce)}}(this,Q):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Y.prototype.catch=function(Q){return this.then(null,Q)},Y.prototype.finally=function(Q){var J=this,fe=J.constructor;return E(Q)?J.then(function(Ce){return fe.resolve(Q()).then(function(){return Ce})},function(Ce){return fe.resolve(Q()).then(function(){throw Ce})}):J.then(Q,Q)},Y}();return be.prototype.then=p,be.all=function(Y){return new Se(this,Y).promise},be.race=function(Y){var Q=this;return T(Y)?new Q(function(J,fe){for(var Ce=Y.length,V=0;V<Ce;V++)Q.resolve(Y[V]).then(J,fe)}):new Q(function(J,fe){return fe(new TypeError("You must pass an array to race."))})},be.resolve=k,be.reject=function(Y){var Q=new this(j);return oe(Q,Y),Q},be._setScheduler=function(Y){h=Y},be._setAsap=function(Y){y=Y},be._asap=y,be.polyfill=function(){var Y=void 0;if(I.g!==void 0)Y=I.g;else if(typeof self<"u")Y=self;else try{Y=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Q=Y.Promise;if(Q){var J=null;try{J=Object.prototype.toString.call(Q.resolve())}catch{}if(J==="[object Promise]"&&!Q.cast)return}Y.Promise=be},be.Promise=be,be}()},1159:C=>{var R,I=typeof Reflect=="object"?Reflect:null,E=I&&typeof I.apply=="function"?I.apply:function(S,A,_){return Function.prototype.apply.call(S,A,_)};R=I&&typeof I.ownKeys=="function"?I.ownKeys:Object.getOwnPropertySymbols?function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:function(S){return Object.getOwnPropertyNames(S)};var T=Number.isNaN||function(S){return S!=S};function l(){l.init.call(this)}C.exports=l,C.exports.once=function(S,A){return new Promise(function(_,v){function f(p){S.removeListener(A,b),v(p)}function b(){typeof S.removeListener=="function"&&S.removeListener("error",f),_([].slice.call(arguments))}m(S,A,b,{once:!0}),A!=="error"&&function(p,k,P){typeof p.on=="function"&&m(p,"error",k,{once:!0})}(S,f)})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var c=10;function h(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}function y(S){return S._maxListeners===void 0?l.defaultMaxListeners:S._maxListeners}function i(S,A,_,v){var f,b,p,k;if(h(_),(b=S._events)===void 0?(b=S._events=Object.create(null),S._eventsCount=0):(b.newListener!==void 0&&(S.emit("newListener",A,_.listener?_.listener:_),b=S._events),p=b[A]),p===void 0)p=b[A]=_,++S._eventsCount;else if(typeof p=="function"?p=b[A]=v?[_,p]:[p,_]:v?p.unshift(_):p.push(_),(f=y(S))>0&&p.length>f&&!p.warned){p.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=S,P.type=A,P.count=p.length,k=P,console&&console.warn&&console.warn(k)}return S}function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(S,A,_){var v={fired:!1,wrapFn:void 0,target:S,type:A,listener:_},f=g.bind(v);return f.listener=_,v.wrapFn=f,f}function r(S,A,_){var v=S._events;if(v===void 0)return[];var f=v[A];return f===void 0?[]:typeof f=="function"?_?[f.listener||f]:[f]:_?function(b){for(var p=new Array(b.length),k=0;k<p.length;++k)p[k]=b[k].listener||b[k];return p}(f):u(f,f.length)}function t(S){var A=this._events;if(A!==void 0){var _=A[S];if(typeof _=="function")return 1;if(_!==void 0)return _.length}return 0}function u(S,A){for(var _=new Array(A),v=0;v<A;++v)_[v]=S[v];return _}function m(S,A,_,v){if(typeof S.on=="function")v.once?S.once(A,_):S.on(A,_);else{if(typeof S.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S);S.addEventListener(A,function f(b){v.once&&S.removeEventListener(A,f),_(b)})}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(S){if(typeof S!="number"||S<0||T(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");c=S}}),l.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||T(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this},l.prototype.getMaxListeners=function(){return y(this)},l.prototype.emit=function(S){for(var A=[],_=1;_<arguments.length;_++)A.push(arguments[_]);var v=S==="error",f=this._events;if(f!==void 0)v=v&&f.error===void 0;else if(!v)return!1;if(v){var b;if(A.length>0&&(b=A[0]),b instanceof Error)throw b;var p=new Error("Unhandled error."+(b?" ("+b.message+")":""));throw p.context=b,p}var k=f[S];if(k===void 0)return!1;if(typeof k=="function")E(k,this,A);else{var P=k.length,j=u(k,P);for(_=0;_<P;++_)E(j[_],this,A)}return!0},l.prototype.addListener=function(S,A){return i(this,S,A,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(S,A){return i(this,S,A,!0)},l.prototype.once=function(S,A){return h(A),this.on(S,d(this,S,A)),this},l.prototype.prependOnceListener=function(S,A){return h(A),this.prependListener(S,d(this,S,A)),this},l.prototype.removeListener=function(S,A){var _,v,f,b,p;if(h(A),(v=this._events)===void 0)return this;if((_=v[S])===void 0)return this;if(_===A||_.listener===A)--this._eventsCount==0?this._events=Object.create(null):(delete v[S],v.removeListener&&this.emit("removeListener",S,_.listener||A));else if(typeof _!="function"){for(f=-1,b=_.length-1;b>=0;b--)if(_[b]===A||_[b].listener===A){p=_[b].listener,f=b;break}if(f<0)return this;f===0?_.shift():function(k,P){for(;P+1<k.length;P++)k[P]=k[P+1];k.pop()}(_,f),_.length===1&&(v[S]=_[0]),v.removeListener!==void 0&&this.emit("removeListener",S,p||A)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(S){var A,_,v;if((_=this._events)===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[S]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete _[S]),this;if(arguments.length===0){var f,b=Object.keys(_);for(v=0;v<b.length;++v)(f=b[v])!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(A=_[S])=="function")this.removeListener(S,A);else if(A!==void 0)for(v=A.length-1;v>=0;v--)this.removeListener(S,A[v]);return this},l.prototype.listeners=function(S){return r(this,S,!0)},l.prototype.rawListeners=function(S){return r(this,S,!1)},l.listenerCount=function(S,A){return typeof S.listenerCount=="function"?S.listenerCount(A):t.call(S,A)},l.prototype.listenerCount=t,l.prototype.eventNames=function(){return this._eventsCount>0?R(this._events):[]}},3101:C=>{var R=Array.isArray,I=Object.keys,E=Object.prototype.hasOwnProperty;C.exports=function T(l,c){if(l===c)return!0;if(l&&c&&typeof l=="object"&&typeof c=="object"){var h,y,i,g=R(l),d=R(c);if(g&&d){if((y=l.length)!=c.length)return!1;for(h=y;h--!=0;)if(!T(l[h],c[h]))return!1;return!0}if(g!=d)return!1;var r=l instanceof Date,t=c instanceof Date;if(r!=t)return!1;if(r&&t)return l.getTime()==c.getTime();var u=l instanceof RegExp,m=c instanceof RegExp;if(u!=m)return!1;if(u&&m)return l.toString()==c.toString();var S=I(l);if((y=S.length)!==I(c).length)return!1;for(h=y;h--!=0;)if(!E.call(c,S[h]))return!1;for(h=y;h--!=0;)if(!T(l[i=S[h]],c[i]))return!1;return!0}return l!=l&&c!=c}},3362:(C,R,I)=>{(function(E,T,l,c,h){function y(H){if("contents"in H)for(var z=("styleAttrs"in H)?H.styleAttrs[c.byName.ruby.qname]:null,X=H.kind==="span"&&(z==="container"||z==="textContainer"||z==="baseContainer"),de=H.contents.length-1;de>=0;de--)!X||"styleAttrs"in H.contents[de]&&c.byName.ruby.qname in H.contents[de].styleAttrs?y(H.contents[de]):delete H.contents[de]}function i(H,z,X,de){var ge=de&&de.timeContainer==="seq",Ge=0;de&&(Ge=ge&&X?X.end:de.begin),z.begin=z.explicit_begin?z.explicit_begin+Ge:Ge;var it=z.begin,Ye=null;if("sets"in z)for(var Ke=0;Ke<z.sets.length;Ke++)i(H,z.sets[Ke],Ye,z),it=z.timeContainer==="seq"?z.sets[Ke].end:Math.max(it,z.sets[Ke].end),Ye=z.sets[Ke];if("contents"in z){if("contents"in z)for(var dt=0;dt<z.contents.length;dt++)i(H,z.contents[dt],Ye,z),it=z.timeContainer==="seq"?z.contents[dt].end:Math.max(it,z.contents[dt].end),Ye=z.contents[dt]}else it=ge?z.begin:Number.POSITIVE_INFINITY;z.explicit_end!==null&&z.explicit_dur!==null?z.end=Math.min(z.begin+z.explicit_dur,Ge+z.explicit_end):z.explicit_end===null&&z.explicit_dur!==null?z.end=z.begin+z.explicit_dur:z.explicit_end!==null&&z.explicit_dur===null?z.end=Ge+z.explicit_end:z.end=it,delete z.explicit_begin,delete z.explicit_dur,delete z.explicit_end,H._registerEvent(z)}function g(H){this.node=H}function d(){this.events=[],this.head=new r,this.body=null}function r(){this.styling=new t,this.layout=new S}function t(){this.styles={},this.initials={}}function u(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function m(){this.styleAttrs=null}function S(){this.regions={}}function A(H,z){_.call(this,"image"),this.src=H,this.type=z}function _(H){this.kind=H}function v(H){this.id=H}function f(H){this.regionID=H}function b(H){this.styleAttrs=H}function p(H){this.sets=H}function k(H){this.contents=H}function P(H,z,X){this.explicit_begin=H,this.explicit_end=z,this.explicit_dur=X}function j(){_.call(this,"body")}function U(){_.call(this,"div")}function G(){_.call(this,"p")}function ee(){_.call(this,"span")}function ne(){_.call(this,"span")}function re(){_.call(this,"br")}function oe(){}function W(){}function Te(H){return H&&"xml:id"in H.attributes&&H.attributes["xml:id"].value||null}function Ue(H){return H&&"style"in H.attributes?H.attributes.style.value.split(" "):[]}function ze(H,z){var X={};if(H!==null)for(var de in H.attributes){var ge=H.attributes[de].uri+" "+H.attributes[de].local,Ge=c.byQName[ge];if(Ge!==void 0){var it=Ge.parse(H.attributes[de].value);it!==null?(X[ge]=it,Ge===c.byName.zIndex&&J(z,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):fe(z,"Cannot parse styling attribute "+ge+" --> "+H.attributes[de].value)}}return X}function le(H,z,X){for(var de in H.attributes)if(H.attributes[de].uri===z&&H.attributes[de].local===X)return H.attributes[de].value;return null}function Se(H,z,X){var de,ge=null;return(de=/^(\d+(?:\.\d+)?)f$/.exec(X))!==null?z!==null&&(ge=parseFloat(de[1])/z):(de=/^(\d+(?:\.\d+)?)t$/.exec(X))!==null?H!==null&&(ge=parseFloat(de[1])/H):(de=/^(\d+(?:\.\d+)?)ms$/.exec(X))!==null?ge=parseFloat(de[1])/1e3:(de=/^(\d+(?:\.\d+)?)s$/.exec(X))!==null?ge=parseFloat(de[1]):(de=/^(\d+(?:\.\d+)?)h$/.exec(X))!==null?ge=3600*parseFloat(de[1]):(de=/^(\d+(?:\.\d+)?)m$/.exec(X))!==null?ge=60*parseFloat(de[1]):(de=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(X))!==null?ge=3600*parseInt(de[1])+60*parseInt(de[2])+parseFloat(de[3]):(de=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(X))!==null&&z!==null&&(ge=3600*parseInt(de[1])+60*parseInt(de[2])+parseInt(de[3])+(de[4]===null?0:parseInt(de[4])/z)),ge}function be(H,z,X){for(;z.styleRefs.length>0;){var de=z.styleRefs.pop();de in H.styles?(be(H,H.styles[de],X),Q(H.styles[de].styleAttrs,z.styleAttrs)):fe(X,"Non-existant style id referenced")}}function Y(H,z,X,de){for(var ge=z.length-1;ge>=0;ge--){var Ge=z[ge];Ge in H.styles?Q(H.styles[Ge].styleAttrs,X):fe(de,"Non-existant style id referenced")}}function Q(H,z){for(var X in H)H.hasOwnProperty(X)&&(X in z||(z[X]=H[X]))}function J(H,z){if(H&&H.warn&&H.warn(z))throw z}function fe(H,z){if(H&&H.error&&H.error(z))throw z}function Ce(H,z){throw H&&H.fatal&&H.fatal(z),z}function V(H,z){for(var X,de=0,ge=H.length-1;de<=ge;){var Ge=H[X=Math.floor((de+ge)/2)];if(Ge<z)de=X+1;else{if(!(Ge>z))return{found:!0,index:X};ge=X-1}}return{found:!1,index:de}}E.fromXML=function(H,z,X){var de=T.parser(!0,{xmlns:!0}),ge=[],Ge=[],it=[],Ye=0,Ke=null;de.onclosetag=function(Xe){if(ge[0]instanceof oe)Ke.head!==null&&Ke.head.styling!==null&&Y(Ke.head.styling,ge[0].styleRefs,ge[0].styleAttrs,z),delete ge[0].styleRefs;else if(ge[0]instanceof t)for(var nt in ge[0].styles)ge[0].styles.hasOwnProperty(nt)&&be(ge[0],ge[0].styles[nt],z);else if(ge[0]instanceof G||ge[0]instanceof ee){if(ge[0].contents.length>1){var Tt,bt=[ge[0].contents[0]];for(Tt=1;Tt<ge[0].contents.length;Tt++)ge[0].contents[Tt]instanceof ne&&bt[bt.length-1]instanceof ne?bt[bt.length-1].text+=ge[0].contents[Tt].text:bt.push(ge[0].contents[Tt]);ge[0].contents=bt}ge[0]instanceof ee&&ge[0].contents.length===1&&ge[0].contents[0]instanceof ne&&(ge[0].text=ge[0].contents[0].text,delete ge[0].contents)}else ge[0]instanceof g&&(ge[0].node.uri===l.ns_tt&&ge[0].node.local==="metadata"?Ye--:Ye>0&&X&&"onCloseTag"in X&&X.onCloseTag());it.shift(),Ge.shift(),ge.shift()},de.ontext=function(Xe){if(ge[0]!==void 0)if(ge[0]instanceof ee||ge[0]instanceof G){if(ge[0]instanceof ee){var nt=ge[0].styleAttrs[c.byName.ruby.qname];if(nt==="container"||nt==="textContainer"||nt==="baseContainer")return}var Tt=new ne;Tt.initFromText(Ke,ge[0],Xe,Ge[0],it[0],z),ge[0].contents.push(Tt)}else ge[0]instanceof g&&Ye>0&&X&&"onText"in X&&X.onText(Xe)},de.onopentag=function(Xe){var nt=Xe.attributes["xml:space"];nt?it.unshift(nt.value):it.length===0?it.unshift("default"):it.unshift(it[0]);var Tt=Xe.attributes["xml:lang"];if(Tt?Ge.unshift(Tt.value):Ge.length===0?Ge.unshift(""):Ge.unshift(Ge[0]),Xe.uri===l.ns_tt)if(Xe.local==="tt")Ke!==null&&Ce(z,"Two <tt> elements at ("+this.line+","+this.column+")"),(Ke=new d).initFromNode(Xe,Ge[0],z),ge.unshift(Ke);else if(Xe.local==="head")ge[0]instanceof d||Ce(z,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),ge.unshift(Ke.head);else if(Xe.local==="styling")ge[0]instanceof r||Ce(z,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),ge.unshift(Ke.head.styling);else if(Xe.local==="style"){var bt;ge[0]instanceof t?((bt=new u).initFromNode(Xe,z),bt.id?Ke.head.styling.styles[bt.id]=bt:fe(z,"<style> element missing @id attribute"),ge.unshift(bt)):ge[0]instanceof oe?((bt=new u).initFromNode(Xe,z),Q(bt.styleAttrs,ge[0].styleAttrs),ge.unshift(bt)):Ce(z,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(Xe.local==="initial"){var Ft;if(ge[0]instanceof t){for(var pn in(Ft=new m).initFromNode(Xe,z),Ft.styleAttrs)Ft.styleAttrs.hasOwnProperty(pn)&&(Ke.head.styling.initials[pn]=Ft.styleAttrs[pn]);ge.unshift(Ft)}else Ce(z,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(Xe.local==="layout")ge[0]instanceof r||Ce(z,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),ge.unshift(Ke.head.layout);else if(Xe.local==="region"){ge[0]instanceof S||Ce(z,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var wn=new oe;wn.initFromNode(Ke,Xe,Ge[0],z),!wn.id||wn.id in Ke.head.layout.regions?fe(z,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):Ke.head.layout.regions[wn.id]=wn,ge.unshift(wn)}else if(Xe.local==="body"){ge[0]instanceof d||Ce(z,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),Ke.body!==null&&Ce(z,"Second <body> element at "+this.line+","+this.column+")");var hn=new j;hn.initFromNode(Ke,Xe,Ge[0],z),Ke.body=hn,ge.unshift(hn)}else if(Xe.local==="div"){ge[0]instanceof U||ge[0]instanceof j||Ce(z,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var Xn=new U;Xn.initFromNode(Ke,ge[0],Xe,Ge[0],z);var on=Xn.styleAttrs[c.byName.backgroundImage.qname];on&&(Xn.contents.push(new A(on)),delete Xn.styleAttrs[c.byName.backgroundImage.qname]),ge[0].contents.push(Xn),ge.unshift(Xn)}else if(Xe.local==="image"){ge[0]instanceof U||Ce(z,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var Zn=new A;Zn.initFromNode(Ke,ge[0],Xe,Ge[0],z),ge[0].contents.push(Zn),ge.unshift(Zn)}else if(Xe.local==="p"){ge[0]instanceof U||Ce(z,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Bn=new G;Bn.initFromNode(Ke,ge[0],Xe,Ge[0],z),ge[0].contents.push(Bn),ge.unshift(Bn)}else if(Xe.local==="span"){ge[0]instanceof ee||ge[0]instanceof G||Ce(z,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var Rr=new ee;Rr.initFromNode(Ke,ge[0],Xe,Ge[0],it[0],z),ge[0].contents.push(Rr),ge.unshift(Rr)}else if(Xe.local==="br"){ge[0]instanceof ee||ge[0]instanceof G||Ce(z,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var Nr=new re;Nr.initFromNode(Ke,ge[0],Xe,Ge[0],z),ge[0].contents.push(Nr),ge.unshift(Nr)}else if(Xe.local==="set"){ge[0]instanceof ee||ge[0]instanceof G||ge[0]instanceof U||ge[0]instanceof j||ge[0]instanceof oe||ge[0]instanceof re||Ce(z,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Ir=new W;Ir.initFromNode(Ke,ge[0],Xe,z),ge[0].sets.push(Ir),ge.unshift(Ir)}else ge.unshift(new g(Xe));else ge.unshift(new g(Xe));if(ge[0]instanceof g){if(Xe.uri===l.ns_tt&&Xe.local==="metadata")Ye++;else if(Ye>0&&X&&"onOpenTag"in X){var nn=[];for(var rn in Xe.attributes)nn[Xe.attributes[rn].uri+" "+Xe.attributes[rn].local]={uri:Xe.attributes[rn].uri,local:Xe.attributes[rn].local,value:Xe.attributes[rn].value};X.onOpenTag(Xe.uri,Xe.local,nn)}}},de.write(H).close(),delete Ke.head.styling.styles;var dt=!1;for(var me in Ke.head.layout.regions)if(Ke.head.layout.regions.hasOwnProperty(me)){dt=!0;break}if(!dt){var ke=oe.prototype.createDefaultRegion(Ke.lang);Ke.head.layout.regions[ke.id]=ke}for(var Je in Ke.head.layout.regions)Ke.head.layout.regions.hasOwnProperty(Je)&&i(Ke,Ke.head.layout.regions[Je],null,null);return Ke.body&&i(Ke,Ke.body,null,null),Ke.body&&y(Ke.body),Ke},d.prototype.initFromNode=function(H,z,X){var de=function(Ye,Ke){var dt=le(Ye,l.ns_ttp,"cellResolution"),me=15,ke=32;if(dt!==null){var Je=/(\d+) (\d+)/.exec(dt);Je!==null?(ke=parseInt(Je[1]),me=parseInt(Je[2])):J(Ke,"Malformed cellResolution value (using initial value instead)")}return{w:ke,h:me}}(H,X);this.cellLength={h:new h.ComputedLength(0,1/de.h),w:new h.ComputedLength(1/de.w,0)};var ge=function(Ye,Ke){var dt,me=le(Ye,l.ns_ttp,"frameRate"),ke=30;me!==null&&((dt=/(\d+)/.exec(me))!==null?ke=parseInt(dt[1]):J(Ke,"Malformed frame rate attribute (using initial value instead)"));var Je=le(Ye,l.ns_ttp,"frameRateMultiplier"),Xe=1;Je!==null&&((dt=/(\d+) (\d+)/.exec(Je))!==null?Xe=parseInt(dt[1])/parseInt(dt[2]):J(Ke,"Malformed frame rate multiplier attribute (using initial value instead)"));var nt=Xe*ke,Tt=1,bt=le(Ye,l.ns_ttp,"tickRate");return bt===null?me!==null&&(Tt=nt):(dt=/(\d+)/.exec(bt))!==null?Tt=parseInt(dt[1]):J(Ke,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:nt,tickRate:Tt}}(H,X);this.effectiveFrameRate=ge.effectiveFrameRate,this.tickRate=ge.tickRate,this.aspectRatio=function(Ye,Ke){var dt=le(Ye,l.ns_ittp,"aspectRatio");dt===null&&(dt=le(Ye,l.ns_ttp,"displayAspectRatio"));var me=null;if(dt!==null){var ke=/(\d+)\s+(\d+)/.exec(dt);if(ke!==null){var Je=parseInt(ke[1]),Xe=parseInt(ke[2]);Je!==0&&Xe!==0?me=Je/Xe:fe(Ke,"Illegal aspectRatio values (ignoring)")}else fe(Ke,"Malformed aspectRatio attribute (ignoring)")}return me}(H,X);var Ge=le(H,l.ns_ttp,"timeBase");Ge!==null&&Ge!=="media"&&Ce(X,"Unsupported time base");var it=function(Ye,Ke){var dt=le(Ye,l.ns_tts,"extent");if(dt===null)return null;var me=dt.split(" ");if(me.length!==2)return J(Ke,"Malformed extent (ignoring)"),null;var ke=h.parseLength(me[0]),Je=h.parseLength(me[1]);return Je&&ke?{h:Je,w:ke}:(J(Ke,"Malformed extent values (ignoring)"),null)}(H,X);it===null?this.pxLength={h:null,w:null}:(it.h.unit==="px"&&it.w.unit==="px"||Ce(X,"Extent on TT must be in px or absent"),this.pxLength={h:new h.ComputedLength(0,1/it.h.value),w:new h.ComputedLength(1/it.w.value,0)}),this.dimensions={h:new h.ComputedLength(0,1),w:new h.ComputedLength(1,0)},this.lang=z},d.prototype._registerEvent=function(H){if(!(H.end<=H.begin)){var z=V(this.events,H.begin);if(z.found||this.events.splice(z.index,0,H.begin),H.end!==Number.POSITIVE_INFINITY){var X=V(this.events,H.end);X.found||this.events.splice(X.index,0,H.end)}}},d.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},d.prototype.getMediaTimeEvents=function(){return this.events},u.prototype.initFromNode=function(H,z){this.id=Te(H),this.styleAttrs=ze(H,z),this.styleRefs=Ue(H)},m.prototype.initFromNode=function(H,z){for(var X in this.styleAttrs={},H.attributes)if(H.attributes[X].uri===l.ns_itts||H.attributes[X].uri===l.ns_ebutts||H.attributes[X].uri===l.ns_tts){var de=H.attributes[X].uri+" "+H.attributes[X].local;this.styleAttrs[de]=H.attributes[X].value}},A.prototype.initFromNode=function(H,z,X,de,ge){this.src="src"in X.attributes?X.attributes.src.value:null,this.src||fe(ge,"Invalid image@src attribute"),this.type="type"in X.attributes?X.attributes.type.value:null,this.type||fe(ge,"Invalid image@type attribute"),b.prototype.initFromNode.call(this,H,z,X,ge),P.prototype.initFromNode.call(this,H,z,X,ge),p.prototype.initFromNode.call(this,H,z,X,ge),f.prototype.initFromNode.call(this,H,z,X,ge),this.lang=de},v.prototype.initFromNode=function(H,z,X,de){this.id=Te(X)},f.prototype.initFromNode=function(H,z,X,de){this.regionID=function(ge){return ge&&"region"in ge.attributes?ge.attributes.region.value:""}(X)},b.prototype.initFromNode=function(H,z,X,de){this.styleAttrs=ze(X,de),H.head!==null&&H.head.styling!==null&&Y(H.head.styling,Ue(X),this.styleAttrs,de)},p.prototype.initFromNode=function(H,z,X,de){this.sets=[]},k.prototype.initFromNode=function(H,z,X,de){this.contents=[]},P.prototype.initFromNode=function(H,z,X,de){var ge=function(Ge,it,Ye,Ke){var dt=null;Ye&&"begin"in Ye.attributes&&(dt=Se(Ge.tickRate,Ge.effectiveFrameRate,Ye.attributes.begin.value))===null&&J(Ke,"Malformed begin value "+Ye.attributes.begin.value+" (using 0)");var me=null;Ye&&"dur"in Ye.attributes&&(me=Se(Ge.tickRate,Ge.effectiveFrameRate,Ye.attributes.dur.value))===null&&J(Ke,"Malformed dur value "+Ye.attributes.dur.value+" (ignoring)");var ke=null;return Ye&&"end"in Ye.attributes&&(ke=Se(Ge.tickRate,Ge.effectiveFrameRate,Ye.attributes.end.value))===null&&J(Ke,"Malformed end value (ignoring)"),{explicit_begin:dt,explicit_end:ke,explicit_dur:me}}(H,0,X,de);this.explicit_begin=ge.explicit_begin,this.explicit_end=ge.explicit_end,this.explicit_dur=ge.explicit_dur,this.timeContainer=function(Ge,it){var Ye=Ge&&"timeContainer"in Ge.attributes?Ge.attributes.timeContainer.value:null;return Ye&&Ye!=="par"?Ye==="seq"?"seq":(fe(it,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(X,de)},j.prototype.initFromNode=function(H,z,X,de){b.prototype.initFromNode.call(this,H,null,z,de),P.prototype.initFromNode.call(this,H,null,z,de),p.prototype.initFromNode.call(this,H,null,z,de),f.prototype.initFromNode.call(this,H,null,z,de),k.prototype.initFromNode.call(this,H,null,z,de),this.lang=X},U.prototype.initFromNode=function(H,z,X,de,ge){b.prototype.initFromNode.call(this,H,z,X,ge),P.prototype.initFromNode.call(this,H,z,X,ge),p.prototype.initFromNode.call(this,H,z,X,ge),f.prototype.initFromNode.call(this,H,z,X,ge),k.prototype.initFromNode.call(this,H,z,X,ge),this.lang=de},G.prototype.initFromNode=function(H,z,X,de,ge){b.prototype.initFromNode.call(this,H,z,X,ge),P.prototype.initFromNode.call(this,H,z,X,ge),p.prototype.initFromNode.call(this,H,z,X,ge),f.prototype.initFromNode.call(this,H,z,X,ge),k.prototype.initFromNode.call(this,H,z,X,ge),this.lang=de},ee.prototype.initFromNode=function(H,z,X,de,ge,Ge){b.prototype.initFromNode.call(this,H,z,X,Ge),P.prototype.initFromNode.call(this,H,z,X,Ge),p.prototype.initFromNode.call(this,H,z,X,Ge),f.prototype.initFromNode.call(this,H,z,X,Ge),k.prototype.initFromNode.call(this,H,z,X,Ge),this.space=ge,this.lang=de},ne.prototype.initFromText=function(H,z,X,de,ge,Ge){P.prototype.initFromNode.call(this,H,z,null,Ge),this.text=X,this.space=ge,this.lang=de},re.prototype.initFromNode=function(H,z,X,de,ge){f.prototype.initFromNode.call(this,H,z,X,ge),P.prototype.initFromNode.call(this,H,z,X,ge),this.lang=de},oe.prototype.createDefaultRegion=function(H){var z=new oe;return v.call(z,""),b.call(z,{}),p.call(z,[]),P.call(z,0,Number.POSITIVE_INFINITY,null),this.lang=H,z},oe.prototype.initFromNode=function(H,z,X,de){v.prototype.initFromNode.call(this,H,null,z,de),P.prototype.initFromNode.call(this,H,null,z,de),p.prototype.initFromNode.call(this,H,null,z,de),this.styleAttrs=ze(z,de),this.styleRefs=Ue(z),this.lang=X},W.prototype.initFromNode=function(H,z,X,de){P.prototype.initFromNode.call(this,H,z,X,de);var ge=ze(X,de);for(var Ge in this.qname=null,this.value=null,ge)if(ge.hasOwnProperty(Ge)){if(this.qname){fe(de,"More than one style specified on set");break}this.qname=Ge,this.value=ge[Ge]}}})(R,typeof sax>"u"?I(5378):sax,typeof imscNames>"u"?I(210):imscNames,typeof imscStyles>"u"?I(6811):imscStyles,typeof imscUtils>"u"?I(5926):imscUtils)},506:(C,R,I)=>{(function(E,T,l){function c(b,p,k,P){var j;if(k.kind==="region")(j=document.createElement("div")).style.position="absolute";else if(k.kind==="body")j=document.createElement("div");else if(k.kind==="div")j=document.createElement("div");else if(k.kind==="image"){if(j=document.createElement("img"),b.imgResolver!==null&&k.src!==null){var U=b.imgResolver(k.src,j);U&&(j.src=U),j.height=b.regionH,j.width=b.regionW}}else if(k.kind==="p")j=document.createElement("p");else if(k.kind==="span")if(k.styleAttrs[l.byName.ruby.qname]==="container")j=document.createElement("ruby"),b.ruby=!0;else if(k.styleAttrs[l.byName.ruby.qname]==="base")j=document.createElement("rb");else if(k.styleAttrs[l.byName.ruby.qname]==="text")j=document.createElement("rt");else if(k.styleAttrs[l.byName.ruby.qname]==="baseContainer")j=document.createElement("rbc");else if(k.styleAttrs[l.byName.ruby.qname]==="textContainer")j=document.createElement("rtc");else{if(k.styleAttrs[l.byName.ruby.qname]==="delimiter")return;j=document.createElement("span")}else k.kind==="br"&&(j=document.createElement("br"));if(j){if(k.lang&&(k.kind!=="region"&&k.lang===P.lang||(j.lang=k.lang)),p.appendChild(j),j.style.margin="0",k.kind==="region"){var G=k.styleAttrs[l.byName.writingMode.qname];G==="lrtb"||G==="lr"?(b.ipd="lr",b.bpd="tb"):G==="rltb"||G==="rl"?(b.ipd="rl",b.bpd="tb"):G==="tblr"?(b.ipd="tb",b.bpd="lr"):G!=="tbrl"&&G!=="tb"||(b.ipd="tb",b.bpd="rl")}else if(k.kind==="p"&&b.bpd==="tb"){var ee=k.styleAttrs[l.byName.direction.qname];b.ipd=ee==="ltr"?"lr":"rl"}for(var ne=0;ne<u.length;ne++){var re=u[ne],oe=k.styleAttrs[re.qname];oe!==void 0&&re.map!==null&&re.map(b,j,k,oe)}var W=j,Te=k.styleAttrs[l.byName.linePadding.qname];if(Te&&!Te.isZero()){var Ue=Te.toUsedLength(b.w,b.h);if(Ue>0){var ze=Math.ceil(Ue)+"px";b.bpd==="tb"?(W.style.paddingLeft=ze,W.style.paddingRight=ze):(W.style.paddingTop=ze,W.style.paddingBottom=ze),b.lp=Te}}var le=k.styleAttrs[l.byName.multiRowAlign.qname];if(le&&le!=="auto"){var Se=document.createElement("span");Se.style.display="inline-block",Se.style.textAlign=le,j.appendChild(Se),W=Se,b.mra=le}var be=k.styleAttrs[l.byName.rubyReserve.qname];if(be&&be[0]!=="none"&&(b.rubyReserve=be),k.styleAttrs[l.byName.fillLineGap.qname]&&(b.flg=!0),k.kind==="span"&&k.text){var Y=k.styleAttrs[l.byName.textEmphasis.qname];if(Y&&Y.style!=="none"&&(b.textEmphasis=!0),l.byName.textCombine.qname in k.styleAttrs&&k.styleAttrs[l.byName.textCombine.qname]==="all")j.textContent=k.text,Y&&r(b,j,0,Y);else for(var Q="",J=0;J<k.text.length;J++){Q+=k.text.charAt(J);var fe=k.text.charCodeAt(J);if(fe<55296||fe>56319||J===k.text.length-1){var Ce=document.createElement("span");Ce.textContent=Q,Y&&r(b,Ce,0,Y),j.appendChild(Ce),Q="",Ce._isd_element=k}}}if("contents"in k)for(var V=0;V<k.contents.length;V++)c(b,W,k.contents[V],k);var H=[];if(k.kind==="p"&&(d(b,W,H,null),b.rubyReserve&&(function(Ge,it){for(var Ye=0;Ye<Ge.length;Ye++){var Ke,dt,me=document.createElement("ruby"),ke=document.createElement("rb");ke.textContent="",me.appendChild(ke);var Je,Xe=it.rubyReserve[1].toUsedLength(it.w,it.h)+"px";it.rubyReserve[0]==="both"||it.rubyReserve[0]==="outside"&&Ge.length==1?((Ke=document.createElement("rtc")).style[_]=A?"after":"under",Ke.textContent="",Ke.style.fontSize=Xe,(dt=document.createElement("rtc")).style[_]=A?"before":"over",dt.textContent="",dt.style.fontSize=Xe,me.appendChild(Ke),me.appendChild(dt)):((Ke=document.createElement("rtc")).textContent="",Ke.style.fontSize=Xe,Je=it.rubyReserve[0]==="after"||it.rubyReserve[0]==="outside"&&Ye>0?A?"after":it.bpd==="tb"||it.bpd==="rl"?"under":"over":A?"before":it.bpd==="tb"||it.bpd==="rl"?"over":"under",Ke.style[_]=Je,me.appendChild(Ke));for(var nt=null,Tt=0;Tt<Ge[Ye].rbc.length;Tt++)if(Ge[Ye].rbc[Tt].localName==="ruby"){nt=Ge[Ye].rbc[Tt];for(var bt=0;bt<nt.style.length;bt++)me.style.setProperty(nt.style.item(bt),nt.style.getPropertyValue(nt.style.item(bt)));break}(nt=nt||Ge[Ye].elements[0].node).parentElement.insertBefore(me,nt)}}(H,b),b.rubyReserve=null),(b.ruby||b.rubyReserve)&&(function(Ge,it){for(var Ye=0;Ye<Ge.length;Ye++)for(var Ke=0;Ke<Ge[Ye].rbc.length;Ke++){var dt;Ge[Ye].rbc[Ke].style[_]||(dt=A?Ye===0?"before":"after":it.bpd==="tb"||it.bpd==="rl"?Ye===0?"over":"under":Ye===0?"under":"over",Ge[Ye].rbc[Ke].style[_]=dt)}}(H,b),b.ruby=null),b.textEmphasis&&(function(Ge,it){for(var Ye=0;Ye<Ge.length;Ye++)for(var Ke=0;Ke<Ge[Ye].te.length;Ke++){var dt;Ge[Ye].te[Ke].style[f]&&Ge[Ye].te[Ke].style[f]!=="none"||(dt=it.bpd==="tb"?Ye===0?"left over":"left under":it.bpd==="rl"?Ye===0?"right under":"left under":Ye===0?"left under":"right under",Ge[Ye].te[Ke].style[f]=dt)}}(H,b),b.textEmphasis=null),b.mra&&(function(Ge){for(var it=0;it<Ge.length-1;it++){var Ye=Ge[it].elements.length;if(Ye!==0&&Ge[it].br===!1){var Ke=document.createElement("br"),dt=Ge[it].elements[Ye-1].node;dt.parentElement.insertBefore(Ke,dt.nextSibling)}}}(H),b.mra=null),b.lp&&(function(Ge,it,Ye){if(Ge!==null)for(var Ke=0;Ke<Ge.length;Ke++){var dt=Ge[Ke].elements.length,me=Math.ceil(it)+"px",ke="-"+Math.ceil(it)+"px";if(dt!==0){var Je=Ge[Ke].elements[Ge[Ke].start_elem],Xe=Ge[Ke].elements[Ge[Ke].end_elem];if(Je===Xe&&(elementBoundingRect=Je.node.getBoundingClientRect(),elementBoundingRect.width==0||elementBoundingRect.height==0))continue;Ye.ipd==="lr"?(Je.node.style.marginLeft=ke,Je.node.style.paddingLeft=me):Ye.ipd==="rl"?(Je.node.style.paddingRight=me,Je.node.style.marginRight=ke):Ye.ipd==="tb"&&(Je.node.style.paddingTop=me,Je.node.style.marginTop=ke),Ye.ipd==="lr"?(Xe.node.style.marginRight=ke,Xe.node.style.paddingRight=me):Ye.ipd==="rl"?(Xe.node.style.paddingLeft=me,Xe.node.style.marginLeft=ke):Ye.ipd==="tb"&&(Xe.node.style.paddingBottom=me,Xe.node.style.marginBottom=ke)}}}(H,b.lp.toUsedLength(b.w,b.h),b),b.lp=null),function(Ge){for(var it=0;it<Ge.length;it++)for(var Ye=Ge[it],Ke=1;Ke<Ye.elements.length;){var dt=Ye.elements[Ke-1],me=Ye.elements[Ke];y(dt.node,me.node)?Ye.elements.splice(Ke,1):Ke++}for(var ke,Je,Xe=[],nt=0;nt<Ge.length;nt++)for(var Tt=0;Tt<Ge[nt].elements.length;Tt++)(Je=h(ke=Ge[nt].elements[Tt].node,Xe,!1))&&(ke.style.backgroundColor=Je);for(var bt=0;bt<Xe.length;bt++)Xe[bt].style.backgroundColor=""}(H),b.flg)){var z=g(W.getBoundingClientRect(),b);(function(Ge,it,Ye,Ke,dt){for(var me=Math.sign(Ye-it),ke=0;ke<=Ge.length;ke++){var Je,Xe,nt,Tt;if(Je=ke===0?Math.round(it):ke===Ge.length?Math.round(Ye):Math.round((Ge[ke-1].after+Ge[ke].before)/2),ke>0&&Ge[ke-1])for(nt=0;nt<Ge[ke-1].elements.length;nt++)Xe=me*(Je-(Tt=Ge[ke-1].elements[nt]).after)+"px",Ke.bpd==="lr"?Tt.node.style.paddingRight=Xe:Ke.bpd==="rl"?Tt.node.style.paddingLeft=Xe:Ke.bpd==="tb"&&(Tt.node.style.paddingBottom=Xe);if(ke<Ge.length)for(nt=0;nt<Ge[ke].elements.length;nt++)Xe=me*((Tt=Ge[ke].elements[nt]).before-Je)+"px",Ke.bpd==="lr"?Tt.node.style.paddingLeft=Xe:Ke.bpd==="rl"?Tt.node.style.paddingRight=Xe:Ke.bpd==="tb"&&(Tt.node.style.paddingTop=Xe)}})(H,z.before,z.after,b),b.flg=null}if(k.kind==="region"&&b.bpd==="tb"&&b.enableRollUp&&k.contents.length>0&&k.styleAttrs[l.byName.displayAlign.qname]==="after"){d(b,W,H,null);var X=new i(k.id===""?"_":k.id,H);if(b.currentISDState[X.id]=X,b.previousISDState&&X.id in b.previousISDState&&b.previousISDState[X.id].plist.length>0&&X.plist.length>1&&X.plist[X.plist.length-2].text===b.previousISDState[X.id].plist[b.previousISDState[X.id].plist.length-1].text){var de=j.firstElementChild,ge=X.plist[X.plist.length-1].after-X.plist[X.plist.length-1].before;de.style.bottom="-"+ge+"px",de.style.transition="transform 0.4s",de.style.position="relative",de.style.transform="translateY(-"+ge+"px)"}}}else(function(Ge,it){if(Ge&&Ge.error&&Ge.error(it))throw it})(b.errorHandler,"Error processing ISD element kind: "+k.kind)}function h(b,p,k){return b.style.backgroundColor?(k&&!p.includes(b)&&p.push(b),b.style.backgroundColor):b.parentElement.nodeName==="SPAN"?h(b.parentElement,p,!0):void 0}function y(b,p){if(b.tagName==="SPAN"&&p.tagName==="SPAN"&&b._isd_element===p._isd_element){b.textContent+=p.textContent;for(var k=0;k<p.style.length;k++){var P=p.style[k];(P.indexOf("border")>=0||P.indexOf("padding")>=0||P.indexOf("margin")>=0)&&(b.style[P]=p.style[P])}return p.parentElement.removeChild(p),!0}return!1}function i(b,p){this.id=b,this.plist=p}function g(b,p){var k={before:null,after:null,start:null,end:null};return p.bpd==="tb"?(k.before=b.top,k.after=b.bottom,p.ipd==="lr"?(k.start=b.left,k.end=b.right):(k.start=b.right,k.end=b.left)):p.bpd==="lr"?(k.before=b.left,k.after=b.right,k.start=b.top,k.end=b.bottom):p.bpd==="rl"&&(k.before=b.right,k.after=b.left,k.start=b.top,k.end=b.bottom),k}function d(b,p,k,P){if(p.localName!=="rt"&&p.localName!=="rtc"){var j,U,G,ee,ne=p.style.backgroundColor||P;if(p.childElementCount===0)if(p.localName==="span"||p.localName==="rb"){var re=g(p.getBoundingClientRect(),b);if(k.length!==0&&(j=re.before,U=re.after,G=k[k.length-1].before,U<(ee=k[k.length-1].after)&&j>G||ee<=U&&G>=j)){var oe=Math.sign(re.after-re.before),W=Math.sign(re.end-re.start);oe*(re.before-k[k.length-1].before)<0&&(k[k.length-1].before=re.before),oe*(re.after-k[k.length-1].after)>0&&(k[k.length-1].after=re.after),W*(re.start-k[k.length-1].start)<0&&(k[k.length-1].start=re.start,k[k.length-1].start_elem=k[k.length-1].elements.length),W*(re.end-k[k.length-1].end)>0&&(k[k.length-1].end=re.end,k[k.length-1].end_elem=k[k.length-1].elements.length)}else k.push({before:re.before,after:re.after,start:re.start,end:re.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});k[k.length-1].text+=p.textContent,k[k.length-1].elements.push({node:p,bgcolor:ne,before:re.before,after:re.after})}else p.localName==="br"&&k.length!==0&&(k[k.length-1].br=!0);else for(var Te=p.firstChild;Te;)Te.nodeType===Node.ELEMENT_NODE&&(d(b,Te,k,ne),Te.localName==="ruby"||Te.localName==="rtc"?k.length>0&&k[k.length-1].rbc.push(Te):Te.localName==="span"&&Te.style[v]&&Te.style[v]!=="none"&&k.length>0&&k[k.length-1].te.push(Te)),Te=Te.nextSibling}}function r(b,p,k,P){var j;P.style!=="none"&&(P.style==="auto"?p.style[v]="filled":p.style[v]=P.style+" "+P.symbol,(P.position==="before"||P.position==="after")&&(j=b.bpd==="tb"?P.position==="before"?"left over":"left under":b.bpd==="rl"?P.position==="before"?"right under":"left under":P.position==="before"?"left under":"right under",p.style[f]=j))}function t(b,p){this.qname=b,this.map=p}E.render=function(b,p,k,P,j,U,G,ee,ne){var re=P||p.clientHeight,oe=j||p.clientWidth;if(b.aspectRatio!==null){var W=re*b.aspectRatio;W>oe?re=Math.round(oe/b.aspectRatio):oe=W}var Te=document.createElement("div");Te.style.position="relative",Te.style.width=oe+"px",Te.style.height=re+"px",Te.style.margin="auto",Te.style.top=0,Te.style.bottom=0,Te.style.left=0,Te.style.right=0,Te.style.zIndex=0;var Ue={h:re,w:oe,regionH:null,regionW:null,imgResolver:k,displayForcedOnlyMode:U||!1,isd:b,errorHandler:G,previousISDState:ee,enableRollUp:ne||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(p.appendChild(Te),"contents"in b)for(var ze=0;ze<b.contents.length;ze++)c(Ue,Te,b.contents[ze],b);return Ue.currentISDState};for(var u=[new t("http://www.w3.org/ns/ttml#styling backgroundColor",function(b,p,k,P){P[3]!==0&&(p.style.backgroundColor="rgba("+P[0].toString()+","+P[1].toString()+","+P[2].toString()+","+(P[3]/255).toString()+")")}),new t("http://www.w3.org/ns/ttml#styling color",function(b,p,k,P){p.style.color="rgba("+P[0].toString()+","+P[1].toString()+","+P[2].toString()+","+(P[3]/255).toString()+")"}),new t("http://www.w3.org/ns/ttml#styling direction",function(b,p,k,P){p.style.direction=P}),new t("http://www.w3.org/ns/ttml#styling display",function(b,p,k,P){}),new t("http://www.w3.org/ns/ttml#styling displayAlign",function(b,p,k,P){p.style.display="flex",p.style.flexDirection="column",P==="before"?p.style.justifyContent="flex-start":P==="center"?p.style.justifyContent="center":P==="after"&&(p.style.justifyContent="flex-end")}),new t("http://www.w3.org/ns/ttml#styling extent",function(b,p,k,P){b.regionH=P.h.toUsedLength(b.w,b.h),b.regionW=P.w.toUsedLength(b.w,b.h);var j=0,U=0,G=k.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];G&&(j=G[0].toUsedLength(b.w,b.h)+G[2].toUsedLength(b.w,b.h),U=G[1].toUsedLength(b.w,b.h)+G[3].toUsedLength(b.w,b.h)),p.style.height=b.regionH-j+"px",p.style.width=b.regionW-U+"px"}),new t("http://www.w3.org/ns/ttml#styling fontFamily",function(b,p,k,P){for(var j=[],U=0;U<P.length;U++)P[U]==="monospaceSerif"?(j.push("Courier New"),j.push('"Liberation Mono"'),j.push("Courier"),j.push("monospace")):P[U]==="proportionalSansSerif"?(j.push("Arial"),j.push("Helvetica"),j.push('"Liberation Sans"'),j.push("sans-serif")):P[U]==="monospace"?j.push("monospace"):P[U]==="sansSerif"?j.push("sans-serif"):P[U]==="serif"?j.push("serif"):P[U]==="monospaceSansSerif"?(j.push("Consolas"),j.push("monospace")):P[U]==="proportionalSerif"?j.push("serif"):j.push(P[U]);if(j.length>0){for(var G=[j[0]],ee=1;ee<j.length;ee++)G.indexOf(j[ee])==-1&&G.push(j[ee]);j=G}p.style.fontFamily=j.join(",")}),new t("http://www.w3.org/ns/ttml#styling shear",function(b,p,k,P){if(P!==0){var j=-.9*P;b.bpd==="tb"?p.style.transform="skewX("+j+"deg)":p.style.transform="skewY("+j+"deg)"}}),new t("http://www.w3.org/ns/ttml#styling fontSize",function(b,p,k,P){p.style.fontSize=P.toUsedLength(b.w,b.h)+"px"}),new t("http://www.w3.org/ns/ttml#styling fontStyle",function(b,p,k,P){p.style.fontStyle=P}),new t("http://www.w3.org/ns/ttml#styling fontWeight",function(b,p,k,P){p.style.fontWeight=P}),new t("http://www.w3.org/ns/ttml#styling lineHeight",function(b,p,k,P){p.style.lineHeight=P==="normal"?"normal":P.toUsedLength(b.w,b.h)+"px"}),new t("http://www.w3.org/ns/ttml#styling opacity",function(b,p,k,P){p.style.opacity=P}),new t("http://www.w3.org/ns/ttml#styling origin",function(b,p,k,P){p.style.top=P.h.toUsedLength(b.w,b.h)+"px",p.style.left=P.w.toUsedLength(b.w,b.h)+"px"}),new t("http://www.w3.org/ns/ttml#styling overflow",function(b,p,k,P){p.style.overflow=P}),new t("http://www.w3.org/ns/ttml#styling padding",function(b,p,k,P){var j=[];j[0]=P[0].toUsedLength(b.w,b.h)+"px",j[1]=P[3].toUsedLength(b.w,b.h)+"px",j[2]=P[2].toUsedLength(b.w,b.h)+"px",j[3]=P[1].toUsedLength(b.w,b.h)+"px",p.style.padding=j.join(" ")}),new t("http://www.w3.org/ns/ttml#styling position",function(b,p,k,P){p.style.top=P.h.toUsedLength(b.w,b.h)+"px",p.style.left=P.w.toUsedLength(b.w,b.h)+"px"}),new t("http://www.w3.org/ns/ttml#styling rubyAlign",function(b,p,k,P){p.style.rubyAlign=P==="spaceAround"?"space-around":"center"}),new t("http://www.w3.org/ns/ttml#styling rubyPosition",function(b,p,k,P){var j;P!=="before"&&P!=="after"||(j=A?P:b.bpd==="tb"||b.bpd==="rl"?P==="before"?"over":"under":P==="before"?"under":"over",p.parentElement.style[_]=j)}),new t("http://www.w3.org/ns/ttml#styling showBackground",null),new t("http://www.w3.org/ns/ttml#styling textAlign",function(b,p,k,P){var j;j=P==="start"?b.ipd==="rl"?"right":"left":P==="end"?b.ipd==="rl"?"left":"right":P,p.style.textAlign=j}),new t("http://www.w3.org/ns/ttml#styling textDecoration",function(b,p,k,P){p.style.textDecoration=P.join(" ").replace("lineThrough","line-through")}),new t("http://www.w3.org/ns/ttml#styling textOutline",function(b,p,k,P){}),new t("http://www.w3.org/ns/ttml#styling textShadow",function(b,p,k,P){var j=k.styleAttrs[l.byName.textOutline.qname];if(P==="none"&&j==="none")p.style.textShadow="";else{var U=[];if(j!=="none"){var G="rgba("+j.color[0].toString()+","+j.color[1].toString()+","+j.color[2].toString()+","+(j.color[3]/255).toString()+")";U.push("1px 1px 1px "+G),U.push("-1px 1px 1px "+G),U.push("1px -1px 1px "+G),U.push("-1px -1px 1px "+G)}if(P!=="none")for(var ee=0;ee<P.length;ee++)U.push(P[ee].x_off.toUsedLength(b.w,b.h)+"px "+P[ee].y_off.toUsedLength(b.w,b.h)+"px "+P[ee].b_radius.toUsedLength(b.w,b.h)+"px rgba("+P[ee].color[0].toString()+","+P[ee].color[1].toString()+","+P[ee].color[2].toString()+","+(P[ee].color[3]/255).toString()+")");p.style.textShadow=U.join(",")}}),new t("http://www.w3.org/ns/ttml#styling textCombine",function(b,p,k,P){p.style.textCombineUpright=P}),new t("http://www.w3.org/ns/ttml#styling textEmphasis",function(b,p,k,P){}),new t("http://www.w3.org/ns/ttml#styling unicodeBidi",function(b,p,k,P){var j;j=P==="bidiOverride"?"bidi-override":P,p.style.unicodeBidi=j}),new t("http://www.w3.org/ns/ttml#styling visibility",function(b,p,k,P){p.style.visibility=P}),new t("http://www.w3.org/ns/ttml#styling wrapOption",function(b,p,k,P){P==="wrap"?k.space==="preserve"?p.style.whiteSpace="pre-wrap":p.style.whiteSpace="normal":k.space==="preserve"?p.style.whiteSpace="pre":p.style.whiteSpace="noWrap"}),new t("http://www.w3.org/ns/ttml#styling writingMode",function(b,p,k,P){P==="lrtb"||P==="lr"||P==="rltb"||P==="rl"?p.style.writingMode="horizontal-tb":P==="tblr"?p.style.writingMode="vertical-lr":P!=="tbrl"&&P!=="tb"||(p.style.writingMode="vertical-rl")}),new t("http://www.w3.org/ns/ttml#styling zIndex",function(b,p,k,P){p.style.zIndex=P}),new t("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(b,p,k,P){b.displayForcedOnlyMode&&P===!1&&(p.style.visibility="hidden")})],m={},S=0;S<u.length;S++)m[u[S].qname]=u[S];var A="webkitRubyPosition"in window.getComputedStyle(document.documentElement),_=A?"webkitRubyPosition":"rubyPosition",v="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",f="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"})(R,typeof imscNames>"u"?I(210):imscNames,typeof imscStyles>"u"?I(6811):imscStyles,typeof imscUtils>"u"?I(5926):imscUtils)},4080:(C,R,I)=>{(function(E,T,l,c){E.generateISD=function(u,m,S){var A,_=new d(u),v={},f={},b=u.head.styling.initials[l.byName.showBackground.qname],p=u.head.styling.initials[l.byName.backgroundColor.qname];for(var k in u.head.layout.regions)if(u.head.layout.regions.hasOwnProperty(k)){var P=u.head.layout.regions[k],j=P.styleAttrs[l.byName.showBackground.qname]||b,U=P.styleAttrs[l.byName.backgroundColor.qname]||p;f[P.id]=(j==="always"||j===void 0)&&U!==void 0&&!(m<P.begin||m>=P.end)}for(var G in u.body&&u.body.regionID&&(f[u.body.regionID]=!0),A=u.body!==null?function ne(re,oe){if(oe.contents){var W={};for(var Te in oe)oe.hasOwnProperty(Te)&&(W[Te]=oe[Te]);return W.contents=[],oe.contents.filter(function(Ue){return!(re<Ue.begin||re>=Ue.end)}).forEach(function(Ue){var ze=ne(re,Ue);ze.regionID&&(f[ze.regionID]=!0),ze!==null&&W.contents.push(ze)}),W}return oe}(m,u.body):null,f[""]!==void 0&&(f[""]=!0),f)if(f[G]){var ee=y(u,m,u.head.layout.regions[G],A,null,"",u.head.layout.regions[G],S,v);ee!==null&&_.contents.push(ee.element)}return _};var h=[l.byName.color.qname,l.byName.textCombine.qname,l.byName.textDecoration.qname,l.byName.textEmphasis.qname,l.byName.textOutline.qname,l.byName.textShadow.qname];function y(u,m,S,A,_,v,f,b,p){if(m<f.begin||m>=f.end)return null;var k="regionID"in f&&f.regionID!==""?f.regionID:v;if(_!==null&&k!==S.id&&(!("contents"in f)||"contents"in f&&f.contents.length===0||k!==""))return null;var P=new r(f);if("sets"in f)for(var j=0;j<f.sets.length;j++)m<f.sets[j].begin||m>=f.sets[j].end||(P.styleAttrs[f.sets[j].qname]=f.sets[j].value);var U={};for(var G in P.styleAttrs)if(P.styleAttrs.hasOwnProperty(G)&&(U[G]=!0,P.kind==="region"&&G===l.byName.writingMode.qname&&!(l.byName.direction.qname in P.styleAttrs))){var ee=P.styleAttrs[G];ee==="lrtb"||ee==="lr"?P.styleAttrs[l.byName.direction.qname]="ltr":ee!=="rltb"&&ee!=="rl"||(P.styleAttrs[l.byName.direction.qname]="rtl")}if(_!==null)for(var ne=0;ne<l.all.length;ne++){var re=l.all[ne];if(re.qname===l.byName.textDecoration.qname){var oe=_.styleAttrs[re.qname],W=P.styleAttrs[re.qname],Te=[];W===void 0?Te=oe:W.indexOf("none")===-1?((W.indexOf("noUnderline")===-1&&oe.indexOf("underline")!==-1||W.indexOf("underline")!==-1)&&Te.push("underline"),(W.indexOf("noLineThrough")===-1&&oe.indexOf("lineThrough")!==-1||W.indexOf("lineThrough")!==-1)&&Te.push("lineThrough"),(W.indexOf("noOverline")===-1&&oe.indexOf("overline")!==-1||W.indexOf("overline")!==-1)&&Te.push("overline")):Te.push("none"),P.styleAttrs[re.qname]=Te}else if(re.qname!==l.byName.fontSize.qname||re.qname in P.styleAttrs||P.kind!=="span"||P.styleAttrs[l.byName.ruby.qname]!=="textContainer")if(re.qname!==l.byName.fontSize.qname||re.qname in P.styleAttrs||P.kind!=="span"||P.styleAttrs[l.byName.ruby.qname]!=="text")re.inherit&&re.qname in _.styleAttrs&&!(re.qname in P.styleAttrs)&&(P.styleAttrs[re.qname]=_.styleAttrs[re.qname]);else{var Ue=_.styleAttrs[l.byName.fontSize.qname];_.styleAttrs[l.byName.ruby.qname]==="textContainer"?P.styleAttrs[re.qname]=Ue:P.styleAttrs[re.qname]=new c.ComputedLength(.5*Ue.rw,.5*Ue.rh)}else{var ze=_.styleAttrs[l.byName.fontSize.qname];P.styleAttrs[re.qname]=new c.ComputedLength(.5*ze.rw,.5*ze.rh)}}for(var le=0;le<l.all.length;le++){var Se=l.all[le];if(!(Se.qname in P.styleAttrs)&&!(Se.qname===l.byName.position.qname&&l.byName.origin.qname in P.styleAttrs||Se.qname===l.byName.origin.qname&&l.byName.position.qname in P.styleAttrs)){var be=u.head.styling.initials[Se.qname]||Se.initial;if(be!==null&&(P.kind==="region"||Se.inherit===!1&&be!==null)){var Y=Se.parse(be);Y!==null?(P.styleAttrs[Se.qname]=Y,U[Se.qname]=!0):t(b,"Invalid initial value for '"+Se.qname+"' on element '"+P.kind)}}}for(var Q=0;Q<l.all.length;Q++){var J=l.all[Q];if(J.qname in U&&J.compute!==null){var fe=J.compute(u,_,P,P.styleAttrs[J.qname],p);fe!==null?P.styleAttrs[J.qname]=fe:(P.styleAttrs[J.qname]=J.compute(u,_,P,J.parse(J.initial),p),t(b,"Style '"+J.qname+"' on element '"+P.kind+"' cannot be computed"))}}if(P.styleAttrs[l.byName.display.qname]==="none")return null;var Ce=null;_===null?Ce=A===null?[]:[A]:"contents"in f&&(Ce=f.contents);for(var V=0;Ce!==null&&V<Ce.length;V++){var H=y(u,m,S,A,P,k,Ce[V],b,p);H!==null&&P.contents.push(H.element)}for(var z in P.styleAttrs)if(P.styleAttrs.hasOwnProperty(z)){var X=!1;if(P.kind==="span"){var de=P.styleAttrs[l.byName.ruby.qname];(X=(de==="container"||de==="textContainer"||de==="baseContainer")&&h.indexOf(z)!==-1)||(X=de!=="container"&&z===l.byName.rubyAlign.qname),X||(X=!(de==="textContainer"||de==="text")&&z===l.byName.rubyPosition.qname)}if(!X){var ge=l.byQName[z];"applies"in ge&&(X=ge.applies.indexOf(P.kind)===-1)}X&&delete P.styleAttrs[z]}var Ge=P.styleAttrs[l.byName.ruby.qname];if(P.kind==="p"||P.kind==="span"&&(Ge==="textContainer"||Ge==="text")){var it=[];i(P,it),function(Ye){for(var Ke,dt=0;dt<Ye.length;)if((Ke=Ye[dt]).kind!=="br"&&Ke.space!=="preserve"){var me=Ke.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(me)&&(dt===0||(ke=Ye[dt-1]).kind==="br"||/[\r\n\t ]$/.test(ke.text))&&(me=me.substring(1)),Ke.text=me,me.length===0?Ye.splice(dt,1):dt++}else dt++;var ke,Je;for(dt=0;dt<Ye.length;dt++)(Ke=Ye[dt]).kind!=="br"&&Ke.space!=="preserve"?/[ ]$/.test(Ke.text)&&(dt===Ye.length-1||(Je=Ye[dt+1]).kind==="br"||Je.space==="preserve"&&/^[\r\n]/.test(Je.text))&&(Ke.text=Ke.text.slice(0,-1)):dt++}(it),g(P)}return P.kind==="div"&&l.byName.backgroundImage.qname in P.styleAttrs||P.kind==="br"||P.kind==="image"||"contents"in P&&P.contents.length>0||P.kind==="span"&&P.text!==null||P.kind==="region"&&P.styleAttrs[l.byName.showBackground.qname]==="always"?{region_id:k,element:P}:null}function i(u,m){if("contents"in u)for(var S=0;S<u.contents.length;S++){var A=u.contents[S],_=A.styleAttrs[l.byName.ruby.qname];(A.kind!=="span"||_!=="textContainer"&&_!=="text")&&("contents"in A?i(A,m):(A.kind==="span"&&A.text.length!==0||A.kind==="br")&&m.push(A))}}function g(u){if(u.kind==="br")return!1;if("text"in u)return u.text.length===0;if("contents"in u){for(var m=u.contents.length;m--;)g(u.contents[m])&&u.contents.splice(m,1);return u.contents.length===0}}function d(u){this.contents=[],this.aspectRatio=u.aspectRatio,this.lang=u.lang}function r(u){for(var m in this.kind=u.kind||"region",this.lang=u.lang,u.id&&(this.id=u.id),this.styleAttrs={},u.styleAttrs)u.styleAttrs.hasOwnProperty(m)&&(this.styleAttrs[m]=u.styleAttrs[m]);"src"in u&&(this.src=u.src),"type"in u&&(this.type=u.type),"text"in u?this.text=u.text:(this.kind==="region"||"contents"in u)&&(this.contents=[]),"space"in u&&(this.space=u.space)}function t(u,m){if(u&&u.error&&u.error(m))throw m}})(R,typeof imscNames>"u"?I(210):imscNames,typeof imscStyles>"u"?I(6811):imscStyles,typeof imscUtils>"u"?I(5926):imscUtils)},4403:(C,R,I)=>{R.generateISD=I(4080).generateISD,R.fromXML=I(3362).fromXML,R.renderHTML=I(506).render},210:(C,R)=>{(function(I){I.ns_tt="http://www.w3.org/ns/ttml",I.ns_tts="http://www.w3.org/ns/ttml#styling",I.ns_ttp="http://www.w3.org/ns/ttml#parameter",I.ns_xml="http://www.w3.org/XML/1998/namespace",I.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",I.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",I.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",I.ns_ebutts="urn:ebu:tt:style"})(R)},6811:(C,R,I)=>{(function(E,T,l){function c(i,g,d,r,t,u,m,S){this.name=g,this.ns=i,this.qname=i+" "+g,this.inherit=t,this.animatable=u,this.initial=d,this.applies=r,this.parse=m,this.compute=S}for(var h in E.all=[new c(T.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,l.parseColor,null),new c(T.ns_tts,"color","white",["span"],!0,!0,l.parseColor,null),new c(T.ns_tts,"direction","ltr",["p","span"],!0,!0,function(i){return i},null),new c(T.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(i){return i},null),new c(T.ns_tts,"displayAlign","before",["region"],!1,!0,function(i){return i},null),new c(T.ns_tts,"extent","auto",["tt","region"],!1,!0,function(i){if(i==="auto")return i;var g=i.split(" ");if(g.length!==2)return null;var d=l.parseLength(g[0]),r=l.parseLength(g[1]);return r&&d?{h:r,w:d}:null},function(i,g,d,r,t){var u,m;if(r==="auto")u=new l.ComputedLength(0,1);else if((u=l.toComputedLength(r.h.value,r.h.unit,null,i.dimensions.h,null,i.pxLength.h))===null)return null;if(r==="auto")m=new l.ComputedLength(1,0);else if((m=l.toComputedLength(r.w.value,r.w.unit,null,i.dimensions.w,null,i.pxLength.w))===null)return null;return{h:u,w:m}}),new c(T.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(i){for(var g=i.split(","),d=[],r=0;r<g.length;r++)g[r].charAt(0)!=="'"&&g[r].charAt(0)!=='"'&&g[r]==="default"?d.push("monospaceSerif"):d.push(g[r]);return d},null),new c(T.ns_tts,"shear","0%",["p"],!0,!0,l.parseLength,function(i,g,d,r){return r.unit!=="%"?null:Math.abs(r.value)>100?100*Math.sign(r.value):r.value}),new c(T.ns_tts,"fontSize","1c",["span","p"],!0,!0,l.parseLength,function(i,g,d,r,t){return l.toComputedLength(r.value,r.unit,g!==null?g.styleAttrs[E.byName.fontSize.qname]:i.cellLength.h,g!==null?g.styleAttrs[E.byName.fontSize.qname]:i.cellLength.h,i.cellLength.h,i.pxLength.h)}),new c(T.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(i){return i},null),new c(T.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(i){return i},null),new c(T.ns_tts,"lineHeight","normal",["p"],!0,!0,function(i){return i==="normal"?i:l.parseLength(i)},function(i,g,d,r,t){var u;if(r==="normal")u=r;else if((u=l.toComputedLength(r.value,r.unit,d.styleAttrs[E.byName.fontSize.qname],d.styleAttrs[E.byName.fontSize.qname],i.cellLength.h,i.pxLength.h))===null)return null;return u}),new c(T.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new c(T.ns_tts,"origin","auto",["region"],!1,!0,function(i){if(i==="auto")return i;var g=i.split(" ");if(g.length!==2)return null;var d=l.parseLength(g[0]),r=l.parseLength(g[1]);return r&&d?{h:r,w:d}:null},function(i,g,d,r,t){var u,m;if(r==="auto")u=new l.ComputedLength(0,0);else if((u=l.toComputedLength(r.h.value,r.h.unit,null,i.dimensions.h,null,i.pxLength.h))===null)return null;if(r==="auto")m=new l.ComputedLength(0,0);else if((m=l.toComputedLength(r.w.value,r.w.unit,null,i.dimensions.w,null,i.pxLength.w))===null)return null;return{h:u,w:m}}),new c(T.ns_tts,"overflow","hidden",["region"],!1,!0,function(i){return i},null),new c(T.ns_tts,"padding","0px",["region"],!1,!0,function(i){var g=i.split(" ");if(g.length>4)return null;for(var d=[],r=0;r<g.length;r++){var t=l.parseLength(g[r]);if(!t)return null;d.push(t)}return d},function(i,g,d,r,t){var u;if(r.length===1)u=[r[0],r[0],r[0],r[0]];else if(r.length===2)u=[r[0],r[1],r[0],r[1]];else if(r.length===3)u=[r[0],r[1],r[2],r[1]];else{if(r.length!==4)return null;u=[r[0],r[1],r[2],r[3]]}var m=d.styleAttrs[E.byName.writingMode.qname];if(m==="lrtb"||m==="lr")u=[u[0],u[3],u[2],u[1]];else if(m==="rltb"||m==="rl")u=[u[0],u[1],u[2],u[3]];else if(m==="tblr")u=[u[3],u[0],u[1],u[2]];else{if(m!=="tbrl"&&m!=="tb")return null;u=[u[3],u[2],u[1],u[0]]}for(var S=[],A=0;A<u.length;A++)if(u[A].value===0)S[A]=new l.ComputedLength(0,0);else if(S[A]=l.toComputedLength(u[A].value,u[A].unit,d.styleAttrs[E.byName.fontSize.qname],A===0||A===2?d.styleAttrs[E.byName.extent.qname].h:d.styleAttrs[E.byName.extent.qname].w,A===0||A===2?i.cellLength.h:i.cellLength.w,A===0||A===2?i.pxLength.h:i.pxLength.w),S[A]===null)return null;return S}),new c(T.ns_tts,"position","top left",["region"],!1,!0,function(i){return l.parsePosition(i)},function(i,g,d,r){var t,u;return(t=l.toComputedLength(r.v.offset.value,r.v.offset.unit,null,new l.ComputedLength(-d.styleAttrs[E.byName.extent.qname].h.rw,i.dimensions.h.rh-d.styleAttrs[E.byName.extent.qname].h.rh),null,i.pxLength.h))===null?null:(r.v.edge==="bottom"&&(t=new l.ComputedLength(-t.rw-d.styleAttrs[E.byName.extent.qname].h.rw,i.dimensions.h.rh-t.rh-d.styleAttrs[E.byName.extent.qname].h.rh)),u=l.toComputedLength(r.h.offset.value,r.h.offset.unit,null,new l.ComputedLength(i.dimensions.w.rw-d.styleAttrs[E.byName.extent.qname].w.rw,-d.styleAttrs[E.byName.extent.qname].w.rh),null,i.pxLength.w),t===null?null:(r.h.edge==="right"&&(u=new l.ComputedLength(i.dimensions.w.rw-u.rw-d.styleAttrs[E.byName.extent.qname].w.rw,-u.rh-d.styleAttrs[E.byName.extent.qname].w.rh)),{h:t,w:u}))}),new c(T.ns_tts,"ruby","none",["span"],!1,!0,function(i){return i},null),new c(T.ns_tts,"rubyAlign","center",["span"],!0,!0,function(i){return i!=="center"&&i!=="spaceAround"?null:i},null),new c(T.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(i){return i},null),new c(T.ns_tts,"rubyReserve","none",["p"],!0,!0,function(i){var g=i.split(" "),d=[null,null];if(g.length===0||g.length>2||g[0]!=="none"&&g[0]!=="both"&&g[0]!=="after"&&g[0]!=="before"&&g[0]!=="outside")return null;if(d[0]=g[0],g.length===2&&g[0]!=="none"){var r=l.parseLength(g[1]);if(!r)return null;d[1]=r}return d},function(i,g,d,r,t){return r[0]==="none"?r:(u=r[1]===null?new l.ComputedLength(.5*d.styleAttrs[E.byName.fontSize.qname].rw,.5*d.styleAttrs[E.byName.fontSize.qname].rh):l.toComputedLength(r[1].value,r[1].unit,d.styleAttrs[E.byName.fontSize.qname],d.styleAttrs[E.byName.fontSize.qname],i.cellLength.h,i.pxLength.h))===null?null:[r[0],u];var u}),new c(T.ns_tts,"showBackground","always",["region"],!1,!0,function(i){return i},null),new c(T.ns_tts,"textAlign","start",["p"],!0,!0,function(i){return i},function(i,g,d,r,t){return r==="left"?"start":r==="right"?"end":r}),new c(T.ns_tts,"textCombine","none",["span"],!0,!0,function(i){return i==="none"||i==="all"?i:null},null),new c(T.ns_tts,"textDecoration","none",["span"],!0,!0,function(i){return i.split(" ")},null),new c(T.ns_tts,"textEmphasis","none",["span"],!0,!0,function(i){for(var g=i.split(" "),d={style:null,symbol:null,color:null,position:null},r=0;r<g.length;r++)if(g[r]==="none"||g[r]==="auto")d.style=g[r];else if(g[r]==="filled"||g[r]==="open")d.style=g[r];else if(g[r]==="circle"||g[r]==="dot"||g[r]==="sesame")d.symbol=g[r];else if(g[r]==="current")d.color=g[r];else if(g[r]==="outside"||g[r]==="before"||g[r]==="after")d.position=g[r];else if(d.color=l.parseColor(g[r]),d.color===null)return null;return d.style==null&&d.symbol==null?d.style="auto":(d.symbol=d.symbol||"circle",d.style=d.style||"filled"),d.position=d.position||"outside",d.color=d.color||"current",d},null),new c(T.ns_tts,"textOutline","none",["span"],!0,!0,function(i){if(i==="none")return i;var g={},d=i.split(" ");if(d.length===0||d.length>2)return null;var r=l.parseColor(d[0]);if(g.color=r,r!==null&&d.shift(),d.length!==1)return null;var t=l.parseLength(d[0]);return t?(g.thickness=t,g):null},function(i,g,d,r,t){if(r==="none")return r;var u={};return r.color===null?u.color=d.styleAttrs[E.byName.color.qname]:u.color=r.color,u.thickness=l.toComputedLength(r.thickness.value,r.thickness.unit,d.styleAttrs[E.byName.fontSize.qname],d.styleAttrs[E.byName.fontSize.qname],i.cellLength.h,i.pxLength.h),u.thickness===null?null:u}),new c(T.ns_tts,"textShadow","none",["span"],!0,!0,l.parseTextShadow,function(i,g,d,r){if(r==="none")return r;for(var t=[],u=0;u<r.length;u++){var m={};if(m.x_off=l.toComputedLength(r[u][0].value,r[u][0].unit,null,d.styleAttrs[E.byName.fontSize.qname],null,i.pxLength.w),m.x_off===null||(m.y_off=l.toComputedLength(r[u][1].value,r[u][1].unit,null,d.styleAttrs[E.byName.fontSize.qname],null,i.pxLength.h),m.y_off===null))return null;if(r[u][2]===null)m.b_radius=0;else if(m.b_radius=l.toComputedLength(r[u][2].value,r[u][2].unit,null,d.styleAttrs[E.byName.fontSize.qname],null,i.pxLength.h),m.b_radius===null)return null;r[u][3]===null?m.color=d.styleAttrs[E.byName.color.qname]:m.color=r[u][3],t.push(m)}return t}),new c(T.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(i){return i},null),new c(T.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(i){return i},null),new c(T.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(i){return i},null),new c(T.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(i){return i},null),new c(T.ns_tts,"zIndex","auto",["region"],!1,!0,function(i){var g;return i==="auto"?g=i:(g=parseInt(i),isNaN(g)&&(g=null)),g},null),new c(T.ns_ebutts,"linePadding","0c",["p"],!0,!1,l.parseLength,function(i,g,d,r,t){return l.toComputedLength(r.value,r.unit,null,null,i.cellLength.w,null)}),new c(T.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(i){return i},null),new c(T.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(i){return i},null),new c(T.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(i){return i==="true"},null),new c(T.ns_itts,"fillLineGap","false",["p"],!0,!0,function(i){return i==="true"},null)],E.byQName={},E.all)E.byQName[E.all[h].qname]=E.all[h];for(var y in E.byName={},E.all)E.byName[E.all[y].name]=E.all[y]})(R,typeof imscNames>"u"?I(210):imscNames,typeof imscUtils>"u"?I(5926):imscUtils)},5926:(C,R)=>{(function(I){var E=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,T=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,l=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,c={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};I.parseColor=function(y){var i,g=null,d=c[y.toLowerCase()];return d!==void 0?g=d:(i=E.exec(y))!==null?g=[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),i[4]!==void 0?parseInt(i[4],16):255]:(i=T.exec(y))!==null?g=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3]),255]:(i=l.exec(y))!==null&&(g=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3]),parseInt(i[4])]),g};var h=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;I.parseLength=function(y){var i,g=null;return(i=h.exec(y))!==null&&(g={value:parseFloat(i[1]),unit:i[2]}),g},I.parseTextShadow=function(y){for(var i=y.match(/([^\(,\)]|\([^\)]+\))+/g),g=[],d=0;d<i.length;d++){var r=i[d].split(" ");if(r.length===1&&r[0]==="none")return"none";if(r.length>1&&r.length<5){var t=[null,null,null,null],u=I.parseLength(r.shift());if(u===null||(t[0]=u,(u=I.parseLength(r.shift()))===null))return null;if(t[1]=u,r.length===0){g.push(t);continue}if((u=I.parseLength(r[0]))!==null&&(t[2]=u,r.shift()),r.length===0){g.push(t);continue}var m=I.parseColor(r[0]);if(m===null)return null;t[3]=m,g.push(t)}}return g},I.parsePosition=function(y){var i=y.split(" "),g=function(A){return A==="center"||A==="left"||A==="top"||A==="bottom"||A==="right"};if(i.length>4)return null;for(var d=0;d<i.length;d++)if(!g(i[d])){var r=I.parseLength(i[d]);if(r===null)return null;i[d]=r}for(var t={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},u=0;u<i.length;){var m=i[u++];if(g(m)){var S={value:0,unit:"%"};i.length!==2&&u<i.length&&!g(i[u])&&(S=i[u++]),m==="right"?(t.h.edge=m,t.h.offset=S):m==="bottom"?(t.v.edge=m,t.v.offset=S):m==="left"?t.h.offset=S:m==="top"&&(t.v.offset=S)}else{if(i.length!==1&&i.length!==2)return null;u===1?t.h.offset=m:t.v.offset=m}}return t},I.ComputedLength=function(y,i){this.rw=y,this.rh=i},I.ComputedLength.prototype.toUsedLength=function(y,i){return y*this.rw+i*this.rh},I.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},I.toComputedLength=function(y,i,g,d,r,t){return i==="%"&&d?new I.ComputedLength(d.rw*y/100,d.rh*y/100):i==="em"&&g?new I.ComputedLength(g.rw*y,g.rh*y):i==="c"&&r?new I.ComputedLength(y*r.rw,y*r.rh):i==="px"&&t?new I.ComputedLength(y*t.rw,y*t.rh):i==="rh"?new I.ComputedLength(0,y/100):i==="rw"?new I.ComputedLength(y/100,0):null}})(R)},3516:C=>{C.exports=function(R){var I=typeof R=="string"?R.charCodeAt(0):R;return I>=97&&I<=122||I>=65&&I<=90}},2219:(C,R,I)=>{var E=I(3516),T=I(395);C.exports=function(l){return E(l)||T(l)}},395:C=>{C.exports=function(R){var I=typeof R=="string"?R.charCodeAt(0):R;return I>=48&&I<=57}},3875:C=>{function R(T){if(typeof T!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(T))}function I(T,l){for(var c,h="",y=0,i=-1,g=0,d=0;d<=T.length;++d){if(d<T.length)c=T.charCodeAt(d);else{if(c===47)break;c=47}if(c===47){if(!(i===d-1||g===1))if(i!==d-1&&g===2){if(h.length<2||y!==2||h.charCodeAt(h.length-1)!==46||h.charCodeAt(h.length-2)!==46){if(h.length>2){var r=h.lastIndexOf("/");if(r!==h.length-1){r===-1?(h="",y=0):y=(h=h.slice(0,r)).length-1-h.lastIndexOf("/"),i=d,g=0;continue}}else if(h.length===2||h.length===1){h="",y=0,i=d,g=0;continue}}l&&(h.length>0?h+="/..":h="..",y=2)}else h.length>0?h+="/"+T.slice(i+1,d):h=T.slice(i+1,d),y=d-i-1;i=d,g=0}else c===46&&g!==-1?++g:g=-1}return h}var E={resolve:function(){for(var T,l="",c=!1,h=arguments.length-1;h>=-1&&!c;h--){var y;h>=0?y=arguments[h]:(T===void 0&&(T=process.cwd()),y=T),R(y),y.length!==0&&(l=y+"/"+l,c=y.charCodeAt(0)===47)}return l=I(l,!c),c?l.length>0?"/"+l:"/":l.length>0?l:"."},normalize:function(T){if(R(T),T.length===0)return".";var l=T.charCodeAt(0)===47,c=T.charCodeAt(T.length-1)===47;return(T=I(T,!l)).length!==0||l||(T="."),T.length>0&&c&&(T+="/"),l?"/"+T:T},isAbsolute:function(T){return R(T),T.length>0&&T.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var T,l=0;l<arguments.length;++l){var c=arguments[l];R(c),c.length>0&&(T===void 0?T=c:T+="/"+c)}return T===void 0?".":E.normalize(T)},relative:function(T,l){if(R(T),R(l),T===l||(T=E.resolve(T))===(l=E.resolve(l)))return"";for(var c=1;c<T.length&&T.charCodeAt(c)===47;++c);for(var h=T.length,y=h-c,i=1;i<l.length&&l.charCodeAt(i)===47;++i);for(var g=l.length-i,d=y<g?y:g,r=-1,t=0;t<=d;++t){if(t===d){if(g>d){if(l.charCodeAt(i+t)===47)return l.slice(i+t+1);if(t===0)return l.slice(i+t)}else y>d&&(T.charCodeAt(c+t)===47?r=t:t===0&&(r=0));break}var u=T.charCodeAt(c+t);if(u!==l.charCodeAt(i+t))break;u===47&&(r=t)}var m="";for(t=c+r+1;t<=h;++t)t!==h&&T.charCodeAt(t)!==47||(m.length===0?m+="..":m+="/..");return m.length>0?m+l.slice(i+r):(i+=r,l.charCodeAt(i)===47&&++i,l.slice(i))},_makeLong:function(T){return T},dirname:function(T){if(R(T),T.length===0)return".";for(var l=T.charCodeAt(0),c=l===47,h=-1,y=!0,i=T.length-1;i>=1;--i)if((l=T.charCodeAt(i))===47){if(!y){h=i;break}}else y=!1;return h===-1?c?"/":".":c&&h===1?"//":T.slice(0,h)},basename:function(T,l){if(l!==void 0&&typeof l!="string")throw new TypeError('"ext" argument must be a string');R(T);var c,h=0,y=-1,i=!0;if(l!==void 0&&l.length>0&&l.length<=T.length){if(l.length===T.length&&l===T)return"";var g=l.length-1,d=-1;for(c=T.length-1;c>=0;--c){var r=T.charCodeAt(c);if(r===47){if(!i){h=c+1;break}}else d===-1&&(i=!1,d=c+1),g>=0&&(r===l.charCodeAt(g)?--g==-1&&(y=c):(g=-1,y=d))}return h===y?y=d:y===-1&&(y=T.length),T.slice(h,y)}for(c=T.length-1;c>=0;--c)if(T.charCodeAt(c)===47){if(!i){h=c+1;break}}else y===-1&&(i=!1,y=c+1);return y===-1?"":T.slice(h,y)},extname:function(T){R(T);for(var l=-1,c=0,h=-1,y=!0,i=0,g=T.length-1;g>=0;--g){var d=T.charCodeAt(g);if(d!==47)h===-1&&(y=!1,h=g+1),d===46?l===-1?l=g:i!==1&&(i=1):l!==-1&&(i=-1);else if(!y){c=g+1;break}}return l===-1||h===-1||i===0||i===1&&l===h-1&&l===c+1?"":T.slice(l,h)},format:function(T){if(T===null||typeof T!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof T);return function(l,c){var h=c.dir||c.root,y=c.base||(c.name||"")+(c.ext||"");return h?h===c.root?h+y:h+"/"+y:y}(0,T)},parse:function(T){R(T);var l={root:"",dir:"",base:"",ext:"",name:""};if(T.length===0)return l;var c,h=T.charCodeAt(0),y=h===47;y?(l.root="/",c=1):c=0;for(var i=-1,g=0,d=-1,r=!0,t=T.length-1,u=0;t>=c;--t)if((h=T.charCodeAt(t))!==47)d===-1&&(r=!1,d=t+1),h===46?i===-1?i=t:u!==1&&(u=1):i!==-1&&(u=-1);else if(!r){g=t+1;break}return i===-1||d===-1||u===0||u===1&&i===d-1&&i===g+1?d!==-1&&(l.base=l.name=g===0&&y?T.slice(1,d):T.slice(g,d)):(g===0&&y?(l.name=T.slice(1,i),l.base=T.slice(1,d)):(l.name=T.slice(g,i),l.base=T.slice(g,d)),l.ext=T.slice(i,d)),g>0?l.dir=T.slice(0,g-1):y&&(l.dir="/"),l},sep:"/",delimiter:":",win32:null,posix:null};E.posix=E,C.exports=E},8387:(C,R,I)=>{var E=I(1549),T=E.Buffer;function l(h,y){for(var i in h)y[i]=h[i]}function c(h,y,i){return T(h,y,i)}T.from&&T.alloc&&T.allocUnsafe&&T.allocUnsafeSlow?C.exports=E:(l(E,R),R.Buffer=c),l(T,c),c.from=function(h,y,i){if(typeof h=="number")throw new TypeError("Argument must not be a number");return T(h,y,i)},c.alloc=function(h,y,i){if(typeof h!="number")throw new TypeError("Argument must be a number");var g=T(h);return y!==void 0?typeof i=="string"?g.fill(y,i):g.fill(y):g.fill(0),g},c.allocUnsafe=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return T(h)},c.allocUnsafeSlow=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return E.SlowBuffer(h)}},5378:(C,R,I)=>{(function(E){E.parser=function(V,H){return new c(V,H)},E.SAXParser=c,E.SAXStream=y,E.createStream=function(V,H){return new y(V,H)},E.MAX_BUFFER_LENGTH=65536;var T,l=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function c(V,H){if(!(this instanceof c))return new c(V,H);var z=this;(function(X){for(var de=0,ge=l.length;de<ge;de++)X[l[de]]=""})(z),z.q=z.c="",z.bufferCheckPosition=E.MAX_BUFFER_LENGTH,z.opt=H||{},z.opt.lowercase=z.opt.lowercase||z.opt.lowercasetags,z.looseCase=z.opt.lowercase?"toLowerCase":"toUpperCase",z.tags=[],z.closed=z.closedRoot=z.sawRoot=!1,z.tag=z.error=null,z.strict=!!V,z.noscript=!(!V&&!z.opt.noscript),z.state=G.BEGIN,z.strictEntities=z.opt.strictEntities,z.ENTITIES=z.strictEntities?Object.create(E.XML_ENTITIES):Object.create(E.ENTITIES),z.attribList=[],z.opt.xmlns&&(z.ns=Object.create(S)),z.trackPosition=z.opt.position!==!1,z.trackPosition&&(z.position=z.line=z.column=0),ne(z,"onready")}E.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(V){function H(){}return H.prototype=V,new H}),Object.keys||(Object.keys=function(V){var H=[];for(var z in V)V.hasOwnProperty(z)&&H.push(z);return H}),c.prototype={end:function(){Ue(this)},write:function(V){var H=this;if(this.error)throw this.error;if(H.closed)return Te(H,"Cannot write after close. Assign an onready handler.");if(V===null)return Ue(H);typeof V=="object"&&(V=V.toString());for(var z=0,X="";X=Ce(V,z++),H.c=X,X;)switch(H.trackPosition&&(H.position++,X===`
`?(H.line++,H.column=0):H.column++),H.state){case G.BEGIN:if(H.state=G.BEGIN_WHITESPACE,X==="\uFEFF")continue;fe(H,X);continue;case G.BEGIN_WHITESPACE:fe(H,X);continue;case G.TEXT:if(H.sawRoot&&!H.closedRoot){for(var de=z-1;X&&X!=="<"&&X!=="&";)(X=Ce(V,z++))&&H.trackPosition&&(H.position++,X===`
`?(H.line++,H.column=0):H.column++);H.textNode+=V.substring(de,z-1)}X!=="<"||H.sawRoot&&H.closedRoot&&!H.strict?(!k(i,X)||H.sawRoot&&!H.closedRoot||ze(H,"Text data outside of root node."),X==="&"?H.state=G.TEXT_ENTITY:H.textNode+=X):(H.state=G.OPEN_WAKA,H.startTagPosition=H.position);continue;case G.SCRIPT:X==="<"?H.state=G.SCRIPT_ENDING:H.script+=X;continue;case G.SCRIPT_ENDING:X==="/"?H.state=G.CLOSE_TAG:(H.script+="<"+X,H.state=G.SCRIPT);continue;case G.OPEN_WAKA:if(X==="!")H.state=G.SGML_DECL,H.sgmlDecl="";else if(!p(i,X))if(p(A,X))H.state=G.OPEN_TAG,H.tagName=X;else if(X==="/")H.state=G.CLOSE_TAG,H.tagName="";else if(X==="?")H.state=G.PROC_INST,H.procInstName=H.procInstBody="";else{if(ze(H,"Unencoded <"),H.startTagPosition+1<H.position){var ge=H.position-H.startTagPosition;X=new Array(ge).join(" ")+X}H.textNode+="<"+X,H.state=G.TEXT}continue;case G.SGML_DECL:(H.sgmlDecl+X).toUpperCase()==="[CDATA["?(re(H,"onopencdata"),H.state=G.CDATA,H.sgmlDecl="",H.cdata=""):H.sgmlDecl+X==="--"?(H.state=G.COMMENT,H.comment="",H.sgmlDecl=""):(H.sgmlDecl+X).toUpperCase()==="DOCTYPE"?(H.state=G.DOCTYPE,(H.doctype||H.sawRoot)&&ze(H,"Inappropriately located doctype declaration"),H.doctype="",H.sgmlDecl=""):X===">"?(re(H,"onsgmldeclaration",H.sgmlDecl),H.sgmlDecl="",H.state=G.TEXT):(p(r,X)&&(H.state=G.SGML_DECL_QUOTED),H.sgmlDecl+=X);continue;case G.SGML_DECL_QUOTED:X===H.q&&(H.state=G.SGML_DECL,H.q=""),H.sgmlDecl+=X;continue;case G.DOCTYPE:X===">"?(H.state=G.TEXT,re(H,"ondoctype",H.doctype),H.doctype=!0):(H.doctype+=X,X==="["?H.state=G.DOCTYPE_DTD:p(r,X)&&(H.state=G.DOCTYPE_QUOTED,H.q=X));continue;case G.DOCTYPE_QUOTED:H.doctype+=X,X===H.q&&(H.q="",H.state=G.DOCTYPE);continue;case G.DOCTYPE_DTD:H.doctype+=X,X==="]"?H.state=G.DOCTYPE:p(r,X)&&(H.state=G.DOCTYPE_DTD_QUOTED,H.q=X);continue;case G.DOCTYPE_DTD_QUOTED:H.doctype+=X,X===H.q&&(H.state=G.DOCTYPE_DTD,H.q="");continue;case G.COMMENT:X==="-"?H.state=G.COMMENT_ENDING:H.comment+=X;continue;case G.COMMENT_ENDING:X==="-"?(H.state=G.COMMENT_ENDED,H.comment=W(H.opt,H.comment),H.comment&&re(H,"oncomment",H.comment),H.comment=""):(H.comment+="-"+X,H.state=G.COMMENT);continue;case G.COMMENT_ENDED:X!==">"?(ze(H,"Malformed comment"),H.comment+="--"+X,H.state=G.COMMENT):H.state=G.TEXT;continue;case G.CDATA:X==="]"?H.state=G.CDATA_ENDING:H.cdata+=X;continue;case G.CDATA_ENDING:X==="]"?H.state=G.CDATA_ENDING_2:(H.cdata+="]"+X,H.state=G.CDATA);continue;case G.CDATA_ENDING_2:X===">"?(H.cdata&&re(H,"oncdata",H.cdata),re(H,"onclosecdata"),H.cdata="",H.state=G.TEXT):X==="]"?H.cdata+="]":(H.cdata+="]]"+X,H.state=G.CDATA);continue;case G.PROC_INST:X==="?"?H.state=G.PROC_INST_ENDING:p(i,X)?H.state=G.PROC_INST_BODY:H.procInstName+=X;continue;case G.PROC_INST_BODY:if(!H.procInstBody&&p(i,X))continue;X==="?"?H.state=G.PROC_INST_ENDING:H.procInstBody+=X;continue;case G.PROC_INST_ENDING:X===">"?(re(H,"onprocessinginstruction",{name:H.procInstName,body:H.procInstBody}),H.procInstName=H.procInstBody="",H.state=G.TEXT):(H.procInstBody+="?"+X,H.state=G.PROC_INST_BODY);continue;case G.OPEN_TAG:p(_,X)?H.tagName+=X:(le(H),X===">"?Y(H):X==="/"?H.state=G.OPEN_TAG_SLASH:(k(i,X)&&ze(H,"Invalid character in tag name"),H.state=G.ATTRIB));continue;case G.OPEN_TAG_SLASH:X===">"?(Y(H,!0),Q(H)):(ze(H,"Forward-slash in opening tag not followed by >"),H.state=G.ATTRIB);continue;case G.ATTRIB:if(p(i,X))continue;X===">"?Y(H):X==="/"?H.state=G.OPEN_TAG_SLASH:p(A,X)?(H.attribName=X,H.attribValue="",H.state=G.ATTRIB_NAME):ze(H,"Invalid attribute name");continue;case G.ATTRIB_NAME:X==="="?H.state=G.ATTRIB_VALUE:X===">"?(ze(H,"Attribute without value"),H.attribValue=H.attribName,be(H),Y(H)):p(i,X)?H.state=G.ATTRIB_NAME_SAW_WHITE:p(_,X)?H.attribName+=X:ze(H,"Invalid attribute name");continue;case G.ATTRIB_NAME_SAW_WHITE:if(X==="=")H.state=G.ATTRIB_VALUE;else{if(p(i,X))continue;ze(H,"Attribute without value"),H.tag.attributes[H.attribName]="",H.attribValue="",re(H,"onattribute",{name:H.attribName,value:""}),H.attribName="",X===">"?Y(H):p(A,X)?(H.attribName=X,H.state=G.ATTRIB_NAME):(ze(H,"Invalid attribute name"),H.state=G.ATTRIB)}continue;case G.ATTRIB_VALUE:if(p(i,X))continue;p(r,X)?(H.q=X,H.state=G.ATTRIB_VALUE_QUOTED):(ze(H,"Unquoted attribute value"),H.state=G.ATTRIB_VALUE_UNQUOTED,H.attribValue=X);continue;case G.ATTRIB_VALUE_QUOTED:if(X!==H.q){X==="&"?H.state=G.ATTRIB_VALUE_ENTITY_Q:H.attribValue+=X;continue}be(H),H.q="",H.state=G.ATTRIB_VALUE_CLOSED;continue;case G.ATTRIB_VALUE_CLOSED:p(i,X)?H.state=G.ATTRIB:X===">"?Y(H):X==="/"?H.state=G.OPEN_TAG_SLASH:p(A,X)?(ze(H,"No whitespace between attributes"),H.attribName=X,H.attribValue="",H.state=G.ATTRIB_NAME):ze(H,"Invalid attribute name");continue;case G.ATTRIB_VALUE_UNQUOTED:if(k(t,X)){X==="&"?H.state=G.ATTRIB_VALUE_ENTITY_U:H.attribValue+=X;continue}be(H),X===">"?Y(H):H.state=G.ATTRIB;continue;case G.CLOSE_TAG:if(H.tagName)X===">"?Q(H):p(_,X)?H.tagName+=X:H.script?(H.script+="</"+H.tagName,H.tagName="",H.state=G.SCRIPT):(k(i,X)&&ze(H,"Invalid tagname in closing tag"),H.state=G.CLOSE_TAG_SAW_WHITE);else{if(p(i,X))continue;k(A,X)?H.script?(H.script+="</"+X,H.state=G.SCRIPT):ze(H,"Invalid tagname in closing tag."):H.tagName=X}continue;case G.CLOSE_TAG_SAW_WHITE:if(p(i,X))continue;X===">"?Q(H):ze(H,"Invalid characters in closing tag");continue;case G.TEXT_ENTITY:case G.ATTRIB_VALUE_ENTITY_Q:case G.ATTRIB_VALUE_ENTITY_U:var Ge,it;switch(H.state){case G.TEXT_ENTITY:Ge=G.TEXT,it="textNode";break;case G.ATTRIB_VALUE_ENTITY_Q:Ge=G.ATTRIB_VALUE_QUOTED,it="attribValue";break;case G.ATTRIB_VALUE_ENTITY_U:Ge=G.ATTRIB_VALUE_UNQUOTED,it="attribValue"}X===";"?(H[it]+=J(H),H.entity="",H.state=Ge):p(H.entity.length?f:v,X)?H.entity+=X:(ze(H,"Invalid character in entity name"),H[it]+="&"+H.entity+X,H.entity="",H.state=Ge);continue;default:throw new Error(H,"Unknown state: "+H.state)}return H.position>=H.bufferCheckPosition&&function(Ye){for(var Ke=Math.max(E.MAX_BUFFER_LENGTH,10),dt=0,me=0,ke=l.length;me<ke;me++){var Je=Ye[l[me]].length;if(Je>Ke)switch(l[me]){case"textNode":oe(Ye);break;case"cdata":re(Ye,"oncdata",Ye.cdata),Ye.cdata="";break;case"script":re(Ye,"onscript",Ye.script),Ye.script="";break;default:Te(Ye,"Max buffer length exceeded: "+l[me])}dt=Math.max(dt,Je)}var Xe=E.MAX_BUFFER_LENGTH-dt;Ye.bufferCheckPosition=Xe+Ye.position}(H),H},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var V;oe(V=this),V.cdata!==""&&(re(V,"oncdata",V.cdata),V.cdata=""),V.script!==""&&(re(V,"onscript",V.script),V.script="")}};try{T=I(182).Stream}catch{T=function(){}}var h=E.EVENTS.filter(function(V){return V!=="error"&&V!=="end"});function y(V,H){if(!(this instanceof y))return new y(V,H);T.apply(this),this._parser=new c(V,H),this.writable=!0,this.readable=!0;var z=this;this._parser.onend=function(){z.emit("end")},this._parser.onerror=function(X){z.emit("error",X),z._parser.error=null},this._decoder=null,h.forEach(function(X){Object.defineProperty(z,"on"+X,{get:function(){return z._parser["on"+X]},set:function(de){if(!de)return z.removeAllListeners(X),z._parser["on"+X]=de,de;z.on(X,de)},enumerable:!0,configurable:!1})})}y.prototype=Object.create(T.prototype,{constructor:{value:y}}),y.prototype.write=function(V){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(V)){if(!this._decoder){var H=I(7503).s;this._decoder=new H("utf8")}V=this._decoder.write(V)}return this._parser.write(V.toString()),this.emit("data",V),!0},y.prototype.end=function(V){return V&&V.length&&this.write(V),this._parser.end(),!0},y.prototype.on=function(V,H){var z=this;return z._parser["on"+V]||h.indexOf(V)===-1||(z._parser["on"+V]=function(){var X=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);X.splice(0,0,V),z.emit.apply(z,X)}),T.prototype.on.call(z,V,H)};var i=`\r
	 `,g="0124356789",d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=`'"`,t=i+">",u="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",S={xml:u,xmlns:m};i=b(i),g=b(g),d=b(d);var A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function b(V){return V.split("").reduce(function(H,z){return H[z]=!0,H},{})}function p(V,H){return function(z){return Object.prototype.toString.call(z)==="[object RegExp]"}(V)?!!H.match(V):V[H]}function k(V,H){return!p(V,H)}r=b(r),t=b(t);var P,j,U,G=0;for(var ee in E.STATE={BEGIN:G++,BEGIN_WHITESPACE:G++,TEXT:G++,TEXT_ENTITY:G++,OPEN_WAKA:G++,SGML_DECL:G++,SGML_DECL_QUOTED:G++,DOCTYPE:G++,DOCTYPE_QUOTED:G++,DOCTYPE_DTD:G++,DOCTYPE_DTD_QUOTED:G++,COMMENT_STARTING:G++,COMMENT:G++,COMMENT_ENDING:G++,COMMENT_ENDED:G++,CDATA:G++,CDATA_ENDING:G++,CDATA_ENDING_2:G++,PROC_INST:G++,PROC_INST_BODY:G++,PROC_INST_ENDING:G++,OPEN_TAG:G++,OPEN_TAG_SLASH:G++,ATTRIB:G++,ATTRIB_NAME:G++,ATTRIB_NAME_SAW_WHITE:G++,ATTRIB_VALUE:G++,ATTRIB_VALUE_QUOTED:G++,ATTRIB_VALUE_CLOSED:G++,ATTRIB_VALUE_UNQUOTED:G++,ATTRIB_VALUE_ENTITY_Q:G++,ATTRIB_VALUE_ENTITY_U:G++,CLOSE_TAG:G++,CLOSE_TAG_SAW_WHITE:G++,SCRIPT:G++,SCRIPT_ENDING:G++},E.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},E.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(E.ENTITIES).forEach(function(V){var H=E.ENTITIES[V],z=typeof H=="number"?String.fromCharCode(H):H;E.ENTITIES[V]=z}),E.STATE)E.STATE[E.STATE[ee]]=ee;function ne(V,H,z){V[H]&&V[H](z)}function re(V,H,z){V.textNode&&oe(V),ne(V,H,z)}function oe(V){V.textNode=W(V.opt,V.textNode),V.textNode&&ne(V,"ontext",V.textNode),V.textNode=""}function W(V,H){return V.trim&&(H=H.trim()),V.normalize&&(H=H.replace(/\s+/g," ")),H}function Te(V,H){return oe(V),V.trackPosition&&(H+=`
Line: `+V.line+`
Column: `+V.column+`
Char: `+V.c),H=new Error(H),V.error=H,ne(V,"onerror",H),V}function Ue(V){return V.sawRoot&&!V.closedRoot&&ze(V,"Unclosed root tag"),V.state!==G.BEGIN&&V.state!==G.BEGIN_WHITESPACE&&V.state!==G.TEXT&&Te(V,"Unexpected end"),oe(V),V.c="",V.closed=!0,ne(V,"onend"),c.call(V,V.strict,V.opt),V}function ze(V,H){if(typeof V!="object"||!(V instanceof c))throw new Error("bad call to strictFail");V.strict&&Te(V,H)}function le(V){V.strict||(V.tagName=V.tagName[V.looseCase]());var H=V.tags[V.tags.length-1]||V,z=V.tag={name:V.tagName,attributes:{}};V.opt.xmlns&&(z.ns=H.ns),V.attribList.length=0,re(V,"onopentagstart",z)}function Se(V,H){var z=V.indexOf(":")<0?["",V]:V.split(":"),X=z[0],de=z[1];return H&&V==="xmlns"&&(X="xmlns",de=""),{prefix:X,local:de}}function be(V){if(V.strict||(V.attribName=V.attribName[V.looseCase]()),V.attribList.indexOf(V.attribName)!==-1||V.tag.attributes.hasOwnProperty(V.attribName))V.attribName=V.attribValue="";else{if(V.opt.xmlns){var H=Se(V.attribName,!0),z=H.prefix,X=H.local;if(z==="xmlns")if(X==="xml"&&V.attribValue!==u)ze(V,"xml: prefix must be bound to "+u+`
Actual: `+V.attribValue);else if(X==="xmlns"&&V.attribValue!==m)ze(V,"xmlns: prefix must be bound to "+m+`
Actual: `+V.attribValue);else{var de=V.tag,ge=V.tags[V.tags.length-1]||V;de.ns===ge.ns&&(de.ns=Object.create(ge.ns)),de.ns[X]=V.attribValue}V.attribList.push([V.attribName,V.attribValue])}else V.tag.attributes[V.attribName]=V.attribValue,re(V,"onattribute",{name:V.attribName,value:V.attribValue});V.attribName=V.attribValue=""}}function Y(V,H){if(V.opt.xmlns){var z=V.tag,X=Se(V.tagName);z.prefix=X.prefix,z.local=X.local,z.uri=z.ns[X.prefix]||"",z.prefix&&!z.uri&&(ze(V,"Unbound namespace prefix: "+JSON.stringify(V.tagName)),z.uri=X.prefix);var de=V.tags[V.tags.length-1]||V;z.ns&&de.ns!==z.ns&&Object.keys(z.ns).forEach(function(nt){re(V,"onopennamespace",{prefix:nt,uri:z.ns[nt]})});for(var ge=0,Ge=V.attribList.length;ge<Ge;ge++){var it=V.attribList[ge],Ye=it[0],Ke=it[1],dt=Se(Ye,!0),me=dt.prefix,ke=dt.local,Je=me===""?"":z.ns[me]||"",Xe={name:Ye,value:Ke,prefix:me,local:ke,uri:Je};me&&me!=="xmlns"&&!Je&&(ze(V,"Unbound namespace prefix: "+JSON.stringify(me)),Xe.uri=me),V.tag.attributes[Ye]=Xe,re(V,"onattribute",Xe)}V.attribList.length=0}V.tag.isSelfClosing=!!H,V.sawRoot=!0,V.tags.push(V.tag),re(V,"onopentag",V.tag),H||(V.noscript||V.tagName.toLowerCase()!=="script"?V.state=G.TEXT:V.state=G.SCRIPT,V.tag=null,V.tagName=""),V.attribName=V.attribValue="",V.attribList.length=0}function Q(V){if(!V.tagName)return ze(V,"Weird empty close tag."),V.textNode+="</>",void(V.state=G.TEXT);if(V.script){if(V.tagName!=="script")return V.script+="</"+V.tagName+">",V.tagName="",void(V.state=G.SCRIPT);re(V,"onscript",V.script),V.script=""}var H=V.tags.length,z=V.tagName;V.strict||(z=z[V.looseCase]());for(var X=z;H--&&V.tags[H].name!==X;)ze(V,"Unexpected close tag");if(H<0)return ze(V,"Unmatched closing tag: "+V.tagName),V.textNode+="</"+V.tagName+">",void(V.state=G.TEXT);V.tagName=z;for(var de=V.tags.length;de-- >H;){var ge=V.tag=V.tags.pop();V.tagName=V.tag.name,re(V,"onclosetag",V.tagName);var Ge={};for(var it in ge.ns)Ge[it]=ge.ns[it];var Ye=V.tags[V.tags.length-1]||V;V.opt.xmlns&&ge.ns!==Ye.ns&&Object.keys(ge.ns).forEach(function(Ke){var dt=ge.ns[Ke];re(V,"onclosenamespace",{prefix:Ke,uri:dt})})}H===0&&(V.closedRoot=!0),V.tagName=V.attribValue=V.attribName="",V.attribList.length=0,V.state=G.TEXT}function J(V){var H,z=V.entity,X=z.toLowerCase(),de="";return V.ENTITIES[z]?V.ENTITIES[z]:V.ENTITIES[X]?V.ENTITIES[X]:((z=X).charAt(0)==="#"&&(z.charAt(1)==="x"?(z=z.slice(2),de=(H=parseInt(z,16)).toString(16)):(z=z.slice(1),de=(H=parseInt(z,10)).toString(10))),z=z.replace(/^0+/,""),de.toLowerCase()!==z?(ze(V,"Invalid character entity"),"&"+V.entity+";"):String.fromCodePoint(H))}function fe(V,H){H==="<"?(V.state=G.OPEN_WAKA,V.startTagPosition=V.position):k(i,H)&&(ze(V,"Non-whitespace before first tag."),V.textNode=H,V.state=G.TEXT)}function Ce(V,H){var z="";return H<V.length&&(z=V.charAt(H)),z}G=E.STATE,String.fromCodePoint||(P=String.fromCharCode,j=Math.floor,U=function(){var V,H,z=[],X=-1,de=arguments.length;if(!de)return"";for(var ge="";++X<de;){var Ge=Number(arguments[X]);if(!isFinite(Ge)||Ge<0||Ge>1114111||j(Ge)!==Ge)throw RangeError("Invalid code point: "+Ge);Ge<=65535?z.push(Ge):(V=55296+((Ge-=65536)>>10),H=Ge%1024+56320,z.push(V,H)),(X+1===de||z.length>16384)&&(ge+=P.apply(null,z),z.length=0)}return ge},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:U,configurable:!0,writable:!0}):String.fromCodePoint=U)})(R)},182:(C,R,I)=>{C.exports=T;var E=I(1159).EventEmitter;function T(){E.call(this)}I(1765)(T,E),T.Readable=I(2846),T.Writable=I(8318),T.Duplex=I(6138),T.Transform=I(9798),T.PassThrough=I(5472),T.finished=I(8800),T.pipeline=I(7295),T.Stream=T,T.prototype.pipe=function(l,c){var h=this;function y(m){l.writable&&l.write(m)===!1&&h.pause&&h.pause()}function i(){h.readable&&h.resume&&h.resume()}h.on("data",y),l.on("drain",i),l._isStdio||c&&c.end===!1||(h.on("end",d),h.on("close",r));var g=!1;function d(){g||(g=!0,l.end())}function r(){g||(g=!0,typeof l.destroy=="function"&&l.destroy())}function t(m){if(u(),E.listenerCount(this,"error")===0)throw m}function u(){h.removeListener("data",y),l.removeListener("drain",i),h.removeListener("end",d),h.removeListener("close",r),h.removeListener("error",t),l.removeListener("error",t),h.removeListener("end",u),h.removeListener("close",u),l.removeListener("close",u)}return h.on("error",t),l.on("error",t),h.on("end",u),h.on("close",u),l.on("close",u),l.emit("pipe",h),l}},1765:C=>{typeof Object.create=="function"?C.exports=function(R,I){I&&(R.super_=I,R.prototype=Object.create(I.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}))}:C.exports=function(R,I){if(I){R.super_=I;var E=function(){};E.prototype=I.prototype,R.prototype=new E,R.prototype.constructor=R}}},3690:C=>{var R={};function I(T,l,c){c||(c=Error);var h=function(y){var i,g;function d(r,t,u){return y.call(this,function(m,S,A){return typeof l=="string"?l:l(m,S,A)}(r,t,u))||this}return g=y,(i=d).prototype=Object.create(g.prototype),i.prototype.constructor=i,i.__proto__=g,d}(c);h.prototype.name=c.name,h.prototype.code=T,R[T]=h}function E(T,l){if(Array.isArray(T)){var c=T.length;return T=T.map(function(h){return String(h)}),c>2?"one of ".concat(l," ").concat(T.slice(0,c-1).join(", "),", or ")+T[c-1]:c===2?"one of ".concat(l," ").concat(T[0]," or ").concat(T[1]):"of ".concat(l," ").concat(T[0])}return"of ".concat(l," ").concat(String(T))}I("ERR_INVALID_OPT_VALUE",function(T,l){return'The value "'+l+'" is invalid for option "'+T+'"'},TypeError),I("ERR_INVALID_ARG_TYPE",function(T,l,c){var h,y,i,g;if(typeof l=="string"&&l.substr(0,4)==="not "?(h="must not be",l=l.replace(/^not /,"")):h="must be",function(r,t,u){return(u===void 0||u>r.length)&&(u=r.length),r.substring(u-9,u)===" argument"}(T))y="The ".concat(T," ").concat(h," ").concat(E(l,"type"));else{var d=(typeof g!="number"&&(g=0),g+1>(i=T).length||i.indexOf(".",g)===-1?"argument":"property");y='The "'.concat(T,'" ').concat(d," ").concat(h," ").concat(E(l,"type"))}return y+". Received type ".concat(typeof c)},TypeError),I("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),I("ERR_METHOD_NOT_IMPLEMENTED",function(T){return"The "+T+" method is not implemented"}),I("ERR_STREAM_PREMATURE_CLOSE","Premature close"),I("ERR_STREAM_DESTROYED",function(T){return"Cannot call "+T+" after a stream was destroyed"}),I("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),I("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),I("ERR_STREAM_WRITE_AFTER_END","write after end"),I("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),I("ERR_UNKNOWN_ENCODING",function(T){return"Unknown encoding: "+T},TypeError),I("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),C.exports.q=R},6138:(C,R,I)=>{var E=Object.keys||function(r){var t=[];for(var u in r)t.push(u);return t};C.exports=i;var T=I(2846),l=I(8318);I(1765)(i,T);for(var c=E(l.prototype),h=0;h<c.length;h++){var y=c[h];i.prototype[y]||(i.prototype[y]=l.prototype[y])}function i(r){if(!(this instanceof i))return new i(r);T.call(this,r),l.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",g)))}function g(){this._writableState.ended||process.nextTick(d,this)}function d(r){r.end()}Object.defineProperty(i.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(i.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(i.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(i.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(r){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=r,this._writableState.destroyed=r)}})},5472:(C,R,I)=>{C.exports=T;var E=I(9798);function T(l){if(!(this instanceof T))return new T(l);E.call(this,l)}I(1765)(T,E),T.prototype._transform=function(l,c,h){h(null,l)}},2846:(C,R,I)=>{var E;C.exports=P,P.ReadableState=k,I(1159).EventEmitter;var T,l=function(J,fe){return J.listeners(fe).length},c=I(9299),h=I(1549).Buffer,y=I.g.Uint8Array||function(){},i=I(964);T=i&&i.debuglog?i.debuglog("stream"):function(){};var g,d,r,t=I(8393),u=I(6163),m=I(7269).getHighWaterMark,S=I(3690).q,A=S.ERR_INVALID_ARG_TYPE,_=S.ERR_STREAM_PUSH_AFTER_EOF,v=S.ERR_METHOD_NOT_IMPLEMENTED,f=S.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;I(1765)(P,c);var b=u.errorOrDestroy,p=["error","close","destroy","pause","resume"];function k(J,fe,Ce){E=E||I(6138),J=J||{},typeof Ce!="boolean"&&(Ce=fe instanceof E),this.objectMode=!!J.objectMode,Ce&&(this.objectMode=this.objectMode||!!J.readableObjectMode),this.highWaterMark=m(this,J,"readableHighWaterMark",Ce),this.buffer=new t,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=J.emitClose!==!1,this.autoDestroy=!!J.autoDestroy,this.destroyed=!1,this.defaultEncoding=J.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,J.encoding&&(g||(g=I(7503).s),this.decoder=new g(J.encoding),this.encoding=J.encoding)}function P(J){if(E=E||I(6138),!(this instanceof P))return new P(J);var fe=this instanceof E;this._readableState=new k(J,this,fe),this.readable=!0,J&&(typeof J.read=="function"&&(this._read=J.read),typeof J.destroy=="function"&&(this._destroy=J.destroy)),c.call(this)}function j(J,fe,Ce,V,H){T("readableAddChunk",fe);var z,X=J._readableState;if(fe===null)X.reading=!1,function(de,ge){if(T("onEofChunk"),!ge.ended){if(ge.decoder){var Ge=ge.decoder.end();Ge&&Ge.length&&(ge.buffer.push(Ge),ge.length+=ge.objectMode?1:Ge.length)}ge.ended=!0,ge.sync?ne(de):(ge.needReadable=!1,ge.emittedReadable||(ge.emittedReadable=!0,re(de)))}}(J,X);else if(H||(z=function(de,ge){var Ge,it;return it=ge,h.isBuffer(it)||it instanceof y||typeof ge=="string"||ge===void 0||de.objectMode||(Ge=new A("chunk",["string","Buffer","Uint8Array"],ge)),Ge}(X,fe)),z)b(J,z);else if(X.objectMode||fe&&fe.length>0)if(typeof fe=="string"||X.objectMode||Object.getPrototypeOf(fe)===h.prototype||(fe=function(de){return h.from(de)}(fe)),V)X.endEmitted?b(J,new f):U(J,X,fe,!0);else if(X.ended)b(J,new _);else{if(X.destroyed)return!1;X.reading=!1,X.decoder&&!Ce?(fe=X.decoder.write(fe),X.objectMode||fe.length!==0?U(J,X,fe,!1):oe(J,X)):U(J,X,fe,!1)}else V||(X.reading=!1,oe(J,X));return!X.ended&&(X.length<X.highWaterMark||X.length===0)}function U(J,fe,Ce,V){fe.flowing&&fe.length===0&&!fe.sync?(fe.awaitDrain=0,J.emit("data",Ce)):(fe.length+=fe.objectMode?1:Ce.length,V?fe.buffer.unshift(Ce):fe.buffer.push(Ce),fe.needReadable&&ne(J)),oe(J,fe)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(J){this._readableState&&(this._readableState.destroyed=J)}}),P.prototype.destroy=u.destroy,P.prototype._undestroy=u.undestroy,P.prototype._destroy=function(J,fe){fe(J)},P.prototype.push=function(J,fe){var Ce,V=this._readableState;return V.objectMode?Ce=!0:typeof J=="string"&&((fe=fe||V.defaultEncoding)!==V.encoding&&(J=h.from(J,fe),fe=""),Ce=!0),j(this,J,fe,!1,Ce)},P.prototype.unshift=function(J){return j(this,J,null,!0,!1)},P.prototype.isPaused=function(){return this._readableState.flowing===!1},P.prototype.setEncoding=function(J){g||(g=I(7503).s);var fe=new g(J);this._readableState.decoder=fe,this._readableState.encoding=this._readableState.decoder.encoding;for(var Ce=this._readableState.buffer.head,V="";Ce!==null;)V+=fe.write(Ce.data),Ce=Ce.next;return this._readableState.buffer.clear(),V!==""&&this._readableState.buffer.push(V),this._readableState.length=V.length,this};var G=1073741824;function ee(J,fe){return J<=0||fe.length===0&&fe.ended?0:fe.objectMode?1:J!=J?fe.flowing&&fe.length?fe.buffer.head.data.length:fe.length:(J>fe.highWaterMark&&(fe.highWaterMark=function(Ce){return Ce>=G?Ce=G:(Ce--,Ce|=Ce>>>1,Ce|=Ce>>>2,Ce|=Ce>>>4,Ce|=Ce>>>8,Ce|=Ce>>>16,Ce++),Ce}(J)),J<=fe.length?J:fe.ended?fe.length:(fe.needReadable=!0,0))}function ne(J){var fe=J._readableState;T("emitReadable",fe.needReadable,fe.emittedReadable),fe.needReadable=!1,fe.emittedReadable||(T("emitReadable",fe.flowing),fe.emittedReadable=!0,process.nextTick(re,J))}function re(J){var fe=J._readableState;T("emitReadable_",fe.destroyed,fe.length,fe.ended),fe.destroyed||!fe.length&&!fe.ended||(J.emit("readable"),fe.emittedReadable=!1),fe.needReadable=!fe.flowing&&!fe.ended&&fe.length<=fe.highWaterMark,le(J)}function oe(J,fe){fe.readingMore||(fe.readingMore=!0,process.nextTick(W,J,fe))}function W(J,fe){for(;!fe.reading&&!fe.ended&&(fe.length<fe.highWaterMark||fe.flowing&&fe.length===0);){var Ce=fe.length;if(T("maybeReadMore read 0"),J.read(0),Ce===fe.length)break}fe.readingMore=!1}function Te(J){var fe=J._readableState;fe.readableListening=J.listenerCount("readable")>0,fe.resumeScheduled&&!fe.paused?fe.flowing=!0:J.listenerCount("data")>0&&J.resume()}function Ue(J){T("readable nexttick read 0"),J.read(0)}function ze(J,fe){T("resume",fe.reading),fe.reading||J.read(0),fe.resumeScheduled=!1,J.emit("resume"),le(J),fe.flowing&&!fe.reading&&J.read(0)}function le(J){var fe=J._readableState;for(T("flow",fe.flowing);fe.flowing&&J.read()!==null;);}function Se(J,fe){return fe.length===0?null:(fe.objectMode?Ce=fe.buffer.shift():!J||J>=fe.length?(Ce=fe.decoder?fe.buffer.join(""):fe.buffer.length===1?fe.buffer.first():fe.buffer.concat(fe.length),fe.buffer.clear()):Ce=fe.buffer.consume(J,fe.decoder),Ce);var Ce}function be(J){var fe=J._readableState;T("endReadable",fe.endEmitted),fe.endEmitted||(fe.ended=!0,process.nextTick(Y,fe,J))}function Y(J,fe){if(T("endReadableNT",J.endEmitted,J.length),!J.endEmitted&&J.length===0&&(J.endEmitted=!0,fe.readable=!1,fe.emit("end"),J.autoDestroy)){var Ce=fe._writableState;(!Ce||Ce.autoDestroy&&Ce.finished)&&fe.destroy()}}function Q(J,fe){for(var Ce=0,V=J.length;Ce<V;Ce++)if(J[Ce]===fe)return Ce;return-1}P.prototype.read=function(J){T("read",J),J=parseInt(J,10);var fe=this._readableState,Ce=J;if(J!==0&&(fe.emittedReadable=!1),J===0&&fe.needReadable&&((fe.highWaterMark!==0?fe.length>=fe.highWaterMark:fe.length>0)||fe.ended))return T("read: emitReadable",fe.length,fe.ended),fe.length===0&&fe.ended?be(this):ne(this),null;if((J=ee(J,fe))===0&&fe.ended)return fe.length===0&&be(this),null;var V,H=fe.needReadable;return T("need readable",H),(fe.length===0||fe.length-J<fe.highWaterMark)&&T("length less than watermark",H=!0),fe.ended||fe.reading?T("reading or ended",H=!1):H&&(T("do read"),fe.reading=!0,fe.sync=!0,fe.length===0&&(fe.needReadable=!0),this._read(fe.highWaterMark),fe.sync=!1,fe.reading||(J=ee(Ce,fe))),(V=J>0?Se(J,fe):null)===null?(fe.needReadable=fe.length<=fe.highWaterMark,J=0):(fe.length-=J,fe.awaitDrain=0),fe.length===0&&(fe.ended||(fe.needReadable=!0),Ce!==J&&fe.ended&&be(this)),V!==null&&this.emit("data",V),V},P.prototype._read=function(J){b(this,new v("_read()"))},P.prototype.pipe=function(J,fe){var Ce=this,V=this._readableState;switch(V.pipesCount){case 0:V.pipes=J;break;case 1:V.pipes=[V.pipes,J];break;default:V.pipes.push(J)}V.pipesCount+=1,T("pipe count=%d opts=%j",V.pipesCount,fe);var H=fe&&fe.end===!1||J===process.stdout||J===process.stderr?Ke:z;function z(){T("onend"),J.end()}V.endEmitted?process.nextTick(H):Ce.once("end",H),J.on("unpipe",function dt(me,ke){T("onunpipe"),me===Ce&&ke&&ke.hasUnpiped===!1&&(ke.hasUnpiped=!0,T("cleanup"),J.removeListener("close",it),J.removeListener("finish",Ye),J.removeListener("drain",X),J.removeListener("error",Ge),J.removeListener("unpipe",dt),Ce.removeListener("end",z),Ce.removeListener("end",Ke),Ce.removeListener("data",ge),de=!0,!V.awaitDrain||J._writableState&&!J._writableState.needDrain||X())});var X=function(dt){return function(){var me=dt._readableState;T("pipeOnDrain",me.awaitDrain),me.awaitDrain&&me.awaitDrain--,me.awaitDrain===0&&l(dt,"data")&&(me.flowing=!0,le(dt))}}(Ce);J.on("drain",X);var de=!1;function ge(dt){T("ondata");var me=J.write(dt);T("dest.write",me),me===!1&&((V.pipesCount===1&&V.pipes===J||V.pipesCount>1&&Q(V.pipes,J)!==-1)&&!de&&(T("false write response, pause",V.awaitDrain),V.awaitDrain++),Ce.pause())}function Ge(dt){T("onerror",dt),Ke(),J.removeListener("error",Ge),l(J,"error")===0&&b(J,dt)}function it(){J.removeListener("finish",Ye),Ke()}function Ye(){T("onfinish"),J.removeListener("close",it),Ke()}function Ke(){T("unpipe"),Ce.unpipe(J)}return Ce.on("data",ge),function(dt,me,ke){if(typeof dt.prependListener=="function")return dt.prependListener(me,ke);dt._events&&dt._events[me]?Array.isArray(dt._events[me])?dt._events[me].unshift(ke):dt._events[me]=[ke,dt._events[me]]:dt.on(me,ke)}(J,"error",Ge),J.once("close",it),J.once("finish",Ye),J.emit("pipe",Ce),V.flowing||(T("pipe resume"),Ce.resume()),J},P.prototype.unpipe=function(J){var fe=this._readableState,Ce={hasUnpiped:!1};if(fe.pipesCount===0)return this;if(fe.pipesCount===1)return J&&J!==fe.pipes||(J||(J=fe.pipes),fe.pipes=null,fe.pipesCount=0,fe.flowing=!1,J&&J.emit("unpipe",this,Ce)),this;if(!J){var V=fe.pipes,H=fe.pipesCount;fe.pipes=null,fe.pipesCount=0,fe.flowing=!1;for(var z=0;z<H;z++)V[z].emit("unpipe",this,{hasUnpiped:!1});return this}var X=Q(fe.pipes,J);return X===-1||(fe.pipes.splice(X,1),fe.pipesCount-=1,fe.pipesCount===1&&(fe.pipes=fe.pipes[0]),J.emit("unpipe",this,Ce)),this},P.prototype.on=function(J,fe){var Ce=c.prototype.on.call(this,J,fe),V=this._readableState;return J==="data"?(V.readableListening=this.listenerCount("readable")>0,V.flowing!==!1&&this.resume()):J==="readable"&&(V.endEmitted||V.readableListening||(V.readableListening=V.needReadable=!0,V.flowing=!1,V.emittedReadable=!1,T("on readable",V.length,V.reading),V.length?ne(this):V.reading||process.nextTick(Ue,this))),Ce},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(J,fe){var Ce=c.prototype.removeListener.call(this,J,fe);return J==="readable"&&process.nextTick(Te,this),Ce},P.prototype.removeAllListeners=function(J){var fe=c.prototype.removeAllListeners.apply(this,arguments);return J!=="readable"&&J!==void 0||process.nextTick(Te,this),fe},P.prototype.resume=function(){var J=this._readableState;return J.flowing||(T("resume"),J.flowing=!J.readableListening,function(fe,Ce){Ce.resumeScheduled||(Ce.resumeScheduled=!0,process.nextTick(ze,fe,Ce))}(this,J)),J.paused=!1,this},P.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},P.prototype.wrap=function(J){var fe=this,Ce=this._readableState,V=!1;for(var H in J.on("end",function(){if(T("wrapped end"),Ce.decoder&&!Ce.ended){var X=Ce.decoder.end();X&&X.length&&fe.push(X)}fe.push(null)}),J.on("data",function(X){T("wrapped data"),Ce.decoder&&(X=Ce.decoder.write(X)),Ce.objectMode&&X==null||(Ce.objectMode||X&&X.length)&&(fe.push(X)||(V=!0,J.pause()))}),J)this[H]===void 0&&typeof J[H]=="function"&&(this[H]=function(X){return function(){return J[X].apply(J,arguments)}}(H));for(var z=0;z<p.length;z++)J.on(p[z],this.emit.bind(this,p[z]));return this._read=function(X){T("wrapped _read",X),V&&(V=!1,J.resume())},this},typeof Symbol=="function"&&(P.prototype[Symbol.asyncIterator]=function(){return d===void 0&&(d=I(7299)),d(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(J){this._readableState&&(this._readableState.flowing=J)}}),P._fromList=Se,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(P.from=function(J,fe){return r===void 0&&(r=I(6233)),r(P,J,fe)})},9798:(C,R,I)=>{C.exports=g;var E=I(3690).q,T=E.ERR_METHOD_NOT_IMPLEMENTED,l=E.ERR_MULTIPLE_CALLBACK,c=E.ERR_TRANSFORM_ALREADY_TRANSFORMING,h=E.ERR_TRANSFORM_WITH_LENGTH_0,y=I(6138);function i(t,u){var m=this._transformState;m.transforming=!1;var S=m.writecb;if(S===null)return this.emit("error",new l);m.writechunk=null,m.writecb=null,u!=null&&this.push(u),S(t);var A=this._readableState;A.reading=!1,(A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}function g(t){if(!(this instanceof g))return new g(t);y.call(this,t),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",d)}function d(){var t=this;typeof this._flush!="function"||this._readableState.destroyed?r(this,null,null):this._flush(function(u,m){r(t,u,m)})}function r(t,u,m){if(u)return t.emit("error",u);if(m!=null&&t.push(m),t._writableState.length)throw new h;if(t._transformState.transforming)throw new c;return t.push(null)}I(1765)(g,y),g.prototype.push=function(t,u){return this._transformState.needTransform=!1,y.prototype.push.call(this,t,u)},g.prototype._transform=function(t,u,m){m(new T("_transform()"))},g.prototype._write=function(t,u,m){var S=this._transformState;if(S.writecb=m,S.writechunk=t,S.writeencoding=u,!S.transforming){var A=this._readableState;(S.needTransform||A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}},g.prototype._read=function(t){var u=this._transformState;u.writechunk===null||u.transforming?u.needTransform=!0:(u.transforming=!0,this._transform(u.writechunk,u.writeencoding,u.afterTransform))},g.prototype._destroy=function(t,u){y.prototype._destroy.call(this,t,function(m){u(m)})}},8318:(C,R,I)=>{function E(oe){var W=this;this.next=null,this.entry=null,this.finish=function(){(function(Te,Ue,ze){var le=Te.entry;for(Te.entry=null;le;){var Se=le.callback;Ue.pendingcb--,Se(void 0),le=le.next}Ue.corkedRequestsFree.next=Te})(W,oe)}}var T;C.exports=P,P.WritableState=k;var l,c={deprecate:I(7839)},h=I(9299),y=I(1549).Buffer,i=I.g.Uint8Array||function(){},g=I(6163),d=I(7269).getHighWaterMark,r=I(3690).q,t=r.ERR_INVALID_ARG_TYPE,u=r.ERR_METHOD_NOT_IMPLEMENTED,m=r.ERR_MULTIPLE_CALLBACK,S=r.ERR_STREAM_CANNOT_PIPE,A=r.ERR_STREAM_DESTROYED,_=r.ERR_STREAM_NULL_VALUES,v=r.ERR_STREAM_WRITE_AFTER_END,f=r.ERR_UNKNOWN_ENCODING,b=g.errorOrDestroy;function p(){}function k(oe,W,Te){T=T||I(6138),oe=oe||{},typeof Te!="boolean"&&(Te=W instanceof T),this.objectMode=!!oe.objectMode,Te&&(this.objectMode=this.objectMode||!!oe.writableObjectMode),this.highWaterMark=d(this,oe,"writableHighWaterMark",Te),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ue=oe.decodeStrings===!1;this.decodeStrings=!Ue,this.defaultEncoding=oe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ze){(function(le,Se){var be=le._writableState,Y=be.sync,Q=be.writecb;if(typeof Q!="function")throw new m;if(function(fe){fe.writing=!1,fe.writecb=null,fe.length-=fe.writelen,fe.writelen=0}(be),Se)(function(fe,Ce,V,H,z){--Ce.pendingcb,V?(process.nextTick(z,H),process.nextTick(re,fe,Ce),fe._writableState.errorEmitted=!0,b(fe,H)):(z(H),fe._writableState.errorEmitted=!0,b(fe,H),re(fe,Ce))})(le,be,Y,Se,Q);else{var J=ee(be)||le.destroyed;J||be.corked||be.bufferProcessing||!be.bufferedRequest||G(le,be),Y?process.nextTick(U,le,be,J,Q):U(le,be,J,Q)}})(W,ze)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=oe.emitClose!==!1,this.autoDestroy=!!oe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this)}function P(oe){var W=this instanceof(T=T||I(6138));if(!W&&!l.call(P,this))return new P(oe);this._writableState=new k(oe,this,W),this.writable=!0,oe&&(typeof oe.write=="function"&&(this._write=oe.write),typeof oe.writev=="function"&&(this._writev=oe.writev),typeof oe.destroy=="function"&&(this._destroy=oe.destroy),typeof oe.final=="function"&&(this._final=oe.final)),h.call(this)}function j(oe,W,Te,Ue,ze,le,Se){W.writelen=Ue,W.writecb=Se,W.writing=!0,W.sync=!0,W.destroyed?W.onwrite(new A("write")):Te?oe._writev(ze,W.onwrite):oe._write(ze,le,W.onwrite),W.sync=!1}function U(oe,W,Te,Ue){Te||function(ze,le){le.length===0&&le.needDrain&&(le.needDrain=!1,ze.emit("drain"))}(oe,W),W.pendingcb--,Ue(),re(oe,W)}function G(oe,W){W.bufferProcessing=!0;var Te=W.bufferedRequest;if(oe._writev&&Te&&Te.next){var Ue=W.bufferedRequestCount,ze=new Array(Ue),le=W.corkedRequestsFree;le.entry=Te;for(var Se=0,be=!0;Te;)ze[Se]=Te,Te.isBuf||(be=!1),Te=Te.next,Se+=1;ze.allBuffers=be,j(oe,W,!0,W.length,ze,"",le.finish),W.pendingcb++,W.lastBufferedRequest=null,le.next?(W.corkedRequestsFree=le.next,le.next=null):W.corkedRequestsFree=new E(W),W.bufferedRequestCount=0}else{for(;Te;){var Y=Te.chunk,Q=Te.encoding,J=Te.callback;if(j(oe,W,!1,W.objectMode?1:Y.length,Y,Q,J),Te=Te.next,W.bufferedRequestCount--,W.writing)break}Te===null&&(W.lastBufferedRequest=null)}W.bufferedRequest=Te,W.bufferProcessing=!1}function ee(oe){return oe.ending&&oe.length===0&&oe.bufferedRequest===null&&!oe.finished&&!oe.writing}function ne(oe,W){oe._final(function(Te){W.pendingcb--,Te&&b(oe,Te),W.prefinished=!0,oe.emit("prefinish"),re(oe,W)})}function re(oe,W){var Te=ee(W);if(Te&&(function(ze,le){le.prefinished||le.finalCalled||(typeof ze._final!="function"||le.destroyed?(le.prefinished=!0,ze.emit("prefinish")):(le.pendingcb++,le.finalCalled=!0,process.nextTick(ne,ze,le)))}(oe,W),W.pendingcb===0&&(W.finished=!0,oe.emit("finish"),W.autoDestroy))){var Ue=oe._readableState;(!Ue||Ue.autoDestroy&&Ue.endEmitted)&&oe.destroy()}return Te}I(1765)(P,h),k.prototype.getBuffer=function(){for(var oe=this.bufferedRequest,W=[];oe;)W.push(oe),oe=oe.next;return W},function(){try{Object.defineProperty(k.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(oe){return!!l.call(this,oe)||this===P&&oe&&oe._writableState instanceof k}})):l=function(oe){return oe instanceof this},P.prototype.pipe=function(){b(this,new S)},P.prototype.write=function(oe,W,Te){var Ue,ze=this._writableState,le=!1,Se=!ze.objectMode&&(Ue=oe,y.isBuffer(Ue)||Ue instanceof i);return Se&&!y.isBuffer(oe)&&(oe=function(be){return y.from(be)}(oe)),typeof W=="function"&&(Te=W,W=null),Se?W="buffer":W||(W=ze.defaultEncoding),typeof Te!="function"&&(Te=p),ze.ending?function(be,Y){var Q=new v;b(be,Q),process.nextTick(Y,Q)}(this,Te):(Se||function(be,Y,Q,J){var fe;return Q===null?fe=new _:typeof Q=="string"||Y.objectMode||(fe=new t("chunk",["string","Buffer"],Q)),!fe||(b(be,fe),process.nextTick(J,fe),!1)}(this,ze,oe,Te))&&(ze.pendingcb++,le=function(be,Y,Q,J,fe,Ce){if(!Q){var V=function(de,ge,Ge){return de.objectMode||de.decodeStrings===!1||typeof ge!="string"||(ge=y.from(ge,Ge)),ge}(Y,J,fe);J!==V&&(Q=!0,fe="buffer",J=V)}var H=Y.objectMode?1:J.length;Y.length+=H;var z=Y.length<Y.highWaterMark;if(z||(Y.needDrain=!0),Y.writing||Y.corked){var X=Y.lastBufferedRequest;Y.lastBufferedRequest={chunk:J,encoding:fe,isBuf:Q,callback:Ce,next:null},X?X.next=Y.lastBufferedRequest:Y.bufferedRequest=Y.lastBufferedRequest,Y.bufferedRequestCount+=1}else j(be,Y,!1,H,J,fe,Ce);return z}(this,ze,Se,oe,W,Te)),le},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var oe=this._writableState;oe.corked&&(oe.corked--,oe.writing||oe.corked||oe.bufferProcessing||!oe.bufferedRequest||G(this,oe))},P.prototype.setDefaultEncoding=function(oe){if(typeof oe=="string"&&(oe=oe.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((oe+"").toLowerCase())>-1))throw new f(oe);return this._writableState.defaultEncoding=oe,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),P.prototype._write=function(oe,W,Te){Te(new u("_write()"))},P.prototype._writev=null,P.prototype.end=function(oe,W,Te){var Ue=this._writableState;return typeof oe=="function"?(Te=oe,oe=null,W=null):typeof W=="function"&&(Te=W,W=null),oe!=null&&this.write(oe,W),Ue.corked&&(Ue.corked=1,this.uncork()),Ue.ending||function(ze,le,Se){le.ending=!0,re(ze,le),Se&&(le.finished?process.nextTick(Se):ze.once("finish",Se)),le.ended=!0,ze.writable=!1}(this,Ue,Te),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(oe){this._writableState&&(this._writableState.destroyed=oe)}}),P.prototype.destroy=g.destroy,P.prototype._undestroy=g.undestroy,P.prototype._destroy=function(oe,W){W(oe)}},7299:(C,R,I)=>{var E;function T(_,v,f){return v in _?Object.defineProperty(_,v,{value:f,enumerable:!0,configurable:!0,writable:!0}):_[v]=f,_}var l=I(8800),c=Symbol("lastResolve"),h=Symbol("lastReject"),y=Symbol("error"),i=Symbol("ended"),g=Symbol("lastPromise"),d=Symbol("handlePromise"),r=Symbol("stream");function t(_,v){return{value:_,done:v}}function u(_){var v=_[c];if(v!==null){var f=_[r].read();f!==null&&(_[g]=null,_[c]=null,_[h]=null,v(t(f,!1)))}}function m(_){process.nextTick(u,_)}var S=Object.getPrototypeOf(function(){}),A=Object.setPrototypeOf((T(E={get stream(){return this[r]},next:function(){var _=this,v=this[y];if(v!==null)return Promise.reject(v);if(this[i])return Promise.resolve(t(void 0,!0));if(this[r].destroyed)return new Promise(function(k,P){process.nextTick(function(){_[y]?P(_[y]):k(t(void 0,!0))})});var f,b=this[g];if(b)f=new Promise(function(k,P){return function(j,U){k.then(function(){P[i]?j(t(void 0,!0)):P[d](j,U)},U)}}(b,this));else{var p=this[r].read();if(p!==null)return Promise.resolve(t(p,!1));f=new Promise(this[d])}return this[g]=f,f}},Symbol.asyncIterator,function(){return this}),T(E,"return",function(){var _=this;return new Promise(function(v,f){_[r].destroy(null,function(b){b?f(b):v(t(void 0,!0))})})}),E),S);C.exports=function(_){var v,f=Object.create(A,(T(v={},r,{value:_,writable:!0}),T(v,c,{value:null,writable:!0}),T(v,h,{value:null,writable:!0}),T(v,y,{value:null,writable:!0}),T(v,i,{value:_._readableState.endEmitted,writable:!0}),T(v,d,{value:function(b,p){var k=f[r].read();k?(f[g]=null,f[c]=null,f[h]=null,b(t(k,!1))):(f[c]=b,f[h]=p)},writable:!0}),v));return f[g]=null,l(_,function(b){if(b&&b.code!=="ERR_STREAM_PREMATURE_CLOSE"){var p=f[h];return p!==null&&(f[g]=null,f[c]=null,f[h]=null,p(b)),void(f[y]=b)}var k=f[c];k!==null&&(f[g]=null,f[c]=null,f[h]=null,k(t(void 0,!0))),f[i]=!0}),_.on("readable",m.bind(null,f)),f}},8393:(C,R,I)=>{function E(y,i){var g=Object.keys(y);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(y);i&&(d=d.filter(function(r){return Object.getOwnPropertyDescriptor(y,r).enumerable})),g.push.apply(g,d)}return g}function T(y,i,g){return i in y?Object.defineProperty(y,i,{value:g,enumerable:!0,configurable:!0,writable:!0}):y[i]=g,y}var l=I(1549).Buffer,c=I(9862).inspect,h=c&&c.custom||"inspect";C.exports=function(){function y(){(function(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")})(this,y),this.head=null,this.tail=null,this.length=0}var i;return i=[{key:"push",value:function(g){var d={data:g,next:null};this.length>0?this.tail.next=d:this.head=d,this.tail=d,++this.length}},{key:"unshift",value:function(g){var d={data:g,next:this.head};this.length===0&&(this.tail=d),this.head=d,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var d=this.head,r=""+d.data;d=d.next;)r+=g+d.data;return r}},{key:"concat",value:function(g){if(this.length===0)return l.alloc(0);for(var d,r,t,u=l.allocUnsafe(g>>>0),m=this.head,S=0;m;)d=m.data,r=u,t=S,l.prototype.copy.call(d,r,t),S+=m.data.length,m=m.next;return u}},{key:"consume",value:function(g,d){var r;return g<this.head.data.length?(r=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):r=g===this.head.data.length?this.shift():d?this._getString(g):this._getBuffer(g),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var d=this.head,r=1,t=d.data;for(g-=t.length;d=d.next;){var u=d.data,m=g>u.length?u.length:g;if(m===u.length?t+=u:t+=u.slice(0,g),(g-=m)==0){m===u.length?(++r,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=u.slice(m));break}++r}return this.length-=r,t}},{key:"_getBuffer",value:function(g){var d=l.allocUnsafe(g),r=this.head,t=1;for(r.data.copy(d),g-=r.data.length;r=r.next;){var u=r.data,m=g>u.length?u.length:g;if(u.copy(d,d.length-g,0,m),(g-=m)==0){m===u.length?(++t,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=u.slice(m));break}++t}return this.length-=t,d}},{key:h,value:function(g,d){return c(this,function(r){for(var t=1;t<arguments.length;t++){var u=arguments[t]!=null?arguments[t]:{};t%2?E(Object(u),!0).forEach(function(m){T(r,m,u[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):E(Object(u)).forEach(function(m){Object.defineProperty(r,m,Object.getOwnPropertyDescriptor(u,m))})}return r}({},d,{depth:0,customInspect:!1}))}}],i&&function(g,d){for(var r=0;r<d.length;r++){var t=d[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,t.key,t)}}(y.prototype,i),y}()},6163:C=>{function R(T,l){E(T,l),I(T)}function I(T){T._writableState&&!T._writableState.emitClose||T._readableState&&!T._readableState.emitClose||T.emit("close")}function E(T,l){T.emit("error",l)}C.exports={destroy:function(T,l){var c=this,h=this._readableState&&this._readableState.destroyed,y=this._writableState&&this._writableState.destroyed;return h||y?(l?l(T):T&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(E,this,T)):process.nextTick(E,this,T)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(T||null,function(i){!l&&i?c._writableState?c._writableState.errorEmitted?process.nextTick(I,c):(c._writableState.errorEmitted=!0,process.nextTick(R,c,i)):process.nextTick(R,c,i):l?(process.nextTick(I,c),l(i)):process.nextTick(I,c)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(T,l){var c=T._readableState,h=T._writableState;c&&c.autoDestroy||h&&h.autoDestroy?T.destroy(l):T.emit("error",l)}}},8800:(C,R,I)=>{var E=I(3690).q.ERR_STREAM_PREMATURE_CLOSE;function T(){}C.exports=function l(c,h,y){if(typeof h=="function")return l(c,null,h);h||(h={}),y=function(v){var f=!1;return function(){if(!f){f=!0;for(var b=arguments.length,p=new Array(b),k=0;k<b;k++)p[k]=arguments[k];v.apply(this,p)}}}(y||T);var i=h.readable||h.readable!==!1&&c.readable,g=h.writable||h.writable!==!1&&c.writable,d=function(){c.writable||t()},r=c._writableState&&c._writableState.finished,t=function(){g=!1,r=!0,i||y.call(c)},u=c._readableState&&c._readableState.endEmitted,m=function(){i=!1,u=!0,g||y.call(c)},S=function(v){y.call(c,v)},A=function(){var v;return i&&!u?(c._readableState&&c._readableState.ended||(v=new E),y.call(c,v)):g&&!r?(c._writableState&&c._writableState.ended||(v=new E),y.call(c,v)):void 0},_=function(){c.req.on("finish",t)};return function(v){return v.setHeader&&typeof v.abort=="function"}(c)?(c.on("complete",t),c.on("abort",A),c.req?_():c.on("request",_)):g&&!c._writableState&&(c.on("end",d),c.on("close",d)),c.on("end",m),c.on("finish",t),h.error!==!1&&c.on("error",S),c.on("close",A),function(){c.removeListener("complete",t),c.removeListener("abort",A),c.removeListener("request",_),c.req&&c.req.removeListener("finish",t),c.removeListener("end",d),c.removeListener("close",d),c.removeListener("finish",t),c.removeListener("end",m),c.removeListener("error",S),c.removeListener("close",A)}}},6233:C=>{C.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:(C,R,I)=>{var E,T=I(3690).q,l=T.ERR_MISSING_ARGS,c=T.ERR_STREAM_DESTROYED;function h(d){if(d)throw d}function y(d,r,t,u){u=function(A){var _=!1;return function(){_||(_=!0,A.apply(void 0,arguments))}}(u);var m=!1;d.on("close",function(){m=!0}),E===void 0&&(E=I(8800)),E(d,{readable:r,writable:t},function(A){if(A)return u(A);m=!0,u()});var S=!1;return function(A){if(!m&&!S)return S=!0,function(_){return _.setHeader&&typeof _.abort=="function"}(d)?d.abort():typeof d.destroy=="function"?d.destroy():void u(A||new c("pipe"))}}function i(d){d()}function g(d,r){return d.pipe(r)}C.exports=function(){for(var d=arguments.length,r=new Array(d),t=0;t<d;t++)r[t]=arguments[t];var u,m=function(A){return A.length?typeof A[A.length-1]!="function"?h:A.pop():h}(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new l("streams");var S=r.map(function(A,_){var v=_<r.length-1;return y(A,v,_>0,function(f){u||(u=f),f&&S.forEach(i),v||(S.forEach(i),m(u))})});return r.reduce(g)}},7269:(C,R,I)=>{var E=I(3690).q.ERR_INVALID_OPT_VALUE;C.exports={getHighWaterMark:function(T,l,c,h){var y=function(i,g,d){return i.highWaterMark!=null?i.highWaterMark:g?i[d]:null}(l,h,c);if(y!=null){if(!isFinite(y)||Math.floor(y)!==y||y<0)throw new E(h?c:"highWaterMark",y);return Math.floor(y)}return T.objectMode?16:16384}}},9299:(C,R,I)=>{C.exports=I(1159).EventEmitter},7503:(C,R,I)=>{var E=I(8387).Buffer,T=E.isEncoding||function(u){switch((u=""+u)&&u.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(u){var m;switch(this.encoding=function(S){var A=function(_){if(!_)return"utf8";for(var v;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(v)return;_=(""+_).toLowerCase(),v=!0}}(S);if(typeof A!="string"&&(E.isEncoding===T||!T(S)))throw new Error("Unknown encoding: "+S);return A||S}(u),this.encoding){case"utf16le":this.text=y,this.end=i,m=4;break;case"utf8":this.fillLast=h,m=4;break;case"base64":this.text=g,this.end=d,m=3;break;default:return this.write=r,void(this.end=t)}this.lastNeed=0,this.lastTotal=0,this.lastChar=E.allocUnsafe(m)}function c(u){return u<=127?0:u>>5==6?2:u>>4==14?3:u>>3==30?4:u>>6==2?-1:-2}function h(u){var m=this.lastTotal-this.lastNeed,S=function(A,_,v){if((192&_[0])!=128)return A.lastNeed=0,"";if(A.lastNeed>1&&_.length>1){if((192&_[1])!=128)return A.lastNeed=1,"";if(A.lastNeed>2&&_.length>2&&(192&_[2])!=128)return A.lastNeed=2,""}}(this,u);return S!==void 0?S:this.lastNeed<=u.length?(u.copy(this.lastChar,m,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(u.copy(this.lastChar,m,0,u.length),void(this.lastNeed-=u.length))}function y(u,m){if((u.length-m)%2==0){var S=u.toString("utf16le",m);if(S){var A=S.charCodeAt(S.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1],S.slice(0,-1)}return S}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=u[u.length-1],u.toString("utf16le",m,u.length-1)}function i(u){var m=u&&u.length?this.write(u):"";if(this.lastNeed){var S=this.lastTotal-this.lastNeed;return m+this.lastChar.toString("utf16le",0,S)}return m}function g(u,m){var S=(u.length-m)%3;return S===0?u.toString("base64",m):(this.lastNeed=3-S,this.lastTotal=3,S===1?this.lastChar[0]=u[u.length-1]:(this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1]),u.toString("base64",m,u.length-S))}function d(u){var m=u&&u.length?this.write(u):"";return this.lastNeed?m+this.lastChar.toString("base64",0,3-this.lastNeed):m}function r(u){return u.toString(this.encoding)}function t(u){return u&&u.length?this.write(u):""}R.s=l,l.prototype.write=function(u){if(u.length===0)return"";var m,S;if(this.lastNeed){if((m=this.fillLast(u))===void 0)return"";S=this.lastNeed,this.lastNeed=0}else S=0;return S<u.length?m?m+this.text(u,S):this.text(u,S):m||""},l.prototype.end=function(u){var m=u&&u.length?this.write(u):"";return this.lastNeed?m+"":m},l.prototype.text=function(u,m){var S=function(_,v,f){var b=v.length-1;if(b<f)return 0;var p=c(v[b]);return p>=0?(p>0&&(_.lastNeed=p-1),p):--b<f||p===-2?0:(p=c(v[b]))>=0?(p>0&&(_.lastNeed=p-2),p):--b<f||p===-2?0:(p=c(v[b]))>=0?(p>0&&(p===2?p=0:_.lastNeed=p-3),p):0}(this,u,m);if(!this.lastNeed)return u.toString("utf8",m);this.lastTotal=S;var A=u.length-(S-this.lastNeed);return u.copy(this.lastChar,0,A),u.toString("utf8",m,A)},l.prototype.fillLast=function(u){if(this.lastNeed<=u.length)return u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,u.length),this.lastNeed-=u.length}},1067:function(C,R,I){var E;(function(T,l){var c="function",h="undefined",y="object",i="string",g="model",d="name",r="type",t="vendor",u="version",m="architecture",S="console",A="mobile",_="tablet",v="smarttv",f="wearable",b="embedded",p="Amazon",k="Apple",P="ASUS",j="BlackBerry",U="Browser",G="Chrome",ee="Firefox",ne="Google",re="Huawei",oe="LG",W="Microsoft",Te="Motorola",Ue="Opera",ze="Samsung",le="Sony",Se="Xiaomi",be="Zebra",Y="Facebook",Q=function(it){for(var Ye={},Ke=0;Ke<it.length;Ke++)Ye[it[Ke].toUpperCase()]=it[Ke];return Ye},J=function(it,Ye){return typeof it===i&&fe(Ye).indexOf(fe(it))!==-1},fe=function(it){return it.toLowerCase()},Ce=function(it,Ye){if(typeof it===i)return it=it.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof Ye===h?it:it.substring(0,255)},V=function(it,Ye){for(var Ke,dt,me,ke,Je,Xe,nt=0;nt<Ye.length&&!Je;){var Tt=Ye[nt],bt=Ye[nt+1];for(Ke=dt=0;Ke<Tt.length&&!Je;)if(Je=Tt[Ke++].exec(it))for(me=0;me<bt.length;me++)Xe=Je[++dt],typeof(ke=bt[me])===y&&ke.length>0?ke.length===2?typeof ke[1]==c?this[ke[0]]=ke[1].call(this,Xe):this[ke[0]]=ke[1]:ke.length===3?typeof ke[1]!==c||ke[1].exec&&ke[1].test?this[ke[0]]=Xe?Xe.replace(ke[1],ke[2]):l:this[ke[0]]=Xe?ke[1].call(this,Xe,ke[2]):l:ke.length===4&&(this[ke[0]]=Xe?ke[3].call(this,Xe.replace(ke[1],ke[2])):l):this[ke]=Xe||l;nt+=2}},H=function(it,Ye){for(var Ke in Ye)if(typeof Ye[Ke]===y&&Ye[Ke].length>0){for(var dt=0;dt<Ye[Ke].length;dt++)if(J(Ye[Ke][dt],it))return Ke==="?"?l:Ke}else if(J(Ye[Ke],it))return Ke==="?"?l:Ke;return it},z={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[u,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[u,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,u],[/opios[\/ ]+([\w\.]+)/i],[u,[d,Ue+" Mini"]],[/\bopr\/([\w\.]+)/i],[u,[d,Ue]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,u],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[u,[d,"UC"+U]],[/\bqbcore\/([\w\.]+)/i],[u,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[u,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[u,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[u,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[u,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+U],u],[/\bfocus\/([\w\.]+)/i],[u,[d,ee+" Focus"]],[/\bopt\/([\w\.]+)/i],[u,[d,Ue+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[u,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[u,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[u,[d,Ue+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[u,[d,"MIUI "+U]],[/fxios\/([-\w\.]+)/i],[u,[d,ee]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+U]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+U],u],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],u],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,u],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,Y],u],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,u],[/\bgsa\/([\w\.]+) .*safari\//i],[u,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[u,[d,G+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,G+" WebView"],u],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[u,[d,"Android "+U]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,u],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[u,[d,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[u,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[u,H,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,u],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],u],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[u,[d,ee+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,fe]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,"",fe]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,fe]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[g,[t,ze],[r,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[g,[t,ze],[r,A]],[/\((ip(?:hone|od)[\w ]*);/i],[g,[t,k],[r,A]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[g,[t,k],[r,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[g,[t,re],[r,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[g,[t,re],[r,A]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[g,/_/g," "],[t,Se],[r,A]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[g,/_/g," "],[t,Se],[r,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[g,[t,"OPPO"],[r,A]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[g,[t,"Vivo"],[r,A]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[g,[t,"Realme"],[r,A]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[g,[t,Te],[r,A]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[g,[t,Te],[r,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[g,[t,oe],[r,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[g,[t,oe],[r,A]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[g,[t,"Lenovo"],[r,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[g,/_/g," "],[t,"Nokia"],[r,A]],[/(pixel c)\b/i],[g,[t,ne],[r,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[g,[t,ne],[r,A]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[g,[t,le],[r,A]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[g,"Xperia Tablet"],[t,le],[r,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[g,[t,"OnePlus"],[r,A]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[g,[t,p],[r,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[g,/(.+)/g,"Fire Phone $1"],[t,p],[r,A]],[/(playbook);[-\w\),; ]+(rim)/i],[g,t,[r,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[g,[t,j],[r,A]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[g,[t,P],[r,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[g,[t,P],[r,A]],[/(nexus 9)/i],[g,[t,"HTC"],[r,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[t,[g,/_/g," "],[r,A]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[g,[t,"Acer"],[r,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[g,[t,"Meizu"],[r,A]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[g,[t,"Sharp"],[r,A]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[t,g,[r,A]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[t,g,[r,_]],[/(surface duo)/i],[g,[t,W],[r,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[g,[t,"Fairphone"],[r,A]],[/(u304aa)/i],[g,[t,"AT&T"],[r,A]],[/\bsie-(\w*)/i],[g,[t,"Siemens"],[r,A]],[/\b(rct\w+) b/i],[g,[t,"RCA"],[r,_]],[/\b(venue[\d ]{2,7}) b/i],[g,[t,"Dell"],[r,_]],[/\b(q(?:mv|ta)\w+) b/i],[g,[t,"Verizon"],[r,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[g,[t,"Barnes & Noble"],[r,_]],[/\b(tm\d{3}\w+) b/i],[g,[t,"NuVision"],[r,_]],[/\b(k88) b/i],[g,[t,"ZTE"],[r,_]],[/\b(nx\d{3}j) b/i],[g,[t,"ZTE"],[r,A]],[/\b(gen\d{3}) b.+49h/i],[g,[t,"Swiss"],[r,A]],[/\b(zur\d{3}) b/i],[g,[t,"Swiss"],[r,_]],[/\b((zeki)?tb.*\b) b/i],[g,[t,"Zeki"],[r,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[t,"Dragon Touch"],g,[r,_]],[/\b(ns-?\w{0,9}) b/i],[g,[t,"Insignia"],[r,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[g,[t,"NextBook"],[r,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[t,"Voice"],g,[r,A]],[/\b(lvtel\-)?(v1[12]) b/i],[[t,"LvTel"],g,[r,A]],[/\b(ph-1) /i],[g,[t,"Essential"],[r,A]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[g,[t,"Envizen"],[r,_]],[/\b(trio[-\w\. ]+) b/i],[g,[t,"MachSpeed"],[r,_]],[/\btu_(1491) b/i],[g,[t,"Rotor"],[r,_]],[/(shield[\w ]+) b/i],[g,[t,"Nvidia"],[r,_]],[/(sprint) (\w+)/i],[t,g,[r,A]],[/(kin\.[onetw]{3})/i],[[g,/\./g," "],[t,W],[r,A]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[g,[t,be],[r,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[g,[t,be],[r,A]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[t,g,[r,S]],[/droid.+; (shield) bui/i],[g,[t,"Nvidia"],[r,S]],[/(playstation [345portablevi]+)/i],[g,[t,le],[r,S]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[g,[t,W],[r,S]],[/smart-tv.+(samsung)/i],[t,[r,v]],[/hbbtv.+maple;(\d+)/i],[[g,/^/,"SmartTV"],[t,ze],[r,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[t,oe],[r,v]],[/(apple) ?tv/i],[t,[g,k+" TV"],[r,v]],[/crkey/i],[[g,G+"cast"],[t,ne],[r,v]],[/droid.+aft(\w)( bui|\))/i],[g,[t,p],[r,v]],[/\(dtv[\);].+(aquos)/i],[g,[t,"Sharp"],[r,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[t,Ce],[g,Ce],[r,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[r,v]],[/((pebble))app/i],[t,g,[r,f]],[/droid.+; (glass) \d/i],[g,[t,ne],[r,f]],[/droid.+; (wt63?0{2,3})\)/i],[g,[t,be],[r,f]],[/(quest( 2)?)/i],[g,[t,Y],[r,f]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[t,[r,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[g,[r,A]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[g,[r,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[r,_]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[r,A]],[/(android[-\w\. ]{0,9});.+buil/i],[g,[t,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[u,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[u,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,u],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[u,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,u],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[u,H,z]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[u,H,z]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[u,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[u,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[u,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,u],[/\(bb(10);/i],[u,[d,j]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[u,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[u,[d,ee+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[u,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[u,[d,G+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],u],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,u],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],u],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,u]]},de=function(it,Ye){if(typeof it===y&&(Ye=it,it=l),!(this instanceof de))return new de(it,Ye).getResult();var Ke=it||(typeof T!==h&&T.navigator&&T.navigator.userAgent?T.navigator.userAgent:""),dt=Ye?function(me,ke){var Je={};for(var Xe in me)ke[Xe]&&ke[Xe].length%2==0?Je[Xe]=ke[Xe].concat(me[Xe]):Je[Xe]=me[Xe];return Je}(X,Ye):X;return this.getBrowser=function(){var me,ke={};return ke[d]=l,ke[u]=l,V.call(ke,Ke,dt.browser),ke.major=typeof(me=ke.version)===i?me.replace(/[^\d\.]/g,"").split(".")[0]:l,ke},this.getCPU=function(){var me={};return me[m]=l,V.call(me,Ke,dt.cpu),me},this.getDevice=function(){var me={};return me[t]=l,me[g]=l,me[r]=l,V.call(me,Ke,dt.device),me},this.getEngine=function(){var me={};return me[d]=l,me[u]=l,V.call(me,Ke,dt.engine),me},this.getOS=function(){var me={};return me[d]=l,me[u]=l,V.call(me,Ke,dt.os),me},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ke},this.setUA=function(me){return Ke=typeof me===i&&me.length>255?Ce(me,255):me,this},this.setUA(Ke),this};de.VERSION="1.0.2",de.BROWSER=Q([d,u,"major"]),de.CPU=Q([m]),de.DEVICE=Q([g,t,r,S,A,v,_,f,b]),de.ENGINE=de.OS=Q([d,u]),typeof R!==h?(C.exports&&(R=C.exports=de),R.UAParser=de):I.amdO?(E=(function(){return de}).call(R,I,R,C))===l||(C.exports=E):typeof T!==h&&(T.UAParser=de);var ge=typeof T!==h&&(T.jQuery||T.Zepto);if(ge&&!ge.ua){var Ge=new de;ge.ua=Ge.getResult(),ge.ua.get=function(){return Ge.getUA()},ge.ua.set=function(it){Ge.setUA(it);var Ye=Ge.getResult();for(var Ke in Ye)ge.ua[Ke]=Ye[Ke]}}})(typeof window=="object"?window:this)},7839:(C,R,I)=>{function E(T){try{if(!I.g.localStorage)return!1}catch{return!1}var l=I.g.localStorage[T];return l!=null&&String(l).toLowerCase()==="true"}C.exports=function(T,l){if(E("noDeprecation"))return T;var c=!1;return function(){if(!c){if(E("throwDeprecation"))throw new Error(l);E("traceDeprecation")?console.trace(l):console.warn(l),c=!0}return T.apply(this,arguments)}}},9862:()=>{},964:()=>{},3165:C=>{C.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:C=>{C.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:C=>{C.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:C=>{C.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:C=>{C.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:C=>{C.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},M={};function x(C){var R=M[C];if(R!==void 0)return R.exports;var I=M[C]={exports:{}};return K[C].call(I.exports,I,I.exports,x),I.exports}x.amdO={},x.n=C=>{var R=C&&C.__esModule?()=>C.default:()=>C;return x.d(R,{a:R}),R},x.d=(C,R)=>{for(var I in R)x.o(R,I)&&!x.o(C,I)&&Object.defineProperty(C,I,{enumerable:!0,get:R[I]})},x.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),x.o=(C,R)=>Object.prototype.hasOwnProperty.call(C,R);var N={};return(()=>{x.d(N,{default:()=>y}),x(8416);var C,R=x(1715),I=x(8080),E=x(1737),T=x(7688),l=function(){var i,g="application/dash+xml";function d(t,u,m){if(!t||!/^VIDEO$/i.test(t.nodeName))return null;if(t._dashjs_player)return t._dashjs_player;var S,A=t.id||t.name||"video element";if(!(u=u||[].slice.call(t.querySelectorAll("source")).filter(function(_){return _.type==g})[0])&&t.src)(u=document.createElement("source")).src=t.src;else if(!u&&!t.src)return null;return m=m||{},(S=(0,T.Z)(m).create()).initialize(t,u.src,t.autoplay),i||(i=S.getDebug().getLogger()),i.debug("Converted "+A+" to dash.js player and added content: "+u.src),t._dashjs_player=S,S}function r(t){return/^VIDEO$/i.test(t.nodeName)?t:r(t.parentNode)}return{create:d,createAll:function(t,u){var m=[];t=t||"[data-dashjs-player]";for(var S=(u=u||document).querySelectorAll(t),A=0;A<S.length;A++){var _=d(S[A],null);m.push(_)}for(var v=u.querySelectorAll('source[type="'+g+'"]'),f=0;f<v.length;f++){var b=d(r(v[f]),null);m.push(b)}return m}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?l.createAll():C=window.setInterval(function(){window.dashjs&&(window.clearInterval(C),l.createAll())},500):window.addEventListener("load",function i(){window.removeEventListener("load",i),l.createAll()}));const c=l;var h=x(6398);dashjs.Protection=E.default,dashjs.MetricsReporting=I.default,dashjs.MediaPlayerFactory=c,dashjs.Debug=h.Z,dashjs.supportsMediaSource=R.B;const y=dashjs})(),N.default})(),Ee.exports=B()},5893:Ee=>{var B;B=()=>(()=>{var K={2214:(C,R,I)=>{var E;C=I.nmd(C);var T=function(l){var c=1e7,h=9007199254740992,y=S(h),i="0123456789abcdefghijklmnopqrstuvwxyz",g=typeof BigInt=="function";function d(me,ke,Je,Xe){return me===void 0?d[0]:ke===void 0||+ke==10&&!Je?Ke(me):de(me,ke,Je,Xe)}function r(me,ke){this.value=me,this.sign=ke,this.isSmall=!1}function t(me){this.value=me,this.sign=me<0,this.isSmall=!0}function u(me){this.value=me}function m(me){return-h<me&&me<h}function S(me){return me<1e7?[me]:me<1e14?[me%1e7,Math.floor(me/1e7)]:[me%1e7,Math.floor(me/1e7)%1e7,Math.floor(me/1e14)]}function A(me){_(me);var ke=me.length;if(ke<4&&Ue(me,y)<0)switch(ke){case 0:return 0;case 1:return me[0];case 2:return me[0]+me[1]*c;default:return me[0]+(me[1]+me[2]*c)*c}return me}function _(me){for(var ke=me.length;me[--ke]===0;);me.length=ke+1}function v(me){for(var ke=new Array(me),Je=-1;++Je<me;)ke[Je]=0;return ke}function f(me){return me>0?Math.floor(me):Math.ceil(me)}function b(me,ke){var Je,Xe,nt=me.length,Tt=ke.length,bt=new Array(nt),Ft=0,pn=c;for(Xe=0;Xe<Tt;Xe++)Ft=(Je=me[Xe]+ke[Xe]+Ft)>=pn?1:0,bt[Xe]=Je-Ft*pn;for(;Xe<nt;)Ft=(Je=me[Xe]+Ft)===pn?1:0,bt[Xe++]=Je-Ft*pn;return Ft>0&&bt.push(Ft),bt}function p(me,ke){return me.length>=ke.length?b(me,ke):b(ke,me)}function k(me,ke){var Je,Xe,nt=me.length,Tt=new Array(nt),bt=c;for(Xe=0;Xe<nt;Xe++)Je=me[Xe]-bt+ke,ke=Math.floor(Je/bt),Tt[Xe]=Je-ke*bt,ke+=1;for(;ke>0;)Tt[Xe++]=ke%bt,ke=Math.floor(ke/bt);return Tt}function P(me,ke){var Je,Xe,nt=me.length,Tt=ke.length,bt=new Array(nt),Ft=0,pn=c;for(Je=0;Je<Tt;Je++)(Xe=me[Je]-Ft-ke[Je])<0?(Xe+=pn,Ft=1):Ft=0,bt[Je]=Xe;for(Je=Tt;Je<nt;Je++){if(!((Xe=me[Je]-Ft)<0)){bt[Je++]=Xe;break}Xe+=pn,bt[Je]=Xe}for(;Je<nt;Je++)bt[Je]=me[Je];return _(bt),bt}function j(me,ke,Je){var Xe,nt,Tt=me.length,bt=new Array(Tt),Ft=-ke,pn=c;for(Xe=0;Xe<Tt;Xe++)nt=me[Xe]+Ft,Ft=Math.floor(nt/pn),nt%=pn,bt[Xe]=nt<0?nt+pn:nt;return typeof(bt=A(bt))=="number"?(Je&&(bt=-bt),new t(bt)):new r(bt,Je)}function U(me,ke){var Je,Xe,nt,Tt,bt=me.length,Ft=ke.length,pn=v(bt+Ft),wn=c;for(nt=0;nt<bt;++nt){Tt=me[nt];for(var hn=0;hn<Ft;++hn)Je=Tt*ke[hn]+pn[nt+hn],Xe=Math.floor(Je/wn),pn[nt+hn]=Je-Xe*wn,pn[nt+hn+1]+=Xe}return _(pn),pn}function G(me,ke){var Je,Xe,nt=me.length,Tt=new Array(nt),bt=c,Ft=0;for(Xe=0;Xe<nt;Xe++)Je=me[Xe]*ke+Ft,Ft=Math.floor(Je/bt),Tt[Xe]=Je-Ft*bt;for(;Ft>0;)Tt[Xe++]=Ft%bt,Ft=Math.floor(Ft/bt);return Tt}function ee(me,ke){for(var Je=[];ke-- >0;)Je.push(0);return Je.concat(me)}function ne(me,ke){var Je=Math.max(me.length,ke.length);if(Je<=30)return U(me,ke);Je=Math.ceil(Je/2);var Xe=me.slice(Je),nt=me.slice(0,Je),Tt=ke.slice(Je),bt=ke.slice(0,Je),Ft=ne(nt,bt),pn=ne(Xe,Tt),wn=ne(p(nt,Xe),p(bt,Tt)),hn=p(p(Ft,ee(P(P(wn,Ft),pn),Je)),ee(pn,2*Je));return _(hn),hn}function re(me,ke,Je){return new r(me<c?G(ke,me):U(ke,S(me)),Je)}function oe(me){var ke,Je,Xe,nt,Tt=me.length,bt=v(Tt+Tt),Ft=c;for(Xe=0;Xe<Tt;Xe++){Je=0-(nt=me[Xe])*nt;for(var pn=Xe;pn<Tt;pn++)ke=nt*me[pn]*2+bt[Xe+pn]+Je,Je=Math.floor(ke/Ft),bt[Xe+pn]=ke-Je*Ft;bt[Xe+Tt]=Je}return _(bt),bt}function W(me,ke){var Je,Xe,nt,Tt,bt=me.length,Ft=v(bt);for(nt=0,Je=bt-1;Je>=0;--Je)nt=(Tt=1e7*nt+me[Je])-(Xe=f(Tt/ke))*ke,Ft[Je]=0|Xe;return[Ft,0|nt]}function Te(me,ke){var Je,Xe=Ke(ke);if(g)return[new u(me.value/Xe.value),new u(me.value%Xe.value)];var nt,Tt=me.value,bt=Xe.value;if(bt===0)throw new Error("Cannot divide by zero");if(me.isSmall)return Xe.isSmall?[new t(f(Tt/bt)),new t(Tt%bt)]:[d[0],me];if(Xe.isSmall){if(bt===1)return[me,d[0]];if(bt==-1)return[me.negate(),d[0]];var Ft=Math.abs(bt);if(Ft<c){nt=A((Je=W(Tt,Ft))[0]);var pn=Je[1];return me.sign&&(pn=-pn),typeof nt=="number"?(me.sign!==Xe.sign&&(nt=-nt),[new t(nt),new t(pn)]):[new r(nt,me.sign!==Xe.sign),new t(pn)]}bt=S(Ft)}var wn=Ue(Tt,bt);if(wn===-1)return[d[0],me];if(wn===0)return[d[me.sign===Xe.sign?1:-1],d[0]];Je=Tt.length+bt.length<=200?function(Zn,Bn){var Rr,Nr,Ir,nn,rn,$t,Nt,en=Zn.length,_t=Bn.length,pt=c,wt=v(Bn.length),Dt=Bn[_t-1],Vt=Math.ceil(pt/(2*Dt)),Wt=G(Zn,Vt),fn=G(Bn,Vt);for(Wt.length<=en&&Wt.push(0),fn.push(0),Dt=fn[_t-1],Nr=en-_t;Nr>=0;Nr--){for(Rr=pt-1,Wt[Nr+_t]!==Dt&&(Rr=Math.floor((Wt[Nr+_t]*pt+Wt[Nr+_t-1])/Dt)),Ir=0,nn=0,$t=fn.length,rn=0;rn<$t;rn++)Ir+=Rr*fn[rn],Nt=Math.floor(Ir/pt),nn+=Wt[Nr+rn]-(Ir-Nt*pt),Ir=Nt,nn<0?(Wt[Nr+rn]=nn+pt,nn=-1):(Wt[Nr+rn]=nn,nn=0);for(;nn!==0;){for(Rr-=1,Ir=0,rn=0;rn<$t;rn++)(Ir+=Wt[Nr+rn]-pt+fn[rn])<0?(Wt[Nr+rn]=Ir+pt,Ir=0):(Wt[Nr+rn]=Ir,Ir=1);nn+=Ir}wt[Nr]=Rr}return Wt=W(Wt,Vt)[0],[A(wt),A(Wt)]}(Tt,bt):function(Zn,Bn){for(var Rr,Nr,Ir,nn,rn,$t=Zn.length,Nt=Bn.length,en=[],_t=[],pt=c;$t;)if(_t.unshift(Zn[--$t]),_(_t),Ue(_t,Bn)<0)en.push(0);else{Ir=_t[(Nr=_t.length)-1]*pt+_t[Nr-2],nn=Bn[Nt-1]*pt+Bn[Nt-2],Nr>Nt&&(Ir=(Ir+1)*pt),Rr=Math.ceil(Ir/nn);do{if(Ue(rn=G(Bn,Rr),_t)<=0)break;Rr--}while(Rr);en.push(Rr),_t=P(_t,rn)}return en.reverse(),[A(en),A(_t)]}(Tt,bt),nt=Je[0];var hn=me.sign!==Xe.sign,Xn=Je[1],on=me.sign;return typeof nt=="number"?(hn&&(nt=-nt),nt=new t(nt)):nt=new r(nt,hn),typeof Xn=="number"?(on&&(Xn=-Xn),Xn=new t(Xn)):Xn=new r(Xn,on),[nt,Xn]}function Ue(me,ke){if(me.length!==ke.length)return me.length>ke.length?1:-1;for(var Je=me.length-1;Je>=0;Je--)if(me[Je]!==ke[Je])return me[Je]>ke[Je]?1:-1;return 0}function ze(me){var ke=me.abs();return!ke.isUnit()&&(!!(ke.equals(2)||ke.equals(3)||ke.equals(5))||!(ke.isEven()||ke.isDivisibleBy(3)||ke.isDivisibleBy(5))&&(!!ke.lesser(49)||void 0))}function le(me,ke){for(var Je,Xe,nt,Tt=me.prev(),bt=Tt,Ft=0;bt.isEven();)bt=bt.divide(2),Ft++;e:for(Xe=0;Xe<ke.length;Xe++)if(!me.lesser(ke[Xe])&&!(nt=T(ke[Xe]).modPow(bt,me)).isUnit()&&!nt.equals(Tt)){for(Je=Ft-1;Je!=0;Je--){if((nt=nt.square().mod(me)).isUnit())return!1;if(nt.equals(Tt))continue e}return!1}return!0}r.prototype=Object.create(d.prototype),t.prototype=Object.create(d.prototype),u.prototype=Object.create(d.prototype),r.prototype.add=function(me){var ke=Ke(me);if(this.sign!==ke.sign)return this.subtract(ke.negate());var Je=this.value,Xe=ke.value;return ke.isSmall?new r(k(Je,Math.abs(Xe)),this.sign):new r(p(Je,Xe),this.sign)},r.prototype.plus=r.prototype.add,t.prototype.add=function(me){var ke=Ke(me),Je=this.value;if(Je<0!==ke.sign)return this.subtract(ke.negate());var Xe=ke.value;if(ke.isSmall){if(m(Je+Xe))return new t(Je+Xe);Xe=S(Math.abs(Xe))}return new r(k(Xe,Math.abs(Je)),Je<0)},t.prototype.plus=t.prototype.add,u.prototype.add=function(me){return new u(this.value+Ke(me).value)},u.prototype.plus=u.prototype.add,r.prototype.subtract=function(me){var ke=Ke(me);if(this.sign!==ke.sign)return this.add(ke.negate());var Je=this.value,Xe=ke.value;return ke.isSmall?j(Je,Math.abs(Xe),this.sign):function(nt,Tt,bt){var Ft;return Ue(nt,Tt)>=0?Ft=P(nt,Tt):(Ft=P(Tt,nt),bt=!bt),typeof(Ft=A(Ft))=="number"?(bt&&(Ft=-Ft),new t(Ft)):new r(Ft,bt)}(Je,Xe,this.sign)},r.prototype.minus=r.prototype.subtract,t.prototype.subtract=function(me){var ke=Ke(me),Je=this.value;if(Je<0!==ke.sign)return this.add(ke.negate());var Xe=ke.value;return ke.isSmall?new t(Je-Xe):j(Xe,Math.abs(Je),Je>=0)},t.prototype.minus=t.prototype.subtract,u.prototype.subtract=function(me){return new u(this.value-Ke(me).value)},u.prototype.minus=u.prototype.subtract,r.prototype.negate=function(){return new r(this.value,!this.sign)},t.prototype.negate=function(){var me=this.sign,ke=new t(-this.value);return ke.sign=!me,ke},u.prototype.negate=function(){return new u(-this.value)},r.prototype.abs=function(){return new r(this.value,!1)},t.prototype.abs=function(){return new t(Math.abs(this.value))},u.prototype.abs=function(){return new u(this.value>=0?this.value:-this.value)},r.prototype.multiply=function(me){var ke,Je,Xe,nt=Ke(me),Tt=this.value,bt=nt.value,Ft=this.sign!==nt.sign;if(nt.isSmall){if(bt===0)return d[0];if(bt===1)return this;if(bt===-1)return this.negate();if((ke=Math.abs(bt))<c)return new r(G(Tt,ke),Ft);bt=S(ke)}return new r(-.012*(Je=Tt.length)-.012*(Xe=bt.length)+15e-6*Je*Xe>0?ne(Tt,bt):U(Tt,bt),Ft)},r.prototype.times=r.prototype.multiply,t.prototype._multiplyBySmall=function(me){return m(me.value*this.value)?new t(me.value*this.value):re(Math.abs(me.value),S(Math.abs(this.value)),this.sign!==me.sign)},r.prototype._multiplyBySmall=function(me){return me.value===0?d[0]:me.value===1?this:me.value===-1?this.negate():re(Math.abs(me.value),this.value,this.sign!==me.sign)},t.prototype.multiply=function(me){return Ke(me)._multiplyBySmall(this)},t.prototype.times=t.prototype.multiply,u.prototype.multiply=function(me){return new u(this.value*Ke(me).value)},u.prototype.times=u.prototype.multiply,r.prototype.square=function(){return new r(oe(this.value),!1)},t.prototype.square=function(){var me=this.value*this.value;return m(me)?new t(me):new r(oe(S(Math.abs(this.value))),!1)},u.prototype.square=function(me){return new u(this.value*this.value)},r.prototype.divmod=function(me){var ke=Te(this,me);return{quotient:ke[0],remainder:ke[1]}},u.prototype.divmod=t.prototype.divmod=r.prototype.divmod,r.prototype.divide=function(me){return Te(this,me)[0]},u.prototype.over=u.prototype.divide=function(me){return new u(this.value/Ke(me).value)},t.prototype.over=t.prototype.divide=r.prototype.over=r.prototype.divide,r.prototype.mod=function(me){return Te(this,me)[1]},u.prototype.mod=u.prototype.remainder=function(me){return new u(this.value%Ke(me).value)},t.prototype.remainder=t.prototype.mod=r.prototype.remainder=r.prototype.mod,r.prototype.pow=function(me){var ke,Je,Xe,nt=Ke(me),Tt=this.value,bt=nt.value;if(bt===0)return d[1];if(Tt===0)return d[0];if(Tt===1)return d[1];if(Tt===-1)return nt.isEven()?d[1]:d[-1];if(nt.sign)return d[0];if(!nt.isSmall)throw new Error("The exponent "+nt.toString()+" is too large.");if(this.isSmall&&m(ke=Math.pow(Tt,bt)))return new t(f(ke));for(Je=this,Xe=d[1];!0&bt&&(Xe=Xe.times(Je),--bt),bt!==0;)bt/=2,Je=Je.square();return Xe},t.prototype.pow=r.prototype.pow,u.prototype.pow=function(me){var ke=Ke(me),Je=this.value,Xe=ke.value,nt=BigInt(0),Tt=BigInt(1),bt=BigInt(2);if(Xe===nt)return d[1];if(Je===nt)return d[0];if(Je===Tt)return d[1];if(Je===BigInt(-1))return ke.isEven()?d[1]:d[-1];if(ke.isNegative())return new u(nt);for(var Ft=this,pn=d[1];(Xe&Tt)===Tt&&(pn=pn.times(Ft),--Xe),Xe!==nt;)Xe/=bt,Ft=Ft.square();return pn},r.prototype.modPow=function(me,ke){if(me=Ke(me),(ke=Ke(ke)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var Je=d[1],Xe=this.mod(ke);me.isPositive();){if(Xe.isZero())return d[0];me.isOdd()&&(Je=Je.multiply(Xe).mod(ke)),me=me.divide(2),Xe=Xe.square().mod(ke)}return Je},u.prototype.modPow=t.prototype.modPow=r.prototype.modPow,r.prototype.compareAbs=function(me){var ke=Ke(me),Je=this.value,Xe=ke.value;return ke.isSmall?1:Ue(Je,Xe)},t.prototype.compareAbs=function(me){var ke=Ke(me),Je=Math.abs(this.value),Xe=ke.value;return ke.isSmall?Je===(Xe=Math.abs(Xe))?0:Je>Xe?1:-1:-1},u.prototype.compareAbs=function(me){var ke=this.value,Je=Ke(me).value;return(ke=ke>=0?ke:-ke)===(Je=Je>=0?Je:-Je)?0:ke>Je?1:-1},r.prototype.compare=function(me){if(me===1/0)return-1;if(me===-1/0)return 1;var ke=Ke(me),Je=this.value,Xe=ke.value;return this.sign!==ke.sign?ke.sign?1:-1:ke.isSmall?this.sign?-1:1:Ue(Je,Xe)*(this.sign?-1:1)},r.prototype.compareTo=r.prototype.compare,t.prototype.compare=function(me){if(me===1/0)return-1;if(me===-1/0)return 1;var ke=Ke(me),Je=this.value,Xe=ke.value;return ke.isSmall?Je==Xe?0:Je>Xe?1:-1:Je<0!==ke.sign?Je<0?-1:1:Je<0?1:-1},t.prototype.compareTo=t.prototype.compare,u.prototype.compare=function(me){if(me===1/0)return-1;if(me===-1/0)return 1;var ke=this.value,Je=Ke(me).value;return ke===Je?0:ke>Je?1:-1},u.prototype.compareTo=u.prototype.compare,r.prototype.equals=function(me){return this.compare(me)===0},u.prototype.eq=u.prototype.equals=t.prototype.eq=t.prototype.equals=r.prototype.eq=r.prototype.equals,r.prototype.notEquals=function(me){return this.compare(me)!==0},u.prototype.neq=u.prototype.notEquals=t.prototype.neq=t.prototype.notEquals=r.prototype.neq=r.prototype.notEquals,r.prototype.greater=function(me){return this.compare(me)>0},u.prototype.gt=u.prototype.greater=t.prototype.gt=t.prototype.greater=r.prototype.gt=r.prototype.greater,r.prototype.lesser=function(me){return this.compare(me)<0},u.prototype.lt=u.prototype.lesser=t.prototype.lt=t.prototype.lesser=r.prototype.lt=r.prototype.lesser,r.prototype.greaterOrEquals=function(me){return this.compare(me)>=0},u.prototype.geq=u.prototype.greaterOrEquals=t.prototype.geq=t.prototype.greaterOrEquals=r.prototype.geq=r.prototype.greaterOrEquals,r.prototype.lesserOrEquals=function(me){return this.compare(me)<=0},u.prototype.leq=u.prototype.lesserOrEquals=t.prototype.leq=t.prototype.lesserOrEquals=r.prototype.leq=r.prototype.lesserOrEquals,r.prototype.isEven=function(){return(1&this.value[0])==0},t.prototype.isEven=function(){return(1&this.value)==0},u.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},r.prototype.isOdd=function(){return(1&this.value[0])==1},t.prototype.isOdd=function(){return(1&this.value)==1},u.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},r.prototype.isPositive=function(){return!this.sign},t.prototype.isPositive=function(){return this.value>0},u.prototype.isPositive=t.prototype.isPositive,r.prototype.isNegative=function(){return this.sign},t.prototype.isNegative=function(){return this.value<0},u.prototype.isNegative=t.prototype.isNegative,r.prototype.isUnit=function(){return!1},t.prototype.isUnit=function(){return Math.abs(this.value)===1},u.prototype.isUnit=function(){return this.abs().value===BigInt(1)},r.prototype.isZero=function(){return!1},t.prototype.isZero=function(){return this.value===0},u.prototype.isZero=function(){return this.value===BigInt(0)},r.prototype.isDivisibleBy=function(me){var ke=Ke(me);return!ke.isZero()&&(!!ke.isUnit()||(ke.compareAbs(2)===0?this.isEven():this.mod(ke).isZero()))},u.prototype.isDivisibleBy=t.prototype.isDivisibleBy=r.prototype.isDivisibleBy,r.prototype.isPrime=function(me){var ke=ze(this);if(ke!==l)return ke;var Je=this.abs(),Xe=Je.bitLength();if(Xe<=64)return le(Je,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var nt=Math.log(2)*Xe.toJSNumber(),Tt=Math.ceil(me===!0?2*Math.pow(nt,2):nt),bt=[],Ft=0;Ft<Tt;Ft++)bt.push(T(Ft+2));return le(Je,bt)},u.prototype.isPrime=t.prototype.isPrime=r.prototype.isPrime,r.prototype.isProbablePrime=function(me){var ke=ze(this);if(ke!==l)return ke;for(var Je=this.abs(),Xe=me===l?5:me,nt=[],Tt=0;Tt<Xe;Tt++)nt.push(T.randBetween(2,Je.minus(2)));return le(Je,nt)},u.prototype.isProbablePrime=t.prototype.isProbablePrime=r.prototype.isProbablePrime,r.prototype.modInv=function(me){for(var ke,Je,Xe,nt=T.zero,Tt=T.one,bt=Ke(me),Ft=this.abs();!Ft.isZero();)ke=bt.divide(Ft),Je=nt,Xe=bt,nt=Tt,bt=Ft,Tt=Je.subtract(ke.multiply(Tt)),Ft=Xe.subtract(ke.multiply(Ft));if(!bt.isUnit())throw new Error(this.toString()+" and "+me.toString()+" are not co-prime");return nt.compare(0)===-1&&(nt=nt.add(me)),this.isNegative()?nt.negate():nt},u.prototype.modInv=t.prototype.modInv=r.prototype.modInv,r.prototype.next=function(){var me=this.value;return this.sign?j(me,1,this.sign):new r(k(me,1),this.sign)},t.prototype.next=function(){var me=this.value;return me+1<h?new t(me+1):new r(y,!1)},u.prototype.next=function(){return new u(this.value+BigInt(1))},r.prototype.prev=function(){var me=this.value;return this.sign?new r(k(me,1),!0):j(me,1,this.sign)},t.prototype.prev=function(){var me=this.value;return me-1>-h?new t(me-1):new r(y,!0)},u.prototype.prev=function(){return new u(this.value-BigInt(1))};for(var Se=[1];2*Se[Se.length-1]<=c;)Se.push(2*Se[Se.length-1]);var be=Se.length,Y=Se[be-1];function Q(me){return Math.abs(me)<=c}function J(me,ke,Je){ke=Ke(ke);for(var Xe=me.isNegative(),nt=ke.isNegative(),Tt=Xe?me.not():me,bt=nt?ke.not():ke,Ft=0,pn=0,wn=null,hn=null,Xn=[];!Tt.isZero()||!bt.isZero();)Ft=(wn=Te(Tt,Y))[1].toJSNumber(),Xe&&(Ft=Y-1-Ft),pn=(hn=Te(bt,Y))[1].toJSNumber(),nt&&(pn=Y-1-pn),Tt=wn[0],bt=hn[0],Xn.push(Je(Ft,pn));for(var on=Je(Xe?1:0,nt?1:0)!==0?T(-1):T(0),Zn=Xn.length-1;Zn>=0;Zn-=1)on=on.multiply(Y).add(T(Xn[Zn]));return on}r.prototype.shiftLeft=function(me){var ke=Ke(me).toJSNumber();if(!Q(ke))throw new Error(String(ke)+" is too large for shifting.");if(ke<0)return this.shiftRight(-ke);var Je=this;if(Je.isZero())return Je;for(;ke>=be;)Je=Je.multiply(Y),ke-=be-1;return Je.multiply(Se[ke])},u.prototype.shiftLeft=t.prototype.shiftLeft=r.prototype.shiftLeft,r.prototype.shiftRight=function(me){var ke,Je=Ke(me).toJSNumber();if(!Q(Je))throw new Error(String(Je)+" is too large for shifting.");if(Je<0)return this.shiftLeft(-Je);for(var Xe=this;Je>=be;){if(Xe.isZero()||Xe.isNegative()&&Xe.isUnit())return Xe;Xe=(ke=Te(Xe,Y))[1].isNegative()?ke[0].prev():ke[0],Je-=be-1}return(ke=Te(Xe,Se[Je]))[1].isNegative()?ke[0].prev():ke[0]},u.prototype.shiftRight=t.prototype.shiftRight=r.prototype.shiftRight,r.prototype.not=function(){return this.negate().prev()},u.prototype.not=t.prototype.not=r.prototype.not,r.prototype.and=function(me){return J(this,me,function(ke,Je){return ke&Je})},u.prototype.and=t.prototype.and=r.prototype.and,r.prototype.or=function(me){return J(this,me,function(ke,Je){return ke|Je})},u.prototype.or=t.prototype.or=r.prototype.or,r.prototype.xor=function(me){return J(this,me,function(ke,Je){return ke^Je})},u.prototype.xor=t.prototype.xor=r.prototype.xor;var fe=1<<30;function Ce(me){var ke=me.value,Je=typeof ke=="number"?ke|fe:typeof ke=="bigint"?ke|BigInt(fe):ke[0]+ke[1]*c|1073758208;return Je&-Je}function V(me,ke){if(ke.compareTo(me)<=0){var Je=V(me,ke.square(ke)),Xe=Je.p,nt=Je.e,Tt=Xe.multiply(ke);return Tt.compareTo(me)<=0?{p:Tt,e:2*nt+1}:{p:Xe,e:2*nt}}return{p:T(1),e:0}}function H(me,ke){return me=Ke(me),ke=Ke(ke),me.greater(ke)?me:ke}function z(me,ke){return me=Ke(me),ke=Ke(ke),me.lesser(ke)?me:ke}function X(me,ke){if(me=Ke(me).abs(),ke=Ke(ke).abs(),me.equals(ke))return me;if(me.isZero())return ke;if(ke.isZero())return me;for(var Je,Xe,nt=d[1];me.isEven()&&ke.isEven();)Je=z(Ce(me),Ce(ke)),me=me.divide(Je),ke=ke.divide(Je),nt=nt.multiply(Je);for(;me.isEven();)me=me.divide(Ce(me));do{for(;ke.isEven();)ke=ke.divide(Ce(ke));me.greater(ke)&&(Xe=ke,ke=me,me=Xe),ke=ke.subtract(me)}while(!ke.isZero());return nt.isUnit()?me:me.multiply(nt)}r.prototype.bitLength=function(){var me=this;return me.compareTo(T(0))<0&&(me=me.negate().subtract(T(1))),me.compareTo(T(0))===0?T(0):T(V(me,T(2)).e).add(T(1))},u.prototype.bitLength=t.prototype.bitLength=r.prototype.bitLength;var de=function(me,ke,Je,Xe){Je=Je||i,me=String(me),Xe||(me=me.toLowerCase(),Je=Je.toLowerCase());var nt,Tt=me.length,bt=Math.abs(ke),Ft={};for(nt=0;nt<Je.length;nt++)Ft[Je[nt]]=nt;for(nt=0;nt<Tt;nt++)if((hn=me[nt])!=="-"&&hn in Ft&&Ft[hn]>=bt){if(hn==="1"&&bt===1)continue;throw new Error(hn+" is not a valid digit in base "+ke+".")}ke=Ke(ke);var pn=[],wn=me[0]==="-";for(nt=wn?1:0;nt<me.length;nt++){var hn;if((hn=me[nt])in Ft)pn.push(Ke(Ft[hn]));else{if(hn!=="<")throw new Error(hn+" is not a valid character");var Xn=nt;do nt++;while(me[nt]!==">"&&nt<me.length);pn.push(Ke(me.slice(Xn+1,nt)))}}return ge(pn,ke,wn)};function ge(me,ke,Je){var Xe,nt=d[0],Tt=d[1];for(Xe=me.length-1;Xe>=0;Xe--)nt=nt.add(me[Xe].times(Tt)),Tt=Tt.times(ke);return Je?nt.negate():nt}function Ge(me,ke){if((ke=T(ke)).isZero()){if(me.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(ke.equals(-1)){if(me.isZero())return{value:[0],isNegative:!1};if(me.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-me.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var Je=Array.apply(null,Array(me.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return Je.unshift([1]),{value:[].concat.apply([],Je),isNegative:!1}}var Xe=!1;if(me.isNegative()&&ke.isPositive()&&(Xe=!0,me=me.abs()),ke.isUnit())return me.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(me.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:Xe};for(var nt,Tt=[],bt=me;bt.isNegative()||bt.compareAbs(ke)>=0;){nt=bt.divmod(ke),bt=nt.quotient;var Ft=nt.remainder;Ft.isNegative()&&(Ft=ke.minus(Ft).abs(),bt=bt.next()),Tt.push(Ft.toJSNumber())}return Tt.push(bt.toJSNumber()),{value:Tt.reverse(),isNegative:Xe}}function it(me,ke,Je){var Xe=Ge(me,ke);return(Xe.isNegative?"-":"")+Xe.value.map(function(nt){return function(Tt,bt){return Tt<(bt=bt||i).length?bt[Tt]:"<"+Tt+">"}(nt,Je)}).join("")}function Ye(me){if(m(+me)){var ke=+me;if(ke===f(ke))return g?new u(BigInt(ke)):new t(ke);throw new Error("Invalid integer: "+me)}var Je=me[0]==="-";Je&&(me=me.slice(1));var Xe=me.split(/e/i);if(Xe.length>2)throw new Error("Invalid integer: "+Xe.join("e"));if(Xe.length===2){var nt=Xe[1];if(nt[0]==="+"&&(nt=nt.slice(1)),(nt=+nt)!==f(nt)||!m(nt))throw new Error("Invalid integer: "+nt+" is not a valid exponent.");var Tt=Xe[0],bt=Tt.indexOf(".");if(bt>=0&&(nt-=Tt.length-bt-1,Tt=Tt.slice(0,bt)+Tt.slice(bt+1)),nt<0)throw new Error("Cannot include negative exponent part for integers");me=Tt+=new Array(nt+1).join("0")}if(!/^([0-9][0-9]*)$/.test(me))throw new Error("Invalid integer: "+me);if(g)return new u(BigInt(Je?"-"+me:me));for(var Ft=[],pn=me.length,wn=pn-7;pn>0;)Ft.push(+me.slice(wn,pn)),(wn-=7)<0&&(wn=0),pn-=7;return _(Ft),new r(Ft,Je)}function Ke(me){return typeof me=="number"?function(ke){if(g)return new u(BigInt(ke));if(m(ke)){if(ke!==f(ke))throw new Error(ke+" is not an integer.");return new t(ke)}return Ye(ke.toString())}(me):typeof me=="string"?Ye(me):typeof me=="bigint"?new u(me):me}r.prototype.toArray=function(me){return Ge(this,me)},t.prototype.toArray=function(me){return Ge(this,me)},u.prototype.toArray=function(me){return Ge(this,me)},r.prototype.toString=function(me,ke){if(me===l&&(me=10),me!==10)return it(this,me,ke);for(var Je,Xe=this.value,nt=Xe.length,Tt=String(Xe[--nt]);--nt>=0;)Je=String(Xe[nt]),Tt+="0000000".slice(Je.length)+Je;return(this.sign?"-":"")+Tt},t.prototype.toString=function(me,ke){return me===l&&(me=10),me!=10?it(this,me,ke):String(this.value)},u.prototype.toString=t.prototype.toString,u.prototype.toJSON=r.prototype.toJSON=t.prototype.toJSON=function(){return this.toString()},r.prototype.valueOf=function(){return parseInt(this.toString(),10)},r.prototype.toJSNumber=r.prototype.valueOf,t.prototype.valueOf=function(){return this.value},t.prototype.toJSNumber=t.prototype.valueOf,u.prototype.valueOf=u.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var dt=0;dt<1e3;dt++)d[dt]=Ke(dt),dt>0&&(d[-dt]=Ke(-dt));return d.one=d[1],d.zero=d[0],d.minusOne=d[-1],d.max=H,d.min=z,d.gcd=X,d.lcm=function(me,ke){return me=Ke(me).abs(),ke=Ke(ke).abs(),me.divide(X(me,ke)).multiply(ke)},d.isInstance=function(me){return me instanceof r||me instanceof t||me instanceof u},d.randBetween=function(me,ke){var Je=z(me=Ke(me),ke=Ke(ke)),Xe=H(me,ke).subtract(Je).add(1);if(Xe.isSmall)return Je.add(Math.floor(Math.random()*Xe));for(var nt=Ge(Xe,c).value,Tt=[],bt=!0,Ft=0;Ft<nt.length;Ft++){var pn=bt?nt[Ft]:c,wn=f(Math.random()*pn);Tt.push(wn),wn<pn&&(bt=!1)}return Je.add(d.fromArray(Tt,c,!1))},d.fromArray=function(me,ke,Je){return ge(me.map(Ke),Ke(ke||10),Je)},d}();C.hasOwnProperty("exports")&&(C.exports=T),(E=(function(){return T}).apply(R,[]))===void 0||(C.exports=E)}},M={};function x(C){var R=M[C];if(R!==void 0)return R.exports;var I=M[C]={id:C,loaded:!1,exports:{}};return K[C](I,I.exports,x),I.loaded=!0,I.exports}x.n=C=>{var R=C&&C.__esModule?()=>C.default:()=>C;return x.d(R,{a:R}),R},x.d=(C,R)=>{for(var I in R)x.o(R,I)&&!x.o(C,I)&&Object.defineProperty(C,I,{enumerable:!0,get:R[I]})},x.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),x.o=(C,R)=>Object.prototype.hasOwnProperty.call(C,R),x.nmd=C=>(C.paths=[],C.children||(C.children=[]),C);var N={};return(()=>{x.d(N,{default:()=>ze});const C=function le(){(function(Se,be){if(!(Se instanceof be))throw new TypeError("Cannot call a class as a function")})(this,le),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null};var R=function le(){(function(Se,be){if(!(Se instanceof be))throw new TypeError("Cannot call a class as a function")})(this,le),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null};R.GET="GET",R.HEAD="HEAD",R.MPD_TYPE="MPD",R.XLINK_EXPANSION_TYPE="XLinkExpansion",R.INIT_SEGMENT_TYPE="InitializationSegment",R.INDEX_SEGMENT_TYPE="IndexSegment",R.MEDIA_SEGMENT_TYPE="MediaSegment",R.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",R.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",R.DVB_REPORTING_TYPE="DVBReporting",R.LICENSE="license",R.CONTENT_STEERING_TYPE="ContentSteering",R.OTHER_TYPE="other";var I=function(){function le(be){(function(Y,Q){if(!(Y instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,le),this.action=le.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=be||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var Se;return(Se=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===R.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(be){this.type=be&&be.init?R.INIT_SEGMENT_TYPE:R.MEDIA_SEGMENT_TYPE,this.url=be&&be.url?be.url:null,this.range=be&&be.range?be.range.start+"-"+be.range.end:null,this.mediaType=be&&be.mediaType?be.mediaType:null}}])&&function(be,Y){for(var Q=0;Q<Y.length;Q++){var J=Y[Q];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(be,J.key,J)}}(le.prototype,Se),le}();I.ACTION_DOWNLOAD="download",I.ACTION_COMPLETE="complete";const E=I;function T(le){var Se,be,Y,Q,J,fe,Ce,V,H,z=(le=le||{}).streamProcessor,X=le.baseURLController,de=le.debug;function ge(){Q&&(be.debug("Stop"),clearTimeout(fe),Q=!1,Ce=null,V=null)}function Ge(){if(Q){var Ye=z.getRepresentationController().getCurrentRepresentation(),Ke=Ye.adaptation.period.mpd.manifest.Period_asArray[Ye.adaptation.period.index].AdaptationSet_asArray[Ye.adaptation.index],dt=Ke.SegmentTemplate.SegmentTimeline.S_asArray,me=function(ke,Je,Xe){var nt=ke.SegmentTemplate.timescale,Tt=new E;return Tt.mediaType=J,Tt.type=R.MSS_FRAGMENT_INFO_SEGMENT_TYPE,Tt.startTime=Xe.t/nt,Tt.duration=Xe.d/nt,Tt.timescale=nt,Tt.quality=Je.index,Tt.index=H++,Tt.mediaInfo=z.getMediaInfo(),Tt.adaptationIndex=Je.adaptation.index,Tt.representationId=Je.id,Tt.url=X.resolve(Je.path).url+ke.SegmentTemplate.media,Tt.url=Tt.url.replace("$Bandwidth$",Je.bandwidth),Tt.url=Tt.url.replace("$Time$",Xe.tManifest?Xe.tManifest:Xe.t),Tt.url=Tt.url.replace("/Fragments(","/FragmentInfo("),Tt}(Ke,Ye,dt[dt.length-1]);it.call(this,me)}}function it(Ye){if(z.getFragmentModel().isFragmentLoadedOrPending(Ye))return be.debug("End of timeline"),void ge();Y.executeRequest(Ye)}return Se={initialize:function(){J=z.getType(),Y=z.getFragmentModel(),Q=!1,Ce=null,V=null},controllerType:"MssFragmentInfoController",start:function(){Q||(be.debug("Start"),Q=!0,H=0,Ge())},fragmentInfoLoaded:function(Ye){if(Q){var Ke,dt,me,ke=Ye.request;Ye.response?(Ce===null&&(Ce=new Date().getTime()),V||(V=ke.startTime),dt=(new Date().getTime()-Ce)/1e3,Ke=ke.startTime+ke.duration-V,me=Math.max(0,Ke-dt),clearTimeout(fe),fe=setTimeout(function(){fe=null,Ge()},1e3*me)):be.error("Load error",ke.url)}},getType:function(){return J},reset:function(){ge()}},be=de.getLogger(Se),Se}T.__dashjs_factory_name="MssFragmentInfoController";const l=dashjs.FactoryMaker.getClassFactory(T),c=function le(Se,be,Y){(function(Q,J){if(!(Q instanceof J))throw new TypeError("Cannot call a class as a function")})(this,le),this.code=Se||null,this.message=be||null,this.data=Y||null};function h(le){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Se){return typeof Se}:function(Se){return Se&&typeof Symbol=="function"&&Se.constructor===Symbol&&Se!==Symbol.prototype?"symbol":typeof Se},h(le)}function y(le,Se){return y=Object.setPrototypeOf||function(be,Y){return be.__proto__=Y,be},y(le,Se)}function i(le){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(Se){return Se.__proto__||Object.getPrototypeOf(Se)},i(le)}const g=new(function(le){(function(J,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(fe&&fe.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),fe&&y(J,fe)})(Q,le);var Se,be,Y=(Se=Q,be=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var J,fe=i(Se);if(be){var Ce=i(this).constructor;J=Reflect.construct(fe,arguments,Ce)}else J=fe.apply(this,arguments);return function(V,H){return!H||h(H)!=="object"&&typeof H!="function"?function(z){if(z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z}(V):H}(this,J)});function Q(){var J;return function(fe,Ce){if(!(fe instanceof Ce))throw new TypeError("Cannot call a class as a function")}(this,Q),(J=Y.call(this)).MSS_NO_TFRF_CODE=200,J.MSS_UNSUPPORTED_CODEC_CODE=201,J.MSS_NO_TFRF_MESSAGE="Missing tfrf in live media segment",J.MSS_UNSUPPORTED_CODEC_MESSAGE="Unsupported codec",J}return Q}(function(){function le(){(function(be,Y){if(!(be instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,le)}var Se;return(Se=[{key:"extend",value:function(be,Y){if(be){var Q=!!Y&&Y.override,J=!!Y&&Y.publicOnly;for(var fe in be)!be.hasOwnProperty(fe)||this[fe]&&!Q||J&&be[fe].indexOf("public_")===-1||(this[fe]=be[fe])}}}])&&function(be,Y){for(var Q=0;Q<Y.length;Q++){var J=Y[Q];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(be,J.key,J)}}(le.prototype,Se),le}()));function d(le){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Se){return typeof Se}:function(Se){return Se&&typeof Symbol=="function"&&Se.constructor===Symbol&&Se!==Symbol.prototype?"symbol":typeof Se},d(le)}function r(le,Se){return r=Object.setPrototypeOf||function(be,Y){return be.__proto__=Y,be},r(le,Se)}function t(le){return t=Object.setPrototypeOf?Object.getPrototypeOf:function(Se){return Se.__proto__||Object.getPrototypeOf(Se)},t(le)}const u=new(function(le){(function(J,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(fe&&fe.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),fe&&r(J,fe)})(Q,le);var Se,be,Y=(Se=Q,be=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var J,fe=t(Se);if(be){var Ce=t(this).constructor;J=Reflect.construct(fe,arguments,Ce)}else J=fe.apply(this,arguments);return function(V,H){return!H||d(H)!=="object"&&typeof H!="function"?function(z){if(z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z}(V):H}(this,J)});function Q(){var J;return function(fe,Ce){if(!(fe instanceof Ce))throw new TypeError("Cannot call a class as a function")}(this,Q),(J=Y.call(this)).AST_IN_FUTURE="astInFuture",J.BASE_URLS_UPDATED="baseUrlsUpdated",J.BUFFER_EMPTY="bufferStalled",J.BUFFER_LOADED="bufferLoaded",J.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",J.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",J.DYNAMIC_TO_STATIC="dynamicToStatic",J.ERROR="error",J.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",J.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",J.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",J.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",J.LOG="log",J.MANIFEST_LOADING_STARTED="manifestLoadingStarted",J.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",J.MANIFEST_LOADED="manifestLoaded",J.METRICS_CHANGED="metricsChanged",J.METRIC_CHANGED="metricChanged",J.METRIC_ADDED="metricAdded",J.METRIC_UPDATED="metricUpdated",J.PERIOD_SWITCH_STARTED="periodSwitchStarted",J.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",J.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",J.QUALITY_CHANGE_RENDERED="qualityChangeRendered",J.TRACK_CHANGE_RENDERED="trackChangeRendered",J.STREAM_INITIALIZING="streamInitializing",J.STREAM_UPDATED="streamUpdated",J.STREAM_ACTIVATED="streamActivated",J.STREAM_DEACTIVATED="streamDeactivated",J.STREAM_INITIALIZED="streamInitialized",J.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",J.TEXT_TRACKS_ADDED="allTextTracksAdded",J.TEXT_TRACK_ADDED="textTrackAdded",J.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",J.TTML_PARSED="ttmlParsed",J.TTML_TO_PARSE="ttmlToParse",J.CAPTION_RENDERED="captionRendered",J.CAPTION_CONTAINER_RESIZE="captionContainerResize",J.CAN_PLAY="canPlay",J.CAN_PLAY_THROUGH="canPlayThrough",J.PLAYBACK_ENDED="playbackEnded",J.PLAYBACK_ERROR="playbackError",J.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",J.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",J.PLAYBACK_LOADED_DATA="playbackLoadedData",J.PLAYBACK_PAUSED="playbackPaused",J.PLAYBACK_PLAYING="playbackPlaying",J.PLAYBACK_PROGRESS="playbackProgress",J.PLAYBACK_RATE_CHANGED="playbackRateChanged",J.PLAYBACK_SEEKED="playbackSeeked",J.PLAYBACK_SEEKING="playbackSeeking",J.PLAYBACK_STALLED="playbackStalled",J.PLAYBACK_STARTED="playbackStarted",J.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",J.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",J.PLAYBACK_WAITING="playbackWaiting",J.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",J.EVENT_MODE_ON_START="eventModeOnStart",J.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",J.CONFORMANCE_VIOLATION="conformanceViolation",J.REPRESENTATION_SWITCH="representationSwitch",J.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",J.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",J.INBAND_PRFT="inbandPrft",J}return Q}(function(){function le(){(function(be,Y){if(!(be instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,le)}var Se;return(Se=[{key:"extend",value:function(be,Y){if(be){var Q=!!Y&&Y.override,J=!!Y&&Y.publicOnly;for(var fe in be)!be.hasOwnProperty(fe)||this[fe]&&!Q||J&&be[fe].indexOf("public_")===-1||(this[fe]=be[fe])}}}])&&function(be,Y){for(var Q=0;Q<Y.length;Q++){var J=Y[Q];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(be,J.key,J)}}(le.prototype,Se),le}()));function m(le){var Se,be,Y,Q=(le=le||{}).dashMetrics,J=le.playbackController,fe=le.errHandler,Ce=le.eventBus,V=le.ISOBoxer,H=le.debug;function z(ge,Ge,it,Ye){var Ke=Ye.getRepresentationController().getCurrentRepresentation(),dt=Ke.adaptation.period.mpd.manifest,me=dt.Period_asArray[Ke.adaptation.period.index].AdaptationSet_asArray[Ke.adaptation.index],ke=me.SegmentTemplate.timescale;if(be=Ye.getType(),dt.type==="dynamic"||dt.timeShiftBufferDepth)if(Ge){var Je,Xe,nt,Tt,bt=me.SegmentTemplate.SegmentTimeline.S,Ft=Ge.entry,pn=null,wn=null;if(Ft.length!==0&&(Je=Ft[0],!(dt.type==="static"&&(Xe=bt[0].tManifest?parseFloat(bt[0].tManifest):bt[0].t,Je.fragment_absolute_time>Xe+dt.timeShiftBufferDepth*ke)))){if(Xe=bt[bt.length-1].tManifest?parseFloat(bt[bt.length-1].tManifest):bt[bt.length-1].t,Je.fragment_absolute_time<=Xe)return nt={start:bt[0].t/ke,end:it.baseMediaDecodeTime/ke+ge.duration},void X(ge.mediaType,nt,Ye.getStreamInfo().manifestInfo);(pn={}).t=Je.fragment_absolute_time,pn.d=Je.fragment_duration,bt[0].tManifest&&(pn.t-=parseFloat(bt[0].tManifest)-bt[0].t,pn.tManifest=Je.fragment_absolute_time);var hn=bt[bt.length-1];if(hn.t+hn.d!==pn.t&&(Y.debug("Patch segment duration - t = ",hn.t+", d = "+hn.d+" => "+(pn.t-hn.t)),hn.d=pn.t-hn.t),bt.push(pn),dt.type!=="static"){if(dt.timeShiftBufferDepth&&dt.timeShiftBufferDepth>0)for(wn=((pn=bt[bt.length-1]).t-dt.timeShiftBufferDepth*ke)/ke,Tt=((pn=bt[0]).t+pn.d)/ke;Tt<wn&&(J.isPaused()||!(J.getTime()<Tt));)bt.splice(0,1),Tt=((pn=bt[0]).t+pn.d)/ke;nt={start:bt[0].t/ke,end:it.baseMediaDecodeTime/ke+ge.duration},X(be,nt,Ye.getStreamInfo().manifestInfo)}else be==="video"&&(Tt=((pn=bt[bt.length-1]).t+pn.d)/ke)>Ke.adaptation.period.duration&&Ce.trigger(u.MANIFEST_VALIDITY_CHANGED,{sender:this,newDuration:Tt})}}else fe.error(new c(g.MSS_NO_TFRF_CODE,g.MSS_NO_TFRF_MESSAGE))}function X(ge,Ge,it){if(ge==="video"||ge==="audio"){var Ye=Q.getCurrentDVRInfo(ge);(!Ye||Ge.end>Ye.range.end)&&(Y.debug("Update DVR range: ["+Ge.start+" - "+Ge.end+"]"),Q.addDVRInfo(ge,J.getTime(),it,Ge),J.updateCurrentTime(ge))}}function de(ge,Ge){var it=8,Ye=0;for(Ye=0;Ye<ge.boxes.length;Ye++){if(ge.boxes[Ye].type===Ge)return it;it+=ge.boxes[Ye].size}return it}return Se={convertFragment:function(ge,Ge){var it,Ye=V.parseBuffer(ge.response),Ke=Ye.fetch("tfhd");Ke.track_ID=ge.request.mediaInfo.index+1;var dt=Ye.fetch("tfdt"),me=Ye.fetch("traf");dt===null&&((dt=V.createFullBox("tfdt",me,Ke)).version=1,dt.flags=0,dt.baseMediaDecodeTime=Math.floor(ge.request.startTime*ge.request.timescale));var ke=Ye.fetch("trun"),Je=Ye.fetch("tfxd");Je&&(Je._parent.boxes.splice(Je._parent.boxes.indexOf(Je),1),Je=null);var Xe=Ye.fetch("tfrf");z(ge.request,Xe,dt,Ge),Xe&&(Xe._parent.boxes.splice(Xe._parent.boxes.indexOf(Xe),1),Xe=null);var nt=Ye.fetch("sepiff");if(nt!==null){nt.type="senc",nt.usertype=void 0;var Tt=Ye.fetch("saio");if(Tt===null){(Tt=V.createFullBox("saio",me)).version=0,Tt.flags=0,Tt.entry_count=1,Tt.offset=[0];var bt=V.createFullBox("saiz",me);if(bt.version=0,bt.flags=0,bt.sample_count=nt.sample_count,bt.default_sample_info_size=0,bt.sample_info_size=[],2&nt.flags)for(it=0;it<nt.sample_count;it+=1)bt.sample_info_size[it]=10+6*nt.entry[it].NumberOfEntries;else bt.default_sample_info_size=8}}Ke.flags&=16777214,Ke.flags|=131072,ke.flags|=1;var Ft=Ye.fetch("moof"),pn=Ft.getLength();ke.data_offset=pn+8;var wn=Ye.fetch("saio");if(wn!==null){var hn=de(Ft,"traf"),Xn=de(me,"senc");wn.offset[0]=hn+Xn+16}ge.response=Ye.write()},updateSegmentList:function(ge,Ge){if(!ge.response)throw new Error("e.response parameter is missing");var it=V.parseBuffer(ge.response),Ye=it.fetch("tfhd");Ye.track_ID=ge.request.mediaInfo.index+1;var Ke=it.fetch("tfdt"),dt=it.fetch("traf");Ke===null&&((Ke=V.createFullBox("tfdt",dt,Ye)).version=1,Ke.flags=0,Ke.baseMediaDecodeTime=Math.floor(ge.request.startTime*ge.request.timescale));var me=it.fetch("tfrf");z(ge.request,me,Ke,Ge),me&&(me._parent.boxes.splice(me._parent.boxes.indexOf(me),1),me=null)},getType:function(){return be}},Y=H.getLogger(Se),be="",Se}m.__dashjs_factory_name="MssFragmentMoofProcessor";const S=dashjs.FactoryMaker.getClassFactory(m);function A(le){var Se,be,Y,Q,J,fe,Ce=(le=le||{}).constants,V=le.ISOBoxer,H=le.protectionController;function z(Ge,it){V.createBox("frma",Ge).data_format=function(Ye){var Ke,dt=0;for(Ke=0;Ke<Ye.length;Ke+=1)dt|=Ye.charCodeAt(Ke)<<8*(Ye.length-Ke-1);return dt}(it)}function X(Ge){var it=V.createFullBox("schm",Ge);it.flags=0,it.version=0,it.scheme_type=1667591779,it.scheme_version=65536}function de(Ge){var it,Ye;it=V.createBox("schi",Ge),(Ye=V.createFullBox("tenc",it)).flags=0,Ye.version=0,Ye.default_IsEncrypted=1,Ye.default_IV_size=8,Ye.default_KID=Q&&Q.length>0&&Q[0]["cenc:default_KID"]?Q[0]["cenc:default_KID"]:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}function ge(Ge){var it,Ye=new Uint8Array(Ge.length/2);for(it=0;it<Ge.length/2;it+=1)Ye[it]=parseInt(""+Ge[2*it]+Ge[2*it+1],16);return Ye}return{generateMoov:function(Ge){var it;if(Ge&&Ge.adaptation)return be=(Y=Ge).adaptation,Se=be.period,fe=be.index+1,Q=Se.mpd.manifest.Period_asArray[Se.index].AdaptationSet_asArray[be.index].ContentProtection,J=Se.mpd.manifest.Period_asArray[Se.index].AdaptationSet_asArray[be.index].SegmentTemplate.timescale,function(Ye){var Ke=V.createBox("ftyp",Ye);Ke.major_brand="iso6",Ke.minor_version=1,Ke.compatible_brands=[],Ke.compatible_brands[0]="isom",Ke.compatible_brands[1]="iso6",Ke.compatible_brands[2]="msdh"}(it=V.createFile()),function(Ye){var Ke=V.createBox("moov",Ye);(function(Xe){var nt=V.createFullBox("mvhd",Xe);nt.version=1,nt.creation_time=0,nt.modification_time=0,nt.timescale=J,nt.duration=Se.duration===1/0?18446744073709552e3:Math.round(Se.duration*J),nt.rate=1,nt.volume=1,nt.reserved1=0,nt.reserved2=[0,0],nt.matrix=[1,0,0,0,1,0,0,0,16384],nt.pre_defined=[0,0,0,0,0,0],nt.next_track_ID=fe+1})(Ke);var dt=V.createBox("trak",Ke);(function(Xe){var nt=V.createFullBox("tkhd",Xe);nt.version=1,nt.flags=7,nt.creation_time=0,nt.modification_time=0,nt.track_ID=fe,nt.reserved1=0,nt.duration=Se.duration===1/0?18446744073709552e3:Math.round(Se.duration*J),nt.reserved2=[0,0],nt.layer=0,nt.alternate_group=0,nt.volume=1,nt.reserved3=0,nt.matrix=[1,0,0,0,1,0,0,0,16384],nt.width=Y.width,nt.height=Y.height})(dt);var me=V.createBox("mdia",dt);(function(Xe){var nt=V.createFullBox("mdhd",Xe);nt.version=1,nt.creation_time=0,nt.modification_time=0,nt.timescale=J,nt.duration=Se.duration===1/0?18446744073709552e3:Math.round(Se.duration*J),nt.language=be.lang||"und",nt.pre_defined=0})(me),function(Xe){var nt=V.createFullBox("hdlr",Xe);switch(nt.pre_defined=0,be.type){case Ce.VIDEO:nt.handler_type="vide";break;case Ce.AUDIO:nt.handler_type="soun";break;default:nt.handler_type="meta"}nt.name=Y.id,nt.reserved=[0,0,0]}(me);var ke=V.createBox("minf",me);switch(be.type){case Ce.VIDEO:(function(Xe){var nt=V.createFullBox("vmhd",Xe);nt.flags=1,nt.graphicsmode=0,nt.opcolor=[0,0,0]})(ke);break;case Ce.AUDIO:(function(Xe){var nt=V.createFullBox("smhd",Xe);nt.flags=1,nt.balance=0,nt.reserved=0})(ke)}(function(Xe){var nt=V.createFullBox("dref",Xe);nt.entry_count=1,nt.entries=[];var Tt=V.createFullBox("url ",nt,!1);Tt.location="",Tt.flags=1,nt.entries.push(Tt)})(V.createBox("dinf",ke));var Je=V.createBox("stbl",ke);V.createFullBox("stts",Je)._data=[0,0,0,0,0,0,0,0],V.createFullBox("stsc",Je)._data=[0,0,0,0,0,0,0,0],V.createFullBox("stco",Je)._data=[0,0,0,0,0,0,0,0],V.createFullBox("stsz",Je)._data=[0,0,0,0,0,0,0,0,0,0,0,0],function(Xe){var nt=V.createFullBox("stsd",Xe);switch(nt.entries=[],be.type){case Ce.VIDEO:case Ce.AUDIO:nt.entries.push(function(Tt){var bt=Y.codecs.substring(0,Y.codecs.indexOf("."));switch(bt){case"avc1":return function(Ft,pn){var wn;if((wn=Q?V.createBox("encv",Ft,!1):V.createBox("avc1",Ft,!1)).reserved1=[0,0,0,0,0,0],wn.data_reference_index=1,wn.pre_defined1=0,wn.reserved2=0,wn.pre_defined2=[0,0,0],wn.height=Y.height,wn.width=Y.width,wn.horizresolution=72,wn.vertresolution=72,wn.reserved3=0,wn.frame_count=1,wn.compressorname=[10,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],wn.depth=24,wn.pre_defined3=65535,wn.config=function(){for(var Xn,on=null,Zn=15,Bn=[],Rr=[],Nr=0,Ir=0,nn=0,rn=Y.codecPrivateData.split("00000001").slice(1),$t=0;$t<rn.length;$t++)switch(31&(Xn=ge(rn[$t]))[0]){case 7:Bn.push(Xn),Zn+=Xn.length+2;break;case 8:Rr.push(Xn),Zn+=Xn.length+2}Bn.length>0&&(Nr=Bn[0][1],nn=Bn[0][2],Ir=Bn[0][3]);var Nt=0;(on=new Uint8Array(Zn))[Nt++]=(4278190080&Zn)>>24,on[Nt++]=(16711680&Zn)>>16,on[Nt++]=(65280&Zn)>>8,on[Nt++]=255&Zn,on.set([97,118,99,67],Nt),Nt+=4,on[Nt++]=1,on[Nt++]=Nr,on[Nt++]=nn,on[Nt++]=Ir,on[Nt++]=255,on[Nt++]=224|Bn.length;for(var en=0;en<Bn.length;en++)on[Nt++]=(65280&Bn[en].length)>>8,on[Nt++]=255&Bn[en].length,on.set(Bn[en],Nt),Nt+=Bn[en].length;on[Nt++]=Rr.length;for(var _t=0;_t<Rr.length;_t++)on[Nt++]=(65280&Rr[_t].length)>>8,on[Nt++]=255&Rr[_t].length,on.set(Rr[_t],Nt),Nt+=Rr[_t].length;return on}(),Q){var hn=V.createBox("sinf",wn);z(hn,pn),X(hn),de(hn)}return wn}(Tt,bt);case"mp4a":return function(Ft,pn){var wn,hn,Xn,on,Zn;if((wn=Q?V.createBox("enca",Ft,!1):V.createBox("mp4a",Ft,!1)).reserved1=[0,0,0,0,0,0],wn.data_reference_index=1,wn.reserved2=[0,0],wn.channelcount=Y.audioChannels,wn.samplesize=16,wn.pre_defined=0,wn.reserved_3=0,wn.samplerate=Y.audioSamplingRate<<16,wn.esds=(Xn=34+(hn=ge(Y.codecPrivateData)).length,Zn=0,(on=new Uint8Array(Xn))[Zn++]=(4278190080&Xn)>>24,on[Zn++]=(16711680&Xn)>>16,on[Zn++]=(65280&Xn)>>8,on[Zn++]=255&Xn,on.set([101,115,100,115],Zn),Zn+=4,on.set([0,0,0,0],Zn),Zn+=4,on[Zn++]=3,on[Zn++]=20+hn.length,on[Zn++]=(65280&fe)>>8,on[Zn++]=255&fe,on[Zn++]=0,on[Zn++]=4,on[Zn++]=15+hn.length,on[Zn++]=64,on[Zn]=20,on[Zn]|=0,on[Zn++]|=1,on[Zn++]=255,on[Zn++]=255,on[Zn++]=255,on[Zn++]=(4278190080&Y.bandwidth)>>24,on[Zn++]=(16711680&Y.bandwidth)>>16,on[Zn++]=(65280&Y.bandwidth)>>8,on[Zn++]=255&Y.bandwidth,on[Zn++]=(4278190080&Y.bandwidth)>>24,on[Zn++]=(16711680&Y.bandwidth)>>16,on[Zn++]=(65280&Y.bandwidth)>>8,on[Zn++]=255&Y.bandwidth,on[Zn++]=5,on[Zn++]=hn.length,on.set(hn,Zn),on),Q){var Bn=V.createBox("sinf",wn);z(Bn,pn),X(Bn),de(Bn)}return wn}(Tt,bt);default:throw{code:g.MSS_UNSUPPORTED_CODEC_CODE,message:g.MSS_UNSUPPORTED_CODEC_MESSAGE,data:{codec:bt}}}}(nt))}nt.entry_count=nt.entries.length}(Je),function(Xe){var nt=V.createFullBox("trex",Xe);nt.track_ID=fe,nt.default_sample_description_index=1,nt.default_sample_duration=0,nt.default_sample_size=0,nt.default_sample_flags=0}(V.createBox("mvex",Ke)),Q&&H&&function(Xe,nt){var Tt,bt,Ft;for(Ft=0;Ft<nt.length;Ft+=1)(Tt=nt[Ft].initData)&&(bt=V.parseBuffer(Tt).fetch("pssh"))&&V.Utils.appendBox(Xe,bt)}(Ke,H.getSupportedKeySystemsFromContentProtection(Q))}(it),it.write()}}}A.__dashjs_factory_name="MssFragmentMoovProcessor";const _=dashjs.FactoryMaker.getClassFactory(A);function v(le,Se){return le.length===Se.length&&le.every(function(be,Y){return be===Se[Y]})}function f(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}function b(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}function p(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("IV_size","uint",8),this._procEntries("entry",this.sample_count,function(le){this._procEntryField(le,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(le,"NumberOfEntries","uint",16),this._procSubEntries(le,"clearAndCryptedData",le.NumberOfEntries,function(Se){this._procEntryField(Se,"BytesOfClearData","uint",16),this._procEntryField(Se,"BytesOfEncryptedData","uint",32)}))})}function k(){v(this.usertype,[109,29,155,5,66,213,68,230,128,226,20,29,175,247,87,178])&&(this._procFullBox(),this._parsing&&(this.type="tfxd"),this._procField("fragment_absolute_time","uint",this.version===1?64:32),this._procField("fragment_duration","uint",this.version===1?64:32)),v(this.usertype,[212,128,126,242,202,57,70,149,142,84,38,203,158,70,167,159])&&(this._procFullBox(),this._parsing&&(this.type="tfrf"),this._procField("fragment_count","uint",8),this._procEntries("entry",this.fragment_count,function(le){this._procEntryField(le,"fragment_absolute_time","uint",this.version===1?64:32),this._procEntryField(le,"fragment_duration","uint",this.version===1?64:32)})),v(this.usertype,[162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244])&&(this._parsing&&(this.type="sepiff"),p.call(this))}function P(le){le=le||{};var Se,be,Y,Q=this.context,J=le.dashMetrics,fe=le.playbackController,Ce=le.eventBus,V=le.protectionController,H=le.ISOBoxer,z=le.debug;return Y={generateMoov:function(X){return Se.generateMoov(X)},processFragment:function(X,de){if(!X||!X.request||!X.response)throw new Error("e parameter is missing or malformed");X.request.type==="MediaSegment"?be.convertFragment(X,de):X.request.type===R.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(be.updateSegmentList(X,de),X.sender=null)}},H.addBoxProcessor("uuid",k),H.addBoxProcessor("saio",f),H.addBoxProcessor("saiz",b),H.addBoxProcessor("senc",p),Se=_(Q).create({protectionController:V,constants:le.constants,ISOBoxer:H}),be=S(Q).create({dashMetrics:J,playbackController:fe,ISOBoxer:H,eventBus:Ce,debug:z,errHandler:le.errHandler}),Y}P.__dashjs_factory_name="MssFragmentProcessor";const j=dashjs.FactoryMaker.getClassFactory(P);var U=x(2214),G=x.n(U);function ee(le){var Se,be,Y,Q=(le=le||{}).BASE64,J=le.debug,fe=le.constants,Ce=le.manifestModel,V=le.settings,H=["AAC","AACL","AACH","AACP","AVC1","H264","TTML","DFXP"],z={CAPT:"main",SUBT:"alternate",DESC:"main"},X={DESC:"2"},de={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},ge={video:"video/mp4",audio:"audio/mp4",text:"application/mp4"};function Ge(me,ke){var Je=me.getAttribute(ke);return!!Je&&Je.toLowerCase()==="true"}function it(me,ke){var Je,Xe,nt,Tt,bt,Ft={},pn=[],wn=me.getAttribute("Name"),hn=me.getAttribute("Type"),Xn=me.getAttribute("Language"),on=Xn?hn+"_"+Xn:hn;if(Ft.id=wn||on,Ft.contentType=hn,Ft.lang=Xn||"und",Ft.mimeType=ge[hn],Ft.subType=me.getAttribute("Subtype"),Ft.maxWidth=me.getAttribute("MaxWidth"),Ft.maxHeight=me.getAttribute("MaxHeight"),Ft.subType){if(z[Ft.subType]){var Zn={schemeIdUri:"urn:mpeg:dash:role:2011",value:z[Ft.subType]};Ft.Role=Zn,Ft.Role_asArray=[Zn]}if(X[Ft.subType]){var Bn={schemeIdUri:"urn:tva:metadata:cs:AudioPurposeCS:2007",value:X[Ft.subType]};Ft.Accessibility=Bn,Ft.Accessibility_asArray=[Bn]}}for(Je=function(Rr,Nr){var Ir,nn,rn,$t={};return Ir=(Ir=(rn=Rr.getAttribute("Url"))?rn.replace("{bitrate}","$Bandwidth$"):null)?Ir.replace("{start time}","$Time$"):null,nn=(nn=Rr.getAttribute("TimeScale"))?parseFloat(nn):Nr,$t.media=Ir,$t.timescale=nn,$t.SegmentTimeline=function(Nt,en){var _t,pt,wt,Dt,Vt,Wt,fn={},ht=Nt.getElementsByTagName("c"),jn=[],vn=0;for(Dt=0;Dt<ht.length;Dt++)if(_t={},(wt=ht[Dt].getAttribute("t"))&&G()(wt).greater(G()(Number.MAX_SAFE_INTEGER))&&(_t.tManifest=wt),_t.t=parseFloat(wt),_t.d=parseFloat(ht[Dt].getAttribute("d")),Dt!==0||_t.t||(_t.t=0),Dt>0&&((pt=jn[jn.length-1]).d||(pt.tManifest?pt.d=G()(wt).subtract(G()(pt.tManifest)).toJSNumber():pt.d=_t.t-pt.t,vn+=pt.d),_t.t||(pt.tManifest?(_t.tManifest=G()(pt.tManifest).add(G()(pt.d)).toString(),_t.t=parseFloat(_t.tManifest)):_t.t=pt.t+pt.d)),_t.d&&(vn+=_t.d),jn.push(_t),Wt=parseFloat(ht[Dt].getAttribute("r")))for(Vt=0;Vt<Wt-1;Vt++)pt=jn[jn.length-1],(_t={}).t=pt.t+pt.d,_t.d=pt.d,pt.tManifest&&(_t.tManifest=G()(pt.tManifest).add(G()(pt.d)).toString()),vn+=_t.d,jn.push(_t);return fn.S=jn,fn.S_asArray=jn,fn.duration=vn/en,fn}(Rr,$t.timescale),$t.availabilityTimeOffset="INF",$t}(me,ke),Xe=me.getElementsByTagName("QualityLevel"),Tt=0;Tt<Xe.length;Tt++)Xe[Tt].BaseURL=Ft.BaseURL,Xe[Tt].mimeType=Ft.mimeType,bt=Xe[Tt].getAttribute("Index"),Xe[Tt].Id=Ft.id+(bt!==null?"_"+bt:""),(nt=Ye(Xe[Tt],me))!==null&&(nt.SegmentTemplate=Je,pn.push(nt));return pn.length===0?null:(Ft.Representation=pn.length>1?pn:pn[0],Ft.Representation_asArray=pn,Ft.SegmentTemplate=Je,Ft)}function Ye(me,ke){var Je,Xe,nt={},Tt=ke.getAttribute("Type"),bt=null;if(nt.id=me.Id,nt.bandwidth=parseInt(me.getAttribute("Bitrate"),10),nt.mimeType=me.mimeType,Je=parseInt(me.getAttribute("MaxWidth"),10),Xe=parseInt(me.getAttribute("MaxHeight"),10),isNaN(Je)||(nt.width=Je),isNaN(Xe)||(nt.height=Xe),(bt=me.getAttribute("FourCC"))!==null&&bt!==""||(bt=ke.getAttribute("FourCC")),bt===null||bt===""){if(Tt===fe.AUDIO)bt="AAC";else if(Tt===fe.VIDEO)return be.debug('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}return H.indexOf(bt.toUpperCase())===-1?(be.warn("Codec not supported: "+bt),null):(bt==="H264"||bt==="AVC1"?nt.codecs=function(Ft){var pn,wn=Ft.getAttribute("CodecPrivateData").toString();return"avc1."+((pn=/00000001[0-9]7/.exec(wn))&&pn[0]?wn.substr(wn.indexOf(pn[0])+10,6):void 0)}(me):bt.indexOf("AAC")>=0?(nt.codecs=function(Ft,pn){var wn,hn,Xn,on,Zn=parseInt(Ft.getAttribute("SamplingRate"),10),Bn=Ft.getAttribute("CodecPrivateData").toString(),Rr=0;return pn==="AACH"&&(Rr=5),Bn===void 0||Bn===""?(Rr=2,Xn=de[Zn],pn==="AACH"?(Rr=5,Bn=new Uint8Array(4),on=de[2*Zn],Bn[0]=Rr<<3|Xn>>1,Bn[1]=Xn<<7|Ft.Channels<<3|on>>1,Bn[2]=on<<7|8,Bn[3]=0,(hn=new Uint16Array(2))[0]=(Bn[0]<<8)+Bn[1],hn[1]=(Bn[2]<<8)+Bn[3],wn=hn[0].toString(16),wn=hn[0].toString(16)+hn[1].toString(16)):((Bn=new Uint8Array(2))[0]=Rr<<3|Xn>>1,Bn[1]=Xn<<7|parseInt(Ft.getAttribute("Channels"),10)<<3,(hn=new Uint16Array(1))[0]=(Bn[0]<<8)+Bn[1],wn=hn[0].toString(16)),Bn=(Bn=""+wn).toUpperCase(),Ft.setAttribute("CodecPrivateData",Bn)):Rr===0&&(Rr=(248&parseInt(Bn.substr(0,2),16))>>3),"mp4a.40."+Rr}(me,bt),nt.audioSamplingRate=parseInt(me.getAttribute("SamplingRate"),10),nt.audioChannels=parseInt(me.getAttribute("Channels"),10)):(bt.indexOf("TTML")||bt.indexOf("DFXP"))&&(nt.codecs=fe.STPP),nt.codecPrivateData=""+me.getAttribute("CodecPrivateData"),nt.BaseURL=me.BaseURL,nt)}function Ke(me,ke,Je){var Xe=me[ke];me[ke]=me[Je],me[Je]=Xe}function dt(me){var ke,Je,Xe,nt,Tt,bt,Ft,pn,wn,hn,Xn,on={},Zn=[],Bn=me.getElementsByTagName("SmoothStreamingMedia")[0],Rr=me.getElementsByTagName("Protection")[0],Nr=null;on.protocol="MSS",on.profiles="urn:mpeg:dash:profile:isoff-live:2011",on.type=Ge(Bn,"IsLive")?"dynamic":"static",pn=Bn.getAttribute("TimeScale"),on.timescale=pn?parseFloat(pn):1e7;var Ir=parseFloat(Bn.getAttribute("DVRWindowLength"));on.type!=="dynamic"||Ir!==0&&!isNaN(Ir)||(Ir=1/0),Ir===0&&Ge(Bn,"CanSeek")&&(Ir=1/0),Ir>0&&(on.timeShiftBufferDepth=Ir/on.timescale);var nn=parseFloat(Bn.getAttribute("Duration"));for(on.mediaPresentationDuration=nn===0?1/0:nn/on.timescale,on.minBufferTime=2,on.ttmlTimeIsRelative=!0,on.type==="dynamic"&&nn>0&&(on.type="static",on.timeShiftBufferDepth=nn/on.timescale),on.type==="dynamic"&&(on.refreshManifestOnSwitchTrack=!0,on.doNotUpdateDVRWindowOnBufferUpdated=!0,on.ignorePostponeTimePeriod=!0,on.availabilityStartTime=new Date(null)),on.Period=function(pt,wt){var Dt,Vt,Wt={AdaptationSet_asArray:[]};Dt=pt.getElementsByTagName("StreamIndex");for(var fn=0;fn<Dt.length;fn++)(Vt=it(Dt[fn],wt))!==null&&Wt.AdaptationSet_asArray.push(Vt);return Wt.AdaptationSet_asArray.length>0&&(Wt.AdaptationSet=Wt.AdaptationSet_asArray.length>1?Wt.AdaptationSet_asArray:Wt.AdaptationSet_asArray[0]),Wt}(Bn,on.timescale),on.Period_asArray=[on.Period],(ke=on.Period).start=0,Rr!==void 0&&((Nr=me.getElementsByTagName("ProtectionHeader")[0]).firstChild.data=Nr.firstChild.data.replace(/\n|\r/g,""),nt=function(pt){var wt,Dt,Vt;return(wt=function(Wt){var fn,ht,jn,vn=0;for(Wt[vn+3],Wt[vn+2],Wt[vn+1],Wt[vn],Wt[(vn+=4)+1],Wt[vn],vn+=2;vn<Wt.length;)if(fn=(Wt[vn+1]<<8)+Wt[vn],vn+=2,fn===1)return ht=(Wt[vn+1]<<8)+Wt[vn],vn+=2,(jn=new Uint8Array(ht)).set(Wt.subarray(vn,vn+ht)),jn;return null}(Q.decodeArray(pt.firstChild.data)))&&(wt=new Uint16Array(wt.buffer),wt=String.fromCharCode.apply(null,wt),Dt=new DOMParser().parseFromString(wt,"application/xml").querySelector("KID").textContent,Ke(Vt=Dt=Q.decodeArray(Dt),0,3),Ke(Vt,1,2),Ke(Vt,4,5),Ke(Vt,6,7)),Dt}(Nr),Xe=function(pt){var wt={__text:pt.firstChild.data,__prefix:"mspr"};return{schemeIdUri:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",value:"com.microsoft.playready",pro:wt,pro_asArray:wt}}(Nr),Xe["cenc:default_KID"]=nt,Zn.push(Xe),Xe=function(pt){var wt={schemeIdUri:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",value:"com.widevine.alpha"};if(!pt)return wt;var Dt=new Uint8Array(2+pt.length);Dt[0]=18,Dt[1]=16,Dt.set(pt,2);var Vt=32+Dt.length,Wt=new Uint8Array(Vt),fn=0;return Wt[fn++]=(4278190080&Vt)>>24,Wt[fn++]=(16711680&Vt)>>16,Wt[fn++]=(65280&Vt)>>8,Wt[fn++]=255&Vt,Wt.set([112,115,115,104,0,0,0,0],fn),fn+=8,Wt.set([237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237],fn),fn+=16,Wt[fn++]=(4278190080&Dt.length)>>24,Wt[fn++]=(16711680&Dt.length)>>16,Wt[fn++]=(65280&Dt.length)>>8,Wt[fn++]=255&Dt.length,Wt.set(Dt,fn),Wt=String.fromCharCode.apply(null,Wt),Wt=Q.encodeASCII(Wt),wt.pssh={__text:Wt},wt}(nt),Xe["cenc:default_KID"]=nt,Zn.push(Xe),on.ContentProtection=Zn,on.ContentProtection_asArray=Zn),Je=ke.AdaptationSet_asArray,hn=0;hn<Je.length;hn+=1)Je[hn].SegmentTemplate.initialization="$Bandwidth$",on.ContentProtection!==void 0&&(Je[hn].ContentProtection=on.ContentProtection,Je[hn].ContentProtection_asArray=on.ContentProtection_asArray),Je[hn].contentType==="video"&&(wn=Je[hn].SegmentTemplate.SegmentTimeline.S_asArray[0].d/Je[hn].SegmentTemplate.timescale,on.minBufferTime=wn,on.type==="dynamic"&&on.timeShiftBufferDepth>0&&on.timeShiftBufferDepth!==1/0&&on.timeShiftBufferDepth>Je[hn].SegmentTemplate.SegmentTimeline.duration&&(on.timeShiftBufferDepth=Je[hn].SegmentTemplate.SegmentTimeline.duration));if(on.minBufferTime=Math.min(on.minBufferTime,on.timeShiftBufferDepth?on.timeShiftBufferDepth:1/0),on.type==="dynamic"){var rn=V.get().streaming.delay.liveDelay;rn||(rn=wn*(V.get().streaming.delay.liveDelayFragmentCount===null||isNaN(V.get().streaming.delay.liveDelayFragmentCount)?4:V.get().streaming.delay.liveDelayFragmentCount));var $t=Math.max(on.timeShiftBufferDepth-10,on.timeShiftBufferDepth/2),Nt=Math.min($t,rn),en=Nt-1.5*wn;Y={streaming:{buffer:{stableBufferTime:V.get().streaming.buffer.stableBufferTime,bufferTimeAtTopQuality:V.get().streaming.buffer.bufferTimeAtTopQuality,bufferTimeAtTopQualityLongForm:V.get().streaming.buffer.bufferTimeAtTopQualityLongForm},timeShiftBuffer:{calcFromSegmentTimeline:V.get().streaming.timeShiftBuffer.calcFromSegmentTimeline},delay:{liveDelay:V.get().streaming.delay.liveDelay}}},V.update({streaming:{buffer:{stableBufferTime:en,bufferTimeAtTopQuality:en,bufferTimeAtTopQualityLongForm:en},timeShiftBuffer:{calcFromSegmentTimeline:!0},delay:{liveDelay:Nt}}})}if(delete on.ContentProtection,delete on.ContentProtection_asArray,on.type==="static"){var _t=Ce.getValue();if(_t&&_t.timestampOffset)Tt=_t.timestampOffset;else for(hn=0;hn<Je.length;hn++)Je[hn].contentType!==fe.AUDIO&&Je[hn].contentType!==fe.VIDEO||(bt=(Ft=Je[hn].SegmentTemplate.SegmentTimeline.S_asArray)[0].t,Tt===void 0&&(Tt=bt),Tt=Math.min(Tt,bt),on.mediaPresentationDuration=Math.min(on.mediaPresentationDuration,Je[hn].SegmentTemplate.SegmentTimeline.duration));if(Tt>0){for(on.timestampOffset=Tt,hn=0;hn<Je.length;hn++){for(Ft=Je[hn].SegmentTemplate.SegmentTimeline.S_asArray,Xn=0;Xn<Ft.length;Xn++)Ft[Xn].tManifest||(Ft[Xn].tManifest=Ft[Xn].t.toString()),Ft[Xn].t-=Tt;Je[hn].contentType!==fe.AUDIO&&Je[hn].contentType!==fe.VIDEO||(ke.start=Math.max(Ft[0].t,ke.start),Je[hn].SegmentTemplate.presentationTimeOffset=ke.start)}ke.start/=on.timescale}}return on.mediaPresentationDuration=Math.floor(1e3*on.mediaPresentationDuration)/1e3,ke.duration=on.mediaPresentationDuration,on}return Se={parse:function(me){var ke,Je,Xe=window.performance.now();ke=function(bt){var Ft=null;if(window.DOMParser&&(Ft=new window.DOMParser().parseFromString(bt,"text/xml")).getElementsByTagName("parsererror").length>0)throw new Error("parsing the manifest failed");return Ft}(me);var nt=window.performance.now();if(ke===null)return null;Je=dt(ke);var Tt=window.performance.now();return be.info("Parsing complete: (xmlParsing: "+(nt-Xe).toPrecision(3)+"ms, mss2dash: "+(Tt-nt).toPrecision(3)+"ms, total: "+((Tt-Xe)/1e3).toPrecision(3)+"s)"),Je},getMatchers:function(){return null},getIron:function(){return null},reset:function(){Y&&V.update(Y)}},be=J.getLogger(Se),Se}ee.__dashjs_factory_name="MssParser";const ne=dashjs.FactoryMaker.getClassFactory(ee);function re(le){le=le||{};var Se,be,Y,Q,J=this.context,fe=le.eventBus,Ce=le.events,V=le.constants,H=le.initSegmentType,z=le.playbackController,X=le.streamController;function de(ke){return X.getActiveStreamProcessors().filter(function(Je){return Je.getType()===ke})[0]}function ge(ke){return Y.filter(function(Je){return Je.getType()===ke})[0]}function Ge(){X.getActiveStreamProcessors().forEach(function(ke){if(ke.getType()===V.VIDEO||ke.getType()===V.AUDIO||ke.getType()===V.TEXT){var Je=ge(ke.getType());Je||((Je=l(J).create({streamProcessor:ke,baseURLController:le.baseURLController,debug:le.debug})).initialize(),Y.push(Je)),Je.start()}})}function it(ke){var Je=de(ke.mediaType);if(Je){var Xe=Je.getRepresentationController().getCurrentRepresentation(),nt=Je.getMediaInfo(),Tt=new E;Tt.mediaType=Xe.adaptation.type,Tt.type=H,Tt.range=Xe.range,Tt.quality=Xe.index,Tt.mediaInfo=nt,Tt.representationId=Xe.id;var bt=function(Ft,pn,wn){var hn=new C;return hn.streamId=pn,hn.mediaInfo=Ft.mediaInfo,hn.segmentType=Ft.type,hn.start=Ft.startTime,hn.duration=Ft.duration,hn.end=hn.start+hn.duration,hn.index=Ft.index,hn.quality=Ft.quality,hn.representationId=Ft.representationId,hn.endFragment=wn,hn}(Tt,nt.streamInfo.id,ke.type!==Ce.FRAGMENT_LOADING_PROGRESS);try{bt.bytes=be.generateMoov(Xe),fe.trigger(Ce.INIT_FRAGMENT_LOADED,{chunk:bt},{streamId:nt.streamInfo.id,mediaType:Xe.adaptation.type})}catch(Ft){le.errHandler.error(new c(Ft.code,Ft.message,Ft.data))}ke.sender=null}}function Ye(ke){if(!ke.error){var Je=de(ke.request.mediaType);if(Je){if(be.processFragment(ke,Je),ke.request.type===R.MSS_FRAGMENT_INFO_SEGMENT_TYPE){var Xe=ge(ke.request.mediaType);Xe&&Xe.fragmentInfoLoaded(ke)}var nt=ke.request.mediaInfo.streamInfo.manifestInfo;nt.isDynamic||nt.dvrWindowSize===1/0||Ge()}}}function Ke(){z.getIsDynamic()&&z.getTime()!==0&&Ge()}function dt(){z.getIsDynamic()&&z.getTime()!==0&&Ge()}function me(ke){ke&&ke.data&&(ke.data=ke.data.replace(/http:\/\/www.w3.org\/2006\/10\/ttaf1/gi,"http://www.w3.org/ns/ttml"))}return Q={reset:function(){Se&&(Se.reset(),Se=void 0),fe.off(Ce.INIT_FRAGMENT_NEEDED,it,this),fe.off(Ce.PLAYBACK_PAUSED,Ke,this),fe.off(Ce.PLAYBACK_SEEKING,dt,this),fe.off(Ce.FRAGMENT_LOADING_COMPLETED,Ye,this),fe.off(Ce.TTML_TO_PARSE,me,this),Y.forEach(function(ke){ke.reset()}),Y=[]},createMssParser:function(){return Se=ne(J).create(le)},createMssFragmentProcessor:function(){be=j(J).create(le)},registerEvents:function(){fe.on(Ce.INIT_FRAGMENT_NEEDED,it,Q,{priority:dashjs.FactoryMaker.getSingletonFactoryByName(fe.getClassName()).EVENT_PRIORITY_HIGH}),fe.on(Ce.PLAYBACK_PAUSED,Ke,Q,{priority:dashjs.FactoryMaker.getSingletonFactoryByName(fe.getClassName()).EVENT_PRIORITY_HIGH}),fe.on(Ce.PLAYBACK_SEEKING,dt,Q,{priority:dashjs.FactoryMaker.getSingletonFactoryByName(fe.getClassName()).EVENT_PRIORITY_HIGH}),fe.on(Ce.FRAGMENT_LOADING_COMPLETED,Ye,Q,{priority:dashjs.FactoryMaker.getSingletonFactoryByName(fe.getClassName()).EVENT_PRIORITY_HIGH}),fe.on(Ce.TTML_TO_PARSE,me,Q)}},Y=[],Q}re.__dashjs_factory_name="MssHandler";var oe=dashjs.FactoryMaker.getClassFactory(re);oe.errors=g,dashjs.FactoryMaker.updateClassFactory(re.__dashjs_factory_name,oe);const W=oe;var Te=typeof window<"u"&&window||x.g,Ue=Te.dashjs;Ue||(Ue=Te.dashjs={}),Ue.MssHandler=W;const ze=Ue})(),N.default})(),Ee.exports=B()},5554:Ee=>{var B="%[a-f0-9]{2}",K=new RegExp("("+B+")|([^%]+?)","gi"),M=new RegExp("("+B+")+","gi");function x(C,R){try{return[decodeURIComponent(C.join(""))]}catch{}if(C.length===1)return C;R=R||1;var I=C.slice(0,R),E=C.slice(R);return Array.prototype.concat.call([],x(I),x(E))}function N(C){try{return decodeURIComponent(C)}catch{for(var R=C.match(K)||[],I=1;I<R.length;I++)R=(C=x(R,I).join("")).match(K)||[];return C}}Ee.exports=function(C){if(typeof C!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof C+"`");try{return C=C.replace(/\+/g," "),decodeURIComponent(C)}catch{return function(I){for(var E={"%FE%FF":"","%FF%FE":""},T=M.exec(I);T;){try{E[T[0]]=decodeURIComponent(T[0])}catch{var l=N(T[0]);l!==T[0]&&(E[T[0]]=l)}T=M.exec(I)}E["%C2"]="";for(var c=Object.keys(E),h=0;h<c.length;h++){var y=c[h];I=I.replace(new RegExp(y,"g"),E[y])}return I}(C)}}},2215:(Ee,B,K)=>{const M=K(3325),x=K(3281),N=K(7932);Ee.exports={XMLParser:x,XMLValidator:M,XMLBuilder:N}},4056:(Ee,B)=>{const K=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",M="["+K+"]["+K+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",x=new RegExp("^"+M+"$");B.isExist=function(N){return N!==void 0},B.isEmptyObject=function(N){return Object.keys(N).length===0},B.merge=function(N,C,R){if(C){const I=Object.keys(C),E=I.length;for(let T=0;T<E;T++)N[I[T]]=R==="strict"?[C[I[T]]]:C[I[T]]}},B.getValue=function(N){return B.isExist(N)?N:""},B.isName=function(N){return x.exec(N)!=null},B.getAllMatches=function(N,C){const R=[];let I=C.exec(N);for(;I;){const E=[];E.startIndex=C.lastIndex-I[0].length;const T=I.length;for(let l=0;l<T;l++)E.push(I[l]);R.push(E),I=C.exec(N)}return R},B.nameRegexp=M},3325:(Ee,B,K)=>{const M=K(4056),x={allowBooleanAttributes:!1,unpairedTags:[]};function N(r){return r===" "||r==="	"||r===`
`||r==="\r"}function C(r,t){const u=t;for(;t<r.length;t++)if(!(r[t]!="?"&&r[t]!=" ")){const m=r.substr(u,t-u);if(t>5&&m==="xml")return y("InvalidXml","XML declaration allowed only at the start of the document.",g(r,t));if(r[t]=="?"&&r[t+1]==">"){t++;break}}return t}function R(r,t){if(r.length>t+5&&r[t+1]==="-"&&r[t+2]==="-"){for(t+=3;t<r.length;t++)if(r[t]==="-"&&r[t+1]==="-"&&r[t+2]===">"){t+=2;break}}else if(r.length>t+8&&r[t+1]==="D"&&r[t+2]==="O"&&r[t+3]==="C"&&r[t+4]==="T"&&r[t+5]==="Y"&&r[t+6]==="P"&&r[t+7]==="E"){let u=1;for(t+=8;t<r.length;t++)if(r[t]==="<")u++;else if(r[t]===">"&&(u--,u===0))break}else if(r.length>t+9&&r[t+1]==="["&&r[t+2]==="C"&&r[t+3]==="D"&&r[t+4]==="A"&&r[t+5]==="T"&&r[t+6]==="A"&&r[t+7]==="["){for(t+=8;t<r.length;t++)if(r[t]==="]"&&r[t+1]==="]"&&r[t+2]===">"){t+=2;break}}return t}B.validate=function(r,t){t=Object.assign({},x,t);const u=[];let m=!1,S=!1;r[0]==="\uFEFF"&&(r=r.substr(1));for(let _=0;_<r.length;_++)if(r[_]==="<"&&r[_+1]==="?"){if(_+=2,_=C(r,_),_.err)return _}else{if(r[_]!=="<"){if(N(r[_]))continue;return y("InvalidChar","char '"+r[_]+"' is not expected.",g(r,_))}{let v=_;if(_++,r[_]==="!"){_=R(r,_);continue}{let f=!1;r[_]==="/"&&(f=!0,_++);let b="";for(;_<r.length&&r[_]!==">"&&r[_]!==" "&&r[_]!=="	"&&r[_]!==`
`&&r[_]!=="\r";_++)b+=r[_];if(b=b.trim(),b[b.length-1]==="/"&&(b=b.substring(0,b.length-1),_--),A=b,!M.isName(A)){let P;return P=b.trim().length===0?"Invalid space after '<'.":"Tag '"+b+"' is an invalid name.",y("InvalidTag",P,g(r,_))}const p=T(r,_);if(p===!1)return y("InvalidAttr","Attributes for '"+b+"' have open quote.",g(r,_));let k=p.value;if(_=p.index,k[k.length-1]==="/"){const P=_-k.length;k=k.substring(0,k.length-1);const j=c(k,t);if(j!==!0)return y(j.err.code,j.err.msg,g(r,P+j.err.line));m=!0}else if(f){if(!p.tagClosed)return y("InvalidTag","Closing tag '"+b+"' doesn't have proper closing.",g(r,_));if(k.trim().length>0)return y("InvalidTag","Closing tag '"+b+"' can't have attributes or invalid starting.",g(r,v));{const P=u.pop();if(b!==P.tagName){let j=g(r,P.tagStartPos);return y("InvalidTag","Expected closing tag '"+P.tagName+"' (opened in line "+j.line+", col "+j.col+") instead of closing tag '"+b+"'.",g(r,v))}u.length==0&&(S=!0)}}else{const P=c(k,t);if(P!==!0)return y(P.err.code,P.err.msg,g(r,_-k.length+P.err.line));if(S===!0)return y("InvalidXml","Multiple possible root nodes found.",g(r,_));t.unpairedTags.indexOf(b)!==-1||u.push({tagName:b,tagStartPos:v}),m=!0}for(_++;_<r.length;_++)if(r[_]==="<"){if(r[_+1]==="!"){_++,_=R(r,_);continue}if(r[_+1]!=="?")break;if(_=C(r,++_),_.err)return _}else if(r[_]==="&"){const P=h(r,_);if(P==-1)return y("InvalidChar","char '&' is not expected.",g(r,_));_=P}else if(S===!0&&!N(r[_]))return y("InvalidXml","Extra text at the end",g(r,_));r[_]==="<"&&_--}}}var A;return m?u.length==1?y("InvalidTag","Unclosed tag '"+u[0].tagName+"'.",g(r,u[0].tagStartPos)):!(u.length>0)||y("InvalidXml","Invalid '"+JSON.stringify(u.map(_=>_.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):y("InvalidXml","Start tag expected.",1)};const I='"',E="'";function T(r,t){let u="",m="",S=!1;for(;t<r.length;t++){if(r[t]===I||r[t]===E)m===""?m=r[t]:m!==r[t]||(m="");else if(r[t]===">"&&m===""){S=!0;break}u+=r[t]}return m===""&&{value:u,index:t,tagClosed:S}}const l=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function c(r,t){const u=M.getAllMatches(r,l),m={};for(let S=0;S<u.length;S++){if(u[S][1].length===0)return y("InvalidAttr","Attribute '"+u[S][2]+"' has no space in starting.",d(u[S]));if(u[S][3]!==void 0&&u[S][4]===void 0)return y("InvalidAttr","Attribute '"+u[S][2]+"' is without value.",d(u[S]));if(u[S][3]===void 0&&!t.allowBooleanAttributes)return y("InvalidAttr","boolean attribute '"+u[S][2]+"' is not allowed.",d(u[S]));const A=u[S][2];if(!i(A))return y("InvalidAttr","Attribute '"+A+"' is an invalid name.",d(u[S]));if(m.hasOwnProperty(A))return y("InvalidAttr","Attribute '"+A+"' is repeated.",d(u[S]));m[A]=1}return!0}function h(r,t){if(r[++t]===";")return-1;if(r[t]==="#")return function(m,S){let A=/\d/;for(m[S]==="x"&&(S++,A=/[\da-fA-F]/);S<m.length;S++){if(m[S]===";")return S;if(!m[S].match(A))break}return-1}(r,++t);let u=0;for(;t<r.length;t++,u++)if(!(r[t].match(/\w/)&&u<20)){if(r[t]===";")break;return-1}return t}function y(r,t,u){return{err:{code:r,msg:t,line:u.line||u,col:u.col}}}function i(r){return M.isName(r)}function g(r,t){const u=r.substring(0,t).split(/\r?\n/);return{line:u.length,col:u[u.length-1].length+1}}function d(r){return r.startIndex+r[1].length}},7932:(Ee,B,K)=>{const M=K(6704),x={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(i,g){return g},attributeValueProcessor:function(i,g){return g},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function N(i){this.options=Object.assign({},x,i),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=y),this.processTextOrObjNode=R,this.options.format?(this.indentate=h,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=c,this.buildObjNode=E):(this.buildTextNode=T,this.buildObjNode=I),this.buildTextValNode=T,this.buildObjectNode=I,this.replaceEntitiesValue=l,this.buildAttrPairStr=C}function C(i,g){return g=this.options.attributeValueProcessor(i,""+g),g=this.replaceEntitiesValue(g),this.options.suppressBooleanAttributes&&g==="true"?" "+i:" "+i+'="'+g+'"'}function R(i,g,d){const r=this.j2x(i,d+1);return i[this.options.textNodeName]!==void 0&&Object.keys(i).length===1?this.buildTextNode(i[this.options.textNodeName],g,r.attrStr,d):this.buildObjNode(r.val,g,r.attrStr,d)}function I(i,g,d,r){let t="</"+g+this.tagEndChar,u="";return g[0]==="?"&&(u="?",t=""),d&&i.indexOf("<")===-1?this.indentate(r)+"<"+g+d+u+">"+i+t:this.options.commentPropName!==!1&&g===this.options.commentPropName&&u.length===0?this.indentate(r)+`<!--${i}-->`+this.newLine:this.indentate(r)+"<"+g+d+u+this.tagEndChar+i+this.indentate(r)+t}function E(i,g,d,r){return i!==""?this.buildObjectNode(i,g,d,r):g[0]==="?"?this.indentate(r)+"<"+g+d+"?"+this.tagEndChar:this.indentate(r)+"<"+g+d+"/"+this.tagEndChar}function T(i,g,d,r){if(this.options.cdataPropName!==!1&&g===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${i}]]>`+this.newLine;if(this.options.commentPropName!==!1&&g===this.options.commentPropName)return this.indentate(r)+`<!--${i}-->`+this.newLine;{let t=this.options.tagValueProcessor(g,i);return t=this.replaceEntitiesValue(t),t===""&&this.options.unpairedTags.indexOf(g)!==-1?this.options.suppressUnpairedNode?this.indentate(r)+"<"+g+this.tagEndChar:this.indentate(r)+"<"+g+"/"+this.tagEndChar:this.indentate(r)+"<"+g+d+">"+t+"</"+g+this.tagEndChar}}function l(i){if(i&&i.length>0&&this.options.processEntities)for(let g=0;g<this.options.entities.length;g++){const d=this.options.entities[g];i=i.replace(d.regex,d.val)}return i}function c(i,g,d,r){return i===""&&this.options.unpairedTags.indexOf(g)!==-1?this.options.suppressUnpairedNode?this.indentate(r)+"<"+g+this.tagEndChar:this.indentate(r)+"<"+g+"/"+this.tagEndChar:i!==""?this.buildTextValNode(i,g,d,r):g[0]==="?"?this.indentate(r)+"<"+g+d+"?"+this.tagEndChar:this.indentate(r)+"<"+g+d+"/"+this.tagEndChar}function h(i){return this.options.indentBy.repeat(i)}function y(i){return!!i.startsWith(this.options.attributeNamePrefix)&&i.substr(this.attrPrefixLen)}N.prototype.build=function(i){return this.options.preserveOrder?M(i,this.options):(Array.isArray(i)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(i={[this.options.arrayNodeName]:i}),this.j2x(i,0).val)},N.prototype.j2x=function(i,g){let d="",r="";for(let t in i)if(i[t]!==void 0)if(i[t]===null)t[0]==="?"?r+=this.indentate(g)+"<"+t+"?"+this.tagEndChar:r+=this.indentate(g)+"<"+t+"/"+this.tagEndChar;else if(i[t]instanceof Date)r+=this.buildTextNode(i[t],t,"",g);else if(typeof i[t]!="object"){const u=this.isAttribute(t);if(u)d+=this.buildAttrPairStr(u,""+i[t]);else if(t===this.options.textNodeName){let m=this.options.tagValueProcessor(t,""+i[t]);r+=this.replaceEntitiesValue(m)}else r+=this.buildTextNode(i[t],t,"",g)}else if(Array.isArray(i[t])){const u=i[t].length;for(let m=0;m<u;m++){const S=i[t][m];S===void 0||(S===null?t[0]==="?"?r+=this.indentate(g)+"<"+t+"?"+this.tagEndChar:r+=this.indentate(g)+"<"+t+"/"+this.tagEndChar:r+=typeof S=="object"?this.processTextOrObjNode(S,t,g):this.buildTextNode(S,t,"",g))}}else if(this.options.attributesGroupName&&t===this.options.attributesGroupName){const u=Object.keys(i[t]),m=u.length;for(let S=0;S<m;S++)d+=this.buildAttrPairStr(u[S],""+i[t][u[S]])}else r+=this.processTextOrObjNode(i[t],t,g);return{attrStr:d,val:r}},Ee.exports=N},6704:Ee=>{function B(C,R,I,E){let T="",l="";R.format&&R.indentBy.length>0&&(l=`
`+R.indentBy.repeat(E));for(let c=0;c<C.length;c++){const h=C[c],y=K(h);let i="";if(i=I.length===0?y:`${I}.${y}`,y===R.textNodeName){let r=h[y];x(i,R)||(r=R.tagValueProcessor(y,r),r=N(r,R)),T+=l+r;continue}if(y===R.cdataPropName){T+=l+`<![CDATA[${h[y][0][R.textNodeName]}]]>`;continue}if(y===R.commentPropName){T+=l+`<!--${h[y][0][R.textNodeName]}-->`;continue}if(y[0]==="?"){const r=M(h[":@"],R),t=y==="?xml"?"":l;let u=h[y][0][R.textNodeName];u=u.length!==0?" "+u:"",T+=t+`<${y}${u}${r}?>`;continue}let g=l+`<${y}${M(h[":@"],R)}`,d=B(h[y],R,i,E+1);R.unpairedTags.indexOf(y)!==-1?R.suppressUnpairedNode?T+=g+">":T+=g+"/>":d&&d.length!==0||!R.suppressEmptyNode?T+=g+`>${d}${l}</${y}>`:T+=g+"/>"}return T}function K(C){const R=Object.keys(C);for(let I=0;I<R.length;I++){const E=R[I];if(E!==":@")return E}}function M(C,R){let I="";if(C&&!R.ignoreAttributes)for(let E in C){let T=R.attributeValueProcessor(E,C[E]);T=N(T,R),T===!0&&R.suppressBooleanAttributes?I+=` ${E.substr(R.attributeNamePrefix.length)}`:I+=` ${E.substr(R.attributeNamePrefix.length)}="${T}"`}return I}function x(C,R){let I=(C=C.substr(0,C.length-R.textNodeName.length-1)).substr(C.lastIndexOf(".")+1);for(let E in R.stopNodes)if(R.stopNodes[E]===C||R.stopNodes[E]==="*."+I)return!0;return!1}function N(C,R){if(C&&C.length>0&&R.processEntities)for(let I=0;I<R.entities.length;I++){const E=R.entities[I];C=C.replace(E.regex,E.val)}return C}Ee.exports=function(C,R){return B(C,R,"",0)}},3770:Ee=>{const B=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function K(M,x){const N=B.exec(M);N&&(x[N[1]]={regx:RegExp(`&${N[1]};`,"g"),val:N[3]})}Ee.exports=function(M,x){const N={};if(M[x+3]!=="O"||M[x+4]!=="C"||M[x+5]!=="T"||M[x+6]!=="Y"||M[x+7]!=="P"||M[x+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{x+=9;let C=1,R=!1,I=!1,E=!1,T="";for(;x<M.length;x++)if(M[x]==="<"){if(R&&M[x+1]==="!"&&M[x+2]==="E"&&M[x+3]==="N"&&M[x+4]==="T"&&M[x+5]==="I"&&M[x+6]==="T"&&M[x+7]==="Y")x+=7,I=!0;else if(R&&M[x+1]==="!"&&M[x+2]==="E"&&M[x+3]==="L"&&M[x+4]==="E"&&M[x+5]==="M"&&M[x+6]==="E"&&M[x+7]==="N"&&M[x+8]==="T")x+=8;else{if(M[x+1]!=="!"||M[x+2]!=="-"||M[x+3]!=="-")throw new Error("Invalid DOCTYPE");E=!0}C++,T=""}else if(M[x]===">"){if(E){if(M[x-1]!=="-"||M[x-2]!=="-")throw new Error("Invalid XML comment in DOCTYPE");E=!1}else I&&(K(T,N),I=!1);if(C--,C===0)break}else M[x]==="["?R=!0:T+=M[x];if(C!==0)throw new Error("Unclosed DOCTYPE")}return{entities:N,i:x}}},4238:(Ee,B)=>{const K={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(M,x){return x},attributeValueProcessor:function(M,x){return x},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1};B.buildOptions=function(M){return Object.assign({},K,M)},B.defaultOptions=K},2848:(Ee,B,K)=>{const M=K(4056),x=K(4499),N=K(3770),C=K(5580);function R(u){const m=Object.keys(u);for(let S=0;S<m.length;S++){const A=m[S];this.lastEntities[A]={regex:new RegExp("&"+A+";","g"),val:u[A]}}}function I(u,m,S,A,_,v,f){if(u!==void 0&&(this.options.trimValues&&!A&&(u=u.trim()),u.length>0)){f||(u=this.replaceEntitiesValue(u));const b=this.options.tagValueProcessor(m,u,S,_,v);return b==null?u:typeof b!=typeof u||b!==u?b:this.options.trimValues||u.trim()===u?t(u,this.options.parseTagValue,this.options.numberParseOptions):u}}function E(u){if(this.options.removeNSPrefix){const m=u.split(":"),S=u.charAt(0)==="/"?"/":"";if(m[0]==="xmlns")return"";m.length===2&&(u=S+m[1])}return u}"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,M.nameRegexp);const T=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function l(u,m){if(!this.options.ignoreAttributes&&typeof u=="string"){const S=M.getAllMatches(u,T),A=S.length,_={};for(let v=0;v<A;v++){const f=this.resolveNameSpace(S[v][1]);let b=S[v][4];const p=this.options.attributeNamePrefix+f;if(f.length)if(b!==void 0){this.options.trimValues&&(b=b.trim()),b=this.replaceEntitiesValue(b);const k=this.options.attributeValueProcessor(f,b,m);_[p]=k==null?b:typeof k!=typeof b||k!==b?k:t(b,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(_[p]=!0)}if(!Object.keys(_).length)return;if(this.options.attributesGroupName){const v={};return v[this.options.attributesGroupName]=_,v}return _}}const c=function(u){u=u.replace(/\r\n?/g,`
`);const m=new x("!xml");let S=m,A="",_="";for(let v=0;v<u.length;v++)if(u[v]==="<")if(u[v+1]==="/"){const f=g(u,">",v,"Closing Tag is not closed.");let b=u.substring(v+2,f).trim();if(this.options.removeNSPrefix){const p=b.indexOf(":");p!==-1&&(b=b.substr(p+1))}S&&(A=this.saveTextToParentTag(A,S,_)),_=_.substr(0,_.lastIndexOf(".")),S=this.tagsNodeStack.pop(),A="",v=f}else if(u[v+1]==="?"){let f=d(u,v,!1,"?>");if(!f)throw new Error("Pi Tag is not closed.");if(A=this.saveTextToParentTag(A,S,_),!(this.options.ignoreDeclaration&&f.tagName==="?xml"||this.options.ignorePiTags)){const b=new x(f.tagName);b.add(this.options.textNodeName,""),f.tagName!==f.tagExp&&f.attrExpPresent&&(b[":@"]=this.buildAttributesMap(f.tagExp,_)),S.addChild(b)}v=f.closeIndex+1}else if(u.substr(v+1,3)==="!--"){const f=g(u,"-->",v+4,"Comment is not closed.");if(this.options.commentPropName){const b=u.substring(v+4,f-2);A=this.saveTextToParentTag(A,S,_),S.add(this.options.commentPropName,[{[this.options.textNodeName]:b}])}v=f}else if(u.substr(v+1,2)==="!D"){const f=N(u,v);this.docTypeEntities=f.entities,v=f.i}else if(u.substr(v+1,2)==="!["){const f=g(u,"]]>",v,"CDATA is not closed.")-2,b=u.substring(v+9,f);if(A=this.saveTextToParentTag(A,S,_),this.options.cdataPropName)S.add(this.options.cdataPropName,[{[this.options.textNodeName]:b}]);else{let p=this.parseTextData(b,S.tagname,_,!0,!1,!0);p||(p=""),S.add(this.options.textNodeName,p)}v=f+2}else{let f=d(u,v,this.options.removeNSPrefix),b=f.tagName,p=f.tagExp,k=f.attrExpPresent,P=f.closeIndex;S&&A&&S.tagname!=="!xml"&&(A=this.saveTextToParentTag(A,S,_,!1)),b!==m.tagname&&(_+=_?"."+b:b);const j=S;if(j&&this.options.unpairedTags.indexOf(j.tagname)!==-1&&(S=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,_,b)){let U="";if(p.length>0&&p.lastIndexOf("/")===p.length-1)v=f.closeIndex;else if(this.options.unpairedTags.indexOf(b)!==-1)v=f.closeIndex;else{const ee=this.readStopNodeData(u,b,P+1);if(!ee)throw new Error(`Unexpected end of ${b}`);v=ee.i,U=ee.tagContent}const G=new x(b);b!==p&&k&&(G[":@"]=this.buildAttributesMap(p,_)),U&&(U=this.parseTextData(U,b,_,!0,k,!0,!0)),_=_.substr(0,_.lastIndexOf(".")),G.add(this.options.textNodeName,U),S.addChild(G)}else{if(p.length>0&&p.lastIndexOf("/")===p.length-1){b[b.length-1]==="/"?(b=b.substr(0,b.length-1),p=b):p=p.substr(0,p.length-1);const U=new x(b);b!==p&&k&&(U[":@"]=this.buildAttributesMap(p,_)),_=_.substr(0,_.lastIndexOf(".")),S.addChild(U)}else{const U=new x(b);this.tagsNodeStack.push(S),b!==p&&k&&(U[":@"]=this.buildAttributesMap(p,_)),S.addChild(U),S=U}A="",v=P}}else A+=u[v];return m.child},h=function(u){if(this.options.processEntities){for(let m in this.docTypeEntities){const S=this.docTypeEntities[m];u=u.replace(S.regx,S.val)}for(let m in this.lastEntities){const S=this.lastEntities[m];u=u.replace(S.regex,S.val)}if(this.options.htmlEntities)for(let m in this.htmlEntities){const S=this.htmlEntities[m];u=u.replace(S.regex,S.val)}}return u};function y(u,m,S,A){return u&&(A===void 0&&(A=Object.keys(m.child).length===0),(u=this.parseTextData(u,m.tagname,S,!1,!!m[":@"]&&Object.keys(m[":@"]).length!==0,A))!==void 0&&u!==""&&m.add(this.options.textNodeName,u),u=""),u}function i(u,m,S){const A="*."+S;for(const _ in u){const v=u[_];if(A===v||m===v)return!0}return!1}function g(u,m,S,A){const _=u.indexOf(m,S);if(_===-1)throw new Error(A);return _+m.length-1}function d(u,m,S,A=">"){const _=function(P,j,U=">"){let G,ee="";for(let ne=j;ne<P.length;ne++){let re=P[ne];if(G)re===G&&(G="");else if(re==='"'||re==="'")G=re;else if(re===U[0]){if(!U[1])return{data:ee,index:ne};if(P[ne+1]===U[1])return{data:ee,index:ne}}else re==="	"&&(re=" ");ee+=re}}(u,m+1,A);if(!_)return;let v=_.data;const f=_.index,b=v.search(/\s/);let p=v,k=!0;if(b!==-1&&(p=v.substr(0,b).replace(/\s\s*$/,""),v=v.substr(b+1)),S){const P=p.indexOf(":");P!==-1&&(p=p.substr(P+1),k=p!==_.data.substr(P+1))}return{tagName:p,tagExp:v,closeIndex:f,attrExpPresent:k}}function r(u,m,S){const A=S;for(;S<u.length;S++)if(u[S]==="<"&&u[S+1]==="/"){const _=g(u,">",S,`${m} is not closed`);if(u.substring(S+2,_).trim()===m)return{tagContent:u.substring(A,S),i:_};S=_}}function t(u,m,S){if(m&&typeof u=="string"){const A=u.trim();return A==="true"||A!=="false"&&C(u,S)}return M.isExist(u)?u:""}Ee.exports=class{constructor(u){this.options=u,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=R,this.parseXml=c,this.parseTextData=I,this.resolveNameSpace=E,this.buildAttributesMap=l,this.isItStopNode=i,this.replaceEntitiesValue=h,this.readStopNodeData=r,this.saveTextToParentTag=y}}},3281:(Ee,B,K)=>{const{buildOptions:M}=K(4238),x=K(2848),{prettify:N}=K(4416),C=K(3325);Ee.exports=class{constructor(R){this.externalEntities={},this.options=M(R)}parse(R,I){if(typeof R!="string"){if(!R.toString)throw new Error("XML data is accepted in String or Bytes[] form.");R=R.toString()}if(I){I===!0&&(I={});const l=C.validate(R,I);if(l!==!0)throw Error(`${l.err.msg}:${l.err.line}:${l.err.col}`)}const E=new x(this.options);E.addExternalEntities(this.externalEntities);const T=E.parseXml(R);return this.options.preserveOrder||T===void 0?T:N(T,this.options)}addEntity(R,I){if(I.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(R.indexOf("&")!==-1||R.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[R]=I}}},4416:(Ee,B)=>{function K(C,R,I){let E;const T={};for(let l=0;l<C.length;l++){const c=C[l],h=M(c);let y="";if(y=I===void 0?h:I+"."+h,h===R.textNodeName)E===void 0?E=c[h]:E+=""+c[h];else{if(h===void 0)continue;if(c[h]){let i=K(c[h],R,y);const g=N(i,R);c[":@"]?x(i,c[":@"],y,R):Object.keys(i).length!==1||i[R.textNodeName]===void 0||R.alwaysCreateTextNode?Object.keys(i).length===0&&(R.alwaysCreateTextNode?i[R.textNodeName]="":i=""):i=i[R.textNodeName],T[h]!==void 0?(Array.isArray(T[h])||(T[h]=[T[h]]),T[h].push(i)):R.isArray(h,y,g)?T[h]=[i]:T[h]=i}}}return typeof E=="string"?E.length>0&&(T[R.textNodeName]=E):E!==void 0&&(T[R.textNodeName]=E),T}function M(C){const R=Object.keys(C);for(let I=0;I<R.length;I++){const E=R[I];if(E!==":@")return E}}function x(C,R,I,E){if(R){const T=Object.keys(R),l=T.length;for(let c=0;c<l;c++){const h=T[c];E.isArray(h,I+"."+h,!0,!0)?C[h]=[R[h]]:C[h]=R[h]}}}function N(C,R){const I=Object.keys(C).length;return!!(I===0||I===1&&C[R.textNodeName])}B.prettify=function(C,R){return K(C,R)}},4499:Ee=>{Ee.exports=class{constructor(B){this.tagname=B,this.child=[],this[":@"]={}}add(B,K){this.child.push({[B]:K})}addChild(B){B[":@"]&&Object.keys(B[":@"]).length>0?this.child.push({[B.tagname]:B.child,":@":B[":@"]}):this.child.push({[B.tagname]:B.child})}}},63:Ee=>{Ee.exports=function(B,K){for(var M={},x=Object.keys(B),N=Array.isArray(K),C=0;C<x.length;C++){var R=x[C],I=B[R];(N?K.indexOf(R)!==-1:K(R,I,B))&&(M[R]=I)}return M}},8711:function(Ee){var B;typeof window<"u"&&(B=function(){return function(K){var M={};function x(N){if(M[N])return M[N].exports;var C=M[N]={i:N,l:!1,exports:{}};return K[N].call(C.exports,C,C.exports,x),C.l=!0,C.exports}return x.m=K,x.c=M,x.d=function(N,C,R){x.o(N,C)||Object.defineProperty(N,C,{enumerable:!0,get:R})},x.r=function(N){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(N,"__esModule",{value:!0})},x.t=function(N,C){if(1&C&&(N=x(N)),8&C||4&C&&typeof N=="object"&&N&&N.__esModule)return N;var R=Object.create(null);if(x.r(R),Object.defineProperty(R,"default",{enumerable:!0,value:N}),2&C&&typeof N!="string")for(var I in N)x.d(R,I,(function(E){return N[E]}).bind(null,I));return R},x.n=function(N){var C=N&&N.__esModule?function(){return N.default}:function(){return N};return x.d(C,"a",C),C},x.o=function(N,C){return Object.prototype.hasOwnProperty.call(N,C)},x.p="/dist/",x(x.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(K,M,x){var N=Object.prototype.hasOwnProperty,C="~";function R(){}function I(c,h,y){this.fn=c,this.context=h,this.once=y||!1}function E(c,h,y,i,g){if(typeof y!="function")throw new TypeError("The listener must be a function");var d=new I(y,i||c,g),r=C?C+h:h;return c._events[r]?c._events[r].fn?c._events[r]=[c._events[r],d]:c._events[r].push(d):(c._events[r]=d,c._eventsCount++),c}function T(c,h){--c._eventsCount==0?c._events=new R:delete c._events[h]}function l(){this._events=new R,this._eventsCount=0}Object.create&&(R.prototype=Object.create(null),new R().__proto__||(C=!1)),l.prototype.eventNames=function(){var c,h,y=[];if(this._eventsCount===0)return y;for(h in c=this._events)N.call(c,h)&&y.push(C?h.slice(1):h);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(c)):y},l.prototype.listeners=function(c){var h=C?C+c:c,y=this._events[h];if(!y)return[];if(y.fn)return[y.fn];for(var i=0,g=y.length,d=new Array(g);i<g;i++)d[i]=y[i].fn;return d},l.prototype.listenerCount=function(c){var h=C?C+c:c,y=this._events[h];return y?y.fn?1:y.length:0},l.prototype.emit=function(c,h,y,i,g,d){var r=C?C+c:c;if(!this._events[r])return!1;var t,u,m=this._events[r],S=arguments.length;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),S){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,h),!0;case 3:return m.fn.call(m.context,h,y),!0;case 4:return m.fn.call(m.context,h,y,i),!0;case 5:return m.fn.call(m.context,h,y,i,g),!0;case 6:return m.fn.call(m.context,h,y,i,g,d),!0}for(u=1,t=new Array(S-1);u<S;u++)t[u-1]=arguments[u];m.fn.apply(m.context,t)}else{var A,_=m.length;for(u=0;u<_;u++)switch(m[u].once&&this.removeListener(c,m[u].fn,void 0,!0),S){case 1:m[u].fn.call(m[u].context);break;case 2:m[u].fn.call(m[u].context,h);break;case 3:m[u].fn.call(m[u].context,h,y);break;case 4:m[u].fn.call(m[u].context,h,y,i);break;default:if(!t)for(A=1,t=new Array(S-1);A<S;A++)t[A-1]=arguments[A];m[u].fn.apply(m[u].context,t)}}return!0},l.prototype.on=function(c,h,y){return E(this,c,h,y,!1)},l.prototype.once=function(c,h,y){return E(this,c,h,y,!0)},l.prototype.removeListener=function(c,h,y,i){var g=C?C+c:c;if(!this._events[g])return this;if(!h)return T(this,g),this;var d=this._events[g];if(d.fn)d.fn!==h||i&&!d.once||y&&d.context!==y||T(this,g);else{for(var r=0,t=[],u=d.length;r<u;r++)(d[r].fn!==h||i&&!d[r].once||y&&d[r].context!==y)&&t.push(d[r]);t.length?this._events[g]=t.length===1?t[0]:t:T(this,g)}return this},l.prototype.removeAllListeners=function(c){var h;return c?(h=C?C+c:c,this._events[h]&&T(this,h)):(this._events=new R,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=C,l.EventEmitter=l,K.exports=l},"./node_modules/url-toolkit/src/url-toolkit.js":function(K,M,x){var N,C,R,I,E;N=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,C=/^([^\/?#]*)([^]*)$/,R=/(?:\/|^)\.(?=\/)/g,I=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,E={buildAbsoluteURL:function(T,l,c){if(c=c||{},T=T.trim(),!(l=l.trim())){if(!c.alwaysNormalize)return T;var h=E.parseURL(T);if(!h)throw new Error("Error trying to parse base URL.");return h.path=E.normalizePath(h.path),E.buildURLFromParts(h)}var y=E.parseURL(l);if(!y)throw new Error("Error trying to parse relative URL.");if(y.scheme)return c.alwaysNormalize?(y.path=E.normalizePath(y.path),E.buildURLFromParts(y)):l;var i=E.parseURL(T);if(!i)throw new Error("Error trying to parse base URL.");if(!i.netLoc&&i.path&&i.path[0]!=="/"){var g=C.exec(i.path);i.netLoc=g[1],i.path=g[2]}i.netLoc&&!i.path&&(i.path="/");var d={scheme:i.scheme,netLoc:y.netLoc,path:null,params:y.params,query:y.query,fragment:y.fragment};if(!y.netLoc&&(d.netLoc=i.netLoc,y.path[0]!=="/"))if(y.path){var r=i.path,t=r.substring(0,r.lastIndexOf("/")+1)+y.path;d.path=E.normalizePath(t)}else d.path=i.path,y.params||(d.params=i.params,y.query||(d.query=i.query));return d.path===null&&(d.path=c.alwaysNormalize?E.normalizePath(y.path):y.path),E.buildURLFromParts(d)},parseURL:function(T){var l=N.exec(T);return l?{scheme:l[1]||"",netLoc:l[2]||"",path:l[3]||"",params:l[4]||"",query:l[5]||"",fragment:l[6]||""}:null},normalizePath:function(T){for(T=T.split("").reverse().join("").replace(R,"");T.length!==(T=T.replace(I,"")).length;);return T.split("").reverse().join("")},buildURLFromParts:function(T){return T.scheme+T.netLoc+T.path+T.params+T.query+T.fragment}},K.exports=E},"./node_modules/webworkify-webpack/index.js":function(K,M,x){function N(l){var c={};function h(i){if(c[i])return c[i].exports;var g=c[i]={i,l:!1,exports:{}};return l[i].call(g.exports,g,g.exports,h),g.l=!0,g.exports}h.m=l,h.c=c,h.i=function(i){return i},h.d=function(i,g,d){h.o(i,g)||Object.defineProperty(i,g,{configurable:!1,enumerable:!0,get:d})},h.r=function(i){Object.defineProperty(i,"__esModule",{value:!0})},h.n=function(i){var g=i&&i.__esModule?function(){return i.default}:function(){return i};return h.d(g,"a",g),g},h.o=function(i,g){return Object.prototype.hasOwnProperty.call(i,g)},h.p="/",h.oe=function(i){throw console.error(i),i};var y=h(h.s=ENTRY_MODULE);return y.default||y}var C="[\\.|\\-|\\+|\\w|/|@]+",R="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+C+").*?\\)";function I(l){return(l+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function E(l,c,h){var y={};y[h]=[];var i=c.toString(),g=i.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!g)return y;for(var d,r=g[1],t=new RegExp("(\\\\n|\\W)"+I(r)+R,"g");d=t.exec(i);)d[3]!=="dll-reference"&&y[h].push(d[3]);for(t=new RegExp("\\("+I(r)+'\\("(dll-reference\\s('+C+'))"\\)\\)'+R,"g");d=t.exec(i);)l[d[2]]||(y[h].push(d[1]),l[d[2]]=x(d[1]).m),y[d[2]]=y[d[2]]||[],y[d[2]].push(d[4]);for(var u,m=Object.keys(y),S=0;S<m.length;S++)for(var A=0;A<y[m[S]].length;A++)u=y[m[S]][A],isNaN(1*u)||(y[m[S]][A]=1*y[m[S]][A]);return y}function T(l){return Object.keys(l).reduce(function(c,h){return c||l[h].length>0},!1)}K.exports=function(l,c){c=c||{};var h={main:x.m},y=c.all?{main:Object.keys(h.main)}:function(t,u){for(var m={main:[u]},S={main:[]},A={main:{}};T(m);)for(var _=Object.keys(m),v=0;v<_.length;v++){var f=_[v],b=m[f].pop();if(A[f]=A[f]||{},!A[f][b]&&t[f][b]){A[f][b]=!0,S[f]=S[f]||[],S[f].push(b);for(var p=E(t,t[f][b],f),k=Object.keys(p),P=0;P<k.length;P++)m[k[P]]=m[k[P]]||[],m[k[P]]=m[k[P]].concat(p[k[P]])}}return S}(h,l),i="";Object.keys(y).filter(function(t){return t!=="main"}).forEach(function(t){for(var u=0;y[t][u];)u++;y[t].push(u),h[t][u]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",i=i+"var "+t+" = ("+N.toString().replace("ENTRY_MODULE",JSON.stringify(u))+")({"+y[t].map(function(m){return JSON.stringify(m)+": "+h[t][m].toString()}).join(",")+`});
`}),i=i+"new (("+N.toString().replace("ENTRY_MODULE",JSON.stringify(l))+")({"+y.main.map(function(t){return JSON.stringify(t)+": "+h.main[t].toString()}).join(",")+"}))(self);";var g=new window.Blob([i],{type:"text/javascript"});if(c.bare)return g;var d=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(g),r=new window.Worker(d);return r.objectURL=d,r}},"./src/config.ts":function(K,M,x){x.r(M),x.d(M,"hlsDefaultConfig",function(){return v}),x.d(M,"mergeConfig",function(){return f}),x.d(M,"enableStreamingMode",function(){return b});var N=x("./src/controller/abr-controller.ts"),C=x("./src/controller/audio-stream-controller.ts"),R=x("./src/controller/audio-track-controller.ts"),I=x("./src/controller/subtitle-stream-controller.ts"),E=x("./src/controller/subtitle-track-controller.ts"),T=x("./src/controller/buffer-controller.ts"),l=x("./src/controller/timeline-controller.ts"),c=x("./src/controller/cap-level-controller.ts"),h=x("./src/controller/fps-controller.ts"),y=x("./src/controller/eme-controller.ts"),i=x("./src/controller/cmcd-controller.ts"),g=x("./src/utils/xhr-loader.ts"),d=x("./src/utils/fetch-loader.ts"),r=x("./src/utils/cues.ts"),t=x("./src/utils/mediakeys-helper.ts"),u=x("./src/utils/logger.ts");function m(){return m=Object.assign||function(p){for(var k=1;k<arguments.length;k++){var P=arguments[k];for(var j in P)Object.prototype.hasOwnProperty.call(P,j)&&(p[j]=P[j])}return p},m.apply(this,arguments)}function S(p,k){var P=Object.keys(p);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(p);k&&(j=j.filter(function(U){return Object.getOwnPropertyDescriptor(p,U).enumerable})),P.push.apply(P,j)}return P}function A(p){for(var k=1;k<arguments.length;k++){var P=arguments[k]!=null?arguments[k]:{};k%2?S(Object(P),!0).forEach(function(j){_(p,j,P[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(P)):S(Object(P)).forEach(function(j){Object.defineProperty(p,j,Object.getOwnPropertyDescriptor(P,j))})}return p}function _(p,k,P){return k in p?Object.defineProperty(p,k,{value:P,enumerable:!0,configurable:!0,writable:!0}):p[k]=P,p}var v=A(A({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:g.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:N.default,bufferController:T.default,capLevelController:c.default,fpsController:h.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:t.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},{cueHandler:r.default,enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:I.SubtitleStreamController,subtitleTrackController:E.default,timelineController:l.TimelineController,audioStreamController:C.default,audioTrackController:R.default,emeController:y.default,cmcdController:i.default});function f(p,k){if((k.liveSyncDurationCount||k.liveMaxLatencyDurationCount)&&(k.liveSyncDuration||k.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(k.liveMaxLatencyDurationCount!==void 0&&(k.liveSyncDurationCount===void 0||k.liveMaxLatencyDurationCount<=k.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(k.liveMaxLatencyDuration!==void 0&&(k.liveSyncDuration===void 0||k.liveMaxLatencyDuration<=k.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return m({},p,k)}function b(p){var k=p.loader;k!==d.default&&k!==g.default?(u.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),p.progressive=!1):Object(d.fetchSupported)()&&(p.loader=d.default,p.progressive=!0,p.enableSoftwareAES=!0,u.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":function(K,M,x){x.r(M);var N=x("./src/polyfills/number.ts"),C=x("./src/utils/ewma-bandwidth-estimator.ts"),R=x("./src/events.ts"),I=x("./src/utils/buffer-helper.ts"),E=x("./src/errors.ts"),T=x("./src/types/loader.ts"),l=x("./src/utils/logger.ts");function c(y,i){for(var g=0;g<i.length;g++){var d=i[g];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(y,d.key,d)}}var h=function(){function y(r){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=r;var t=r.config;this.bwEstimator=new C.default(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}var i,g,d=y.prototype;return d.registerListeners=function(){var r=this.hls;r.on(R.Events.FRAG_LOADING,this.onFragLoading,this),r.on(R.Events.FRAG_LOADED,this.onFragLoaded,this),r.on(R.Events.FRAG_BUFFERED,this.onFragBuffered,this),r.on(R.Events.LEVEL_LOADED,this.onLevelLoaded,this),r.on(R.Events.ERROR,this.onError,this)},d.unregisterListeners=function(){var r=this.hls;r.off(R.Events.FRAG_LOADING,this.onFragLoading,this),r.off(R.Events.FRAG_LOADED,this.onFragLoaded,this),r.off(R.Events.FRAG_BUFFERED,this.onFragBuffered,this),r.off(R.Events.LEVEL_LOADED,this.onLevelLoaded,this),r.off(R.Events.ERROR,this.onError,this)},d.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},d.onFragLoading=function(r,t){var u,m=t.frag;m.type===T.PlaylistLevelType.MAIN&&(this.timer||(this.fragCurrent=m,this.partCurrent=(u=t.part)!=null?u:null,this.timer=self.setInterval(this.onCheck,100)))},d.onLevelLoaded=function(r,t){var u=this.hls.config;t.details.live?this.bwEstimator.update(u.abrEwmaSlowLive,u.abrEwmaFastLive):this.bwEstimator.update(u.abrEwmaSlowVoD,u.abrEwmaFastVoD)},d._abandonRulesCheck=function(){var r=this.fragCurrent,t=this.partCurrent,u=this.hls,m=u.autoLevelEnabled,S=u.config,A=u.media;if(r&&A){var _=t?t.stats:r.stats,v=t?t.duration:r.duration;if(_.aborted)return l.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(m&&!A.paused&&A.playbackRate&&A.readyState){var f=performance.now()-_.loading.start,b=Math.abs(A.playbackRate);if(!(f<=500*v/b)){var p=u.levels,k=u.minAutoLevel,P=p[r.level],j=_.total||Math.max(_.loaded,Math.round(v*P.maxBitrate/8)),U=Math.max(1,_.bwEstimate?_.bwEstimate/8:1e3*_.loaded/f),G=(j-_.loaded)/U,ee=A.currentTime,ne=(I.BufferHelper.bufferInfo(A,ee,S.maxBufferHole).end-ee)/b;if(!(ne>=2*v/b||G<=ne)){var re,oe=Number.POSITIVE_INFINITY;for(re=r.level-1;re>k&&!((oe=v*p[re].maxBitrate/(6.4*U))<ne);re--);if(!(oe>=G)){var W=this.bwEstimator.getEstimate();l.logger.warn("Fragment "+r.sn+(t?" part "+t.index:"")+" of level "+r.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+re+`
      Current BW estimate: `+(Object(N.isFiniteNumber)(W)?(W/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+G.toFixed(3)+` s
      Estimated load time for the next fragment: `+oe.toFixed(3)+` s
      Time to underbuffer: `+ne.toFixed(3)+" s"),u.nextLoadLevel=re,this.bwEstimator.sample(f,_.loaded),this.clearTimer(),r.loader&&(this.fragCurrent=this.partCurrent=null,r.loader.abort()),u.trigger(R.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,part:t,stats:_})}}}}}},d.onFragLoaded=function(r,t){var u=t.frag,m=t.part;if(u.type===T.PlaylistLevelType.MAIN&&Object(N.isFiniteNumber)(u.sn)){var S=m?m.stats:u.stats,A=m?m.duration:u.duration;if(this.clearTimer(),this.lastLoadedFragLevel=u.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var _=this.hls.levels[u.level],v=(_.loaded?_.loaded.bytes:0)+S.loaded,f=(_.loaded?_.loaded.duration:0)+A;_.loaded={bytes:v,duration:f},_.realBitrate=Math.round(8*v/f)}if(u.bitrateTest){var b={stats:S,frag:u,part:m,id:u.type};this.onFragBuffered(R.Events.FRAG_BUFFERED,b),u.bitrateTest=!1}}},d.onFragBuffered=function(r,t){var u=t.frag,m=t.part,S=m?m.stats:u.stats;if(!S.aborted&&u.type===T.PlaylistLevelType.MAIN&&u.sn!=="initSegment"){var A=S.parsing.end-S.loading.start;this.bwEstimator.sample(A,S.loaded),S.bwEstimate=this.bwEstimator.getEstimate(),u.bitrateTest?this.bitrateTestDelay=A/1e3:this.bitrateTestDelay=0}},d.onError=function(r,t){switch(t.details){case E.ErrorDetails.FRAG_LOAD_ERROR:case E.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},d.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},d.getNextABRAutoLevel=function(){var r=this.fragCurrent,t=this.partCurrent,u=this.hls,m=u.maxAutoLevel,S=u.config,A=u.minAutoLevel,_=u.media,v=t?t.duration:r?r.duration:0,f=_?_.currentTime:0,b=_&&_.playbackRate!==0?Math.abs(_.playbackRate):1,p=this.bwEstimator?this.bwEstimator.getEstimate():S.abrEwmaDefaultEstimate,k=(I.BufferHelper.bufferInfo(_,f,S.maxBufferHole).end-f)/b,P=this.findBestLevel(p,A,m,k,S.abrBandWidthFactor,S.abrBandWidthUpFactor);if(P>=0)return P;l.logger.trace((k?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var j=v?Math.min(v,S.maxStarvationDelay):S.maxStarvationDelay,U=S.abrBandWidthFactor,G=S.abrBandWidthUpFactor;if(!k){var ee=this.bitrateTestDelay;ee&&(j=(v?Math.min(v,S.maxLoadingDelay):S.maxLoadingDelay)-ee,l.logger.trace("bitrate test took "+Math.round(1e3*ee)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*j)+" ms"),U=G=1)}return P=this.findBestLevel(p,A,m,k+j,U,G),Math.max(P,0)},d.findBestLevel=function(r,t,u,m,S,A){for(var _,v=this.fragCurrent,f=this.partCurrent,b=this.lastLoadedFragLevel,p=this.hls.levels,k=p[b],P=!(k==null||(_=k.details)===null||_===void 0||!_.live),j=k==null?void 0:k.codecSet,U=f?f.duration:v?v.duration:0,G=u;G>=t;G--){var ee=p[G];if(ee&&(!j||ee.codecSet===j)){var ne,re=ee.details,oe=(f?re==null?void 0:re.partTarget:re==null?void 0:re.averagetargetduration)||U;ne=G<=b?S*r:A*r;var W=p[G].maxBitrate,Te=W*oe/ne;if(l.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+G+"/"+Math.round(ne)+"/"+W+"/"+oe+"/"+m+"/"+Te),ne>W&&(!Te||P&&!this.bitrateTestDelay||Te<m))return G}}return-1},i=y,(g=[{key:"nextAutoLevel",get:function(){var r=this._nextAutoLevel,t=this.bwEstimator;if(!(r===-1||t&&t.canEstimate()))return r;var u=this.getNextABRAutoLevel();return r!==-1&&(u=Math.min(r,u)),u},set:function(r){this._nextAutoLevel=r}}])&&c(i.prototype,g),y}();M.default=h},"./src/controller/audio-stream-controller.ts":function(K,M,x){x.r(M);var N=x("./src/polyfills/number.ts"),C=x("./src/controller/base-stream-controller.ts"),R=x("./src/events.ts"),I=x("./src/utils/buffer-helper.ts"),E=x("./src/controller/fragment-tracker.ts"),T=x("./src/types/level.ts"),l=x("./src/types/loader.ts"),c=x("./src/loader/fragment.ts"),h=x("./src/demux/chunk-cache.ts"),y=x("./src/demux/transmuxer-interface.ts"),i=x("./src/types/transmuxer.ts"),g=x("./src/controller/fragment-finders.ts"),d=x("./src/utils/discontinuities.ts"),r=x("./src/errors.ts"),t=x("./src/utils/logger.ts");function u(){return u=Object.assign||function(A){for(var _=1;_<arguments.length;_++){var v=arguments[_];for(var f in v)Object.prototype.hasOwnProperty.call(v,f)&&(A[f]=v[f])}return A},u.apply(this,arguments)}function m(A,_){return m=Object.setPrototypeOf||function(v,f){return v.__proto__=f,v},m(A,_)}var S=function(A){var _,v;function f(p,k){var P;return(P=A.call(this,p,k,"[audio-stream-controller]")||this).videoBuffer=null,P.videoTrackCC=-1,P.waitingVideoCC=-1,P.audioSwitch=!1,P.trackId=-1,P.waitingData=null,P.mainDetails=null,P.bufferFlushed=!1,P._registerListeners(),P}v=A,(_=f).prototype=Object.create(v.prototype),_.prototype.constructor=_,m(_,v);var b=f.prototype;return b.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},b._registerListeners=function(){var p=this.hls;p.on(R.Events.MEDIA_ATTACHED,this.onMediaAttached,this),p.on(R.Events.MEDIA_DETACHING,this.onMediaDetaching,this),p.on(R.Events.MANIFEST_LOADING,this.onManifestLoading,this),p.on(R.Events.LEVEL_LOADED,this.onLevelLoaded,this),p.on(R.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),p.on(R.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),p.on(R.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),p.on(R.Events.ERROR,this.onError,this),p.on(R.Events.BUFFER_RESET,this.onBufferReset,this),p.on(R.Events.BUFFER_CREATED,this.onBufferCreated,this),p.on(R.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),p.on(R.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),p.on(R.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b._unregisterListeners=function(){var p=this.hls;p.off(R.Events.MEDIA_ATTACHED,this.onMediaAttached,this),p.off(R.Events.MEDIA_DETACHING,this.onMediaDetaching,this),p.off(R.Events.MANIFEST_LOADING,this.onManifestLoading,this),p.off(R.Events.LEVEL_LOADED,this.onLevelLoaded,this),p.off(R.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),p.off(R.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),p.off(R.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),p.off(R.Events.ERROR,this.onError,this),p.off(R.Events.BUFFER_RESET,this.onBufferReset,this),p.off(R.Events.BUFFER_CREATED,this.onBufferCreated,this),p.off(R.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),p.off(R.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),p.off(R.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b.onInitPtsFound=function(p,k){var P=k.frag,j=k.id,U=k.initPTS;if(j==="main"){var G=P.cc;this.initPTS[P.cc]=U,this.log("InitPTS for cc: "+G+" found from main: "+U),this.videoTrackCC=G,this.state===C.State.WAITING_INIT_PTS&&this.tick()}},b.startLoad=function(p){if(!this.levels)return this.startPosition=p,void(this.state=C.State.STOPPED);var k=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,k>0&&p===-1?(this.log("Override startPosition with lastCurrentTime @"+k.toFixed(3)),this.state=C.State.IDLE):(this.loadedmetadata=!1,this.state=C.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=p,this.tick()},b.doTick=function(){switch(this.state){case C.State.IDLE:this.doTickIdle();break;case C.State.WAITING_TRACK:var p,k=this.levels,P=this.trackId,j=k==null||(p=k[P])===null||p===void 0?void 0:p.details;if(j){if(this.waitForCdnTuneIn(j))break;this.state=C.State.WAITING_INIT_PTS}break;case C.State.FRAG_LOADING_WAITING_RETRY:var U,G=performance.now(),ee=this.retryDate;(!ee||G>=ee||(U=this.media)!==null&&U!==void 0&&U.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=C.State.IDLE);break;case C.State.WAITING_INIT_PTS:var ne=this.waitingData;if(ne){var re=ne.frag,oe=ne.part,W=ne.cache,Te=ne.complete;if(this.initPTS[re.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=C.State.FRAG_LOADING;var Ue={frag:re,part:oe,payload:W.flush(),networkDetails:null};this._handleFragmentLoadProgress(Ue),Te&&A.prototype._handleFragmentLoadComplete.call(this,Ue)}else if(this.videoTrackCC!==this.waitingVideoCC)t.logger.log("Waiting fragment cc ("+re.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var ze=this.getLoadPosition(),le=I.BufferHelper.bufferInfo(this.mediaBuffer,ze,this.config.maxBufferHole);Object(g.fragmentWithinToleranceTest)(le.end,this.config.maxFragLookUpTolerance,re)<0&&(t.logger.log("Waiting fragment cc ("+re.cc+") @ "+re.start+" cancelled because another fragment at "+le.end+" is needed"),this.clearWaitingFragment())}}else this.state=C.State.IDLE}this.onTickEnd()},b.clearWaitingFragment=function(){var p=this.waitingData;p&&(this.fragmentTracker.removeFragment(p.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=C.State.IDLE)},b.onTickEnd=function(){var p=this.media;if(p&&p.readyState){var k=(this.mediaBuffer?this.mediaBuffer:p).buffered;!this.loadedmetadata&&k.length&&(this.loadedmetadata=!0),this.lastCurrentTime=p.currentTime}},b.doTickIdle=function(){var p,k,P=this.hls,j=this.levels,U=this.media,G=this.trackId,ee=P.config;if(j&&j[G]&&(U||!this.startFragRequested&&ee.startFragPrefetch)){var ne=j[G].details;if(!ne||ne.live&&this.levelLastLoaded!==G||this.waitForCdnTuneIn(ne))this.state=C.State.WAITING_TRACK;else{this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,c.ElementaryStreamTypes.AUDIO,l.PlaylistLevelType.AUDIO));var re=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,l.PlaylistLevelType.AUDIO);if(re!==null){var oe=re.len,W=this.getMaxBufferLength(),Te=this.audioSwitch;if(!(oe>=W)||Te){if(!Te&&this._streamEnded(re,ne))return P.trigger(R.Events.BUFFER_EOS,{type:"audio"}),void(this.state=C.State.ENDED);var Ue=ne.fragments[0].start,ze=re.end;if(Te){var le=this.getLoadPosition();ze=le,ne.PTSKnown&&le<Ue&&(re.end>Ue||re.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),U.currentTime=Ue+.05)}var Se=this.getNextFragment(ze,ne);Se?((p=Se.decryptdata)===null||p===void 0?void 0:p.keyFormat)!=="identity"||(k=Se.decryptdata)!==null&&k!==void 0&&k.key?this.loadFragment(Se,ne,ze):this.loadKey(Se,ne):this.bufferFlushed=!0}}}}},b.getMaxBufferLength=function(){var p=A.prototype.getMaxBufferLength.call(this),k=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,l.PlaylistLevelType.MAIN);return k===null?p:Math.max(p,k.len)},b.onMediaDetaching=function(){this.videoBuffer=null,A.prototype.onMediaDetaching.call(this)},b.onAudioTracksUpdated=function(p,k){var P=k.audioTracks;this.resetTransmuxer(),this.levels=P.map(function(j){return new T.Level(j)})},b.onAudioTrackSwitching=function(p,k){var P=!!k.url;this.trackId=k.id;var j=this.fragCurrent;j!=null&&j.loader&&j.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),P?this.setInterval(100):this.resetTransmuxer(),P?(this.audioSwitch=!0,this.state=C.State.IDLE):this.state=C.State.STOPPED,this.tick()},b.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},b.onLevelLoaded=function(p,k){this.mainDetails=k.details},b.onAudioTrackLoaded=function(p,k){var P,j=this.levels,U=k.details,G=k.id;if(j){this.log("Track "+G+" loaded ["+U.startSN+","+U.endSN+"],duration:"+U.totalduration);var ee=j[G],ne=0;if(U.live||(P=ee.details)!==null&&P!==void 0&&P.live){var re=this.mainDetails;if(U.fragments[0]||(U.deltaUpdateFailed=!0),U.deltaUpdateFailed||!re)return;!ee.details&&U.hasProgramDateTime&&re.hasProgramDateTime?(Object(d.alignMediaPlaylistByPDT)(U,re),ne=U.fragments[0].start):ne=this.alignPlaylists(U,ee.details)}ee.details=U,this.levelLastLoaded=G,this.startFragRequested||!this.mainDetails&&U.live||this.setStartPosition(ee.details,ne),this.state!==C.State.WAITING_TRACK||this.waitForCdnTuneIn(U)||(this.state=C.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+G)},b._handleFragmentLoadProgress=function(p){var k,P=p.frag,j=p.part,U=p.payload,G=this.config,ee=this.trackId,ne=this.levels;if(ne){var re=ne[ee];console.assert(re,"Audio track is defined on fragment load progress");var oe=re.details;console.assert(oe,"Audio track details are defined on fragment load progress");var W=G.defaultAudioCodec||re.audioCodec||"mp4a.40.2",Te=this.transmuxer;Te||(Te=this.transmuxer=new y.default(this.hls,l.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var Ue=this.initPTS[P.cc],ze=(k=P.initSegment)===null||k===void 0?void 0:k.data;if(Ue!==void 0){var le=j?j.index:-1,Se=le!==-1,be=new i.ChunkMetadata(P.level,P.sn,P.stats.chunkCount,U.byteLength,le,Se);Te.push(U,ze,W,"",P,j,oe.totalduration,!1,be,Ue)}else t.logger.log("Unknown video PTS for cc "+P.cc+", waiting for video PTS before demuxing audio frag "+P.sn+" of ["+oe.startSN+" ,"+oe.endSN+"],track "+ee),(this.waitingData=this.waitingData||{frag:P,part:j,cache:new h.default,complete:!1}).cache.push(new Uint8Array(U)),this.waitingVideoCC=this.videoTrackCC,this.state=C.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+P.sn+" of level "+P.level+" will not be buffered")},b._handleFragmentLoadComplete=function(p){this.waitingData?this.waitingData.complete=!0:A.prototype._handleFragmentLoadComplete.call(this,p)},b.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},b.onBufferCreated=function(p,k){var P=k.tracks.audio;P&&(this.mediaBuffer=P.buffer),k.tracks.video&&(this.videoBuffer=k.tracks.video.buffer)},b.onFragBuffered=function(p,k){var P=k.frag,j=k.part;P.type===l.PlaylistLevelType.AUDIO&&(this.fragContextChanged(P)?this.warn("Fragment "+P.sn+(j?" p: "+j.index:"")+" of level "+P.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):(P.sn!=="initSegment"&&(this.fragPrevious=P,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(R.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(P,j)))},b.onError=function(p,k){switch(k.details){case r.ErrorDetails.FRAG_LOAD_ERROR:case r.ErrorDetails.FRAG_LOAD_TIMEOUT:case r.ErrorDetails.KEY_LOAD_ERROR:case r.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(l.PlaylistLevelType.AUDIO,k);break;case r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==C.State.ERROR&&this.state!==C.State.STOPPED&&(this.state=k.fatal?C.State.ERROR:C.State.IDLE,this.warn(k.details+" while loading frag, switching to "+this.state+" state"));break;case r.ErrorDetails.BUFFER_FULL_ERROR:if(k.parent==="audio"&&(this.state===C.State.PARSING||this.state===C.State.PARSED)){var P=!0,j=this.getFwdBufferInfo(this.mediaBuffer,l.PlaylistLevelType.AUDIO);j&&j.len>.5&&(P=!this.reduceMaxBufferLength(j.len)),P&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,A.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},b.onBufferFlushed=function(p,k){k.type===c.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},b._handleTransmuxComplete=function(p){var k,P="audio",j=this.hls,U=p.remuxResult,G=p.chunkMeta,ee=this.getCurrentContext(G);if(!ee)return this.warn("The loading context changed while buffering fragment "+G.sn+" of level "+G.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(G.level);var ne=ee.frag,re=ee.part,oe=U.audio,W=U.text,Te=U.id3,Ue=U.initSegment;if(!this.fragContextChanged(ne)){if(this.state=C.State.PARSING,this.audioSwitch&&oe&&this.completeAudioSwitch(),Ue!=null&&Ue.tracks&&(this._bufferInitSegment(Ue.tracks,ne,G),j.trigger(R.Events.FRAG_PARSING_INIT_SEGMENT,{frag:ne,id:P,tracks:Ue.tracks})),oe){var ze=oe.startPTS,le=oe.endPTS,Se=oe.startDTS,be=oe.endDTS;re&&(re.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:ze,endPTS:le,startDTS:Se,endDTS:be}),ne.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,ze,le,Se,be),this.bufferFragmentData(oe,ne,re,G)}if(Te!=null&&(k=Te.samples)!==null&&k!==void 0&&k.length){var Y=u({frag:ne,id:P},Te);j.trigger(R.Events.FRAG_PARSING_METADATA,Y)}if(W){var Q=u({frag:ne,id:P},W);j.trigger(R.Events.FRAG_PARSING_USERDATA,Q)}}},b._bufferInitSegment=function(p,k,P){if(this.state===C.State.PARSING){p.video&&delete p.video;var j=p.audio;if(j){j.levelCodec=j.codec,j.id="audio",this.log("Init audio buffer, container:"+j.container+", codecs[parsed]=["+j.codec+"]"),this.hls.trigger(R.Events.BUFFER_CODECS,p);var U=j.initSegment;if(U!=null&&U.byteLength){var G={type:"audio",frag:k,part:null,chunkMeta:P,parent:k.type,data:U};this.hls.trigger(R.Events.BUFFER_APPENDING,G)}this.tick()}}},b.loadFragment=function(p,k,P){var j=this.fragmentTracker.getState(p);this.fragCurrent=p,(this.audioSwitch||j===E.FragmentState.NOT_LOADED||j===E.FragmentState.PARTIAL)&&(p.sn==="initSegment"?this._loadInitSegment(p):k.live&&!Object(N.isFiniteNumber)(this.initPTS[p.cc])?(this.log("Waiting for video PTS in continuity counter "+p.cc+" of live stream before loading audio fragment "+p.sn+" of level "+this.trackId),this.state=C.State.WAITING_INIT_PTS):(this.startFragRequested=!0,A.prototype.loadFragment.call(this,p,k,P)))},b.completeAudioSwitch=function(){var p=this.hls,k=this.media,P=this.trackId;k&&(this.log("Switching audio track : flushing all audio"),A.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,p.trigger(R.Events.AUDIO_TRACK_SWITCHED,{id:P})},f}(C.default);M.default=S},"./src/controller/audio-track-controller.ts":function(K,M,x){x.r(M);var N=x("./src/events.ts"),C=x("./src/errors.ts"),R=x("./src/controller/base-playlist-controller.ts"),I=x("./src/types/loader.ts");function E(c,h){for(var y=0;y<h.length;y++){var i=h[y];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(c,i.key,i)}}function T(c,h){return T=Object.setPrototypeOf||function(y,i){return y.__proto__=i,y},T(c,h)}var l=function(c){var h,y;function i(t){var u;return(u=c.call(this,t,"[audio-track-controller]")||this).tracks=[],u.groupId=null,u.tracksInGroup=[],u.trackId=-1,u.trackName="",u.selectDefaultTrack=!0,u.registerListeners(),u}y=c,(h=i).prototype=Object.create(y.prototype),h.prototype.constructor=h,T(h,y);var g,d,r=i.prototype;return r.registerListeners=function(){var t=this.hls;t.on(N.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(N.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(N.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(N.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(N.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(N.Events.ERROR,this.onError,this)},r.unregisterListeners=function(){var t=this.hls;t.off(N.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(N.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(N.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(N.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(N.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(N.Events.ERROR,this.onError,this)},r.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,c.prototype.destroy.call(this)},r.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},r.onManifestParsed=function(t,u){this.tracks=u.audioTracks||[]},r.onAudioTrackLoaded=function(t,u){var m=u.id,S=u.details,A=this.tracksInGroup[m];if(A){var _=A.details;A.details=u.details,this.log("audioTrack "+m+" loaded ["+S.startSN+"-"+S.endSN+"]"),m===this.trackId&&(this.retryCount=0,this.playlistLoaded(m,u,_))}else this.warn("Invalid audio track id "+m)},r.onLevelLoading=function(t,u){this.switchLevel(u.level)},r.onLevelSwitching=function(t,u){this.switchLevel(u.level)},r.switchLevel=function(t){var u=this.hls.levels[t];if(u!=null&&u.audioGroupIds){var m=u.audioGroupIds[u.urlId];if(this.groupId!==m){this.groupId=m;var S=this.tracks.filter(function(_){return!m||_.groupId===m});this.selectDefaultTrack&&!S.some(function(_){return _.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=S;var A={audioTracks:S};this.log("Updating audio tracks, "+S.length+' track(s) found in "'+m+'" group-id'),this.hls.trigger(N.Events.AUDIO_TRACKS_UPDATED,A),this.selectInitialTrack()}}},r.onError=function(t,u){c.prototype.onError.call(this,t,u),!u.fatal&&u.context&&u.context.type===I.PlaylistContextType.AUDIO_TRACK&&u.context.id===this.trackId&&u.context.groupId===this.groupId&&this.retryLoadingOrFail(u)},r.setAudioTrack=function(t){var u=this.tracksInGroup;if(t<0||t>=u.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var m=u[this.trackId];this.log("Now switching to audio-track index "+t);var S=u[t],A=S.id,_=S.groupId,v=_===void 0?"":_,f=S.name,b=S.type,p=S.url;if(this.trackId=t,this.trackName=f,this.selectDefaultTrack=!1,this.hls.trigger(N.Events.AUDIO_TRACK_SWITCHING,{id:A,groupId:v,name:f,type:b,url:p}),!S.details||S.details.live){var k=this.switchParams(S.url,m==null?void 0:m.details);this.loadPlaylist(k)}}},r.selectInitialTrack=function(){var t=this.tracksInGroup;console.assert(t.length,"Initial audio track should be selected when tracks are known");var u=this.trackName,m=this.findTrackId(u)||this.findTrackId();m!==-1?this.setAudioTrack(m):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(N.Events.ERROR,{type:C.ErrorTypes.MEDIA_ERROR,details:C.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},r.findTrackId=function(t){for(var u=this.tracksInGroup,m=0;m<u.length;m++){var S=u[m];if((!this.selectDefaultTrack||S.default)&&(!t||t===S.name))return S.id}return-1},r.loadPlaylist=function(t){var u=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(u)){var m=u.id,S=u.groupId,A=u.url;if(t)try{A=t.addDirectives(A)}catch(_){this.warn("Could not construct new URL with HLS Delivery Directives: "+_)}this.log("loading audio-track playlist for id: "+m),this.clearTimer(),this.hls.trigger(N.Events.AUDIO_TRACK_LOADING,{url:A,id:m,groupId:S,deliveryDirectives:t||null})}},g=i,(d=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}}])&&E(g.prototype,d),i}(R.default);M.default=l},"./src/controller/base-playlist-controller.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return T});var N=x("./src/polyfills/number.ts"),C=x("./src/types/level.ts"),R=x("./src/controller/level-helper.ts"),I=x("./src/utils/logger.ts"),E=x("./src/errors.ts"),T=function(){function l(h,y){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=I.logger.log.bind(I.logger,y+":"),this.warn=I.logger.warn.bind(I.logger,y+":"),this.hls=h}var c=l.prototype;return c.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},c.onError=function(h,y){y.fatal&&y.type===E.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},c.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},c.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},c.stopLoad=function(){this.canLoad=!1,this.clearTimer()},c.switchParams=function(h,y){var i=y==null?void 0:y.renditionReports;if(i)for(var g=0;g<i.length;g++){var d=i[g],r=""+d.URI;if(r===h.substr(-r.length)){var t=parseInt(d["LAST-MSN"]),u=parseInt(d["LAST-PART"]);if(y&&this.hls.config.lowLatencyMode){var m=Math.min(y.age-y.partTarget,y.targetduration);u!==void 0&&m>y.partTarget&&(u+=1)}if(Object(N.isFiniteNumber)(t))return new C.HlsUrlParameters(t,Object(N.isFiniteNumber)(u)?u:void 0,C.HlsSkip.No)}}},c.loadPlaylist=function(h){},c.shouldLoadTrack=function(h){return this.canLoad&&h&&!!h.url&&(!h.details||h.details.live)},c.playlistLoaded=function(h,y,i){var g=this,d=y.details,r=y.stats,t=r.loading.end?Math.max(0,self.performance.now()-r.loading.end):0;if(d.advancedDateTime=Date.now()-t,d.live||i!=null&&i.live){if(d.reloaded(i),i&&this.log("live playlist "+h+" "+(d.advanced?"REFRESHED "+d.lastPartSn+"-"+d.lastPartIndex:"MISSED")),i&&d.fragments.length>0&&Object(R.mergeDetails)(i,d),!this.canLoad||!d.live)return;var u,m=void 0,S=void 0;if(d.canBlockReload&&d.endSN&&d.advanced){var A=this.hls.config.lowLatencyMode,_=d.lastPartSn,v=d.endSN,f=d.lastPartIndex,b=_===v;f!==-1?(m=b?v+1:_,S=b?A?0:f:f+1):m=v+1;var p=d.age,k=p+d.ageHeader,P=Math.min(k-d.partTarget,1.5*d.targetduration);if(P>0){if(i&&P>i.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+i.tuneInGoal+" to: "+P+" with playlist age: "+d.age),P=0;else{var j=Math.floor(P/d.targetduration);m+=j,S!==void 0&&(S+=Math.round(P%d.targetduration/d.partTarget)),this.log("CDN Tune-in age: "+d.ageHeader+"s last advanced "+p.toFixed(2)+"s goal: "+P+" skip sn "+j+" to part "+S)}d.tuneInGoal=P}if(u=this.getDeliveryDirectives(d,y.deliveryDirectives,m,S),A||!b)return void this.loadPlaylist(u)}else u=this.getDeliveryDirectives(d,y.deliveryDirectives,m,S);var U=Object(R.computeReloadInterval)(d,r);m!==void 0&&d.canBlockReload&&(U-=d.partTarget||1),this.log("reload live playlist "+h+" in "+Math.round(U)+" ms"),this.timer=self.setTimeout(function(){return g.loadPlaylist(u)},U)}else this.clearTimer()},c.getDeliveryDirectives=function(h,y,i,g){var d=Object(C.getSkipValue)(h,i);return y!=null&&y.skip&&h.deltaUpdateFailed&&(i=y.msn,g=y.part,d=C.HlsSkip.No),new C.HlsUrlParameters(i,g,d)},c.retryLoadingOrFail=function(h){var y,i=this,g=this.hls.config,d=this.retryCount<g.levelLoadingMaxRetry;if(d)if(this.retryCount++,h.details.indexOf("LoadTimeOut")>-1&&(y=h.context)!==null&&y!==void 0&&y.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+h.details+'"'),this.loadPlaylist();else{var r=Math.min(Math.pow(2,this.retryCount)*g.levelLoadingRetryDelay,g.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return i.loadPlaylist()},r),this.warn("retry playlist loading #"+this.retryCount+" in "+r+' ms after "'+h.details+'"')}else this.warn('cannot recover from error "'+h.details+'"'),this.clearTimer(),h.fatal=!0;return d},l}()},"./src/controller/base-stream-controller.ts":function(K,M,x){x.r(M),x.d(M,"State",function(){return A}),x.d(M,"default",function(){return _});var N=x("./src/polyfills/number.ts"),C=x("./src/task-loop.ts"),R=x("./src/controller/fragment-tracker.ts"),I=x("./src/utils/buffer-helper.ts"),E=x("./src/utils/logger.ts"),T=x("./src/events.ts"),l=x("./src/errors.ts"),c=x("./src/types/transmuxer.ts"),h=x("./src/utils/mp4-tools.ts"),y=x("./src/utils/discontinuities.ts"),i=x("./src/controller/fragment-finders.ts"),g=x("./src/controller/level-helper.ts"),d=x("./src/loader/fragment-loader.ts"),r=x("./src/crypt/decrypter.ts"),t=x("./src/utils/time-ranges.ts"),u=x("./src/types/loader.ts");function m(v,f){for(var b=0;b<f.length;b++){var p=f[b];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(v,p.key,p)}}function S(v,f){return S=Object.setPrototypeOf||function(b,p){return b.__proto__=p,b},S(v,f)}var A={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BACKTRACKING:"BACKTRACKING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},_=function(v){var f,b;function p(U,G,ee){var ne;return(ne=v.call(this)||this).hls=void 0,ne.fragPrevious=null,ne.fragCurrent=null,ne.fragmentTracker=void 0,ne.transmuxer=null,ne._state=A.STOPPED,ne.media=void 0,ne.mediaBuffer=void 0,ne.config=void 0,ne.bitrateTest=!1,ne.lastCurrentTime=0,ne.nextLoadPosition=0,ne.startPosition=0,ne.loadedmetadata=!1,ne.fragLoadError=0,ne.retryDate=0,ne.levels=null,ne.fragmentLoader=void 0,ne.levelLastLoaded=null,ne.startFragRequested=!1,ne.decrypter=void 0,ne.initPTS=[],ne.onvseeking=null,ne.onvended=null,ne.logPrefix="",ne.log=void 0,ne.warn=void 0,ne.logPrefix=ee,ne.log=E.logger.log.bind(E.logger,ee+":"),ne.warn=E.logger.warn.bind(E.logger,ee+":"),ne.hls=U,ne.fragmentLoader=new d.default(U.config),ne.fragmentTracker=G,ne.config=U.config,ne.decrypter=new r.default(U,U.config),U.on(T.Events.KEY_LOADED,ne.onKeyLoaded,function(re){if(re===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re}(ne)),ne}b=v,(f=p).prototype=Object.create(b.prototype),f.prototype.constructor=f,S(f,b);var k,P,j=p.prototype;return j.doTick=function(){this.onTickEnd()},j.onTickEnd=function(){},j.startLoad=function(U){},j.stopLoad=function(){this.fragmentLoader.abort();var U=this.fragCurrent;U&&this.fragmentTracker.removeFragment(U),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=A.STOPPED},j._streamEnded=function(U,G){var ee=this.fragCurrent,ne=this.fragmentTracker;if(!G.live&&ee&&ee.sn>=G.endSN&&!U.nextStart){var re=G.partList;if(re!=null&&re.length){var oe=re[re.length-1];return I.BufferHelper.isBuffered(this.media,oe.start+oe.duration/2)}var W=ne.getState(ee);return W===R.FragmentState.PARTIAL||W===R.FragmentState.OK}return!1},j.onMediaAttached=function(U,G){var ee=this.media=this.mediaBuffer=G.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),ee.addEventListener("seeking",this.onvseeking),ee.addEventListener("ended",this.onvended);var ne=this.config;this.levels&&ne.autoStartLoad&&this.state===A.STOPPED&&this.startLoad(ne.startPosition)},j.onMediaDetaching=function(){var U=this.media;U!=null&&U.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),U&&(U.removeEventListener("seeking",this.onvseeking),U.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},j.onMediaSeeking=function(){var U=this.config,G=this.fragCurrent,ee=this.media,ne=this.mediaBuffer,re=this.state,oe=ee?ee.currentTime:0,W=I.BufferHelper.bufferInfo(ne||ee,oe,U.maxBufferHole);if(this.log("media seeking to "+(Object(N.isFiniteNumber)(oe)?oe.toFixed(3):oe)+", state: "+re),re===A.ENDED)this.resetLoadingState();else if(G&&!W.len){var Te=U.maxFragLookUpTolerance,Ue=G.start-Te,ze=oe>G.start+G.duration+Te;(oe<Ue||ze)&&(ze&&G.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),G.loader.abort()),this.resetLoadingState())}ee&&(this.lastCurrentTime=oe),this.loadedmetadata||W.len||(this.nextLoadPosition=this.startPosition=oe),this.tickImmediate()},j.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},j.onKeyLoaded=function(U,G){if(this.state===A.KEY_LOADING&&G.frag===this.fragCurrent&&this.levels){this.state=A.IDLE;var ee=this.levels[G.frag.level].details;ee&&this.loadFragment(G.frag,ee,G.frag.start)}},j.onHandlerDestroying=function(){this.stopLoad(),v.prototype.onHandlerDestroying.call(this)},j.onHandlerDestroyed=function(){this.state=A.STOPPED,this.hls.off(T.Events.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,v.prototype.onHandlerDestroyed.call(this)},j.loadKey=function(U,G){this.log("Loading key for "+U.sn+" of ["+G.startSN+"-"+G.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+U.level),this.state=A.KEY_LOADING,this.fragCurrent=U,this.hls.trigger(T.Events.KEY_LOADING,{frag:U})},j.loadFragment=function(U,G,ee){this._loadFragForPlayback(U,G,ee)},j._loadFragForPlayback=function(U,G,ee){var ne=this;this._doFragLoad(U,G,ee,function(re){if(ne.fragContextChanged(U))return ne.warn("Fragment "+U.sn+(re.part?" p: "+re.part.index:"")+" of level "+U.level+" was dropped during download."),void ne.fragmentTracker.removeFragment(U);U.stats.chunkCount++,ne._handleFragmentLoadProgress(re)}).then(function(re){if(re){ne.fragLoadError=0;var oe=ne.state;if(!ne.fragContextChanged(U))return"payload"in re&&(ne.log("Loaded fragment "+U.sn+" of level "+U.level),ne.hls.trigger(T.Events.FRAG_LOADED,re),ne.state===A.BACKTRACKING)?(ne.fragmentTracker.backtrack(U,re),void ne.resetFragmentLoading(U)):void ne._handleFragmentLoadComplete(re);(oe===A.FRAG_LOADING||oe===A.BACKTRACKING||!ne.fragCurrent&&oe===A.PARSING)&&(ne.fragmentTracker.removeFragment(U),ne.state=A.IDLE)}}).catch(function(re){ne.warn(re),ne.resetFragmentLoading(U)})},j.flushMainBuffer=function(U,G,ee){if(ee===void 0&&(ee=null),U-G){var ne={startOffset:U,endOffset:G,type:ee};this.fragLoadError=0,this.hls.trigger(T.Events.BUFFER_FLUSHING,ne)}},j._loadInitSegment=function(U){var G=this;this._doFragLoad(U).then(function(ee){if(!ee||G.fragContextChanged(U)||!G.levels)throw new Error("init load aborted");return ee}).then(function(ee){var ne=G.hls,re=ee.payload,oe=U.decryptdata;if(re&&re.byteLength>0&&oe&&oe.key&&oe.iv&&oe.method==="AES-128"){var W=self.performance.now();return G.decrypter.webCryptoDecrypt(new Uint8Array(re),oe.key.buffer,oe.iv.buffer).then(function(Te){var Ue=self.performance.now();return ne.trigger(T.Events.FRAG_DECRYPTED,{frag:U,payload:Te,stats:{tstart:W,tdecrypt:Ue}}),ee.payload=Te,ee})}return ee}).then(function(ee){var ne=G.fragCurrent,re=G.hls,oe=G.levels;if(!oe)throw new Error("init load aborted, missing levels");var W=oe[U.level].details;console.assert(W,"Level details are defined when init segment is loaded");var Te=U.stats;G.state=A.IDLE,G.fragLoadError=0,U.data=new Uint8Array(ee.payload),Te.parsing.start=Te.buffering.start=self.performance.now(),Te.parsing.end=Te.buffering.end=self.performance.now(),ee.frag===ne&&re.trigger(T.Events.FRAG_BUFFERED,{stats:Te,frag:ne,part:null,id:U.type}),G.tick()}).catch(function(ee){G.warn(ee),G.resetFragmentLoading(U)})},j.fragContextChanged=function(U){var G=this.fragCurrent;return!U||!G||U.level!==G.level||U.sn!==G.sn||U.urlId!==G.urlId},j.fragBufferedComplete=function(U,G){var ee=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+U.type+" sn: "+U.sn+(G?" part: "+G.index:"")+" of "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+U.level+" "+t.default.toString(I.BufferHelper.getBuffered(ee))),this.state=A.IDLE,this.tick()},j._handleFragmentLoadComplete=function(U){var G=this.transmuxer;if(G){var ee=U.frag,ne=U.part,re=U.partsLoaded,oe=!re||re.length===0||re.some(function(Te){return!Te}),W=new c.ChunkMetadata(ee.level,ee.sn,ee.stats.chunkCount+1,0,ne?ne.index:-1,!oe);G.flush(W)}},j._handleFragmentLoadProgress=function(U){},j._doFragLoad=function(U,G,ee,ne){var re=this;if(ee===void 0&&(ee=null),!this.levels)throw new Error("frag load aborted, missing levels");if(ee=Math.max(U.start,ee||0),this.config.lowLatencyMode&&G){var oe=G.partList;if(oe&&ne){ee>U.end&&G.fragmentHint&&(U=G.fragmentHint);var W=this.getNextPart(oe,U,ee);if(W>-1){var Te=oe[W];return this.log("Loading part sn: "+U.sn+" p: "+Te.index+" cc: "+U.cc+" of playlist ["+G.startSN+"-"+G.endSN+"] parts [0-"+W+"-"+(oe.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+U.level+", target: "+parseFloat(ee.toFixed(3))),this.nextLoadPosition=Te.start+Te.duration,this.state=A.FRAG_LOADING,this.hls.trigger(T.Events.FRAG_LOADING,{frag:U,part:oe[W],targetBufferTime:ee}),this.doFragPartsLoad(U,oe,W,ne).catch(function(Ue){return re.handleFragLoadError(Ue)})}if(!U.url||this.loadedEndOfParts(oe,ee))return Promise.resolve(null)}}return this.log("Loading fragment "+U.sn+" cc: "+U.cc+" "+(G?"of ["+G.startSN+"-"+G.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+U.level+", target: "+parseFloat(ee.toFixed(3))),Object(N.isFiniteNumber)(U.sn)&&!this.bitrateTest&&(this.nextLoadPosition=U.start+U.duration),this.state=A.FRAG_LOADING,this.hls.trigger(T.Events.FRAG_LOADING,{frag:U,targetBufferTime:ee}),this.fragmentLoader.load(U,ne).catch(function(Ue){return re.handleFragLoadError(Ue)})},j.doFragPartsLoad=function(U,G,ee,ne){var re=this;return new Promise(function(oe,W){var Te=[];(function Ue(ze){var le=G[ze];re.fragmentLoader.loadPart(U,le,ne).then(function(Se){Te[le.index]=Se;var be=Se.part;re.hls.trigger(T.Events.FRAG_LOADED,Se);var Y=G[ze+1];if(!Y||Y.fragment!==U)return oe({frag:U,part:be,partsLoaded:Te});Ue(ze+1)}).catch(W)})(ee)})},j.handleFragLoadError=function(U){var G=U.data;return G&&G.details===l.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(G.frag,G.part):this.hls.trigger(T.Events.ERROR,G),null},j._handleTransmuxerFlush=function(U){var G=this.getCurrentContext(U);if(G&&this.state===A.PARSING){var ee=G.frag,ne=G.part,re=G.level,oe=self.performance.now();ee.stats.parsing.end=oe,ne&&(ne.stats.parsing.end=oe),this.updateLevelTiming(ee,ne,re,U.partial)}else this.fragCurrent||(this.state=A.IDLE)},j.getCurrentContext=function(U){var G=this.levels,ee=U.level,ne=U.sn,re=U.part;if(!G||!G[ee])return this.warn("Levels object was unset while buffering fragment "+ne+" of level "+ee+". The current chunk will not be buffered."),null;var oe=G[ee],W=re>-1?Object(g.getPartWith)(oe,ne,re):null,Te=W?W.fragment:Object(g.getFragmentWithSN)(oe,ne,this.fragCurrent);return Te?{frag:Te,part:W,level:oe}:null},j.bufferFragmentData=function(U,G,ee,ne){if(U&&this.state===A.PARSING){var re=U.data1,oe=U.data2,W=re;if(re&&oe&&(W=Object(h.appendUint8Array)(re,oe)),W&&W.length){var Te={type:U.type,frag:G,part:ee,chunkMeta:ne,parent:G.type,data:W};this.hls.trigger(T.Events.BUFFER_APPENDING,Te),U.dropped&&U.independent&&!ee&&this.flushBufferGap(G)}}},j.flushBufferGap=function(U){var G=this.media;if(G)if(I.BufferHelper.isBuffered(G,G.currentTime)){var ee=G.currentTime,ne=I.BufferHelper.bufferInfo(G,ee,0),re=U.duration,oe=Math.min(2*this.config.maxFragLookUpTolerance,.25*re),W=Math.max(Math.min(U.start-oe,ne.end-oe),ee+oe);U.start-W>oe&&this.flushMainBuffer(W,U.start)}else this.flushMainBuffer(0,U.start)},j.getFwdBufferInfo=function(U,G){var ee=this.config,ne=this.getLoadPosition();if(!Object(N.isFiniteNumber)(ne))return null;var re=I.BufferHelper.bufferInfo(U,ne,ee.maxBufferHole);if(re.len===0&&re.nextStart!==void 0){var oe=this.fragmentTracker.getBufferedFrag(ne,G);if(oe&&re.nextStart<oe.end)return I.BufferHelper.bufferInfo(U,ne,Math.max(re.nextStart,ee.maxBufferHole))}return re},j.getMaxBufferLength=function(U){var G,ee=this.config;return G=U?Math.max(8*ee.maxBufferSize/U,ee.maxBufferLength):ee.maxBufferLength,Math.min(G,ee.maxMaxBufferLength)},j.reduceMaxBufferLength=function(U){var G=this.config,ee=U||G.maxBufferLength;return G.maxMaxBufferLength>=ee&&(G.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+G.maxMaxBufferLength+"s"),!0)},j.getNextFragment=function(U,G){var ee,ne,re=G.fragments,oe=re.length;if(!oe)return null;var W,Te=this.config,Ue=re[0].start;if(G.live){var ze=Te.initialLiveManifestSize;if(oe<ze)return this.warn("Not enough fragments to start playback (have: "+oe+", need: "+ze+")"),null;G.PTSKnown||this.startFragRequested||this.startPosition!==-1||(W=this.getInitialLiveFragment(G,re),this.startPosition=W?this.hls.liveSyncPosition||W.start:U)}else U<=Ue&&(W=re[0]);if(!W){var le=Te.lowLatencyMode?G.partEnd:G.fragmentEnd;W=this.getFragmentAtPosition(U,le,G)}return(ee=W)===null||ee===void 0||!ee.initSegment||(ne=W)!==null&&ne!==void 0&&ne.initSegment.data||this.bitrateTest||(W=W.initSegment),W},j.getNextPart=function(U,G,ee){for(var ne=-1,re=!1,oe=!0,W=0,Te=U.length;W<Te;W++){var Ue=U[W];if(oe=oe&&!Ue.independent,ne>-1&&ee<Ue.start)break;var ze=Ue.loaded;!ze&&(re||Ue.independent||oe)&&Ue.fragment===G&&(ne=W),re=ze}return ne},j.loadedEndOfParts=function(U,G){var ee=U[U.length-1];return ee&&G>ee.start&&ee.loaded},j.getInitialLiveFragment=function(U,G){var ee=this.fragPrevious,ne=null;if(ee){if(U.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+ee.programDateTime),ne=Object(i.findFragmentByPDT)(G,ee.endProgramDateTime,this.config.maxFragLookUpTolerance)),!ne){var re=ee.sn+1;if(re>=U.startSN&&re<=U.endSN){var oe=G[re-U.startSN];ee.cc===oe.cc&&(ne=oe,this.log("Live playlist, switching playlist, load frag with next SN: "+ne.sn))}ne||(ne=Object(i.findFragWithCC)(G,ee.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+ne.sn)}}else{var W=this.hls.liveSyncPosition;W!==null&&(ne=this.getFragmentAtPosition(W,this.bitrateTest?U.fragmentEnd:U.edge,U))}return ne},j.getFragmentAtPosition=function(U,G,ee){var ne,re=this.config,oe=this.fragPrevious,W=ee.fragments,Te=ee.endSN,Ue=ee.fragmentHint,ze=re.maxFragLookUpTolerance,le=!!(re.lowLatencyMode&&ee.partList&&Ue);if(le&&Ue&&!this.bitrateTest&&(W=W.concat(Ue),Te=Ue.sn),U<G){var Se=U>G-ze?0:ze;ne=Object(i.findFragmentByPTS)(oe,W,U,Se)}else ne=W[W.length-1];if(ne){var be=ne.sn-ee.startSN,Y=oe&&ne.level===oe.level,Q=W[be+1];if(this.fragmentTracker.getState(ne)===R.FragmentState.BACKTRACKED){ne=null;for(var J=be;W[J]&&this.fragmentTracker.getState(W[J])===R.FragmentState.BACKTRACKED;)ne=oe?W[J--]:W[--J];ne||(ne=Q)}else oe&&ne.sn===oe.sn&&!le&&Y&&(ne.sn<Te&&this.fragmentTracker.getState(Q)!==R.FragmentState.OK?(this.log("SN "+ne.sn+" just loaded, load next one: "+Q.sn),ne=Q):ne=null)}return ne},j.synchronizeToLiveEdge=function(U){var G=this.config,ee=this.media;if(ee){var ne=this.hls.liveSyncPosition,re=ee.currentTime,oe=U.fragments[0].start,W=U.edge,Te=re>=oe-G.maxFragLookUpTolerance&&re<=W;if(ne!==null&&ee.duration>ne&&(re<ne||!Te)){var Ue=G.liveMaxLatencyDuration!==void 0?G.liveMaxLatencyDuration:G.liveMaxLatencyDurationCount*U.targetduration;(!Te&&ee.readyState<4||re<W-Ue)&&(this.loadedmetadata||(this.nextLoadPosition=ne),ee.readyState&&(this.warn("Playback: "+re.toFixed(3)+" is located too far from the end of live sliding playlist: "+W+", reset currentTime to : "+ne.toFixed(3)),ee.currentTime=ne))}}},j.alignPlaylists=function(U,G){var ee=this.levels,ne=this.levelLastLoaded,re=this.fragPrevious,oe=ne!==null?ee[ne]:null,W=U.fragments.length;if(!W)return this.warn("No fragments in live playlist"),0;var Te=U.fragments[0].start,Ue=!G,ze=U.alignedSliding&&Object(N.isFiniteNumber)(Te);if(Ue||!ze&&!Te){Object(y.alignStream)(re,oe,U);var le=U.fragments[0].start;return this.log("Live playlist sliding: "+le.toFixed(2)+" start-sn: "+(G?G.startSN:"na")+"->"+U.startSN+" prev-sn: "+(re?re.sn:"na")+" fragments: "+W),le}return Te},j.waitForCdnTuneIn=function(U){return U.live&&U.canBlockReload&&U.tuneInGoal>Math.max(U.partHoldBack,3*U.partTarget)},j.setStartPosition=function(U,G){var ee=this.startPosition;if(ee<G&&(ee=-1),ee===-1||this.lastCurrentTime===-1){var ne=U.startTimeOffset;Object(N.isFiniteNumber)(ne)?(ee=G+ne,ne<0&&(ee+=U.totalduration),ee=Math.min(Math.max(G,ee),G+U.totalduration),this.log("Start time offset "+ne+" found in playlist, adjust startPosition to "+ee),this.startPosition=ee):U.live?ee=this.hls.liveSyncPosition||G:this.startPosition=ee=0,this.lastCurrentTime=ee}this.nextLoadPosition=ee},j.getLoadPosition=function(){var U=this.media,G=0;return this.loadedmetadata&&U?G=U.currentTime:this.nextLoadPosition&&(G=this.nextLoadPosition),G},j.handleFragLoadAborted=function(U,G){this.transmuxer&&U.sn!=="initSegment"&&U.stats.aborted&&(this.warn("Fragment "+U.sn+(G?" part"+G.index:"")+" of level "+U.level+" was aborted"),this.resetFragmentLoading(U))},j.resetFragmentLoading=function(U){this.fragCurrent&&this.fragContextChanged(U)||(this.state=A.IDLE)},j.onFragmentOrKeyLoadError=function(U,G){if(!G.fatal){var ee=G.frag;if(ee&&ee.type===U){var ne=this.fragCurrent;console.assert(ne&&ee.sn===ne.sn&&ee.level===ne.level&&ee.urlId===ne.urlId,"Frag load error must match current frag to retry");var re=this.config;if(this.fragLoadError+1<=re.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(ee.level))return;var oe=Math.min(Math.pow(2,this.fragLoadError)*re.fragLoadingRetryDelay,re.fragLoadingMaxRetryTimeout);this.warn("Fragment "+ee.sn+" of "+U+" "+ee.level+" failed to load, retrying in "+oe+"ms"),this.retryDate=self.performance.now()+oe,this.fragLoadError++,this.state=A.FRAG_LOADING_WAITING_RETRY}else G.levelRetry?(U===u.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=A.IDLE):(E.logger.error(G.details+" reaches max retry, redispatch as fatal ..."),G.fatal=!0,this.hls.stopLoad(),this.state=A.ERROR)}}},j.afterBufferFlushed=function(U,G,ee){if(U){var ne=I.BufferHelper.getBuffered(U);this.fragmentTracker.detectEvictedFragments(G,ne,ee),this.state===A.ENDED&&this.resetLoadingState()}},j.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=A.IDLE},j.resetLiveStartWhenNotLoaded=function(U){if(!this.loadedmetadata){this.startFragRequested=!1;var G=this.levels?this.levels[U].details:null;if(G!=null&&G.live)return this.startPosition=-1,this.setStartPosition(G,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},j.updateLevelTiming=function(U,G,ee,ne){var re=this,oe=ee.details;console.assert(!!oe,"level.details must be defined"),Object.keys(U.elementaryStreams).reduce(function(W,Te){var Ue=U.elementaryStreams[Te];if(Ue){var ze=Ue.endPTS-Ue.startPTS;if(ze<=0)return re.warn("Could not parse fragment "+U.sn+" "+Te+" duration reliably ("+ze+") resetting transmuxer to fallback to playlist timing"),re.resetTransmuxer(),W||!1;var le=ne?0:Object(g.updateFragPTSDTS)(oe,U,Ue.startPTS,Ue.endPTS,Ue.startDTS,Ue.endDTS);return re.hls.trigger(T.Events.LEVEL_PTS_UPDATED,{details:oe,level:ee,drift:le,type:Te,frag:U,start:Ue.startPTS,end:Ue.endPTS}),!0}return W},!1)?(this.state=A.PARSED,this.hls.trigger(T.Events.FRAG_PARSED,{frag:U,part:G})):this.resetLoadingState()},j.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},k=p,(P=[{key:"state",get:function(){return this._state},set:function(U){var G=this._state;G!==U&&(this._state=U,this.log(G+"->"+U))}}])&&m(k.prototype,P),p}(C.default)},"./src/controller/buffer-controller.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return i});var N=x("./src/polyfills/number.ts"),C=x("./src/events.ts"),R=x("./src/utils/logger.ts"),I=x("./src/errors.ts"),E=x("./src/utils/buffer-helper.ts"),T=x("./src/utils/mediasource-helper.ts"),l=x("./src/loader/fragment.ts"),c=x("./src/controller/buffer-operation-queue.ts"),h=Object(T.getMediaSource)(),y=/([ha]vc.)(?:\.[^.,]+)+/,i=function(){function g(r){var t=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var u=t.hls,m=t.media,S=t.mediaSource;R.logger.log("[buffer-controller]: Media source opened"),m&&(t.updateMediaElementDuration(),u.trigger(C.Events.MEDIA_ATTACHED,{media:m})),S&&S.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},this._onMediaSourceClose=function(){R.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){R.logger.log("[buffer-controller]: Media source ended")},this.hls=r,this._initSourceBuffer(),this.registerListeners()}var d=g.prototype;return d.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},d.destroy=function(){this.unregisterListeners(),this.details=null},d.registerListeners=function(){var r=this.hls;r.on(C.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),r.on(C.Events.MEDIA_DETACHING,this.onMediaDetaching,this),r.on(C.Events.MANIFEST_PARSED,this.onManifestParsed,this),r.on(C.Events.BUFFER_RESET,this.onBufferReset,this),r.on(C.Events.BUFFER_APPENDING,this.onBufferAppending,this),r.on(C.Events.BUFFER_CODECS,this.onBufferCodecs,this),r.on(C.Events.BUFFER_EOS,this.onBufferEos,this),r.on(C.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),r.on(C.Events.LEVEL_UPDATED,this.onLevelUpdated,this),r.on(C.Events.FRAG_PARSED,this.onFragParsed,this),r.on(C.Events.FRAG_CHANGED,this.onFragChanged,this)},d.unregisterListeners=function(){var r=this.hls;r.off(C.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),r.off(C.Events.MEDIA_DETACHING,this.onMediaDetaching,this),r.off(C.Events.MANIFEST_PARSED,this.onManifestParsed,this),r.off(C.Events.BUFFER_RESET,this.onBufferReset,this),r.off(C.Events.BUFFER_APPENDING,this.onBufferAppending,this),r.off(C.Events.BUFFER_CODECS,this.onBufferCodecs,this),r.off(C.Events.BUFFER_EOS,this.onBufferEos,this),r.off(C.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),r.off(C.Events.LEVEL_UPDATED,this.onLevelUpdated,this),r.off(C.Events.FRAG_PARSED,this.onFragParsed,this),r.off(C.Events.FRAG_CHANGED,this.onFragChanged,this)},d._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new c.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},d.onManifestParsed=function(r,t){var u=2;(t.audio&&!t.video||!t.altAudio)&&(u=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=u,this.details=null,R.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},d.onMediaAttaching=function(r,t){var u=this.media=t.media;if(u&&h){var m=this.mediaSource=new h;m.addEventListener("sourceopen",this._onMediaSourceOpen),m.addEventListener("sourceended",this._onMediaSourceEnded),m.addEventListener("sourceclose",this._onMediaSourceClose),u.src=self.URL.createObjectURL(m),this._objectUrl=u.src}},d.onMediaDetaching=function(){var r=this.media,t=this.mediaSource,u=this._objectUrl;if(t){if(R.logger.log("[buffer-controller]: media source detaching"),t.readyState==="open")try{t.endOfStream()}catch(m){R.logger.warn("[buffer-controller]: onMediaDetaching: "+m.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),r&&(u&&self.URL.revokeObjectURL(u),r.src===u?(r.removeAttribute("src"),r.load()):R.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(C.Events.MEDIA_DETACHED,void 0)},d.onBufferReset=function(){var r=this;this.getSourceBufferTypes().forEach(function(t){var u=r.sourceBuffer[t];try{u&&(r.removeBufferListeners(t),r.mediaSource&&r.mediaSource.removeSourceBuffer(u),r.sourceBuffer[t]=void 0)}catch(m){R.logger.warn("[buffer-controller]: Failed to reset the "+t+" buffer",m)}}),this._initSourceBuffer()},d.onBufferCodecs=function(r,t){var u=this,m=this.getSourceBufferTypes().length;Object.keys(t).forEach(function(S){if(m){var A=u.tracks[S];if(A&&typeof A.buffer.changeType=="function"){var _=t[S],v=_.codec,f=_.levelCodec,b=_.container;if((A.levelCodec||A.codec).replace(y,"$1")!==(f||v).replace(y,"$1")){var p=b+";codecs="+(f||v);u.appendChangeType(S,p)}}}else u.pendingTracks[S]=t[S]}),m||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},d.appendChangeType=function(r,t){var u=this,m=this.operationQueue,S={execute:function(){var A=u.sourceBuffer[r];A&&(R.logger.log("[buffer-controller]: changing "+r+" sourceBuffer type to "+t),A.changeType(t)),m.shiftAndExecuteNext(r)},onStart:function(){},onComplete:function(){},onError:function(A){R.logger.warn("[buffer-controller]: Failed to change "+r+" SourceBuffer type",A)}};m.append(S,r)},d.onBufferAppending=function(r,t){var u=this,m=this.hls,S=this.operationQueue,A=this.tracks,_=t.data,v=t.type,f=t.frag,b=t.part,p=t.chunkMeta,k=p.buffering[v],P=self.performance.now();k.start=P;var j=f.stats.buffering,U=b?b.stats.buffering:null;j.start===0&&(j.start=P),U&&U.start===0&&(U.start=P);var G=A.audio,ee=v==="audio"&&p.id===1&&(G==null?void 0:G.container)==="audio/mpeg",ne={execute:function(){if(k.executeStart=self.performance.now(),ee){var re=u.sourceBuffer[v];if(re){var oe=f.start-re.timestampOffset;Math.abs(oe)>=.1&&(R.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+f.start+" (delta: "+oe+") sn: "+f.sn+")"),re.timestampOffset=f.start)}}u.appendExecutor(_,v)},onStart:function(){},onComplete:function(){var re=self.performance.now();k.executeEnd=k.end=re,j.first===0&&(j.first=re),U&&U.first===0&&(U.first=re);var oe=u.sourceBuffer,W={};for(var Te in oe)W[Te]=E.BufferHelper.getBuffered(oe[Te]);u.appendError=0,u.hls.trigger(C.Events.BUFFER_APPENDED,{type:v,frag:f,part:b,chunkMeta:p,parent:f.type,timeRanges:W})},onError:function(re){R.logger.error("[buffer-controller]: Error encountered while trying to append to the "+v+" SourceBuffer",re);var oe={type:I.ErrorTypes.MEDIA_ERROR,parent:f.type,details:I.ErrorDetails.BUFFER_APPEND_ERROR,err:re,fatal:!1};re.code===DOMException.QUOTA_EXCEEDED_ERR?oe.details=I.ErrorDetails.BUFFER_FULL_ERROR:(u.appendError++,oe.details=I.ErrorDetails.BUFFER_APPEND_ERROR,u.appendError>m.config.appendErrorMaxRetry&&(R.logger.error("[buffer-controller]: Failed "+m.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),oe.fatal=!0)),m.trigger(C.Events.ERROR,oe)}};S.append(ne,v)},d.onBufferFlushing=function(r,t){var u=this,m=this.operationQueue,S=function(A){return{execute:u.removeExecutor.bind(u,A,t.startOffset,t.endOffset),onStart:function(){},onComplete:function(){u.hls.trigger(C.Events.BUFFER_FLUSHED,{type:A})},onError:function(_){R.logger.warn("[buffer-controller]: Failed to remove from "+A+" SourceBuffer",_)}}};t.type?m.append(S(t.type),t.type):this.getSourceBufferTypes().forEach(function(A){m.append(S(A),A)})},d.onFragParsed=function(r,t){var u=this,m=t.frag,S=t.part,A=[],_=S?S.elementaryStreams:m.elementaryStreams;_[l.ElementaryStreamTypes.AUDIOVIDEO]?A.push("audiovideo"):(_[l.ElementaryStreamTypes.AUDIO]&&A.push("audio"),_[l.ElementaryStreamTypes.VIDEO]&&A.push("video")),A.length===0&&R.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+m.type+" level: "+m.level+" sn: "+m.sn),this.blockBuffers(function(){var v=self.performance.now();m.stats.buffering.end=v,S&&(S.stats.buffering.end=v);var f=S?S.stats:m.stats;u.hls.trigger(C.Events.FRAG_BUFFERED,{frag:m,part:S,stats:f,id:m.type})},A)},d.onFragChanged=function(r,t){this.flushBackBuffer()},d.onBufferEos=function(r,t){var u=this;this.getSourceBufferTypes().reduce(function(m,S){var A=u.sourceBuffer[S];return t.type&&t.type!==S||A&&!A.ended&&(A.ended=!0,R.logger.log("[buffer-controller]: "+S+" sourceBuffer now EOS")),m&&!(A&&!A.ended)},!0)&&this.blockBuffers(function(){var m=u.mediaSource;m&&m.readyState==="open"&&m.endOfStream()})},d.onLevelUpdated=function(r,t){var u=t.details;u.fragments.length&&(this.details=u,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},d.flushBackBuffer=function(){var r=this.hls,t=this.details,u=this.media,m=this.sourceBuffer;if(u&&t!==null){var S=this.getSourceBufferTypes();if(S.length){var A=t.live&&r.config.liveBackBufferLength!==null?r.config.liveBackBufferLength:r.config.backBufferLength;if(Object(N.isFiniteNumber)(A)&&!(A<0)){var _=u.currentTime,v=t.levelTargetDuration,f=Math.max(A,v),b=Math.floor(_/v)*v-f;S.forEach(function(p){var k=m[p];if(k){var P=E.BufferHelper.getBuffered(k);P.length>0&&b>P.start(0)&&(r.trigger(C.Events.BACK_BUFFER_REACHED,{bufferEnd:b}),t.live&&r.trigger(C.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:b}),r.trigger(C.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:b,type:p}))}})}}}},d.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&this.mediaSource.readyState==="open"){var r=this.details,t=this.hls,u=this.media,m=this.mediaSource,S=r.fragments[0].start+r.totalduration,A=u.duration,_=Object(N.isFiniteNumber)(m.duration)?m.duration:0;r.live&&t.config.liveDurationInfinity?(R.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),m.duration=1/0,this.updateSeekableRange(r)):(S>_&&S>A||!Object(N.isFiniteNumber)(A))&&(R.logger.log("[buffer-controller]: Updating Media Source duration to "+S.toFixed(3)),m.duration=S)}},d.updateSeekableRange=function(r){var t=this.mediaSource,u=r.fragments;if(u.length&&r.live&&t!=null&&t.setLiveSeekableRange){var m=Math.max(0,u[0].start),S=Math.max(m,m+r.totalduration);t.setLiveSeekableRange(m,S)}},d.checkPendingTracks=function(){var r=this.bufferCodecEventsExpected,t=this.operationQueue,u=this.pendingTracks,m=Object.keys(u).length;if(m&&!r||m===2){this.createSourceBuffers(u),this.pendingTracks={};var S=this.getSourceBufferTypes();if(S.length===0)return void this.hls.trigger(C.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});S.forEach(function(A){t.executeNext(A)})}},d.createSourceBuffers=function(r){var t=this.sourceBuffer,u=this.mediaSource;if(!u)throw Error("createSourceBuffers called when mediaSource was null");var m=0;for(var S in r)if(!t[S]){var A=r[S];if(!A)throw Error("source buffer exists for track "+S+", however track does not");var _=A.levelCodec||A.codec,v=A.container+";codecs="+_;R.logger.log("[buffer-controller]: creating sourceBuffer("+v+")");try{var f=t[S]=u.addSourceBuffer(v),b=S;this.addBufferListener(b,"updatestart",this._onSBUpdateStart),this.addBufferListener(b,"updateend",this._onSBUpdateEnd),this.addBufferListener(b,"error",this._onSBUpdateError),this.tracks[S]={buffer:f,codec:_,container:A.container,levelCodec:A.levelCodec,id:A.id},m++}catch(p){R.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+p.message),this.hls.trigger(C.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:p,mimeType:v})}}m&&this.hls.trigger(C.Events.BUFFER_CREATED,{tracks:this.tracks})},d._onSBUpdateStart=function(r){this.operationQueue.current(r).onStart()},d._onSBUpdateEnd=function(r){var t=this.operationQueue;t.current(r).onComplete(),t.shiftAndExecuteNext(r)},d._onSBUpdateError=function(r,t){R.logger.error("[buffer-controller]: "+r+" SourceBuffer error",t),this.hls.trigger(C.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var u=this.operationQueue.current(r);u&&u.onError(t)},d.removeExecutor=function(r,t,u){var m=this.media,S=this.mediaSource,A=this.operationQueue,_=this.sourceBuffer[r];if(!m||!S||!_)return R.logger.warn("[buffer-controller]: Attempting to remove from the "+r+" SourceBuffer, but it does not exist"),void A.shiftAndExecuteNext(r);var v=Object(N.isFiniteNumber)(m.duration)?m.duration:1/0,f=Object(N.isFiniteNumber)(S.duration)?S.duration:1/0,b=Math.max(0,t),p=Math.min(u,v,f);p>b?(R.logger.log("[buffer-controller]: Removing ["+b+","+p+"] from the "+r+" SourceBuffer"),console.assert(!_.updating,r+" sourceBuffer must not be updating"),_.remove(b,p)):A.shiftAndExecuteNext(r)},d.appendExecutor=function(r,t){var u=this.operationQueue,m=this.sourceBuffer[t];if(!m)return R.logger.warn("[buffer-controller]: Attempting to append to the "+t+" SourceBuffer, but it does not exist"),void u.shiftAndExecuteNext(t);m.ended=!1,console.assert(!m.updating,t+" sourceBuffer must not be updating"),m.appendBuffer(r)},d.blockBuffers=function(r,t){var u=this;if(t===void 0&&(t=this.getSourceBufferTypes()),!t.length)return R.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(r);var m=this.operationQueue,S=t.map(function(A){return m.appendBlocker(A)});Promise.all(S).then(function(){r(),t.forEach(function(A){var _=u.sourceBuffer[A];_&&_.updating||m.shiftAndExecuteNext(A)})})},d.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},d.addBufferListener=function(r,t,u){var m=this.sourceBuffer[r];if(m){var S=u.bind(this,r);this.listeners[r].push({event:t,listener:S}),m.addEventListener(t,S)}},d.removeBufferListeners=function(r){var t=this.sourceBuffer[r];t&&this.listeners[r].forEach(function(u){t.removeEventListener(u.event,u.listener)})},g}()},"./src/controller/buffer-operation-queue.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return C});var N=x("./src/utils/logger.ts"),C=function(){function R(E){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=E}var I=R.prototype;return I.append=function(E,T){var l=this.queues[T];l.push(E),l.length===1&&this.buffers[T]&&this.executeNext(T)},I.insertAbort=function(E,T){this.queues[T].unshift(E),this.executeNext(T)},I.appendBlocker=function(E){var T,l=new Promise(function(h){T=h}),c={execute:T,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(c,E),l},I.executeNext=function(E){var T=this.buffers,l=this.queues,c=T[E],h=l[E];if(h.length){var y=h[0];try{y.execute()}catch(i){N.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),y.onError(i),c&&c.updating||(h.shift(),this.executeNext(E))}}},I.shiftAndExecuteNext=function(E){this.queues[E].shift(),this.executeNext(E)},I.current=function(E){return this.queues[E][0]},R}()},"./src/controller/cap-level-controller.ts":function(K,M,x){x.r(M);var N=x("./src/events.ts");function C(I,E){for(var T=0;T<E.length;T++){var l=E[T];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(I,l.key,l)}}var R=function(){function I(h){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=h,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var E,T,l,c=I.prototype;return c.setStreamController=function(h){this.streamController=h},c.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},c.registerListeners=function(){var h=this.hls;h.on(N.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),h.on(N.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),h.on(N.Events.MANIFEST_PARSED,this.onManifestParsed,this),h.on(N.Events.BUFFER_CODECS,this.onBufferCodecs,this),h.on(N.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},c.unregisterListener=function(){var h=this.hls;h.off(N.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),h.off(N.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),h.off(N.Events.MANIFEST_PARSED,this.onManifestParsed,this),h.off(N.Events.BUFFER_CODECS,this.onBufferCodecs,this),h.off(N.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},c.onFpsDropLevelCapping=function(h,y){I.isLevelAllowed(y.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(y.droppedLevel)},c.onMediaAttaching=function(h,y){this.media=y.media instanceof HTMLVideoElement?y.media:null},c.onManifestParsed=function(h,y){var i=this.hls;this.restrictedLevels=[],this.firstLevel=y.firstLevel,i.config.capLevelToPlayerSize&&y.video&&this.startCapping()},c.onBufferCodecs=function(h,y){this.hls.config.capLevelToPlayerSize&&y.video&&this.startCapping()},c.onMediaDetaching=function(){this.stopCapping()},c.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var h=this.hls.levels;if(h.length){var y=this.hls;y.autoLevelCapping=this.getMaxLevel(h.length-1),y.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=y.autoLevelCapping}}},c.getMaxLevel=function(h){var y=this,i=this.hls.levels;if(!i.length)return-1;var g=i.filter(function(d,r){return I.isLevelAllowed(r,y.restrictedLevels)&&r<=h});return this.clientRect=null,I.getMaxLevelByMediaSize(g,this.mediaWidth,this.mediaHeight)},c.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},c.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},c.getDimensions=function(){if(this.clientRect)return this.clientRect;var h=this.media,y={width:0,height:0};if(h){var i=h.getBoundingClientRect();y.width=i.width,y.height=i.height,y.width||y.height||(y.width=i.right-i.left||h.width||0,y.height=i.bottom-i.top||h.height||0)}return this.clientRect=y,y},I.isLevelAllowed=function(h,y){return y===void 0&&(y=[]),y.indexOf(h)===-1},I.getMaxLevelByMediaSize=function(h,y,i){if(!h||!h.length)return-1;for(var g,d,r=h.length-1,t=0;t<h.length;t+=1){var u=h[t];if((u.width>=y||u.height>=i)&&(g=u,!(d=h[t+1])||g.width!==d.width||g.height!==d.height)){r=t;break}}return r},E=I,l=[{key:"contentScaleFactor",get:function(){var h=1;try{h=self.devicePixelRatio}catch{}return h}}],(T=[{key:"mediaWidth",get:function(){return this.getDimensions().width*I.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*I.contentScaleFactor}}])&&C(E.prototype,T),l&&C(E,l),I}();M.default=R},"./src/controller/cmcd-controller.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return y});var N=x("./src/events.ts"),C=x("./src/types/cmcd.ts"),R=x("./src/utils/buffer-helper.ts"),I=x("./src/utils/logger.ts");function E(i,g){for(var d=0;d<g.length;d++){var r=g[d];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function T(i,g,d){return g&&E(i.prototype,g),d&&E(i,d),i}function l(i,g){var d=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(d)return(d=d.call(i)).next.bind(d);if(Array.isArray(i)||(d=function(t,u){if(t){if(typeof t=="string")return c(t,u);var m=Object.prototype.toString.call(t).slice(8,-1);return m==="Object"&&t.constructor&&(m=t.constructor.name),m==="Map"||m==="Set"?Array.from(t):m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?c(t,u):void 0}}(i))||g&&i&&typeof i.length=="number"){d&&(i=d);var r=0;return function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(i,g){(g==null||g>i.length)&&(g=i.length);for(var d=0,r=new Array(g);d<g;d++)r[d]=i[d];return r}function h(){return h=Object.assign||function(i){for(var g=1;g<arguments.length;g++){var d=arguments[g];for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&(i[r]=d[r])}return i},h.apply(this,arguments)}var y=function(){function i(d){var r=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){r.initialized&&(r.starved=!0),r.buffering=!0},this.onPlaying=function(){r.initialized||(r.initialized=!0),r.buffering=!1},this.applyPlaylistData=function(m){try{r.apply(m,{ot:C.CMCDObjectType.MANIFEST,su:!r.initialized})}catch(S){I.logger.warn("Could not generate manifest CMCD data.",S)}},this.applyFragmentData=function(m){try{var S=m.frag,A=r.hls.levels[S.level],_=r.getObjectType(S),v={d:1e3*S.duration,ot:_};_!==C.CMCDObjectType.VIDEO&&_!==C.CMCDObjectType.AUDIO&&_!=C.CMCDObjectType.MUXED||(v.br=A.bitrate/1e3,v.tb=r.getTopBandwidth(_)/1e3,v.bl=r.getBufferLength(_)),r.apply(m,v)}catch(f){I.logger.warn("Could not generate segment CMCD data.",f)}},this.hls=d;var t=this.config=d.config,u=t.cmcd;u!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=u.sessionId||i.uuid(),this.cid=u.contentId,this.useHeaders=u.useHeaders===!0,this.registerListeners())}var g=i.prototype;return g.registerListeners=function(){var d=this.hls;d.on(N.Events.MEDIA_ATTACHED,this.onMediaAttached,this),d.on(N.Events.MEDIA_DETACHED,this.onMediaDetached,this),d.on(N.Events.BUFFER_CREATED,this.onBufferCreated,this)},g.unregisterListeners=function(){var d=this.hls;d.off(N.Events.MEDIA_ATTACHED,this.onMediaAttached,this),d.off(N.Events.MEDIA_DETACHED,this.onMediaDetached,this),d.off(N.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},g.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},g.onMediaAttached=function(d,r){this.media=r.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},g.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},g.onBufferCreated=function(d,r){var t,u;this.audioBuffer=(t=r.tracks.audio)===null||t===void 0?void 0:t.buffer,this.videoBuffer=(u=r.tracks.video)===null||u===void 0?void 0:u.buffer},g.createData=function(){var d;return{v:C.CMCDVersion,sf:C.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:(d=this.media)===null||d===void 0?void 0:d.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},g.apply=function(d,r){r===void 0&&(r={}),h(r,this.createData());var t=r.ot===C.CMCDObjectType.INIT||r.ot===C.CMCDObjectType.VIDEO||r.ot===C.CMCDObjectType.MUXED;if(this.starved&&t&&(r.bs=!0,r.su=!0,this.starved=!1),r.su==null&&(r.su=this.buffering),this.useHeaders){var u=i.toHeaders(r);if(!Object.keys(u).length)return;d.headers||(d.headers={}),h(d.headers,u)}else{var m=i.toQuery(r);if(!m)return;d.url=i.appendQueryToUri(d.url,m)}},g.getObjectType=function(d){var r=d.type;return r==="subtitle"?C.CMCDObjectType.TIMED_TEXT:d.sn==="initSegment"?C.CMCDObjectType.INIT:r==="audio"?C.CMCDObjectType.AUDIO:r==="main"?this.hls.audioTracks.length?C.CMCDObjectType.VIDEO:C.CMCDObjectType.MUXED:void 0},g.getTopBandwidth=function(d){var r,t=0,u=this.hls;if(d===C.CMCDObjectType.AUDIO)r=u.audioTracks;else{var m=u.maxAutoLevel,S=m>-1?m+1:u.levels.length;r=u.levels.slice(0,S)}for(var A,_=l(r);!(A=_()).done;){var v=A.value;v.bitrate>t&&(t=v.bitrate)}return t>0?t:NaN},g.getBufferLength=function(d){var r=this.hls.media,t=d===C.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return t&&r?1e3*R.BufferHelper.bufferInfo(t,r.currentTime,this.config.maxBufferHole).len:NaN},g.createPlaylistLoader=function(){var d=this.config.pLoader,r=this.applyPlaylistData,t=d||this.config.loader;return function(){function u(S){this.loader=void 0,this.loader=new t(S)}var m=u.prototype;return m.destroy=function(){this.loader.destroy()},m.abort=function(){this.loader.abort()},m.load=function(S,A,_){r(S),this.loader.load(S,A,_)},T(u,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),u}()},g.createFragmentLoader=function(){var d=this.config.fLoader,r=this.applyFragmentData,t=d||this.config.loader;return function(){function u(S){this.loader=void 0,this.loader=new t(S)}var m=u.prototype;return m.destroy=function(){this.loader.destroy()},m.abort=function(){this.loader.abort()},m.load=function(S,A,_){r(S),this.loader.load(S,A,_)},T(u,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),u}()},i.uuid=function(){var d=URL.createObjectURL(new Blob),r=d.toString();return URL.revokeObjectURL(d),r.substr(r.lastIndexOf("/")+1)},i.serialize=function(d){for(var r,t=[],u=function(P){return!Number.isNaN(P)&&P!=null&&P!==""&&P!==!1},m=function(P){return Math.round(P)},S=function(P){return 100*m(P/100)},A={br:m,d:m,bl:S,dl:S,mtp:S,nor:function(P){return encodeURIComponent(P)},rtp:S,tb:m},_=l(Object.keys(d||{}).sort());!(r=_()).done;){var v=r.value,f=d[v];if(u(f)&&!(v==="v"&&f===1||v=="pr"&&f===1)){var b=A[v];b&&(f=b(f));var p,k=typeof f;p=v==="ot"||v==="sf"||v==="st"?v+"="+f:k==="boolean"?v:k==="number"?v+"="+f:v+"="+JSON.stringify(f),t.push(p)}}return t.join(",")},i.toHeaders=function(d){for(var r={},t=["Object","Request","Session","Status"],u=[{},{},{},{}],m={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},S=0,A=Object.keys(d);S<A.length;S++){var _=A[S];u[m[_]!=null?m[_]:1][_]=d[_]}for(var v=0;v<u.length;v++){var f=i.serialize(u[v]);f&&(r["CMCD-"+t[v]]=f)}return r},i.toQuery=function(d){return"CMCD="+encodeURIComponent(i.serialize(d))},i.appendQueryToUri=function(d,r){if(!r)return d;var t=d.includes("?")?"&":"?";return""+d+t+r},i}()},"./src/controller/eme-controller.ts":function(K,M,x){x.r(M);var N=x("./src/events.ts"),C=x("./src/errors.ts"),R=x("./src/utils/logger.ts"),I=x("./src/utils/mediakeys-helper.ts");function E(l,c){for(var h=0;h<c.length;h++){var y=c[h];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(l,y.key,y)}}var T=function(){function l(i){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=i,this._config=i.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var c,h,y=l.prototype;return y.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},y._registerListeners=function(){this.hls.on(N.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(N.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(N.Events.MANIFEST_PARSED,this.onManifestParsed,this)},y._unregisterListeners=function(){this.hls.off(N.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(N.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(N.Events.MANIFEST_PARSED,this.onManifestParsed,this)},y.getLicenseServerUrl=function(i){switch(i){case I.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+i+'"')},y._attemptKeySystemAccess=function(i,g,d){var r=this,t=function(m,S,A,_){if(m===I.KeySystems.WIDEVINE)return function(v,f,b){var p={audioCapabilities:[],videoCapabilities:[]};return v.forEach(function(k){p.audioCapabilities.push({contentType:'audio/mp4; codecs="'+k+'"',robustness:b.audioRobustness||""})}),f.forEach(function(k){p.videoCapabilities.push({contentType:'video/mp4; codecs="'+k+'"',robustness:b.videoRobustness||""})}),[p]}(S,A,_);throw new Error("Unknown key-system: "+m)}(i,g,d,this._drmSystemOptions);R.logger.log("Requesting encrypted media key-system access");var u=this.requestMediaKeySystemAccess(i,t);this.mediaKeysPromise=u.then(function(m){return r._onMediaKeySystemAccessObtained(i,m)}),u.catch(function(m){R.logger.error('Failed to obtain key-system "'+i+'" access:',m)})},y._onMediaKeySystemAccessObtained=function(i,g){var d=this;R.logger.log('Access for key-system "'+i+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:g,mediaKeySystemDomain:i};this._mediaKeysList.push(r);var t=Promise.resolve().then(function(){return g.createMediaKeys()}).then(function(u){return r.mediaKeys=u,R.logger.log('Media-keys created for key-system "'+i+'"'),d._onMediaKeysCreated(),u});return t.catch(function(u){R.logger.error("Failed to create media-keys:",u)}),t},y._onMediaKeysCreated=function(){var i=this;this._mediaKeysList.forEach(function(g){g.mediaKeysSession||(g.mediaKeysSession=g.mediaKeys.createSession(),i._onNewMediaKeySession(g.mediaKeysSession))})},y._onNewMediaKeySession=function(i){var g=this;R.logger.log("New key-system session "+i.sessionId),i.addEventListener("message",function(d){g._onKeySessionMessage(i,d.message)},!1)},y._onKeySessionMessage=function(i,g){R.logger.log("Got EME message event, creating license request"),this._requestLicense(g,function(d){R.logger.log("Received license data (length: "+(d&&d.byteLength)+"), updating key-session"),i.update(d)})},y.onMediaEncrypted=function(i){var g=this;if(R.logger.log('Media is encrypted using "'+i.initDataType+'" init data type'),!this.mediaKeysPromise)return R.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(N.Events.ERROR,{type:C.ErrorTypes.KEY_SYSTEM_ERROR,details:C.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var d=function(r){g._media&&(g._attemptSetMediaKeys(r),g._generateRequestWithPreferredKeySession(i.initDataType,i.initData))};this.mediaKeysPromise.then(d).catch(d)},y._attemptSetMediaKeys=function(i){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var g=this._mediaKeysList[0];if(!g||!g.mediaKeys)return R.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(N.Events.ERROR,{type:C.ErrorTypes.KEY_SYSTEM_ERROR,details:C.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});R.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(g.mediaKeys),this._hasSetMediaKeys=!0}},y._generateRequestWithPreferredKeySession=function(i,g){var d=this,r=this._mediaKeysList[0];if(!r)return R.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(N.Events.ERROR,{type:C.ErrorTypes.KEY_SYSTEM_ERROR,details:C.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(r.mediaKeysSessionInitialized)R.logger.warn("Key-Session already initialized but requested again");else{var t=r.mediaKeysSession;if(!t)return R.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(N.Events.ERROR,{type:C.ErrorTypes.KEY_SYSTEM_ERROR,details:C.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!g)return R.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(N.Events.ERROR,{type:C.ErrorTypes.KEY_SYSTEM_ERROR,details:C.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});R.logger.log('Generating key-session request for "'+i+'" init data type'),r.mediaKeysSessionInitialized=!0,t.generateRequest(i,g).then(function(){R.logger.debug("Key-session generation succeeded")}).catch(function(u){R.logger.error("Error generating key-session request:",u),d.hls.trigger(N.Events.ERROR,{type:C.ErrorTypes.KEY_SYSTEM_ERROR,details:C.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},y._createLicenseXhr=function(i,g,d){var r=new XMLHttpRequest;r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,i,g,d);var t=this._licenseXhrSetup;if(t)try{t.call(this.hls,r,i),t=void 0}catch(u){R.logger.error(u)}try{r.readyState||r.open("POST",i,!0),t&&t.call(this.hls,r,i)}catch(u){throw new Error("issue setting up KeySystem license XHR "+u)}return r},y._onLicenseRequestReadyStageChange=function(i,g,d,r){if(i.readyState===4)if(i.status===200){this._requestLicenseFailureCount=0,R.logger.log("License request succeeded");var t=i.response,u=this._licenseResponseCallback;if(u)try{t=u.call(this.hls,i,g)}catch(S){R.logger.error(S)}r(t)}else{if(R.logger.error("License Request XHR failed ("+g+"). Status: "+i.status+" ("+i.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(N.Events.ERROR,{type:C.ErrorTypes.KEY_SYSTEM_ERROR,details:C.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var m=3-this._requestLicenseFailureCount+1;R.logger.warn("Retrying license request, "+m+" attempts left"),this._requestLicense(d,r)}},y._generateLicenseRequestChallenge=function(i,g){if(i.mediaKeySystemDomain===I.KeySystems.WIDEVINE)return g;throw new Error("unsupported key-system: "+i.mediaKeySystemDomain)},y._requestLicense=function(i,g){R.logger.log("Requesting content license for key-system");var d=this._mediaKeysList[0];if(!d)return R.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(N.Events.ERROR,{type:C.ErrorTypes.KEY_SYSTEM_ERROR,details:C.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var r=this.getLicenseServerUrl(d.mediaKeySystemDomain),t=this._createLicenseXhr(r,i,g);R.logger.log("Sending license request to URL: "+r);var u=this._generateLicenseRequestChallenge(d,i);t.send(u)}catch(m){R.logger.error("Failure requesting DRM license: "+m),this.hls.trigger(N.Events.ERROR,{type:C.ErrorTypes.KEY_SYSTEM_ERROR,details:C.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},y.onMediaAttached=function(i,g){if(this._emeEnabled){var d=g.media;this._media=d,d.addEventListener("encrypted",this._onMediaEncrypted)}},y.onMediaDetached=function(){var i=this._media,g=this._mediaKeysList;i&&(i.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(g.map(function(d){if(d.mediaKeysSession)return d.mediaKeysSession.close().catch(function(){})})).then(function(){return i.setMediaKeys(null)}).catch(function(){}))},y.onManifestParsed=function(i,g){if(this._emeEnabled){var d=g.levels.map(function(t){return t.audioCodec}).filter(function(t){return!!t}),r=g.levels.map(function(t){return t.videoCodec}).filter(function(t){return!!t});this._attemptKeySystemAccess(I.KeySystems.WIDEVINE,d,r)}},c=l,(h=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&E(c.prototype,h),l}();M.default=T},"./src/controller/fps-controller.ts":function(K,M,x){x.r(M);var N=x("./src/events.ts"),C=x("./src/utils/logger.ts"),R=function(){function I(T){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=T,this.registerListeners()}var E=I.prototype;return E.setStreamController=function(T){this.streamController=T},E.registerListeners=function(){this.hls.on(N.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},E.unregisterListeners=function(){this.hls.off(N.Events.MEDIA_ATTACHING,this.onMediaAttaching)},E.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},E.onMediaAttaching=function(T,l){var c=this.hls.config;if(c.capLevelOnFPSDrop){var h=l.media instanceof self.HTMLVideoElement?l.media:null;this.media=h,h&&typeof h.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),c.fpsDroppedMonitoringPeriod)}},E.checkFPS=function(T,l,c){var h=performance.now();if(l){if(this.lastTime){var y=h-this.lastTime,i=c-this.lastDroppedFrames,g=l-this.lastDecodedFrames,d=1e3*i/y,r=this.hls;if(r.trigger(N.Events.FPS_DROP,{currentDropped:i,currentDecoded:g,totalDroppedFrames:c}),d>0&&i>r.config.fpsDroppedMonitoringThreshold*g){var t=r.currentLevel;C.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+t),t>0&&(r.autoLevelCapping===-1||r.autoLevelCapping>=t)&&(t-=1,r.trigger(N.Events.FPS_DROP_LEVEL_CAPPING,{level:t,droppedLevel:r.currentLevel}),r.autoLevelCapping=t,this.streamController.nextLevelSwitch())}}this.lastTime=h,this.lastDroppedFrames=c,this.lastDecodedFrames=l}},E.checkFPSInterval=function(){var T=this.media;if(T)if(this.isVideoPlaybackQualityAvailable){var l=T.getVideoPlaybackQuality();this.checkFPS(T,l.totalVideoFrames,l.droppedVideoFrames)}else this.checkFPS(T,T.webkitDecodedFrameCount,T.webkitDroppedFrameCount)},I}();M.default=R},"./src/controller/fragment-finders.ts":function(K,M,x){x.r(M),x.d(M,"findFragmentByPDT",function(){return R}),x.d(M,"findFragmentByPTS",function(){return I}),x.d(M,"fragmentWithinToleranceTest",function(){return E}),x.d(M,"pdtWithinToleranceTest",function(){return T}),x.d(M,"findFragWithCC",function(){return l});var N=x("./src/polyfills/number.ts"),C=x("./src/utils/binary-search.ts");function R(c,h,y){if(h===null||!Array.isArray(c)||!c.length||!Object(N.isFiniteNumber)(h)||h<(c[0].programDateTime||0)||h>=(c[c.length-1].endProgramDateTime||0))return null;y=y||0;for(var i=0;i<c.length;++i){var g=c[i];if(T(h,y,g))return g}return null}function I(c,h,y,i){y===void 0&&(y=0),i===void 0&&(i=0);var g=null;return c?g=h[c.sn-h[0].sn+1]||null:y===0&&h[0].start===0&&(g=h[0]),g&&E(y,i,g)===0?g:C.default.search(h,E.bind(null,y,i))||g}function E(c,h,y){c===void 0&&(c=0),h===void 0&&(h=0);var i=Math.min(h,y.duration+(y.deltaPTS?y.deltaPTS:0));return y.start+y.duration-i<=c?1:y.start-i>c&&y.start?-1:0}function T(c,h,y){var i=1e3*Math.min(h,y.duration+(y.deltaPTS?y.deltaPTS:0));return(y.endProgramDateTime||0)-i>c}function l(c,h){return C.default.search(c,function(y){return y.cc<h?1:y.cc>h?-1:0})}},"./src/controller/fragment-tracker.ts":function(K,M,x){x.r(M),x.d(M,"FragmentState",function(){return N}),x.d(M,"FragmentTracker",function(){return I});var N,C=x("./src/events.ts"),R=x("./src/types/loader.ts");(function(l){l.NOT_LOADED="NOT_LOADED",l.BACKTRACKED="BACKTRACKED",l.APPENDING="APPENDING",l.PARTIAL="PARTIAL",l.OK="OK"})(N||(N={}));var I=function(){function l(h){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=h,this._registerListeners()}var c=l.prototype;return c._registerListeners=function(){var h=this.hls;h.on(C.Events.BUFFER_APPENDED,this.onBufferAppended,this),h.on(C.Events.FRAG_BUFFERED,this.onFragBuffered,this),h.on(C.Events.FRAG_LOADED,this.onFragLoaded,this)},c._unregisterListeners=function(){var h=this.hls;h.off(C.Events.BUFFER_APPENDED,this.onBufferAppended,this),h.off(C.Events.FRAG_BUFFERED,this.onFragBuffered,this),h.off(C.Events.FRAG_LOADED,this.onFragLoaded,this)},c.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},c.getAppendedFrag=function(h,y){if(y===R.PlaylistLevelType.MAIN){var i=this.activeFragment,g=this.activeParts;if(!i)return null;if(g)for(var d=g.length;d--;){var r=g[d],t=r?r.end:i.appendedPTS;if(r.start<=h&&t!==void 0&&h<=t)return d>9&&(this.activeParts=g.slice(d-9)),r}else if(i.start<=h&&i.appendedPTS!==void 0&&h<=i.appendedPTS)return i}return this.getBufferedFrag(h,y)},c.getBufferedFrag=function(h,y){for(var i=this.fragments,g=Object.keys(i),d=g.length;d--;){var r=i[g[d]];if((r==null?void 0:r.body.type)===y&&r.buffered){var t=r.body;if(t.start<=h&&h<=t.end)return t}}return null},c.detectEvictedFragments=function(h,y,i){var g=this;Object.keys(this.fragments).forEach(function(d){var r=g.fragments[d];if(r)if(r.buffered){var t=r.range[h];t&&t.time.some(function(u){var m=!g.isTimeBuffered(u.startPTS,u.endPTS,y);return m&&g.removeFragment(r.body),m})}else r.body.type===i&&g.removeFragment(r.body)})},c.detectPartialFragments=function(h){var y=this,i=this.timeRanges,g=h.frag,d=h.part;if(i&&g.sn!=="initSegment"){var r=T(g),t=this.fragments[r];t&&(Object.keys(i).forEach(function(u){var m=g.elementaryStreams[u];if(m){var S=i[u],A=d!==null||m.partial===!0;t.range[u]=y.getBufferedTimes(g,d,A,S)}}),t.backtrack=t.loaded=null,Object.keys(t.range).length?t.buffered=!0:this.removeFragment(t.body))}},c.fragBuffered=function(h){var y=T(h),i=this.fragments[y];i&&(i.backtrack=i.loaded=null,i.buffered=!0)},c.getBufferedTimes=function(h,y,i,g){for(var d={time:[],partial:i},r=y?y.start:h.start,t=y?y.end:h.end,u=h.minEndPTS||t,m=h.maxStartPTS||r,S=0;S<g.length;S++){var A=g.start(S)-this.bufferPadding,_=g.end(S)+this.bufferPadding;if(m>=A&&u<=_){d.time.push({startPTS:Math.max(r,g.start(S)),endPTS:Math.min(t,g.end(S))});break}if(r<_&&t>A)d.partial=!0,d.time.push({startPTS:Math.max(r,g.start(S)),endPTS:Math.min(t,g.end(S))});else if(t<=A)break}return d},c.getPartialFragment=function(h){var y,i,g,d=null,r=0,t=this.bufferPadding,u=this.fragments;return Object.keys(u).forEach(function(m){var S=u[m];S&&E(S)&&(i=S.body.start-t,g=S.body.end+t,h>=i&&h<=g&&(y=Math.min(h-i,g-h),r<=y&&(d=S.body,r=y)))}),d},c.getState=function(h){var y=T(h),i=this.fragments[y];return i?i.buffered?E(i)?N.PARTIAL:N.OK:i.backtrack?N.BACKTRACKED:N.APPENDING:N.NOT_LOADED},c.backtrack=function(h,y){var i=T(h),g=this.fragments[i];if(!g||g.backtrack)return null;var d=g.backtrack=y||g.loaded;return g.loaded=null,d},c.getBacktrackData=function(h){var y=T(h),i=this.fragments[y];if(i){var g,d=i.backtrack;if(d!=null&&(g=d.payload)!==null&&g!==void 0&&g.byteLength)return d;this.removeFragment(h)}return null},c.isTimeBuffered=function(h,y,i){for(var g,d,r=0;r<i.length;r++){if(g=i.start(r)-this.bufferPadding,d=i.end(r)+this.bufferPadding,h>=g&&y<=d)return!0;if(y<=g)return!1}return!1},c.onFragLoaded=function(h,y){var i=y.frag,g=y.part;if(i.sn!=="initSegment"&&!i.bitrateTest&&!g){var d=T(i);this.fragments[d]={body:i,loaded:y,backtrack:null,buffered:!1,range:Object.create(null)}}},c.onBufferAppended=function(h,y){var i=this,g=y.frag,d=y.part,r=y.timeRanges;if(g.type===R.PlaylistLevelType.MAIN)if(this.activeFragment=g,d){var t=this.activeParts;t||(this.activeParts=t=[]),t.push(d)}else this.activeParts=null;this.timeRanges=r,Object.keys(r).forEach(function(u){var m=r[u];if(i.detectEvictedFragments(u,m),!d)for(var S=0;S<m.length;S++)g.appendedPTS=Math.max(m.end(S),g.appendedPTS||0)})},c.onFragBuffered=function(h,y){this.detectPartialFragments(y)},c.hasFragment=function(h){var y=T(h);return!!this.fragments[y]},c.removeFragmentsInRange=function(h,y,i){var g=this;Object.keys(this.fragments).forEach(function(d){var r=g.fragments[d];if(r&&r.buffered){var t=r.body;t.type===i&&t.start<y&&t.end>h&&g.removeFragment(t)}})},c.removeFragment=function(h){var y=T(h);h.stats.loaded=0,h.clearElementaryStreamInfo(),delete this.fragments[y]},c.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},l}();function E(l){var c,h;return l.buffered&&(((c=l.range.video)===null||c===void 0?void 0:c.partial)||((h=l.range.audio)===null||h===void 0?void 0:h.partial))}function T(l){return l.type+"_"+l.level+"_"+l.urlId+"_"+l.sn}},"./src/controller/gap-controller.ts":function(K,M,x){x.r(M),x.d(M,"STALL_MINIMUM_DURATION_MS",function(){return E}),x.d(M,"MAX_START_GAP_JUMP",function(){return T}),x.d(M,"SKIP_BUFFER_HOLE_STEP_SECONDS",function(){return l}),x.d(M,"SKIP_BUFFER_RANGE_START",function(){return c}),x.d(M,"default",function(){return h});var N=x("./src/utils/buffer-helper.ts"),C=x("./src/errors.ts"),R=x("./src/events.ts"),I=x("./src/utils/logger.ts"),E=250,T=2,l=.1,c=.05,h=function(){function y(g,d,r,t){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=g,this.media=d,this.fragmentTracker=r,this.hls=t}var i=y.prototype;return i.destroy=function(){this.hls=this.fragmentTracker=this.media=null},i.poll=function(g){var d=this.config,r=this.media,t=this.stalled,u=r.currentTime,m=r.seeking,S=this.seeking&&!m,A=!this.seeking&&m;if(this.seeking=m,u===g){if((A||S)&&(this.stalled=null),!r.paused&&!r.ended&&r.playbackRate!==0&&N.BufferHelper.getBuffered(r).length){var _=N.BufferHelper.bufferInfo(r,u,0),v=_.len>0,f=_.nextStart||0;if(v||f){if(m){var b=_.len>T,p=!f||f-u>T&&!this.fragmentTracker.getPartialFragment(u);if(b||p)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var k,P=Math.max(f,_.start||0)-u,j=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,U=!(j==null||(k=j.details)===null||k===void 0)&&k.live?2*j.details.targetduration:T;if(P>0&&P<=U)return void this._trySkipBufferHole(null)}var G=self.performance.now();if(t!==null){var ee=G-t;!m&&ee>=E&&this._reportStall(_.len);var ne=N.BufferHelper.bufferInfo(r,u,d.maxBufferHole);this._tryFixBufferStall(ne,ee)}else this.stalled=G}}}else if(this.moved=!0,t!==null){if(this.stallReported){var re=self.performance.now()-t;I.logger.warn("playback not stuck anymore @"+u+", after "+Math.round(re)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},i._tryFixBufferStall=function(g,d){var r=this.config,t=this.fragmentTracker,u=this.media.currentTime,m=t.getPartialFragment(u);m&&this._trySkipBufferHole(m)||g.len>r.maxBufferHole&&d>1e3*r.highBufferWatchdogPeriod&&(I.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},i._reportStall=function(g){var d=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,I.logger.warn("Playback stalling at @"+r.currentTime+" due to low buffer (buffer="+g+")"),d.trigger(R.Events.ERROR,{type:C.ErrorTypes.MEDIA_ERROR,details:C.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:g}))},i._trySkipBufferHole=function(g){for(var d=this.config,r=this.hls,t=this.media,u=t.currentTime,m=0,S=N.BufferHelper.getBuffered(t),A=0;A<S.length;A++){var _=S.start(A);if(u+d.maxBufferHole>=m&&u<_){var v=Math.max(_+c,t.currentTime+l);return I.logger.warn("skipping hole, adjusting currentTime from "+u+" to "+v),this.moved=!0,this.stalled=null,t.currentTime=v,g&&r.trigger(R.Events.ERROR,{type:C.ErrorTypes.MEDIA_ERROR,details:C.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+u+" to "+v,frag:g}),v}m=S.end(A)}return 0},i._tryNudgeBuffer=function(){var g=this.config,d=this.hls,r=this.media,t=r.currentTime,u=(this.nudgeRetry||0)+1;if(this.nudgeRetry=u,u<g.nudgeMaxRetry){var m=t+u*g.nudgeOffset;I.logger.warn("Nudging 'currentTime' from "+t+" to "+m),r.currentTime=m,d.trigger(R.Events.ERROR,{type:C.ErrorTypes.MEDIA_ERROR,details:C.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else I.logger.error("Playhead still not moving while enough data buffered @"+t+" after "+g.nudgeMaxRetry+" nudges"),d.trigger(R.Events.ERROR,{type:C.ErrorTypes.MEDIA_ERROR,details:C.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},y}()},"./src/controller/id3-track-controller.ts":function(K,M,x){x.r(M);var N=x("./src/events.ts"),C=x("./src/utils/texttrack-utils.ts"),R=x("./src/demux/id3.ts"),I=function(){function E(l){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=l,this._registerListeners()}var T=E.prototype;return T.destroy=function(){this._unregisterListeners()},T._registerListeners=function(){var l=this.hls;l.on(N.Events.MEDIA_ATTACHED,this.onMediaAttached,this),l.on(N.Events.MEDIA_DETACHING,this.onMediaDetaching,this),l.on(N.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),l.on(N.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},T._unregisterListeners=function(){var l=this.hls;l.off(N.Events.MEDIA_ATTACHED,this.onMediaAttached,this),l.off(N.Events.MEDIA_DETACHING,this.onMediaDetaching,this),l.off(N.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),l.off(N.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},T.onMediaAttached=function(l,c){this.media=c.media},T.onMediaDetaching=function(){this.id3Track&&(Object(C.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null)},T.getID3Track=function(l){if(this.media){for(var c=0;c<l.length;c++){var h=l[c];if(h.kind==="metadata"&&h.label==="id3")return Object(C.sendAddTrackEvent)(h,this.media),h}return this.media.addTextTrack("metadata","id3")}},T.onFragParsingMetadata=function(l,c){if(this.media){var h=c.frag,y=c.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,g=0;g<y.length;g++){var d=R.getID3Frames(y[g].data);if(d){var r=y[g].pts,t=g<y.length-1?y[g+1].pts:h.end;t-r<=0&&(t=r+.25);for(var u=0;u<d.length;u++){var m=d[u];if(!R.isTimeStampFrame(m)){var S=new i(r,t,"");S.value=m,this.id3Track.addCue(S)}}}}}},T.onBufferFlushing=function(l,c){var h=c.startOffset,y=c.endOffset,i=c.type;if(!i||i==="audio"){var g=this.id3Track;g&&Object(C.removeCuesInRange)(g,h,y)}},E}();M.default=I},"./src/controller/latency-controller.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return E});var N=x("./src/errors.ts"),C=x("./src/events.ts"),R=x("./src/utils/logger.ts");function I(T,l){for(var c=0;c<l.length;c++){var h=l[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(T,h.key,h)}}var E=function(){function T(y){var i=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return i.timeupdate()},this.hls=y,this.config=y.config,this.registerListeners()}var l,c,h=T.prototype;return h.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},h.registerListeners=function(){this.hls.on(C.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(C.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(C.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(C.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(C.Events.ERROR,this.onError,this)},h.unregisterListeners=function(){this.hls.off(C.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(C.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(C.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(C.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(C.Events.ERROR,this.onError)},h.onMediaAttached=function(y,i){this.media=i.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},h.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},h.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},h.onLevelUpdated=function(y,i){var g=i.details;this.levelDetails=g,g.advanced&&this.timeupdate(),!g.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},h.onError=function(y,i){i.details===N.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,R.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},h.timeupdate=function(){var y=this.media,i=this.levelDetails;if(y&&i){this.currentTime=y.currentTime;var g=this.computeLatency();if(g!==null){this._latency=g;var d=this.config,r=d.lowLatencyMode,t=d.maxLiveSyncPlaybackRate;if(r&&t!==1){var u=this.targetLatency;if(u!==null){var m=g-u,S=m<Math.min(this.maxLatency,u+i.targetduration);if(i.live&&S&&m>.05&&this.forwardBufferLength>1){var A=Math.min(2,Math.max(1,t)),_=Math.round(2/(1+Math.exp(-.75*m-this.edgeStalled))*20)/20;y.playbackRate=Math.min(A,Math.max(1,_))}else y.playbackRate!==1&&y.playbackRate!==0&&(y.playbackRate=1)}}}}},h.estimateLiveEdge=function(){var y=this.levelDetails;return y===null?null:y.edge+y.age},h.computeLatency=function(){var y=this.estimateLiveEdge();return y===null?null:y-this.currentTime},l=T,(c=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var y=this.config,i=this.levelDetails;return y.liveMaxLatencyDuration!==void 0?y.liveMaxLatencyDuration:i?y.liveMaxLatencyDurationCount*i.targetduration:0}},{key:"targetLatency",get:function(){var y=this.levelDetails;if(y===null)return null;var i=y.holdBack,g=y.partHoldBack,d=y.targetduration,r=this.config,t=r.liveSyncDuration,u=r.liveSyncDurationCount,m=r.lowLatencyMode,S=this.hls.userConfig,A=m&&g||i;(S.liveSyncDuration||S.liveSyncDurationCount||A===0)&&(A=t!==void 0?t:u*d);var _=d;return A+Math.min(1*this.stallCount,_)}},{key:"liveSyncPosition",get:function(){var y=this.estimateLiveEdge(),i=this.targetLatency,g=this.levelDetails;if(y===null||i===null||g===null)return null;var d=g.edge,r=y-i-this.edgeStalled,t=d-g.totalduration,u=d-(this.config.lowLatencyMode&&g.partTarget||g.targetduration);return Math.min(Math.max(t,r),u)}},{key:"drift",get:function(){var y=this.levelDetails;return y===null?1:y.drift}},{key:"edgeStalled",get:function(){var y=this.levelDetails;if(y===null)return 0;var i=3*(this.config.lowLatencyMode&&y.partTarget||y.targetduration);return Math.max(y.age-i,0)}},{key:"forwardBufferLength",get:function(){var y=this.media,i=this.levelDetails;if(!y||!i)return 0;var g=y.buffered.length;return g?y.buffered.end(g-1):i.edge-this.currentTime}}])&&I(l.prototype,c),T}()},"./src/controller/level-controller.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return g});var N=x("./src/types/level.ts"),C=x("./src/events.ts"),R=x("./src/errors.ts"),I=x("./src/utils/codecs.ts"),E=x("./src/controller/level-helper.ts"),T=x("./src/controller/base-playlist-controller.ts"),l=x("./src/types/loader.ts");function c(){return c=Object.assign||function(d){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(d[u]=t[u])}return d},c.apply(this,arguments)}function h(d,r){for(var t=0;t<r.length;t++){var u=r[t];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(d,u.key,u)}}function y(d,r){return y=Object.setPrototypeOf||function(t,u){return t.__proto__=u,t},y(d,r)}var i=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),g=function(d){var r,t;function u(_){var v;return(v=d.call(this,_,"[level-controller]")||this)._levels=[],v._firstLevel=-1,v._startLevel=void 0,v.currentLevelIndex=-1,v.manualLevelIndex=-1,v.onParsedComplete=void 0,v._registerListeners(),v}t=d,(r=u).prototype=Object.create(t.prototype),r.prototype.constructor=r,y(r,t);var m,S,A=u.prototype;return A._registerListeners=function(){var _=this.hls;_.on(C.Events.MANIFEST_LOADED,this.onManifestLoaded,this),_.on(C.Events.LEVEL_LOADED,this.onLevelLoaded,this),_.on(C.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),_.on(C.Events.FRAG_LOADED,this.onFragLoaded,this),_.on(C.Events.ERROR,this.onError,this)},A._unregisterListeners=function(){var _=this.hls;_.off(C.Events.MANIFEST_LOADED,this.onManifestLoaded,this),_.off(C.Events.LEVEL_LOADED,this.onLevelLoaded,this),_.off(C.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),_.off(C.Events.FRAG_LOADED,this.onFragLoaded,this),_.off(C.Events.ERROR,this.onError,this)},A.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,d.prototype.destroy.call(this)},A.startLoad=function(){this._levels.forEach(function(_){_.loadError=0}),d.prototype.startLoad.call(this)},A.onManifestLoaded=function(_,v){var f,b,p=[],k=[],P=[],j={},U=!1,G=!1,ee=!1;if(v.levels.forEach(function(W){var Te=W.attrs;U=U||!(!W.width||!W.height),G=G||!!W.videoCodec,ee=ee||!!W.audioCodec,i&&W.audioCodec&&W.audioCodec.indexOf("mp4a.40.34")!==-1&&(W.audioCodec=void 0);var Ue=W.bitrate+"-"+W.attrs.RESOLUTION+"-"+W.attrs.CODECS;(b=j[Ue])?b.url.push(W.url):(b=new N.Level(W),j[Ue]=b,p.push(b)),Te&&(Te.AUDIO&&Object(E.addGroupId)(b,"audio",Te.AUDIO),Te.SUBTITLES&&Object(E.addGroupId)(b,"text",Te.SUBTITLES))}),(U||G)&&ee&&(p=p.filter(function(W){var Te=W.videoCodec,Ue=W.width,ze=W.height;return!!Te||!(!Ue||!ze)})),p=p.filter(function(W){var Te=W.audioCodec,Ue=W.videoCodec;return(!Te||Object(I.isCodecSupportedInMp4)(Te,"audio"))&&(!Ue||Object(I.isCodecSupportedInMp4)(Ue,"video"))}),v.audioTracks&&(k=v.audioTracks.filter(function(W){return!W.audioCodec||Object(I.isCodecSupportedInMp4)(W.audioCodec,"audio")}),Object(E.assignTrackIdsByGroup)(k)),v.subtitles&&(P=v.subtitles,Object(E.assignTrackIdsByGroup)(P)),p.length>0){f=p[0].bitrate,p.sort(function(W,Te){return W.bitrate-Te.bitrate}),this._levels=p;for(var ne=0;ne<p.length;ne++)if(p[ne].bitrate===f){this._firstLevel=ne,this.log("manifest loaded, "+p.length+" level(s) found, first bitrate: "+f);break}var re=ee&&!G,oe={levels:p,audioTracks:k,subtitleTracks:P,firstLevel:this._firstLevel,stats:v.stats,audio:ee,video:G,altAudio:!re&&k.some(function(W){return!!W.url})};this.hls.trigger(C.Events.MANIFEST_PARSED,oe),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(C.Events.ERROR,{type:R.ErrorTypes.MEDIA_ERROR,details:R.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:v.url,reason:"no level with compatible codecs found in manifest"})},A.onError=function(_,v){if(d.prototype.onError.call(this,_,v),!v.fatal){var f=v.context,b=this._levels[this.currentLevelIndex];if(f&&(f.type===l.PlaylistContextType.AUDIO_TRACK&&b.audioGroupIds&&f.groupId===b.audioGroupIds[b.urlId]||f.type===l.PlaylistContextType.SUBTITLE_TRACK&&b.textGroupIds&&f.groupId===b.textGroupIds[b.urlId]))this.redundantFailover(this.currentLevelIndex);else{var p,k=!1,P=!0;switch(v.details){case R.ErrorDetails.FRAG_LOAD_ERROR:case R.ErrorDetails.FRAG_LOAD_TIMEOUT:case R.ErrorDetails.KEY_LOAD_ERROR:case R.ErrorDetails.KEY_LOAD_TIMEOUT:if(v.frag){var j=this._levels[v.frag.level];j?(j.fragmentError++,j.fragmentError>this.hls.config.fragLoadingMaxRetry&&(p=v.frag.level)):p=v.frag.level}break;case R.ErrorDetails.LEVEL_LOAD_ERROR:case R.ErrorDetails.LEVEL_LOAD_TIMEOUT:f&&(f.deliveryDirectives&&(P=!1),p=f.level),k=!0;break;case R.ErrorDetails.REMUX_ALLOC_ERROR:p=v.level,k=!0}p!==void 0&&this.recoverLevel(v,p,k,P)}}},A.recoverLevel=function(_,v,f,b){var p=_.details,k=this._levels[v];if(k.loadError++,f){if(!this.retryLoadingOrFail(_))return void(this.currentLevelIndex=-1);_.levelRetry=!0}if(b){var P=k.url.length;if(P>1&&k.loadError<P)_.levelRetry=!0,this.redundantFailover(v);else if(this.manualLevelIndex===-1){var j=v===0?this._levels.length-1:v-1;this.currentLevelIndex!==j&&this._levels[j].loadError===0&&(this.warn(p+": switch to "+j),_.levelRetry=!0,this.hls.nextAutoLevel=j)}}},A.redundantFailover=function(_){var v=this._levels[_],f=v.url.length;if(f>1){var b=(v.urlId+1)%f;this.warn("Switching to redundant URL-id "+b),this._levels.forEach(function(p){p.urlId=b}),this.level=_}},A.onFragLoaded=function(_,v){var f=v.frag;if(f!==void 0&&f.type===l.PlaylistLevelType.MAIN){var b=this._levels[f.level];b!==void 0&&(b.fragmentError=0,b.loadError=0)}},A.onLevelLoaded=function(_,v){var f,b,p=v.level,k=v.details,P=this._levels[p];if(!P)return this.warn("Invalid level index "+p),void((b=v.deliveryDirectives)!==null&&b!==void 0&&b.skip&&(k.deltaUpdateFailed=!0));p===this.currentLevelIndex?(P.fragmentError===0&&(P.loadError=0,this.retryCount=0),this.playlistLoaded(p,v,P.details)):(f=v.deliveryDirectives)!==null&&f!==void 0&&f.skip&&(k.deltaUpdateFailed=!0)},A.onAudioTrackSwitched=function(_,v){var f=this.hls.levels[this.currentLevelIndex];if(f&&f.audioGroupIds){for(var b=-1,p=this.hls.audioTracks[v.id].groupId,k=0;k<f.audioGroupIds.length;k++)if(f.audioGroupIds[k]===p){b=k;break}b!==f.urlId&&(f.urlId=b,this.startLoad())}},A.loadPlaylist=function(_){var v=this.currentLevelIndex,f=this._levels[v];if(this.canLoad&&f&&f.url.length>0){var b=f.urlId,p=f.url[b];if(_)try{p=_.addDirectives(p)}catch(k){this.warn("Could not construct new URL with HLS Delivery Directives: "+k)}this.log("Attempt loading level index "+v+(_?" at sn "+_.msn+" part "+_.part:"")+" with URL-id "+b+" "+p),this.clearTimer(),this.hls.trigger(C.Events.LEVEL_LOADING,{url:p,level:v,id:b,deliveryDirectives:_||null})}},A.removeLevel=function(_,v){var f=function(p,k){return k!==v},b=this._levels.filter(function(p,k){return k!==_||p.url.length>1&&v!==void 0&&(p.url=p.url.filter(f),p.audioGroupIds&&(p.audioGroupIds=p.audioGroupIds.filter(f)),p.textGroupIds&&(p.textGroupIds=p.textGroupIds.filter(f)),p.urlId=0,!0)}).map(function(p,k){var P=p.details;return P!=null&&P.fragments&&P.fragments.forEach(function(j){j.level=k}),p});this._levels=b,this.hls.trigger(C.Events.LEVELS_UPDATED,{levels:b})},m=u,(S=[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(_){var v,f=this._levels;if(f.length!==0&&(this.currentLevelIndex!==_||(v=f[_])===null||v===void 0||!v.details)){if(_<0||_>=f.length){var b=_<0;if(this.hls.trigger(C.Events.ERROR,{type:R.ErrorTypes.OTHER_ERROR,details:R.ErrorDetails.LEVEL_SWITCH_ERROR,level:_,fatal:b,reason:"invalid level idx"}),b)return;_=Math.min(_,f.length-1)}this.clearTimer();var p=this.currentLevelIndex,k=f[p],P=f[_];this.log("switching to level "+_+" from "+p),this.currentLevelIndex=_;var j=c({},P,{level:_,maxBitrate:P.maxBitrate,uri:P.uri,urlId:P.urlId});delete j._urlId,this.hls.trigger(C.Events.LEVEL_SWITCHING,j);var U=P.details;if(!U||U.live){var G=this.switchParams(P.uri,k==null?void 0:k.details);this.loadPlaylist(G)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(_){this.manualLevelIndex=_,this._startLevel===void 0&&(this._startLevel=_),_!==-1&&(this.level=_)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(_){this._firstLevel=_}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var _=this.hls.config.startLevel;return _!==void 0?_:this._firstLevel}return this._startLevel},set:function(_){this._startLevel=_}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(_){this.level=_,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=_)}}])&&h(m.prototype,S),u}(T.default)},"./src/controller/level-helper.ts":function(K,M,x){x.r(M),x.d(M,"addGroupId",function(){return R}),x.d(M,"assignTrackIdsByGroup",function(){return I}),x.d(M,"updatePTS",function(){return E}),x.d(M,"updateFragPTSDTS",function(){return l}),x.d(M,"mergeDetails",function(){return c}),x.d(M,"mapPartIntersection",function(){return h}),x.d(M,"mapFragmentIntersection",function(){return y}),x.d(M,"adjustSliding",function(){return i}),x.d(M,"addSliding",function(){return g}),x.d(M,"computeReloadInterval",function(){return d}),x.d(M,"getFragmentWithSN",function(){return r}),x.d(M,"getPartWith",function(){return t});var N=x("./src/polyfills/number.ts"),C=x("./src/utils/logger.ts");function R(u,m,S){switch(m){case"audio":u.audioGroupIds||(u.audioGroupIds=[]),u.audioGroupIds.push(S);break;case"text":u.textGroupIds||(u.textGroupIds=[]),u.textGroupIds.push(S)}}function I(u){var m={};u.forEach(function(S){var A=S.groupId||"";S.id=m[A]=m[A]||0,m[A]++})}function E(u,m,S){T(u[m],u[S])}function T(u,m){var S=m.startPTS;if(Object(N.isFiniteNumber)(S)){var A,_=0;m.sn>u.sn?(_=S-u.start,A=u):(_=u.start-S,A=m),A.duration!==_&&(A.duration=_)}else m.sn>u.sn?u.cc===m.cc&&u.minEndPTS?m.start=u.start+(u.minEndPTS-u.start):m.start=u.start+u.duration:m.start=Math.max(u.start-m.duration,0)}function l(u,m,S,A,_,v){A-S<=0&&(C.logger.warn("Fragment should have a positive duration",m),A=S+m.duration,v=_+m.duration);var f=S,b=A,p=m.startPTS,k=m.endPTS;if(Object(N.isFiniteNumber)(p)){var P=Math.abs(p-S);Object(N.isFiniteNumber)(m.deltaPTS)?m.deltaPTS=Math.max(P,m.deltaPTS):m.deltaPTS=P,f=Math.max(S,p),S=Math.min(S,p),_=Math.min(_,m.startDTS),b=Math.min(A,k),A=Math.max(A,k),v=Math.max(v,m.endDTS)}m.duration=A-S;var j=S-m.start;m.appendedPTS=A,m.start=m.startPTS=S,m.maxStartPTS=f,m.startDTS=_,m.endPTS=A,m.minEndPTS=b,m.endDTS=v;var U,G=m.sn;if(!u||G<u.startSN||G>u.endSN)return 0;var ee=G-u.startSN,ne=u.fragments;for(ne[ee]=m,U=ee;U>0;U--)T(ne[U],ne[U-1]);for(U=ee;U<ne.length-1;U++)T(ne[U],ne[U+1]);return u.fragmentHint&&T(ne[ne.length-1],u.fragmentHint),u.PTSKnown=u.alignedSliding=!0,j}function c(u,m){for(var S=null,A=u.fragments,_=A.length-1;_>=0;_--){var v=A[_].initSegment;if(v){S=v;break}}u.fragmentHint&&delete u.fragmentHint.endPTS;var f,b=0;if(y(u,m,function(G,ee){G.relurl&&(b=G.cc-ee.cc),Object(N.isFiniteNumber)(G.startPTS)&&Object(N.isFiniteNumber)(G.endPTS)&&(ee.start=ee.startPTS=G.startPTS,ee.startDTS=G.startDTS,ee.appendedPTS=G.appendedPTS,ee.maxStartPTS=G.maxStartPTS,ee.endPTS=G.endPTS,ee.endDTS=G.endDTS,ee.minEndPTS=G.minEndPTS,ee.duration=G.endPTS-G.startPTS,ee.duration&&(f=ee),m.PTSKnown=m.alignedSliding=!0),ee.elementaryStreams=G.elementaryStreams,ee.loader=G.loader,ee.stats=G.stats,ee.urlId=G.urlId,G.initSegment&&(ee.initSegment=G.initSegment,S=G.initSegment)}),S&&(m.fragmentHint?m.fragments.concat(m.fragmentHint):m.fragments).forEach(function(G){var ee;G.initSegment&&G.initSegment.relurl!==((ee=S)===null||ee===void 0?void 0:ee.relurl)||(G.initSegment=S)}),m.skippedSegments&&(m.deltaUpdateFailed=m.fragments.some(function(G){return!G}),m.deltaUpdateFailed)){C.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var p=m.skippedSegments;p--;)m.fragments.shift();m.startSN=m.fragments[0].sn,m.startCC=m.fragments[0].cc}var k=m.fragments;if(b){C.logger.warn("discontinuity sliding from playlist, take drift into account");for(var P=0;P<k.length;P++)k[P].cc+=b}m.skippedSegments&&(m.startCC=m.fragments[0].cc),h(u.partList,m.partList,function(G,ee){ee.elementaryStreams=G.elementaryStreams,ee.stats=G.stats}),f?l(m,f,f.startPTS,f.endPTS,f.startDTS,f.endDTS):i(u,m),k.length&&(m.totalduration=m.edge-k[0].start),m.driftStartTime=u.driftStartTime,m.driftStart=u.driftStart;var j=m.advancedDateTime;if(m.advanced&&j){var U=m.edge;m.driftStart||(m.driftStartTime=j,m.driftStart=U),m.driftEndTime=j,m.driftEnd=U}else m.driftEndTime=u.driftEndTime,m.driftEnd=u.driftEnd,m.advancedDateTime=u.advancedDateTime}function h(u,m,S){if(u&&m)for(var A=0,_=0,v=u.length;_<=v;_++){var f=u[_],b=m[_+A];f&&b&&f.index===b.index&&f.fragment.sn===b.fragment.sn?S(f,b):A--}}function y(u,m,S){for(var A=m.skippedSegments,_=Math.max(u.startSN,m.startSN)-m.startSN,v=(u.fragmentHint?1:0)+(A?m.endSN:Math.min(u.endSN,m.endSN))-m.startSN,f=m.startSN-u.startSN,b=m.fragmentHint?m.fragments.concat(m.fragmentHint):m.fragments,p=u.fragmentHint?u.fragments.concat(u.fragmentHint):u.fragments,k=_;k<=v;k++){var P=p[f+k],j=b[k];A&&!j&&k<A&&(j=m.fragments[k]=P),P&&j&&S(P,j)}}function i(u,m){var S=m.startSN+m.skippedSegments-u.startSN,A=u.fragments;S<0||S>=A.length||g(m,A[S].start)}function g(u,m){if(m){for(var S=u.fragments,A=u.skippedSegments;A<S.length;A++)S[A].start+=m;u.fragmentHint&&(u.fragmentHint.start+=m)}}function d(u,m){var S,A=1e3*u.levelTargetDuration,_=A/2,v=u.age,f=v>0&&v<3*A,b=m.loading.end-m.loading.start,p=u.availabilityDelay;if(u.updated===!1)if(f){var k=333*u.misses;S=Math.max(Math.min(_,2*b),k),u.availabilityDelay=(u.availabilityDelay||0)+S}else S=_;else f?(p=Math.min(p||A/2,v),u.availabilityDelay=p,S=p+A-v):S=A-b;return Math.round(S)}function r(u,m,S){if(!u||!u.details)return null;var A=u.details,_=A.fragments[m-A.startSN];return _||((_=A.fragmentHint)&&_.sn===m?_:m<A.startSN&&S&&S.sn===m?S:null)}function t(u,m,S){if(!u||!u.details)return null;var A=u.details.partList;if(A)for(var _=A.length;_--;){var v=A[_];if(v.index===S&&v.fragment.sn===m)return v}return null}},"./src/controller/stream-controller.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return u});var N=x("./src/polyfills/number.ts"),C=x("./src/controller/base-stream-controller.ts"),R=x("./src/is-supported.ts"),I=x("./src/events.ts"),E=x("./src/utils/buffer-helper.ts"),T=x("./src/controller/fragment-tracker.ts"),l=x("./src/types/loader.ts"),c=x("./src/loader/fragment.ts"),h=x("./src/demux/transmuxer-interface.ts"),y=x("./src/types/transmuxer.ts"),i=x("./src/controller/gap-controller.ts"),g=x("./src/errors.ts"),d=x("./src/utils/logger.ts");function r(m,S){for(var A=0;A<S.length;A++){var _=S[A];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}function t(m,S){return t=Object.setPrototypeOf||function(A,_){return A.__proto__=_,A},t(m,S)}var u=function(m){var S,A;function _(p,k){var P;return(P=m.call(this,p,k,"[stream-controller]")||this).audioCodecSwap=!1,P.gapController=null,P.level=-1,P._forceStartLoad=!1,P.altAudio=!1,P.audioOnly=!1,P.fragPlaying=null,P.onvplaying=null,P.onvseeked=null,P.fragLastKbps=0,P.stalled=!1,P.couldBacktrack=!1,P.audioCodecSwitch=!1,P.videoBuffer=null,P._registerListeners(),P}A=m,(S=_).prototype=Object.create(A.prototype),S.prototype.constructor=S,t(S,A);var v,f,b=_.prototype;return b._registerListeners=function(){var p=this.hls;p.on(I.Events.MEDIA_ATTACHED,this.onMediaAttached,this),p.on(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),p.on(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),p.on(I.Events.MANIFEST_PARSED,this.onManifestParsed,this),p.on(I.Events.LEVEL_LOADING,this.onLevelLoading,this),p.on(I.Events.LEVEL_LOADED,this.onLevelLoaded,this),p.on(I.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),p.on(I.Events.ERROR,this.onError,this),p.on(I.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),p.on(I.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),p.on(I.Events.BUFFER_CREATED,this.onBufferCreated,this),p.on(I.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),p.on(I.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),p.on(I.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b._unregisterListeners=function(){var p=this.hls;p.off(I.Events.MEDIA_ATTACHED,this.onMediaAttached,this),p.off(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),p.off(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),p.off(I.Events.MANIFEST_PARSED,this.onManifestParsed,this),p.off(I.Events.LEVEL_LOADED,this.onLevelLoaded,this),p.off(I.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),p.off(I.Events.ERROR,this.onError,this),p.off(I.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),p.off(I.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),p.off(I.Events.BUFFER_CREATED,this.onBufferCreated,this),p.off(I.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),p.off(I.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),p.off(I.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},b.startLoad=function(p){if(this.levels){var k=this.lastCurrentTime,P=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var j=P.startLevel;j===-1&&(P.config.testBandwidth?(j=0,this.bitrateTest=!0):j=P.nextAutoLevel),this.level=P.nextLoadLevel=j,this.loadedmetadata=!1}k>0&&p===-1&&(this.log("Override startPosition with lastCurrentTime @"+k.toFixed(3)),p=k),this.state=C.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=p,this.tick()}else this._forceStartLoad=!0,this.state=C.State.STOPPED},b.stopLoad=function(){this._forceStartLoad=!1,m.prototype.stopLoad.call(this)},b.doTick=function(){switch(this.state){case C.State.IDLE:this.doTickIdle();break;case C.State.WAITING_LEVEL:var p,k=this.levels,P=this.level,j=k==null||(p=k[P])===null||p===void 0?void 0:p.details;if(j&&(!j.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(j))break;this.state=C.State.IDLE;break}break;case C.State.FRAG_LOADING_WAITING_RETRY:var U,G=self.performance.now(),ee=this.retryDate;(!ee||G>=ee||(U=this.media)!==null&&U!==void 0&&U.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=C.State.IDLE)}this.onTickEnd()},b.onTickEnd=function(){m.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},b.doTickIdle=function(){var p,k,P=this.hls,j=this.levelLastLoaded,U=this.levels,G=this.media,ee=P.config,ne=P.nextLoadLevel;if(j!==null&&(G||!this.startFragRequested&&ee.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&U&&U[ne]){var re=U[ne];this.level=P.nextLoadLevel=ne;var oe=re.details;if(!oe||this.state===C.State.WAITING_LEVEL||oe.live&&this.levelLastLoaded!==ne)this.state=C.State.WAITING_LEVEL;else{var W=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:G,l.PlaylistLevelType.MAIN);if(W!==null&&!(W.len>=this.getMaxBufferLength(re.maxBitrate))){if(this._streamEnded(W,oe)){var Te={};return this.altAudio&&(Te.type="video"),this.hls.trigger(I.Events.BUFFER_EOS,Te),void(this.state=C.State.ENDED)}var Ue=W.end,ze=this.getNextFragment(Ue,oe);if(this.couldBacktrack&&!this.fragPrevious&&ze&&ze.sn!=="initSegment"){var le=ze.sn-oe.startSN;le>1&&(ze=oe.fragments[le-1],this.fragmentTracker.removeFragment(ze))}if(ze&&this.fragmentTracker.getState(ze)===T.FragmentState.OK&&this.nextLoadPosition>Ue){var Se=this.audioOnly&&!this.altAudio?c.ElementaryStreamTypes.AUDIO:c.ElementaryStreamTypes.VIDEO;this.afterBufferFlushed(G,Se,l.PlaylistLevelType.MAIN),ze=this.getNextFragment(this.nextLoadPosition,oe)}ze&&(!ze.initSegment||ze.initSegment.data||this.bitrateTest||(ze=ze.initSegment),((p=ze.decryptdata)===null||p===void 0?void 0:p.keyFormat)!=="identity"||(k=ze.decryptdata)!==null&&k!==void 0&&k.key?this.loadFragment(ze,oe,Ue):this.loadKey(ze,oe))}}}},b.loadFragment=function(p,k,P){var j,U=this.fragmentTracker.getState(p);if(this.fragCurrent=p,U===T.FragmentState.BACKTRACKED){var G=this.fragmentTracker.getBacktrackData(p);if(G)return this._handleFragmentLoadProgress(G),void this._handleFragmentLoadComplete(G);U=T.FragmentState.NOT_LOADED}U===T.FragmentState.NOT_LOADED||U===T.FragmentState.PARTIAL?p.sn==="initSegment"?this._loadInitSegment(p):this.bitrateTest?(p.bitrateTest=!0,this.log("Fragment "+p.sn+" of level "+p.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(p)):(this.startFragRequested=!0,m.prototype.loadFragment.call(this,p,k,P)):U===T.FragmentState.APPENDING?this.reduceMaxBufferLength(p.duration)&&this.fragmentTracker.removeFragment(p):((j=this.media)===null||j===void 0?void 0:j.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},b.getAppendedFrag=function(p){var k=this.fragmentTracker.getAppendedFrag(p,l.PlaylistLevelType.MAIN);return k&&"fragment"in k?k.fragment:k},b.getBufferedFrag=function(p){return this.fragmentTracker.getBufferedFrag(p,l.PlaylistLevelType.MAIN)},b.followingBufferedFrag=function(p){return p?this.getBufferedFrag(p.end+.5):null},b.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},b.nextLevelSwitch=function(){var p=this.levels,k=this.media;if(k!=null&&k.readyState){var P,j=this.getAppendedFrag(k.currentTime);if(j&&j.start>1&&this.flushMainBuffer(0,j.start-1),!k.paused&&p){var U=p[this.hls.nextLoadLevel],G=this.fragLastKbps;P=G&&this.fragCurrent?this.fragCurrent.duration*U.maxBitrate/(1e3*G)+1:0}else P=0;var ee=this.getBufferedFrag(k.currentTime+P);if(ee){var ne=this.followingBufferedFrag(ee);if(ne){this.abortCurrentFrag();var re=ne.maxStartPTS?ne.maxStartPTS:ne.start,oe=ne.duration,W=Math.max(ee.end,re+Math.min(Math.max(oe-this.config.maxFragLookUpTolerance,.5*oe),.75*oe));this.flushMainBuffer(W,Number.POSITIVE_INFINITY)}}}},b.abortCurrentFrag=function(){var p=this.fragCurrent;this.fragCurrent=null,p!=null&&p.loader&&p.loader.abort(),this.state===C.State.KEY_LOADING&&(this.state=C.State.IDLE),this.nextLoadPosition=this.getLoadPosition()},b.flushMainBuffer=function(p,k){m.prototype.flushMainBuffer.call(this,p,k,this.altAudio?"video":null)},b.onMediaAttached=function(p,k){m.prototype.onMediaAttached.call(this,p,k);var P=k.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),P.addEventListener("playing",this.onvplaying),P.addEventListener("seeked",this.onvseeked),this.gapController=new i.default(this.config,P,this.fragmentTracker,this.hls)},b.onMediaDetaching=function(){var p=this.media;p&&(p.removeEventListener("playing",this.onvplaying),p.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),m.prototype.onMediaDetaching.call(this)},b.onMediaPlaying=function(){this.tick()},b.onMediaSeeked=function(){var p=this.media,k=p?p.currentTime:null;Object(N.isFiniteNumber)(k)&&this.log("Media seeked to "+k.toFixed(3)),this.tick()},b.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(I.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},b.onManifestParsed=function(p,k){var P,j=!1,U=!1;k.levels.forEach(function(G){(P=G.audioCodec)&&(P.indexOf("mp4a.40.2")!==-1&&(j=!0),P.indexOf("mp4a.40.5")!==-1&&(U=!0))}),this.audioCodecSwitch=j&&U&&!Object(R.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=k.levels,this.startFragRequested=!1},b.onLevelLoading=function(p,k){var P=this.levels;if(P&&this.state===C.State.IDLE){var j=P[k.level];(!j.details||j.details.live&&this.levelLastLoaded!==k.level||this.waitForCdnTuneIn(j.details))&&(this.state=C.State.WAITING_LEVEL)}},b.onLevelLoaded=function(p,k){var P,j=this.levels,U=k.level,G=k.details,ee=G.totalduration;if(j){this.log("Level "+U+" loaded ["+G.startSN+","+G.endSN+"], cc ["+G.startCC+", "+G.endCC+"] duration:"+ee);var ne=this.fragCurrent;!ne||this.state!==C.State.FRAG_LOADING&&this.state!==C.State.FRAG_LOADING_WAITING_RETRY||ne.level!==k.level&&ne.loader&&(this.state=C.State.IDLE,ne.loader.abort());var re=j[U],oe=0;if(G.live||(P=re.details)!==null&&P!==void 0&&P.live){if(G.fragments[0]||(G.deltaUpdateFailed=!0),G.deltaUpdateFailed)return;oe=this.alignPlaylists(G,re.details)}if(re.details=G,this.levelLastLoaded=U,this.hls.trigger(I.Events.LEVEL_UPDATED,{details:G,level:U}),this.state===C.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(G))return;this.state=C.State.IDLE}this.startFragRequested?G.live&&this.synchronizeToLiveEdge(G):this.setStartPosition(G,oe),this.tick()}else this.warn("Levels were reset while loading level "+U)},b._handleFragmentLoadProgress=function(p){var k,P=p.frag,j=p.part,U=p.payload,G=this.levels;if(G){var ee=G[P.level],ne=ee.details;if(ne){var re=ee.videoCodec,oe=ne.PTSKnown||!ne.live,W=(k=P.initSegment)===null||k===void 0?void 0:k.data,Te=this._getAudioCodec(ee),Ue=this.transmuxer=this.transmuxer||new h.default(this.hls,l.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),ze=j?j.index:-1,le=ze!==-1,Se=new y.ChunkMetadata(P.level,P.sn,P.stats.chunkCount,U.byteLength,ze,le),be=this.initPTS[P.cc];Ue.push(U,W,Te,re,P,j,ne.totalduration,oe,Se,be)}else this.warn("Dropping fragment "+P.sn+" of level "+P.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+P.sn+" of level "+P.level+" will not be buffered")},b.onAudioTrackSwitching=function(p,k){var P=this.altAudio,j=!!k.url,U=k.id;if(!j){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var G=this.fragCurrent;G!=null&&G.loader&&(this.log("Switching to main audio track, cancel main fragment load"),G.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var ee=this.hls;P&&ee.trigger(I.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),ee.trigger(I.Events.AUDIO_TRACK_SWITCHED,{id:U})}},b.onAudioTrackSwitched=function(p,k){var P=k.id,j=!!this.hls.audioTracks[P].url;if(j){var U=this.videoBuffer;U&&this.mediaBuffer!==U&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=U)}this.altAudio=j,this.tick()},b.onBufferCreated=function(p,k){var P,j,U=k.tracks,G=!1;for(var ee in U){var ne=U[ee];if(ne.id==="main"){if(j=ee,P=ne,ee==="video"){var re=U[ee];re&&(this.videoBuffer=re.buffer)}}else G=!0}G&&P?(this.log("Alternate track found, use "+j+".buffered to schedule main fragment loading"),this.mediaBuffer=P.buffer):this.mediaBuffer=this.media},b.onFragBuffered=function(p,k){var P=k.frag,j=k.part;if(!P||P.type===l.PlaylistLevelType.MAIN){if(this.fragContextChanged(P))return this.warn("Fragment "+P.sn+(j?" p: "+j.index:"")+" of level "+P.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===C.State.PARSED&&(this.state=C.State.IDLE));var U=j?j.stats:P.stats;this.fragLastKbps=Math.round(8*U.total/(U.buffering.end-U.loading.first)),P.sn!=="initSegment"&&(this.fragPrevious=P),this.fragBufferedComplete(P,j)}},b.onError=function(p,k){switch(k.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:case g.ErrorDetails.KEY_LOAD_ERROR:case g.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(l.PlaylistLevelType.MAIN,k);break;case g.ErrorDetails.LEVEL_LOAD_ERROR:case g.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==C.State.ERROR&&(k.fatal?(this.warn(""+k.details),this.state=C.State.ERROR):k.levelRetry||this.state!==C.State.WAITING_LEVEL||(this.state=C.State.IDLE));break;case g.ErrorDetails.BUFFER_FULL_ERROR:if(k.parent==="main"&&(this.state===C.State.PARSING||this.state===C.State.PARSED)){var P=!0,j=this.getFwdBufferInfo(this.media,l.PlaylistLevelType.MAIN);j&&j.len>.5&&(P=!this.reduceMaxBufferLength(j.len)),P&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},b.checkBuffer=function(){var p=this.media,k=this.gapController;if(p&&k&&p.readyState){var P=E.BufferHelper.getBuffered(p);!this.loadedmetadata&&P.length?(this.loadedmetadata=!0,this.seekToStartPos()):k.poll(this.lastCurrentTime),this.lastCurrentTime=p.currentTime}},b.onFragLoadEmergencyAborted=function(){this.state=C.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},b.onBufferFlushed=function(p,k){var P=k.type;if(P!==c.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var j=(P===c.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(j,P,l.PlaylistLevelType.MAIN)}},b.onLevelsUpdated=function(p,k){this.levels=k.levels},b.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},b.seekToStartPos=function(){var p=this.media,k=p.currentTime,P=this.startPosition;if(P>=0&&k<P){if(p.seeking)return void d.logger.log("could not seek to "+P+", already seeking at "+k);var j=E.BufferHelper.getBuffered(p),U=(j.length?j.start(0):0)-P;U>0&&(U<this.config.maxBufferHole||U<this.config.maxFragLookUpTolerance)&&(d.logger.log("adjusting start position by "+U+" to match buffer start"),P+=U,this.startPosition=P),this.log("seek to target start position "+P+" from current time "+k),p.currentTime=P}},b._getAudioCodec=function(p){var k=this.config.defaultAudioCodec||p.audioCodec;return this.audioCodecSwap&&k&&(this.log("Swapping audio codec"),k=k.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),k},b._loadBitrateTestFrag=function(p){var k=this;this._doFragLoad(p).then(function(P){var j=k.hls;if(P&&!j.nextLoadLevel&&!k.fragContextChanged(p)){k.fragLoadError=0,k.state=C.State.IDLE,k.startFragRequested=!1,k.bitrateTest=!1;var U=p.stats;U.parsing.start=U.parsing.end=U.buffering.start=U.buffering.end=self.performance.now(),j.trigger(I.Events.FRAG_LOADED,P)}})},b._handleTransmuxComplete=function(p){var k,P="main",j=this.hls,U=p.remuxResult,G=p.chunkMeta,ee=this.getCurrentContext(G);if(!ee)return this.warn("The loading context changed while buffering fragment "+G.sn+" of level "+G.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(G.level);var ne=ee.frag,re=ee.part,oe=ee.level,W=U.video,Te=U.text,Ue=U.id3,ze=U.initSegment,le=this.altAudio?void 0:U.audio;if(!this.fragContextChanged(ne)){if(this.state=C.State.PARSING,ze){ze.tracks&&(this._bufferInitSegment(oe,ze.tracks,ne,G),j.trigger(I.Events.FRAG_PARSING_INIT_SEGMENT,{frag:ne,id:P,tracks:ze.tracks}));var Se=ze.initPTS,be=ze.timescale;Object(N.isFiniteNumber)(Se)&&(this.initPTS[ne.cc]=Se,j.trigger(I.Events.INIT_PTS_FOUND,{frag:ne,id:P,initPTS:Se,timescale:be}))}if(W&&U.independent!==!1){if(oe.details){var Y=W.startPTS,Q=W.endPTS,J=W.startDTS,fe=W.endDTS;if(re)re.elementaryStreams[W.type]={startPTS:Y,endPTS:Q,startDTS:J,endDTS:fe};else if(W.firstKeyFrame&&W.independent&&(this.couldBacktrack=!0),W.dropped&&W.independent){if(this.getLoadPosition()+this.config.maxBufferHole<Y)return void this.backtrack(ne);ne.setElementaryStreamInfo(W.type,ne.start,Q,ne.start,fe,!0)}ne.setElementaryStreamInfo(W.type,Y,Q,J,fe),this.bufferFragmentData(W,ne,re,G)}}else if(U.independent===!1)return void this.backtrack(ne);if(le){var Ce=le.startPTS,V=le.endPTS,H=le.startDTS,z=le.endDTS;re&&(re.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:Ce,endPTS:V,startDTS:H,endDTS:z}),ne.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,Ce,V,H,z),this.bufferFragmentData(le,ne,re,G)}if(Ue!=null&&(k=Ue.samples)!==null&&k!==void 0&&k.length){var X={frag:ne,id:P,samples:Ue.samples};j.trigger(I.Events.FRAG_PARSING_METADATA,X)}if(Te){var de={frag:ne,id:P,samples:Te.samples};j.trigger(I.Events.FRAG_PARSING_USERDATA,de)}}},b._bufferInitSegment=function(p,k,P,j){var U=this;if(this.state===C.State.PARSING){this.audioOnly=!!k.audio&&!k.video,this.altAudio&&!this.audioOnly&&delete k.audio;var G=k.audio,ee=k.video,ne=k.audiovideo;if(G){var re=p.audioCodec,oe=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(re&&(re=re.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),G.metadata.channelCount!==1&&oe.indexOf("firefox")===-1&&(re="mp4a.40.5")),oe.indexOf("android")!==-1&&G.container!=="audio/mpeg"&&(re="mp4a.40.2",this.log("Android: force audio codec to "+re)),p.audioCodec&&p.audioCodec!==re&&this.log('Swapping manifest audio codec "'+p.audioCodec+'" for "'+re+'"'),G.levelCodec=re,G.id="main",this.log("Init audio buffer, container:"+G.container+", codecs[selected/level/parsed]=["+(re||"")+"/"+(p.audioCodec||"")+"/"+G.codec+"]")}ee&&(ee.levelCodec=p.videoCodec,ee.id="main",this.log("Init video buffer, container:"+ee.container+", codecs[level/parsed]=["+(p.videoCodec||"")+"/"+ee.codec+"]")),ne&&this.log("Init audiovideo buffer, container:"+ne.container+", codecs[level/parsed]=["+(p.attrs.CODECS||"")+"/"+ne.codec+"]"),this.hls.trigger(I.Events.BUFFER_CODECS,k),Object.keys(k).forEach(function(W){var Te=k[W].initSegment;Te!=null&&Te.byteLength&&U.hls.trigger(I.Events.BUFFER_APPENDING,{type:W,data:Te,frag:P,part:null,chunkMeta:j,parent:P.type})}),this.tick()}},b.backtrack=function(p){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(p);var k=this.fragmentTracker.backtrack(p);this.fragPrevious=null,this.nextLoadPosition=p.start,k?this.resetFragmentLoading(p):this.state=C.State.BACKTRACKING},b.checkFragmentChanged=function(){var p=this.media,k=null;if(p&&p.readyState>1&&p.seeking===!1){var P=p.currentTime;if(E.BufferHelper.isBuffered(p,P)?k=this.getAppendedFrag(P):E.BufferHelper.isBuffered(p,P+.1)&&(k=this.getAppendedFrag(P+.1)),k){var j=this.fragPlaying,U=k.level;j&&k.sn===j.sn&&j.level===U&&k.urlId===j.urlId||(this.hls.trigger(I.Events.FRAG_CHANGED,{frag:k}),j&&j.level===U||this.hls.trigger(I.Events.LEVEL_SWITCHED,{level:U}),this.fragPlaying=k)}}},v=_,(f=[{key:"nextLevel",get:function(){var p=this.nextBufferedFrag;return p?p.level:-1}},{key:"currentLevel",get:function(){var p=this.media;if(p){var k=this.getAppendedFrag(p.currentTime);if(k)return k.level}return-1}},{key:"nextBufferedFrag",get:function(){var p=this.media;if(p){var k=this.getAppendedFrag(p.currentTime);return this.followingBufferedFrag(k)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&r(v.prototype,f),_}(C.default)},"./src/controller/subtitle-stream-controller.ts":function(K,M,x){x.r(M),x.d(M,"SubtitleStreamController",function(){return g});var N=x("./src/events.ts"),C=x("./src/utils/buffer-helper.ts"),R=x("./src/controller/fragment-finders.ts"),I=x("./src/utils/discontinuities.ts"),E=x("./src/controller/level-helper.ts"),T=x("./src/controller/fragment-tracker.ts"),l=x("./src/controller/base-stream-controller.ts"),c=x("./src/types/loader.ts"),h=x("./src/types/level.ts");function y(d,r){for(var t=0;t<r.length;t++){var u=r[t];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(d,u.key,u)}}function i(d,r){return i=Object.setPrototypeOf||function(t,u){return t.__proto__=u,t},i(d,r)}var g=function(d){var r,t;function u(_,v){var f;return(f=d.call(this,_,v,"[subtitle-stream-controller]")||this).levels=[],f.currentTrackId=-1,f.tracksBuffered=[],f.mainDetails=null,f._registerListeners(),f}t=d,(r=u).prototype=Object.create(t.prototype),r.prototype.constructor=r,i(r,t);var m,S,A=u.prototype;return A.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},A._registerListeners=function(){var _=this.hls;_.on(N.Events.MEDIA_ATTACHED,this.onMediaAttached,this),_.on(N.Events.MEDIA_DETACHING,this.onMediaDetaching,this),_.on(N.Events.MANIFEST_LOADING,this.onManifestLoading,this),_.on(N.Events.LEVEL_LOADED,this.onLevelLoaded,this),_.on(N.Events.ERROR,this.onError,this),_.on(N.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),_.on(N.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),_.on(N.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),_.on(N.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),_.on(N.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},A._unregisterListeners=function(){var _=this.hls;_.off(N.Events.MEDIA_ATTACHED,this.onMediaAttached,this),_.off(N.Events.MEDIA_DETACHING,this.onMediaDetaching,this),_.off(N.Events.MANIFEST_LOADING,this.onManifestLoading,this),_.off(N.Events.LEVEL_LOADED,this.onLevelLoaded,this),_.off(N.Events.ERROR,this.onError,this),_.off(N.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),_.off(N.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),_.off(N.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),_.off(N.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),_.off(N.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},A.startLoad=function(){this.stopLoad(),this.state=l.State.IDLE,this.setInterval(500),this.tick()},A.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},A.onLevelLoaded=function(_,v){this.mainDetails=v.details},A.onSubtitleFragProcessed=function(_,v){var f=v.frag,b=v.success;if(this.fragPrevious=f,this.state=l.State.IDLE,b){var p=this.tracksBuffered[this.currentTrackId];if(p){for(var k,P=f.start,j=0;j<p.length;j++)if(P>=p[j].start&&P<=p[j].end){k=p[j];break}var U=f.start+f.duration;k?k.end=U:(k={start:P,end:U},p.push(k)),this.fragmentTracker.fragBuffered(f)}}},A.onBufferFlushing=function(_,v){var f=v.startOffset,b=v.endOffset;if(f===0&&b!==Number.POSITIVE_INFINITY){var p=this.currentTrackId,k=this.levels;if(!k.length||!k[p]||!k[p].details)return;var P=b-k[p].details.targetduration;if(P<=0)return;v.endOffsetSubtitles=Math.max(0,P),this.tracksBuffered.forEach(function(j){for(var U=0;U<j.length;)if(j[U].end<=P)j.shift();else{if(!(j[U].start<P))break;j[U].start=P,U++}}),this.fragmentTracker.removeFragmentsInRange(f,P,c.PlaylistLevelType.SUBTITLE)}},A.onError=function(_,v){var f,b=v.frag;b&&b.type===c.PlaylistLevelType.SUBTITLE&&((f=this.fragCurrent)!==null&&f!==void 0&&f.loader&&this.fragCurrent.loader.abort(),this.state=l.State.IDLE)},A.onSubtitleTracksUpdated=function(_,v){var f=this,b=v.subtitleTracks;this.tracksBuffered=[],this.levels=b.map(function(p){return new h.Level(p)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(p){f.tracksBuffered[p.id]=[]}),this.mediaBuffer=null},A.onSubtitleTrackSwitch=function(_,v){if(this.currentTrackId=v.id,this.levels.length&&this.currentTrackId!==-1){var f=this.levels[this.currentTrackId];f!=null&&f.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,f&&this.setInterval(500)}else this.clearInterval()},A.onSubtitleTrackLoaded=function(_,v){var f,b=v.details,p=v.id,k=this.currentTrackId,P=this.levels;if(P.length){var j=P[k];if(!(p>=P.length||p!==k)&&j){if(this.mediaBuffer=this.mediaBufferTimeRanges,b.live||(f=j.details)!==null&&f!==void 0&&f.live){var U=this.mainDetails;if(b.deltaUpdateFailed||!U)return;var G=U.fragments[0];j.details?this.alignPlaylists(b,j.details)===0&&G&&Object(E.addSliding)(b,G.start):b.hasProgramDateTime&&U.hasProgramDateTime?Object(I.alignMediaPlaylistByPDT)(b,U):G&&Object(E.addSliding)(b,G.start)}j.details=b,this.levelLastLoaded=p,this.tick(),b.live&&!this.fragCurrent&&this.media&&this.state===l.State.IDLE&&(Object(R.findFragmentByPTS)(null,b.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),j.details=void 0))}}},A._handleFragmentLoadComplete=function(_){var v=_.frag,f=_.payload,b=v.decryptdata,p=this.hls;if(!this.fragContextChanged(v)&&f&&f.byteLength>0&&b&&b.key&&b.iv&&b.method==="AES-128"){var k=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(f),b.key.buffer,b.iv.buffer).then(function(P){var j=performance.now();p.trigger(N.Events.FRAG_DECRYPTED,{frag:v,payload:P,stats:{tstart:k,tdecrypt:j}})})}},A.doTick=function(){if(this.media){if(this.state===l.State.IDLE){var _,v=this.currentTrackId,f=this.levels;if(!f.length||!f[v]||!f[v].details)return;var b=f[v].details,p=b.targetduration,k=this.config,P=this.media,j=C.BufferHelper.bufferedInfo(this.mediaBufferTimeRanges,P.currentTime-p,k.maxBufferHole),U=j.end;if(j.len>this.getMaxBufferLength()+p)return;console.assert(b,"Subtitle track details are defined on idle subtitle stream controller tick");var G,ee=b.fragments,ne=ee.length,re=b.edge,oe=this.fragPrevious;if(U<re){var W=k.maxFragLookUpTolerance;!(G=Object(R.findFragmentByPTS)(oe,ee,U,W))&&oe&&oe.start<ee[0].start&&(G=ee[0])}else G=ee[ne-1];(_=G)!==null&&_!==void 0&&_.encrypted?this.loadKey(G,b):G&&this.fragmentTracker.getState(G)===T.FragmentState.NOT_LOADED&&this.loadFragment(G,b,U)}}else this.state=l.State.IDLE},A.loadFragment=function(_,v,f){this.fragCurrent=_,d.prototype.loadFragment.call(this,_,v,f)},m=u,(S=[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}])&&y(m.prototype,S),u}(l.default)},"./src/controller/subtitle-track-controller.ts":function(K,M,x){x.r(M);var N=x("./src/events.ts"),C=x("./src/utils/texttrack-utils.ts"),R=x("./src/controller/base-playlist-controller.ts"),I=x("./src/types/loader.ts");function E(h,y){for(var i=0;i<y.length;i++){var g=y[i];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,g.key,g)}}function T(h,y){return T=Object.setPrototypeOf||function(i,g){return i.__proto__=g,i},T(h,y)}var l=function(h){var y,i;function g(u){var m;return(m=h.call(this,u,"[subtitle-track-controller]")||this).media=null,m.tracks=[],m.groupId=null,m.tracksInGroup=[],m.trackId=-1,m.selectDefaultTrack=!0,m.queuedDefaultTrack=-1,m.trackChangeListener=function(){return m.onTextTracksChanged()},m.asyncPollTrackChange=function(){return m.pollTrackChange(0)},m.useTextTrackPolling=!1,m.subtitlePollingInterval=-1,m.subtitleDisplay=!0,m.registerListeners(),m}i=h,(y=g).prototype=Object.create(i.prototype),y.prototype.constructor=y,T(y,i);var d,r,t=g.prototype;return t.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,h.prototype.destroy.call(this)},t.registerListeners=function(){var u=this.hls;u.on(N.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.on(N.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.on(N.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.on(N.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.on(N.Events.LEVEL_LOADING,this.onLevelLoading,this),u.on(N.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),u.on(N.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),u.on(N.Events.ERROR,this.onError,this)},t.unregisterListeners=function(){var u=this.hls;u.off(N.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.off(N.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.off(N.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.off(N.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.off(N.Events.LEVEL_LOADING,this.onLevelLoading,this),u.off(N.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),u.off(N.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),u.off(N.Events.ERROR,this.onError,this)},t.onMediaAttached=function(u,m){this.media=m.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},t.pollTrackChange=function(u){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,u)},t.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),c(this.media.textTracks).forEach(function(u){Object(C.clearCurrentCues)(u)}),this.subtitleTrack=-1,this.media=null)},t.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},t.onManifestParsed=function(u,m){this.tracks=m.subtitleTracks},t.onSubtitleTrackLoaded=function(u,m){var S=m.id,A=m.details,_=this.trackId,v=this.tracksInGroup[_];if(v){var f=v.details;v.details=m.details,this.log("subtitle track "+S+" loaded ["+A.startSN+"-"+A.endSN+"]"),S===this.trackId&&(this.retryCount=0,this.playlistLoaded(S,m,f))}else this.warn("Invalid subtitle track id "+S)},t.onLevelLoading=function(u,m){this.switchLevel(m.level)},t.onLevelSwitching=function(u,m){this.switchLevel(m.level)},t.switchLevel=function(u){var m=this.hls.levels[u];if(m!=null&&m.textGroupIds){var S=m.textGroupIds[m.urlId];if(this.groupId!==S){var A=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,_=this.tracks.filter(function(b){return!S||b.groupId===S});this.tracksInGroup=_;var v=this.findTrackId(A==null?void 0:A.name)||this.findTrackId();this.groupId=S;var f={subtitleTracks:_};this.log("Updating subtitle tracks, "+_.length+' track(s) found in "'+S+'" group-id'),this.hls.trigger(N.Events.SUBTITLE_TRACKS_UPDATED,f),v!==-1&&this.setSubtitleTrack(v,A)}}},t.findTrackId=function(u){for(var m=this.tracksInGroup,S=0;S<m.length;S++){var A=m[S];if((!this.selectDefaultTrack||A.default)&&(!u||u===A.name))return A.id}return-1},t.onError=function(u,m){h.prototype.onError.call(this,u,m),!m.fatal&&m.context&&m.context.type===I.PlaylistContextType.SUBTITLE_TRACK&&m.context.id===this.trackId&&m.context.groupId===this.groupId&&this.retryLoadingOrFail(m)},t.loadPlaylist=function(u){var m=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(m)){var S=m.id,A=m.groupId,_=m.url;if(u)try{_=u.addDirectives(_)}catch(v){this.warn("Could not construct new URL with HLS Delivery Directives: "+v)}this.log("Loading subtitle playlist for id "+S),this.hls.trigger(N.Events.SUBTITLE_TRACK_LOADING,{url:_,id:S,groupId:A,deliveryDirectives:u||null})}},t.toggleTrackModes=function(u){var m=this,S=this.media,A=this.subtitleDisplay,_=this.trackId;if(S){var v=c(S.textTracks),f=v.filter(function(k){return k.groupId===m.groupId});if(u===-1)[].slice.call(v).forEach(function(k){k.mode="disabled"});else{var b=f[_];b&&(b.mode="disabled")}var p=f[u];p&&(p.mode=A?"showing":"hidden")}},t.setSubtitleTrack=function(u,m){var S,A=this.tracksInGroup;if(this.media){if(this.trackId!==u&&this.toggleTrackModes(u),!(this.trackId===u&&(u===-1||(S=A[u])!==null&&S!==void 0&&S.details)||u<-1||u>=A.length)){this.clearTimer();var _=A[u];if(this.log("Switching to subtitle track "+u),this.trackId=u,_){var v=_.id,f=_.groupId,b=f===void 0?"":f,p=_.name,k=_.type,P=_.url;this.hls.trigger(N.Events.SUBTITLE_TRACK_SWITCH,{id:v,groupId:b,name:p,type:k,url:P});var j=this.switchParams(_.url,m==null?void 0:m.details);this.loadPlaylist(j)}else this.hls.trigger(N.Events.SUBTITLE_TRACK_SWITCH,{id:u})}}else this.queuedDefaultTrack=u},t.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var u=-1,m=c(this.media.textTracks),S=0;S<m.length;S++)if(m[S].mode==="hidden")u=S;else if(m[S].mode==="showing"){u=S;break}this.subtitleTrack!==u&&(this.subtitleTrack=u)}},d=g,(r=[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(u){this.selectDefaultTrack=!1;var m=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(u,m)}}])&&E(d.prototype,r),g}(R.default);function c(h){for(var y=[],i=0;i<h.length;i++){var g=h[i];g.kind==="subtitles"&&g.label&&y.push(h[i])}return y}M.default=l},"./src/controller/timeline-controller.ts":function(K,M,x){x.r(M),x.d(M,"TimelineController",function(){return y});var N=x("./src/polyfills/number.ts"),C=x("./src/events.ts"),R=x("./src/utils/cea-608-parser.ts"),I=x("./src/utils/output-filter.ts"),E=x("./src/utils/webvtt-parser.ts"),T=x("./src/utils/texttrack-utils.ts"),l=x("./src/utils/imsc1-ttml-parser.ts"),c=x("./src/types/loader.ts"),h=x("./src/utils/logger.ts"),y=function(){function g(r){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=r,this.config=r.config,this.Cues=r.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var t=new I.default(this,"textTrack1"),u=new I.default(this,"textTrack2"),m=new I.default(this,"textTrack3"),S=new I.default(this,"textTrack4");this.cea608Parser1=new R.default(1,t,u),this.cea608Parser2=new R.default(3,m,S)}r.on(C.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),r.on(C.Events.MEDIA_DETACHING,this.onMediaDetaching,this),r.on(C.Events.MANIFEST_LOADING,this.onManifestLoading,this),r.on(C.Events.MANIFEST_LOADED,this.onManifestLoaded,this),r.on(C.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),r.on(C.Events.FRAG_LOADING,this.onFragLoading,this),r.on(C.Events.FRAG_LOADED,this.onFragLoaded,this),r.on(C.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),r.on(C.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),r.on(C.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),r.on(C.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),r.on(C.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var d=g.prototype;return d.destroy=function(){var r=this.hls;r.off(C.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),r.off(C.Events.MEDIA_DETACHING,this.onMediaDetaching,this),r.off(C.Events.MANIFEST_LOADING,this.onManifestLoading,this),r.off(C.Events.MANIFEST_LOADED,this.onManifestLoaded,this),r.off(C.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),r.off(C.Events.FRAG_LOADING,this.onFragLoading,this),r.off(C.Events.FRAG_LOADED,this.onFragLoaded,this),r.off(C.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),r.off(C.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),r.off(C.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),r.off(C.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),r.off(C.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},d.addCues=function(r,t,u,m,S){for(var A,_,v,f,b=!1,p=S.length;p--;){var k=S[p],P=(A=k[0],_=k[1],v=t,f=u,Math.min(_,f)-Math.max(A,v));if(P>=0&&(k[0]=Math.min(k[0],t),k[1]=Math.max(k[1],u),b=!0,P/(u-t)>.5))return}if(b||S.push([t,u]),this.config.renderTextTracksNatively){var j=this.captionsTracks[r];this.Cues.newCue(j,t,u,m)}else{var U=this.Cues.newCue(null,t,u,m);this.hls.trigger(C.Events.CUES_PARSED,{type:"captions",cues:U,track:r})}},d.onInitPtsFound=function(r,t){var u=this,m=t.frag,S=t.id,A=t.initPTS,_=t.timescale,v=this.unparsedVttFrags;S==="main"&&(this.initPTS[m.cc]=A,this.timescale[m.cc]=_),v.length&&(this.unparsedVttFrags=[],v.forEach(function(f){u.onFragLoaded(C.Events.FRAG_LOADED,f)}))},d.getExistingTrack=function(r){var t=this.media;if(t)for(var u=0;u<t.textTracks.length;u++){var m=t.textTracks[u];if(m[r])return m}return null},d.createCaptionsTrack=function(r){this.config.renderTextTracksNatively?this.createNativeTrack(r):this.createNonNativeTrack(r)},d.createNativeTrack=function(r){if(!this.captionsTracks[r]){var t=this.captionsProperties,u=this.captionsTracks,m=this.media,S=t[r],A=S.label,_=S.languageCode,v=this.getExistingTrack(r);if(v)u[r]=v,Object(T.clearCurrentCues)(u[r]),Object(T.sendAddTrackEvent)(u[r],m);else{var f=this.createTextTrack("captions",A,_);f&&(f[r]=!0,u[r]=f)}}},d.createNonNativeTrack=function(r){if(!this.nonNativeCaptionsTracks[r]){var t=this.captionsProperties[r];if(t){var u={_id:r,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[r]=u,this.hls.trigger(C.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[u]})}}},d.createTextTrack=function(r,t,u){var m=this.media;if(m)return m.addTextTrack(r,t,u)},d.onMediaAttaching=function(r,t){this.media=t.media,this._cleanTracks()},d.onMediaDetaching=function(){var r=this.captionsTracks;Object.keys(r).forEach(function(t){Object(T.clearCurrentCues)(r[t]),delete r[t]}),this.nonNativeCaptionsTracks={}},d.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},d._cleanTracks=function(){var r=this.media;if(r){var t=r.textTracks;if(t)for(var u=0;u<t.length;u++)Object(T.clearCurrentCues)(t[u])}},d.onSubtitleTracksUpdated=function(r,t){var u=this;this.textTracks=[];var m=t.subtitleTracks||[],S=m.some(function(f){return f.textCodec===l.IMSC1_CODEC});if(this.config.enableWebVTT||S&&this.config.enableIMSC1){var A=this.tracks&&m&&this.tracks.length===m.length;if(this.tracks=m||[],this.config.renderTextTracksNatively){var _=this.media?this.media.textTracks:[];this.tracks.forEach(function(f,b){var p;if(b<_.length){for(var k=null,P=0;P<_.length;P++)if(i(_[P],f)){k=_[P];break}k&&(p=k)}p?Object(T.clearCurrentCues)(p):(p=u.createTextTrack("subtitles",f.name,f.lang))&&(p.mode="disabled"),p&&(p.groupId=f.groupId,u.textTracks.push(p))})}else if(!A&&this.tracks&&this.tracks.length){var v=this.tracks.map(function(f){return{label:f.name,kind:f.type.toLowerCase(),default:f.default,subtitleTrack:f}});this.hls.trigger(C.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:v})}}},d.onManifestLoaded=function(r,t){var u=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(function(m){var S=/(?:CC|SERVICE)([1-4])/.exec(m.instreamId);if(S){var A="textTrack"+S[1],_=u.captionsProperties[A];_&&(_.label=m.name,m.lang&&(_.languageCode=m.lang),_.media=m)}})},d.onFragLoading=function(r,t){var u=this.cea608Parser1,m=this.cea608Parser2,S=this.lastSn,A=this.lastPartIndex;if(this.enabled&&u&&m&&t.frag.type===c.PlaylistLevelType.MAIN){var _,v,f=t.frag.sn,b=(_=t==null||(v=t.part)===null||v===void 0?void 0:v.index)!=null?_:-1;f===S+1||f===S&&b===A+1||(u.reset(),m.reset()),this.lastSn=f,this.lastPartIndex=b}},d.onFragLoaded=function(r,t){var u=t.frag,m=t.payload,S=this.initPTS,A=this.unparsedVttFrags;if(u.type===c.PlaylistLevelType.SUBTITLE)if(m.byteLength){if(!Object(N.isFiniteNumber)(S[u.cc]))return A.push(t),void(S.length&&this.hls.trigger(C.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:u,error:new Error("Missing initial subtitle PTS")}));var _=u.decryptdata,v="stats"in t;if(_==null||_.key==null||_.method!=="AES-128"||v){var f=this.tracks[u.level],b=this.vttCCs;b[u.cc]||(b[u.cc]={start:u.start,prevCC:this.prevCC,new:!0},this.prevCC=u.cc),f&&f.textCodec===l.IMSC1_CODEC?this._parseIMSC1(u,m):this._parseVTTs(u,m,b)}}else this.hls.trigger(C.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:u,error:new Error("Empty subtitle payload")})},d._parseIMSC1=function(r,t){var u=this,m=this.hls;Object(l.parseIMSC1)(t,this.initPTS[r.cc],this.timescale[r.cc],function(S){u._appendCues(S,r.level),m.trigger(C.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},function(S){h.logger.log("Failed to parse IMSC1: "+S),m.trigger(C.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:S})})},d._parseVTTs=function(r,t,u){var m=this,S=this.hls;Object(E.parseWebVTT)(t,this.initPTS[r.cc],this.timescale[r.cc],u,r.cc,r.start,function(A){m._appendCues(A,r.level),S.trigger(C.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},function(A){m._fallbackToIMSC1(r,t),h.logger.log("Failed to parse VTT cue: "+A),S.trigger(C.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:A})})},d._fallbackToIMSC1=function(r,t){var u=this,m=this.tracks[r.level];m.textCodec||Object(l.parseIMSC1)(t,this.initPTS[r.cc],this.timescale[r.cc],function(){m.textCodec=l.IMSC1_CODEC,u._parseIMSC1(r,t)},function(){m.textCodec="wvtt"})},d._appendCues=function(r,t){var u=this.hls;if(this.config.renderTextTracksNatively){var m=this.textTracks[t];if(m.mode==="disabled")return;r.forEach(function(A){return Object(T.addCueToTrack)(m,A)})}else{var S=this.tracks[t].default?"default":"subtitles"+t;u.trigger(C.Events.CUES_PARSED,{type:"subtitles",cues:r,track:S})}},d.onFragDecrypted=function(r,t){var u=t.frag;if(u.type===c.PlaylistLevelType.SUBTITLE){if(!Object(N.isFiniteNumber)(this.initPTS[u.cc]))return void this.unparsedVttFrags.push(t);this.onFragLoaded(C.Events.FRAG_LOADED,t)}},d.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},d.onFragParsingUserdata=function(r,t){var u=this.cea608Parser1,m=this.cea608Parser2;if(this.enabled&&u&&m)for(var S=0;S<t.samples.length;S++){var A=t.samples[S].bytes;if(A){var _=this.extractCea608Data(A);u.addData(t.samples[S].pts,_[0]),m.addData(t.samples[S].pts,_[1])}}},d.onBufferFlushing=function(r,t){var u=t.startOffset,m=t.endOffset,S=t.endOffsetSubtitles,A=t.type,_=this.media;if(_&&!(_.currentTime<m)){if(!A||A==="video"){var v=this.captionsTracks;Object.keys(v).forEach(function(b){return Object(T.removeCuesInRange)(v[b],u,m)})}if(this.config.renderTextTracksNatively&&u===0&&S!==void 0){var f=this.textTracks;Object.keys(f).forEach(function(b){return Object(T.removeCuesInRange)(f[b],u,S)})}}},d.extractCea608Data=function(r){for(var t=31&r[0],u=2,m=[[],[]],S=0;S<t;S++){var A=r[u++],_=127&r[u++],v=127&r[u++],f=3&A;_===0&&v===0||4&A&&(f!==0&&f!==1||(m[f].push(_),m[f].push(v)))}return m},g}();function i(g,d){return g&&g.label===d.name&&!(g.textTrack1||g.textTrack2)}},"./src/crypt/aes-crypto.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return N});var N=function(){function C(R,I){this.subtle=void 0,this.aesIV=void 0,this.subtle=R,this.aesIV=I}return C.prototype.decrypt=function(R,I){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},I,R)},C}()},"./src/crypt/aes-decryptor.ts":function(K,M,x){x.r(M),x.d(M,"removePadding",function(){return C}),x.d(M,"default",function(){return R});var N=x("./src/utils/typed-array.ts");function C(I){var E=I.byteLength,T=E&&new DataView(I.buffer).getUint8(E-1);return T?Object(N.sliceUint8)(I,0,E-T):I}var R=function(){function I(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var E=I.prototype;return E.uint8ArrayToUint32Array_=function(T){for(var l=new DataView(T),c=new Uint32Array(4),h=0;h<4;h++)c[h]=l.getUint32(4*h);return c},E.initTable=function(){var T=this.sBox,l=this.invSBox,c=this.subMix,h=c[0],y=c[1],i=c[2],g=c[3],d=this.invSubMix,r=d[0],t=d[1],u=d[2],m=d[3],S=new Uint32Array(256),A=0,_=0,v=0;for(v=0;v<256;v++)S[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var f=_^_<<1^_<<2^_<<3^_<<4;f=f>>>8^255&f^99,T[A]=f,l[f]=A;var b=S[A],p=S[b],k=S[p],P=257*S[f]^16843008*f;h[A]=P<<24|P>>>8,y[A]=P<<16|P>>>16,i[A]=P<<8|P>>>24,g[A]=P,P=16843009*k^65537*p^257*b^16843008*A,r[f]=P<<24|P>>>8,t[f]=P<<16|P>>>16,u[f]=P<<8|P>>>24,m[f]=P,A?(A=b^S[S[S[k^b]]],_^=S[S[_]]):A=_=1}},E.expandKey=function(T){for(var l=this.uint8ArrayToUint32Array_(T),c=!0,h=0;h<l.length&&c;)c=l[h]===this.key[h],h++;if(!c){this.key=l;var y=this.keySize=l.length;if(y!==4&&y!==6&&y!==8)throw new Error("Invalid aes key size="+y);var i,g,d,r,t=this.ksRows=4*(y+6+1),u=this.keySchedule=new Uint32Array(t),m=this.invKeySchedule=new Uint32Array(t),S=this.sBox,A=this.rcon,_=this.invSubMix,v=_[0],f=_[1],b=_[2],p=_[3];for(i=0;i<t;i++)i<y?d=u[i]=l[i]:(r=d,i%y==0?(r=S[(r=r<<8|r>>>24)>>>24]<<24|S[r>>>16&255]<<16|S[r>>>8&255]<<8|S[255&r],r^=A[i/y|0]<<24):y>6&&i%y==4&&(r=S[r>>>24]<<24|S[r>>>16&255]<<16|S[r>>>8&255]<<8|S[255&r]),u[i]=d=(u[i-y]^r)>>>0);for(g=0;g<t;g++)i=t-g,r=3&g?u[i]:u[i-4],m[g]=g<4||i<=4?r:v[S[r>>>24]]^f[S[r>>>16&255]]^b[S[r>>>8&255]]^p[S[255&r]],m[g]=m[g]>>>0}},E.networkToHostOrderSwap=function(T){return T<<24|(65280&T)<<8|(16711680&T)>>8|T>>>24},E.decrypt=function(T,l,c){for(var h,y,i,g,d,r,t,u,m,S,A,_,v,f,b=this.keySize+6,p=this.invKeySchedule,k=this.invSBox,P=this.invSubMix,j=P[0],U=P[1],G=P[2],ee=P[3],ne=this.uint8ArrayToUint32Array_(c),re=ne[0],oe=ne[1],W=ne[2],Te=ne[3],Ue=new Int32Array(T),ze=new Int32Array(Ue.length),le=this.networkToHostOrderSwap;l<Ue.length;){for(m=le(Ue[l]),S=le(Ue[l+1]),A=le(Ue[l+2]),_=le(Ue[l+3]),d=m^p[0],r=_^p[1],t=A^p[2],u=S^p[3],v=4,f=1;f<b;f++)h=j[d>>>24]^U[r>>16&255]^G[t>>8&255]^ee[255&u]^p[v],y=j[r>>>24]^U[t>>16&255]^G[u>>8&255]^ee[255&d]^p[v+1],i=j[t>>>24]^U[u>>16&255]^G[d>>8&255]^ee[255&r]^p[v+2],g=j[u>>>24]^U[d>>16&255]^G[r>>8&255]^ee[255&t]^p[v+3],d=h,r=y,t=i,u=g,v+=4;h=k[d>>>24]<<24^k[r>>16&255]<<16^k[t>>8&255]<<8^k[255&u]^p[v],y=k[r>>>24]<<24^k[t>>16&255]<<16^k[u>>8&255]<<8^k[255&d]^p[v+1],i=k[t>>>24]<<24^k[u>>16&255]<<16^k[d>>8&255]<<8^k[255&r]^p[v+2],g=k[u>>>24]<<24^k[d>>16&255]<<16^k[r>>8&255]<<8^k[255&t]^p[v+3],ze[l]=le(h^re),ze[l+1]=le(g^oe),ze[l+2]=le(i^W),ze[l+3]=le(y^Te),re=m,oe=S,W=A,Te=_,l+=4}return ze.buffer},I}()},"./src/crypt/decrypter.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return l});var N=x("./src/crypt/aes-crypto.ts"),C=x("./src/crypt/fast-aes-key.ts"),R=x("./src/crypt/aes-decryptor.ts"),I=x("./src/utils/logger.ts"),E=x("./src/utils/mp4-tools.ts"),T=x("./src/utils/typed-array.ts"),l=function(){function c(y,i,g){var d=(g===void 0?{}:g).removePKCS7Padding,r=d===void 0||d;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=y,this.config=i,this.removePKCS7Padding=r,r)try{var t=self.crypto;t&&(this.subtle=t.subtle||t.webkitSubtle)}catch{}this.subtle===null&&(this.config.enableSoftwareAES=!0)}var h=c.prototype;return h.destroy=function(){this.observer=null},h.isSync=function(){return this.config.enableSoftwareAES},h.flush=function(){var y=this.currentResult;if(y){var i=new Uint8Array(y);return this.reset(),this.removePKCS7Padding?Object(R.removePadding)(i):i}this.reset()},h.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},h.decrypt=function(y,i,g,d){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(y),i,g);var r=this.flush();r&&d(r.buffer)}else this.webCryptoDecrypt(new Uint8Array(y),i,g).then(d)},h.softwareDecrypt=function(y,i,g){var d=this.currentIV,r=this.currentResult,t=this.remainderData;this.logOnce("JS AES decrypt"),t&&(y=Object(E.appendUint8Array)(t,y),this.remainderData=null);var u=this.getValidChunk(y);if(!u.length)return null;d&&(g=d);var m=this.softwareDecrypter;m||(m=this.softwareDecrypter=new R.default),m.expandKey(i);var S=r;return this.currentResult=m.decrypt(u.buffer,0,g),this.currentIV=Object(T.sliceUint8)(u,-16).buffer,S||null},h.webCryptoDecrypt=function(y,i,g){var d=this,r=this.subtle;return this.key===i&&this.fastAesKey||(this.key=i,this.fastAesKey=new C.default(r,i)),this.fastAesKey.expandKey().then(function(t){return r?new N.default(r,g).decrypt(y.buffer,t):Promise.reject(new Error("web crypto not initialized"))}).catch(function(t){return d.onWebCryptoError(t,y,i,g)})},h.onWebCryptoError=function(y,i,g,d){return I.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",y),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(i,g,d)},h.getValidChunk=function(y){var i=y,g=y.length-y.length%16;return g!==y.length&&(i=Object(T.sliceUint8)(y,0,g),this.remainderData=Object(T.sliceUint8)(y,g)),i},h.logOnce=function(y){this.logEnabled&&(I.logger.log("[decrypter.ts]: "+y),this.logEnabled=!1)},c}()},"./src/crypt/fast-aes-key.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return N});var N=function(){function C(R,I){this.subtle=void 0,this.key=void 0,this.subtle=R,this.key=I}return C.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},C}()},"./src/demux/aacdemuxer.ts":function(K,M,x){x.r(M);var N=x("./src/demux/base-audio-demuxer.ts"),C=x("./src/demux/adts.ts"),R=x("./src/utils/logger.ts"),I=x("./src/demux/id3.ts");function E(l,c){return E=Object.setPrototypeOf||function(h,y){return h.__proto__=y,h},E(l,c)}var T=function(l){var c,h;function y(g,d){var r;return(r=l.call(this)||this).observer=void 0,r.config=void 0,r.observer=g,r.config=d,r}h=l,(c=y).prototype=Object.create(h.prototype),c.prototype.constructor=c,E(c,h);var i=y.prototype;return i.resetInitSegment=function(g,d,r){l.prototype.resetInitSegment.call(this,g,d,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:g,duration:r,inputTimeScale:9e4,dropped:0}},y.probe=function(g){if(!g)return!1;for(var d=(I.getID3Data(g,0)||[]).length,r=g.length;d<r;d++)if(C.probe(g,d))return R.logger.log("ADTS sync word found !"),!0;return!1},i.canParse=function(g,d){return C.canParse(g,d)},i.appendFrame=function(g,d,r){C.initTrackConfig(g,this.observer,d,r,g.manifestCodec);var t=C.appendFrame(g,d,r,this.initPTS,this.frameIndex);if(t&&t.missing===0)return t},y}(N.default);T.minProbeByteLength=9,M.default=T},"./src/demux/adts.ts":function(K,M,x){x.r(M),x.d(M,"getAudioConfig",function(){return I}),x.d(M,"isHeaderPattern",function(){return E}),x.d(M,"getHeaderLength",function(){return T}),x.d(M,"getFullFrameLength",function(){return l}),x.d(M,"canGetFrameLength",function(){return c}),x.d(M,"isHeader",function(){return h}),x.d(M,"canParse",function(){return y}),x.d(M,"probe",function(){return i}),x.d(M,"initTrackConfig",function(){return g}),x.d(M,"getFrameDuration",function(){return d}),x.d(M,"parseFrameHeader",function(){return r}),x.d(M,"appendFrame",function(){return t});var N=x("./src/utils/logger.ts"),C=x("./src/errors.ts"),R=x("./src/events.ts");function I(u,m,S,A){var _,v,f,b,p=navigator.userAgent.toLowerCase(),k=A,P=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];_=1+((192&m[S+2])>>>6);var j=(60&m[S+2])>>>2;if(!(j>P.length-1))return f=(1&m[S+2])<<2,f|=(192&m[S+3])>>>6,N.logger.log("manifest codec:"+A+", ADTS type:"+_+", samplingIndex:"+j),/firefox/i.test(p)?j>=6?(_=5,b=new Array(4),v=j-3):(_=2,b=new Array(2),v=j):p.indexOf("android")!==-1?(_=2,b=new Array(2),v=j):(_=5,b=new Array(4),A&&(A.indexOf("mp4a.40.29")!==-1||A.indexOf("mp4a.40.5")!==-1)||!A&&j>=6?v=j-3:((A&&A.indexOf("mp4a.40.2")!==-1&&(j>=6&&f===1||/vivaldi/i.test(p))||!A&&f===1)&&(_=2,b=new Array(2)),v=j)),b[0]=_<<3,b[0]|=(14&j)>>1,b[1]|=(1&j)<<7,b[1]|=f<<3,_===5&&(b[1]|=(14&v)>>1,b[2]=(1&v)<<7,b[2]|=8,b[3]=0),{config:b,samplerate:P[j],channelCount:f,codec:"mp4a.40."+_,manifestCodec:k};u.trigger(R.Events.ERROR,{type:C.ErrorTypes.MEDIA_ERROR,details:C.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+j})}function E(u,m){return u[m]===255&&(246&u[m+1])==240}function T(u,m){return 1&u[m+1]?7:9}function l(u,m){return(3&u[m+3])<<11|u[m+4]<<3|(224&u[m+5])>>>5}function c(u,m){return m+5<u.length}function h(u,m){return m+1<u.length&&E(u,m)}function y(u,m){return c(u,m)&&E(u,m)&&l(u,m)<=u.length-m}function i(u,m){if(h(u,m)){var S=T(u,m);if(m+S>=u.length)return!1;var A=l(u,m);if(A<=S)return!1;var _=m+A;return _===u.length||h(u,_)}return!1}function g(u,m,S,A,_){if(!u.samplerate){var v=I(m,S,A,_);if(!v)return;u.config=v.config,u.samplerate=v.samplerate,u.channelCount=v.channelCount,u.codec=v.codec,u.manifestCodec=v.manifestCodec,N.logger.log("parsed codec:"+u.codec+", rate:"+v.samplerate+", channels:"+v.channelCount)}}function d(u){return 9216e4/u}function r(u,m,S,A,_){var v=T(u,m),f=l(u,m);if((f-=v)>0)return{headerLength:v,frameLength:f,stamp:S+A*_}}function t(u,m,S,A,_){var v=r(m,S,A,_,d(u.samplerate));if(v){var f,b=v.frameLength,p=v.headerLength,k=v.stamp,P=p+b,j=Math.max(0,S+P-m.length);j?(f=new Uint8Array(P-p)).set(m.subarray(S+p,m.length),0):f=m.subarray(S+p,S+P);var U={unit:f,pts:k};return j||u.samples.push(U),{sample:U,length:P,missing:j}}}},"./src/demux/base-audio-demuxer.ts":function(K,M,x){x.r(M),x.d(M,"initPTSFn",function(){return l});var N=x("./src/polyfills/number.ts"),C=x("./src/demux/id3.ts"),R=x("./src/demux/dummy-demuxed-track.ts"),I=x("./src/utils/mp4-tools.ts"),E=x("./src/utils/typed-array.ts"),T=function(){function c(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var h=c.prototype;return h.resetInitSegment=function(y,i,g){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},h.resetTimeStamp=function(){},h.resetContiguity=function(){},h.canParse=function(y,i){return!1},h.appendFrame=function(y,i,g){},h.demux=function(y,i){this.cachedData&&(y=Object(I.appendUint8Array)(this.cachedData,y),this.cachedData=null);var g,d,r=C.getID3Data(y,0),t=r?r.length:0,u=this._audioTrack,m=this._id3Track,S=r?C.getTimeStamp(r):void 0,A=y.length;for(this.frameIndex!==0&&this.initPTS!==null||(this.initPTS=l(S,i)),r&&r.length>0&&m.samples.push({pts:this.initPTS,dts:this.initPTS,data:r}),d=this.initPTS;t<A;){if(this.canParse(y,t)){var _=this.appendFrame(u,y,t);_?(this.frameIndex++,d=_.sample.pts,g=t+=_.length):t=A}else C.canParse(y,t)?(r=C.getID3Data(y,t),m.samples.push({pts:d,dts:d,data:r}),g=t+=r.length):t++;if(t===A&&g!==A){var v=Object(E.sliceUint8)(y,g);this.cachedData?this.cachedData=Object(I.appendUint8Array)(this.cachedData,v):this.cachedData=v}}return{audioTrack:u,avcTrack:Object(R.dummyTrack)(),id3Track:m,textTrack:Object(R.dummyTrack)()}},h.demuxSampleAes=function(y,i,g){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},h.flush=function(y){var i=this.cachedData;return i&&(this.cachedData=null,this.demux(i,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:Object(R.dummyTrack)(),id3Track:this._id3Track,textTrack:Object(R.dummyTrack)()}},h.destroy=function(){},c}(),l=function(c,h){return Object(N.isFiniteNumber)(c)?90*c:9e4*h};M.default=T},"./src/demux/chunk-cache.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return N});var N=function(){function C(){this.chunks=[],this.dataLength=0}var R=C.prototype;return R.push=function(I){this.chunks.push(I),this.dataLength+=I.length},R.flush=function(){var I,E=this.chunks,T=this.dataLength;return E.length?(I=E.length===1?E[0]:function(l,c){for(var h=new Uint8Array(c),y=0,i=0;i<l.length;i++){var g=l[i];h.set(g,y),y+=g.length}return h}(E,T),this.reset(),I):new Uint8Array(0)},R.reset=function(){this.chunks.length=0,this.dataLength=0},C}()},"./src/demux/dummy-demuxed-track.ts":function(K,M,x){function N(){return{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}x.r(M),x.d(M,"dummyTrack",function(){return N})},"./src/demux/exp-golomb.ts":function(K,M,x){x.r(M);var N=x("./src/utils/logger.ts"),C=function(){function R(E){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=E,this.bytesAvailable=E.byteLength,this.word=0,this.bitsAvailable=0}var I=R.prototype;return I.loadWord=function(){var E=this.data,T=this.bytesAvailable,l=E.byteLength-T,c=new Uint8Array(4),h=Math.min(4,T);if(h===0)throw new Error("no bytes available");c.set(E.subarray(l,l+h)),this.word=new DataView(c.buffer).getUint32(0),this.bitsAvailable=8*h,this.bytesAvailable-=h},I.skipBits=function(E){var T;this.bitsAvailable>E?(this.word<<=E,this.bitsAvailable-=E):(E-=this.bitsAvailable,E-=(T=E>>3)>>3,this.bytesAvailable-=T,this.loadWord(),this.word<<=E,this.bitsAvailable-=E)},I.readBits=function(E){var T=Math.min(this.bitsAvailable,E),l=this.word>>>32-T;return E>32&&N.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=T,this.bitsAvailable>0?this.word<<=T:this.bytesAvailable>0&&this.loadWord(),(T=E-T)>0&&this.bitsAvailable?l<<T|this.readBits(T):l},I.skipLZ=function(){var E;for(E=0;E<this.bitsAvailable;++E)if(this.word&2147483648>>>E)return this.word<<=E,this.bitsAvailable-=E,E;return this.loadWord(),E+this.skipLZ()},I.skipUEG=function(){this.skipBits(1+this.skipLZ())},I.skipEG=function(){this.skipBits(1+this.skipLZ())},I.readUEG=function(){var E=this.skipLZ();return this.readBits(E+1)-1},I.readEG=function(){var E=this.readUEG();return 1&E?1+E>>>1:-1*(E>>>1)},I.readBoolean=function(){return this.readBits(1)===1},I.readUByte=function(){return this.readBits(8)},I.readUShort=function(){return this.readBits(16)},I.readUInt=function(){return this.readBits(32)},I.skipScalingList=function(E){for(var T=8,l=8,c=0;c<E;c++)l!==0&&(l=(T+this.readEG()+256)%256),T=l===0?T:l},I.readSPS=function(){var E,T,l,c=0,h=0,y=0,i=0,g=this.readUByte.bind(this),d=this.readBits.bind(this),r=this.readUEG.bind(this),t=this.readBoolean.bind(this),u=this.skipBits.bind(this),m=this.skipEG.bind(this),S=this.skipUEG.bind(this),A=this.skipScalingList.bind(this);g();var _=g();if(d(5),u(3),g(),S(),_===100||_===110||_===122||_===244||_===44||_===83||_===86||_===118||_===128){var v=r();if(v===3&&u(1),S(),S(),u(1),t())for(T=v!==3?8:12,l=0;l<T;l++)t()&&A(l<6?16:64)}S();var f=r();if(f===0)r();else if(f===1)for(u(1),m(),m(),E=r(),l=0;l<E;l++)m();S(),u(1);var b=r(),p=r(),k=d(1);k===0&&u(1),u(1),t()&&(c=r(),h=r(),y=r(),i=r());var P=[1,1];if(t()&&t())switch(g()){case 1:P=[1,1];break;case 2:P=[12,11];break;case 3:P=[10,11];break;case 4:P=[16,11];break;case 5:P=[40,33];break;case 6:P=[24,11];break;case 7:P=[20,11];break;case 8:P=[32,11];break;case 9:P=[80,33];break;case 10:P=[18,11];break;case 11:P=[15,11];break;case 12:P=[64,33];break;case 13:P=[160,99];break;case 14:P=[4,3];break;case 15:P=[3,2];break;case 16:P=[2,1];break;case 255:P=[g()<<8|g(),g()<<8|g()]}return{width:Math.ceil(16*(b+1)-2*c-2*h),height:(2-k)*(p+1)*16-(k?2:4)*(y+i),pixelRatio:P}},I.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},R}();M.default=C},"./src/demux/id3.ts":function(K,M,x){x.r(M),x.d(M,"isHeader",function(){return C}),x.d(M,"isFooter",function(){return R}),x.d(M,"getID3Data",function(){return I}),x.d(M,"canParse",function(){return T}),x.d(M,"getTimeStamp",function(){return l}),x.d(M,"isTimeStampFrame",function(){return c}),x.d(M,"getID3Frames",function(){return y}),x.d(M,"decodeFrame",function(){return i}),x.d(M,"utf8ArrayToStr",function(){return u}),x.d(M,"testables",function(){return m});var N,C=function(A,_){return _+10<=A.length&&A[_]===73&&A[_+1]===68&&A[_+2]===51&&A[_+3]<255&&A[_+4]<255&&A[_+6]<128&&A[_+7]<128&&A[_+8]<128&&A[_+9]<128},R=function(A,_){return _+10<=A.length&&A[_]===51&&A[_+1]===68&&A[_+2]===73&&A[_+3]<255&&A[_+4]<255&&A[_+6]<128&&A[_+7]<128&&A[_+8]<128&&A[_+9]<128},I=function(A,_){for(var v=_,f=0;C(A,_);)f+=10,f+=E(A,_+6),R(A,_+10)&&(f+=10),_+=f;if(f>0)return A.subarray(v,v+f)},E=function(A,_){var v=0;return v=(127&A[_])<<21,v|=(127&A[_+1])<<14,(v|=(127&A[_+2])<<7)|127&A[_+3]},T=function(A,_){return C(A,_)&&E(A,_+6)+10<=A.length-_},l=function(A){for(var _=y(A),v=0;v<_.length;v++){var f=_[v];if(c(f))return t(f)}},c=function(A){return A&&A.key==="PRIV"&&A.info==="com.apple.streaming.transportStreamTimestamp"},h=function(A){var _=String.fromCharCode(A[0],A[1],A[2],A[3]),v=E(A,4);return{type:_,size:v,data:A.subarray(10,10+v)}},y=function(A){for(var _=0,v=[];C(A,_);){for(var f=E(A,_+6),b=(_+=10)+f;_+8<b;){var p=h(A.subarray(_)),k=i(p);k&&v.push(k),_+=p.size+10}R(A,_)&&(_+=10)}return v},i=function(A){return A.type==="PRIV"?g(A):A.type[0]==="W"?r(A):d(A)},g=function(A){if(!(A.size<2)){var _=u(A.data,!0),v=new Uint8Array(A.data.subarray(_.length+1));return{key:A.type,info:_,data:v.buffer}}},d=function(A){if(!(A.size<2)){if(A.type==="TXXX"){var _=1,v=u(A.data.subarray(_),!0);_+=v.length+1;var f=u(A.data.subarray(_));return{key:A.type,info:v,data:f}}var b=u(A.data.subarray(1));return{key:A.type,data:b}}},r=function(A){if(A.type==="WXXX"){if(A.size<2)return;var _=1,v=u(A.data.subarray(_),!0);_+=v.length+1;var f=u(A.data.subarray(_));return{key:A.type,info:v,data:f}}var b=u(A.data);return{key:A.type,data:b}},t=function(A){if(A.data.byteLength===8){var _=new Uint8Array(A.data),v=1&_[3],f=(_[4]<<23)+(_[5]<<15)+(_[6]<<7)+_[7];return f/=45,v&&(f+=4772185884e-2),Math.round(f)}},u=function(A,_){_===void 0&&(_=!1);var v=S();if(v){var f=v.decode(A);if(_){var b=f.indexOf("\0");return b!==-1?f.substring(0,b):f}return f.replace(/\0/g,"")}for(var p,k,P,j=A.length,U="",G=0;G<j;){if((p=A[G++])===0&&_)return U;if(p!==0&&p!==3)switch(p>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:U+=String.fromCharCode(p);break;case 12:case 13:k=A[G++],U+=String.fromCharCode((31&p)<<6|63&k);break;case 14:k=A[G++],P=A[G++],U+=String.fromCharCode((15&p)<<12|(63&k)<<6|(63&P)<<0)}}return U},m={decodeTextFrame:d};function S(){return N||self.TextDecoder===void 0||(N=new self.TextDecoder("utf-8")),N}},"./src/demux/mp3demuxer.ts":function(K,M,x){x.r(M);var N=x("./src/demux/base-audio-demuxer.ts"),C=x("./src/demux/id3.ts"),R=x("./src/utils/logger.ts"),I=x("./src/demux/mpegaudio.ts");function E(l,c){return E=Object.setPrototypeOf||function(h,y){return h.__proto__=y,h},E(l,c)}var T=function(l){var c,h;function y(){return l.apply(this,arguments)||this}h=l,(c=y).prototype=Object.create(h.prototype),c.prototype.constructor=c,E(c,h);var i=y.prototype;return i.resetInitSegment=function(g,d,r){l.prototype.resetInitSegment.call(this,g,d,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:g,duration:r,inputTimeScale:9e4,dropped:0}},y.probe=function(g){if(!g)return!1;for(var d=(C.getID3Data(g,0)||[]).length,r=g.length;d<r;d++)if(I.probe(g,d))return R.logger.log("MPEG Audio sync word found !"),!0;return!1},i.canParse=function(g,d){return I.canParse(g,d)},i.appendFrame=function(g,d,r){if(this.initPTS!==null)return I.appendFrame(g,d,r,this.initPTS,this.frameIndex)},y}(N.default);T.minProbeByteLength=4,M.default=T},"./src/demux/mp4demuxer.ts":function(K,M,x){x.r(M);var N=x("./src/utils/mp4-tools.ts"),C=x("./src/demux/dummy-demuxed-track.ts"),R=function(){function I(T,l){this.remainderData=null,this.config=void 0,this.config=l}var E=I.prototype;return E.resetTimeStamp=function(){},E.resetInitSegment=function(){},E.resetContiguity=function(){},I.probe=function(T){return Object(N.findBox)({data:T,start:0,end:Math.min(T.length,16384)},["moof"]).length>0},E.demux=function(T){var l=T,c=Object(C.dummyTrack)();if(this.config.progressive){this.remainderData&&(l=Object(N.appendUint8Array)(this.remainderData,T));var h=Object(N.segmentValidRange)(l);this.remainderData=h.remainder,c.samples=h.valid||new Uint8Array}else c.samples=l;return{audioTrack:Object(C.dummyTrack)(),avcTrack:c,id3Track:Object(C.dummyTrack)(),textTrack:Object(C.dummyTrack)()}},E.flush=function(){var T=Object(C.dummyTrack)();return T.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:Object(C.dummyTrack)(),avcTrack:T,id3Track:Object(C.dummyTrack)(),textTrack:Object(C.dummyTrack)()}},E.demuxSampleAes=function(T,l,c){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},E.destroy=function(){},I}();R.minProbeByteLength=1024,M.default=R},"./src/demux/mpegaudio.ts":function(K,M,x){x.r(M),x.d(M,"appendFrame",function(){return T}),x.d(M,"parseHeader",function(){return l}),x.d(M,"isHeaderPattern",function(){return c}),x.d(M,"isHeader",function(){return h}),x.d(M,"canParse",function(){return y}),x.d(M,"probe",function(){return i});var N=null,C=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],R=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],I=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],E=[0,1,1,4];function T(g,d,r,t,u){if(!(r+24>d.length)){var m=l(d,r);if(m&&r+m.frameLength<=d.length){var S=t+u*(9e4*m.samplesPerFrame/m.sampleRate),A={unit:d.subarray(r,r+m.frameLength),pts:S,dts:S};return g.config=[],g.channelCount=m.channelCount,g.samplerate=m.sampleRate,g.samples.push(A),{sample:A,length:m.frameLength,missing:0}}}}function l(g,d){var r=g[d+1]>>3&3,t=g[d+1]>>1&3,u=g[d+2]>>4&15,m=g[d+2]>>2&3;if(r!==1&&u!==0&&u!==15&&m!==3){var S=g[d+2]>>1&1,A=g[d+3]>>6,_=1e3*C[14*(r===3?3-t:t===3?3:4)+u-1],v=R[3*(r===3?0:r===2?1:2)+m],f=A===3?1:2,b=I[r][t],p=E[t],k=8*b*p,P=Math.floor(b*_/v+S)*p;if(N===null){var j=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);N=j?parseInt(j[1]):0}return N&&N<=87&&t===2&&_>=224e3&&A===0&&(g[d+3]=128|g[d+3]),{sampleRate:v,channelCount:f,frameLength:P,samplesPerFrame:k}}}function c(g,d){return g[d]===255&&(224&g[d+1])==224&&(6&g[d+1])!=0}function h(g,d){return d+1<g.length&&c(g,d)}function y(g,d){return c(g,d)&&4<=g.length-d}function i(g,d){if(d+1<g.length&&c(g,d)){var r=l(g,d),t=4;r!=null&&r.frameLength&&(t=r.frameLength);var u=d+t;return u===g.length||h(g,u)}return!1}},"./src/demux/sample-aes.ts":function(K,M,x){x.r(M);var N=x("./src/crypt/decrypter.ts"),C=x("./src/demux/tsdemuxer.ts"),R=function(){function I(T,l,c){this.keyData=void 0,this.decrypter=void 0,this.keyData=c,this.decrypter=new N.default(T,l,{removePKCS7Padding:!1})}var E=I.prototype;return E.decryptBuffer=function(T,l){this.decrypter.decrypt(T,this.keyData.key.buffer,this.keyData.iv.buffer,l)},E.decryptAacSample=function(T,l,c,h){var y=T[l].unit,i=y.subarray(16,y.length-y.length%16),g=i.buffer.slice(i.byteOffset,i.byteOffset+i.length),d=this;this.decryptBuffer(g,function(r){var t=new Uint8Array(r);y.set(t,16),h||d.decryptAacSamples(T,l+1,c)})},E.decryptAacSamples=function(T,l,c){for(;;l++){if(l>=T.length)return void c();if(!(T[l].unit.length<32)){var h=this.decrypter.isSync();if(this.decryptAacSample(T,l,c,h),!h)return}}},E.getAvcEncryptedData=function(T){for(var l=16*Math.floor((T.length-48)/160)+16,c=new Int8Array(l),h=0,y=32;y<T.length-16;y+=160,h+=16)c.set(T.subarray(y,y+16),h);return c},E.getAvcDecryptedUnit=function(T,l){for(var c=new Uint8Array(l),h=0,y=32;y<T.length-16;y+=160,h+=16)T.set(c.subarray(h,h+16),y);return T},E.decryptAvcSample=function(T,l,c,h,y,i){var g=Object(C.discardEPB)(y.data),d=this.getAvcEncryptedData(g),r=this;this.decryptBuffer(d.buffer,function(t){y.data=r.getAvcDecryptedUnit(g,t),i||r.decryptAvcSamples(T,l,c+1,h)})},E.decryptAvcSamples=function(T,l,c,h){if(T instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;l++,c=0){if(l>=T.length)return void h();for(var y=T[l].units;!(c>=y.length);c++){var i=y[c];if(!(i.data.length<=48||i.type!==1&&i.type!==5)){var g=this.decrypter.isSync();if(this.decryptAvcSample(T,l,c,h,i,g),!g)return}}}},I}();M.default=R},"./src/demux/transmuxer-interface.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return h});var N=x("./node_modules/webworkify-webpack/index.js"),C=x("./src/events.ts"),R=x("./src/demux/transmuxer.ts"),I=x("./src/utils/logger.ts"),E=x("./src/errors.ts"),T=x("./src/utils/mediasource-helper.ts"),l=x("./node_modules/eventemitter3/index.js"),c=Object(T.getMediaSource)()||{isTypeSupported:function(){return!1}},h=function(){function y(g,d,r,t){var u=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=g,this.id=d,this.onTransmuxComplete=r,this.onFlush=t;var m=g.config,S=function(f,b){(b=b||{}).frag=u.frag,b.id=u.id,g.trigger(f,b)};this.observer=new l.EventEmitter,this.observer.on(C.Events.FRAG_DECRYPTED,S),this.observer.on(C.Events.ERROR,S);var A={mp4:c.isTypeSupported("video/mp4"),mpeg:c.isTypeSupported("audio/mpeg"),mp3:c.isTypeSupported('audio/mp4; codecs="mp3"')},_=navigator.vendor;if(m.enableWorker&&typeof Worker<"u"){var v;I.logger.log("demuxing in webworker");try{v=this.worker=N("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),v.addEventListener("message",this.onwmsg),v.onerror=function(f){g.trigger(C.Events.ERROR,{type:E.ErrorTypes.OTHER_ERROR,details:E.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(f.message+"  ("+f.filename+":"+f.lineno+")")})},v.postMessage({cmd:"init",typeSupported:A,vendor:_,id:d,config:JSON.stringify(m)})}catch(f){I.logger.warn("Error in worker:",f),I.logger.error("Error while initializing DemuxerWorker, fallback to inline"),v&&self.URL.revokeObjectURL(v.objectURL),this.transmuxer=new R.default(this.observer,A,m,_,d),this.worker=null}}else this.transmuxer=new R.default(this.observer,A,m,_,d)}var i=y.prototype;return i.destroy=function(){var g=this.worker;if(g)g.removeEventListener("message",this.onwmsg),g.terminate(),this.worker=null;else{var d=this.transmuxer;d&&(d.destroy(),this.transmuxer=null)}var r=this.observer;r&&r.removeAllListeners(),this.observer=null},i.push=function(g,d,r,t,u,m,S,A,_,v){var f,b,p=this;_.transmuxing.start=self.performance.now();var k=this.transmuxer,P=this.worker,j=m?m.start:u.start,U=u.decryptdata,G=this.frag,ee=!(G&&u.cc===G.cc),ne=!(G&&_.level===G.level),re=G?_.sn-G.sn:-1,oe=this.part?_.part-this.part.index:1,W=!ne&&(re===1||re===0&&oe===1),Te=self.performance.now();(ne||re||u.stats.parsing.start===0)&&(u.stats.parsing.start=Te),!m||!oe&&W||(m.stats.parsing.start=Te);var Ue=!(G&&((f=u.initSegment)===null||f===void 0?void 0:f.url)===((b=G.initSegment)===null||b===void 0?void 0:b.url)),ze=new R.TransmuxState(ee,W,A,ne,j,Ue);if(!W||ee||Ue){I.logger.log("[transmuxer-interface, "+u.type+"]: Starting new transmux session for sn: "+_.sn+" p: "+_.part+" level: "+_.level+" id: "+_.id+`
        discontinuity: `+ee+`
        trackSwitch: `+ne+`
        contiguous: `+W+`
        accurateTimeOffset: `+A+`
        timeOffset: `+j+`
        initSegmentChange: `+Ue);var le=new R.TransmuxConfig(r,t,d,S,v);this.configureTransmuxer(le)}if(this.frag=u,this.part=m,P)P.postMessage({cmd:"demux",data:g,decryptdata:U,chunkMeta:_,state:ze},g instanceof ArrayBuffer?[g]:[]);else if(k){var Se=k.push(g,U,_,ze);Object(R.isPromise)(Se)?Se.then(function(be){p.handleTransmuxComplete(be)}):this.handleTransmuxComplete(Se)}},i.flush=function(g){var d=this;g.transmuxing.start=self.performance.now();var r=this.transmuxer,t=this.worker;if(t)t.postMessage({cmd:"flush",chunkMeta:g});else if(r){var u=r.flush(g);Object(R.isPromise)(u)?u.then(function(m){d.handleFlushResult(m,g)}):this.handleFlushResult(u,g)}},i.handleFlushResult=function(g,d){var r=this;g.forEach(function(t){r.handleTransmuxComplete(t)}),this.onFlush(d)},i.onWorkerMessage=function(g){var d=g.data,r=this.hls;switch(d.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(d.data);break;case"flush":this.onFlush(d.data);break;default:d.data=d.data||{},d.data.frag=this.frag,d.data.id=this.id,r.trigger(d.event,d.data)}},i.configureTransmuxer=function(g){var d=this.worker,r=this.transmuxer;d?d.postMessage({cmd:"configure",config:g}):r&&r.configure(g)},i.handleTransmuxComplete=function(g){g.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(g)},y}()},"./src/demux/transmuxer-worker.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return E});var N=x("./src/demux/transmuxer.ts"),C=x("./src/events.ts"),R=x("./src/utils/logger.ts"),I=x("./node_modules/eventemitter3/index.js");function E(h){var y=new I.EventEmitter,i=function(g,d){h.postMessage({event:g,data:d})};y.on(C.Events.FRAG_DECRYPTED,i),y.on(C.Events.ERROR,i),h.addEventListener("message",function(g){var d=g.data;switch(d.cmd){case"init":var r=JSON.parse(d.config);h.transmuxer=new N.default(y,d.typeSupported,r,d.vendor,d.id),Object(R.enableLogs)(r.debug),i("init",null);break;case"configure":h.transmuxer.configure(d.config);break;case"demux":var t=h.transmuxer.push(d.data,d.decryptdata,d.chunkMeta,d.state);Object(N.isPromise)(t)?t.then(function(S){T(h,S)}):T(h,t);break;case"flush":var u=d.chunkMeta,m=h.transmuxer.flush(u);Object(N.isPromise)(m)?m.then(function(S){c(h,S,u)}):c(h,m,u)}})}function T(h,y){if((i=y.remuxResult).audio||i.video||i.text||i.id3||i.initSegment){var i,g=[],d=y.remuxResult,r=d.audio,t=d.video;r&&l(g,r),t&&l(g,t),h.postMessage({event:"transmuxComplete",data:y},g)}}function l(h,y){y.data1&&h.push(y.data1.buffer),y.data2&&h.push(y.data2.buffer)}function c(h,y,i){y.forEach(function(g){T(h,g)}),h.postMessage({event:"flush",data:i})}},"./src/demux/transmuxer.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return u}),x.d(M,"isPromise",function(){return S}),x.d(M,"TransmuxConfig",function(){return A}),x.d(M,"TransmuxState",function(){return _});var N,C=x("./src/events.ts"),R=x("./src/errors.ts"),I=x("./src/crypt/decrypter.ts"),E=x("./src/demux/aacdemuxer.ts"),T=x("./src/demux/mp4demuxer.ts"),l=x("./src/demux/tsdemuxer.ts"),c=x("./src/demux/mp3demuxer.ts"),h=x("./src/remux/mp4-remuxer.ts"),y=x("./src/remux/passthrough-remuxer.ts"),i=x("./src/demux/chunk-cache.ts"),g=x("./src/utils/mp4-tools.ts"),d=x("./src/utils/logger.ts");try{N=self.performance.now.bind(self.performance)}catch{d.logger.debug("Unable to use Performance API on this environment"),N=self.Date.now}var r=[{demux:l.default,remux:h.default},{demux:T.default,remux:y.default},{demux:E.default,remux:h.default},{demux:c.default,remux:h.default}],t=1024;r.forEach(function(v){var f=v.demux;t=Math.max(t,f.minProbeByteLength)});var u=function(){function v(b,p,k,P,j){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new i.default,this.observer=b,this.typeSupported=p,this.config=k,this.vendor=P,this.id=j}var f=v.prototype;return f.configure=function(b){this.transmuxConfig=b,this.decrypter&&this.decrypter.reset()},f.push=function(b,p,k,P){var j=this,U=k.transmuxing;U.executeStart=N();var G=new Uint8Array(b),ee=this.cache,ne=this.config,re=this.currentTransmuxState,oe=this.transmuxConfig;P&&(this.currentTransmuxState=P);var W=function(Ge,it){var Ye=null;return Ge.byteLength>0&&it!=null&&it.key!=null&&it.iv!==null&&it.method!=null&&(Ye=it),Ye}(G,p);if(W&&W.method==="AES-128"){var Te=this.getDecrypter();if(!ne.enableSoftwareAES)return this.decryptionPromise=Te.webCryptoDecrypt(G,W.key.buffer,W.iv.buffer).then(function(Ge){var it=j.push(Ge,null,k);return j.decryptionPromise=null,it}),this.decryptionPromise;var Ue=Te.softwareDecrypt(G,W.key.buffer,W.iv.buffer);if(!Ue)return U.executeEnd=N(),m(k);G=new Uint8Array(Ue)}var ze=P||re,le=ze.contiguous,Se=ze.discontinuity,be=ze.trackSwitch,Y=ze.accurateTimeOffset,Q=ze.timeOffset,J=ze.initSegmentChange,fe=oe.audioCodec,Ce=oe.videoCodec,V=oe.defaultInitPts,H=oe.duration,z=oe.initSegmentData;if((Se||be||J)&&this.resetInitSegment(z,fe,Ce,H),(Se||J)&&this.resetInitialTimestamp(V),le||this.resetContiguity(),this.needsProbing(G,Se,be)){if(ee.dataLength){var X=ee.flush();G=Object(g.appendUint8Array)(X,G)}this.configureTransmuxer(G,oe)}var de=this.transmux(G,W,Q,Y,k),ge=this.currentTransmuxState;return ge.contiguous=!0,ge.discontinuity=!1,ge.trackSwitch=!1,U.executeEnd=N(),de},f.flush=function(b){var p=this,k=b.transmuxing;k.executeStart=N();var P=this.decrypter,j=this.cache,U=this.currentTransmuxState,G=this.decryptionPromise;if(G)return G.then(function(){return p.flush(b)});var ee=[],ne=U.timeOffset;if(P){var re=P.flush();re&&ee.push(this.push(re,null,b))}var oe=j.dataLength;j.reset();var W=this.demuxer,Te=this.remuxer;if(!W||!Te)return oe>=t&&this.observer.emit(C.Events.ERROR,C.Events.ERROR,{type:R.ErrorTypes.MEDIA_ERROR,details:R.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),k.executeEnd=N(),[m(b)];var Ue=W.flush(ne);return S(Ue)?Ue.then(function(ze){return p.flushRemux(ee,ze,b),ee}):(this.flushRemux(ee,Ue,b),ee)},f.flushRemux=function(b,p,k){var P=p.audioTrack,j=p.avcTrack,U=p.id3Track,G=p.textTrack,ee=this.currentTransmuxState,ne=ee.accurateTimeOffset,re=ee.timeOffset;d.logger.log("[transmuxer.ts]: Flushed fragment "+k.sn+(k.part>-1?" p: "+k.part:"")+" of level "+k.level);var oe=this.remuxer.remux(P,j,U,G,re,ne,!0,this.id);b.push({remuxResult:oe,chunkMeta:k}),k.transmuxing.executeEnd=N()},f.resetInitialTimestamp=function(b){var p=this.demuxer,k=this.remuxer;p&&k&&(p.resetTimeStamp(b),k.resetTimeStamp(b))},f.resetContiguity=function(){var b=this.demuxer,p=this.remuxer;b&&p&&(b.resetContiguity(),p.resetNextTimestamp())},f.resetInitSegment=function(b,p,k,P){var j=this.demuxer,U=this.remuxer;j&&U&&(j.resetInitSegment(p,k,P),U.resetInitSegment(b,p,k))},f.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},f.transmux=function(b,p,k,P,j){return p&&p.method==="SAMPLE-AES"?this.transmuxSampleAes(b,p,k,P,j):this.transmuxUnencrypted(b,k,P,j)},f.transmuxUnencrypted=function(b,p,k,P){var j=this.demuxer.demux(b,p,!1,!this.config.progressive),U=j.audioTrack,G=j.avcTrack,ee=j.id3Track,ne=j.textTrack;return{remuxResult:this.remuxer.remux(U,G,ee,ne,p,k,!1,this.id),chunkMeta:P}},f.transmuxSampleAes=function(b,p,k,P,j){var U=this;return this.demuxer.demuxSampleAes(b,p,k).then(function(G){return{remuxResult:U.remuxer.remux(G.audioTrack,G.avcTrack,G.id3Track,G.textTrack,k,P,!1,U.id),chunkMeta:j}})},f.configureTransmuxer=function(b,p){for(var k,P=this.config,j=this.observer,U=this.typeSupported,G=this.vendor,ee=p.audioCodec,ne=p.defaultInitPts,re=p.duration,oe=p.initSegmentData,W=p.videoCodec,Te=0,Ue=r.length;Te<Ue;Te++)if(r[Te].demux.probe(b)){k=r[Te];break}k||(d.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),k={demux:T.default,remux:y.default});var ze=this.demuxer,le=this.remuxer,Se=k.remux,be=k.demux;le&&le instanceof Se||(this.remuxer=new Se(j,P,U,G)),ze&&ze instanceof be||(this.demuxer=new be(j,P,U),this.probe=be.probe),this.resetInitSegment(oe,ee,W,re),this.resetInitialTimestamp(ne)},f.needsProbing=function(b,p,k){return!this.demuxer||!this.remuxer||p||k},f.getDecrypter=function(){var b=this.decrypter;return b||(b=this.decrypter=new I.default(this.observer,this.config)),b},v}(),m=function(v){return{remuxResult:{},chunkMeta:v}};function S(v){return"then"in v&&v.then instanceof Function}var A=function(v,f,b,p,k){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=v,this.videoCodec=f,this.initSegmentData=b,this.duration=p,this.defaultInitPts=k},_=function(v,f,b,p,k,P){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=v,this.contiguous=f,this.accurateTimeOffset=b,this.trackSwitch=p,this.timeOffset=k,this.initSegmentChange=P}},"./src/demux/tsdemuxer.ts":function(K,M,x){x.r(M),x.d(M,"discardEPB",function(){return S});var N=x("./src/demux/adts.ts"),C=x("./src/demux/mpegaudio.ts"),R=x("./src/demux/exp-golomb.ts"),I=x("./src/demux/id3.ts"),E=x("./src/demux/sample-aes.ts"),T=x("./src/events.ts"),l=x("./src/utils/mp4-tools.ts"),c=x("./src/utils/logger.ts"),h=x("./src/errors.ts"),y={video:1,audio:2,id3:3,text:4},i=function(){function A(v,f,b){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=v,this.config=f,this.typeSupported=b}A.probe=function(v){var f=A.syncOffset(v);return!(f<0||(f&&c.logger.warn("MPEG2-TS detected but first sync word found @ offset "+f+", junk ahead ?"),0))},A.syncOffset=function(v){for(var f=Math.min(1e3,v.length-564),b=0;b<f;){if(v[b]===71&&v[b+188]===71&&v[b+376]===71)return b;b++}return-1},A.createTrack=function(v,f){return{container:v==="video"||v==="audio"?"video/mp2t":void 0,type:v,id:y[v],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:v==="audio"?f:void 0}};var _=A.prototype;return _.resetInitSegment=function(v,f,b){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=A.createTrack("video",b),this._audioTrack=A.createTrack("audio",b),this._id3Track=A.createTrack("id3",b),this._txtTrack=A.createTrack("text",b),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=v,this.videoCodec=f,this._duration=b},_.resetTimeStamp=function(){},_.resetContiguity=function(){var v=this._audioTrack,f=this._avcTrack,b=this._id3Track;v&&(v.pesData=null),f&&(f.pesData=null),b&&(b.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},_.demux=function(v,f,b,p){var k;b===void 0&&(b=!1),p===void 0&&(p=!1),b||(this.sampleAes=null);var P=this._avcTrack,j=this._audioTrack,U=this._id3Track,G=P.pid,ee=P.pesData,ne=j.pid,re=U.pid,oe=j.pesData,W=U.pesData,Te=!1,Ue=this.pmtParsed,ze=this._pmtId,le=v.length;if(this.remainderData&&(le=(v=Object(l.appendUint8Array)(this.remainderData,v)).length,this.remainderData=null),le<188&&!p)return this.remainderData=v,{audioTrack:j,avcTrack:P,id3Track:U,textTrack:this._txtTrack};var Se=Math.max(0,A.syncOffset(v));(le-=(le+Se)%188)<v.byteLength&&!p&&(this.remainderData=new Uint8Array(v.buffer,le,v.buffer.byteLength-le));for(var be=0,Y=Se;Y<le;Y+=188)if(v[Y]===71){var Q=!!(64&v[Y+1]),J=((31&v[Y+1])<<8)+v[Y+2],fe=void 0;if((48&v[Y+3])>>4>1){if((fe=Y+5+v[Y+4])===Y+188)continue}else fe=Y+4;switch(J){case G:Q&&(ee&&(k=t(ee))&&this.parseAVCPES(k,!1),ee={data:[],size:0}),ee&&(ee.data.push(v.subarray(fe,Y+188)),ee.size+=Y+188-fe);break;case ne:Q&&(oe&&(k=t(oe))&&(j.isAAC?this.parseAACPES(k):this.parseMPEGPES(k)),oe={data:[],size:0}),oe&&(oe.data.push(v.subarray(fe,Y+188)),oe.size+=Y+188-fe);break;case re:Q&&(W&&(k=t(W))&&this.parseID3PES(k),W={data:[],size:0}),W&&(W.data.push(v.subarray(fe,Y+188)),W.size+=Y+188-fe);break;case 0:Q&&(fe+=v[fe]+1),ze=this._pmtId=d(v,fe);break;case ze:Q&&(fe+=v[fe]+1);var Ce=r(v,fe,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,b);(G=Ce.avc)>0&&(P.pid=G),(ne=Ce.audio)>0&&(j.pid=ne,j.isAAC=Ce.isAAC),(re=Ce.id3)>0&&(U.pid=re),Te&&!Ue&&(c.logger.log("reparse from beginning"),Te=!1,Y=Se-188),Ue=this.pmtParsed=!0;break;case 17:case 8191:break;default:Te=!0}}else be++;be>0&&this.observer.emit(T.Events.ERROR,T.Events.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+be+" TS packet/s that do not start with 0x47"}),P.pesData=ee,j.pesData=oe,U.pesData=W;var V={audioTrack:j,avcTrack:P,id3Track:U,textTrack:this._txtTrack};return p&&this.extractRemainingSamples(V),V},_.flush=function(){var v,f=this.remainderData;return this.remainderData=null,v=f?this.demux(f,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(v),this.sampleAes?this.decrypt(v,this.sampleAes):v},_.extractRemainingSamples=function(v){var f,b=v.audioTrack,p=v.avcTrack,k=v.id3Track,P=p.pesData,j=b.pesData,U=k.pesData;P&&(f=t(P))?(this.parseAVCPES(f,!0),p.pesData=null):p.pesData=P,j&&(f=t(j))?(b.isAAC?this.parseAACPES(f):this.parseMPEGPES(f),b.pesData=null):(j!=null&&j.size&&c.logger.log("last AAC PES packet truncated,might overlap between fragments"),b.pesData=j),U&&(f=t(U))?(this.parseID3PES(f),k.pesData=null):k.pesData=U},_.demuxSampleAes=function(v,f,b){var p=this.demux(v,b,!0,!this.config.progressive),k=this.sampleAes=new E.default(this.observer,this.config,f);return this.decrypt(p,k)},_.decrypt=function(v,f){return new Promise(function(b){var p=v.audioTrack,k=v.avcTrack;p.samples&&p.isAAC?f.decryptAacSamples(p.samples,0,function(){k.samples?f.decryptAvcSamples(k.samples,0,0,function(){b(v)}):b(v)}):k.samples&&f.decryptAvcSamples(k.samples,0,0,function(){b(v)})})},_.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},_.parseAVCPES=function(v,f){var b,p=this,k=this._avcTrack,P=this.parseAVCNALu(v.data),j=this.avcSample,U=!1;v.data=null,j&&P.length&&!k.audFound&&(u(j,k),j=this.avcSample=g(!1,v.pts,v.dts,"")),P.forEach(function(G){switch(G.type){case 1:b=!0,j||(j=p.avcSample=g(!0,v.pts,v.dts,"")),j.frame=!0;var ee=G.data;if(U&&ee.length>4){var ne=new R.default(ee).readSliceType();ne!==2&&ne!==4&&ne!==7&&ne!==9||(j.key=!0)}break;case 5:b=!0,j||(j=p.avcSample=g(!0,v.pts,v.dts,"")),j.key=!0,j.frame=!0;break;case 6:b=!0;var re=new R.default(S(G.data));re.readUByte();for(var oe=0,W=0,Te=!1,Ue=0;!Te&&re.bytesAvailable>1;){oe=0;do oe+=Ue=re.readUByte();while(Ue===255);W=0;do W+=Ue=re.readUByte();while(Ue===255);if(oe===4&&re.bytesAvailable!==0){if(Te=!0,re.readUByte()===181&&re.readUShort()===49&&re.readUInt()===1195456820&&re.readUByte()===3){for(var ze=re.readUByte(),le=31&ze,Se=[ze,re.readUByte()],be=0;be<le;be++)Se.push(re.readUByte()),Se.push(re.readUByte()),Se.push(re.readUByte());m(p._txtTrack.samples,{type:3,pts:v.pts,bytes:Se})}}else if(oe===5&&re.bytesAvailable!==0){if(Te=!0,W>16){for(var Y=[],Q=0;Q<16;Q++)Y.push(re.readUByte().toString(16)),Q!==3&&Q!==5&&Q!==7&&Q!==9||Y.push("-");for(var J=W-16,fe=new Uint8Array(J),Ce=0;Ce<J;Ce++)fe[Ce]=re.readUByte();m(p._txtTrack.samples,{pts:v.pts,payloadType:oe,uuid:Y.join(""),userData:Object(I.utf8ArrayToStr)(fe),userDataBytes:fe})}}else if(W<re.bytesAvailable)for(var V=0;V<W;V++)re.readUByte()}break;case 7:if(b=!0,U=!0,!k.sps){var H=new R.default(G.data).readSPS();k.width=H.width,k.height=H.height,k.pixelRatio=H.pixelRatio,k.sps=[G.data],k.duration=p._duration;for(var z=G.data.subarray(1,4),X="avc1.",de=0;de<3;de++){var ge=z[de].toString(16);ge.length<2&&(ge="0"+ge),X+=ge}k.codec=X}break;case 8:b=!0,k.pps||(k.pps=[G.data]);break;case 9:b=!1,k.audFound=!0,j&&u(j,k),j=p.avcSample=g(!1,v.pts,v.dts,"");break;case 12:b=!1;break;default:b=!1,j&&(j.debug+="unknown NAL "+G.type+" ")}j&&b&&j.units.push(G)}),f&&j&&(u(j,k),this.avcSample=null)},_.getLastNalUnit=function(){var v,f,b=this.avcSample;if(!b||b.units.length===0){var p=this._avcTrack.samples;b=p[p.length-1]}if((v=b)!==null&&v!==void 0&&v.units){var k=b.units;f=k[k.length-1]}return f},_.parseAVCNALu=function(v){var f,b,p=v.byteLength,k=this._avcTrack,P=k.naluState||0,j=P,U=[],G=0,ee=-1,ne=0;for(P===-1&&(ee=0,ne=31&v[0],P=0,G=1);G<p;)if(f=v[G++],P)if(P!==1)if(f)if(f===1){if(ee>=0){var re={data:v.subarray(ee,G-P-1),type:ne};U.push(re)}else{var oe=this.getLastNalUnit();if(oe&&(j&&G<=4-j&&oe.state&&(oe.data=oe.data.subarray(0,oe.data.byteLength-j)),(b=G-P-1)>0)){var W=new Uint8Array(oe.data.byteLength+b);W.set(oe.data,0),W.set(v.subarray(0,b),oe.data.byteLength),oe.data=W,oe.state=0}}G<p?(ee=G,ne=31&v[G],P=0):P=-1}else P=0;else P=3;else P=f?0:2;else P=f?0:1;if(ee>=0&&P>=0){var Te={data:v.subarray(ee,p),type:ne,state:P};U.push(Te)}if(U.length===0){var Ue=this.getLastNalUnit();if(Ue){var ze=new Uint8Array(Ue.data.byteLength+v.byteLength);ze.set(Ue.data,0),ze.set(v,Ue.data.byteLength),Ue.data=ze}}return k.naluState=P,U},_.parseAACPES=function(v){var f,b,p,k,P,j=0,U=this._audioTrack,G=this.aacOverFlow,ee=v.data;if(G){this.aacOverFlow=null;var ne=G.sample.unit.byteLength,re=Math.min(G.missing,ne),oe=ne-re;G.sample.unit.set(ee.subarray(0,re),oe),U.samples.push(G.sample),j=G.missing}for(f=j,b=ee.length;f<b-1&&!N.isHeader(ee,f);f++);if(f===j||(f<b-1?(p="AAC PES did not start with ADTS header,offset:"+f,k=!1):(p="no ADTS header found in AAC PES",k=!0),c.logger.warn("parsing error:"+p),this.observer.emit(T.Events.ERROR,T.Events.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:k,reason:p}),!k)){if(N.initTrackConfig(U,this.observer,ee,f,this.audioCodec),v.pts!==void 0)P=v.pts;else{if(!G)return void c.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var W=N.getFrameDuration(U.samplerate);P=G.sample.pts+W}for(var Te=0;f<b;){if(N.isHeader(ee,f)){if(f+5<b){var Ue=N.appendFrame(U,ee,f,P,Te);if(Ue){if(!Ue.missing){f+=Ue.length,Te++;continue}this.aacOverFlow=Ue}}break}f++}}},_.parseMPEGPES=function(v){var f=v.data,b=f.length,p=0,k=0,P=v.pts;if(P!==void 0)for(;k<b;)if(C.isHeader(f,k)){var j=C.appendFrame(this._audioTrack,f,k,P,p);if(!j)break;k+=j.length,p++}else k++;else c.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},_.parseID3PES=function(v){v.pts!==void 0?this._id3Track.samples.push(v):c.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},A}();function g(A,_,v,f){return{key:A,frame:!1,pts:_,dts:v,units:[],debug:f,length:0}}function d(A,_){return(31&A[_+10])<<8|A[_+11]}function r(A,_,v,f){var b={audio:-1,avc:-1,id3:-1,isAAC:!0},p=_+3+((15&A[_+1])<<8|A[_+2])-4;for(_+=12+((15&A[_+10])<<8|A[_+11]);_<p;){var k=(31&A[_+1])<<8|A[_+2];switch(A[_]){case 207:if(!f){c.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:b.audio===-1&&(b.audio=k);break;case 21:b.id3===-1&&(b.id3=k);break;case 219:if(!f){c.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:b.avc===-1&&(b.avc=k);break;case 3:case 4:v?b.audio===-1&&(b.audio=k,b.isAAC=!1):c.logger.log("MPEG audio found, not supported in this browser");break;case 36:c.logger.warn("Unsupported HEVC stream type found")}_+=5+((15&A[_+3])<<8|A[_+4])}return b}function t(A){var _,v,f,b,p,k=0,P=A.data;if(!A||A.size===0)return null;for(;P[0].length<19&&P.length>1;){var j=new Uint8Array(P[0].length+P[1].length);j.set(P[0]),j.set(P[1],P[0].length),P[0]=j,P.splice(1,1)}if(((_=P[0])[0]<<16)+(_[1]<<8)+_[2]===1){if((v=(_[4]<<8)+_[5])&&v>A.size-6)return null;var U=_[7];192&U&&(b=536870912*(14&_[9])+4194304*(255&_[10])+16384*(254&_[11])+128*(255&_[12])+(254&_[13])/2,64&U?b-(p=536870912*(14&_[14])+4194304*(255&_[15])+16384*(254&_[16])+128*(255&_[17])+(254&_[18])/2)>54e5&&(c.logger.warn(Math.round((b-p)/9e4)+"s delta between PTS and DTS, align them"),b=p):p=b);var G=(f=_[8])+9;if(A.size<=G)return null;A.size-=G;for(var ee=new Uint8Array(A.size),ne=0,re=P.length;ne<re;ne++){var oe=(_=P[ne]).byteLength;if(G){if(G>oe){G-=oe;continue}_=_.subarray(G),oe-=G,G=0}ee.set(_,k),k+=oe}return v&&(v-=f+3),{data:ee,pts:b,dts:p,len:v}}return null}function u(A,_){if(A.units.length&&A.frame){if(A.pts===void 0){var v=_.samples,f=v.length;if(!f)return void _.dropped++;var b=v[f-1];A.pts=b.pts,A.dts=b.dts}_.samples.push(A)}A.debug.length&&c.logger.log(A.pts+"/"+A.dts+":"+A.debug)}function m(A,_){var v=A.length;if(v>0){if(_.pts>=A[v-1].pts)A.push(_);else for(var f=v-1;f>=0;f--)if(_.pts<A[f].pts){A.splice(f,0,_);break}}else A.push(_)}function S(A){for(var _=A.byteLength,v=[],f=1;f<_-2;)A[f]===0&&A[f+1]===0&&A[f+2]===3?(v.push(f+2),f+=2):f++;if(v.length===0)return A;var b=_-v.length,p=new Uint8Array(b),k=0;for(f=0;f<b;k++,f++)k===v[0]&&(k++,v.shift()),p[f]=A[k];return p}i.minProbeByteLength=188,M.default=i},"./src/errors.ts":function(K,M,x){var N,C;x.r(M),x.d(M,"ErrorTypes",function(){return N}),x.d(M,"ErrorDetails",function(){return C}),function(R){R.NETWORK_ERROR="networkError",R.MEDIA_ERROR="mediaError",R.KEY_SYSTEM_ERROR="keySystemError",R.MUX_ERROR="muxError",R.OTHER_ERROR="otherError"}(N||(N={})),function(R){R.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",R.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",R.KEY_SYSTEM_NO_SESSION="keySystemNoSession",R.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",R.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",R.MANIFEST_LOAD_ERROR="manifestLoadError",R.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",R.MANIFEST_PARSING_ERROR="manifestParsingError",R.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",R.LEVEL_EMPTY_ERROR="levelEmptyError",R.LEVEL_LOAD_ERROR="levelLoadError",R.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",R.LEVEL_SWITCH_ERROR="levelSwitchError",R.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",R.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",R.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",R.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",R.FRAG_LOAD_ERROR="fragLoadError",R.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",R.FRAG_DECRYPT_ERROR="fragDecryptError",R.FRAG_PARSING_ERROR="fragParsingError",R.REMUX_ALLOC_ERROR="remuxAllocError",R.KEY_LOAD_ERROR="keyLoadError",R.KEY_LOAD_TIMEOUT="keyLoadTimeOut",R.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",R.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",R.BUFFER_APPEND_ERROR="bufferAppendError",R.BUFFER_APPENDING_ERROR="bufferAppendingError",R.BUFFER_STALLED_ERROR="bufferStalledError",R.BUFFER_FULL_ERROR="bufferFullError",R.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",R.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",R.INTERNAL_EXCEPTION="internalException",R.INTERNAL_ABORTED="aborted",R.UNKNOWN="unknown"}(C||(C={}))},"./src/events.ts":function(K,M,x){var N;x.r(M),x.d(M,"Events",function(){return N}),function(C){C.MEDIA_ATTACHING="hlsMediaAttaching",C.MEDIA_ATTACHED="hlsMediaAttached",C.MEDIA_DETACHING="hlsMediaDetaching",C.MEDIA_DETACHED="hlsMediaDetached",C.BUFFER_RESET="hlsBufferReset",C.BUFFER_CODECS="hlsBufferCodecs",C.BUFFER_CREATED="hlsBufferCreated",C.BUFFER_APPENDING="hlsBufferAppending",C.BUFFER_APPENDED="hlsBufferAppended",C.BUFFER_EOS="hlsBufferEos",C.BUFFER_FLUSHING="hlsBufferFlushing",C.BUFFER_FLUSHED="hlsBufferFlushed",C.MANIFEST_LOADING="hlsManifestLoading",C.MANIFEST_LOADED="hlsManifestLoaded",C.MANIFEST_PARSED="hlsManifestParsed",C.LEVEL_SWITCHING="hlsLevelSwitching",C.LEVEL_SWITCHED="hlsLevelSwitched",C.LEVEL_LOADING="hlsLevelLoading",C.LEVEL_LOADED="hlsLevelLoaded",C.LEVEL_UPDATED="hlsLevelUpdated",C.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",C.LEVELS_UPDATED="hlsLevelsUpdated",C.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",C.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",C.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",C.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",C.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",C.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",C.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",C.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",C.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",C.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",C.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",C.CUES_PARSED="hlsCuesParsed",C.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",C.INIT_PTS_FOUND="hlsInitPtsFound",C.FRAG_LOADING="hlsFragLoading",C.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",C.FRAG_LOADED="hlsFragLoaded",C.FRAG_DECRYPTED="hlsFragDecrypted",C.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",C.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",C.FRAG_PARSING_METADATA="hlsFragParsingMetadata",C.FRAG_PARSED="hlsFragParsed",C.FRAG_BUFFERED="hlsFragBuffered",C.FRAG_CHANGED="hlsFragChanged",C.FPS_DROP="hlsFpsDrop",C.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",C.ERROR="hlsError",C.DESTROYING="hlsDestroying",C.KEY_LOADING="hlsKeyLoading",C.KEY_LOADED="hlsKeyLoaded",C.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",C.BACK_BUFFER_REACHED="hlsBackBufferReached"}(N||(N={}))},"./src/hls.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return u});var N=x("./node_modules/url-toolkit/src/url-toolkit.js"),C=x("./src/loader/playlist-loader.ts"),R=x("./src/loader/key-loader.ts"),I=x("./src/controller/id3-track-controller.ts"),E=x("./src/controller/latency-controller.ts"),T=x("./src/controller/level-controller.ts"),l=x("./src/controller/fragment-tracker.ts"),c=x("./src/controller/stream-controller.ts"),h=x("./src/is-supported.ts"),y=x("./src/utils/logger.ts"),i=x("./src/config.ts"),g=x("./node_modules/eventemitter3/index.js"),d=x("./src/events.ts"),r=x("./src/errors.ts");function t(m,S){for(var A=0;A<S.length;A++){var _=S[A];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}var u=function(){function m(f){f===void 0&&(f={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new g.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var b=this.config=Object(i.mergeConfig)(m.DefaultConfig,f);this.userConfig=f,Object(y.enableLogs)(b.debug),this._autoLevelCapping=-1,b.progressive&&Object(i.enableStreamingMode)(b);var p=b.abrController,k=b.bufferController,P=b.capLevelController,j=b.fpsController,U=this.abrController=new p(this),G=this.bufferController=new k(this),ee=this.capLevelController=new P(this),ne=new j(this),re=new C.default(this),oe=new R.default(this),W=new I.default(this),Te=this.levelController=new T.default(this),Ue=new l.FragmentTracker(this),ze=this.streamController=new c.default(this,Ue);ee.setStreamController(ze),ne.setStreamController(ze);var le=[Te,ze];this.networkControllers=le;var Se=[re,oe,U,G,ee,ne,W,Ue];this.audioTrackController=this.createController(b.audioTrackController,null,le),this.createController(b.audioStreamController,Ue,le),this.subtitleTrackController=this.createController(b.subtitleTrackController,null,le),this.createController(b.subtitleStreamController,Ue,le),this.createController(b.timelineController,null,Se),this.emeController=this.createController(b.emeController,null,Se),this.cmcdController=this.createController(b.cmcdController,null,Se),this.latencyController=this.createController(E.default,null,Se),this.coreComponents=Se}m.isSupported=function(){return Object(h.isSupported)()};var S,A,_,v=m.prototype;return v.createController=function(f,b,p){if(f){var k=b?new f(this,b):new f(this);return p&&p.push(k),k}return null},v.on=function(f,b,p){p===void 0&&(p=this),this._emitter.on(f,b,p)},v.once=function(f,b,p){p===void 0&&(p=this),this._emitter.once(f,b,p)},v.removeAllListeners=function(f){this._emitter.removeAllListeners(f)},v.off=function(f,b,p,k){p===void 0&&(p=this),this._emitter.off(f,b,p,k)},v.listeners=function(f){return this._emitter.listeners(f)},v.emit=function(f,b,p){return this._emitter.emit(f,b,p)},v.trigger=function(f,b){if(this.config.debug)return this.emit(f,f,b);try{return this.emit(f,f,b)}catch(p){y.logger.error("An internal error happened while handling event "+f+'. Error message: "'+p.message+'". Here is a stacktrace:',p),this.trigger(d.Events.ERROR,{type:r.ErrorTypes.OTHER_ERROR,details:r.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:f,error:p})}return!1},v.listenerCount=function(f){return this._emitter.listenerCount(f)},v.destroy=function(){y.logger.log("destroy"),this.trigger(d.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(f){return f.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(f){return f.destroy()}),this.coreComponents.length=0},v.attachMedia=function(f){y.logger.log("attachMedia"),this._media=f,this.trigger(d.Events.MEDIA_ATTACHING,{media:f})},v.detachMedia=function(){y.logger.log("detachMedia"),this.trigger(d.Events.MEDIA_DETACHING,void 0),this._media=null},v.loadSource=function(f){this.stopLoad();var b=this.media,p=this.url,k=this.url=N.buildAbsoluteURL(self.location.href,f,{alwaysNormalize:!0});y.logger.log("loadSource:"+k),b&&p&&p!==k&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(b)),this.trigger(d.Events.MANIFEST_LOADING,{url:f})},v.startLoad=function(f){f===void 0&&(f=-1),y.logger.log("startLoad("+f+")"),this.networkControllers.forEach(function(b){b.startLoad(f)})},v.stopLoad=function(){y.logger.log("stopLoad"),this.networkControllers.forEach(function(f){f.stopLoad()})},v.swapAudioCodec=function(){y.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},v.recoverMediaError=function(){y.logger.log("recoverMediaError");var f=this._media;this.detachMedia(),f&&this.attachMedia(f)},v.removeLevel=function(f,b){b===void 0&&(b=0),this.levelController.removeLevel(f,b)},S=m,_=[{key:"version",get:function(){return"1.1.5"}},{key:"Events",get:function(){return d.Events}},{key:"ErrorTypes",get:function(){return r.ErrorTypes}},{key:"ErrorDetails",get:function(){return r.ErrorDetails}},{key:"DefaultConfig",get:function(){return m.defaultConfig?m.defaultConfig:i.hlsDefaultConfig},set:function(f){m.defaultConfig=f}}],(A=[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(f){y.logger.log("set currentLevel:"+f),this.loadLevel=f,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(f){y.logger.log("set nextLevel:"+f),this.levelController.manualLevel=f,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(f){y.logger.log("set loadLevel:"+f),this.levelController.manualLevel=f}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(f){this.levelController.nextLoadLevel=f}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(f){y.logger.log("set firstLevel:"+f),this.levelController.firstLevel=f}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(f){y.logger.log("set startLevel:"+f),f!==-1&&(f=Math.max(f,this.minAutoLevel)),this.levelController.startLevel=f}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(f){var b=!!f;b!==this.config.capLevelToPlayerSize&&(b?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=b)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(f){this._autoLevelCapping!==f&&(y.logger.log("set autoLevelCapping:"+f),this._autoLevelCapping=f)}},{key:"bandwidthEstimate",get:function(){var f=this.abrController.bwEstimator;return f?f.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var f=this.levels,b=this.config.minAutoBitrate;if(!f)return 0;for(var p=f.length,k=0;k<p;k++)if(f[k].maxBitrate>b)return k;return 0}},{key:"maxAutoLevel",get:function(){var f=this.levels,b=this.autoLevelCapping;return b===-1&&f&&f.length?f.length-1:b}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(f){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,f)}},{key:"audioTracks",get:function(){var f=this.audioTrackController;return f?f.audioTracks:[]}},{key:"audioTrack",get:function(){var f=this.audioTrackController;return f?f.audioTrack:-1},set:function(f){var b=this.audioTrackController;b&&(b.audioTrack=f)}},{key:"subtitleTracks",get:function(){var f=this.subtitleTrackController;return f?f.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var f=this.subtitleTrackController;return f?f.subtitleTrack:-1},set:function(f){var b=this.subtitleTrackController;b&&(b.subtitleTrack=f)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var f=this.subtitleTrackController;return!!f&&f.subtitleDisplay},set:function(f){var b=this.subtitleTrackController;b&&(b.subtitleDisplay=f)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(f){this.config.lowLatencyMode=f}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&t(S.prototype,A),_&&t(S,_),m}();u.defaultConfig=void 0},"./src/is-supported.ts":function(K,M,x){x.r(M),x.d(M,"isSupported",function(){return R}),x.d(M,"changeTypeSupported",function(){return I});var N=x("./src/utils/mediasource-helper.ts");function C(){return self.SourceBuffer||self.WebKitSourceBuffer}function R(){var E=Object(N.getMediaSource)();if(!E)return!1;var T=C(),l=E&&typeof E.isTypeSupported=="function"&&E.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),c=!T||T.prototype&&typeof T.prototype.appendBuffer=="function"&&typeof T.prototype.remove=="function";return!!l&&!!c}function I(){var E,T=C();return typeof(T==null||(E=T.prototype)===null||E===void 0?void 0:E.changeType)=="function"}},"./src/loader/fragment-loader.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return c}),x.d(M,"LoadError",function(){return y});var N=x("./src/polyfills/number.ts"),C=x("./src/errors.ts");function R(i){var g=typeof Map=="function"?new Map:void 0;return R=function(d){if(d===null||(r=d,Function.toString.call(r).indexOf("[native code]")===-1))return d;var r;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(g!==void 0){if(g.has(d))return g.get(d);g.set(d,t)}function t(){return I(d,arguments,T(this).constructor)}return t.prototype=Object.create(d.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),E(t,d)},R(i)}function I(i,g,d){return I=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(r,t,u){var m=[null];m.push.apply(m,t);var S=new(Function.bind.apply(r,m));return u&&E(S,u.prototype),S},I.apply(null,arguments)}function E(i,g){return E=Object.setPrototypeOf||function(d,r){return d.__proto__=r,d},E(i,g)}function T(i){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},T(i)}var l=Math.pow(2,17),c=function(){function i(d){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=d}var g=i.prototype;return g.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},g.abort=function(){this.loader&&this.loader.abort()},g.load=function(d,r){var t=this,u=d.url;if(!u)return Promise.reject(new y({type:C.ErrorTypes.NETWORK_ERROR,details:C.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:d,networkDetails:null},"Fragment does not have a "+(u?"part list":"url")));this.abort();var m=this.config,S=m.fLoader,A=m.loader;return new Promise(function(_,v){t.loader&&t.loader.destroy();var f=t.loader=d.loader=S?new S(m):new A(m),b=h(d),p={timeout:m.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:m.fragLoadingMaxRetryTimeout,highWaterMark:l};d.stats=f.stats,f.load(b,p,{onSuccess:function(k,P,j,U){t.resetLoader(d,f),_({frag:d,part:null,payload:k.data,networkDetails:U})},onError:function(k,P,j){t.resetLoader(d,f),v(new y({type:C.ErrorTypes.NETWORK_ERROR,details:C.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:d,response:k,networkDetails:j}))},onAbort:function(k,P,j){t.resetLoader(d,f),v(new y({type:C.ErrorTypes.NETWORK_ERROR,details:C.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:d,networkDetails:j}))},onTimeout:function(k,P,j){t.resetLoader(d,f),v(new y({type:C.ErrorTypes.NETWORK_ERROR,details:C.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:d,networkDetails:j}))},onProgress:function(k,P,j,U){r&&r({frag:d,part:null,payload:j,networkDetails:U})}})})},g.loadPart=function(d,r,t){var u=this;this.abort();var m=this.config,S=m.fLoader,A=m.loader;return new Promise(function(_,v){u.loader&&u.loader.destroy();var f=u.loader=d.loader=S?new S(m):new A(m),b=h(d,r),p={timeout:m.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:m.fragLoadingMaxRetryTimeout,highWaterMark:l};r.stats=f.stats,f.load(b,p,{onSuccess:function(k,P,j,U){u.resetLoader(d,f),u.updateStatsFromPart(d,r);var G={frag:d,part:r,payload:k.data,networkDetails:U};t(G),_(G)},onError:function(k,P,j){u.resetLoader(d,f),v(new y({type:C.ErrorTypes.NETWORK_ERROR,details:C.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:d,part:r,response:k,networkDetails:j}))},onAbort:function(k,P,j){d.stats.aborted=r.stats.aborted,u.resetLoader(d,f),v(new y({type:C.ErrorTypes.NETWORK_ERROR,details:C.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:d,part:r,networkDetails:j}))},onTimeout:function(k,P,j){u.resetLoader(d,f),v(new y({type:C.ErrorTypes.NETWORK_ERROR,details:C.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:d,part:r,networkDetails:j}))}})})},g.updateStatsFromPart=function(d,r){var t=d.stats,u=r.stats,m=u.total;if(t.loaded+=u.loaded,m){var S=Math.round(d.duration/r.duration),A=Math.min(Math.round(t.loaded/m),S),_=(S-A)*Math.round(t.loaded/A);t.total=t.loaded+_}else t.total=Math.max(t.loaded,t.total);var v=t.loading,f=u.loading;v.start?v.first+=f.first-f.start:(v.start=f.start,v.first=f.first),v.end=f.end},g.resetLoader=function(d,r){d.loader=null,this.loader===r&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),r.destroy()},i}();function h(i,g){g===void 0&&(g=null);var d=g||i,r={frag:i,part:g,responseType:"arraybuffer",url:d.url,headers:{},rangeStart:0,rangeEnd:0},t=d.byteRangeStartOffset,u=d.byteRangeEndOffset;return Object(N.isFiniteNumber)(t)&&Object(N.isFiniteNumber)(u)&&(r.rangeStart=t,r.rangeEnd=u),r}var y=function(i){var g,d;function r(t){for(var u,m=arguments.length,S=new Array(m>1?m-1:0),A=1;A<m;A++)S[A-1]=arguments[A];return(u=i.call.apply(i,[this].concat(S))||this).data=void 0,u.data=t,u}return d=i,(g=r).prototype=Object.create(d.prototype),g.prototype.constructor=g,E(g,d),r}(R(Error))},"./src/loader/fragment.ts":function(K,M,x){x.r(M),x.d(M,"ElementaryStreamTypes",function(){return N}),x.d(M,"BaseSegment",function(){return i}),x.d(M,"Fragment",function(){return g}),x.d(M,"Part",function(){return d});var N,C=x("./src/polyfills/number.ts"),R=x("./node_modules/url-toolkit/src/url-toolkit.js"),I=x("./src/utils/logger.ts"),E=x("./src/loader/level-key.ts"),T=x("./src/loader/load-stats.ts");function l(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,c(r,t)}function c(r,t){return c=Object.setPrototypeOf||function(u,m){return u.__proto__=m,u},c(r,t)}function h(r,t){for(var u=0;u<t.length;u++){var m=t[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(r,m.key,m)}}function y(r,t,u){return t&&h(r.prototype,t),u&&h(r,u),r}(function(r){r.AUDIO="audio",r.VIDEO="video",r.AUDIOVIDEO="audiovideo"})(N||(N={}));var i=function(){function r(t){var u;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((u={})[N.AUDIO]=null,u[N.VIDEO]=null,u[N.AUDIOVIDEO]=null,u),this.baseurl=t}return r.prototype.setByteRange=function(t,u){var m=t.split("@",2),S=[];m.length===1?S[0]=u?u.byteRangeEndOffset:0:S[0]=parseInt(m[1]),S[1]=parseInt(m[0])+S[0],this._byteRange=S},y(r,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(R.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(t){this._url=t}}]),r}(),g=function(r){function t(m,S){var A;return(A=r.call(this,S)||this)._decryptdata=null,A.rawProgramDateTime=null,A.programDateTime=null,A.tagList=[],A.duration=0,A.sn=0,A.levelkey=void 0,A.type=void 0,A.loader=null,A.level=-1,A.cc=0,A.startPTS=void 0,A.endPTS=void 0,A.appendedPTS=void 0,A.startDTS=void 0,A.endDTS=void 0,A.start=0,A.deltaPTS=void 0,A.maxStartPTS=void 0,A.minEndPTS=void 0,A.stats=new T.LoadStats,A.urlId=0,A.data=void 0,A.bitrateTest=!1,A.title=null,A.initSegment=null,A.type=m,A}l(t,r);var u=t.prototype;return u.createInitializationVector=function(m){for(var S=new Uint8Array(16),A=12;A<16;A++)S[A]=m>>8*(15-A)&255;return S},u.setDecryptDataFromLevelKey=function(m,S){var A=m;return(m==null?void 0:m.method)==="AES-128"&&m.uri&&!m.iv&&((A=E.LevelKey.fromURI(m.uri)).method=m.method,A.iv=this.createInitializationVector(S),A.keyFormat="identity"),A},u.setElementaryStreamInfo=function(m,S,A,_,v,f){f===void 0&&(f=!1);var b=this.elementaryStreams,p=b[m];p?(p.startPTS=Math.min(p.startPTS,S),p.endPTS=Math.max(p.endPTS,A),p.startDTS=Math.min(p.startDTS,_),p.endDTS=Math.max(p.endDTS,v)):b[m]={startPTS:S,endPTS:A,startDTS:_,endDTS:v,partial:f}},u.clearElementaryStreamInfo=function(){var m=this.elementaryStreams;m[N.AUDIO]=null,m[N.VIDEO]=null,m[N.AUDIOVIDEO]=null},y(t,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var m=this.sn;typeof m!="number"&&(this.levelkey&&this.levelkey.method==="AES-128"&&!this.levelkey.iv&&I.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),m=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,m)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!Object(C.isFiniteNumber)(this.programDateTime))return null;var m=Object(C.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*m}},{key:"encrypted",get:function(){var m;return!((m=this.decryptdata)===null||m===void 0||!m.keyFormat||!this.decryptdata.uri)}}]),t}(i),d=function(r){function t(u,m,S,A,_){var v;(v=r.call(this,S)||this).fragOffset=0,v.duration=0,v.gap=!1,v.independent=!1,v.relurl=void 0,v.fragment=void 0,v.index=void 0,v.stats=new T.LoadStats,v.duration=u.decimalFloatingPoint("DURATION"),v.gap=u.bool("GAP"),v.independent=u.bool("INDEPENDENT"),v.relurl=u.enumeratedString("URI"),v.fragment=m,v.index=A;var f=u.enumeratedString("BYTERANGE");return f&&v.setByteRange(f,_),_&&(v.fragOffset=_.fragOffset+_.duration),v}return l(t,r),y(t,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var u=this.elementaryStreams;return!!(u.audio||u.video||u.audiovideo)}}]),t}(i)},"./src/loader/key-loader.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return I});var N=x("./src/events.ts"),C=x("./src/errors.ts"),R=x("./src/utils/logger.ts"),I=function(){function E(l){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=l,this._registerListeners()}var T=E.prototype;return T._registerListeners=function(){this.hls.on(N.Events.KEY_LOADING,this.onKeyLoading,this)},T._unregisterListeners=function(){this.hls.off(N.Events.KEY_LOADING,this.onKeyLoading)},T.destroy=function(){for(var l in this._unregisterListeners(),this.loaders){var c=this.loaders[l];c&&c.destroy()}this.loaders={}},T.onKeyLoading=function(l,c){var h=c.frag,y=h.type,i=this.loaders[y];if(h.decryptdata){var g=h.decryptdata.uri;if(g!==this.decrypturl||this.decryptkey===null){var d=this.hls.config;if(i&&(R.logger.warn("abort previous key loader for type:"+y),i.abort()),!g)return void R.logger.warn("key uri is falsy");var r=d.loader,t=h.loader=this.loaders[y]=new r(d);this.decrypturl=g,this.decryptkey=null;var u={url:g,frag:h,responseType:"arraybuffer"},m={timeout:d.fragLoadingTimeOut,maxRetry:0,retryDelay:d.fragLoadingRetryDelay,maxRetryDelay:d.fragLoadingMaxRetryTimeout,highWaterMark:0},S={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.load(u,m,S)}else this.decryptkey&&(h.decryptdata.key=this.decryptkey,this.hls.trigger(N.Events.KEY_LOADED,{frag:h}))}else R.logger.warn("Missing decryption data on fragment in onKeyLoading")},T.loadsuccess=function(l,c,h){var y=h.frag;y.decryptdata?(this.decryptkey=y.decryptdata.key=new Uint8Array(l.data),y.loader=null,delete this.loaders[y.type],this.hls.trigger(N.Events.KEY_LOADED,{frag:y})):R.logger.error("after key load, decryptdata unset")},T.loaderror=function(l,c){var h=c.frag,y=h.loader;y&&y.abort(),delete this.loaders[h.type],this.hls.trigger(N.Events.ERROR,{type:C.ErrorTypes.NETWORK_ERROR,details:C.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:h,response:l})},T.loadtimeout=function(l,c){var h=c.frag,y=h.loader;y&&y.abort(),delete this.loaders[h.type],this.hls.trigger(N.Events.ERROR,{type:C.ErrorTypes.NETWORK_ERROR,details:C.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:h})},E}()},"./src/loader/level-details.ts":function(K,M,x){x.r(M),x.d(M,"LevelDetails",function(){return R});var N=x("./src/polyfills/number.ts");function C(I,E){for(var T=0;T<E.length;T++){var l=E[T];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(I,l.key,l)}}var R=function(){function I(l){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=l}var E,T;return I.prototype.reloaded=function(l){if(!l)return this.advanced=!0,void(this.updated=!0);var c=this.lastPartSn-l.lastPartSn,h=this.lastPartIndex-l.lastPartIndex;this.updated=this.endSN!==l.endSN||!!h||!!c,this.advanced=this.endSN>l.endSN||c>0||c===0&&h>0,this.updated||this.advanced?this.misses=Math.floor(.6*l.misses):this.misses=l.misses+1,this.availabilityDelay=l.availabilityDelay},E=I,(T=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(N.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var l=this.driftEndTime-this.driftStartTime;return l>0?1e3*(this.driftEnd-this.driftStart)/l:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var l;return(l=this.partList)!==null&&l!==void 0&&l.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var l;return(l=this.fragments)!==null&&l!==void 0&&l.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var l;return(l=this.partList)!==null&&l!==void 0&&l.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var l;return(l=this.partList)!==null&&l!==void 0&&l.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&C(E.prototype,T),I}()},"./src/loader/level-key.ts":function(K,M,x){x.r(M),x.d(M,"LevelKey",function(){return R});var N=x("./node_modules/url-toolkit/src/url-toolkit.js");function C(I,E){for(var T=0;T<E.length;T++){var l=E[T];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(I,l.key,l)}}var R=function(){function I(l,c){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=c?Object(N.buildAbsoluteURL)(l,c,{alwaysNormalize:!0}):l}var E,T;return I.fromURL=function(l,c){return new I(l,c)},I.fromURI=function(l){return new I(l)},E=I,(T=[{key:"uri",get:function(){return this._uri}}])&&C(E.prototype,T),I}()},"./src/loader/load-stats.ts":function(K,M,x){x.r(M),x.d(M,"LoadStats",function(){return N});var N=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return r});var N=x("./src/polyfills/number.ts"),C=x("./node_modules/url-toolkit/src/url-toolkit.js"),R=x("./src/loader/fragment.ts"),I=x("./src/loader/level-details.ts"),E=x("./src/loader/level-key.ts"),T=x("./src/utils/attr-list.ts"),l=x("./src/utils/logger.ts"),c=x("./src/utils/codecs.ts"),h=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,y=/#EXT-X-MEDIA:(.*)/g,i=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),g=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),d=/\.(mp4|m4s|m4v|m4a)$/i,r=function(){function S(){}return S.findGroup=function(A,_){for(var v=0;v<A.length;v++){var f=A[v];if(f.id===_)return f}},S.convertAVC1ToAVCOTI=function(A){var _=A.split(".");if(_.length>2){var v=_.shift()+".";return(v+=parseInt(_.shift()).toString(16))+("000"+parseInt(_.shift()).toString(16)).substr(-4)}return A},S.resolve=function(A,_){return C.buildAbsoluteURL(_,A,{alwaysNormalize:!0})},S.parseMasterPlaylist=function(A,_){var v,f=[],b={},p=!1;for(h.lastIndex=0;(v=h.exec(A))!=null;)if(v[1]){var k=new T.AttrList(v[1]),P={attrs:k,bitrate:k.decimalInteger("AVERAGE-BANDWIDTH")||k.decimalInteger("BANDWIDTH"),name:k.NAME,url:S.resolve(v[2],_)},j=k.decimalResolution("RESOLUTION");j&&(P.width=j.width,P.height=j.height),t((k.CODECS||"").split(/[ ,]+/).filter(function(G){return G}),P),P.videoCodec&&P.videoCodec.indexOf("avc1")!==-1&&(P.videoCodec=S.convertAVC1ToAVCOTI(P.videoCodec)),f.push(P)}else if(v[3]){var U=new T.AttrList(v[3]);U["DATA-ID"]&&(p=!0,b[U["DATA-ID"]]=U)}return{levels:f,sessionData:p?b:null}},S.parseMasterPlaylistMedia=function(A,_,v,f){var b;f===void 0&&(f=[]);var p=[],k=0;for(y.lastIndex=0;(b=y.exec(A))!==null;){var P=new T.AttrList(b[1]);if(P.TYPE===v){var j={attrs:P,bitrate:0,id:k++,groupId:P["GROUP-ID"],instreamId:P["INSTREAM-ID"],name:P.NAME||P.LANGUAGE||"",type:v,default:P.bool("DEFAULT"),autoselect:P.bool("AUTOSELECT"),forced:P.bool("FORCED"),lang:P.LANGUAGE,url:P.URI?S.resolve(P.URI,_):""};if(f.length){var U=S.findGroup(f,j.groupId)||f[0];u(j,U,"audioCodec"),u(j,U,"textCodec")}p.push(j)}}return p},S.parseLevelPlaylist=function(A,_,v,f,b){var p,k,P,j=new I.LevelDetails(_),U=j.fragments,G=null,ee=0,ne=0,re=0,oe=0,W=null,Te=new R.Fragment(f,_),Ue=-1,ze=!1;for(i.lastIndex=0,j.m3u8=A;(p=i.exec(A))!==null;){ze&&(ze=!1,(Te=new R.Fragment(f,_)).start=re,Te.sn=ee,Te.cc=oe,Te.level=v,G&&(Te.initSegment=G,Te.rawProgramDateTime=G.rawProgramDateTime));var le=p[1];if(le){Te.duration=parseFloat(le);var Se=(" "+p[2]).slice(1);Te.title=Se||null,Te.tagList.push(Se?["INF",le,Se]:["INF",le])}else if(p[3])Object(N.isFiniteNumber)(Te.duration)&&(Te.start=re,P&&(Te.levelkey=P),Te.sn=ee,Te.level=v,Te.cc=oe,Te.urlId=b,U.push(Te),Te.relurl=(" "+p[3]).slice(1),m(Te,W),W=Te,re+=Te.duration,ee++,ne=0,ze=!0);else if(p[4]){var be=(" "+p[4]).slice(1);W?Te.setByteRange(be,W):Te.setByteRange(be)}else if(p[5])Te.rawProgramDateTime=(" "+p[5]).slice(1),Te.tagList.push(["PROGRAM-DATE-TIME",Te.rawProgramDateTime]),Ue===-1&&(Ue=U.length);else{if(!(p=p[0].match(g))){l.logger.warn("No matches on slow regex match for level playlist!");continue}for(k=1;k<p.length&&p[k]===void 0;k++);var Y=(" "+p[k]).slice(1),Q=(" "+p[k+1]).slice(1),J=p[k+2]?(" "+p[k+2]).slice(1):"";switch(Y){case"PLAYLIST-TYPE":j.type=Q.toUpperCase();break;case"MEDIA-SEQUENCE":ee=j.startSN=parseInt(Q);break;case"SKIP":var fe=new T.AttrList(Q),Ce=fe.decimalInteger("SKIPPED-SEGMENTS");if(Object(N.isFiniteNumber)(Ce)){j.skippedSegments=Ce;for(var V=Ce;V--;)U.unshift(null);ee+=Ce}var H=fe.enumeratedString("RECENTLY-REMOVED-DATERANGES");H&&(j.recentlyRemovedDateranges=H.split("	"));break;case"TARGETDURATION":j.targetduration=parseFloat(Q);break;case"VERSION":j.version=parseInt(Q);break;case"EXTM3U":break;case"ENDLIST":j.live=!1;break;case"#":(Q||J)&&Te.tagList.push(J?[Q,J]:[Q]);break;case"DIS":oe++;case"GAP":Te.tagList.push([Y]);break;case"BITRATE":Te.tagList.push([Y,Q]);break;case"DISCONTINUITY-SEQ":oe=parseInt(Q);break;case"KEY":var z,X=new T.AttrList(Q),de=X.enumeratedString("METHOD"),ge=X.URI,Ge=X.hexadecimalInteger("IV"),it=X.enumeratedString("KEYFORMATVERSIONS"),Ye=X.enumeratedString("KEYID"),Ke=(z=X.enumeratedString("KEYFORMAT"))!=null?z:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(Ke)>-1){l.logger.warn("Keyformat "+Ke+" is not supported from the manifest");continue}if(Ke!=="identity")continue;de&&(P=E.LevelKey.fromURL(_,ge),ge&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(de)>=0&&(P.method=de,P.keyFormat=Ke,Ye&&(P.keyID=Ye),it&&(P.keyFormatVersions=it),P.iv=Ge));break;case"START":var dt=new T.AttrList(Q).decimalFloatingPoint("TIME-OFFSET");Object(N.isFiniteNumber)(dt)&&(j.startTimeOffset=dt);break;case"MAP":var me=new T.AttrList(Q);Te.relurl=me.URI,me.BYTERANGE&&Te.setByteRange(me.BYTERANGE),Te.level=v,Te.sn="initSegment",P&&(Te.levelkey=P),Te.initSegment=null,G=Te,ze=!0;break;case"SERVER-CONTROL":var ke=new T.AttrList(Q);j.canBlockReload=ke.bool("CAN-BLOCK-RELOAD"),j.canSkipUntil=ke.optionalFloat("CAN-SKIP-UNTIL",0),j.canSkipDateRanges=j.canSkipUntil>0&&ke.bool("CAN-SKIP-DATERANGES"),j.partHoldBack=ke.optionalFloat("PART-HOLD-BACK",0),j.holdBack=ke.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var Je=new T.AttrList(Q);j.partTarget=Je.decimalFloatingPoint("PART-TARGET");break;case"PART":var Xe=j.partList;Xe||(Xe=j.partList=[]);var nt=ne>0?Xe[Xe.length-1]:void 0,Tt=ne++,bt=new R.Part(new T.AttrList(Q),Te,_,Tt,nt);Xe.push(bt),Te.duration+=bt.duration;break;case"PRELOAD-HINT":var Ft=new T.AttrList(Q);j.preloadHint=Ft;break;case"RENDITION-REPORT":var pn=new T.AttrList(Q);j.renditionReports=j.renditionReports||[],j.renditionReports.push(pn);break;default:l.logger.warn("line parsed but not handled: "+p)}}}W&&!W.relurl?(U.pop(),re-=W.duration,j.partList&&(j.fragmentHint=W)):j.partList&&(m(Te,W),Te.cc=oe,j.fragmentHint=Te);var wn=U.length,hn=U[0],Xn=U[wn-1];if((re+=j.skippedSegments*j.targetduration)>0&&wn&&Xn){j.averagetargetduration=re/wn;var on=Xn.sn;j.endSN=on!=="initSegment"?on:0,hn&&(j.startCC=hn.cc,hn.initSegment||j.fragments.every(function(Zn){return Zn.relurl&&(Bn=Zn.relurl,d.test((Rr=(Nr=C.parseURL(Bn))===null||Nr===void 0?void 0:Nr.path)!=null?Rr:""));var Bn,Rr,Nr})&&(l.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(Te=new R.Fragment(f,_)).relurl=Xn.relurl,Te.level=v,Te.sn="initSegment",hn.initSegment=Te,j.needSidxRanges=!0))}else j.endSN=0,j.startCC=0;return j.fragmentHint&&(re+=j.fragmentHint.duration),j.totalduration=re,j.endCC=oe,Ue>0&&function(Zn,Bn){for(var Rr=Zn[Bn],Nr=Bn;Nr--;){var Ir=Zn[Nr];if(!Ir)return;Ir.programDateTime=Rr.programDateTime-1e3*Ir.duration,Rr=Ir}}(U,Ue),j},S}();function t(S,A){["video","audio","text"].forEach(function(_){var v=S.filter(function(b){return Object(c.isCodecType)(b,_)});if(v.length){var f=v.filter(function(b){return b.lastIndexOf("avc1",0)===0||b.lastIndexOf("mp4a",0)===0});A[_+"Codec"]=f.length>0?f[0]:v[0],S=S.filter(function(b){return v.indexOf(b)===-1})}}),A.unknownCodecs=S}function u(S,A,_){var v=A[_];v&&(S[_]=v)}function m(S,A){S.rawProgramDateTime?S.programDateTime=Date.parse(S.rawProgramDateTime):A!=null&&A.programDateTime&&(S.programDateTime=A.endProgramDateTime),Object(N.isFiniteNumber)(S.programDateTime)||(S.programDateTime=null,S.rawProgramDateTime=null)}},"./src/loader/playlist-loader.ts":function(K,M,x){x.r(M);var N=x("./src/polyfills/number.ts"),C=x("./src/events.ts"),R=x("./src/errors.ts"),I=x("./src/utils/logger.ts"),E=x("./src/utils/mp4-tools.ts"),T=x("./src/loader/m3u8-parser.ts"),l=x("./src/types/loader.ts"),c=x("./src/utils/attr-list.ts");function h(i,g){var d=i.url;return d!==void 0&&d.indexOf("data:")!==0||(d=g.url),d}var y=function(){function i(d){this.hls=void 0,this.loaders=Object.create(null),this.hls=d,this.registerListeners()}var g=i.prototype;return g.registerListeners=function(){var d=this.hls;d.on(C.Events.MANIFEST_LOADING,this.onManifestLoading,this),d.on(C.Events.LEVEL_LOADING,this.onLevelLoading,this),d.on(C.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),d.on(C.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},g.unregisterListeners=function(){var d=this.hls;d.off(C.Events.MANIFEST_LOADING,this.onManifestLoading,this),d.off(C.Events.LEVEL_LOADING,this.onLevelLoading,this),d.off(C.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),d.off(C.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},g.createInternalLoader=function(d){var r=this.hls.config,t=r.pLoader,u=r.loader,m=new(t||u)(r);return d.loader=m,this.loaders[d.type]=m,m},g.getInternalLoader=function(d){return this.loaders[d.type]},g.resetInternalLoader=function(d){this.loaders[d]&&delete this.loaders[d]},g.destroyInternalLoaders=function(){for(var d in this.loaders){var r=this.loaders[d];r&&r.destroy(),this.resetInternalLoader(d)}},g.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},g.onManifestLoading=function(d,r){var t=r.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:l.PlaylistContextType.MANIFEST,url:t,deliveryDirectives:null})},g.onLevelLoading=function(d,r){var t=r.id,u=r.level,m=r.url,S=r.deliveryDirectives;this.load({id:t,groupId:null,level:u,responseType:"text",type:l.PlaylistContextType.LEVEL,url:m,deliveryDirectives:S})},g.onAudioTrackLoading=function(d,r){var t=r.id,u=r.groupId,m=r.url,S=r.deliveryDirectives;this.load({id:t,groupId:u,level:null,responseType:"text",type:l.PlaylistContextType.AUDIO_TRACK,url:m,deliveryDirectives:S})},g.onSubtitleTrackLoading=function(d,r){var t=r.id,u=r.groupId,m=r.url,S=r.deliveryDirectives;this.load({id:t,groupId:u,level:null,responseType:"text",type:l.PlaylistContextType.SUBTITLE_TRACK,url:m,deliveryDirectives:S})},g.load=function(d){var r,t,u,m,S,A,_=this.hls.config,v=this.getInternalLoader(d);if(v){var f=v.context;if(f&&f.url===d.url)return void I.logger.trace("[playlist-loader]: playlist request ongoing");I.logger.log("[playlist-loader]: aborting previous loader for type: "+d.type),v.abort()}switch(d.type){case l.PlaylistContextType.MANIFEST:t=_.manifestLoadingMaxRetry,u=_.manifestLoadingTimeOut,m=_.manifestLoadingRetryDelay,S=_.manifestLoadingMaxRetryTimeout;break;case l.PlaylistContextType.LEVEL:case l.PlaylistContextType.AUDIO_TRACK:case l.PlaylistContextType.SUBTITLE_TRACK:t=0,u=_.levelLoadingTimeOut;break;default:t=_.levelLoadingMaxRetry,u=_.levelLoadingTimeOut,m=_.levelLoadingRetryDelay,S=_.levelLoadingMaxRetryTimeout}if(v=this.createInternalLoader(d),(r=d.deliveryDirectives)!==null&&r!==void 0&&r.part&&(d.type===l.PlaylistContextType.LEVEL&&d.level!==null?A=this.hls.levels[d.level].details:d.type===l.PlaylistContextType.AUDIO_TRACK&&d.id!==null?A=this.hls.audioTracks[d.id].details:d.type===l.PlaylistContextType.SUBTITLE_TRACK&&d.id!==null&&(A=this.hls.subtitleTracks[d.id].details),A)){var b=A.partTarget,p=A.targetduration;b&&p&&(u=Math.min(1e3*Math.max(3*b,.8*p),u))}var k={timeout:u,maxRetry:t,retryDelay:m,maxRetryDelay:S,highWaterMark:0},P={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};v.load(d,k,P)},g.loadsuccess=function(d,r,t,u){if(u===void 0&&(u=null),t.isSidxRequest)return this.handleSidxRequest(d,t),void this.handlePlaylistLoaded(d,r,t,u);this.resetInternalLoader(t.type);var m=d.data;m.indexOf("#EXTM3U")===0?(r.parsing.start=performance.now(),m.indexOf("#EXTINF:")>0||m.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(d,r,t,u):this.handleMasterPlaylist(d,r,t,u)):this.handleManifestParsingError(d,t,"no EXTM3U delimiter",u)},g.loaderror=function(d,r,t){t===void 0&&(t=null),this.handleNetworkError(r,t,!1,d)},g.loadtimeout=function(d,r,t){t===void 0&&(t=null),this.handleNetworkError(r,t,!0)},g.handleMasterPlaylist=function(d,r,t,u){var m=this.hls,S=d.data,A=h(d,t),_=T.default.parseMasterPlaylist(S,A),v=_.levels,f=_.sessionData;if(v.length){var b=v.map(function(U){return{id:U.attrs.AUDIO,audioCodec:U.audioCodec}}),p=v.map(function(U){return{id:U.attrs.SUBTITLES,textCodec:U.textCodec}}),k=T.default.parseMasterPlaylistMedia(S,A,"AUDIO",b),P=T.default.parseMasterPlaylistMedia(S,A,"SUBTITLES",p),j=T.default.parseMasterPlaylistMedia(S,A,"CLOSED-CAPTIONS");k.length&&(k.some(function(U){return!U.url})||!v[0].audioCodec||v[0].attrs.AUDIO||(I.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),k.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new c.AttrList({}),bitrate:0,url:""}))),m.trigger(C.Events.MANIFEST_LOADED,{levels:v,audioTracks:k,subtitles:P,captions:j,url:A,stats:r,networkDetails:u,sessionData:f})}else this.handleManifestParsingError(d,t,"no level found in manifest",u)},g.handleTrackOrLevelPlaylist=function(d,r,t,u){var m=this.hls,S=t.id,A=t.level,_=t.type,v=h(d,t),f=Object(N.isFiniteNumber)(S)?S:0,b=Object(N.isFiniteNumber)(A)?A:f,p=function(G){switch(G.type){case l.PlaylistContextType.AUDIO_TRACK:return l.PlaylistLevelType.AUDIO;case l.PlaylistContextType.SUBTITLE_TRACK:return l.PlaylistLevelType.SUBTITLE;default:return l.PlaylistLevelType.MAIN}}(t),k=T.default.parseLevelPlaylist(d.data,v,b,p,f);if(k.fragments.length){if(_===l.PlaylistContextType.MANIFEST){var P={attrs:new c.AttrList({}),bitrate:0,details:k,name:"",url:v};m.trigger(C.Events.MANIFEST_LOADED,{levels:[P],audioTracks:[],url:v,stats:r,networkDetails:u,sessionData:null})}if(r.parsing.end=performance.now(),k.needSidxRanges){var j,U=(j=k.fragments[0].initSegment)===null||j===void 0?void 0:j.url;this.load({url:U,isSidxRequest:!0,type:_,level:A,levelDetails:k,id:S,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else t.levelDetails=k,this.handlePlaylistLoaded(d,r,t,u)}else m.trigger(C.Events.ERROR,{type:R.ErrorTypes.NETWORK_ERROR,details:R.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:v,reason:"no fragments found in level",level:typeof t.level=="number"?t.level:void 0})},g.handleSidxRequest=function(d,r){var t=Object(E.parseSegmentIndex)(new Uint8Array(d.data));if(t){var u=t.references,m=r.levelDetails;u.forEach(function(S,A){var _=S.info,v=m.fragments[A];v.byteRange.length===0&&v.setByteRange(String(1+_.end-_.start)+"@"+String(_.start)),v.initSegment&&v.initSegment.setByteRange(String(t.moovEndOffset)+"@0")})}},g.handleManifestParsingError=function(d,r,t,u){this.hls.trigger(C.Events.ERROR,{type:R.ErrorTypes.NETWORK_ERROR,details:R.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:r.type===l.PlaylistContextType.MANIFEST,url:d.url,reason:t,response:d,context:r,networkDetails:u})},g.handleNetworkError=function(d,r,t,u){t===void 0&&(t=!1),I.logger.warn("[playlist-loader]: A network "+(t?"timeout":"error")+" occurred while loading "+d.type+" level: "+d.level+" id: "+d.id+' group-id: "'+d.groupId+'"');var m=R.ErrorDetails.UNKNOWN,S=!1,A=this.getInternalLoader(d);switch(d.type){case l.PlaylistContextType.MANIFEST:m=t?R.ErrorDetails.MANIFEST_LOAD_TIMEOUT:R.ErrorDetails.MANIFEST_LOAD_ERROR,S=!0;break;case l.PlaylistContextType.LEVEL:m=t?R.ErrorDetails.LEVEL_LOAD_TIMEOUT:R.ErrorDetails.LEVEL_LOAD_ERROR,S=!1;break;case l.PlaylistContextType.AUDIO_TRACK:m=t?R.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:R.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,S=!1;break;case l.PlaylistContextType.SUBTITLE_TRACK:m=t?R.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:R.ErrorDetails.SUBTITLE_LOAD_ERROR,S=!1}A&&this.resetInternalLoader(d.type);var _={type:R.ErrorTypes.NETWORK_ERROR,details:m,fatal:S,url:d.url,loader:A,context:d,networkDetails:r};u&&(_.response=u),this.hls.trigger(C.Events.ERROR,_)},g.handlePlaylistLoaded=function(d,r,t,u){var m=t.type,S=t.level,A=t.id,_=t.groupId,v=t.loader,f=t.levelDetails,b=t.deliveryDirectives;if(f!=null&&f.targetduration){if(v)switch(f.live&&(v.getCacheAge&&(f.ageHeader=v.getCacheAge()||0),v.getCacheAge&&!isNaN(f.ageHeader)||(f.ageHeader=0)),m){case l.PlaylistContextType.MANIFEST:case l.PlaylistContextType.LEVEL:this.hls.trigger(C.Events.LEVEL_LOADED,{details:f,level:S||0,id:A||0,stats:r,networkDetails:u,deliveryDirectives:b});break;case l.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(C.Events.AUDIO_TRACK_LOADED,{details:f,id:A||0,groupId:_||"",stats:r,networkDetails:u,deliveryDirectives:b});break;case l.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(C.Events.SUBTITLE_TRACK_LOADED,{details:f,id:A||0,groupId:_||"",stats:r,networkDetails:u,deliveryDirectives:b})}}else this.handleManifestParsingError(d,t,"invalid target duration",u)},i}();M.default=y},"./src/polyfills/number.ts":function(K,M,x){x.r(M),x.d(M,"isFiniteNumber",function(){return N}),x.d(M,"MAX_SAFE_INTEGER",function(){return C});var N=Number.isFinite||function(R){return typeof R=="number"&&isFinite(R)},C=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":function(K,M,x){x.r(M);var N=function(){function C(){}return C.getSilentFrame=function(R,I){if(R==="mp4a.40.2"){if(I===1)return new Uint8Array([0,200,0,128,35,128]);if(I===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(I===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(I===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(I===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(I===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(I===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(I===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(I===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},C}();M.default=N},"./src/remux/mp4-generator.ts":function(K,M,x){x.r(M);var N=Math.pow(2,32)-1,C=function(){function R(){}return R.init=function(){var I;for(I in R.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},R.types)R.types.hasOwnProperty(I)&&(R.types[I]=[I.charCodeAt(0),I.charCodeAt(1),I.charCodeAt(2),I.charCodeAt(3)]);var E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),T=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);R.HDLR_TYPES={video:E,audio:T};var l=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),c=new Uint8Array([0,0,0,0,0,0,0,0]);R.STTS=R.STSC=R.STCO=c,R.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),R.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),R.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),R.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var h=new Uint8Array([105,115,111,109]),y=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);R.FTYP=R.box(R.types.ftyp,h,i,h,y),R.DINF=R.box(R.types.dinf,R.box(R.types.dref,l))},R.box=function(I){for(var E=8,T=arguments.length,l=new Array(T>1?T-1:0),c=1;c<T;c++)l[c-1]=arguments[c];for(var h=l.length,y=h;h--;)E+=l[h].byteLength;var i=new Uint8Array(E);for(i[0]=E>>24&255,i[1]=E>>16&255,i[2]=E>>8&255,i[3]=255&E,i.set(I,4),h=0,E=8;h<y;h++)i.set(l[h],E),E+=l[h].byteLength;return i},R.hdlr=function(I){return R.box(R.types.hdlr,R.HDLR_TYPES[I])},R.mdat=function(I){return R.box(R.types.mdat,I)},R.mdhd=function(I,E){E*=I;var T=Math.floor(E/(N+1)),l=Math.floor(E%(N+1));return R.box(R.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,I>>24&255,I>>16&255,I>>8&255,255&I,T>>24,T>>16&255,T>>8&255,255&T,l>>24,l>>16&255,l>>8&255,255&l,85,196,0,0]))},R.mdia=function(I){return R.box(R.types.mdia,R.mdhd(I.timescale,I.duration),R.hdlr(I.type),R.minf(I))},R.mfhd=function(I){return R.box(R.types.mfhd,new Uint8Array([0,0,0,0,I>>24,I>>16&255,I>>8&255,255&I]))},R.minf=function(I){return I.type==="audio"?R.box(R.types.minf,R.box(R.types.smhd,R.SMHD),R.DINF,R.stbl(I)):R.box(R.types.minf,R.box(R.types.vmhd,R.VMHD),R.DINF,R.stbl(I))},R.moof=function(I,E,T){return R.box(R.types.moof,R.mfhd(I),R.traf(T,E))},R.moov=function(I){for(var E=I.length,T=[];E--;)T[E]=R.trak(I[E]);return R.box.apply(null,[R.types.moov,R.mvhd(I[0].timescale,I[0].duration)].concat(T).concat(R.mvex(I)))},R.mvex=function(I){for(var E=I.length,T=[];E--;)T[E]=R.trex(I[E]);return R.box.apply(null,[R.types.mvex].concat(T))},R.mvhd=function(I,E){E*=I;var T=Math.floor(E/(N+1)),l=Math.floor(E%(N+1)),c=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,I>>24&255,I>>16&255,I>>8&255,255&I,T>>24,T>>16&255,T>>8&255,255&T,l>>24,l>>16&255,l>>8&255,255&l,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return R.box(R.types.mvhd,c)},R.sdtp=function(I){var E,T,l=I.samples||[],c=new Uint8Array(4+l.length);for(E=0;E<l.length;E++)T=l[E].flags,c[E+4]=T.dependsOn<<4|T.isDependedOn<<2|T.hasRedundancy;return R.box(R.types.sdtp,c)},R.stbl=function(I){return R.box(R.types.stbl,R.stsd(I),R.box(R.types.stts,R.STTS),R.box(R.types.stsc,R.STSC),R.box(R.types.stsz,R.STSZ),R.box(R.types.stco,R.STCO))},R.avc1=function(I){var E,T,l,c=[],h=[];for(E=0;E<I.sps.length;E++)l=(T=I.sps[E]).byteLength,c.push(l>>>8&255),c.push(255&l),c=c.concat(Array.prototype.slice.call(T));for(E=0;E<I.pps.length;E++)l=(T=I.pps[E]).byteLength,h.push(l>>>8&255),h.push(255&l),h=h.concat(Array.prototype.slice.call(T));var y=R.box(R.types.avcC,new Uint8Array([1,c[3],c[4],c[5],255,224|I.sps.length].concat(c).concat([I.pps.length]).concat(h))),i=I.width,g=I.height,d=I.pixelRatio[0],r=I.pixelRatio[1];return R.box(R.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>8&255,255&i,g>>8&255,255&g,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),y,R.box(R.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),R.box(R.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,r>>24,r>>16&255,r>>8&255,255&r])))},R.esds=function(I){var E=I.config.length;return new Uint8Array([0,0,0,0,3,23+E,0,1,0,4,15+E,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([E]).concat(I.config).concat([6,1,2]))},R.mp4a=function(I){var E=I.samplerate;return R.box(R.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,I.channelCount,0,16,0,0,0,0,E>>8&255,255&E,0,0]),R.box(R.types.esds,R.esds(I)))},R.mp3=function(I){var E=I.samplerate;return R.box(R.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,I.channelCount,0,16,0,0,0,0,E>>8&255,255&E,0,0]))},R.stsd=function(I){return I.type==="audio"?I.isAAC||I.codec!=="mp3"?R.box(R.types.stsd,R.STSD,R.mp4a(I)):R.box(R.types.stsd,R.STSD,R.mp3(I)):R.box(R.types.stsd,R.STSD,R.avc1(I))},R.tkhd=function(I){var E=I.id,T=I.duration*I.timescale,l=I.width,c=I.height,h=Math.floor(T/(N+1)),y=Math.floor(T%(N+1));return R.box(R.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,E>>24&255,E>>16&255,E>>8&255,255&E,0,0,0,0,h>>24,h>>16&255,h>>8&255,255&h,y>>24,y>>16&255,y>>8&255,255&y,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,l>>8&255,255&l,0,0,c>>8&255,255&c,0,0]))},R.traf=function(I,E){var T=R.sdtp(I),l=I.id,c=Math.floor(E/(N+1)),h=Math.floor(E%(N+1));return R.box(R.types.traf,R.box(R.types.tfhd,new Uint8Array([0,0,0,0,l>>24,l>>16&255,l>>8&255,255&l])),R.box(R.types.tfdt,new Uint8Array([1,0,0,0,c>>24,c>>16&255,c>>8&255,255&c,h>>24,h>>16&255,h>>8&255,255&h])),R.trun(I,T.length+16+20+8+16+8+8),T)},R.trak=function(I){return I.duration=I.duration||4294967295,R.box(R.types.trak,R.tkhd(I),R.mdia(I))},R.trex=function(I){var E=I.id;return R.box(R.types.trex,new Uint8Array([0,0,0,0,E>>24,E>>16&255,E>>8&255,255&E,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},R.trun=function(I,E){var T,l,c,h,y,i,g=I.samples||[],d=g.length,r=12+16*d,t=new Uint8Array(r);for(E+=8+r,t.set([0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,E>>>24&255,E>>>16&255,E>>>8&255,255&E],0),T=0;T<d;T++)c=(l=g[T]).duration,h=l.size,y=l.flags,i=l.cts,t.set([c>>>24&255,c>>>16&255,c>>>8&255,255&c,h>>>24&255,h>>>16&255,h>>>8&255,255&h,y.isLeading<<2|y.dependsOn,y.isDependedOn<<6|y.hasRedundancy<<4|y.paddingValue<<1|y.isNonSync,61440&y.degradPrio,15&y.degradPrio,i>>>24&255,i>>>16&255,i>>>8&255,255&i],12+16*T);return R.box(R.types.trun,t)},R.initSegment=function(I){R.types||R.init();var E=R.moov(I),T=new Uint8Array(R.FTYP.byteLength+E.byteLength);return T.set(R.FTYP),T.set(E,R.FTYP.byteLength),T},R}();C.types=void 0,C.HDLR_TYPES=void 0,C.STTS=void 0,C.STSC=void 0,C.STCO=void 0,C.STSZ=void 0,C.VMHD=void 0,C.SMHD=void 0,C.STSD=void 0,C.FTYP=void 0,C.DINF=void 0,M.default=C},"./src/remux/mp4-remuxer.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return d}),x.d(M,"normalizePts",function(){return r});var N=x("./src/polyfills/number.ts"),C=x("./src/remux/aac-helper.ts"),R=x("./src/remux/mp4-generator.ts"),I=x("./src/events.ts"),E=x("./src/errors.ts"),T=x("./src/utils/logger.ts"),l=x("./src/types/loader.ts"),c=x("./src/utils/timescale-conversion.ts");function h(){return h=Object.assign||function(m){for(var S=1;S<arguments.length;S++){var A=arguments[S];for(var _ in A)Object.prototype.hasOwnProperty.call(A,_)&&(m[_]=A[_])}return m},h.apply(this,arguments)}var y=null,i=null,g=!1,d=function(){function m(A,_,v,f){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=A,this.config=_,this.typeSupported=v,this.ISGenerated=!1,y===null){var b=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);y=b?parseInt(b[1]):0}if(i===null){var p=navigator.userAgent.match(/Safari\/(\d+)/i);i=p?parseInt(p[1]):0}g=!!y&&y<75||!!i&&i<600}var S=m.prototype;return S.destroy=function(){},S.resetTimeStamp=function(A){T.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=A},S.resetNextTimestamp=function(){T.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},S.resetInitSegment=function(){T.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},S.getVideoStartPts=function(A){var _=!1,v=A.reduce(function(f,b){var p=b.pts-f;return p<-4294967296?(_=!0,r(f,b.pts)):p>0?f:b.pts},A[0].pts);return _&&T.logger.debug("PTS rollover detected"),v},S.remux=function(A,_,v,f,b,p,k,P){var j,U,G,ee,ne,re,oe=b,W=b,Te=A.pid>-1,Ue=_.pid>-1,ze=_.samples.length,le=A.samples.length>0,Se=ze>1;if((!Te||le)&&(!Ue||Se)||this.ISGenerated||k){this.ISGenerated||(G=this.generateIS(A,_,b));var be=this.isVideoContiguous,Y=-1;if(Se&&(Y=function(V){for(var H=0;H<V.length;H++)if(V[H].key)return H;return-1}(_.samples),!be&&this.config.forceKeyFrameOnDiscontinuity))if(re=!0,Y>0){T.logger.warn("[mp4-remuxer]: Dropped "+Y+" out of "+ze+" video samples due to a missing keyframe");var Q=this.getVideoStartPts(_.samples);_.samples=_.samples.slice(Y),_.dropped+=Y,W+=(_.samples[0].pts-Q)/(_.timescale||9e4)}else Y===-1&&(T.logger.warn("[mp4-remuxer]: No keyframe found out of "+ze+" video samples"),re=!1);if(this.ISGenerated){if(le&&Se){var J=this.getVideoStartPts(_.samples),fe=(r(A.samples[0].pts,J)-J)/_.inputTimeScale;oe+=Math.max(0,fe),W+=Math.max(0,-fe)}if(le){if(A.samplerate||(T.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),G=this.generateIS(A,_,b)),U=this.remuxAudio(A,oe,this.isAudioContiguous,p,Ue||Se||P===l.PlaylistLevelType.AUDIO?W:void 0),Se){var Ce=U?U.endPTS-U.startPTS:0;_.inputTimeScale||(T.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),G=this.generateIS(A,_,b)),j=this.remuxVideo(_,W,be,Ce)}}else Se&&(j=this.remuxVideo(_,W,be,0));j&&(j.firstKeyFrame=Y,j.independent=Y!==-1)}}return this.ISGenerated&&(v.samples.length&&(ne=this.remuxID3(v,b)),f.samples.length&&(ee=this.remuxText(f,b))),{audio:U,video:j,initSegment:G,independent:re,text:ee,id3:ne}},S.generateIS=function(A,_,v){var f,b,p,k=A.samples,P=_.samples,j=this.typeSupported,U={},G=!Object(N.isFiniteNumber)(this._initPTS),ee="audio/mp4";if(G&&(f=b=1/0),A.config&&k.length&&(A.timescale=A.samplerate,A.isAAC||(j.mpeg?(ee="audio/mpeg",A.codec=""):j.mp3&&(A.codec="mp3")),U.audio={id:"audio",container:ee,codec:A.codec,initSegment:!A.isAAC&&j.mpeg?new Uint8Array(0):R.default.initSegment([A]),metadata:{channelCount:A.channelCount}},G&&(p=A.inputTimeScale,f=b=k[0].pts-Math.round(p*v))),_.sps&&_.pps&&P.length&&(_.timescale=_.inputTimeScale,U.video={id:"main",container:"video/mp4",codec:_.codec,initSegment:R.default.initSegment([_]),metadata:{width:_.width,height:_.height}},G)){p=_.inputTimeScale;var ne=this.getVideoStartPts(P),re=Math.round(p*v);b=Math.min(b,r(P[0].dts,ne)-re),f=Math.min(f,ne-re)}if(Object.keys(U).length)return this.ISGenerated=!0,G&&(this._initPTS=f,this._initDTS=b),{tracks:U,initPTS:f,timescale:p}},S.remuxVideo=function(A,_,v,f){var b,p,k,P=A.inputTimeScale,j=A.samples,U=[],G=j.length,ee=this._initPTS,ne=this.nextAvcDts,re=8,oe=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY,Te=0,Ue=!1;v&&ne!==null||(ne=_*P-(j[0].pts-r(j[0].dts,j[0].pts)));for(var ze=0;ze<G;ze++){var le=j[ze];le.pts=r(le.pts-ee,ne),le.dts=r(le.dts-ee,ne),le.dts>le.pts&&(Te=Math.max(Math.min(Te,le.pts-le.dts),-18e3)),le.dts<j[ze>0?ze-1:ze].dts&&(Ue=!0)}Ue&&j.sort(function(Nr,Ir){var nn=Nr.dts-Ir.dts,rn=Nr.pts-Ir.pts;return nn||rn}),p=j[0].dts,k=j[j.length-1].dts;var Se=Math.round((k-p)/(G-1));if(Te<0){if(Te<-2*Se){T.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(c.toMsFromMpegTsClock)(-Se,!0)+" ms");for(var be=Te,Y=0;Y<G;Y++)j[Y].dts=be=Math.max(be,j[Y].pts-Se),j[Y].pts=Math.max(be,j[Y].pts)}else{T.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(c.toMsFromMpegTsClock)(Te,!0)+" ms to overcome this issue");for(var Q=0;Q<G;Q++)j[Q].dts=j[Q].dts+Te}p=j[0].dts}if(v){var J=p-ne,fe=J>Se;if(fe||J<-1){fe?T.logger.warn("AVC: "+Object(c.toMsFromMpegTsClock)(J,!0)+" ms ("+J+"dts) hole between fragments detected, filling it"):T.logger.warn("AVC: "+Object(c.toMsFromMpegTsClock)(-J,!0)+" ms ("+J+"dts) overlapping between fragments detected"),p=ne;var Ce=j[0].pts-J;j[0].dts=p,j[0].pts=Ce,T.logger.log("Video: First PTS/DTS adjusted: "+Object(c.toMsFromMpegTsClock)(Ce,!0)+"/"+Object(c.toMsFromMpegTsClock)(p,!0)+", delta: "+Object(c.toMsFromMpegTsClock)(J,!0)+" ms")}}g&&(p=Math.max(0,p));for(var V=0,H=0,z=0;z<G;z++){for(var X=j[z],de=X.units,ge=de.length,Ge=0,it=0;it<ge;it++)Ge+=de[it].data.length;H+=Ge,V+=ge,X.length=Ge,X.dts=Math.max(X.dts,p),X.pts=Math.max(X.pts,X.dts,0),oe=Math.min(X.pts,oe),W=Math.max(X.pts,W)}k=j[G-1].dts;var Ye,Ke=H+4*V+8;try{Ye=new Uint8Array(Ke)}catch{return void this.observer.emit(I.Events.ERROR,I.Events.ERROR,{type:E.ErrorTypes.MUX_ERROR,details:E.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:Ke,reason:"fail allocating video mdat "+Ke})}var dt=new DataView(Ye.buffer);dt.setUint32(0,Ke),Ye.set(R.default.types.mdat,4);for(var me=0;me<G;me++){for(var ke=j[me],Je=ke.units,Xe=0,nt=0,Tt=Je.length;nt<Tt;nt++){var bt=Je[nt],Ft=bt.data,pn=bt.data.byteLength;dt.setUint32(re,pn),re+=4,Ye.set(Ft,re),re+=pn,Xe+=4+pn}if(me<G-1)b=j[me+1].dts-ke.dts;else{var wn=this.config,hn=ke.dts-j[me>0?me-1:me].dts;if(wn.stretchShortVideoTrack&&this.nextAudioPts!==null){var Xn=Math.floor(wn.maxBufferHole*P),on=(f?oe+f*P:this.nextAudioPts)-ke.pts;on>Xn?((b=on-hn)<0&&(b=hn),T.logger.log("[mp4-remuxer]: It is approximately "+on/90+" ms to the next segment; using duration "+b/90+" ms for the last video frame.")):b=hn}else b=hn}var Zn=Math.round(ke.pts-ke.dts);U.push(new t(ke.key,b,Xe,Zn))}if(U.length&&y&&y<70){var Bn=U[0].flags;Bn.dependsOn=2,Bn.isNonSync=0}console.assert(b!==void 0,"mp4SampleDuration must be computed"),this.nextAvcDts=ne=k+b,this.isVideoContiguous=!0;var Rr={data1:R.default.moof(A.sequenceNumber++,p,h({},A,{samples:U})),data2:Ye,startPTS:oe/P,endPTS:(W+b)/P,startDTS:p/P,endDTS:ne/P,type:"video",hasAudio:!1,hasVideo:!0,nb:U.length,dropped:A.dropped};return A.samples=[],A.dropped=0,console.assert(Ye.length,"MDAT length must not be zero"),Rr},S.remuxAudio=function(A,_,v,f,b){var p=A.inputTimeScale,k=p/(A.samplerate?A.samplerate:p),P=A.isAAC?1024:1152,j=P*k,U=this._initPTS,G=!A.isAAC&&this.typeSupported.mpeg,ee=[],ne=A.samples,re=G?0:8,oe=this.nextAudioPts||-1,W=_*p;if(this.isAudioContiguous=v=v||ne.length&&oe>0&&(f&&Math.abs(W-oe)<9e3||Math.abs(r(ne[0].pts-U,W)-oe)<20*j),ne.forEach(function(Ft){Ft.pts=r(Ft.pts-U,W)}),!v||oe<0){if(ne=ne.filter(function(Ft){return Ft.pts>=0}),!ne.length)return;oe=b===0?0:f?Math.max(0,W):ne[0].pts}if(A.isAAC)for(var Te=b!==void 0,Ue=this.config.maxAudioFramesDrift,ze=0,le=oe;ze<ne.length;ze++){var Se=ne[ze],be=Se.pts,Y=be-le,Q=Math.abs(1e3*Y/p);if(Y<=-Ue*j&&Te)ze===0&&(T.logger.warn("Audio frame @ "+(be/p).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*Y/p)+" ms."),this.nextAudioPts=oe=le=be);else if(Y>=Ue*j&&Q<1e4&&Te){var J=Math.round(Y/j);(le=be-J*j)<0&&(J--,le+=j),ze===0&&(this.nextAudioPts=oe=le),T.logger.warn("[mp4-remuxer]: Injecting "+J+" audio frame @ "+(le/p).toFixed(3)+"s due to "+Math.round(1e3*Y/p)+" ms gap.");for(var fe=0;fe<J;fe++){var Ce=Math.max(le,0),V=C.default.getSilentFrame(A.manifestCodec||A.codec,A.channelCount);V||(T.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),V=Se.unit.subarray()),ne.splice(ze,0,{unit:V,pts:Ce}),le+=j,ze++}}Se.pts=le,le+=j}for(var H,z=null,X=null,de=0,ge=ne.length;ge--;)de+=ne[ge].unit.byteLength;for(var Ge=0,it=ne.length;Ge<it;Ge++){var Ye=ne[Ge],Ke=Ye.unit,dt=Ye.pts;if(X!==null)ee[Ge-1].duration=Math.round((dt-X)/k);else{if(v&&A.isAAC&&(dt=oe),z=dt,!(de>0))return;de+=re;try{H=new Uint8Array(de)}catch{return void this.observer.emit(I.Events.ERROR,I.Events.ERROR,{type:E.ErrorTypes.MUX_ERROR,details:E.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:de,reason:"fail allocating audio mdat "+de})}G||(new DataView(H.buffer).setUint32(0,de),H.set(R.default.types.mdat,4))}H.set(Ke,re);var me=Ke.byteLength;re+=me,ee.push(new t(!0,P,me,0)),X=dt}var ke=ee.length;if(ke){var Je=ee[ee.length-1];this.nextAudioPts=oe=X+k*Je.duration;var Xe=G?new Uint8Array(0):R.default.moof(A.sequenceNumber++,z/k,h({},A,{samples:ee}));A.samples=[];var nt=z/p,Tt=oe/p,bt={data1:Xe,data2:H,startPTS:nt,endPTS:Tt,startDTS:nt,endDTS:Tt,type:"audio",hasAudio:!0,hasVideo:!1,nb:ke};return this.isAudioContiguous=!0,console.assert(H.length,"MDAT length must not be zero"),bt}},S.remuxEmptyAudio=function(A,_,v,f){var b=A.inputTimeScale,p=b/(A.samplerate?A.samplerate:b),k=this.nextAudioPts,P=(k!==null?k:f.startDTS*b)+this._initDTS,j=f.endDTS*b+this._initDTS,U=1024*p,G=Math.ceil((j-P)/U),ee=C.default.getSilentFrame(A.manifestCodec||A.codec,A.channelCount);if(T.logger.warn("[mp4-remuxer]: remux empty Audio"),ee){for(var ne=[],re=0;re<G;re++){var oe=P+re*U;ne.push({unit:ee,pts:oe,dts:oe})}return A.samples=ne,this.remuxAudio(A,_,v,!1)}T.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},S.remuxID3=function(A,_){var v=A.samples.length;if(v){for(var f=A.inputTimeScale,b=this._initPTS,p=this._initDTS,k=0;k<v;k++){var P=A.samples[k];P.pts=r(P.pts-b,_*f)/f,P.dts=r(P.dts-p,_*f)/f}var j=A.samples;return A.samples=[],{samples:j}}},S.remuxText=function(A,_){var v=A.samples.length;if(v){for(var f=A.inputTimeScale,b=this._initPTS,p=0;p<v;p++){var k=A.samples[p];k.pts=r(k.pts-b,_*f)/f}A.samples.sort(function(j,U){return j.pts-U.pts});var P=A.samples;return A.samples=[],{samples:P}}},m}();function r(m,S){var A;if(S===null)return m;for(A=S<m?-8589934592:8589934592;Math.abs(m-S)>4294967296;)m+=A;return m}var t=function(m,S,A,_){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=S,this.size=A,this.cts=_,this.flags=new u(m)},u=function(m){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=m?2:1,this.isNonSync=m?0:1}},"./src/remux/passthrough-remuxer.ts":function(K,M,x){x.r(M);var N=x("./src/polyfills/number.ts"),C=x("./src/utils/mp4-tools.ts"),R=x("./src/loader/fragment.ts"),I=x("./src/utils/logger.ts"),E=function(){function c(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var h=c.prototype;return h.destroy=function(){},h.resetTimeStamp=function(y){this.initPTS=y,this.lastEndDTS=null},h.resetNextTimestamp=function(){this.lastEndDTS=null},h.resetInitSegment=function(y,i,g){this.audioCodec=i,this.videoCodec=g,this.generateInitSegment(y),this.emitInitSegment=!0},h.generateInitSegment=function(y){var i=this.audioCodec,g=this.videoCodec;if(!y||!y.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var d=this.initData=Object(C.parseInitSegment)(y);i||(i=l(d.audio,R.ElementaryStreamTypes.AUDIO)),g||(g=l(d.video,R.ElementaryStreamTypes.VIDEO));var r={};d.audio&&d.video?r.audiovideo={container:"video/mp4",codec:i+","+g,initSegment:y,id:"main"}:d.audio?r.audio={container:"audio/mp4",codec:i,initSegment:y,id:"audio"}:d.video?r.video={container:"video/mp4",codec:g,initSegment:y,id:"main"}:I.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r},h.remux=function(y,i,g,d,r){var t=this.initPTS,u=this.lastEndDTS,m={audio:void 0,video:void 0,text:d,id3:g,initSegment:void 0};Object(N.isFiniteNumber)(u)||(u=this.lastEndDTS=r||0);var S=i.samples;if(!S||!S.length)return m;var A={initPTS:void 0,timescale:1},_=this.initData;if(_&&_.length||(this.generateInitSegment(S),_=this.initData),!_||!_.length)return I.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),m;this.emitInitSegment&&(A.tracks=this.initTracks,this.emitInitSegment=!1),Object(N.isFiniteNumber)(t)||(this.initPTS=A.initPTS=t=T(_,S,u));var v=Object(C.getDuration)(S,_),f=u,b=v+f;Object(C.offsetStartDTS)(_,S,t),v>0?this.lastEndDTS=b:(I.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var p=!!_.audio,k=!!_.video,P="";p&&(P+="audio"),k&&(P+="video");var j={data1:S,startPTS:f,startDTS:f,endPTS:b,endDTS:b,type:P,hasAudio:p,hasVideo:k,nb:1,dropped:0};return m.audio=j.type==="audio"?j:void 0,m.video=j.type!=="audio"?j:void 0,m.text=d,m.id3=g,m.initSegment=A,m},c}(),T=function(c,h,y){return Object(C.getStartDTS)(c,h)-y};function l(c,h){var y=c==null?void 0:c.codec;return y&&y.length>4?y:y==="hvc1"?"hvc1.1.c.L120.90":y==="av01"?"av01.0.04M.08":y==="avc1"||h===R.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}M.default=E},"./src/task-loop.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return N});var N=function(){function C(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var R=C.prototype;return R.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},R.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},R.onHandlerDestroyed=function(){},R.hasInterval=function(){return!!this._tickInterval},R.hasNextTick=function(){return!!this._tickTimer},R.setInterval=function(I){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,I),!0)},R.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},R.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},R.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},R.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},R.doTick=function(){},C}()},"./src/types/cmcd.ts":function(K,M,x){x.r(M),x.d(M,"CMCDVersion",function(){return I}),x.d(M,"CMCDObjectType",function(){return N}),x.d(M,"CMCDStreamingFormat",function(){return C}),x.d(M,"CMCDStreamType",function(){return R});var N,C,R,I=1;(function(E){E.MANIFEST="m",E.AUDIO="a",E.VIDEO="v",E.MUXED="av",E.INIT="i",E.CAPTION="c",E.TIMED_TEXT="tt",E.KEY="k",E.OTHER="o"})(N||(N={})),function(E){E.DASH="d",E.HLS="h",E.SMOOTH="s",E.OTHER="o"}(C||(C={})),function(E){E.VOD="v",E.LIVE="l"}(R||(R={}))},"./src/types/level.ts":function(K,M,x){function N(T,l){for(var c=0;c<l.length;c++){var h=l[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(T,h.key,h)}}var C;function R(T,l){var c=T.canSkipUntil,h=T.canSkipDateRanges,y=T.endSN;return c&&(l!==void 0?l-y:0)<c?h?C.v2:C.Yes:C.No}x.r(M),x.d(M,"HlsSkip",function(){return C}),x.d(M,"getSkipValue",function(){return R}),x.d(M,"HlsUrlParameters",function(){return I}),x.d(M,"Level",function(){return E}),function(T){T.No="",T.Yes="YES",T.v2="v2"}(C||(C={}));var I=function(){function T(l,c,h){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=l,this.part=c,this.skip=h}return T.prototype.addDirectives=function(l){var c=new self.URL(l);return this.msn!==void 0&&c.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&c.searchParams.set("_HLS_part",this.part.toString()),this.skip&&c.searchParams.set("_HLS_skip",this.skip),c.toString()},T}(),E=function(){function T(h){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[h.url],this.attrs=h.attrs,this.bitrate=h.bitrate,h.details&&(this.details=h.details),this.id=h.id||0,this.name=h.name,this.width=h.width||0,this.height=h.height||0,this.audioCodec=h.audioCodec,this.videoCodec=h.videoCodec,this.unknownCodecs=h.unknownCodecs,this.codecSet=[h.videoCodec,h.audioCodec].filter(function(y){return y}).join(",").replace(/\.[^.,]+/g,"")}var l,c;return l=T,(c=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(h){var y=h%this.url.length;this._urlId!==y&&(this.details=void 0,this._urlId=y)}}])&&N(l.prototype,c),T}()},"./src/types/loader.ts":function(K,M,x){var N,C;x.r(M),x.d(M,"PlaylistContextType",function(){return N}),x.d(M,"PlaylistLevelType",function(){return C}),function(R){R.MANIFEST="manifest",R.LEVEL="level",R.AUDIO_TRACK="audioTrack",R.SUBTITLE_TRACK="subtitleTrack"}(N||(N={})),function(R){R.MAIN="main",R.AUDIO="audio",R.SUBTITLE="subtitle"}(C||(C={}))},"./src/types/transmuxer.ts":function(K,M,x){x.r(M),x.d(M,"ChunkMetadata",function(){return N});var N=function(C,R,I,E,T,l){E===void 0&&(E=0),T===void 0&&(T=-1),l===void 0&&(l=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=C,this.sn=R,this.id=I,this.size=E,this.part=T,this.partial=l}},"./src/utils/attr-list.ts":function(K,M,x){x.r(M),x.d(M,"AttrList",function(){return R});var N=/^(\d+)x(\d+)$/,C=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,R=function(){function I(T){for(var l in typeof T=="string"&&(T=I.parseAttrList(T)),T)T.hasOwnProperty(l)&&(this[l]=T[l])}var E=I.prototype;return E.decimalInteger=function(T){var l=parseInt(this[T],10);return l>Number.MAX_SAFE_INTEGER?1/0:l},E.hexadecimalInteger=function(T){if(this[T]){var l=(this[T]||"0x").slice(2);l=(1&l.length?"0":"")+l;for(var c=new Uint8Array(l.length/2),h=0;h<l.length/2;h++)c[h]=parseInt(l.slice(2*h,2*h+2),16);return c}return null},E.hexadecimalIntegerAsNumber=function(T){var l=parseInt(this[T],16);return l>Number.MAX_SAFE_INTEGER?1/0:l},E.decimalFloatingPoint=function(T){return parseFloat(this[T])},E.optionalFloat=function(T,l){var c=this[T];return c?parseFloat(c):l},E.enumeratedString=function(T){return this[T]},E.bool=function(T){return this[T]==="YES"},E.decimalResolution=function(T){var l=N.exec(this[T]);if(l!==null)return{width:parseInt(l[1],10),height:parseInt(l[2],10)}},I.parseAttrList=function(T){var l,c={};for(C.lastIndex=0;(l=C.exec(T))!==null;){var h=l[2];h.indexOf('"')===0&&h.lastIndexOf('"')===h.length-1&&(h=h.slice(1,-1)),c[l[1]]=h}return c},I}()},"./src/utils/binary-search.ts":function(K,M,x){x.r(M),M.default={search:function(N,C){for(var R=0,I=N.length-1,E=null,T=null;R<=I;){var l=C(T=N[E=(R+I)/2|0]);if(l>0)R=E+1;else{if(!(l<0))return T;I=E-1}}return null}}},"./src/utils/buffer-helper.ts":function(K,M,x){x.r(M),x.d(M,"BufferHelper",function(){return R});var N=x("./src/utils/logger.ts"),C={length:0,start:function(){return 0},end:function(){return 0}},R=function(){function I(){}return I.isBuffered=function(E,T){try{if(E){for(var l=I.getBuffered(E),c=0;c<l.length;c++)if(T>=l.start(c)&&T<=l.end(c))return!0}}catch{}return!1},I.bufferInfo=function(E,T,l){try{if(E){var c,h=I.getBuffered(E),y=[];for(c=0;c<h.length;c++)y.push({start:h.start(c),end:h.end(c)});return this.bufferedInfo(y,T,l)}}catch{}return{len:0,start:T,end:T,nextStart:void 0}},I.bufferedInfo=function(E,T,l){T=Math.max(0,T),E.sort(function(A,_){return A.start-_.start||_.end-A.end});var c=[];if(l)for(var h=0;h<E.length;h++){var y=c.length;if(y){var i=c[y-1].end;E[h].start-i<l?E[h].end>i&&(c[y-1].end=E[h].end):c.push(E[h])}else c.push(E[h])}else c=E;for(var g,d=0,r=T,t=T,u=0;u<c.length;u++){var m=c[u].start,S=c[u].end;if(T+l>=m&&T<S)r=m,d=(t=S)-T;else if(T+l<m){g=m;break}}return{len:d,start:r||0,end:t||0,nextStart:g}},I.getBuffered=function(E){try{return E.buffered}catch(T){return N.logger.log("failed to get media.buffered",T),C}},I}()},"./src/utils/cea-608-parser.ts":function(K,M,x){x.r(M),x.d(M,"Row",function(){return u}),x.d(M,"CaptionScreen",function(){return m});var N,C=x("./src/utils/logger.ts"),R={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},I=function(f){var b=f;return R.hasOwnProperty(f)&&(b=R[f]),String.fromCharCode(b)},E=15,T=100,l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},h={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},y={25:2,26:4,29:6,30:8,31:10,27:13,28:15},i=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];(function(f){f[f.ERROR=0]="ERROR",f[f.TEXT=1]="TEXT",f[f.WARNING=2]="WARNING",f[f.INFO=2]="INFO",f[f.DEBUG=3]="DEBUG",f[f.DATA=3]="DATA"})(N||(N={}));var g=function(){function f(){this.time=null,this.verboseLevel=N.ERROR}return f.prototype.log=function(b,p){this.verboseLevel>=b&&C.logger.log(this.time+" ["+b+"] "+p)},f}(),d=function(f){for(var b=[],p=0;p<f.length;p++)b.push(f[p].toString(16));return b},r=function(){function f(p,k,P,j,U){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=p||"white",this.underline=k||!1,this.italics=P||!1,this.background=j||"black",this.flash=U||!1}var b=f.prototype;return b.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},b.setStyles=function(p){for(var k=["foreground","underline","italics","background","flash"],P=0;P<k.length;P++){var j=k[P];p.hasOwnProperty(j)&&(this[j]=p[j])}},b.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},b.equals=function(p){return this.foreground===p.foreground&&this.underline===p.underline&&this.italics===p.italics&&this.background===p.background&&this.flash===p.flash},b.copy=function(p){this.foreground=p.foreground,this.underline=p.underline,this.italics=p.italics,this.background=p.background,this.flash=p.flash},b.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},f}(),t=function(){function f(p,k,P,j,U,G){this.uchar=void 0,this.penState=void 0,this.uchar=p||" ",this.penState=new r(k,P,j,U,G)}var b=f.prototype;return b.reset=function(){this.uchar=" ",this.penState.reset()},b.setChar=function(p,k){this.uchar=p,this.penState.copy(k)},b.setPenState=function(p){this.penState.copy(p)},b.equals=function(p){return this.uchar===p.uchar&&this.penState.equals(p.penState)},b.copy=function(p){this.uchar=p.uchar,this.penState.copy(p.penState)},b.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},f}(),u=function(){function f(p){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var k=0;k<T;k++)this.chars.push(new t);this.logger=p,this.pos=0,this.currPenState=new r}var b=f.prototype;return b.equals=function(p){for(var k=!0,P=0;P<T;P++)if(!this.chars[P].equals(p.chars[P])){k=!1;break}return k},b.copy=function(p){for(var k=0;k<T;k++)this.chars[k].copy(p.chars[k])},b.isEmpty=function(){for(var p=!0,k=0;k<T;k++)if(!this.chars[k].isEmpty()){p=!1;break}return p},b.setCursor=function(p){this.pos!==p&&(this.pos=p),this.pos<0?(this.logger.log(N.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>T&&(this.logger.log(N.DEBUG,"Too large cursor position "+this.pos),this.pos=T)},b.moveCursor=function(p){var k=this.pos+p;if(p>1)for(var P=this.pos+1;P<k+1;P++)this.chars[P].setPenState(this.currPenState);this.setCursor(k)},b.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},b.insertChar=function(p){p>=144&&this.backSpace();var k=I(p);this.pos>=T?this.logger.log(N.ERROR,"Cannot insert "+p.toString(16)+" ("+k+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(k,this.currPenState),this.moveCursor(1))},b.clearFromPos=function(p){var k;for(k=p;k<T;k++)this.chars[k].reset()},b.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},b.clearToEndOfRow=function(){this.clearFromPos(this.pos)},b.getTextString=function(){for(var p=[],k=!0,P=0;P<T;P++){var j=this.chars[P].uchar;j!==" "&&(k=!1),p.push(j)}return k?"":p.join("")},b.setPenStyles=function(p){this.currPenState.setStyles(p),this.chars[this.pos].setPenState(this.currPenState)},f}(),m=function(){function f(p){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var k=0;k<E;k++)this.rows.push(new u(p));this.logger=p,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var b=f.prototype;return b.reset=function(){for(var p=0;p<E;p++)this.rows[p].clear();this.currRow=14},b.equals=function(p){for(var k=!0,P=0;P<E;P++)if(!this.rows[P].equals(p.rows[P])){k=!1;break}return k},b.copy=function(p){for(var k=0;k<E;k++)this.rows[k].copy(p.rows[k])},b.isEmpty=function(){for(var p=!0,k=0;k<E;k++)if(!this.rows[k].isEmpty()){p=!1;break}return p},b.backSpace=function(){this.rows[this.currRow].backSpace()},b.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},b.insertChar=function(p){this.rows[this.currRow].insertChar(p)},b.setPen=function(p){this.rows[this.currRow].setPenStyles(p)},b.moveCursor=function(p){this.rows[this.currRow].moveCursor(p)},b.setCursor=function(p){this.logger.log(N.INFO,"setCursor: "+p),this.rows[this.currRow].setCursor(p)},b.setPAC=function(p){this.logger.log(N.INFO,"pacData = "+JSON.stringify(p));var k=p.row-1;if(this.nrRollUpRows&&k<this.nrRollUpRows-1&&(k=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==k){for(var P=0;P<E;P++)this.rows[P].clear();var j=this.currRow+1-this.nrRollUpRows,U=this.lastOutputScreen;if(U){var G=U.rows[j].cueStartTime,ee=this.logger.time;if(G&&ee!==null&&G<ee)for(var ne=0;ne<this.nrRollUpRows;ne++)this.rows[k-this.nrRollUpRows+ne+1].copy(U.rows[j+ne])}}this.currRow=k;var re=this.rows[this.currRow];if(p.indent!==null){var oe=p.indent,W=Math.max(oe-1,0);re.setCursor(p.indent),p.color=re.chars[W].penState.foreground}var Te={foreground:p.color,underline:p.underline,italics:p.italics,background:"black",flash:!1};this.setPen(Te)},b.setBkgData=function(p){this.logger.log(N.INFO,"bkgData = "+JSON.stringify(p)),this.backSpace(),this.setPen(p),this.insertChar(32)},b.setRollUpRows=function(p){this.nrRollUpRows=p},b.rollUp=function(){if(this.nrRollUpRows!==null){this.logger.log(N.TEXT,this.getDisplayText());var p=this.currRow+1-this.nrRollUpRows,k=this.rows.splice(p,1)[0];k.clear(),this.rows.splice(this.currRow,0,k),this.logger.log(N.INFO,"Rolling up")}else this.logger.log(N.DEBUG,"roll_up but nrRollUpRows not set yet")},b.getDisplayText=function(p){p=p||!1;for(var k=[],P="",j=-1,U=0;U<E;U++){var G=this.rows[U].getTextString();G&&(j=U+1,p?k.push("Row "+j+": '"+G+"'"):k.push(G.trim()))}return k.length>0&&(P=p?"["+k.join(" | ")+"]":k.join(`
`)),P},b.getTextAndFormat=function(){return this.rows},f}(),S=function(){function f(p,k,P){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=p,this.outputFilter=k,this.mode=null,this.verbose=0,this.displayedMemory=new m(P),this.nonDisplayedMemory=new m(P),this.lastOutputScreen=new m(P),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=P}var b=f.prototype;return b.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},b.getHandler=function(){return this.outputFilter},b.setHandler=function(p){this.outputFilter=p},b.setPAC=function(p){this.writeScreen.setPAC(p)},b.setBkgData=function(p){this.writeScreen.setBkgData(p)},b.setMode=function(p){p!==this.mode&&(this.mode=p,this.logger.log(N.INFO,"MODE="+p),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=p)},b.insertChars=function(p){for(var k=0;k<p.length;k++)this.writeScreen.insertChar(p[k]);var P=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(N.INFO,P+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(this.logger.log(N.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},b.ccRCL=function(){this.logger.log(N.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},b.ccBS=function(){this.logger.log(N.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},b.ccAOF=function(){},b.ccAON=function(){},b.ccDER=function(){this.logger.log(N.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},b.ccRU=function(p){this.logger.log(N.INFO,"RU("+p+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(p)},b.ccFON=function(){this.logger.log(N.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},b.ccRDC=function(){this.logger.log(N.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},b.ccTR=function(){this.logger.log(N.INFO,"TR"),this.setMode("MODE_TEXT")},b.ccRTD=function(){this.logger.log(N.INFO,"RTD"),this.setMode("MODE_TEXT")},b.ccEDM=function(){this.logger.log(N.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},b.ccCR=function(){this.logger.log(N.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},b.ccENM=function(){this.logger.log(N.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},b.ccEOC=function(){if(this.logger.log(N.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var p=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=p,this.writeScreen=this.nonDisplayedMemory,this.logger.log(N.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},b.ccTO=function(p){this.logger.log(N.INFO,"TO("+p+") - Tab Offset"),this.writeScreen.moveCursor(p)},b.ccMIDROW=function(p){var k={flash:!1};if(k.underline=p%2==1,k.italics=p>=46,k.italics)k.foreground="white";else{var P=Math.floor(p/2)-16;k.foreground=["white","green","blue","cyan","red","yellow","magenta"][P]}this.logger.log(N.INFO,"MIDROW: "+JSON.stringify(k)),this.writeScreen.setPen(k)},b.outputDataUpdate=function(p){p===void 0&&(p=!1);var k=this.logger.time;k!==null&&this.outputFilter&&(this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,k,this.lastOutputScreen),p&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:k):this.cueStartTime=k,this.lastOutputScreen.copy(this.displayedMemory))},b.cueSplitAtTime=function(p){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,p,this.displayedMemory),this.cueStartTime=p))},f}(),A=function(){function f(p,k,P){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var j=new g;this.channels=[null,new S(p,k,j),new S(p+1,P,j)],this.cmdHistory={a:null,b:null},this.logger=j}var b=f.prototype;return b.getHandler=function(p){return this.channels[p].getHandler()},b.setHandler=function(p,k){this.channels[p].setHandler(k)},b.addData=function(p,k){var P,j,U,G=!1;this.logger.time=p;for(var ee=0;ee<k.length;ee+=2)if(j=127&k[ee],U=127&k[ee+1],j!==0||U!==0){if(this.logger.log(N.DATA,"["+d([k[ee],k[ee+1]])+"] -> ("+d([j,U])+")"),(P=this.parseCmd(j,U))||(P=this.parseMidrow(j,U)),P||(P=this.parsePAC(j,U)),P||(P=this.parseBackgroundAttributes(j,U)),!P&&(G=this.parseChars(j,U))){var ne=this.currentChannel;ne&&ne>0?this.channels[ne].insertChars(G):this.logger.log(N.WARNING,"No channel found yet. TEXT-MODE?")}P||G||this.logger.log(N.WARNING,"Couldn't parse cleaned data "+d([j,U])+" orig: "+d([k[ee],k[ee+1]]))}},b.parseCmd=function(p,k){var P=this.cmdHistory;if(!((p===20||p===28||p===21||p===29)&&k>=32&&k<=47||(p===23||p===31)&&k>=33&&k<=35))return!1;if(v(p,k,P))return _(null,null,P),this.logger.log(N.DEBUG,"Repeated command ("+d([p,k])+") is dropped"),!0;var j=p===20||p===21||p===23?1:2,U=this.channels[j];return p===20||p===21||p===28||p===29?k===32?U.ccRCL():k===33?U.ccBS():k===34?U.ccAOF():k===35?U.ccAON():k===36?U.ccDER():k===37?U.ccRU(2):k===38?U.ccRU(3):k===39?U.ccRU(4):k===40?U.ccFON():k===41?U.ccRDC():k===42?U.ccTR():k===43?U.ccRTD():k===44?U.ccEDM():k===45?U.ccCR():k===46?U.ccENM():k===47&&U.ccEOC():U.ccTO(k-32),_(p,k,P),this.currentChannel=j,!0},b.parseMidrow=function(p,k){var P=0;if((p===17||p===25)&&k>=32&&k<=47){if((P=p===17?1:2)!==this.currentChannel)return this.logger.log(N.ERROR,"Mismatch channel in midrow parsing"),!1;var j=this.channels[P];return!!j&&(j.ccMIDROW(k),this.logger.log(N.DEBUG,"MIDROW ("+d([p,k])+")"),!0)}return!1},b.parsePAC=function(p,k){var P,j=this.cmdHistory;if(!((p>=17&&p<=23||p>=25&&p<=31)&&k>=64&&k<=127||(p===16||p===24)&&k>=64&&k<=95))return!1;if(v(p,k,j))return _(null,null,j),!0;var U=p<=23?1:2;P=k>=64&&k<=95?U===1?l[p]:h[p]:U===1?c[p]:y[p];var G=this.channels[U];return!!G&&(G.setPAC(this.interpretPAC(P,k)),_(p,k,j),this.currentChannel=U,!0)},b.interpretPAC=function(p,k){var P,j={color:null,italics:!1,indent:null,underline:!1,row:p};return P=k>95?k-96:k-64,j.underline=(1&P)==1,P<=13?j.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(P/2)]:P<=15?(j.italics=!0,j.color="white"):j.indent=4*Math.floor((P-16)/2),j},b.parseChars=function(p,k){var P,j,U=null,G=null;if(p>=25?(P=2,G=p-8):(P=1,G=p),G>=17&&G<=19?(j=G===17?k+80:G===18?k+112:k+144,this.logger.log(N.INFO,"Special char '"+I(j)+"' in channel "+P),U=[j]):p>=32&&p<=127&&(U=k===0?[p]:[p,k]),U){var ee=d(U);this.logger.log(N.DEBUG,"Char codes =  "+ee.join(",")),_(p,k,this.cmdHistory)}return U},b.parseBackgroundAttributes=function(p,k){var P;if(!((p===16||p===24)&&k>=32&&k<=47||(p===23||p===31)&&k>=45&&k<=47))return!1;var j={};p===16||p===24?(P=Math.floor((k-32)/2),j.background=i[P],k%2==1&&(j.background=j.background+"_semi")):k===45?j.background="transparent":(j.foreground="black",k===47&&(j.underline=!0));var U=p<=23?1:2;return this.channels[U].setBkgData(j),_(p,k,this.cmdHistory),!0},b.reset=function(){for(var p=0;p<Object.keys(this.channels).length;p++){var k=this.channels[p];k&&k.reset()}this.cmdHistory={a:null,b:null}},b.cueSplitAtTime=function(p){for(var k=0;k<this.channels.length;k++){var P=this.channels[k];P&&P.cueSplitAtTime(p)}},f}();function _(f,b,p){p.a=f,p.b=b}function v(f,b,p){return p.a===f&&p.b===b}M.default=A},"./src/utils/codecs.ts":function(K,M,x){x.r(M),x.d(M,"isCodecType",function(){return C}),x.d(M,"isCodecSupportedInMp4",function(){return R});var N={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function C(I,E){var T=N[E];return!!T&&T[I.slice(0,4)]===!0}function R(I,E){return MediaSource.isTypeSupported((E||"video")+'/mp4;codecs="'+I+'"')}},"./src/utils/cues.ts":function(K,M,x){x.r(M);var N=x("./src/utils/vttparser.ts"),C=x("./src/utils/webvtt-parser.ts"),R=x("./src/utils/texttrack-utils.ts"),I=/\s/,E={newCue:function(T,l,c,h){for(var y,i,g,d,r,t=[],u=self.VTTCue||self.TextTrackCue,m=0;m<h.rows.length;m++)if(g=!0,d=0,r="",!(y=h.rows[m]).isEmpty()){for(var S=0;S<y.chars.length;S++)I.test(y.chars[S].uchar)&&g?d++:(r+=y.chars[S].uchar,g=!1);y.cueStartTime=l,l===c&&(c+=1e-4),d>=16?d--:d++;var A=Object(N.fixLineBreaks)(r.trim()),_=Object(C.generateCueId)(l,c,A);T&&T.cues&&T.cues.getCueById(_)||((i=new u(l,c,A)).id=_,i.line=m+1,i.align="left",i.position=10+Math.min(80,10*Math.floor(8*d/32)),t.push(i))}return T&&t.length&&(t.sort(function(v,f){return v.line==="auto"||f.line==="auto"?0:v.line>8&&f.line>8?f.line-v.line:v.line-f.line}),t.forEach(function(v){return Object(R.addCueToTrack)(T,v)})),t}};M.default=E},"./src/utils/discontinuities.ts":function(K,M,x){x.r(M),x.d(M,"findFirstFragWithCC",function(){return I}),x.d(M,"shouldAlignOnDiscontinuities",function(){return E}),x.d(M,"findDiscontinuousReferenceFrag",function(){return T}),x.d(M,"adjustSlidingStart",function(){return c}),x.d(M,"alignStream",function(){return h}),x.d(M,"alignPDT",function(){return y}),x.d(M,"alignFragmentByPDTDelta",function(){return i}),x.d(M,"alignMediaPlaylistByPDT",function(){return g});var N=x("./src/polyfills/number.ts"),C=x("./src/utils/logger.ts"),R=x("./src/controller/level-helper.ts");function I(d,r){for(var t=null,u=0,m=d.length;u<m;u++){var S=d[u];if(S&&S.cc===r){t=S;break}}return t}function E(d,r,t){return!(!r.details||!(t.endCC>t.startCC||d&&d.cc<t.startCC))}function T(d,r){var t=d.fragments,u=r.fragments;if(u.length&&t.length){var m=I(t,u[0].cc);if(m&&(!m||m.startPTS))return m;C.logger.log("No frag in previous level to align on")}else C.logger.log("No fragments to align")}function l(d,r){if(d){var t=d.start+r;d.start=d.startPTS=t,d.endPTS=t+d.duration}}function c(d,r){for(var t=r.fragments,u=0,m=t.length;u<m;u++)l(t[u],d);r.fragmentHint&&l(r.fragmentHint,d),r.alignedSliding=!0}function h(d,r,t){r&&(function(u,m,S){if(E(u,S,m)){var A=T(S.details,m);A&&Object(N.isFiniteNumber)(A.start)&&(C.logger.log("Adjusting PTS using last level due to CC increase within current level "+m.url),c(A.start,m))}}(d,t,r),!t.alignedSliding&&r.details&&y(t,r.details),t.alignedSliding||!r.details||t.skippedSegments||Object(R.adjustSliding)(r.details,t))}function y(d,r){if(r.fragments.length&&d.hasProgramDateTime&&r.hasProgramDateTime){var t=r.fragments[0].programDateTime,u=d.fragments[0].programDateTime,m=(u-t)/1e3+r.fragments[0].start;m&&Object(N.isFiniteNumber)(m)&&(C.logger.log("Adjusting PTS using programDateTime delta "+(u-t)+"ms, sliding:"+m.toFixed(3)+" "+d.url+" "),c(m,d))}}function i(d,r){var t=d.programDateTime;if(t){var u=(t-r)/1e3;d.start=d.startPTS=u,d.endPTS=u+d.duration}}function g(d,r){if(r.fragments.length&&d.hasProgramDateTime&&r.hasProgramDateTime){var t=r.fragments[0].programDateTime-1e3*r.fragments[0].start;d.fragments.forEach(function(u){i(u,t)}),d.fragmentHint&&i(d.fragmentHint,t),d.alignedSliding=!0}}},"./src/utils/ewma-bandwidth-estimator.ts":function(K,M,x){x.r(M);var N=x("./src/utils/ewma.ts"),C=function(){function R(E,T,l){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=l,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new N.default(E),this.fast_=new N.default(T)}var I=R.prototype;return I.update=function(E,T){var l=this.slow_,c=this.fast_;this.slow_.halfLife!==E&&(this.slow_=new N.default(E,l.getEstimate(),l.getTotalWeight())),this.fast_.halfLife!==T&&(this.fast_=new N.default(T,c.getEstimate(),c.getTotalWeight()))},I.sample=function(E,T){var l=(E=Math.max(E,this.minDelayMs_))/1e3,c=8*T/l;this.fast_.sample(l,c),this.slow_.sample(l,c)},I.canEstimate=function(){var E=this.fast_;return E&&E.getTotalWeight()>=this.minWeight_},I.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},I.destroy=function(){},R}();M.default=C},"./src/utils/ewma.ts":function(K,M,x){x.r(M);var N=function(){function C(I,E,T){E===void 0&&(E=0),T===void 0&&(T=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=I,this.alpha_=I?Math.exp(Math.log(.5)/I):0,this.estimate_=E,this.totalWeight_=T}var R=C.prototype;return R.sample=function(I,E){var T=Math.pow(this.alpha_,I);this.estimate_=E*(1-T)+T*this.estimate_,this.totalWeight_+=I},R.getTotalWeight=function(){return this.totalWeight_},R.getEstimate=function(){if(this.alpha_){var I=1-Math.pow(this.alpha_,this.totalWeight_);if(I)return this.estimate_/I}return this.estimate_},C}();M.default=N},"./src/utils/fetch-loader.ts":function(K,M,x){x.r(M),x.d(M,"fetchSupported",function(){return h});var N=x("./src/polyfills/number.ts"),C=x("./src/loader/load-stats.ts"),R=x("./src/demux/chunk-cache.ts");function I(d){var r=typeof Map=="function"?new Map:void 0;return I=function(t){if(t===null||(u=t,Function.toString.call(u).indexOf("[native code]")===-1))return t;var u;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(t))return r.get(t);r.set(t,m)}function m(){return E(t,arguments,l(this).constructor)}return m.prototype=Object.create(t.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),T(m,t)},I(d)}function E(d,r,t){return E=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(u,m,S){var A=[null];A.push.apply(A,m);var _=new(Function.bind.apply(u,A));return S&&T(_,S.prototype),_},E.apply(null,arguments)}function T(d,r){return T=Object.setPrototypeOf||function(t,u){return t.__proto__=u,t},T(d,r)}function l(d){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},l(d)}function c(){return c=Object.assign||function(d){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(d[u]=t[u])}return d},c.apply(this,arguments)}function h(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var y=function(){function d(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||i,this.controller=new self.AbortController,this.stats=new C.LoadStats}var r=d.prototype;return r.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},r.abortInternal=function(){var t=this.response;t&&t.ok||(this.stats.aborted=!0,this.controller.abort())},r.abort=function(){var t;this.abortInternal(),(t=this.callbacks)!==null&&t!==void 0&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},r.load=function(t,u,m){var S=this,A=this.stats;if(A.loading.start)throw new Error("Loader can only be used once.");A.loading.start=self.performance.now();var _=function(p,k){var P={method:"GET",mode:"cors",credentials:"same-origin",signal:k,headers:new self.Headers(c({},p.headers))};return p.rangeEnd&&P.headers.set("Range","bytes="+p.rangeStart+"-"+String(p.rangeEnd-1)),P}(t,this.controller.signal),v=m.onProgress,f=t.responseType==="arraybuffer",b=f?"byteLength":"length";this.context=t,this.config=u,this.callbacks=m,this.request=this.fetchSetup(t,_),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){S.abortInternal(),m.onTimeout(A,t,S.response)},u.timeout),self.fetch(this.request).then(function(p){if(S.response=S.loader=p,!p.ok){var k=p.status,P=p.statusText;throw new g(P||"fetch, bad network response",k,p)}return A.loading.first=Math.max(self.performance.now(),A.loading.start),A.total=parseInt(p.headers.get("Content-Length")||"0"),v&&Object(N.isFiniteNumber)(u.highWaterMark)?S.loadProgressively(p,A,t,u.highWaterMark,v):f?p.arrayBuffer():p.text()}).then(function(p){var k=S.response;self.clearTimeout(S.requestTimeout),A.loading.end=Math.max(self.performance.now(),A.loading.first),A.loaded=A.total=p[b];var P={url:k.url,data:p};v&&!Object(N.isFiniteNumber)(u.highWaterMark)&&v(A,t,p,k),m.onSuccess(P,A,t,k)}).catch(function(p){if(self.clearTimeout(S.requestTimeout),!A.aborted){var k=p.code||0;m.onError({code:k,text:p.message},t,p.details)}})},r.getCacheAge=function(){var t=null;if(this.response){var u=this.response.headers.get("age");t=u?parseFloat(u):null}return t},r.loadProgressively=function(t,u,m,S,A){S===void 0&&(S=0);var _=new R.default,v=t.body.getReader();return function f(){return v.read().then(function(b){if(b.done)return _.dataLength&&A(u,m,_.flush(),t),Promise.resolve(new ArrayBuffer(0));var p=b.value,k=p.length;return u.loaded+=k,k<S||_.dataLength?(_.push(p),_.dataLength>=S&&A(u,m,_.flush(),t)):A(u,m,p,t),f()}).catch(function(){return Promise.reject()})}()},d}();function i(d,r){return new self.Request(d.url,r)}var g=function(d){var r,t;function u(m,S,A){var _;return(_=d.call(this,m)||this).code=void 0,_.details=void 0,_.code=S,_.details=A,_}return t=d,(r=u).prototype=Object.create(t.prototype),r.prototype.constructor=r,T(r,t),u}(I(Error));M.default=y},"./src/utils/imsc1-ttml-parser.ts":function(K,M,x){x.r(M),x.d(M,"IMSC1_CODEC",function(){return c}),x.d(M,"parseIMSC1",function(){return g});var N=x("./src/utils/mp4-tools.ts"),C=x("./src/utils/vttparser.ts"),R=x("./src/utils/vttcue.ts"),I=x("./src/demux/id3.ts"),E=x("./src/utils/timescale-conversion.ts"),T=x("./src/utils/webvtt-parser.ts");function l(){return l=Object.assign||function(A){for(var _=1;_<arguments.length;_++){var v=arguments[_];for(var f in v)Object.prototype.hasOwnProperty.call(v,f)&&(A[f]=v[f])}return A},l.apply(this,arguments)}var c="stpp.ttml.im1t",h=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,y=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,i={left:"start",center:"center",right:"end",start:"start",end:"end"};function g(A,_,v,f,b){var p=Object(N.findBox)(new Uint8Array(A),["mdat"]);if(p.length!==0){var k=p[0],P=Object(I.utf8ArrayToStr)(new Uint8Array(A,k.start,k.end-k.start)),j=Object(E.toTimescaleFromScale)(_,1,v);try{f(function(U,G){var ee=new DOMParser().parseFromString(U,"text/xml").getElementsByTagName("tt")[0];if(!ee)throw new Error("Invalid ttml");var ne={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},re=Object.keys(ne).reduce(function(ze,le){return ze[le]=ee.getAttribute("ttp:"+le)||ne[le],ze},{}),oe=ee.getAttribute("xml:space")!=="preserve",W=r(d(ee,"styling","style")),Te=r(d(ee,"layout","region")),Ue=d(ee,"body","[begin]");return[].map.call(Ue,function(ze){var le=t(ze,oe);if(!le||!ze.hasAttribute("begin"))return null;var Se=S(ze.getAttribute("begin"),re),be=S(ze.getAttribute("dur"),re),Y=S(ze.getAttribute("end"),re);if(Se===null)throw m(ze);if(Y===null){if(be===null)throw m(ze);Y=Se+be}var Q=new R.default(Se-G,Y-G,le);Q.id=Object(T.generateCueId)(Q.startTime,Q.endTime,Q.text);var J=Te[ze.getAttribute("region")],fe=W[ze.getAttribute("style")];Q.position=10,Q.size=80;var Ce=function(z,X){var de="http://www.w3.org/ns/ttml#styling";return["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(function(ge,Ge){var it=u(X,de,Ge)||u(z,de,Ge);return it&&(ge[Ge]=it),ge},{})}(J,fe),V=Ce.textAlign;if(V){var H=i[V];H&&(Q.lineAlign=H),Q.align=V}return l(Q,Ce),Q}).filter(function(ze){return ze!==null})}(P,j))}catch(U){b(U)}}else b(new Error("Could not parse IMSC1 mdat"))}function d(A,_,v){var f=A.getElementsByTagName(_)[0];return f?[].slice.call(f.querySelectorAll(v)):[]}function r(A){return A.reduce(function(_,v){var f=v.getAttribute("xml:id");return f&&(_[f]=v),_},{})}function t(A,_){return[].slice.call(A.childNodes).reduce(function(v,f,b){var p;return f.nodeName==="br"&&b?v+`
`:(p=f.childNodes)!==null&&p!==void 0&&p.length?t(f,_):_?v+f.textContent.trim().replace(/\s+/g," "):v+f.textContent},"")}function u(A,_,v){return A.hasAttributeNS(_,v)?A.getAttributeNS(_,v):null}function m(A){return new Error("Could not parse ttml timestamp "+A)}function S(A,_){if(!A)return null;var v=Object(C.parseTimeStamp)(A);return v===null&&(h.test(A)?v=function(f,b){var p=h.exec(f),k=(0|p[4])+(0|p[5])/b.subFrameRate;return 3600*(0|p[1])+60*(0|p[2])+(0|p[3])+k/b.frameRate}(A,_):y.test(A)&&(v=function(f,b){var p=y.exec(f),k=Number(p[1]);switch(p[2]){case"h":return 3600*k;case"m":return 60*k;case"ms":return 1e3*k;case"f":return k/b.frameRate;case"t":return k/b.tickRate}return k}(A,_))),v}},"./src/utils/logger.ts":function(K,M,x){x.r(M),x.d(M,"enableLogs",function(){return I}),x.d(M,"logger",function(){return E});var N=function(){},C={trace:N,debug:N,log:N,warn:N,info:N,error:N},R=C;function I(T){if(self.console&&T===!0||typeof T=="object"){(function(l){for(var c=arguments.length,h=new Array(c>1?c-1:0),y=1;y<c;y++)h[y-1]=arguments[y];h.forEach(function(i){R[i]=l[i]?l[i].bind(l):function(g){var d=self.console[g];return d?d.bind(self.console,"["+g+"] >"):N}(i)})})(T,"debug","log","info","warn","error");try{R.log()}catch{R=C}}else R=C}var E=C},"./src/utils/mediakeys-helper.ts":function(K,M,x){var N;x.r(M),x.d(M,"KeySystems",function(){return N}),x.d(M,"requestMediaKeySystemAccess",function(){return C}),function(R){R.WIDEVINE="com.widevine.alpha",R.PLAYREADY="com.microsoft.playready"}(N||(N={}));var C=typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null},"./src/utils/mediasource-helper.ts":function(K,M,x){function N(){return self.MediaSource||self.WebKitMediaSource}x.r(M),x.d(M,"getMediaSource",function(){return N})},"./src/utils/mp4-tools.ts":function(K,M,x){x.r(M),x.d(M,"bin2str",function(){return E}),x.d(M,"readUint16",function(){return T}),x.d(M,"readUint32",function(){return l}),x.d(M,"writeUint32",function(){return c}),x.d(M,"findBox",function(){return h}),x.d(M,"parseSegmentIndex",function(){return y}),x.d(M,"parseInitSegment",function(){return i}),x.d(M,"getStartDTS",function(){return g}),x.d(M,"getDuration",function(){return d}),x.d(M,"computeRawDurationFromSamples",function(){return r}),x.d(M,"offsetStartDTS",function(){return t}),x.d(M,"segmentValidRange",function(){return u}),x.d(M,"appendUint8Array",function(){return m});var N=x("./src/utils/typed-array.ts"),C=x("./src/loader/fragment.ts"),R=Math.pow(2,32)-1,I=[].push;function E(S){return String.fromCharCode.apply(null,S)}function T(S,A){"data"in S&&(A+=S.start,S=S.data);var _=S[A]<<8|S[A+1];return _<0?65536+_:_}function l(S,A){"data"in S&&(A+=S.start,S=S.data);var _=S[A]<<24|S[A+1]<<16|S[A+2]<<8|S[A+3];return _<0?4294967296+_:_}function c(S,A,_){"data"in S&&(A+=S.start,S=S.data),S[A]=_>>24,S[A+1]=_>>16&255,S[A+2]=_>>8&255,S[A+3]=255&_}function h(S,A){var _,v,f,b=[];if(!A.length)return b;"data"in S?(_=S.data,v=S.start,f=S.end):(v=0,f=(_=S).byteLength);for(var p=v;p<f;){var k=l(_,p),P=k>1?p+k:f;if(E(_.subarray(p+4,p+8))===A[0])if(A.length===1)b.push({data:_,start:p+8,end:P});else{var j=h({data:_,start:p+8,end:P},A.slice(1));j.length&&I.apply(b,j)}p=P}return b}function y(S){var A=h(S,["moov"])[0],_=A?A.end:null,v=h(S,["sidx"]);if(!v||!v[0])return null;var f=[],b=v[0],p=b.data[0],k=p===0?8:16,P=l(b,k);k+=4,k+=p===0?8:16,k+=2;var j=b.end+0,U=T(b,k);k+=2;for(var G=0;G<U;G++){var ee=k,ne=l(b,ee);ee+=4;var re=2147483647&ne;if((2147483648&ne)>>>31==1)return console.warn("SIDX has hierarchical references (not supported)"),null;var oe=l(b,ee);ee+=4,f.push({referenceSize:re,subsegmentDuration:oe,info:{duration:oe/P,start:j,end:j+re-1}}),j+=re,k=ee+=4}return{earliestPresentationTime:0,timescale:P,version:p,referencesCount:U,references:f,moovEndOffset:_}}function i(S){for(var A=[],_=h(S,["moov","trak"]),v=0;v<_.length;v++){var f=_[v],b=h(f,["tkhd"])[0];if(b){var p=b.data[b.start],k=p===0?12:20,P=l(b,k),j=h(f,["mdia","mdhd"])[0];if(j){var U=l(j,k=(p=j.data[j.start])===0?12:20),G=h(f,["mdia","hdlr"])[0];if(G){var ee=E(G.data.subarray(G.start+8,G.start+12)),ne={soun:C.ElementaryStreamTypes.AUDIO,vide:C.ElementaryStreamTypes.VIDEO}[ee];if(ne){var re=h(f,["mdia","minf","stbl","stsd"])[0],oe=void 0;re&&(oe=E(re.data.subarray(re.start+12,re.start+16))),A[P]={timescale:U,type:ne},A[ne]={timescale:U,id:P,codec:oe}}}}}}return h(S,["moov","mvex","trex"]).forEach(function(W){var Te=l(W,4),Ue=A[Te];Ue&&(Ue.default={duration:l(W,12),flags:l(W,20)})}),A}function g(S,A){return h(A,["moof","traf"]).reduce(function(_,v){var f=h(v,["tfdt"])[0],b=f.data[f.start],p=h(v,["tfhd"]).reduce(function(k,P){var j=l(P,4),U=S[j];if(U){var G=l(f,4);b===1&&(G*=Math.pow(2,32),G+=l(f,8));var ee=G/(U.timescale||9e4);if(isFinite(ee)&&(k===null||ee<k))return ee}return k},null);return p!==null&&isFinite(p)&&(_===null||p<_)?p:_},null)||0}function d(S,A){for(var _=0,v=0,f=0,b=h(S,["moof","traf"]),p=0;p<b.length;p++){var k=b[p],P=h(k,["tfhd"])[0],j=A[l(P,4)];if(j){var U=j.default,G=l(P,0)|(U==null?void 0:U.flags),ee=U==null?void 0:U.duration;8&G&&(ee=l(P,2&G?12:8));for(var ne=j.timescale||9e4,re=h(k,["trun"]),oe=0;oe<re.length;oe++)!(_=r(re[oe]))&&ee&&(_=ee*l(re[oe],4)),j.type===C.ElementaryStreamTypes.VIDEO?v+=_/ne:j.type===C.ElementaryStreamTypes.AUDIO&&(f+=_/ne)}}if(v===0&&f===0){var W=y(S);if(W!=null&&W.references)return W.references.reduce(function(Te,Ue){return Te+Ue.info.duration||0},0)}return v||f}function r(S){var A=l(S,0),_=8;1&A&&(_+=4),4&A&&(_+=4);for(var v=0,f=l(S,4),b=0;b<f;b++)256&A&&(v+=l(S,_),_+=4),512&A&&(_+=4),1024&A&&(_+=4),2048&A&&(_+=4);return v}function t(S,A,_){h(A,["moof","traf"]).forEach(function(v){h(v,["tfhd"]).forEach(function(f){var b=l(f,4),p=S[b];if(p){var k=p.timescale||9e4;h(v,["tfdt"]).forEach(function(P){var j=P.data[P.start],U=l(P,4);if(j===0)c(P,4,U-_*k);else{U*=Math.pow(2,32),U+=l(P,8),U-=_*k,U=Math.max(U,0);var G=Math.floor(U/(R+1)),ee=Math.floor(U%(R+1));c(P,4,G),c(P,8,ee)}})}})})}function u(S){var A={valid:null,remainder:null},_=h(S,["moof"]);if(!_)return A;if(_.length<2)return A.remainder=S,A;var v=_[_.length-1];return A.valid=Object(N.sliceUint8)(S,0,v.start-8),A.remainder=Object(N.sliceUint8)(S,v.start-8),A}function m(S,A){var _=new Uint8Array(S.length+A.length);return _.set(S),_.set(A,S.length),_}},"./src/utils/output-filter.ts":function(K,M,x){x.r(M),x.d(M,"default",function(){return N});var N=function(){function C(I,E){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=I,this.trackName=E}var R=C.prototype;return R.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},R.newCue=function(I,E,T){(this.startTime===null||this.startTime>I)&&(this.startTime=I),this.endTime=E,this.screen=T,this.timelineController.createCaptionsTrack(this.trackName)},R.reset=function(){this.cueRanges=[],this.startTime=null},C}()},"./src/utils/texttrack-utils.ts":function(K,M,x){x.r(M),x.d(M,"sendAddTrackEvent",function(){return C}),x.d(M,"addCueToTrack",function(){return R}),x.d(M,"clearCurrentCues",function(){return I}),x.d(M,"removeCuesInRange",function(){return E}),x.d(M,"getCuesInRange",function(){return T});var N=x("./src/utils/logger.ts");function C(l,c){var h;try{h=new Event("addtrack")}catch{(h=document.createEvent("Event")).initEvent("addtrack",!1,!1)}h.track=l,c.dispatchEvent(h)}function R(l,c){var h=l.mode;if(h==="disabled"&&(l.mode="hidden"),l.cues&&!l.cues.getCueById(c.id))try{if(l.addCue(c),!l.cues.getCueById(c.id))throw new Error("addCue is failed for: "+c)}catch(i){N.logger.debug("[texttrack-utils]: "+i);var y=new self.TextTrackCue(c.startTime,c.endTime,c.text);y.id=c.id,l.addCue(y)}h==="disabled"&&(l.mode=h)}function I(l){var c=l.mode;if(c==="disabled"&&(l.mode="hidden"),l.cues)for(var h=l.cues.length;h--;)l.removeCue(l.cues[h]);c==="disabled"&&(l.mode=c)}function E(l,c,h){var y=l.mode;if(y==="disabled"&&(l.mode="hidden"),l.cues&&l.cues.length>0)for(var i=T(l.cues,c,h),g=0;g<i.length;g++)l.removeCue(i[g]);y==="disabled"&&(l.mode=y)}function T(l,c,h){var y=[],i=function(t,u){if(u<t[0].startTime)return 0;var m=t.length-1;if(u>t[m].endTime)return-1;for(var S=0,A=m;S<=A;){var _=Math.floor((A+S)/2);if(u<t[_].startTime)A=_-1;else{if(!(u>t[_].startTime&&S<m))return _;S=_+1}}return t[S].startTime-u<u-t[A].startTime?S:A}(l,c);if(i>-1)for(var g=i,d=l.length;g<d;g++){var r=l[g];if(r.startTime>=c&&r.endTime<=h)y.push(r);else if(r.startTime>h)return y}return y}},"./src/utils/time-ranges.ts":function(K,M,x){x.r(M),M.default={toString:function(N){for(var C="",R=N.length,I=0;I<R;I++)C+="["+N.start(I).toFixed(3)+","+N.end(I).toFixed(3)+"]";return C}}},"./src/utils/timescale-conversion.ts":function(K,M,x){x.r(M),x.d(M,"toTimescaleFromBase",function(){return C}),x.d(M,"toTimescaleFromScale",function(){return R}),x.d(M,"toMsFromMpegTsClock",function(){return I}),x.d(M,"toMpegTsClockFromTimescale",function(){return E});var N=9e4;function C(T,l,c,h){c===void 0&&(c=1),h===void 0&&(h=!1);var y=T*l*c;return h?Math.round(y):y}function R(T,l,c,h){return c===void 0&&(c=1),h===void 0&&(h=!1),C(T,l,1/c,h)}function I(T,l){return l===void 0&&(l=!1),C(T,1e3,1/N,l)}function E(T,l){return l===void 0&&(l=1),C(T,N,1/l)}},"./src/utils/typed-array.ts":function(K,M,x){function N(C,R,I){return Uint8Array.prototype.slice?C.slice(R,I):new Uint8Array(Array.prototype.slice.call(C,R,I))}x.r(M),x.d(M,"sliceUint8",function(){return N})},"./src/utils/vttcue.ts":function(K,M,x){x.r(M),M.default=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;var N=["","lr","rl"],C=["start","middle","end","left","right"];function R(l,c){if(typeof c!="string"||!Array.isArray(l))return!1;var h=c.toLowerCase();return!!~l.indexOf(h)&&h}function I(l){return R(C,l)}function E(l){for(var c=arguments.length,h=new Array(c>1?c-1:0),y=1;y<c;y++)h[y-1]=arguments[y];for(var i=1;i<arguments.length;i++){var g=arguments[i];for(var d in g)l[d]=g[d]}return l}function T(l,c,h){var y=this,i={enumerable:!0};y.hasBeenReset=!1;var g="",d=!1,r=l,t=c,u=h,m=null,S="",A=!0,_="auto",v="start",f=50,b="middle",p=50,k="middle";Object.defineProperty(y,"id",E({},i,{get:function(){return g},set:function(P){g=""+P}})),Object.defineProperty(y,"pauseOnExit",E({},i,{get:function(){return d},set:function(P){d=!!P}})),Object.defineProperty(y,"startTime",E({},i,{get:function(){return r},set:function(P){if(typeof P!="number")throw new TypeError("Start time must be set to a number.");r=P,this.hasBeenReset=!0}})),Object.defineProperty(y,"endTime",E({},i,{get:function(){return t},set:function(P){if(typeof P!="number")throw new TypeError("End time must be set to a number.");t=P,this.hasBeenReset=!0}})),Object.defineProperty(y,"text",E({},i,{get:function(){return u},set:function(P){u=""+P,this.hasBeenReset=!0}})),Object.defineProperty(y,"region",E({},i,{get:function(){return m},set:function(P){m=P,this.hasBeenReset=!0}})),Object.defineProperty(y,"vertical",E({},i,{get:function(){return S},set:function(P){var j=function(U){return R(N,U)}(P);if(j===!1)throw new SyntaxError("An invalid or illegal string was specified.");S=j,this.hasBeenReset=!0}})),Object.defineProperty(y,"snapToLines",E({},i,{get:function(){return A},set:function(P){A=!!P,this.hasBeenReset=!0}})),Object.defineProperty(y,"line",E({},i,{get:function(){return _},set:function(P){if(typeof P!="number"&&P!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");_=P,this.hasBeenReset=!0}})),Object.defineProperty(y,"lineAlign",E({},i,{get:function(){return v},set:function(P){var j=I(P);if(!j)throw new SyntaxError("An invalid or illegal string was specified.");v=j,this.hasBeenReset=!0}})),Object.defineProperty(y,"position",E({},i,{get:function(){return f},set:function(P){if(P<0||P>100)throw new Error("Position must be between 0 and 100.");f=P,this.hasBeenReset=!0}})),Object.defineProperty(y,"positionAlign",E({},i,{get:function(){return b},set:function(P){var j=I(P);if(!j)throw new SyntaxError("An invalid or illegal string was specified.");b=j,this.hasBeenReset=!0}})),Object.defineProperty(y,"size",E({},i,{get:function(){return p},set:function(P){if(P<0||P>100)throw new Error("Size must be between 0 and 100.");p=P,this.hasBeenReset=!0}})),Object.defineProperty(y,"align",E({},i,{get:function(){return k},set:function(P){var j=I(P);if(!j)throw new SyntaxError("An invalid or illegal string was specified.");k=j,this.hasBeenReset=!0}})),y.displayState=void 0}return T.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},T}()},"./src/utils/vttparser.ts":function(K,M,x){x.r(M),x.d(M,"parseTimeStamp",function(){return R}),x.d(M,"fixLineBreaks",function(){return h}),x.d(M,"VTTParser",function(){return y});var N=x("./src/utils/vttcue.ts"),C=function(){function i(){}return i.prototype.decode=function(g,d){if(!g)return"";if(typeof g!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(g))},i}();function R(i){function g(r,t,u,m){return 3600*(0|r)+60*(0|t)+(0|u)+parseFloat(m||0)}var d=i.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return d?parseFloat(d[2])>59?g(d[2],d[3],0,d[4]):g(d[1],d[2],d[3],d[4]):null}var I=function(){function i(){this.values=Object.create(null)}var g=i.prototype;return g.set=function(d,r){this.get(d)||r===""||(this.values[d]=r)},g.get=function(d,r,t){return t?this.has(d)?this.values[d]:r[t]:this.has(d)?this.values[d]:r},g.has=function(d){return d in this.values},g.alt=function(d,r,t){for(var u=0;u<t.length;++u)if(r===t[u]){this.set(d,r);break}},g.integer=function(d,r){/^-?\d+$/.test(r)&&this.set(d,parseInt(r,10))},g.percent=function(d,r){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(r)){var t=parseFloat(r);if(t>=0&&t<=100)return this.set(d,t),!0}return!1},i}();function E(i,g,d,r){var t=r?i.split(r):[i];for(var u in t)if(typeof t[u]=="string"){var m=t[u].split(d);m.length===2&&g(m[0],m[1])}}var T=new N.default(0,0,""),l=T.align==="middle"?"middle":"center";function c(i,g,d){var r=i;function t(){var m=R(i);if(m===null)throw new Error("Malformed timestamp: "+r);return i=i.replace(/^[^\sa-zA-Z-]+/,""),m}function u(){i=i.replace(/^\s+/,"")}if(u(),g.startTime=t(),u(),i.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);i=i.substr(3),u(),g.endTime=t(),u(),function(m,S){var A=new I;E(m,function(f,b){var p;switch(f){case"region":for(var k=d.length-1;k>=0;k--)if(d[k].id===b){A.set(f,d[k].region);break}break;case"vertical":A.alt(f,b,["rl","lr"]);break;case"line":p=b.split(","),A.integer(f,p[0]),A.percent(f,p[0])&&A.set("snapToLines",!1),A.alt(f,p[0],["auto"]),p.length===2&&A.alt("lineAlign",p[1],["start",l,"end"]);break;case"position":p=b.split(","),A.percent(f,p[0]),p.length===2&&A.alt("positionAlign",p[1],["start",l,"end","line-left","line-right","auto"]);break;case"size":A.percent(f,b);break;case"align":A.alt(f,b,["start",l,"end","left","right"])}},/:/,/\s/),S.region=A.get("region",null),S.vertical=A.get("vertical","");var _=A.get("line","auto");_==="auto"&&T.line===-1&&(_=-1),S.line=_,S.lineAlign=A.get("lineAlign","start"),S.snapToLines=A.get("snapToLines",!0),S.size=A.get("size",100),S.align=A.get("align",l);var v=A.get("position","auto");v==="auto"&&T.position===50&&(v=S.align==="start"||S.align==="left"?0:S.align==="end"||S.align==="right"?100:50),S.position=v}(i,g)}function h(i){return i.replace(/<br(?: \/)?>/gi,`
`)}var y=function(){function i(){this.state="INITIAL",this.buffer="",this.decoder=new C,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var g=i.prototype;return g.parse=function(d){var r=this;function t(){var _=r.buffer,v=0;for(_=h(_);v<_.length&&_[v]!=="\r"&&_[v]!==`
`;)++v;var f=_.substr(0,v);return _[v]==="\r"&&++v,_[v]===`
`&&++v,r.buffer=_.substr(v),f}d&&(r.buffer+=r.decoder.decode(d,{stream:!0}));try{var u="";if(r.state==="INITIAL"){if(!/\r\n|\n/.test(r.buffer))return this;var m=(u=t()).match(/^()?WEBVTT([ \t].*)?$/);if(!m||!m[0])throw new Error("Malformed WebVTT signature.");r.state="HEADER"}for(var S=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(S?S=!1:u=t(),r.state){case"HEADER":/:/.test(u)?E(u,function(_,v){},/:/):u||(r.state="ID");continue;case"NOTE":u||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(u)){r.state="NOTE";break}if(!u)continue;if(r.cue=new N.default(0,0,""),r.state="CUE",u.indexOf("-->")===-1){r.cue.id=u;continue}case"CUE":if(!r.cue){r.state="BADCUE";continue}try{c(u,r.cue,r.regionList)}catch{r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var A=u.indexOf("-->")!==-1;if(!u||A&&(S=!0)){r.oncue&&r.cue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}if(r.cue===null)continue;r.cue.text&&(r.cue.text+=`
`),r.cue.text+=u;continue;case"BADCUE":u||(r.state="ID")}}}catch{r.state==="CUETEXT"&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state=r.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},g.flush=function(){var d=this;try{if((d.cue||d.state==="HEADER")&&(d.buffer+=`

`,d.parse()),d.state==="INITIAL"||d.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(r){d.onparsingerror&&d.onparsingerror(r)}return d.onflush&&d.onflush(),this},i}()},"./src/utils/webvtt-parser.ts":function(K,M,x){x.r(M),x.d(M,"generateCueId",function(){return y}),x.d(M,"parseWebVTT",function(){return g});var N=x("./src/polyfills/number.ts"),C=x("./src/utils/vttparser.ts"),R=x("./src/demux/id3.ts"),I=x("./src/utils/timescale-conversion.ts"),E=x("./src/remux/mp4-remuxer.ts"),T=/\r\n|\n\r|\n|\r/g,l=function(d,r,t){return t===void 0&&(t=0),d.substr(t,r.length)===r},c=function(d){var r=parseInt(d.substr(-3)),t=parseInt(d.substr(-6,2)),u=parseInt(d.substr(-9,2)),m=d.length>9?parseInt(d.substr(0,d.indexOf(":"))):0;if(!(Object(N.isFiniteNumber)(r)&&Object(N.isFiniteNumber)(t)&&Object(N.isFiniteNumber)(u)&&Object(N.isFiniteNumber)(m)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+d);return r+=1e3*t,(r+=6e4*u)+36e5*m},h=function(d){for(var r=5381,t=d.length;t;)r=33*r^d.charCodeAt(--t);return(r>>>0).toString()};function y(d,r,t){return h(d.toString())+h(r.toString())+h(t)}var i=function(d,r,t){var u=d[r],m=d[u.prevCC];if(!m||!m.new&&u.new)return d.ccOffset=d.presentationOffset=u.start,void(u.new=!1);for(;(S=m)!==null&&S!==void 0&&S.new;){var S;d.ccOffset+=u.start-m.start,u.new=!1,m=d[(u=m).prevCC]}d.presentationOffset=t};function g(d,r,t,u,m,S,A,_){var v,f=new C.VTTParser,b=Object(R.utf8ArrayToStr)(new Uint8Array(d)).trim().replace(T,`
`).split(`
`),p=[],k=Object(I.toMpegTsClockFromTimescale)(r,t),P="00:00.000",j=0,U=0,G=!0,ee=!1;f.oncue=function(ne){var re=u[m],oe=u.ccOffset,W=(j-k)/9e4;if(re!=null&&re.new&&(U!==void 0?oe=u.ccOffset=re.start:i(u,m,W)),W&&(oe=W-u.presentationOffset),ee){var Te=ne.endTime-ne.startTime,Ue=Object(E.normalizePts)(9e4*(ne.startTime+oe-U),9e4*S)/9e4;ne.startTime=Ue,ne.endTime=Ue+Te}var ze=ne.text.trim();ne.text=decodeURIComponent(encodeURIComponent(ze)),ne.id||(ne.id=y(ne.startTime,ne.endTime,ze)),ne.endTime>0&&p.push(ne)},f.onparsingerror=function(ne){v=ne},f.onflush=function(){v?_(v):A(p)},b.forEach(function(ne){if(G){if(l(ne,"X-TIMESTAMP-MAP=")){G=!1,ee=!0,ne.substr(16).split(",").forEach(function(re){l(re,"LOCAL:")?P=re.substr(6):l(re,"MPEGTS:")&&(j=parseInt(re.substr(7)))});try{U=c(P)/1e3}catch(re){ee=!1,v=re}return}ne===""&&(G=!1)}f.parse(ne+`
`)}),f.flush()}},"./src/utils/xhr-loader.ts":function(K,M,x){x.r(M);var N=x("./src/utils/logger.ts"),C=x("./src/loader/load-stats.ts"),R=/^age:\s*[\d.]+\s*$/m,I=function(){function E(l){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=l?l.xhrSetup:null,this.stats=new C.LoadStats,this.retryDelay=0}var T=E.prototype;return T.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},T.abortInternal=function(){var l=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),l&&(l.onreadystatechange=null,l.onprogress=null,l.readyState!==4&&(this.stats.aborted=!0,l.abort()))},T.abort=function(){var l;this.abortInternal(),(l=this.callbacks)!==null&&l!==void 0&&l.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},T.load=function(l,c,h){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=l,this.config=c,this.callbacks=h,this.retryDelay=c.retryDelay,this.loadInternal()},T.loadInternal=function(){var l=this.config,c=this.context;if(l){var h=this.loader=new self.XMLHttpRequest,y=this.stats;y.loading.first=0,y.loaded=0;var i=this.xhrSetup;try{if(i)try{i(h,c.url)}catch{h.open("GET",c.url,!0),i(h,c.url)}h.readyState||h.open("GET",c.url,!0);var g=this.context.headers;if(g)for(var d in g)h.setRequestHeader(d,g[d])}catch(r){return void this.callbacks.onError({code:h.status,text:r.message},c,h)}c.rangeEnd&&h.setRequestHeader("Range","bytes="+c.rangeStart+"-"+(c.rangeEnd-1)),h.onreadystatechange=this.readystatechange.bind(this),h.onprogress=this.loadprogress.bind(this),h.responseType=c.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),l.timeout),h.send()}},T.readystatechange=function(){var l=this.context,c=this.loader,h=this.stats;if(l&&c){var y=c.readyState,i=this.config;if(!h.aborted&&y>=2)if(self.clearTimeout(this.requestTimeout),h.loading.first===0&&(h.loading.first=Math.max(self.performance.now(),h.loading.start)),y===4){c.onreadystatechange=null,c.onprogress=null;var g=c.status;if(g>=200&&g<300){var d,r;if(h.loading.end=Math.max(self.performance.now(),h.loading.first),r=l.responseType==="arraybuffer"?(d=c.response).byteLength:(d=c.responseText).length,h.loaded=h.total=r,!this.callbacks)return;var t=this.callbacks.onProgress;if(t&&t(h,l,d,c),!this.callbacks)return;var u={url:c.responseURL,data:d};this.callbacks.onSuccess(u,h,l,c)}else h.retry>=i.maxRetry||g>=400&&g<499?(N.logger.error(g+" while loading "+l.url),this.callbacks.onError({code:g,text:c.statusText},l,c)):(N.logger.warn(g+" while loading "+l.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,i.maxRetryDelay),h.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout)}},T.loadtimeout=function(){N.logger.warn("timeout while loading "+this.context.url);var l=this.callbacks;l&&(this.abortInternal(),l.onTimeout(this.stats,this.context,this.loader))},T.loadprogress=function(l){var c=this.stats;c.loaded=l.loaded,l.lengthComputable&&(c.total=l.total)},T.getCacheAge=function(){var l=null;if(this.loader&&R.test(this.loader.getAllResponseHeaders())){var c=this.loader.getResponseHeader("age");l=c?parseFloat(c):null}return l},E}();M.default=I}}).default},Ee.exports=B())},5951:(Ee,B,K)=>{var M;(function(){var x={y:function(t){return t===1?"":""},mo:function(t){return t===1?"":""},w:function(t){return t===1?"":""},d:function(t){return t===1?"":""},h:function(t){return t===1?"":""},m:function(t){return t===1?"":""},s:function(t){return t===1?"":""},ms:function(t){return(t===1?"":"")+"  "},decimal:","},N=["","","","","","","","","",""],C={af:{y:"jaar",mo:function(t){return"maand"+(t===1?"":"e")},w:function(t){return t===1?"week":"weke"},d:function(t){return t===1?"dag":"dae"},h:function(t){return t===1?"uur":"ure"},m:function(t){return t===1?"minuut":"minute"},s:function(t){return"sekonde"+(t===1?"":"s")},ms:function(t){return"millisekonde"+(t===1?"":"s")},decimal:","},ar:{y:function(t){return["","",""][l(t)]},mo:function(t){return["","",""][l(t)]},w:function(t){return["","",""][l(t)]},d:function(t){return["","",""][l(t)]},h:function(t){return["","",""][l(t)]},m:function(t){return["","",""][l(t)]},s:function(t){return["","",""][l(t)]},ms:function(t){return["  ","  ","  "][l(t)]},decimal:",",delimiter:"  ",_formatCount:function(t,u){for(var m=T(N,{".":u}),S=t.toString().split(""),A=0;A<S.length;A++){var _=S[A];r(m,_)&&(S[A]=m[_])}return S.join("")}},bg:{y:function(t){return["","",""][h(t)]},mo:function(t){return["","",""][h(t)]},w:function(t){return["","",""][h(t)]},d:function(t){return["","",""][h(t)]},h:function(t){return["","",""][h(t)]},m:function(t){return["","",""][h(t)]},s:function(t){return["","",""][h(t)]},ms:function(t){return["","",""][h(t)]},decimal:","},bn:{y:"",mo:"",w:"",d:"",h:"",m:"",s:"",ms:""},ca:{y:function(t){return"any"+(t===1?"":"s")},mo:function(t){return"mes"+(t===1?"":"os")},w:function(t){return"setman"+(t===1?"a":"es")},d:function(t){return"di"+(t===1?"a":"es")},h:function(t){return"hor"+(t===1?"a":"es")},m:function(t){return"minut"+(t===1?"":"s")},s:function(t){return"segon"+(t===1?"":"s")},ms:function(t){return"milisegon"+(t===1?"":"s")},decimal:","},cs:{y:function(t){return["rok","roku","roky","let"][y(t)]},mo:function(t){return["msc","msce","msce","msc"][y(t)]},w:function(t){return["tden","tdne","tdny","tdn"][y(t)]},d:function(t){return["den","dne","dny","dn"][y(t)]},h:function(t){return["hodina","hodiny","hodiny","hodin"][y(t)]},m:function(t){return["minuta","minuty","minuty","minut"][y(t)]},s:function(t){return["sekunda","sekundy","sekundy","sekund"][y(t)]},ms:function(t){return["milisekunda","milisekundy","milisekundy","milisekund"][y(t)]},decimal:","},cy:{y:"flwyddyn",mo:"mis",w:"wythnos",d:"diwrnod",h:"awr",m:"munud",s:"eiliad",ms:"milieiliad"},da:{y:"r",mo:function(t){return"mned"+(t===1?"":"er")},w:function(t){return"uge"+(t===1?"":"r")},d:function(t){return"dag"+(t===1?"":"e")},h:function(t){return"time"+(t===1?"":"r")},m:function(t){return"minut"+(t===1?"":"ter")},s:function(t){return"sekund"+(t===1?"":"er")},ms:function(t){return"millisekund"+(t===1?"":"er")},decimal:","},de:{y:function(t){return"Jahr"+(t===1?"":"e")},mo:function(t){return"Monat"+(t===1?"":"e")},w:function(t){return"Woche"+(t===1?"":"n")},d:function(t){return"Tag"+(t===1?"":"e")},h:function(t){return"Stunde"+(t===1?"":"n")},m:function(t){return"Minute"+(t===1?"":"n")},s:function(t){return"Sekunde"+(t===1?"":"n")},ms:function(t){return"Millisekunde"+(t===1?"":"n")},decimal:","},el:x,en:{y:function(t){return"year"+(t===1?"":"s")},mo:function(t){return"month"+(t===1?"":"s")},w:function(t){return"week"+(t===1?"":"s")},d:function(t){return"day"+(t===1?"":"s")},h:function(t){return"hour"+(t===1?"":"s")},m:function(t){return"minute"+(t===1?"":"s")},s:function(t){return"second"+(t===1?"":"s")},ms:function(t){return"millisecond"+(t===1?"":"s")},decimal:"."},eo:{y:function(t){return"jaro"+(t===1?"":"j")},mo:function(t){return"monato"+(t===1?"":"j")},w:function(t){return"semajno"+(t===1?"":"j")},d:function(t){return"tago"+(t===1?"":"j")},h:function(t){return"horo"+(t===1?"":"j")},m:function(t){return"minuto"+(t===1?"":"j")},s:function(t){return"sekundo"+(t===1?"":"j")},ms:function(t){return"milisekundo"+(t===1?"":"j")},decimal:","},es:{y:function(t){return"ao"+(t===1?"":"s")},mo:function(t){return"mes"+(t===1?"":"es")},w:function(t){return"semana"+(t===1?"":"s")},d:function(t){return"da"+(t===1?"":"s")},h:function(t){return"hora"+(t===1?"":"s")},m:function(t){return"minuto"+(t===1?"":"s")},s:function(t){return"segundo"+(t===1?"":"s")},ms:function(t){return"milisegundo"+(t===1?"":"s")},decimal:","},et:{y:function(t){return"aasta"+(t===1?"":"t")},mo:function(t){return"kuu"+(t===1?"":"d")},w:function(t){return"ndal"+(t===1?"":"at")},d:function(t){return"pev"+(t===1?"":"a")},h:function(t){return"tund"+(t===1?"":"i")},m:function(t){return"minut"+(t===1?"":"it")},s:function(t){return"sekund"+(t===1?"":"it")},ms:function(t){return"millisekund"+(t===1?"":"it")},decimal:","},eu:{y:"urte",mo:"hilabete",w:"aste",d:"egun",h:"ordu",m:"minutu",s:"segundo",ms:"milisegundo",decimal:","},fa:{y:"",mo:"",w:"",d:"",h:"",m:"",s:"",ms:" ",decimal:"."},fi:{y:function(t){return t===1?"vuosi":"vuotta"},mo:function(t){return t===1?"kuukausi":"kuukautta"},w:function(t){return"viikko"+(t===1?"":"a")},d:function(t){return"piv"+(t===1?"":"")},h:function(t){return"tunti"+(t===1?"":"a")},m:function(t){return"minuutti"+(t===1?"":"a")},s:function(t){return"sekunti"+(t===1?"":"a")},ms:function(t){return"millisekunti"+(t===1?"":"a")},decimal:","},fo:{y:"r",mo:function(t){return t===1?"mnaur":"mnair"},w:function(t){return t===1?"vika":"vikur"},d:function(t){return t===1?"dagur":"dagar"},h:function(t){return t===1?"tmi":"tmar"},m:function(t){return t===1?"minuttur":"minuttir"},s:"sekund",ms:"millisekund",decimal:","},fr:{y:function(t){return"an"+(t>=2?"s":"")},mo:"mois",w:function(t){return"semaine"+(t>=2?"s":"")},d:function(t){return"jour"+(t>=2?"s":"")},h:function(t){return"heure"+(t>=2?"s":"")},m:function(t){return"minute"+(t>=2?"s":"")},s:function(t){return"seconde"+(t>=2?"s":"")},ms:function(t){return"milliseconde"+(t>=2?"s":"")},decimal:","},gr:x,he:{y:function(t){return t===1?"":""},mo:function(t){return t===1?"":""},w:function(t){return t===1?"":""},d:function(t){return t===1?"":""},h:function(t){return t===1?"":""},m:function(t){return t===1?"":""},s:function(t){return t===1?"":""},ms:function(t){return t===1?"":""},decimal:"."},hr:{y:function(t){return t%10==2||t%10==3||t%10==4?"godine":"godina"},mo:function(t){return t===1?"mjesec":t===2||t===3||t===4?"mjeseca":"mjeseci"},w:function(t){return t%10==1&&t!==11?"tjedan":"tjedna"},d:function(t){return t===1?"dan":"dana"},h:function(t){return t===1?"sat":t===2||t===3||t===4?"sata":"sati"},m:function(t){var u=t%10;return u!==2&&u!==3&&u!==4||!(t<10||t>14)?"minuta":"minute"},s:function(t){var u=t%10;return u===5||Math.floor(t)===t&&t>=10&&t<=19?"sekundi":u===1?"sekunda":u===2||u===3||u===4?"sekunde":"sekundi"},ms:function(t){return t===1?"milisekunda":t%10==2||t%10==3||t%10==4?"milisekunde":"milisekundi"},decimal:","},hi:{y:"",mo:function(t){return t===1?"":""},w:function(t){return t===1?"":""},d:"",h:function(t){return t===1?"":""},m:"",s:"",ms:"",decimal:"."},hu:{y:"v",mo:"hnap",w:"ht",d:"nap",h:"ra",m:"perc",s:"msodperc",ms:"ezredmsodperc",decimal:","},id:{y:"tahun",mo:"bulan",w:"minggu",d:"hari",h:"jam",m:"menit",s:"detik",ms:"milidetik",decimal:"."},is:{y:"r",mo:function(t){return"mnu"+(t===1?"ur":"ir")},w:function(t){return"vik"+(t===1?"a":"ur")},d:function(t){return"dag"+(t===1?"ur":"ar")},h:function(t){return"klukkutm"+(t===1?"i":"ar")},m:function(t){return"mnt"+(t===1?"a":"ur")},s:function(t){return"seknd"+(t===1?"a":"ur")},ms:function(t){return"milliseknd"+(t===1?"a":"ur")},decimal:"."},it:{y:function(t){return"ann"+(t===1?"o":"i")},mo:function(t){return"mes"+(t===1?"e":"i")},w:function(t){return"settiman"+(t===1?"a":"e")},d:function(t){return"giorn"+(t===1?"o":"i")},h:function(t){return"or"+(t===1?"a":"e")},m:function(t){return"minut"+(t===1?"o":"i")},s:function(t){return"second"+(t===1?"o":"i")},ms:function(t){return"millisecond"+(t===1?"o":"i")},decimal:","},ja:{y:"",mo:"",w:"",d:"",h:"",m:"",s:"",ms:"",decimal:"."},km:{y:"",mo:"",w:"",d:"",h:"",m:"",s:"",ms:""},kn:{y:function(t){return t===1?"":""},mo:function(t){return t===1?"":""},w:function(t){return t===1?"":""},d:function(t){return t===1?"":""},h:function(t){return t===1?"":""},m:function(t){return t===1?"":""},s:function(t){return t===1?"":""},ms:function(t){return t===1?"":""}},ko:{y:"",mo:"",w:"",d:"",h:"",m:"",s:"",ms:" ",decimal:"."},ku:{y:"sal",mo:"meh",w:"hefte",d:"roj",h:"seet",m:"deqe",s:"saniye",ms:"mlirk",decimal:","},lo:{y:"",mo:"",w:"",d:"",h:"",m:"",s:"",ms:"",decimal:","},lt:{y:function(t){return t%10==0||t%100>=10&&t%100<=20?"met":"metai"},mo:function(t){return["mnuo","mnesiai","mnesi"][i(t)]},w:function(t){return["savait","savaits","savaii"][i(t)]},d:function(t){return["diena","dienos","dien"][i(t)]},h:function(t){return["valanda","valandos","valand"][i(t)]},m:function(t){return["minut","minuts","minui"][i(t)]},s:function(t){return["sekund","sekunds","sekundi"][i(t)]},ms:function(t){return["milisekund","milisekunds","milisekundi"][i(t)]},decimal:","},lv:{y:function(t){return g(t)?"gads":"gadi"},mo:function(t){return g(t)?"mnesis":"mnei"},w:function(t){return g(t)?"neda":"nedas"},d:function(t){return g(t)?"diena":"dienas"},h:function(t){return g(t)?"stunda":"stundas"},m:function(t){return g(t)?"minte":"mintes"},s:function(t){return g(t)?"sekunde":"sekundes"},ms:function(t){return g(t)?"milisekunde":"milisekundes"},decimal:","},mk:{y:function(t){return t===1?"":""},mo:function(t){return t===1?"":""},w:function(t){return t===1?"":""},d:function(t){return t===1?"":""},h:function(t){return t===1?"":""},m:function(t){return t===1?"":""},s:function(t){return t===1?"":""},ms:function(t){return t===1?"":""},decimal:","},mn:{y:"",mo:"",w:" ",d:"",h:"",m:"",s:"",ms:"",decimal:"."},mr:{y:function(t){return t===1?"":""},mo:function(t){return t===1?"":""},w:function(t){return t===1?"":""},d:"",h:"",m:function(t){return t===1?"":""},s:"",ms:""},ms:{y:"tahun",mo:"bulan",w:"minggu",d:"hari",h:"jam",m:"minit",s:"saat",ms:"milisaat",decimal:"."},nl:{y:"jaar",mo:function(t){return t===1?"maand":"maanden"},w:function(t){return t===1?"week":"weken"},d:function(t){return t===1?"dag":"dagen"},h:"uur",m:function(t){return t===1?"minuut":"minuten"},s:function(t){return t===1?"seconde":"seconden"},ms:function(t){return t===1?"milliseconde":"milliseconden"},decimal:","},no:{y:"r",mo:function(t){return"mned"+(t===1?"":"er")},w:function(t){return"uke"+(t===1?"":"r")},d:function(t){return"dag"+(t===1?"":"er")},h:function(t){return"time"+(t===1?"":"r")},m:function(t){return"minutt"+(t===1?"":"er")},s:function(t){return"sekund"+(t===1?"":"er")},ms:function(t){return"millisekund"+(t===1?"":"er")},decimal:","},pl:{y:function(t){return["rok","roku","lata","lat"][c(t)]},mo:function(t){return["miesic","miesica","miesice","miesicy"][c(t)]},w:function(t){return["tydzie","tygodnia","tygodnie","tygodni"][c(t)]},d:function(t){return["dzie","dnia","dni","dni"][c(t)]},h:function(t){return["godzina","godziny","godziny","godzin"][c(t)]},m:function(t){return["minuta","minuty","minuty","minut"][c(t)]},s:function(t){return["sekunda","sekundy","sekundy","sekund"][c(t)]},ms:function(t){return["milisekunda","milisekundy","milisekundy","milisekund"][c(t)]},decimal:","},pt:{y:function(t){return"ano"+(t===1?"":"s")},mo:function(t){return t===1?"ms":"meses"},w:function(t){return"semana"+(t===1?"":"s")},d:function(t){return"dia"+(t===1?"":"s")},h:function(t){return"hora"+(t===1?"":"s")},m:function(t){return"minuto"+(t===1?"":"s")},s:function(t){return"segundo"+(t===1?"":"s")},ms:function(t){return"milissegundo"+(t===1?"":"s")},decimal:","},ro:{y:function(t){return t===1?"an":"ani"},mo:function(t){return t===1?"lun":"luni"},w:function(t){return t===1?"sptmn":"sptmni"},d:function(t){return t===1?"zi":"zile"},h:function(t){return t===1?"or":"ore"},m:function(t){return t===1?"minut":"minute"},s:function(t){return t===1?"secund":"secunde"},ms:function(t){return t===1?"milisecund":"milisecunde"},decimal:","},ru:{y:function(t){return["","",""][h(t)]},mo:function(t){return["","",""][h(t)]},w:function(t){return["","",""][h(t)]},d:function(t){return["","",""][h(t)]},h:function(t){return["","",""][h(t)]},m:function(t){return["","",""][h(t)]},s:function(t){return["","",""][h(t)]},ms:function(t){return["","",""][h(t)]},decimal:","},sq:{y:function(t){return t===1?"vit":"vjet"},mo:"muaj",w:"jav",d:"dit",h:"or",m:function(t){return"minut"+(t===1?"":"a")},s:function(t){return"sekond"+(t===1?"":"a")},ms:function(t){return"milisekond"+(t===1?"":"a")},decimal:","},sr:{y:function(t){return["","",""][h(t)]},mo:function(t){return["","",""][h(t)]},w:function(t){return["","",""][h(t)]},d:function(t){return["","",""][h(t)]},h:function(t){return["","",""][h(t)]},m:function(t){return["","",""][h(t)]},s:function(t){return["","",""][h(t)]},ms:function(t){return["","",""][h(t)]},decimal:","},ta:{y:function(t){return t===1?"":""},mo:function(t){return t===1?"":""},w:function(t){return t===1?"":""},d:function(t){return t===1?"":""},h:function(t){return t===1?"":""},m:function(t){return""+(t===1?"":"")},s:function(t){return""+(t===1?"":"")},ms:function(t){return" "+(t===1?"":"")}},te:{y:function(t){return""+(t===1?"":"")},mo:function(t){return""+(t===1?"":"")},w:function(t){return t===1?"":""},d:function(t){return""+(t===1?"":"")},h:function(t){return""+(t===1?"":"")},m:function(t){return t===1?"":""},s:function(t){return t===1?"":""},ms:function(t){return t===1?"":""}},uk:{y:function(t){return["","",""][h(t)]},mo:function(t){return["","",""][h(t)]},w:function(t){return["","",""][h(t)]},d:function(t){return["","",""][h(t)]},h:function(t){return["","",""][h(t)]},m:function(t){return["","",""][h(t)]},s:function(t){return["","",""][h(t)]},ms:function(t){return["","",""][h(t)]},decimal:","},ur:{y:"",mo:function(t){return t===1?"":""},w:function(t){return t===1?"":""},d:"",h:function(t){return t===1?"":""},m:"",s:"",ms:" ",decimal:"."},sk:{y:function(t){return["rok","roky","roky","rokov"][y(t)]},mo:function(t){return["mesiac","mesiace","mesiace","mesiacov"][y(t)]},w:function(t){return["tde","tdne","tdne","tdov"][y(t)]},d:function(t){return["de","dni","dni","dn"][y(t)]},h:function(t){return["hodina","hodiny","hodiny","hodn"][y(t)]},m:function(t){return["minta","minty","minty","mint"][y(t)]},s:function(t){return["sekunda","sekundy","sekundy","seknd"][y(t)]},ms:function(t){return["milisekunda","milisekundy","milisekundy","miliseknd"][y(t)]},decimal:","},sl:{y:function(t){return t%10==1?"leto":t%100==2?"leti":t%100==3||t%100==4||Math.floor(t)!==t&&t%100<=5?"leta":"let"},mo:function(t){return t%10==1?"mesec":t%100==2||Math.floor(t)!==t&&t%100<=5?"meseca":t%10==3||t%10==4?"mesece":"mesecev"},w:function(t){return t%10==1?"teden":t%10==2||Math.floor(t)!==t&&t%100<=4?"tedna":t%10==3||t%10==4?"tedne":"tednov"},d:function(t){return t%100==1?"dan":"dni"},h:function(t){return t%10==1?"ura":t%100==2?"uri":t%10==3||t%10==4||Math.floor(t)!==t?"ure":"ur"},m:function(t){return t%10==1?"minuta":t%10==2?"minuti":t%10==3||t%10==4||Math.floor(t)!==t&&t%100<=4?"minute":"minut"},s:function(t){return t%10==1?"sekunda":t%100==2?"sekundi":t%100==3||t%100==4||Math.floor(t)!==t?"sekunde":"sekund"},ms:function(t){return t%10==1?"milisekunda":t%100==2?"milisekundi":t%100==3||t%100==4||Math.floor(t)!==t?"milisekunde":"milisekund"},decimal:","},sv:{y:"r",mo:function(t){return"mnad"+(t===1?"":"er")},w:function(t){return"veck"+(t===1?"a":"or")},d:function(t){return"dag"+(t===1?"":"ar")},h:function(t){return"timm"+(t===1?"e":"ar")},m:function(t){return"minut"+(t===1?"":"er")},s:function(t){return"sekund"+(t===1?"":"er")},ms:function(t){return"millisekund"+(t===1?"":"er")},decimal:","},sw:{y:function(t){return t===1?"mwaka":"miaka"},mo:function(t){return t===1?"mwezi":"miezi"},w:"wiki",d:function(t){return t===1?"siku":"masiku"},h:function(t){return t===1?"saa":"masaa"},m:"dakika",s:"sekunde",ms:"milisekunde",decimal:".",_numberFirst:!0},tr:{y:"yl",mo:"ay",w:"hafta",d:"gn",h:"saat",m:"dakika",s:"saniye",ms:"milisaniye",decimal:","},th:{y:"",mo:"",w:"",d:"",h:"",m:"",s:"",ms:"",decimal:"."},vi:{y:"nm",mo:"thng",w:"tun",d:"ngy",h:"gi",m:"pht",s:"giy",ms:"mili giy",decimal:","},zh_CN:{y:"",mo:"",w:"",d:"",h:"",m:"",s:"",ms:"",decimal:"."},zh_TW:{y:"",mo:"",w:"",d:"",h:"",m:"",s:"",ms:"",decimal:"."}};function R(t){var u=function(m,S){return function(A,_){var v,f,b;A=Math.abs(A);var p,k,P,j=function(Ue){var ze=[Ue.language];if(r(Ue,"fallbacks")){if(!d(Ue.fallbacks)||!Ue.fallbacks.length)throw new Error("fallbacks must be an array with at least one element");ze=ze.concat(Ue.fallbacks)}for(var le=0;le<ze.length;le++){var Se=ze[le];if(r(Ue.languages,Se))return Ue.languages[Se];if(r(C,Se))return C[Se]}throw new Error("No language found.")}(_),U=[];for(v=0,f=_.units.length;v<f;v++){if(p=_.units[v],k=_.unitMeasures[p],v+1===f)if(r(_,"maxDecimalPoints")){var G=Math.pow(10,_.maxDecimalPoints),ee=A/k;P=parseFloat((Math.floor(G*ee)/G).toFixed(_.maxDecimalPoints))}else P=A/k;else P=Math.floor(A/k);U.push({unitCount:P,unitName:p}),A-=P*k}var ne,re,oe=0;for(v=0;v<U.length;v++)if(U[v].unitCount){oe=v;break}if(_.round)for(v=U.length-1;v>=0&&((b=U[v]).unitCount=Math.round(b.unitCount),v!==0);v--)re=U[v-1],ne=_.unitMeasures[re.unitName]/_.unitMeasures[b.unitName],(b.unitCount%ne==0||_.largest&&_.largest-1<v-oe)&&(re.unitCount+=b.unitCount/ne,b.unitCount=0);var W,Te=[];for(v=0,U.length;v<f&&((b=U[v]).unitCount&&Te.push(E(b.unitCount,b.unitName,j,_)),Te.length!==_.largest);v++);return Te.length?(W=r(_,"delimiter")?_.delimiter:r(j,"delimiter")?j.delimiter:", ",_.conjunction&&Te.length!==1?Te.length===2?Te.join(_.conjunction):Te.length>2?Te.slice(0,-1).join(W)+(_.serialComma?",":"")+_.conjunction+Te.slice(-1):void 0:Te.join(W)):E(0,_.units[_.units.length-1],j,_)}(m,T({},u,S||{}))};return T(u,{language:"en",spacer:" ",conjunction:"",serialComma:!0,units:["y","mo","w","d","h","m","s"],languages:{},round:!1,unitMeasures:{y:315576e5,mo:26298e5,w:6048e5,d:864e5,h:36e5,m:6e4,s:1e3,ms:1}},t)}var I=R({});function E(t,u,m,S){var A,_;A=r(S,"decimal")?S.decimal:r(m,"decimal")?m.decimal:".",_=typeof m._formatCount=="function"?m._formatCount(t,A):t.toString().replace(".",A);var v,f=m[u];return v=typeof f=="function"?f(t):f,m._numberFirst?v+S.spacer+_:_+S.spacer+v}function T(t){for(var u,m=1;m<arguments.length;m++)for(var S in u=arguments[m])r(u,S)&&(t[S]=u[S]);return t}function l(t){return t===1?0:t===2?1:t>2&&t<11?2:0}function c(t){return t===1?0:Math.floor(t)!==t?1:t%10>=2&&t%10<=4&&!(t%100>10&&t%100<20)?2:3}function h(t){return Math.floor(t)!==t?2:t%100>=5&&t%100<=20||t%10>=5&&t%10<=9||t%10==0?0:t%10==1?1:t>1?2:0}function y(t){return t===1?0:Math.floor(t)!==t?1:t%10>=2&&t%10<=4&&t%100<10?2:3}function i(t){return t===1||t%10==1&&t%100>20?0:Math.floor(t)!==t||t%10>=2&&t%100>20||t%10>=2&&t%100<10?1:2}function g(t){return t%10==1&&t%100!=11}var d=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function r(t,u){return Object.prototype.hasOwnProperty.call(t,u)}I.getSupportedLanguages=function(){var t=[];for(var u in C)r(C,u)&&u!=="gr"&&t.push(u);return t},I.humanizer=R,(M=(function(){return I}).call(B,K,B,Ee))===void 0||(Ee.exports=M)})()},1344:(Ee,B,K)=>{Ee=K.nmd(Ee);var M="__lodash_hash_undefined__",x=9007199254740991,N="[object Arguments]",C="[object AsyncFunction]",R="[object Function]",I="[object GeneratorFunction]",E="[object Null]",T="[object Object]",l="[object Proxy]",c="[object Undefined]",h=/^\[object .+?Constructor\]$/,y=/^(?:0|[1-9]\d*)$/,i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i[N]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i[R]=i["[object Map]"]=i["[object Number]"]=i[T]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1;var g,d,r,t=typeof K.g=="object"&&K.g&&K.g.Object===Object&&K.g,u=typeof self=="object"&&self&&self.Object===Object&&self,m=t||u||Function("return this")(),S=B&&!B.nodeType&&B,A=S&&Ee&&!Ee.nodeType&&Ee,_=A&&A.exports===S,v=_&&t.process,f=function(){try{return A&&A.require&&A.require("util").types||v&&v.binding&&v.binding("util")}catch{}}(),b=f&&f.isTypedArray,p=Array.prototype,k=Function.prototype,P=Object.prototype,j=m["__core-js_shared__"],U=k.toString,G=P.hasOwnProperty,ee=(g=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",ne=P.toString,re=U.call(Object),oe=RegExp("^"+U.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),W=_?m.Buffer:void 0,Te=m.Symbol,Ue=m.Uint8Array,ze=(W&&W.allocUnsafe,d=Object.getPrototypeOf,r=Object,function(pt){return d(r(pt))}),le=Object.create,Se=P.propertyIsEnumerable,be=p.splice,Y=Te?Te.toStringTag:void 0,Q=function(){try{var pt=Tt(Object,"defineProperty");return pt({},"",{}),pt}catch{}}(),J=W?W.isBuffer:void 0,fe=Math.max,Ce=Date.now,V=Tt(m,"Map"),H=Tt(Object,"create"),z=function(){function pt(){}return function(wt){if(!Ir(wt))return{};if(le)return le(wt);pt.prototype=wt;var Dt=new pt;return pt.prototype=void 0,Dt}}();function X(pt){var wt=-1,Dt=pt==null?0:pt.length;for(this.clear();++wt<Dt;){var Vt=pt[wt];this.set(Vt[0],Vt[1])}}function de(pt){var wt=-1,Dt=pt==null?0:pt.length;for(this.clear();++wt<Dt;){var Vt=pt[wt];this.set(Vt[0],Vt[1])}}function ge(pt){var wt=-1,Dt=pt==null?0:pt.length;for(this.clear();++wt<Dt;){var Vt=pt[wt];this.set(Vt[0],Vt[1])}}function Ge(pt){var wt=this.__data__=new de(pt);this.size=wt.size}function it(pt,wt,Dt){(Dt!==void 0&&!hn(pt[wt],Dt)||Dt===void 0&&!(wt in pt))&&dt(pt,wt,Dt)}function Ye(pt,wt,Dt){var Vt=pt[wt];G.call(pt,wt)&&hn(Vt,Dt)&&(Dt!==void 0||wt in pt)||dt(pt,wt,Dt)}function Ke(pt,wt){for(var Dt=pt.length;Dt--;)if(hn(pt[Dt][0],wt))return Dt;return-1}function dt(pt,wt,Dt){wt=="__proto__"&&Q?Q(pt,wt,{configurable:!0,enumerable:!0,value:Dt,writable:!0}):pt[wt]=Dt}X.prototype.clear=function(){this.__data__=H?H(null):{},this.size=0},X.prototype.delete=function(pt){var wt=this.has(pt)&&delete this.__data__[pt];return this.size-=wt?1:0,wt},X.prototype.get=function(pt){var wt=this.__data__;if(H){var Dt=wt[pt];return Dt===M?void 0:Dt}return G.call(wt,pt)?wt[pt]:void 0},X.prototype.has=function(pt){var wt=this.__data__;return H?wt[pt]!==void 0:G.call(wt,pt)},X.prototype.set=function(pt,wt){var Dt=this.__data__;return this.size+=this.has(pt)?0:1,Dt[pt]=H&&wt===void 0?M:wt,this},de.prototype.clear=function(){this.__data__=[],this.size=0},de.prototype.delete=function(pt){var wt=this.__data__,Dt=Ke(wt,pt);return!(Dt<0||(Dt==wt.length-1?wt.pop():be.call(wt,Dt,1),--this.size,0))},de.prototype.get=function(pt){var wt=this.__data__,Dt=Ke(wt,pt);return Dt<0?void 0:wt[Dt][1]},de.prototype.has=function(pt){return Ke(this.__data__,pt)>-1},de.prototype.set=function(pt,wt){var Dt=this.__data__,Vt=Ke(Dt,pt);return Vt<0?(++this.size,Dt.push([pt,wt])):Dt[Vt][1]=wt,this},ge.prototype.clear=function(){this.size=0,this.__data__={hash:new X,map:new(V||de),string:new X}},ge.prototype.delete=function(pt){var wt=nt(this,pt).delete(pt);return this.size-=wt?1:0,wt},ge.prototype.get=function(pt){return nt(this,pt).get(pt)},ge.prototype.has=function(pt){return nt(this,pt).has(pt)},ge.prototype.set=function(pt,wt){var Dt=nt(this,pt),Vt=Dt.size;return Dt.set(pt,wt),this.size+=Dt.size==Vt?0:1,this},Ge.prototype.clear=function(){this.__data__=new de,this.size=0},Ge.prototype.delete=function(pt){var wt=this.__data__,Dt=wt.delete(pt);return this.size=wt.size,Dt},Ge.prototype.get=function(pt){return this.__data__.get(pt)},Ge.prototype.has=function(pt){return this.__data__.has(pt)},Ge.prototype.set=function(pt,wt){var Dt=this.__data__;if(Dt instanceof de){var Vt=Dt.__data__;if(!V||Vt.length<199)return Vt.push([pt,wt]),this.size=++Dt.size,this;Dt=this.__data__=new ge(Vt)}return Dt.set(pt,wt),this.size=Dt.size,this};function me(pt){return pt==null?pt===void 0?c:E:Y&&Y in Object(pt)?function(wt){var Dt=G.call(wt,Y),Vt=wt[Y];try{wt[Y]=void 0;var Wt=!0}catch{}var fn=ne.call(wt);return Wt&&(Dt?wt[Y]=Vt:delete wt[Y]),fn}(pt):function(wt){return ne.call(wt)}(pt)}function ke(pt){return nn(pt)&&me(pt)==N}function Je(pt,wt,Dt,Vt,Wt){pt!==wt&&function(fn,ht,jn){for(var vn=-1,fr=Object(fn),Sr=jn(fn),Zr=Sr.length;Zr--;){var zn=Sr[++vn];if(ht(fr[zn],zn,fr)===!1)break}}(wt,function(fn,ht){if(Wt||(Wt=new Ge),Ir(fn))(function(vn,fr,Sr,Zr,zn,gn,En){var Nn=pn(vn,Sr),pr=pn(fr,Sr),Or=En.get(pr);if(Or)it(vn,Sr,Or);else{var ci,di,Fi,Ni,Ui,Ri=gn?gn(Nn,pr,Sr+"",vn,fr,En):void 0,_i=Ri===void 0;if(_i){var ki=on(pr),Za=!ki&&Bn(pr),Oa=!ki&&!Za&&rn(pr);Ri=pr,ki||Za||Oa?on(Nn)?Ri=Nn:nn(Ui=Nn)&&Zn(Ui)?Ri=function(Bi,Tr){var ji=-1,fo=Bi.length;for(Tr||(Tr=Array(fo));++ji<fo;)Tr[ji]=Bi[ji];return Tr}(Nn):Za?(_i=!1,Ri=function(Bi,Tr){return Bi.slice()}(pr)):Oa?(_i=!1,Ni=new(Fi=(ci=pr).buffer).constructor(Fi.byteLength),new Ue(Ni).set(new Ue(Fi)),di=Ni,Ri=new ci.constructor(di,ci.byteOffset,ci.length)):Ri=[]:function(Bi){if(!nn(Bi)||me(Bi)!=T)return!1;var Tr=ze(Bi);if(Tr===null)return!0;var ji=G.call(Tr,"constructor")&&Tr.constructor;return typeof ji=="function"&&ji instanceof ji&&U.call(ji)==re}(pr)||Xn(pr)?(Ri=Nn,Xn(Nn)?Ri=function(Bi){return function(Tr,ji,fo,xi){var bo=!fo;fo||(fo={});for(var ho=-1,ni=ji.length;++ho<ni;){var kn=ji[ho],nr=void 0;nr===void 0&&(nr=Tr[kn]),bo?dt(fo,kn,nr):Ye(fo,kn,nr)}return fo}(Bi,$t(Bi))}(Nn):Ir(Nn)&&!Rr(Nn)||(Ri=function(Bi){return typeof Bi.constructor!="function"||Ft(Bi)?{}:z(ze(Bi))}(pr))):_i=!1}_i&&(En.set(pr,Ri),zn(Ri,pr,Zr,gn,En),En.delete(pr)),it(vn,Sr,Ri)}})(pt,wt,ht,Dt,Je,Vt,Wt);else{var jn=Vt?Vt(pn(pt,ht),fn,ht+"",pt,wt,Wt):void 0;jn===void 0&&(jn=fn),it(pt,ht,jn)}},$t)}var Xe=Q?function(pt,wt){return Q(pt,"toString",{configurable:!0,enumerable:!1,value:(Dt=wt,function(){return Dt}),writable:!0});var Dt}:_t;function nt(pt,wt){var Dt,Vt,Wt=pt.__data__;return((Vt=typeof(Dt=wt))=="string"||Vt=="number"||Vt=="symbol"||Vt=="boolean"?Dt!=="__proto__":Dt===null)?Wt[typeof wt=="string"?"string":"hash"]:Wt.map}function Tt(pt,wt){var Dt=function(Vt,Wt){return Vt==null?void 0:Vt[Wt]}(pt,wt);return function(Vt){return!(!Ir(Vt)||function(Wt){return!!ee&&ee in Wt}(Vt))&&(Rr(Vt)?oe:h).test(function(Wt){if(Wt!=null){try{return U.call(Wt)}catch{}try{return Wt+""}catch{}}return""}(Vt))}(Dt)?Dt:void 0}function bt(pt,wt){var Dt=typeof pt;return!!(wt=wt??x)&&(Dt=="number"||Dt!="symbol"&&y.test(pt))&&pt>-1&&pt%1==0&&pt<wt}function Ft(pt){var wt=pt&&pt.constructor;return pt===(typeof wt=="function"&&wt.prototype||P)}function pn(pt,wt){if((wt!=="constructor"||typeof pt[wt]!="function")&&wt!="__proto__")return pt[wt]}var wn=function(pt){var wt=0,Dt=0;return function(){var Vt=Ce(),Wt=16-(Vt-Dt);if(Dt=Vt,Wt>0){if(++wt>=800)return arguments[0]}else wt=0;return pt.apply(void 0,arguments)}}(Xe);function hn(pt,wt){return pt===wt||pt!=pt&&wt!=wt}var Xn=ke(function(){return arguments}())?ke:function(pt){return nn(pt)&&G.call(pt,"callee")&&!Se.call(pt,"callee")},on=Array.isArray;function Zn(pt){return pt!=null&&Nr(pt.length)&&!Rr(pt)}var Bn=J||function(){return!1};function Rr(pt){if(!Ir(pt))return!1;var wt=me(pt);return wt==R||wt==I||wt==C||wt==l}function Nr(pt){return typeof pt=="number"&&pt>-1&&pt%1==0&&pt<=x}function Ir(pt){var wt=typeof pt;return pt!=null&&(wt=="object"||wt=="function")}function nn(pt){return pt!=null&&typeof pt=="object"}var rn=b?function(pt){return function(wt){return pt(wt)}}(b):function(pt){return nn(pt)&&Nr(pt.length)&&!!i[me(pt)]};function $t(pt){return Zn(pt)?function(wt,Dt){var Vt=on(wt),Wt=!Vt&&Xn(wt),fn=!Vt&&!Wt&&Bn(wt),ht=!Vt&&!Wt&&!fn&&rn(wt),jn=Vt||Wt||fn||ht,vn=jn?function(Zr,zn){for(var gn=-1,En=Array(Zr);++gn<Zr;)En[gn]=zn(gn);return En}(wt.length,String):[],fr=vn.length;for(var Sr in wt)!Dt&&!G.call(wt,Sr)||jn&&(Sr=="length"||fn&&(Sr=="offset"||Sr=="parent")||ht&&(Sr=="buffer"||Sr=="byteLength"||Sr=="byteOffset")||bt(Sr,fr))||vn.push(Sr);return vn}(pt,!0):function(wt){if(!Ir(wt))return function(fn){var ht=[];if(fn!=null)for(var jn in Object(fn))ht.push(jn);return ht}(wt);var Dt=Ft(wt),Vt=[];for(var Wt in wt)(Wt!="constructor"||!Dt&&G.call(wt,Wt))&&Vt.push(Wt);return Vt}(pt)}var Nt,en=(Nt=function(pt,wt,Dt){Je(pt,wt,Dt)},function(pt,wt){return wn(function(Dt,Vt,Wt){return Vt=fe(Vt===void 0?Dt.length-1:Vt,0),function(){for(var fn=arguments,ht=-1,jn=fe(fn.length-Vt,0),vn=Array(jn);++ht<jn;)vn[ht]=fn[Vt+ht];ht=-1;for(var fr=Array(Vt+1);++ht<Vt;)fr[ht]=fn[ht];return fr[Vt]=Wt(vn),function(Sr,Zr,zn){switch(zn.length){case 0:return Sr.call(Zr);case 1:return Sr.call(Zr,zn[0]);case 2:return Sr.call(Zr,zn[0],zn[1]);case 3:return Sr.call(Zr,zn[0],zn[1],zn[2])}return Sr.apply(Zr,zn)}(Dt,this,fr)}}(pt,wt,_t),pt+"")}(function(pt,wt){var Dt=-1,Vt=wt.length,Wt=Vt>1?wt[Vt-1]:void 0,fn=Vt>2?wt[2]:void 0;for(Wt=Nt.length>3&&typeof Wt=="function"?(Vt--,Wt):void 0,fn&&function(jn,vn,fr){if(!Ir(fr))return!1;var Sr=typeof vn;return!!(Sr=="number"?Zn(fr)&&bt(vn,fr.length):Sr=="string"&&vn in fr)&&hn(fr[vn],jn)}(wt[0],wt[1],fn)&&(Wt=Vt<3?void 0:Wt,Vt=1),pt=Object(pt);++Dt<Vt;){var ht=wt[Dt];ht&&Nt(pt,ht,Dt)}return pt}));function _t(pt){return pt}Ee.exports=en},8357:(Ee,B,K)=>{var M="Expected a function",x=NaN,N="[object Symbol]",C=/^\s+|\s+$/g,R=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,E=/^0o[0-7]+$/i,T=parseInt,l=typeof K.g=="object"&&K.g&&K.g.Object===Object&&K.g,c=typeof self=="object"&&self&&self.Object===Object&&self,h=l||c||Function("return this")(),y=Object.prototype.toString,i=Math.max,g=Math.min,d=function(){return h.Date.now()};function r(u){var m=typeof u;return!!u&&(m=="object"||m=="function")}function t(u){if(typeof u=="number")return u;if(function(A){return typeof A=="symbol"||function(_){return!!_&&typeof _=="object"}(A)&&y.call(A)==N}(u))return x;if(r(u)){var m=typeof u.valueOf=="function"?u.valueOf():u;u=r(m)?m+"":m}if(typeof u!="string")return u===0?u:+u;u=u.replace(C,"");var S=I.test(u);return S||E.test(u)?T(u.slice(2),S?2:8):R.test(u)?x:+u}Ee.exports=function(u,m,S){var A=!0,_=!0;if(typeof u!="function")throw new TypeError(M);return r(S)&&(A="leading"in S?!!S.leading:A,_="trailing"in S?!!S.trailing:_),function(v,f,b){var p,k,P,j,U,G,ee=0,ne=!1,re=!1,oe=!0;if(typeof v!="function")throw new TypeError(M);function W(Se){var be=p,Y=k;return p=k=void 0,ee=Se,j=v.apply(Y,be)}function Te(Se){var be=Se-G;return G===void 0||be>=f||be<0||re&&Se-ee>=P}function Ue(){var Se=d();if(Te(Se))return ze(Se);U=setTimeout(Ue,function(be){var Y=f-(be-G);return re?g(Y,P-(be-ee)):Y}(Se))}function ze(Se){return U=void 0,oe&&p?W(Se):(p=k=void 0,j)}function le(){var Se=d(),be=Te(Se);if(p=arguments,k=this,G=Se,be){if(U===void 0)return function(Y){return ee=Y,U=setTimeout(Ue,f),ne?W(Y):j}(G);if(re)return U=setTimeout(Ue,f),W(G)}return U===void 0&&(U=setTimeout(Ue,f)),j}return f=t(f)||0,r(b)&&(ne=!!b.leading,P=(re="maxWait"in b)?i(t(b.maxWait)||0,f):P,oe="trailing"in b?!!b.trailing:oe),le.cancel=function(){U!==void 0&&clearTimeout(U),ee=0,p=G=k=U=void 0},le.flush=function(){return U===void 0?j:ze(d())},le}(u,m,{leading:A,maxWait:m,trailing:_})}},5790:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M9,5A4,4 0 0,1 13,9A4,4 0 0,1 9,13A4,4 0 0,1 5,9A4,4 0 0,1 9,5M9,15C11.67,15 17,16.34 17,19V21H1V19C1,16.34 6.33,15 9,15M16.76,5.36C18.78,7.56 18.78,10.61 16.76,12.63L15.08,10.94C15.92,9.76 15.92,8.23 15.08,7.05L16.76,5.36M20.07,2C24,6.05 23.97,12.11 20.07,16L18.44,14.37C21.21,11.19 21.21,6.65 18.44,3.63L20.07,2Z"}))}},1132:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M6,22H18L12,16M21,3H3A2,2 0 0,0 1,5V17A2,2 0 0,0 3,19H7V17H3V5H21V17H17V19H21A2,2 0 0,0 23,17V5A2,2 0 0,0 21,3Z"}))}},6032:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M1,10V12A9,9 0 0,1 10,21H12C12,14.92 7.07,10 1,10M1,14V16A5,5 0 0,1 6,21H8A7,7 0 0,0 1,14M1,18V21H4A3,3 0 0,0 1,18M21,3H3C1.89,3 1,3.89 1,5V8H3V5H21V19H14V21H21A2,2 0 0,0 23,19V5C23,3.89 22.1,3 21,3Z"}))}},4849:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}))}},138:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"}))}},1664:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7,9.5C7,8.7 7.7,8 8.5,8C9.3,8 10,8.7 10,9.5C10,10.3 9.3,11 8.5,11C7.7,11 7,10.3 7,9.5M14.77,17.23C14.32,16.5 13.25,16 12,16C10.75,16 9.68,16.5 9.23,17.23L7.81,15.81C8.71,14.72 10.25,14 12,14C13.75,14 15.29,14.72 16.19,15.81L14.77,17.23M15.5,11C14.7,11 14,10.3 14,9.5C14,8.7 14.7,8 15.5,8C16.3,8 17,8.7 17,9.5C17,10.3 16.3,11 15.5,11Z"}))}},5650:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M10,12V22H8V14H6V12H10M18,14V20C18,21.11 17.11,22 16,22H14A2,2 0 0,1 12,20V14A2,2 0 0,1 14,12H16C17.11,12 18,12.9 18,14M14,14V20H16V14H14M11.5,3C14.15,3 16.55,4 18.4,5.6L21,3V10H14L16.62,7.38C15.23,6.22 13.46,5.5 11.5,5.5C7.96,5.5 4.95,7.81 3.9,11L1.53,10.22C2.92,6.03 6.85,3 11.5,3Z"}))}},8571:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z"}))}},8269:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z"}))}},2482:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z"}))}},1316:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M10.59,13.41C11,13.8 11,14.44 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C7.22,12.88 7.22,9.71 9.17,7.76V7.76L12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.59,9.17C9.41,10.34 9.41,12.24 10.59,13.41M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.78,11.12 16.78,14.29 14.83,16.24V16.24L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L13.41,14.83C14.59,13.66 14.59,11.76 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z"}))}},5639:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z"}))}},99:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M12 19C12 19.34 12.03 19.67 12.08 20H4C2.9 20 2 19.11 2 18V6C2 4.89 2.9 4 4 4H5L7 8H10L8 4H10L12 8H15L13 4H15L17 8H20L18 4H22V12.68C21.09 12.25 20.08 12 19 12C15.13 12 12 15.13 12 19M23.8 20.4C23.9 20.4 23.9 20.5 23.8 20.6L22.8 22.3C22.7 22.4 22.6 22.4 22.5 22.4L21.3 22C21 22.2 20.8 22.3 20.5 22.5L20.3 23.8C20.3 23.9 20.2 24 20.1 24H18.1C18 24 17.9 23.9 17.8 23.8L17.6 22.5C17.3 22.4 17 22.2 16.8 22L15.6 22.5C15.5 22.5 15.4 22.5 15.3 22.4L14.3 20.7C14.2 20.6 14.3 20.5 14.4 20.4L15.5 19.6V18.6L14.4 17.8C14.3 17.7 14.3 17.6 14.3 17.5L15.3 15.8C15.4 15.7 15.5 15.7 15.6 15.7L16.8 16.2C17.1 16 17.3 15.9 17.6 15.7L17.8 14.4C17.8 14.3 17.9 14.2 18.1 14.2H20.1C20.2 14.2 20.3 14.3 20.3 14.4L20.5 15.7C20.8 15.8 21.1 16 21.4 16.2L22.6 15.7C22.7 15.7 22.9 15.7 22.9 15.8L23.9 17.5C24 17.6 23.9 17.7 23.8 17.8L22.7 18.6V19.6L23.8 20.4M20.5 19C20.5 18.2 19.8 17.5 19 17.5S17.5 18.2 17.5 19 18.2 20.5 19 20.5 20.5 19.8 20.5 19Z"}))}},3713:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M14,19H18V5H14M6,19H10V5H6V19Z"}))}},7949:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M19,7H11V13H19V7M21,3H3A2,2 0 0,0 1,5V19A2,2 0 0,0 3,21H21A2,2 0 0,0 23,19V5A2,2 0 0,0 21,3M21,19H3V5H21V19Z"}))}},4085:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M8,5.14V19.14L19,12.14L8,5.14Z"}))}},3407:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M12.5,3C17.15,3 21.08,6.03 22.47,10.22L20.1,11C19.05,7.81 16.04,5.5 12.5,5.5C10.54,5.5 8.77,6.22 7.38,7.38L10,10H3V3L5.6,5.6C7.45,4 9.85,3 12.5,3M10,12V22H8V14H6V12H10M18,14V20C18,21.11 17.11,22 16,22H14A2,2 0 0,1 12,20V14A2,2 0 0,1 14,12H16C17.11,12 18,12.9 18,14M14,14V20H16V14H14Z"}))}},5300:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M16,18H18V6H16M6,18L14.5,12L6,6V18Z"}))}},2046:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M18,18H6V6H18V18Z"}))}},7414:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M20,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6A2,2 0 0,0 20,4M4,12H8V14H4V12M14,18H4V16H14V18M20,18H16V16H20V18M20,14H10V12H20V14Z"}))}},2640:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M20,4A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4H20M20,18V6H4V18H20M6,10H8V12H6V10M6,14H14V16H6V14M16,14H18V16H16V14M10,10H18V12H10V10Z"}))}},1904:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z"}))}},1610:(Ee,B,K)=>{var M=K(3847),x=Object.assign||function(N){for(var C=1;C<arguments.length;C++){var R=arguments[C];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(N[I]=R[I])}return N};Ee.exports=function(N){var C=N.color,R=C===void 0?"currentColor":C,I=N.size,E=I===void 0?24:I,T=(N.children,function(c,h){var y={};for(var i in c)h.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(c,i)&&(y[i]=c[i]);return y}(N,["color","size","children"])),l="mdi-icon "+(T.class||T.className||"");return M.h("svg",x({},T,{class:l,width:E,height:E,fill:R,viewBox:"0 0 24 24"}),M.h("path",{d:"M3,9H7L12,4V20L7,15H3V9M16.59,12L14,9.41L15.41,8L18,10.59L20.59,8L22,9.41L19.41,12L22,14.59L20.59,16L18,13.41L15.41,16L14,14.59L16.59,12Z"}))}},6325:(Ee,B,K)=>{K.r(B)},837:Ee=>{Ee.exports=function(B){return{all:B=B||new Map,on:function(K,M){var x=B.get(K);x?x.push(M):B.set(K,[M])},off:function(K,M){var x=B.get(K);x&&(M?x.splice(x.indexOf(M)>>>0,1):B.set(K,[]))},emit:function(K,M){var x=B.get(K);x&&x.slice().map(function(N){N(M)}),(x=B.get("*"))&&x.slice().map(function(N){N(K,M)})}}}},9653:function(Ee,B,K){var M;Ee=K.nmd(Ee),(function(){var x={function:!0,object:!0},N=x[typeof window]&&window||this,C=x[typeof B]&&B,R=Ee&&!Ee.nodeType&&Ee,I=C&&R&&typeof K.g=="object"&&K.g;!I||I.global!==I&&I.window!==I&&I.self!==I||(N=I);var E=Math.pow(2,53)-1,T=/\bOpera/,l=Object.prototype,c=l.hasOwnProperty,h=l.toString;function y(S){return(S=String(S)).charAt(0).toUpperCase()+S.slice(1)}function i(S){return S=u(S),/^(?:webOS|i(?:OS|P))/.test(S)?S:y(S)}function g(S,A){for(var _ in S)c.call(S,_)&&A(S[_],_,S)}function d(S){return S==null?y(S):h.call(S).slice(8,-1)}function r(S){return String(S).replace(/([ -])(?!$)/g,"$1?")}function t(S,A){var _=null;return function(v,f){var b=-1,p=v?v.length:0;if(typeof p=="number"&&p>-1&&p<=E)for(;++b<p;)f(v[b],b);else g(v,f)}(S,function(v,f){_=A(_,v,f,S)}),_}function u(S){return String(S).replace(/^ +| +$/g,"")}var m=function S(A){var _=N,v=A&&typeof A=="object"&&d(A)!="String";v&&(_=A,A=null);var f=_.navigator||{},b=f.userAgent||"";A||(A=b);var p,k,P,j,U,G=v?!!f.likeChrome:/\bChrome\b/.test(A)&&!/internal|\n/i.test(h.toString()),ee="Object",ne=v?ee:"ScriptBridgingProxyObject",re=v?ee:"Environment",oe=v&&_.java?"JavaPackage":d(_.java),W=v?ee:"RuntimeObject",Te=/\bJava/.test(oe)&&_.java,Ue=Te&&d(_.environment)==re,ze=Te?"a":"",le=Te?"b":"",Se=_.document||{},be=_.operamini||_.opera,Y=T.test(Y=v&&be?be["[[Class]]"]:d(be))?Y:be=null,Q=A,J=[],fe=null,Ce=A==b,V=Ce&&be&&typeof be.version=="function"&&be.version(),H=t([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(Ke,dt){return Ke||RegExp("\\b"+(dt.pattern||r(dt))+"\\b","i").exec(A)&&(dt.label||dt)}),z=t(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(Ke,dt){return Ke||RegExp("\\b"+(dt.pattern||r(dt))+"\\b","i").exec(A)&&(dt.label||dt)}),X=Ge([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),de=t({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}},function(Ke,dt,me){return Ke||(dt[X]||dt[/^[a-z]+(?: +[a-z]+\b)*/i.exec(X)]||RegExp("\\b"+r(me)+"(?:\\b|\\w*\\d)","i").exec(A))&&me}),ge=t(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(Ke,dt){var me=dt.pattern||r(dt);return!Ke&&(Ke=RegExp("\\b"+me+"(?:/[\\d.]+|[ \\w.]*)","i").exec(A))&&(Ke=function(ke,Je,Xe){var nt={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return Je&&Xe&&/^Win/i.test(ke)&&!/^Windows Phone /i.test(ke)&&(nt=nt[/[\d.]+$/.exec(ke)])&&(ke="Windows "+nt),ke=String(ke),Je&&Xe&&(ke=ke.replace(RegExp(Je,"i"),Xe)),i(ke.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(Ke,me,dt.label||dt)),Ke});function Ge(Ke){return t(Ke,function(dt,me){var ke=me.pattern||r(me);return!dt&&(dt=RegExp("\\b"+ke+" *\\d+[.\\w_]*","i").exec(A)||RegExp("\\b"+ke+" *\\w+-[\\w]*","i").exec(A)||RegExp("\\b"+ke+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(A))&&((dt=String(me.label&&!RegExp(ke,"i").test(me.label)?me.label:dt).split("/"))[1]&&!/[\d.]+/.test(dt[0])&&(dt[0]+=" "+dt[1]),me=me.label||me,dt=i(dt[0].replace(RegExp(ke,"i"),me).replace(RegExp("; *(?:"+me+"[_-])?","i")," ").replace(RegExp("("+me+")[-_.]?(\\w)","i"),"$1 $2"))),dt})}function it(Ke){return t(Ke,function(dt,me){return dt||(RegExp(me+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(A)||0)[1]||null})}if(H&&(H=[H]),/\bAndroid\b/.test(ge)&&!X&&(p=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(A))&&(X=u(p[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),de&&!X?X=Ge([de]):de&&X&&(X=X.replace(RegExp("^("+r(de)+")[-_.\\s]","i"),de+" ").replace(RegExp("^("+r(de)+")[-_.]?(\\w)","i"),de+" $2")),(p=/\bGoogle TV\b/.exec(X))&&(X=p[0]),/\bSimulator\b/i.test(A)&&(X=(X?X+" ":"")+"Simulator"),z=="Opera Mini"&&/\bOPiOS\b/.test(A)&&J.push("running in Turbo/Uncompressed mode"),z=="IE"&&/\blike iPhone OS\b/.test(A)?(de=(p=S(A.replace(/like iPhone OS/,""))).manufacturer,X=p.product):/^iP/.test(X)?(z||(z="Safari"),ge="iOS"+((p=/ OS ([\d_]+)/i.exec(A))?" "+p[1].replace(/_/g,"."):"")):z=="Konqueror"&&/^Linux\b/i.test(ge)?ge="Kubuntu":de&&de!="Google"&&(/Chrome/.test(z)&&!/\bMobile Safari\b/i.test(A)||/\bVita\b/.test(X))||/\bAndroid\b/.test(ge)&&/^Chrome/.test(z)&&/\bVersion\//i.test(A)?(z="Android Browser",ge=/\bAndroid\b/.test(ge)?ge:"Android"):z=="Silk"?(/\bMobi/i.test(A)||(ge="Android",J.unshift("desktop mode")),/Accelerated *= *true/i.test(A)&&J.unshift("accelerated")):z=="UC Browser"&&/\bUCWEB\b/.test(A)?J.push("speed mode"):z=="PaleMoon"&&(p=/\bFirefox\/([\d.]+)\b/.exec(A))?J.push("identifying as Firefox "+p[1]):z=="Firefox"&&(p=/\b(Mobile|Tablet|TV)\b/i.exec(A))?(ge||(ge="Firefox OS"),X||(X=p[1])):!z||(p=!/\bMinefield\b/i.test(A)&&/\b(?:Firefox|Safari)\b/.exec(z))?(z&&!X&&/[\/,]|^[^(]+?\)/.test(A.slice(A.indexOf(p+"/")+8))&&(z=null),(p=X||de||ge)&&(X||de||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(ge))&&(z=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(ge)?ge:p)+" Browser")):z=="Electron"&&(p=(/\bChrome\/([\d.]+)\b/.exec(A)||0)[1])&&J.push("Chromium "+p),V||(V=it(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",r(z),"(?:Firefox|Minefield|NetFront)"])),(p=(H=="iCab"&&parseFloat(V)>3?"WebKit":/\bOpera\b/.test(z)&&(/\bOPR\b/.test(A)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(A)&&!/^(?:Trident|EdgeHTML)$/.test(H)&&"WebKit"||!H&&/\bMSIE\b/i.test(A)&&(ge=="Mac OS"?"Tasman":"Trident")||H=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(z)&&"NetFront")&&(H=[p]),z=="IE"&&(p=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(A)||0)[1])?(z+=" Mobile",ge="Windows Phone "+(/\+$/.test(p)?p:p+".x"),J.unshift("desktop mode")):/\bWPDesktop\b/i.test(A)?(z="IE Mobile",ge="Windows Phone 8.x",J.unshift("desktop mode"),V||(V=(/\brv:([\d.]+)/.exec(A)||0)[1])):z!="IE"&&H=="Trident"&&(p=/\brv:([\d.]+)/.exec(A))&&(z&&J.push("identifying as "+z+(V?" "+V:"")),z="IE",V=p[1]),Ce){if(j="global",U=(P=_)!=null?typeof P[j]:"number",/^(?:boolean|number|string|undefined)$/.test(U)||U=="object"&&!P[j])d(p=_.runtime)==ne?(z="Adobe AIR",ge=p.flash.system.Capabilities.os):d(p=_.phantom)==W?(z="PhantomJS",V=(p=p.version||null)&&p.major+"."+p.minor+"."+p.patch):typeof Se.documentMode=="number"&&(p=/\bTrident\/(\d+)/i.exec(A))?(V=[V,Se.documentMode],(p=+p[1]+4)!=V[1]&&(J.push("IE "+V[1]+" mode"),H&&(H[1]=""),V[1]=p),V=z=="IE"?String(V[1].toFixed(1)):V[0]):typeof Se.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(z)&&(J.push("masking as "+z+" "+V),z="IE",V="11.0",H=["Trident"],ge="Windows");else if(Te&&(Q=(p=Te.lang.System).getProperty("os.arch"),ge=ge||p.getProperty("os.name")+" "+p.getProperty("os.version")),Ue){try{V=_.require("ringo/engine").version.join("."),z="RingoJS"}catch{(p=_.system)&&p.global.system==_.system&&(z="Narwhal",ge||(ge=p[0].os||null))}z||(z="Rhino")}else typeof _.process=="object"&&!_.process.browser&&(p=_.process)&&(typeof p.versions=="object"&&(typeof p.versions.electron=="string"?(J.push("Node "+p.versions.node),z="Electron",V=p.versions.electron):typeof p.versions.nw=="string"&&(J.push("Chromium "+V,"Node "+p.versions.node),z="NW.js",V=p.versions.nw)),z||(z="Node.js",Q=p.arch,ge=p.platform,V=(V=/[\d.]+/.exec(p.version))?V[0]:null));ge=ge&&i(ge)}if(V&&(p=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(V)||/(?:alpha|beta)(?: ?\d)?/i.exec(A+";"+(Ce&&f.appMinorVersion))||/\bMinefield\b/i.test(A)&&"a")&&(fe=/b/i.test(p)?"beta":"alpha",V=V.replace(RegExp(p+"\\+?$"),"")+(fe=="beta"?le:ze)+(/\d+\+?/.exec(p)||"")),z=="Fennec"||z=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(ge))z="Firefox Mobile";else if(z=="Maxthon"&&V)V=V.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(X))X=="Xbox 360"&&(ge=null),X=="Xbox 360"&&/\bIEMobile\b/.test(A)&&J.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(z)&&(!z||X||/Browser|Mobi/.test(z))||ge!="Windows CE"&&!/Mobi/i.test(A))if(z=="IE"&&Ce)try{_.external===null&&J.unshift("platform preview")}catch{J.unshift("embedded")}else(/\bBlackBerry\b/.test(X)||/\bBB10\b/.test(A))&&(p=(RegExp(X.replace(/ +/g," *")+"/([.\\d]+)","i").exec(A)||0)[1]||V)?(ge=((p=[p,/BB10/.test(A)])[1]?(X=null,de="BlackBerry"):"Device Software")+" "+p[0],V=null):this!=g&&X!="Wii"&&(Ce&&be||/Opera/.test(z)&&/\b(?:MSIE|Firefox)\b/i.test(A)||z=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(ge)||z=="IE"&&(ge&&!/^Win/.test(ge)&&V>5.5||/\bWindows XP\b/.test(ge)&&V>8||V==8&&!/\bTrident\b/.test(A)))&&!T.test(p=S.call(g,A.replace(T,"")+";"))&&p.name&&(p="ing as "+p.name+((p=p.version)?" "+p:""),T.test(z)?(/\bIE\b/.test(p)&&ge=="Mac OS"&&(ge=null),p="identify"+p):(p="mask"+p,z=Y?i(Y.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(p)&&(ge=null),Ce||(V=null)),H=["Presto"],J.push(p));else z+=" Mobile";(p=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(A)||0)[1])&&(p=[parseFloat(p.replace(/\.(\d)$/,".0$1")),p],z=="Safari"&&p[1].slice(-1)=="+"?(z="WebKit Nightly",fe="alpha",V=p[1].slice(0,-1)):V!=p[1]&&V!=(p[2]=(/\bSafari\/([\d.]+\+?)/i.exec(A)||0)[1])||(V=null),p[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(A)||0)[1],p[0]==537.36&&p[2]==537.36&&parseFloat(p[1])>=28&&H=="WebKit"&&(H=["Blink"]),Ce&&(G||p[1])?(H&&(H[1]="like Chrome"),p=p[1]||((p=p[0])<530?1:p<532?2:p<532.05?3:p<533?4:p<534.03?5:p<534.07?6:p<534.1?7:p<534.13?8:p<534.16?9:p<534.24?10:p<534.3?11:p<535.01?12:p<535.02?"13+":p<535.07?15:p<535.11?16:p<535.19?17:p<536.05?18:p<536.1?19:p<537.01?20:p<537.11?"21+":p<537.13?23:p<537.18?24:p<537.24?25:p<537.36?26:H!="Blink"?"27":"28")):(H&&(H[1]="like Safari"),p=(p=p[0])<400?1:p<500?2:p<526?3:p<533?4:p<534?"4+":p<535?5:p<537?6:p<538?7:p<601?8:p<602?9:p<604?10:p<606?11:p<608?12:"12"),H&&(H[1]+=" "+(p+=typeof p=="number"?".x":/[.+]/.test(p)?"":"+")),z=="Safari"&&(!V||parseInt(V)>45)?V=p:z=="Chrome"&&/\bHeadlessChrome/i.test(A)&&J.unshift("headless")),z=="Opera"&&(p=/\bzbov|zvav$/.exec(ge))?(z+=" ",J.unshift("desktop mode"),p=="zvav"?(z+="Mini",V=null):z+="Mobile",ge=ge.replace(RegExp(" *"+p+"$"),"")):z=="Safari"&&/\bChrome\b/.exec(H&&H[1])?(J.unshift("desktop mode"),z="Chrome Mobile",V=null,/\bOS X\b/.test(ge)?(de="Apple",ge="iOS 4.3+"):ge=null):/\bSRWare Iron\b/.test(z)&&!V&&(V=it("Chrome")),V&&V.indexOf(p=/[\d.]+$/.exec(ge))==0&&A.indexOf("/"+p+"-")>-1&&(ge=u(ge.replace(p,""))),ge&&ge.indexOf(z)!=-1&&!RegExp(z+" OS").test(ge)&&(ge=ge.replace(RegExp(" *"+r(z)+" *"),"")),H&&!/\b(?:Avant|Nook)\b/.test(z)&&(/Browser|Lunascape|Maxthon/.test(z)||z!="Safari"&&/^iOS/.test(ge)&&/\bSafari\b/.test(H[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(z)&&H[1])&&(p=H[H.length-1])&&J.push(p),J.length&&(J=["("+J.join("; ")+")"]),de&&X&&X.indexOf(de)<0&&J.push("on "+de),X&&J.push((/^on /.test(J[J.length-1])?"":"on ")+X),ge&&(p=/ ([\d.+]+)$/.exec(ge),k=p&&ge.charAt(ge.length-p[0].length-1)=="/",ge={architecture:32,family:p&&!k?ge.replace(p[0],""):ge,version:p?p[1]:null,toString:function(){var Ke=this.version;return this.family+(Ke&&!k?" "+Ke:"")+(this.architecture==64?" 64-bit":"")}}),(p=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Q))&&!/\bi686\b/i.test(Q)?(ge&&(ge.architecture=64,ge.family=ge.family.replace(RegExp(" *"+p),"")),z&&(/\bWOW64\b/i.test(A)||Ce&&/\w(?:86|32)$/.test(f.cpuClass||f.platform)&&!/\bWin64; x64\b/i.test(A))&&J.unshift("32-bit")):ge&&/^OS X/.test(ge.family)&&z=="Chrome"&&parseFloat(V)>=39&&(ge.architecture=64),A||(A=null);var Ye={};return Ye.description=A,Ye.layout=H&&H[0],Ye.manufacturer=de,Ye.name=z,Ye.prerelease=fe,Ye.product=X,Ye.ua=A,Ye.version=z&&V,Ye.os=ge||{architecture:null,family:null,version:null,toString:function(){return"null"}},Ye.parse=S,Ye.toString=function(){return this.description||""},Ye.version&&J.unshift(V),Ye.name&&J.unshift(z),ge&&z&&(ge!=String(ge).split(" ")[0]||ge!=z.split(" ")[0]&&!X)&&J.push(X?"("+ge+")":"on "+ge),J.length&&(Ye.description=J.join(" ")),Ye}();N.platform=m,(M=(function(){return m}).call(B,K,B,Ee))===void 0||(Ee.exports=M)}).call(this)},3847:(Ee,B,K)=>{K.r(B),K.d(B,{Component:()=>u,Fragment:()=>t,cloneElement:()=>le,createContext:()=>Se,createElement:()=>g,createRef:()=>r,h:()=>g,hydrate:()=>ze,isValidElement:()=>C,options:()=>x,render:()=>Ue,toChildArray:()=>b});var M,x,N,C,R,I,E,T,l={},c=[],h=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function y(be,Y){for(var Q in Y)be[Q]=Y[Q];return be}function i(be){var Y=be.parentNode;Y&&Y.removeChild(be)}function g(be,Y,Q){var J,fe,Ce,V={};for(Ce in Y)Ce=="key"?J=Y[Ce]:Ce=="ref"?fe=Y[Ce]:V[Ce]=Y[Ce];if(arguments.length>2&&(V.children=arguments.length>3?M.call(arguments,2):Q),typeof be=="function"&&be.defaultProps!=null)for(Ce in be.defaultProps)V[Ce]===void 0&&(V[Ce]=be.defaultProps[Ce]);return d(be,V,J,fe,null)}function d(be,Y,Q,J,fe){var Ce={type:be,props:Y,key:Q,ref:J,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:fe??++N};return fe==null&&x.vnode!=null&&x.vnode(Ce),Ce}function r(){return{current:null}}function t(be){return be.children}function u(be,Y){this.props=be,this.context=Y}function m(be,Y){if(Y==null)return be.__?m(be.__,be.__.__k.indexOf(be)+1):null;for(var Q;Y<be.__k.length;Y++)if((Q=be.__k[Y])!=null&&Q.__e!=null)return Q.__e;return typeof be.type=="function"?m(be):null}function S(be){var Y,Q;if((be=be.__)!=null&&be.__c!=null){for(be.__e=be.__c.base=null,Y=0;Y<be.__k.length;Y++)if((Q=be.__k[Y])!=null&&Q.__e!=null){be.__e=be.__c.base=Q.__e;break}return S(be)}}function A(be){(!be.__d&&(be.__d=!0)&&R.push(be)&&!_.__r++||I!==x.debounceRendering)&&((I=x.debounceRendering)||E)(_)}function _(){var be,Y,Q,J,fe,Ce,V,H;for(R.sort(function(z,X){return z.__v.__b-X.__v.__b});be=R.shift();)be.__d&&(Y=R.length,J=void 0,fe=void 0,V=(Ce=(Q=be).__v).__e,(H=Q.__P)&&(J=[],(fe=y({},Ce)).__v=Ce.__v+1,ee(H,Ce,fe,Q.__n,H.ownerSVGElement!==void 0,Ce.__h!=null?[V]:null,J,V??m(Ce),Ce.__h),ne(J,Ce),Ce.__e!=V&&S(Ce)),R.length>Y&&R.sort(function(z,X){return z.__v.__b-X.__v.__b}));_.__r=0}function v(be,Y,Q,J,fe,Ce,V,H,z,X){var de,ge,Ge,it,Ye,Ke,dt,me=J&&J.__k||c,ke=me.length;for(Q.__k=[],de=0;de<Y.length;de++)if((it=Q.__k[de]=(it=Y[de])==null||typeof it=="boolean"?null:typeof it=="string"||typeof it=="number"||typeof it=="bigint"?d(null,it,null,null,it):Array.isArray(it)?d(t,{children:it},null,null,null):it.__b>0?d(it.type,it.props,it.key,it.ref?it.ref:null,it.__v):it)!=null){if(it.__=Q,it.__b=Q.__b+1,(Ge=me[de])===null||Ge&&it.key==Ge.key&&it.type===Ge.type)me[de]=void 0;else for(ge=0;ge<ke;ge++){if((Ge=me[ge])&&it.key==Ge.key&&it.type===Ge.type){me[ge]=void 0;break}Ge=null}ee(be,it,Ge=Ge||l,fe,Ce,V,H,z,X),Ye=it.__e,(ge=it.ref)&&Ge.ref!=ge&&(dt||(dt=[]),Ge.ref&&dt.push(Ge.ref,null,it),dt.push(ge,it.__c||Ye,it)),Ye!=null?(Ke==null&&(Ke=Ye),typeof it.type=="function"&&it.__k===Ge.__k?it.__d=z=f(it,z,be):z=p(be,it,Ge,me,Ye,z),typeof Q.type=="function"&&(Q.__d=z)):z&&Ge.__e==z&&z.parentNode!=be&&(z=m(Ge))}for(Q.__e=Ke,de=ke;de--;)me[de]!=null&&(typeof Q.type=="function"&&me[de].__e!=null&&me[de].__e==Q.__d&&(Q.__d=k(J).nextSibling),W(me[de],me[de]));if(dt)for(de=0;de<dt.length;de++)oe(dt[de],dt[++de],dt[++de])}function f(be,Y,Q){for(var J,fe=be.__k,Ce=0;fe&&Ce<fe.length;Ce++)(J=fe[Ce])&&(J.__=be,Y=typeof J.type=="function"?f(J,Y,Q):p(Q,J,J,fe,J.__e,Y));return Y}function b(be,Y){return Y=Y||[],be==null||typeof be=="boolean"||(Array.isArray(be)?be.some(function(Q){b(Q,Y)}):Y.push(be)),Y}function p(be,Y,Q,J,fe,Ce){var V,H,z;if(Y.__d!==void 0)V=Y.__d,Y.__d=void 0;else if(Q==null||fe!=Ce||fe.parentNode==null)e:if(Ce==null||Ce.parentNode!==be)be.appendChild(fe),V=null;else{for(H=Ce,z=0;(H=H.nextSibling)&&z<J.length;z+=1)if(H==fe)break e;be.insertBefore(fe,Ce),V=Ce}return V!==void 0?V:fe.nextSibling}function k(be){var Y,Q,J;if(be.type==null||typeof be.type=="string")return be.__e;if(be.__k){for(Y=be.__k.length-1;Y>=0;Y--)if((Q=be.__k[Y])&&(J=k(Q)))return J}return null}function P(be,Y,Q){Y[0]==="-"?be.setProperty(Y,Q??""):be[Y]=Q==null?"":typeof Q!="number"||h.test(Y)?Q:Q+"px"}function j(be,Y,Q,J,fe){var Ce;e:if(Y==="style")if(typeof Q=="string")be.style.cssText=Q;else{if(typeof J=="string"&&(be.style.cssText=J=""),J)for(Y in J)Q&&Y in Q||P(be.style,Y,"");if(Q)for(Y in Q)J&&Q[Y]===J[Y]||P(be.style,Y,Q[Y])}else if(Y[0]==="o"&&Y[1]==="n")Ce=Y!==(Y=Y.replace(/Capture$/,"")),Y=Y.toLowerCase()in be?Y.toLowerCase().slice(2):Y.slice(2),be.l||(be.l={}),be.l[Y+Ce]=Q,Q?J||be.addEventListener(Y,Ce?G:U,Ce):be.removeEventListener(Y,Ce?G:U,Ce);else if(Y!=="dangerouslySetInnerHTML"){if(fe)Y=Y.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(Y!=="width"&&Y!=="height"&&Y!=="href"&&Y!=="list"&&Y!=="form"&&Y!=="tabIndex"&&Y!=="download"&&Y in be)try{be[Y]=Q??"";break e}catch{}typeof Q=="function"||(Q==null||Q===!1&&Y.indexOf("-")==-1?be.removeAttribute(Y):be.setAttribute(Y,Q))}}function U(be){return this.l[be.type+!1](x.event?x.event(be):be)}function G(be){return this.l[be.type+!0](x.event?x.event(be):be)}function ee(be,Y,Q,J,fe,Ce,V,H,z){var X,de,ge,Ge,it,Ye,Ke,dt,me,ke,Je,Xe,nt,Tt,bt,Ft=Y.type;if(Y.constructor!==void 0)return null;Q.__h!=null&&(z=Q.__h,H=Y.__e=Q.__e,Y.__h=null,Ce=[H]),(X=x.__b)&&X(Y);try{e:if(typeof Ft=="function"){if(dt=Y.props,me=(X=Ft.contextType)&&J[X.__c],ke=X?me?me.props.value:X.__:J,Q.__c?Ke=(de=Y.__c=Q.__c).__=de.__E:("prototype"in Ft&&Ft.prototype.render?Y.__c=de=new Ft(dt,ke):(Y.__c=de=new u(dt,ke),de.constructor=Ft,de.render=Te),me&&me.sub(de),de.props=dt,de.state||(de.state={}),de.context=ke,de.__n=J,ge=de.__d=!0,de.__h=[],de._sb=[]),de.__s==null&&(de.__s=de.state),Ft.getDerivedStateFromProps!=null&&(de.__s==de.state&&(de.__s=y({},de.__s)),y(de.__s,Ft.getDerivedStateFromProps(dt,de.__s))),Ge=de.props,it=de.state,de.__v=Y,ge)Ft.getDerivedStateFromProps==null&&de.componentWillMount!=null&&de.componentWillMount(),de.componentDidMount!=null&&de.__h.push(de.componentDidMount);else{if(Ft.getDerivedStateFromProps==null&&dt!==Ge&&de.componentWillReceiveProps!=null&&de.componentWillReceiveProps(dt,ke),!de.__e&&de.shouldComponentUpdate!=null&&de.shouldComponentUpdate(dt,de.__s,ke)===!1||Y.__v===Q.__v){for(Y.__v!==Q.__v&&(de.props=dt,de.state=de.__s,de.__d=!1),de.__e=!1,Y.__e=Q.__e,Y.__k=Q.__k,Y.__k.forEach(function(pn){pn&&(pn.__=Y)}),Je=0;Je<de._sb.length;Je++)de.__h.push(de._sb[Je]);de._sb=[],de.__h.length&&V.push(de);break e}de.componentWillUpdate!=null&&de.componentWillUpdate(dt,de.__s,ke),de.componentDidUpdate!=null&&de.__h.push(function(){de.componentDidUpdate(Ge,it,Ye)})}if(de.context=ke,de.props=dt,de.__P=be,Xe=x.__r,nt=0,"prototype"in Ft&&Ft.prototype.render){for(de.state=de.__s,de.__d=!1,Xe&&Xe(Y),X=de.render(de.props,de.state,de.context),Tt=0;Tt<de._sb.length;Tt++)de.__h.push(de._sb[Tt]);de._sb=[]}else do de.__d=!1,Xe&&Xe(Y),X=de.render(de.props,de.state,de.context),de.state=de.__s;while(de.__d&&++nt<25);de.state=de.__s,de.getChildContext!=null&&(J=y(y({},J),de.getChildContext())),ge||de.getSnapshotBeforeUpdate==null||(Ye=de.getSnapshotBeforeUpdate(Ge,it)),bt=X!=null&&X.type===t&&X.key==null?X.props.children:X,v(be,Array.isArray(bt)?bt:[bt],Y,Q,J,fe,Ce,V,H,z),de.base=Y.__e,Y.__h=null,de.__h.length&&V.push(de),Ke&&(de.__E=de.__=null),de.__e=!1}else Ce==null&&Y.__v===Q.__v?(Y.__k=Q.__k,Y.__e=Q.__e):Y.__e=re(Q.__e,Y,Q,J,fe,Ce,V,z);(X=x.diffed)&&X(Y)}catch(pn){Y.__v=null,(z||Ce!=null)&&(Y.__e=H,Y.__h=!!z,Ce[Ce.indexOf(H)]=null),x.__e(pn,Y,Q)}}function ne(be,Y){x.__c&&x.__c(Y,be),be.some(function(Q){try{be=Q.__h,Q.__h=[],be.some(function(J){J.call(Q)})}catch(J){x.__e(J,Q.__v)}})}function re(be,Y,Q,J,fe,Ce,V,H){var z,X,de,ge=Q.props,Ge=Y.props,it=Y.type,Ye=0;if(it==="svg"&&(fe=!0),Ce!=null){for(;Ye<Ce.length;Ye++)if((z=Ce[Ye])&&"setAttribute"in z==!!it&&(it?z.localName===it:z.nodeType===3)){be=z,Ce[Ye]=null;break}}if(be==null){if(it===null)return document.createTextNode(Ge);be=fe?document.createElementNS("http://www.w3.org/2000/svg",it):document.createElement(it,Ge.is&&Ge),Ce=null,H=!1}if(it===null)ge===Ge||H&&be.data===Ge||(be.data=Ge);else{if(Ce=Ce&&M.call(be.childNodes),X=(ge=Q.props||l).dangerouslySetInnerHTML,de=Ge.dangerouslySetInnerHTML,!H){if(Ce!=null)for(ge={},Ye=0;Ye<be.attributes.length;Ye++)ge[be.attributes[Ye].name]=be.attributes[Ye].value;(de||X)&&(de&&(X&&de.__html==X.__html||de.__html===be.innerHTML)||(be.innerHTML=de&&de.__html||""))}if(function(Ke,dt,me,ke,Je){var Xe;for(Xe in me)Xe==="children"||Xe==="key"||Xe in dt||j(Ke,Xe,null,me[Xe],ke);for(Xe in dt)Je&&typeof dt[Xe]!="function"||Xe==="children"||Xe==="key"||Xe==="value"||Xe==="checked"||me[Xe]===dt[Xe]||j(Ke,Xe,dt[Xe],me[Xe],ke)}(be,Ge,ge,fe,H),de)Y.__k=[];else if(Ye=Y.props.children,v(be,Array.isArray(Ye)?Ye:[Ye],Y,Q,J,fe&&it!=="foreignObject",Ce,V,Ce?Ce[0]:Q.__k&&m(Q,0),H),Ce!=null)for(Ye=Ce.length;Ye--;)Ce[Ye]!=null&&i(Ce[Ye]);H||("value"in Ge&&(Ye=Ge.value)!==void 0&&(Ye!==be.value||it==="progress"&&!Ye||it==="option"&&Ye!==ge.value)&&j(be,"value",Ye,ge.value,!1),"checked"in Ge&&(Ye=Ge.checked)!==void 0&&Ye!==be.checked&&j(be,"checked",Ye,ge.checked,!1))}return be}function oe(be,Y,Q){try{typeof be=="function"?be(Y):be.current=Y}catch(J){x.__e(J,Q)}}function W(be,Y,Q){var J,fe;if(x.unmount&&x.unmount(be),(J=be.ref)&&(J.current&&J.current!==be.__e||oe(J,null,Y)),(J=be.__c)!=null){if(J.componentWillUnmount)try{J.componentWillUnmount()}catch(Ce){x.__e(Ce,Y)}J.base=J.__P=null,be.__c=void 0}if(J=be.__k)for(fe=0;fe<J.length;fe++)J[fe]&&W(J[fe],Y,Q||typeof be.type!="function");Q||be.__e==null||i(be.__e),be.__=be.__e=be.__d=void 0}function Te(be,Y,Q){return this.constructor(be,Q)}function Ue(be,Y,Q){var J,fe,Ce;x.__&&x.__(be,Y),fe=(J=typeof Q=="function")?null:Q&&Q.__k||Y.__k,Ce=[],ee(Y,be=(!J&&Q||Y).__k=g(t,null,[be]),fe||l,l,Y.ownerSVGElement!==void 0,!J&&Q?[Q]:fe?null:Y.firstChild?M.call(Y.childNodes):null,Ce,!J&&Q?Q:fe?fe.__e:Y.firstChild,J),ne(Ce,be)}function ze(be,Y){Ue(be,Y,ze)}function le(be,Y,Q){var J,fe,Ce,V=y({},be.props);for(Ce in Y)Ce=="key"?J=Y[Ce]:Ce=="ref"?fe=Y[Ce]:V[Ce]=Y[Ce];return arguments.length>2&&(V.children=arguments.length>3?M.call(arguments,2):Q),d(be.type,V,J||be.key,fe||be.ref,null)}function Se(be,Y){var Q={__c:Y="__cC"+T++,__:be,Consumer:function(J,fe){return J.children(fe)},Provider:function(J){var fe,Ce;return this.getChildContext||(fe=[],(Ce={})[Y]=this,this.getChildContext=function(){return Ce},this.shouldComponentUpdate=function(V){this.props.value!==V.value&&fe.some(function(H){H.__e=!0,A(H)})},this.sub=function(V){fe.push(V);var H=V.componentWillUnmount;V.componentWillUnmount=function(){fe.splice(fe.indexOf(V),1),H&&H.call(V)}}),J.children}};return Q.Provider.__=Q.Consumer.contextType=Q}M=c.slice,x={__e:function(be,Y,Q,J){for(var fe,Ce,V;Y=Y.__;)if((fe=Y.__c)&&!fe.__)try{if((Ce=fe.constructor)&&Ce.getDerivedStateFromError!=null&&(fe.setState(Ce.getDerivedStateFromError(be)),V=fe.__d),fe.componentDidCatch!=null&&(fe.componentDidCatch(be,J||{}),V=fe.__d),V)return fe.__E=fe}catch(H){be=H}throw be}},N=0,C=function(be){return be!=null&&be.constructor===void 0},u.prototype.setState=function(be,Y){var Q;Q=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=y({},this.state),typeof be=="function"&&(be=be(y({},Q),this.props)),be&&y(Q,be),be!=null&&this.__v&&(Y&&this._sb.push(Y),A(this))},u.prototype.forceUpdate=function(be){this.__v&&(this.__e=!0,be&&this.__h.push(be),A(this))},u.prototype.render=t,R=[],E=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,_.__r=0,T=0},4619:(Ee,B,K)=>{K.r(B),K.d(B,{useCallback:()=>_,useContext:()=>v,useDebugValue:()=>f,useEffect:()=>t,useErrorBoundary:()=>b,useId:()=>p,useImperativeHandle:()=>S,useLayoutEffect:()=>u,useMemo:()=>A,useReducer:()=>r,useRef:()=>m,useState:()=>d});var M,x,N,C,R=K(3847),I=0,E=[],T=[],l=R.options.__b,c=R.options.__r,h=R.options.diffed,y=R.options.__c,i=R.options.unmount;function g(re,oe){R.options.__h&&R.options.__h(x,re,I||oe),I=0;var W=x.__H||(x.__H={__:[],__h:[]});return re>=W.__.length&&W.__.push({__V:T}),W.__[re]}function d(re){return I=1,r(ne,re)}function r(re,oe,W){var Te=g(M++,2);if(Te.t=re,!Te.__c&&(Te.__=[W?W(oe):ne(void 0,oe),function(ze){var le=Te.__N?Te.__N[0]:Te.__[0],Se=Te.t(le,ze);le!==Se&&(Te.__N=[Se,Te.__[1]],Te.__c.setState({}))}],Te.__c=x,!x.u)){x.u=!0;var Ue=x.shouldComponentUpdate;x.shouldComponentUpdate=function(ze,le,Se){if(!Te.__c.__H)return!0;var be=Te.__c.__H.__.filter(function(Q){return Q.__c});if(be.every(function(Q){return!Q.__N}))return!Ue||Ue.call(this,ze,le,Se);var Y=!1;return be.forEach(function(Q){if(Q.__N){var J=Q.__[0];Q.__=Q.__N,Q.__N=void 0,J!==Q.__[0]&&(Y=!0)}}),!(!Y&&Te.__c.props===ze)&&(!Ue||Ue.call(this,ze,le,Se))}}return Te.__N||Te.__}function t(re,oe){var W=g(M++,3);!R.options.__s&&ee(W.__H,oe)&&(W.__=re,W.i=oe,x.__H.__h.push(W))}function u(re,oe){var W=g(M++,4);!R.options.__s&&ee(W.__H,oe)&&(W.__=re,W.i=oe,x.__h.push(W))}function m(re){return I=5,A(function(){return{current:re}},[])}function S(re,oe,W){I=6,u(function(){return typeof re=="function"?(re(oe()),function(){return re(null)}):re?(re.current=oe(),function(){return re.current=null}):void 0},W==null?W:W.concat(re))}function A(re,oe){var W=g(M++,7);return ee(W.__H,oe)?(W.__V=re(),W.i=oe,W.__h=re,W.__V):W.__}function _(re,oe){return I=8,A(function(){return re},oe)}function v(re){var oe=x.context[re.__c],W=g(M++,9);return W.c=re,oe?(W.__==null&&(W.__=!0,oe.sub(x)),oe.props.value):re.__}function f(re,oe){R.options.useDebugValue&&R.options.useDebugValue(oe?oe(re):re)}function b(re){var oe=g(M++,10),W=d();return oe.__=re,x.componentDidCatch||(x.componentDidCatch=function(Te,Ue){oe.__&&oe.__(Te,Ue),W[1](Te)}),[W[0],function(){W[1](void 0)}]}function p(){var re=g(M++,11);if(!re.__){for(var oe=x.__v;oe!==null&&!oe.__m&&oe.__!==null;)oe=oe.__;var W=oe.__m||(oe.__m=[0,0]);re.__="P"+W[0]+"-"+W[1]++}return re.__}function k(){for(var re;re=E.shift();)if(re.__P&&re.__H)try{re.__H.__h.forEach(U),re.__H.__h.forEach(G),re.__H.__h=[]}catch(oe){re.__H.__h=[],R.options.__e(oe,re.__v)}}R.options.__b=function(re){x=null,l&&l(re)},R.options.__r=function(re){c&&c(re),M=0;var oe=(x=re.__c).__H;oe&&(N===x?(oe.__h=[],x.__h=[],oe.__.forEach(function(W){W.__N&&(W.__=W.__N),W.__V=T,W.__N=W.i=void 0})):(oe.__h.forEach(U),oe.__h.forEach(G),oe.__h=[])),N=x},R.options.diffed=function(re){h&&h(re);var oe=re.__c;oe&&oe.__H&&(oe.__H.__h.length&&(E.push(oe)!==1&&C===R.options.requestAnimationFrame||((C=R.options.requestAnimationFrame)||j)(k)),oe.__H.__.forEach(function(W){W.i&&(W.__H=W.i),W.__V!==T&&(W.__=W.__V),W.i=void 0,W.__V=T})),N=x=null},R.options.__c=function(re,oe){oe.some(function(W){try{W.__h.forEach(U),W.__h=W.__h.filter(function(Te){return!Te.__||G(Te)})}catch(Te){oe.some(function(Ue){Ue.__h&&(Ue.__h=[])}),oe=[],R.options.__e(Te,W.__v)}}),y&&y(re,oe)},R.options.unmount=function(re){i&&i(re);var oe,W=re.__c;W&&W.__H&&(W.__H.__.forEach(function(Te){try{U(Te)}catch(Ue){oe=Ue}}),W.__H=void 0,oe&&R.options.__e(oe,W.__v))};var P=typeof requestAnimationFrame=="function";function j(re){var oe,W=function(){clearTimeout(Te),P&&cancelAnimationFrame(oe),setTimeout(re)},Te=setTimeout(W,100);P&&(oe=requestAnimationFrame(W))}function U(re){var oe=x,W=re.__c;typeof W=="function"&&(re.__c=void 0,W()),x=oe}function G(re){var oe=x;re.__c=re.__(),x=oe}function ee(re,oe){return!re||re.length!==oe.length||oe.some(function(W,Te){return W!==re[Te]})}function ne(re,oe){return typeof oe=="function"?oe(re):oe}},4126:(Ee,B,K)=>{const M=K(7785),x=K(5554),N=K(5452),C=K(63),R=Symbol("encodeFragmentIdentifier");function I(g){if(typeof g!="string"||g.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function E(g,d){return d.encode?d.strict?M(g):encodeURIComponent(g):g}function T(g,d){return d.decode?x(g):g}function l(g){return Array.isArray(g)?g.sort():typeof g=="object"?l(Object.keys(g)).sort((d,r)=>Number(d)-Number(r)).map(d=>g[d]):g}function c(g){const d=g.indexOf("#");return d!==-1&&(g=g.slice(0,d)),g}function h(g){const d=(g=c(g)).indexOf("?");return d===-1?"":g.slice(d+1)}function y(g,d){return d.parseNumbers&&!Number.isNaN(Number(g))&&typeof g=="string"&&g.trim()!==""?g=Number(g):!d.parseBooleans||g===null||g.toLowerCase()!=="true"&&g.toLowerCase()!=="false"||(g=g.toLowerCase()==="true"),g}function i(g,d){I((d=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},d)).arrayFormatSeparator);const r=function(u){let m;switch(u.arrayFormat){case"index":return(S,A,_)=>{m=/\[(\d*)\]$/.exec(S),S=S.replace(/\[\d*\]$/,""),m?(_[S]===void 0&&(_[S]={}),_[S][m[1]]=A):_[S]=A};case"bracket":return(S,A,_)=>{m=/(\[\])$/.exec(S),S=S.replace(/\[\]$/,""),m?_[S]!==void 0?_[S]=[].concat(_[S],A):_[S]=[A]:_[S]=A};case"colon-list-separator":return(S,A,_)=>{m=/(:list)$/.exec(S),S=S.replace(/:list$/,""),m?_[S]!==void 0?_[S]=[].concat(_[S],A):_[S]=[A]:_[S]=A};case"comma":case"separator":return(S,A,_)=>{const v=typeof A=="string"&&A.includes(u.arrayFormatSeparator),f=typeof A=="string"&&!v&&T(A,u).includes(u.arrayFormatSeparator);A=f?T(A,u):A;const b=v||f?A.split(u.arrayFormatSeparator).map(p=>T(p,u)):A===null?A:T(A,u);_[S]=b};case"bracket-separator":return(S,A,_)=>{const v=/(\[\])$/.test(S);if(S=S.replace(/\[\]$/,""),!v)return void(_[S]=A&&T(A,u));const f=A===null?[]:A.split(u.arrayFormatSeparator).map(b=>T(b,u));_[S]!==void 0?_[S]=[].concat(_[S],f):_[S]=f};default:return(S,A,_)=>{_[S]!==void 0?_[S]=[].concat(_[S],A):_[S]=A}}}(d),t=Object.create(null);if(typeof g!="string"||!(g=g.trim().replace(/^[?#&]/,"")))return t;for(const u of g.split("&")){if(u==="")continue;let[m,S]=N(d.decode?u.replace(/\+/g," "):u,"=");S=S===void 0?null:["comma","separator","bracket-separator"].includes(d.arrayFormat)?S:T(S,d),r(T(m,d),S,t)}for(const u of Object.keys(t)){const m=t[u];if(typeof m=="object"&&m!==null)for(const S of Object.keys(m))m[S]=y(m[S],d);else t[u]=y(m,d)}return d.sort===!1?t:(d.sort===!0?Object.keys(t).sort():Object.keys(t).sort(d.sort)).reduce((u,m)=>{const S=t[m];return S&&typeof S=="object"&&!Array.isArray(S)?u[m]=l(S):u[m]=S,u},Object.create(null))}B.extract=h,B.parse=i,B.stringify=(g,d)=>{if(!g)return"";I((d=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},d)).arrayFormatSeparator);const r=S=>d.skipNull&&g[S]==null||d.skipEmptyString&&g[S]==="",t=function(S){switch(S.arrayFormat){case"index":return A=>(_,v)=>{const f=_.length;return v===void 0||S.skipNull&&v===null||S.skipEmptyString&&v===""?_:v===null?[..._,[E(A,S),"[",f,"]"].join("")]:[..._,[E(A,S),"[",E(f,S),"]=",E(v,S)].join("")]};case"bracket":return A=>(_,v)=>v===void 0||S.skipNull&&v===null||S.skipEmptyString&&v===""?_:v===null?[..._,[E(A,S),"[]"].join("")]:[..._,[E(A,S),"[]=",E(v,S)].join("")];case"colon-list-separator":return A=>(_,v)=>v===void 0||S.skipNull&&v===null||S.skipEmptyString&&v===""?_:v===null?[..._,[E(A,S),":list="].join("")]:[..._,[E(A,S),":list=",E(v,S)].join("")];case"comma":case"separator":case"bracket-separator":{const A=S.arrayFormat==="bracket-separator"?"[]=":"=";return _=>(v,f)=>f===void 0||S.skipNull&&f===null||S.skipEmptyString&&f===""?v:(f=f===null?"":f,v.length===0?[[E(_,S),A,E(f,S)].join("")]:[[v,E(f,S)].join(S.arrayFormatSeparator)])}default:return A=>(_,v)=>v===void 0||S.skipNull&&v===null||S.skipEmptyString&&v===""?_:v===null?[..._,E(A,S)]:[..._,[E(A,S),"=",E(v,S)].join("")]}}(d),u={};for(const S of Object.keys(g))r(S)||(u[S]=g[S]);const m=Object.keys(u);return d.sort!==!1&&m.sort(d.sort),m.map(S=>{const A=g[S];return A===void 0?"":A===null?E(S,d):Array.isArray(A)?A.length===0&&d.arrayFormat==="bracket-separator"?E(S,d)+"[]":A.reduce(t(S),[]).join("&"):E(S,d)+"="+E(A,d)}).filter(S=>S.length>0).join("&")},B.parseUrl=(g,d)=>{d=Object.assign({decode:!0},d);const[r,t]=N(g,"#");return Object.assign({url:r.split("?")[0]||"",query:i(h(g),d)},d&&d.parseFragmentIdentifier&&t?{fragmentIdentifier:T(t,d)}:{})},B.stringifyUrl=(g,d)=>{d=Object.assign({encode:!0,strict:!0,[R]:!0},d);const r=c(g.url).split("?")[0]||"",t=B.extract(g.url),u=B.parse(t,{sort:!1}),m=Object.assign(u,g.query);let S=B.stringify(m,d);S&&(S=`?${S}`);let A=function(_){let v="";const f=_.indexOf("#");return f!==-1&&(v=_.slice(f)),v}(g.url);return g.fragmentIdentifier&&(A=`#${d[R]?E(g.fragmentIdentifier,d):g.fragmentIdentifier}`),`${r}${S}${A}`},B.pick=(g,d,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[R]:!1},r);const{url:t,query:u,fragmentIdentifier:m}=B.parseUrl(g,r);return B.stringifyUrl({url:t,query:C(u,d),fragmentIdentifier:m},r)},B.exclude=(g,d,r)=>{const t=Array.isArray(d)?u=>!d.includes(u):(u,m)=>!d(u,m);return B.pick(g,t,r)}},1738:(Ee,B,K)=>{var M;(function(x){(function(N){var C=typeof K.g=="object"?K.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),R=I(x);function I(E,T){return function(l,c){typeof E[l]!="function"&&Object.defineProperty(E,l,{configurable:!0,writable:!0,value:c}),T&&T(l,c)}}C.Reflect===void 0?C.Reflect=x:R=I(C.Reflect,R),function(E){var T=Object.prototype.hasOwnProperty,l=typeof Symbol=="function",c=l&&Symbol.toPrimitive!==void 0?Symbol.toPrimitive:"@@toPrimitive",h=l&&Symbol.iterator!==void 0?Symbol.iterator:"@@iterator",y=typeof Object.create=="function",i={__proto__:[]}instanceof Array,g=!y&&!i,d={create:y?function(){return be(Object.create(null))}:i?function(){return be({__proto__:null})}:function(){return be({})},has:g?function(Y,Q){return T.call(Y,Q)}:function(Y,Q){return Q in Y},get:g?function(Y,Q){return T.call(Y,Q)?Y[Q]:void 0}:function(Y,Q){return Y[Q]}},r=Object.getPrototypeOf(Function),t=typeof process=="object"&&process.env&&{}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",u=t||typeof Map!="function"||typeof Map.prototype.entries!="function"?function(){var Y={},Q=[],J=function(){function H(z,X,de){this._index=0,this._keys=z,this._values=X,this._selector=de}return H.prototype["@@iterator"]=function(){return this},H.prototype[h]=function(){return this},H.prototype.next=function(){var z=this._index;if(z>=0&&z<this._keys.length){var X=this._selector(this._keys[z],this._values[z]);return z+1>=this._keys.length?(this._index=-1,this._keys=Q,this._values=Q):this._index++,{value:X,done:!1}}return{value:void 0,done:!0}},H.prototype.throw=function(z){throw this._index>=0&&(this._index=-1,this._keys=Q,this._values=Q),z},H.prototype.return=function(z){return this._index>=0&&(this._index=-1,this._keys=Q,this._values=Q),{value:z,done:!0}},H}();return function(){function H(){this._keys=[],this._values=[],this._cacheKey=Y,this._cacheIndex=-2}return Object.defineProperty(H.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),H.prototype.has=function(z){return this._find(z,!1)>=0},H.prototype.get=function(z){var X=this._find(z,!1);return X>=0?this._values[X]:void 0},H.prototype.set=function(z,X){var de=this._find(z,!0);return this._values[de]=X,this},H.prototype.delete=function(z){var X=this._find(z,!1);if(X>=0){for(var de=this._keys.length,ge=X+1;ge<de;ge++)this._keys[ge-1]=this._keys[ge],this._values[ge-1]=this._values[ge];return this._keys.length--,this._values.length--,z===this._cacheKey&&(this._cacheKey=Y,this._cacheIndex=-2),!0}return!1},H.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Y,this._cacheIndex=-2},H.prototype.keys=function(){return new J(this._keys,this._values,fe)},H.prototype.values=function(){return new J(this._keys,this._values,Ce)},H.prototype.entries=function(){return new J(this._keys,this._values,V)},H.prototype["@@iterator"]=function(){return this.entries()},H.prototype[h]=function(){return this.entries()},H.prototype._find=function(z,X){return this._cacheKey!==z&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=z)),this._cacheIndex<0&&X&&(this._cacheIndex=this._keys.length,this._keys.push(z),this._values.push(void 0)),this._cacheIndex},H}();function fe(H,z){return H}function Ce(H,z){return z}function V(H,z){return[H,z]}}():Map,m=t||typeof Set!="function"||typeof Set.prototype.entries!="function"?function(){function Y(){this._map=new u}return Object.defineProperty(Y.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Y.prototype.has=function(Q){return this._map.has(Q)},Y.prototype.add=function(Q){return this._map.set(Q,Q),this},Y.prototype.delete=function(Q){return this._map.delete(Q)},Y.prototype.clear=function(){this._map.clear()},Y.prototype.keys=function(){return this._map.keys()},Y.prototype.values=function(){return this._map.values()},Y.prototype.entries=function(){return this._map.entries()},Y.prototype["@@iterator"]=function(){return this.keys()},Y.prototype[h]=function(){return this.keys()},Y}():Set,S=new(t||typeof WeakMap!="function"?function(){var Y=16,Q=d.create(),J=fe();return function(){function z(){this._key=fe()}return z.prototype.has=function(X){var de=Ce(X,!1);return de!==void 0&&d.has(de,this._key)},z.prototype.get=function(X){var de=Ce(X,!1);return de!==void 0?d.get(de,this._key):void 0},z.prototype.set=function(X,de){return Ce(X,!0)[this._key]=de,this},z.prototype.delete=function(X){var de=Ce(X,!1);return de!==void 0&&delete de[this._key]},z.prototype.clear=function(){this._key=fe()},z}();function fe(){var z;do z="@@WeakMap@@"+H();while(d.has(Q,z));return Q[z]=!0,z}function Ce(z,X){if(!T.call(z,J)){if(!X)return;Object.defineProperty(z,J,{value:d.create()})}return z[J]}function V(z,X){for(var de=0;de<X;++de)z[de]=255*Math.random()|0;return z}function H(){var z,X=(z=Y,typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(z)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(z)):V(new Uint8Array(z),z):V(new Array(z),z));X[6]=79&X[6]|64,X[8]=191&X[8]|128;for(var de="",ge=0;ge<Y;++ge){var Ge=X[ge];ge!==4&&ge!==6&&ge!==8||(de+="-"),Ge<16&&(de+="0"),de+=Ge.toString(16).toLowerCase()}return de}}():WeakMap);function A(Y,Q,J){var fe=S.get(Y);if(U(fe)){if(!J)return;fe=new u,S.set(Y,fe)}var Ce=fe.get(Q);if(U(Ce)){if(!J)return;Ce=new u,fe.set(Q,Ce)}return Ce}function _(Y,Q,J){if(v(Y,Q,J))return!0;var fe=Se(Q);return!G(fe)&&_(Y,fe,J)}function v(Y,Q,J){var fe=A(Q,J,!1);return!U(fe)&&!!fe.has(Y)}function f(Y,Q,J){if(v(Y,Q,J))return b(Y,Q,J);var fe=Se(Q);return G(fe)?void 0:f(Y,fe,J)}function b(Y,Q,J){var fe=A(Q,J,!1);if(!U(fe))return fe.get(Y)}function p(Y,Q,J,fe){A(J,fe,!0).set(Y,Q)}function k(Y,Q){var J=P(Y,Q),fe=Se(Y);if(fe===null)return J;var Ce=k(fe,Q);if(Ce.length<=0)return J;if(J.length<=0)return Ce;for(var V=new m,H=[],z=0,X=J;z<X.length;z++){var de=X[z];V.has(de)||(V.add(de),H.push(de))}for(var ge=0,Ge=Ce;ge<Ge.length;ge++)de=Ge[ge],V.has(de)||(V.add(de),H.push(de));return H}function P(Y,Q){var J=[],fe=A(Y,Q,!1);if(U(fe))return J;for(var Ce=function(X){var de=Ue(X,h);if(!W(de))throw new TypeError;var ge=de.call(X);if(!ee(ge))throw new TypeError;return ge}(fe.keys()),V=0;;){var H=ze(Ce);if(!H)return J.length=V,J;var z=H.value;try{J[V]=z}catch(X){try{le(Ce)}finally{throw X}}V++}}function j(Y){if(Y===null)return 1;switch(typeof Y){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Y===null?1:6;default:return 6}}function U(Y){return Y===void 0}function G(Y){return Y===null}function ee(Y){return typeof Y=="object"?Y!==null:typeof Y=="function"}function ne(Y,Q){switch(j(Y)){case 0:case 1:case 2:case 3:case 4:case 5:return Y}var J=Q===3?"string":Q===5?"number":"default",fe=Ue(Y,c);if(fe!==void 0){var Ce=fe.call(Y,J);if(ee(Ce))throw new TypeError;return Ce}return function(V,H){if(H==="string"){var z=V.toString;if(W(z)&&!ee(de=z.call(V))||W(X=V.valueOf)&&!ee(de=X.call(V)))return de}else{var X;if(W(X=V.valueOf)&&!ee(de=X.call(V)))return de;var de,ge=V.toString;if(W(ge)&&!ee(de=ge.call(V)))return de}throw new TypeError}(Y,J==="default"?"number":J)}function re(Y){var Q=ne(Y,3);return typeof Q=="symbol"?Q:function(J){return""+J}(Q)}function oe(Y){return Array.isArray?Array.isArray(Y):Y instanceof Object?Y instanceof Array:Object.prototype.toString.call(Y)==="[object Array]"}function W(Y){return typeof Y=="function"}function Te(Y){return typeof Y=="function"}function Ue(Y,Q){var J=Y[Q];if(J!=null){if(!W(J))throw new TypeError;return J}}function ze(Y){var Q=Y.next();return!Q.done&&Q}function le(Y){var Q=Y.return;Q&&Q.call(Y)}function Se(Y){var Q=Object.getPrototypeOf(Y);if(typeof Y!="function"||Y===r||Q!==r)return Q;var J=Y.prototype,fe=J&&Object.getPrototypeOf(J);if(fe==null||fe===Object.prototype)return Q;var Ce=fe.constructor;return typeof Ce!="function"||Ce===Y?Q:Ce}function be(Y){return Y.__=void 0,delete Y.__,Y}E("decorate",function(Y,Q,J,fe){if(U(J)){if(!oe(Y))throw new TypeError;if(!Te(Q))throw new TypeError;return function(Ce,V){for(var H=Ce.length-1;H>=0;--H){var z=(0,Ce[H])(V);if(!U(z)&&!G(z)){if(!Te(z))throw new TypeError;V=z}}return V}(Y,Q)}if(!oe(Y))throw new TypeError;if(!ee(Q))throw new TypeError;if(!ee(fe)&&!U(fe)&&!G(fe))throw new TypeError;return G(fe)&&(fe=void 0),function(Ce,V,H,z){for(var X=Ce.length-1;X>=0;--X){var de=(0,Ce[X])(V,H,z);if(!U(de)&&!G(de)){if(!ee(de))throw new TypeError;z=de}}return z}(Y,Q,J=re(J),fe)}),E("metadata",function(Y,Q){return function(J,fe){if(!ee(J))throw new TypeError;if(!U(fe)&&!function(Ce){switch(j(Ce)){case 3:case 4:return!0;default:return!1}}(fe))throw new TypeError;p(Y,Q,J,fe)}}),E("defineMetadata",function(Y,Q,J,fe){if(!ee(J))throw new TypeError;return U(fe)||(fe=re(fe)),p(Y,Q,J,fe)}),E("hasMetadata",function(Y,Q,J){if(!ee(Q))throw new TypeError;return U(J)||(J=re(J)),_(Y,Q,J)}),E("hasOwnMetadata",function(Y,Q,J){if(!ee(Q))throw new TypeError;return U(J)||(J=re(J)),v(Y,Q,J)}),E("getMetadata",function(Y,Q,J){if(!ee(Q))throw new TypeError;return U(J)||(J=re(J)),f(Y,Q,J)}),E("getOwnMetadata",function(Y,Q,J){if(!ee(Q))throw new TypeError;return U(J)||(J=re(J)),b(Y,Q,J)}),E("getMetadataKeys",function(Y,Q){if(!ee(Y))throw new TypeError;return U(Q)||(Q=re(Q)),k(Y,Q)}),E("getOwnMetadataKeys",function(Y,Q){if(!ee(Y))throw new TypeError;return U(Q)||(Q=re(Q)),P(Y,Q)}),E("deleteMetadata",function(Y,Q,J){if(!ee(Q))throw new TypeError;U(J)||(J=re(J));var fe=A(Q,J,!1);if(U(fe)||!fe.delete(Y))return!1;if(fe.size>0)return!0;var Ce=S.get(Q);return Ce.delete(J),Ce.size>0||S.delete(Q),!0})}(R)})()})(M||(M={}))},3602:(Ee,B,K)=>{(function(){var M=typeof window<"u"?window:K.g,x={};for(var N in(function(C,R,I){var E;function T(e){var n=0;return function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}}}var l=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,n,o){return e==Array.prototype||e==Object.prototype||(e[n]=o.value),e},c=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof C=="object"&&C,typeof self=="object"&&self,typeof R=="object"&&R];for(var n=0;n<e.length;++n){var o=e[n];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")}(this);function h(e,n){if(n)e:{var o=c;e=e.split(".");for(var w=0;w<e.length-1;w++){var O=e[w];if(!(O in o))break e;o=o[O]}(n=n(w=o[e=e[e.length-1]]))!=w&&n!=null&&l(o,e,{configurable:!0,writable:!0,value:n})}}function y(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function i(e){var n=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:T(e)}}function g(e){if(!(e instanceof Array)){e=i(e);for(var n,o=[];!(n=e.next()).done;)o.push(n.value);e=o}return e}h("Symbol",function(e){function n(O,L){this.g=O,l(this,"description",{configurable:!0,writable:!0,value:L})}if(e)return e;n.prototype.toString=function(){return this.g};var o="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",w=0;return function O(L){if(this instanceof O)throw new TypeError("Symbol is not a constructor");return new n(o+(L||"")+"_"+w++,L)}}),h("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<n.length;o++){var w=c[n[o]];typeof w=="function"&&typeof w.prototype[e]!="function"&&l(w.prototype,e,{configurable:!0,writable:!0,value:function(){return y(T(this))}})}return e});var d,r=typeof Object.create=="function"?Object.create:function(e){function n(){}return n.prototype=e,new n};if(typeof Object.setPrototypeOf=="function")d=Object.setPrototypeOf;else{var t;e:{var u={};try{u.__proto__={a:!0},t=u.a;break e}catch{}t=!1}d=t?function(e,n){if(e.__proto__=n,e.__proto__!==n)throw new TypeError(e+" is not extensible");return e}:null}var m=d;function S(e,n){if(e.prototype=r(n.prototype),e.prototype.constructor=e,m)m(e,n);else for(var o in n)if(o!="prototype")if(Object.defineProperties){var w=Object.getOwnPropertyDescriptor(n,o);w&&Object.defineProperty(e,o,w)}else e[o]=n[o];e.zh=n.prototype}function A(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function _(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function v(e,n){e.i={De:n,Ke:!0},e.g=e.m||e.j}function f(e,n,o){return e.g=o,{value:n}}function b(e){e.g=0}function p(e,n,o){e.m=n,o!=null&&(e.j=o)}function k(e){e.m=0,e.j=2}function P(e,n){e.g=n,e.m=0}function j(e){e.m=0;var n=e.i.De;return e.i=null,n}function U(e){e.u=[e.i],e.m=0,e.j=0}function G(e,n){var o=e.u.splice(0)[0];(o=e.i=e.i||o)?o.Ke?e.g=e.m||e.j:o.A!=null&&e.j<o.A?(e.g=o.A,e.i=null):e.g=e.j:e.g=n}function ee(e){this.g=new A,this.h=e}function ne(e,n,o,w){try{var O=n.call(e.g.l,o);if(!(O instanceof Object))throw new TypeError("Iterator result "+O+" is not an object");if(!O.done)return e.g.o=!1,O;var L=O.value}catch(F){return e.g.l=null,v(e.g,F),re(e)}return e.g.l=null,w.call(e.g,L),re(e)}function re(e){for(;e.g.g;)try{var n=e.h(e.g);if(n)return e.g.o=!1,{value:n.value,done:!1}}catch(o){e.g.h=void 0,v(e.g,o)}if(e.g.o=!1,e.g.i){if(n=e.g.i,e.g.i=null,n.Ke)throw n.De;return{value:n.return,done:!0}}return{value:void 0,done:!0}}function oe(e){this.next=function(n){return _(e.g),e.g.l?n=ne(e,e.g.l.next,n,e.g.s):(e.g.s(n),n=re(e)),n},this.throw=function(n){return _(e.g),e.g.l?n=ne(e,e.g.l.throw,n,e.g.s):(v(e.g,n),n=re(e)),n},this.return=function(n){return function(o,w){_(o.g);var O=o.g.l;return O?ne(o,"return"in O?O.return:function(L){return{value:L,done:!0}},w,o.g.return):(o.g.return(w),re(o))}(e,n)},this[Symbol.iterator]=function(){return this}}function W(e){return function(n){function o(O){return n.next(O)}function w(O){return n.throw(O)}return new Promise(function(O,L){(function F(q){q.done?O(q.value):Promise.resolve(q.value).then(o,w).then(F,L)})(n.next())})}(new oe(new ee(e)))}function Te(){for(var e=Number(this),n=[],o=e;o<arguments.length;o++)n[o-e]=arguments[o];return n}function Ue(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function ze(e,n,o){e instanceof String&&(e=String(e));for(var w=e.length,O=0;O<w;O++){var L=e[O];if(n.call(o,L,O,e))return{Ie:O,v:L}}return{Ie:-1,v:void 0}}function le(e,n,o){if(e==null)throw new TypeError("The 'this' value for String.prototype."+o+" must not be null or undefined");if(n instanceof RegExp)throw new TypeError("First argument to String.prototype."+o+" must not be a regular expression");return e+""}function Se(e,n){e instanceof String&&(e+="");var o=0,w=!1,O={next:function(){if(!w&&o<e.length){var L=o++;return{value:n(L,e[L]),done:!1}}return w=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}A.prototype.s=function(e){this.h=e},A.prototype.return=function(e){this.i={return:e},this.g=this.j},A.prototype.A=function(e){this.g=e},h("Promise",function(e){function n(F){this.h=0,this.i=void 0,this.g=[],this.o=!1;var q=this.j();try{F(q.resolve,q.reject)}catch($){q.reject($)}}function o(){this.g=null}function w(F){return F instanceof n?F:new n(function(q){q(F)})}if(e)return e;o.prototype.h=function(F){if(this.g==null){this.g=[];var q=this;this.i(function(){q.l()})}this.g.push(F)};var O=c.setTimeout;o.prototype.i=function(F){O(F,0)},o.prototype.l=function(){for(;this.g&&this.g.length;){var F=this.g;this.g=[];for(var q=0;q<F.length;++q){var $=F[q];F[q]=null;try{$()}catch(ce){this.j(ce)}}}this.g=null},o.prototype.j=function(F){this.i(function(){throw F})},n.prototype.j=function(){function F(ce){return function(ue){$||($=!0,ce.call(q,ue))}}var q=this,$=!1;return{resolve:F(this.F),reject:F(this.l)}},n.prototype.F=function(F){if(F===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(F instanceof n)this.H(F);else{e:switch(typeof F){case"object":var q=F!=null;break e;case"function":q=!0;break e;default:q=!1}q?this.D(F):this.m(F)}},n.prototype.D=function(F){var q=void 0;try{q=F.then}catch($){return void this.l($)}typeof q=="function"?this.J(q,F):this.m(F)},n.prototype.l=function(F){this.s(2,F)},n.prototype.m=function(F){this.s(1,F)},n.prototype.s=function(F,q){if(this.h!=0)throw Error("Cannot settle("+F+", "+q+"): Promise already settled in state"+this.h);this.h=F,this.i=q,this.h===2&&this.G(),this.u()},n.prototype.G=function(){var F=this;O(function(){if(F.B()){var q=c.console;q!==void 0&&q.error(F.i)}},1)},n.prototype.B=function(){if(this.o)return!1;var F=c.CustomEvent,q=c.Event,$=c.dispatchEvent;return $===void 0||(typeof F=="function"?F=new F("unhandledrejection",{cancelable:!0}):typeof q=="function"?F=new q("unhandledrejection",{cancelable:!0}):(F=c.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,F),F.promise=this,F.reason=this.i,$(F))},n.prototype.u=function(){if(this.g!=null){for(var F=0;F<this.g.length;++F)L.h(this.g[F]);this.g=null}};var L=new o;return n.prototype.H=function(F){var q=this.j();F.Lc(q.resolve,q.reject)},n.prototype.J=function(F,q){var $=this.j();try{F.call(q,$.resolve,$.reject)}catch(ce){$.reject(ce)}},n.prototype.then=function(F,q){function $(_e,Qe){return typeof _e=="function"?function(ut){try{ce(_e(ut))}catch(at){ue(at)}}:Qe}var ce,ue,Ie=new n(function(_e,Qe){ce=_e,ue=Qe});return this.Lc($(F,ce),$(q,ue)),Ie},n.prototype.catch=function(F){return this.then(void 0,F)},n.prototype.Lc=function(F,q){function $(){switch(ce.h){case 1:F(ce.i);break;case 2:q(ce.i);break;default:throw Error("Unexpected state: "+ce.h)}}var ce=this;this.g==null?L.h($):this.g.push($),this.o=!0},n.resolve=w,n.reject=function(F){return new n(function(q,$){$(F)})},n.race=function(F){return new n(function(q,$){for(var ce=i(F),ue=ce.next();!ue.done;ue=ce.next())w(ue.value).Lc(q,$)})},n.all=function(F){var q=i(F),$=q.next();return $.done?w([]):new n(function(ce,ue){function Ie(ut){return function(at){_e[ut]=at,--Qe==0&&ce(_e)}}var _e=[],Qe=0;do _e.push(void 0),Qe++,w($.value).Lc(Ie(_e.length-1),ue),$=q.next();while(!$.done)})},n}),h("WeakMap",function(e){function n($){if(this.g=(q+=Math.random()+1).toString(),$){$=i($);for(var ce;!(ce=$.next()).done;)ce=ce.value,this.set(ce[0],ce[1])}}function o(){}function w($){var ce=typeof $;return ce==="object"&&$!==null||ce==="function"}function O($){if(!Ue($,F)){var ce=new o;l($,F,{value:ce})}}function L($){var ce=Object[$];ce&&(Object[$]=function(ue){return ue instanceof o?ue:(Object.isExtensible(ue)&&O(ue),ce(ue))})}if(function(){if(!e||!Object.seal)return!1;try{var $=Object.seal({}),ce=Object.seal({}),ue=new e([[$,2],[ce,3]]);return ue.get($)==2&&ue.get(ce)==3&&(ue.delete($),ue.set(ce,4),!ue.has($)&&ue.get(ce)==4)}catch{return!1}}())return e;var F="$jscomp_hidden_"+Math.random();L("freeze"),L("preventExtensions"),L("seal");var q=0;return n.prototype.set=function($,ce){if(!w($))throw Error("Invalid WeakMap key");if(O($),!Ue($,F))throw Error("WeakMap key fail: "+$);return $[F][this.g]=ce,this},n.prototype.get=function($){return w($)&&Ue($,F)?$[F][this.g]:void 0},n.prototype.has=function($){return w($)&&Ue($,F)&&Ue($[F],this.g)},n.prototype.delete=function($){return!!(w($)&&Ue($,F)&&Ue($[F],this.g))&&delete $[F][this.g]},n}),h("Map",function(e){function n(){var q={};return q.Pa=q.next=q.head=q}function o(q,$){var ce=q.g;return y(function(){if(ce){for(;ce.head!=q.g;)ce=ce.Pa;for(;ce.next!=ce.head;)return ce=ce.next,{done:!1,value:$(ce)};ce=null}return{done:!0,value:void 0}})}function w(q,$){var ce=$&&typeof $;ce=="object"||ce=="function"?L.has($)?ce=L.get($):(ce=""+ ++F,L.set($,ce)):ce="p_"+$;var ue=q.h[ce];if(ue&&Ue(q.h,ce))for(q=0;q<ue.length;q++){var Ie=ue[q];if($!=$&&Ie.key!=Ie.key||$===Ie.key)return{id:ce,list:ue,index:q,fa:Ie}}return{id:ce,list:ue,index:-1,fa:void 0}}function O(q){if(this.h={},this.g=n(),this.size=0,q){q=i(q);for(var $;!($=q.next()).done;)$=$.value,this.set($[0],$[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var q=Object.seal({x:4}),$=new e(i([[q,"s"]]));if($.get(q)!="s"||$.size!=1||$.get({x:4})||$.set({x:4},"t")!=$||$.size!=2)return!1;var ce=$.entries(),ue=ce.next();return!ue.done&&ue.value[0]==q&&ue.value[1]=="s"&&!((ue=ce.next()).done||ue.value[0].x!=4||ue.value[1]!="t"||!ce.next().done)}catch{return!1}}())return e;var L=new WeakMap;O.prototype.set=function(q,$){var ce=w(this,q=q===0?0:q);return ce.list||(ce.list=this.h[ce.id]=[]),ce.fa?ce.fa.value=$:(ce.fa={next:this.g,Pa:this.g.Pa,head:this.g,key:q,value:$},ce.list.push(ce.fa),this.g.Pa.next=ce.fa,this.g.Pa=ce.fa,this.size++),this},O.prototype.delete=function(q){return!(!(q=w(this,q)).fa||!q.list||(q.list.splice(q.index,1),q.list.length||delete this.h[q.id],q.fa.Pa.next=q.fa.next,q.fa.next.Pa=q.fa.Pa,q.fa.head=null,this.size--,0))},O.prototype.clear=function(){this.h={},this.g=this.g.Pa=n(),this.size=0},O.prototype.has=function(q){return!!w(this,q).fa},O.prototype.get=function(q){return(q=w(this,q).fa)&&q.value},O.prototype.entries=function(){return o(this,function(q){return[q.key,q.value]})},O.prototype.keys=function(){return o(this,function(q){return q.key})},O.prototype.values=function(){return o(this,function(q){return q.value})},O.prototype.forEach=function(q,$){for(var ce,ue=this.entries();!(ce=ue.next()).done;)ce=ce.value,q.call($,ce[1],ce[0],this)},O.prototype[Symbol.iterator]=O.prototype.entries;var F=0;return O}),h("Set",function(e){function n(o){if(this.g=new Map,o){o=i(o);for(var w;!(w=o.next()).done;)this.add(w.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var o=Object.seal({x:4}),w=new e(i([o]));if(!w.has(o)||w.size!=1||w.add(o)!=w||w.size!=1||w.add({x:4})!=w||w.size!=2)return!1;var O=w.entries(),L=O.next();return!L.done&&L.value[0]==o&&L.value[1]==o&&!(L=O.next()).done&&L.value[0]!=o&&L.value[0].x==4&&L.value[1]==L.value[0]&&O.next().done}catch{return!1}}()?e:(n.prototype.add=function(o){return o=o===0?0:o,this.g.set(o,o),this.size=this.g.size,this},n.prototype.delete=function(o){return o=this.g.delete(o),this.size=this.g.size,o},n.prototype.clear=function(){this.g.clear(),this.size=0},n.prototype.has=function(o){return this.g.has(o)},n.prototype.entries=function(){return this.g.entries()},n.prototype.values=function(){return this.g.values()},n.prototype.keys=n.prototype.values,n.prototype[Symbol.iterator]=n.prototype.values,n.prototype.forEach=function(o,w){var O=this;this.g.forEach(function(L){return o.call(w,L,L,O)})},n)}),h("Array.prototype.findIndex",function(e){return e||function(n,o){return ze(this,n,o).Ie}}),h("Object.is",function(e){return e||function(n,o){return n===o?n!==0||1/n==1/o:n!=n&&o!=o}}),h("Array.prototype.includes",function(e){return e||function(n,o){var w=this;w instanceof String&&(w=String(w));var O=w.length;for(0>(o=o||0)&&(o=Math.max(o+O,0));o<O;o++){var L=w[o];if(L===n||Object.is(L,n))return!0}return!1}}),h("String.prototype.includes",function(e){return e||function(n,o){return le(this,n,"includes").indexOf(n,o||0)!==-1}}),h("Array.prototype.find",function(e){return e||function(n,o){return ze(this,n,o).v}}),h("String.prototype.startsWith",function(e){return e||function(n,o){var w=le(this,n,"startsWith"),O=w.length,L=n.length;o=Math.max(0,Math.min(0|o,w.length));for(var F=0;F<L&&o<O;)if(w[o++]!=n[F++])return!1;return F>=L}}),h("Array.prototype.keys",function(e){return e||function(){return Se(this,function(n){return n})}});var be=typeof Object.assign=="function"?Object.assign:function(e,n){for(var o=1;o<arguments.length;o++){var w=arguments[o];if(w)for(var O in w)Ue(w,O)&&(e[O]=w[O])}return e};h("Object.assign",function(e){return e||be}),h("Array.from",function(e){return e||function(n,o,w){o=o??function(q){return q};var O=[],L=typeof Symbol<"u"&&Symbol.iterator&&n[Symbol.iterator];if(typeof L=="function"){n=L.call(n);for(var F=0;!(L=n.next()).done;)O.push(o.call(w,L.value,F++))}else for(L=n.length,F=0;F<L;F++)O.push(o.call(w,n[F],F));return O}}),h("Array.prototype.values",function(e){return e||function(){return Se(this,function(n,o){return o})}}),h("Promise.prototype.finally",function(e){return e||function(n){return this.then(function(o){return Promise.resolve(n()).then(function(){return o})},function(o){return Promise.resolve(n()).then(function(){throw o})})}}),h("Array.prototype.entries",function(e){return e||function(){return Se(this,function(n,o){return[n,o]})}}),h("String.prototype.repeat",function(e){return e||function(n){var o=le(this,null,"repeat");if(0>n||1342177279<n)throw new RangeError("Invalid count value");n|=0;for(var w="";n;)1&n&&(w+=o),(n>>>=1)&&(o+=o);return w}}),h("Number.isNaN",function(e){return e||function(n){return typeof n=="number"&&isNaN(n)}}),h("Object.values",function(e){return e||function(n){var o,w=[];for(o in n)Ue(n,o)&&w.push(n[o]);return w}}),h("Math.log2",function(e){return e||function(n){return Math.log(n)/Math.LN2}}),h("Math.trunc",function(e){return e||function(n){if(n=Number(n),isNaN(n)||n===1/0||n===-1/0||n===0)return n;var o=Math.floor(Math.abs(n));return 0>n?-o:o}}),h("Object.entries",function(e){return e||function(n){var o,w=[];for(o in n)Ue(n,o)&&w.push([o,n[o]]);return w}});var Y=this||self;function Q(e,n){e=e.split(".");var o,w=Y;for((e[0]in w)||w.execScript===void 0||w.execScript("var "+e[0]);e.length&&(o=e.shift());)e.length||n===void 0?w=w[o]&&w[o]!==Object.prototype[o]?w[o]:w[o]={}:w[o]=n}function J(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function fe(e){return e.h/(1-Math.pow(e.g,e.i))}function Ce(){this.h=new J(2),this.j=new J(5),this.g=0,this.i=128e3,this.l=16e3}function V(){}function H(){}function z(){}function X(e){var n=Te.apply(1,arguments);ge.has(e)||(ge.add(e),z.apply(V,g(n)))}function de(){}J.prototype.sample=function(e,n){var o=Math.pow(this.g,e);n=n*(1-o)+o*this.h,isNaN(n)||(this.h=n,this.i+=e)},Ce.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},Ce.prototype.sample=function(e,n){if(!(n<this.l)){var o=8e3*n/e;e/=1e3,this.g+=n,this.h.sample(e,o),this.j.sample(e,o)}},Ce.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(fe(this.h),fe(this.j))};var ge=new Set;if(C.console&&C.console.log.bind){var Ge={},it=(Ge[1]=console.error.bind(console),Ge[2]=console.warn.bind(console),Ge[3]=console.info.bind(console),Ge[4]=console.log.bind(console),Ge[5]=console.debug.bind(console),Ge[6]=console.debug.bind(console),Ge);z=it[2],H=it[1]}function Ye(e){if(Ke.has(e))return Ke.get(e);var n=MediaSource.isTypeSupported(e);return Ke.set(e,n),n}var Ke=new Map;function dt(e,n){return!(typeof e!="number"||typeof n!="number"||!isNaN(e)||!isNaN(n))||e===n}function me(e,n){-1<(n=e.indexOf(n))&&e.splice(n,1)}function ke(e,n,o){if(o||(o=dt),e.length!=n.length)return!1;n=n.slice();for(var w={},O=(e=i(e)).next();!O.done;w={md:w.md},O=e.next()){if(w.md=O.value,(O=n.findIndex(function(L){return function(F){return o(L.md,F)}}(w)))==-1)return!1;n[O]=n[n.length-1],n.pop()}return n.length==0}function Je(e,n,o){if(o||(o=dt),e.length!=n.length)return!1;for(var w=0;w<e.length;w++)if(!o(e[w],n[w]))return!1;return!0}function Xe(e,n,o){this.startTime=e,this.direction=hn,this.endTime=n,this.payload=o,this.region=new $t,this.position=null,this.positionAlign=Tt,this.size=0,this.textAlign=bt,this.writingMode=Xn,this.lineInterpretation=on,this.line=null,this.lineHeight="",this.lineAlign=Zn,this.displayAlign=pn,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.textShadow=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Ir,this.fontStyle=nn,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}function nt(e,n){if(e.startTime!=n.startTime||e.endTime!=n.endTime||e.payload!=n.payload)return!1;for(var o in e)if(o!="startTime"&&o!="endTime"&&o!="payload"){if(o=="nestedCues"){if(!Je(e.nestedCues,n.nestedCues,nt))return!1}else if(o=="region"||o=="cellResolution"){for(var w in e[o])if(e[o][w]!=n[o][w])return!1}else if(Array.isArray(e[o])){if(!Je(e[o],n[o]))return!1}else if(e[o]!=n[o])return!1}return!0}Xe.prototype.clone=function(){var e,n=new Xe(0,0,"");for(e in this)n[e]=this[e],n[e]&&n[e].constructor==Array&&(n[e]=n[e].slice());return n},Q("shaka.text.Cue",Xe);var Tt="auto";Xe.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Tt};var bt="center",Ft={LEFT:"left",RIGHT:"right",CENTER:bt,START:"start",END:"end"};Xe.textAlign=Ft;var pn="after",wn={BEFORE:"before",CENTER:"center",AFTER:pn};Xe.displayAlign=wn;var hn="ltr";Xe.direction={HORIZONTAL_LEFT_TO_RIGHT:hn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Xn="horizontal-tb";Xe.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Xn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var on=0;Xe.lineInterpretation={LINE_NUMBER:on,PERCENTAGE:1};var Zn="start",Bn={CENTER:"center",START:Zn,END:"end"};Xe.lineAlign=Bn;var Rr={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};Xe.defaultTextColor=Rr;var Nr={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};Xe.defaultTextBackgroundColor=Nr;var Ir=400;Xe.fontWeight={NORMAL:Ir,BOLD:700};var nn="normal",rn={NORMAL:nn,ITALIC:"italic",OBLIQUE:"oblique"};function $t(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Nt,this.scroll=en}Xe.fontStyle=rn,Xe.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},Q("shaka.text.CueRegion",$t);var Nt=1;$t.units={PX:0,PERCENTAGE:Nt,LINES:2};var en="";function _t(){}function pt(e,n){if(!e&&!n)return!0;if(!e||!n||e.byteLength!=n.byteLength)return!1;if(wt(e)==wt(n)&&(e.byteOffset||0)==(n.byteOffset||0))return!0;var o=Vt(e);n=Vt(n);for(var w=0;w<e.byteLength;w++)if(o[w]!=n[w])return!1;return!0}function wt(e){return e instanceof ArrayBuffer?e:e.buffer}function Dt(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Vt(e,n,o){return fn(e,n===void 0?0:n,o=o===void 0?1/0:o,Uint8Array)}function Wt(e,n,o){return fn(e,n===void 0?0:n,o=o===void 0?1/0:o,DataView)}function fn(e,n,o,w){var O=(e.byteOffset||0)+e.byteLength;return n=Math.max(0,Math.min((e.byteOffset||0)+n,O)),new w(wt(e),n,Math.min(n+Math.max(o,0),O)-n)}function ht(e,n,o){var w=Te.apply(3,arguments);this.severity=e,this.category=n,this.code=o,this.data=w,this.handled=!1}$t.scrollMode={NONE:en,UP:"up"},Q("shaka.util.BufferUtils",_t),_t.toDataView=Wt,_t.toUint8=Vt,_t.toArrayBuffer=Dt,_t.equal=pt,ht.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},Q("shaka.util.Error",ht),ht.Severity={RECOVERABLE:1,CRITICAL:2},ht.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},ht.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};var jn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function vn(e){var n;e instanceof vn?(fr(this,e.Ea),this.pb=e.pb,this.Ha=e.Ha,Sr(this,e.Kb),this.qa=e.qa,Zr(this,e.g.clone()),this.fb=e.fb):e&&(n=String(e).match(jn))?(fr(this,n[1]||"",!0),this.pb=zn(n[2]||""),this.Ha=zn(n[3]||"",!0),Sr(this,n[4]),this.qa=zn(n[5]||"",!0),Zr(this,n[6]||"",!0),this.fb=zn(n[7]||"")):this.g=new Fi(null)}function fr(e,n,o){e.Ea=o?zn(n,!0):n,e.Ea&&(e.Ea=e.Ea.replace(/:$/,""))}function Sr(e,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);e.Kb=n}else e.Kb=null}function Zr(e,n,o){n instanceof Fi?e.g=n:(o||(n=gn(n,ci)),e.g=new Fi(n))}function zn(e,n){return e?n?decodeURI(e):decodeURIComponent(e):""}function gn(e,n,o){return e!=null?(e=encodeURI(e).replace(n,En),o&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function En(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(E=vn.prototype).Ea="",E.pb="",E.Ha="",E.Kb=null,E.qa="",E.fb="",E.toString=function(){var e=[],n=this.Ea;if(n&&e.push(gn(n,Nn,!0),":"),n=this.Ha){e.push("//");var o=this.pb;o&&e.push(gn(o,Nn,!0),"@"),e.push(encodeURIComponent(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),(n=this.Kb)!=null&&e.push(":",String(n))}return(n=this.qa)&&(this.Ha&&n.charAt(0)!="/"&&e.push("/"),e.push(gn(n,n.charAt(0)=="/"?Or:pr,!0))),(n=this.g.toString())&&e.push("?",n),(n=this.fb)&&e.push("#",gn(n,di)),e.join("")},E.resolve=function(e){var n=this.clone();n.Ea==="data"&&(n=new vn);var o=!!e.Ea;o?fr(n,e.Ea):o=!!e.pb,o?n.pb=e.pb:o=!!e.Ha,o?n.Ha=e.Ha:o=e.Kb!=null;var w=e.qa;if(o)Sr(n,e.Kb);else if(o=!!e.qa){if(w.charAt(0)!="/")if(this.Ha&&!this.qa)w="/"+w;else{var O=n.qa.lastIndexOf("/");O!=-1&&(w=n.qa.substr(0,O+1)+w)}if(w==".."||w==".")w="";else if(w.indexOf("./")!=-1||w.indexOf("/.")!=-1){O=w.lastIndexOf("/",0)==0,w=w.split("/");for(var L=[],F=0;F<w.length;){var q=w[F++];q=="."?O&&F==w.length&&L.push(""):q==".."?((1<L.length||L.length==1&&L[0]!="")&&L.pop(),O&&F==w.length&&L.push("")):(L.push(q),O=!0)}w=L.join("/")}}return o?n.qa=w:o=e.g.toString()!=="",o?Zr(n,e.g.clone()):o=!!e.fb,o&&(n.fb=e.fb),n},E.clone=function(){return new vn(this)};var Nn=/[#\/\?@]/g,pr=/[#\?:]/g,Or=/[#\?]/g,ci=/[#\?@]/g,di=/#/g;function Fi(e){this.g=e||null}function Ni(e){if(!e.la&&(e.la={},e.Oc=0,e.g))for(var n=e.g.split("&"),o=0;o<n.length;o++){var w=n[o].indexOf("="),O=null;if(0<=w){var L=n[o].substring(0,w);O=n[o].substring(w+1)}else L=n[o];L=decodeURIComponent(L.replace(/\+/g," ")),O=O||"",e.add(L,decodeURIComponent(O.replace(/\+/g," ")))}}function Ui(e,n){return e.concat(n)}function Ri(){}function _i(e){return e!=null}function ki(e,n){if(n.length==0)return e;var o=n.map(function(w){return new vn(w)});return e.map(function(w){return new vn(w)}).map(function(w){return o.map(function(O){return w.resolve(O)})}).reduce(Ui,[]).map(function(w){return w.toString()})}function Za(e,n){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set}}function Oa(e,n){if(n.length==1)return n[0];if((e=Bi(e,n))!=null)return e;throw new ht(2,4,4025,n)}function Bi(e,n){for(var o=i(fo[e]),w=o.next();!w.done;w=o.next()){w=w.value;for(var O=i(n),L=O.next();!L.done;L=O.next())if(L=L.value,w.test(L.trim()))return L.trim()}return e==Tr?"":null}(E=Fi.prototype).la=null,E.Oc=null,E.add=function(e,n){Ni(this),this.g=null;var o=this.la.hasOwnProperty(e)?this.la[e]:null;return o||(this.la[e]=o=[]),o.push(n),this.Oc++,this},E.set=function(e,n){return Ni(this),this.g=null,this.la.hasOwnProperty(e)?this.la[e]=[n]:this.add(e,n),this},E.toString=function(){if(this.g)return this.g;if(!this.la)return"";var e,n=[];for(e in this.la)for(var o=encodeURIComponent(e),w=this.la[e],O=0;O<w.length;O++){var L=o;w[O]!==""&&(L+="="+encodeURIComponent(w[O])),n.push(L)}return this.g=n.join("&")},E.clone=function(){var e=new Fi;if(e.g=this.g,this.la){var n,o={};for(n in this.la)o[n]=this.la[n].concat();e.la=o,e.Oc=this.Oc}return e};var Tr="text",ji={va:"video",Hc:"audio",X:Tr,Wb:"image",Gg:"application"},fo={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cx]$/,/^[du]dts$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvhe/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function xi(){var e,n,o=new Promise(function(w,O){e=w,n=O});return o.resolve=e,o.reject=n,o}function bo(e){this.h=e,this.g=void 0}function ho(e){this.h=e,this.g=null}function ni(e){this.h=e,this.g=null}function kn(){return!(!C.MediaSource||!MediaSource.isTypeSupported)}function nr(e){return Yi().canPlayType(e)!=""}function $r(){return ai("Xbox One")}function Ji(){return ai("Tizen")}function ea(){return ai("Web0S")&&ai("Chrome/38.0.2125.122 Safari/537.36")}function ta(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Ji()&&!ai("PC=EOS")&&!ai("VirginMedia")&&!Li()&&!ai("AFT")}function Li(){return ai("PlayStation 4")}function fa(){if(!ta())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function ai(e){return(navigator.userAgent||"").includes(e)}function Yi(){return Aa||(to||(to=new ni(function(){Aa=null})),(Aa=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Aa=document.createElement("video")),to.N(1),Aa)}xi.prototype.resolve=function(){},xi.prototype.reject=function(){},bo.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g},ho.prototype.N=function(e){var n=this;this.stop();var o=!0,w=null;return this.g=function(){C.clearTimeout(w),o=!1},w=C.setTimeout(function(){o&&n.h()},1e3*e),this},ho.prototype.stop=function(){this.g&&(this.g(),this.g=null)},ni.prototype.Mb=function(){return this.stop(),this.h(),this},ni.prototype.N=function(e){var n=this;return this.stop(),this.g=new ho(function(){n.h()}).N(e),this},ni.prototype.Ca=function(e){var n=this;return this.stop(),this.g=new ho(function(){n.g.N(e),n.h()}).N(e),this},ni.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},Q("shaka.util.Timer",ni),ni.prototype.stop=ni.prototype.stop,ni.prototype.tickEvery=ni.prototype.Ca,ni.prototype.tickAfter=ni.prototype.N,ni.prototype.tickNow=ni.prototype.Mb;var to=null,Aa=null;function Ka(){}function Oi(e){if(!e)return"";if((e=Vt(e))[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),C.TextDecoder&&!Li())return(e=new TextDecoder().decode(e)).includes("")&&H('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var n="",o=0;o<e.length;++o){var w=65533;if(128&e[o]?e.length>=o+2&&(224&e[o])==192&&(192&e[o+1])==128?(w=(31&e[o])<<6|63&e[o+1],o+=1):e.length>=o+3&&(240&e[o])==224&&(192&e[o+1])==128&&(192&e[o+2])==128?(w=(15&e[o])<<12|(63&e[o+1])<<6|63&e[o+2],o+=2):e.length>=o+4&&(241&e[o])==240&&(192&e[o+1])==128&&(192&e[o+2])==128&&(192&e[o+3])==128&&(w=(7&e[o])<<18|(63&e[o+1])<<12|(63&e[o+2])<<6|63&e[o+3],o+=3):w=e[o],65535>=w)n+=String.fromCharCode(w);else{var O=1023&(w-=65536);n+=String.fromCharCode(55296+(w>>10)),n+=String.fromCharCode(56320+O)}}return n}function Bt(e,n,o){if(!e)return"";if(!o&&e.byteLength%2!=0)throw new ht(2,2,2004);o=Math.floor(e.byteLength/2);var w=new Uint16Array(o);e=Wt(e);for(var O=0;O<o;O++)w[O]=e.getUint16(2*O,n);return ir.value()(w)}function dn(e){function n(w){return o.byteLength<=w||32<=o[w]&&126>=o[w]}if(!e)return"";var o=Vt(e);if(o[0]==239&&o[1]==187&&o[2]==191)return Oi(o);if(o[0]==254&&o[1]==255)return Bt(o.subarray(2),!1);if(o[0]==255&&o[1]==254)return Bt(o.subarray(2),!0);if(o[0]==0&&o[2]==0)return Bt(e,!1);if(o[1]==0&&o[3]==0)return Bt(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return Oi(e);throw new ht(2,2,2003)}function Un(e){if(C.TextEncoder&&!Li()){var n=new TextEncoder;return Dt(n.encode(e))}e=encodeURIComponent(e),e=unescape(e),n=new Uint8Array(e.length);for(var o=0;o<e.length;o++)n[o]=e[o].charCodeAt(0);return Dt(n)}function or(e,n){for(var o=new ArrayBuffer(2*e.length),w=new DataView(o),O=0;O<e.length;++O)w.setUint16(2*O,e.charCodeAt(O),n);return o}Q("shaka.util.StringUtils",Ka),Ka.resetFromCharCode=function(){ir.g=void 0},Ka.toUTF16=or,Ka.toUTF8=Un,Ka.fromBytesAutoDetect=dn,Ka.fromUTF16=Bt,Ka.fromUTF8=Oi;var ir=new bo(function(){function e(o){try{var w=new Uint8Array(o);return 0<String.fromCharCode.apply(null,w).length}catch{return!1}}for(var n={Ta:65536};0<n.Ta;(n={Ta:n.Ta}).Ta/=2)if(e(n.Ta))return function(o){return function(w){for(var O="",L=0;L<w.length;L+=o.Ta)O+=String.fromCharCode.apply(null,w.subarray(L,L+o.Ta));return O}}(n);return null});function gr(){}function Hr(e){return e=Vt(e),e=ir.value()(e),btoa(e)}function qr(e,n){return n=n==null||n,e=Hr(e).replace(/\+/g,"-").replace(/\//g,"_"),n?e:e.replace(/[=]*$/,"")}function Dr(e){e=C.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(e.length),o=0;o<e.length;++o)n[o]=e.charCodeAt(o);return n}function Br(e){for(var n=e.length/2,o=new Uint8Array(n),w=0;w<n;w++)o[w]=C.parseInt(e.substr(2*w,2),16);return o}function pi(e){var n=Vt(e);e="";for(var o=(n=i(n)).next();!o.done;o=n.next())(o=(o=o.value).toString(16)).length==1&&(o="0"+o),e+=o;return e}function zi(){for(var e=Te.apply(0,arguments),n=0,o=i(e),w=o.next();!w.done;w=o.next())n+=w.value.byteLength;for(n=new Uint8Array(n),o=0,w=(e=i(e)).next();!w.done;w=e.next())w=w.value,n.set(Vt(w),o),o+=w.byteLength;return n}function Mi(){}Q("shaka.util.Uint8ArrayUtils",gr),gr.concat=zi,gr.toHex=pi,gr.fromHex=Br,gr.fromBase64=Dr,gr.toBase64=qr,gr.toStandardBase64=Hr,Q("shaka.dependencies",Mi),Mi.has=function(e){return Wi.has(e)},Mi.add=function(e,n){if(!ga[e])throw Error(e+" is not supported");Wi.set(e,function(){return n})};var ga={muxjs:"muxjs"};Mi.Allowed=ga;var Wi=new Map([["muxjs",function(){return C.muxjs}]]);function Gi(e){var n=this;this.o=e,this.m=Wi.get("muxjs")(),this.g=new this.m.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.h=null,this.l=[],this.i=[],this.j=!1,this.g.on("data",function(o){n.i=o.captions,n.l.push(zi(o.initSegment,o.data))}),this.g.on("done",function(){var o={data:zi.apply(gr,g(n.l)),captions:n.i};n.h.resolve(o),n.j=!1})}function Yn(e,n){var o=na(e),w=e.toLowerCase().split(";")[0]=="audio/aac";return!(!Wi.get("muxjs")()||!o&&!w)&&(w?Ye('audio/mp4; codecs="mp4a.40.2"'):n?Ye(Ma(n,e)):(n=Ma("audio",e),e=Ma("video",e),Ye(n)||Ye(e)))}function na(e){return e.toLowerCase().split(";")[0].split("/")[1]=="mp2t"}function Ar(e,n){return n.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="mp4a.40.2"':na(n)?Ma(e,n):n}function Ma(e,n){if(n=n.replace(/mp2t/i,"mp4"),e=="audio"&&(n=n.replace("video","audio")),e=/avc1\.(66|77|100)\.(\d+)/.exec(n)){var o="avc1.",w=e[1],O=Number(e[2]);o=(w=="66"?o+"4200":w=="77"?o+"4d00":o+"6400")+(O>>4).toString(16),o+=(15&O).toString(16),n=n.replace(e[0],o)}return n}function Io(){}function ma(e,n){return n&&(e+='; codecs="'+n+'"'),e}function Wa(e,n,o){return Yn(e=ma(e,n),o)?Ar(o,e):o=="audio"?e.replace("video","audio"):e}function Ta(e){var n=Xa(e);switch(e=n[0],n=n[1].toLowerCase(),!0){case(e==="mp4a"&&n==="69"):case(e==="mp4a"&&n==="6b"):return"mp3";case(e==="mp4a"&&n==="66"):case(e==="mp4a"&&n==="67"):case(e==="mp4a"&&n==="68"):case(e==="mp4a"&&n==="40.2"):case(e==="mp4a"&&n==="40.02"):case(e==="mp4a"&&n==="40.5"):case(e==="mp4a"&&n==="40.05"):case(e==="mp4a"&&n==="40.29"):case(e==="mp4a"&&n==="40.42"):return"aac";case(e==="mp4a"&&n==="a5"):return"ac-3";case(e==="mp4a"&&n==="a6"):return"ec-3";case(e==="mp4a"&&n==="b2"):return"dtsx";case(e==="mp4a"&&n==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="dvh1":case e==="dvhe":return"dovi"}return e}function Uo(e){return(e=e.split(/ *; */)).shift(),(e=e.find(function(n){return n.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Xa(e){var n=(e=e.split("."))[0];return e.shift(),[n,e.join(".")]}function Qa(e){this.j=null,this.i=e,this.u=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.B="",this.o=new Map}function io(e){return!(!ia[e]&&e!="application/cea-608"&&e!="application/cea-708")}function qo(e,n,o){if(e.B=n,n=e.o.get(n))for(var w=i(n.keys()),O=w.next();!O.done;O=w.next())(O=n.get(O.value).filter(function(L){return L.endTime<=o}))&&e.i.append(O)}function Ai(e,n,o){n.startTime+=o,n.endTime+=o;for(var w=(n=i(n.nestedCues)).next();!w.done;w=n.next())Ai(e,w.value,o)}function To(e,n,o,w,O){for(var L=o+" "+w,F=new Map,q=(n=i(n)).next();!q.done;q=n.next()){var $=q.value;q=$.stream,$=$.cue,F.has(q)||F.set(q,new Map),F.get(q).has(L)||F.get(q).set(L,[]),Ai(e,$,O),$.startTime>=e.l&&$.startTime<e.m&&(F.get(q).get(L).push($),q==e.B&&e.i.append([$]))}for(L=(O=i(F.keys())).next();!L.done;L=O.next())for(L=L.value,e.o.has(L)||e.o.set(L,new Map),q=(n=i(F.get(L).keys())).next();!q.done;q=n.next())q=q.value,$=F.get(L).get(q),e.o.get(L).set(q,$);e.g=e.g==null?Math.max(o,e.l):Math.min(e.g,Math.max(o,e.l)),e.h=Math.max(e.h,Math.min(w,e.m))}Gi.prototype.destroy=function(){return this.g.dispose(),this.g=null,Promise.resolve()},Q("shaka.util.MimeUtils",Io),Io.getFullType=ma,new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),Qa.prototype.destroy=function(){return this.i=this.j=null,this.o.clear(),Promise.resolve()},Qa.prototype.remove=function(e,n){var o=this;return W(function(w){if(w.g==1)return f(w,Promise.resolve(),2);!o.i||!o.i.remove(e,n)||o.g==null||n<=o.g||e>=o.h||(e<=o.g&&n>=o.h?o.g=o.h=null:e<=o.g&&n<o.h?o.g=n:e>o.g&&n>=o.h&&(o.h=e)),b(w)})},Q("shaka.text.TextEngine",Qa),Qa.prototype.destroy=Qa.prototype.destroy,Qa.findParser=function(e){return ia[e]},Qa.unregisterParser=function(e){delete ia[e]},Qa.registerParser=function(e,n){ia[e]=n};var ia={};function wa(){}function Ci(e,n){return e=jr(e),n=jr(n),e.split("-")[0]==n.split("-")[0]}function pa(e,n){return e=jr(e),n=jr(n),e=e.split("-"),n=n.split("-"),e[0]==n[0]&&e.length==1&&n.length==2}function qa(e,n){return e=jr(e),n=jr(n),e=e.split("-"),n=n.split("-"),e.length==2&&n.length==2&&e[0]==n[0]}function jr(e){var n=e.split("-");return e=n[0]||"",n=n[1]||"",e=e.toLowerCase(),e=_o.get(e)||e,(n=n.toUpperCase())?e+"-"+n:e}function Xi(e,n){return e=jr(e),(n=jr(n))==e?4:pa(n,e)?3:qa(n,e)?2:pa(e,n)?1:0}function Ia(e){var n=e.indexOf("-");return e=(e=0<=n?e.substring(0,n):e).toLowerCase(),_o.get(e)||e}function Da(e){return e.language?jr(e.language):e.audio&&e.audio.language?jr(e.audio.language):e.video&&e.video.language?jr(e.video.language):"und"}function po(e,n){e=jr(e);var o=new Set,w=i(n);for(n=w.next();!n.done;n=w.next())o.add(jr(n.value));for(n=(w=i(o)).next();!n.done;n=w.next())if((n=n.value)==e)return n;for(n=(w=i(o)).next();!n.done;n=w.next())if(pa(n=n.value,e))return n;for(n=(w=i(o)).next();!n.done;n=w.next())if(qa(n=n.value,e))return n;for(n=(o=i(o)).next();!n.done;n=o.next())if(pa(e,n=n.value))return n;return null}Q("shaka.util.LanguageUtils",wa),wa.findClosestLocale=po,wa.getLocaleForVariant=Da,wa.getLocaleForText=function(e){return jr(e.language||"und")},wa.getBase=Ia,wa.relatedness=Xi,wa.areSiblings=function(e,n){var o=Ia(e),w=Ia(n);return e!=o&&n!=w&&o==w},wa.normalize=jr,wa.isSiblingOf=qa,wa.isParentOf=pa,wa.areLanguageCompatible=Ci,wa.areLocaleCompatible=function(e,n){return(e=jr(e))==jr(n)};var _o=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function es(){this.g={}}function ps(e,n,o,w,O){var L=e.variants;(n.length||o.length)&&(L=function(q,$,ce){for(var ue={},Ie=($=i($)).next();!Ie.done;ue={xd:ue.xd},Ie=$.next())if(ue.xd=Ie.value,Ie=q.filter(function(_e){return function(Qe){return Qe.video&&Qe.video.codecs.startsWith(_e.xd)}}(ue)),Ie.length){q=Ie;break}for(ue={},$=(ce=i(ce)).next();!$.done;ue={jd:ue.jd},$=ce.next())if(ue.jd=$.value,$=q.filter(function(_e){return function(Qe){return Qe.audio&&Qe.audio.codecs.startsWith(_e.jd)}}(ue)),$.length){q=$;break}return q}(L,n,o)),n=function(q){for(var $=new es,ce=(q=i(q)).next();!ce.done;ce=q.next()){var ue=gs(ce=ce.value);$.push(ue,ce)}return $}(L=Kl(L,w)),n=function(q){var $=0,ce=new Map,ue=q.size();return q.forEach(function(Ie,_e){for(var Qe=(_e=i(_e)).next();!Qe.done;Qe=_e.next()){var ut=(Qe=Qe.value).video;if(ut&&ut.width&&ut.height){ut=ut.width*ut.height*(ut.frameRate||1),ce.has(ut)||ce.set(ut,new es);var at=ce.get(ut);at.push(Ie,Qe),at.size()===ue&&($=Math.max($,ut))}}}),$?ce.get($):q}(n);var F=function(q,$){for(var ce=($=i($)).next();!ce.done;ce=$.next())if((ce=ce.value)==Cu||ce==Ed){if((q=ts(q,ce)).size()==1)return q.keys()[0]}else if(ce==Qp)break;return function(ue){var Ie="",_e=1/0;return ue.forEach(function(Qe,ut){for(var at=0,Ct=0,yt=(ut=i(ut)).next();!yt.done;yt=ut.next())at+=yt.value.bandwidth||0,++Ct;(at/=Ct)<_e&&(Ie=Qe,_e=at)}),Ie}(q)}(n,O);e.variants=e.variants.filter(function(q){return gs(q)==F})}function ts(e,n){var o=0,w=new es;return e.forEach(function(O,L){for(var F=0,q=0,$=i(L),ce=$.next();!ce.done;ce=$.next())(ce=ce.value).decodingInfos.length&&(F+=ce.decodingInfos[0][n]?1:0,q++);(F/=q)>o?(w.g={},w.push(O,L),o=F):F==o&&w.push(O,L)}),w}function gs(e){var n="";e.video&&(n=Ta(e.video.codecs));var o="";return e.audio&&(o=Ta(e.audio.codecs)),n+"-"+o}function Fs(e,n,o){function w(L,F,q){return L>=F&&L<=q}var O=e.video;if(e.disabledUntilTime!=0){if(e.disabledUntilTime>Date.now()/1e3)return!1;e.disabledUntilTime=0}return!(O&&O.width&&O.height&&(!w(O.width,n.minWidth,Math.min(n.maxWidth,o.width))||!w(O.height,n.minHeight,Math.min(n.maxHeight,o.height))||!w(O.width*O.height,n.minPixels,n.maxPixels))||e&&e.video&&e.video.frameRate&&!w(e.video.frameRate,n.minFrameRate,n.maxFrameRate)||!w(e.bandwidth,n.minBandwidth,n.maxBandwidth))}function tu(e,n,o){for(var w=!1,O=(e=i(e)).next();!O.done;O=e.next()){var L=(O=O.value).allowedByApplication;O.allowedByApplication=Fs(O,n,o),L!=O.allowedByApplication&&(w=!0)}return w}function ns(e,n){return W(function(o){if(o.g==1)return f(o,nu(e.variants,n,!1),2);e.variants=e.variants.filter(function(w){var O=w.video;if(O){var L=no(O.codecs);if(O.codecs.includes(",")){var F=O.codecs.split(",");L=no(L=Oa("video",F)),F=ao(F=Oa("audio",F));var q=Wa(O.mimeType,F,"audio");if(!Ye(q))return!1;L=[L,F].join()}if(!Ye(F=Wa(O.mimeType,L,"video")))return!1;O.codecs=L}if(L=w.audio){if(F=ao(L.codecs),!Ye(q=Wa(L.mimeType,F,"audio")))return!1;L.codecs=F}return $r()&&O&&(O.width&&1920<O.width||O.height&&1080<O.height)&&(O.codecs.includes("avc1.")||O.codecs.includes("avc3."))?(Wc(w),!1):((O=w.decodingInfos.some(function($){return $.supported}))||Wc(w),O)}),b(o)})}function nu(e,n,o){var w,O,L,F,q,$,ce,ue,Ie,_e;return W(function(Qe){if(e.some(function(ut){return ut.decodingInfos.length}))return Qe.return();for(w=navigator.mediaCapabilities,O=[],L=function(ut,at){var Ct;return W(function(yt){return yt.g==1?(p(yt,2),f(yt,w.decodingInfo(at),4)):yt.g!=2?(Ct=yt.h,ut.decodingInfos.push(Ct),P(yt,0)):(j(yt),JSON.stringify(at),void b(yt))})},F=i(e),q=F.next();!q.done;q=F.next())for($=q.value,ce=Us($,n,o),ue=i(ce),Ie=ue.next();!Ie.done;Ie=ue.next())_e=Ie.value,O.push(L($,_e));return f(Qe,Promise.all(O),0)})}function Us(e,n,o){var w=e.audio,O=e.video;if(o={type:o?"file":"media-source"},O){var L=O.codecs;if(O.codecs.includes(",")){var F=O.codecs.split(",");L=no(L=Oa("video",F)),F=Oa("audio",F),F=Wa(O.mimeType,F,"audio"),o.audio={contentType:F,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}if(L=no(L),L=Wa(O.mimeType,L,"video"),o.video={contentType:L,width:O.width||64,height:O.height||64,bitrate:O.bandwidth||e.bandwidth||1,framerate:O.frameRate||1},O.hdr)switch(O.hdr){case"SDR":o.video.transferFunction="srgb";break;case"PQ":o.video.transferFunction="pq";break;case"HLG":o.video.transferFunction="hlg"}}if(w&&(L=ao(w.codecs),L=Wa(w.mimeType,L,"audio"),o.audio={contentType:L,channels:w.channelsCount||2,bitrate:w.bandwidth||e.bandwidth||1,samplerate:w.audioSamplingRate||1,spatialRendering:w.spatialAudio}),!(F=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[o];e=[],L=new Map;for(var q=(F=i(F)).next();!q.done;q=F.next()){var $=q.value;L.get($.keySystem)||L.set($.keySystem,[]),L.get($.keySystem).push($)}F=n?"required":"optional",n=n?["persistent-license"]:["temporary"];for(var ce=($=i(L.keys())).next();!ce.done;ce=$.next()){var ue=ce.value;ce=Object.assign({},o);var Ie=L.get(ue);for(ue={keySystem:ue,initDataType:"cenc",persistentState:F,distinctiveIdentifier:"optional",sessionTypes:n},q=(Ie=i(Ie)).next();!q.done;q=Ie.next()){if((q=q.value).initData&&q.initData.length){for(var _e=new Set,Qe=i(q.initData),ut=Qe.next();!ut.done;ut=Qe.next())_e.add(ut.value.initDataType);ue.initDataType=q.initData[0].initDataType}q.distinctiveIdentifierRequired&&(ue.distinctiveIdentifier="required"),q.persistentStateRequired&&(ue.persistentState="required"),q.sessionType&&(ue.sessionTypes=[q.sessionType]),w&&(ue.audio?ue.audio.robustness=ue.audio.robustness||q.audioRobustness:ue.audio={robustness:q.audioRobustness}),O&&(ue.video?ue.video.robustness=ue.video.robustness||q.videoRobustness:ue.video={robustness:q.videoRobustness})}ce.keySystemConfiguration=ue,e.push(ce)}return e}function ao(e){return Ji()&&e.toLowerCase()=="ac-3"?"ec-3":e}function no(e){if(e.includes("avc1")){var n=e.split(".");if(n.length==3)return e=n.shift()+".",(e+=parseInt(n.shift(),10).toString(16))+("000"+parseInt(n.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function ru(e,n){n.variants=n.variants.filter(function(o){var w=o.audio;return o=o.video,!(w&&e&&e.audio&&!al(w,e.audio)||o&&e&&e.video&&!al(o,e.video))})}function al(e,n){return e.mimeType==n.mimeType&&e.codecs.split(".")[0]==n.codecs.split(".")[0]}function iu(e){var n=e.audio,o=e.video,w=n?n.mimeType:null,O=o?o.mimeType:null,L=n?n.codecs:null,F=o?o.codecs:null,q=[];F&&q.push(F),L&&q.push(L);var $=[];o&&$.push(o.mimeType),n&&$.push(n.mimeType),$=$[0]||null;var ce=[];n&&ce.push(n.kind),o&&ce.push(o.kind),ce=ce[0]||null;var ue=new Set;if(n)for(var Ie=i(n.roles),_e=Ie.next();!_e.done;_e=Ie.next())ue.add(_e.value);if(o)for(_e=(Ie=i(o.roles)).next();!_e.done;_e=Ie.next())ue.add(_e.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:ce,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:$,audioMimeType:w,videoMimeType:O,codecs:q.join(", "),audioCodec:L,videoCodec:F,primary:e.primary,roles:Array.from(ue),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},o&&(e.videoId=o.id,e.originalVideoId=o.originalId,e.width=o.width||null,e.height=o.height||null,e.frameRate=o.frameRate||null,e.pixelAspectRatio=o.pixelAspectRatio||null,e.videoBandwidth=o.bandwidth||null),n&&(e.audioId=n.id,e.originalAudioId=n.originalId,e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.audioBandwidth=n.bandwidth||null,e.spatialAudio=n.spatialAudio,e.label=n.label,e.audioRoles=n.roles),e}function ol(e){return{id:e.id,active:!1,type:Tr,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null}}function Yc(e){var n=e.width||null,o=e.height||null,w=null;e.segmentIndex&&(w=e.segmentIndex.get(0));var O=e.tilesLayout;return w&&(O=w.tilesLayout||O),O&&n!=null&&(n/=Number(O.split("x")[0])),O&&o!=null&&(o/=Number(O.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:n,height:o,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:O||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId}}function Zl(e){return e.__shaka_id||(e.__shaka_id=yd++),e.__shaka_id}function gd(e){var n=md(e);return n.active=e.mode!="disabled",n.type="text",n.originalTextId=e.id,e.kind=="captions"&&(n.mimeType="application/cea-608"),e.kind&&(n.roles=[e.kind]),e.kind=="forced"&&(n.forced=!0),n}function sl(e){var n=md(e);return n.active=e.enabled,n.type="variant",n.originalAudioId=e.id,e.kind=="main"&&(n.primary=!0),e.kind&&(n.roles=[e.kind],n.audioRoles=[e.kind],n.label=e.label),n}function md(e){return{id:Zl(e),active:!1,type:"",bandwidth:0,language:jr(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function au(e){return e.allowedByApplication&&e.allowedByKeySystem}function Kl(e,n){for(var o=e.filter(function(F){return F.audio&&F.audio.channelsCount}),w=new Map,O=(o=i(o)).next();!O.done;O=o.next()){var L=(O=O.value).audio.channelsCount;w.has(L)||w.set(L,[]),w.get(L).push(O)}return(o=Array.from(w.keys())).length==0?e:(e=o.filter(function(F){return F<=n})).length?w.get(Math.max.apply(Math,g(e))):w.get(Math.min.apply(Math,g(o)))}function Ru(e,n,o,w){var O=e,L=e.filter(function($){return $.primary});L.length&&(O=L);var F=O.length?O[0].language:"";if(O=O.filter(function($){return $.language==F}),n){var q=po(jr(n),e.map(function($){return $.language}));q&&(O=e.filter(function($){return jr($.language)==q}))}if(O=O.filter(function($){return $.forced==w}),o){if((e=zc(O,o)).length)return e}else if(e=O.filter(function($){return $.roles.length==0}),e.length)return e;return e=O.map(function($){return $.roles}).reduce(Ui,[]),e.length?zc(O,e[0]):O}function zc(e,n){return e.filter(function(o){return o.roles.includes(n)})}function Wc(e){var n=[];return e.audio&&n.push(vd(e.audio)),e.video&&n.push(vd(e.video)),n.join(", ")}function vd(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}(E=es.prototype).push=function(e,n){this.g.hasOwnProperty(e)?this.g[e].push(n):this.g[e]=[n]},E.get=function(e){return(e=this.g[e])?e.slice():null},E.remove=function(e,n){e in this.g&&(this.g[e]=this.g[e].filter(function(o){return o!=n}),this.g[e].length==0&&delete this.g[e])},E.forEach=function(e){for(var n in this.g)e(n,this.g[n])},E.size=function(){return Object.keys(this.g).length},E.keys=function(){return Object.keys(this.g)};var yd=0,Cu="smooth",Ed="powerEfficient",Qp="bandwidth",Bs=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),bd=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Ra(){var e=this;this.l=null,this.o=!1,this.i=new Ce,navigator.connection&&navigator.connection.addEventListener("change",function(){if(e.g.useNetworkInformation&&e.o){e.i=new Ce,e.g&&e.i.configure(e.g.advanced);var n=e.chooseVariant();n&&e.l(n)}}),this.m=[],this.u=1,this.B=!1,this.h=this.j=this.g=this.s=null,this.D=new ni(function(){if(e.g.restrictToElementSize){var n=e.chooseVariant();n&&e.l(n)}})}function ou(e){var n=e.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation&&(n=1e6*navigator.connection.downlink),n}function ql(e,n,o,w){return e&&(n=n.filter(function(O){return Fs(O,e,{width:w,height:o})})),n.sort(function(O,L){return O.bandwidth-L.bandwidth})}(E=Ra.prototype).stop=function(){this.l=null,this.o=!1,this.m=[],this.u=1,this.j=this.s=null,this.h&&(this.h.disconnect(),this.h=null),this.D.stop()},E.init=function(e){this.l=e},E.chooseVariant=function(){var e=1/0,n=1/0;this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:C.devicePixelRatio,e=C.screen.height*n,n*=C.screen.width),this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:C.devicePixelRatio,e=this.j.clientWidth*n,n*=this.j.clientHeight),e=ql(this.g.restrictions,this.m,e,n),n=this.i.getBandwidthEstimate(ou(this)),this.m.length&&!e.length&&(e=[(e=ql(null,this.m,1/0,1/0))[0]]);for(var o=e[0]||null,w=0;w<e.length;w++){for(var O=e[w],L=isNaN(this.u)?1:Math.abs(this.u),F=L*O.bandwidth/this.g.bandwidthDowngradeTarget,q={bandwidth:1/0},$=w+1;$<e.length;$++)if(O.bandwidth!=e[$].bandwidth){q=e[$];break}L=L*q.bandwidth/this.g.bandwidthUpgradeTarget,n>=F&&n<=L&&o.bandwidth!=O.bandwidth&&(o=O)}return this.s=Date.now(),o},E.enable=function(){this.o=!0},E.disable=function(){this.o=!1},E.segmentDownloaded=function(e,n){if(this.i.sample(e,n),this.s!=null&&this.o)e:{if(this.B){if(Date.now()-this.s<1e3*this.g.switchInterval)break e}else{if(!((e=this.i).g>=e.i))break e;this.B=!0}e=this.chooseVariant(),this.i.getBandwidthEstimate(ou(this)),e&&this.l(e)}},E.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(ou(this))},E.setVariants=function(e){this.m=e},E.playbackRateChanged=function(e){this.u=e},E.setMediaElement=function(e){var n=this;this.j=e,this.h&&(this.h.disconnect(),this.h=null),this.j&&"ResizeObserver"in C&&(this.h=new ResizeObserver(function(){n.D.N(va)}),this.h.observe(this.j))},E.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)},Q("shaka.abr.SimpleAbrManager",Ra),Ra.prototype.configure=Ra.prototype.configure,Ra.prototype.setMediaElement=Ra.prototype.setMediaElement,Ra.prototype.playbackRateChanged=Ra.prototype.playbackRateChanged,Ra.prototype.setVariants=Ra.prototype.setVariants,Ra.prototype.getBandwidthEstimate=Ra.prototype.getBandwidthEstimate,Ra.prototype.segmentDownloaded=Ra.prototype.segmentDownloaded,Ra.prototype.disable=Ra.prototype.disable,Ra.prototype.enable=Ra.prototype.enable,Ra.prototype.chooseVariant=Ra.prototype.chooseVariant,Ra.prototype.init=Ra.prototype.init,Ra.prototype.stop=Ra.prototype.stop;var va=1;function ul(e,n){this.g=e,this.h=n}function ll(e,n){var o=new ul(5,0),w=Yl,O=w.g,L=o.h-O.h;(0<(o.g-O.g||L)?w.i:w.h)(w.g,o,e,n)}function $p(e,n,o,w){z([o,"has been deprecated and will be removed in",n,". We are currently at version",e,". Additional information:",w].join(" "))}function Xc(e,n,o,w){H([o,"has been deprecated and has been removed in",n,". We are now at version",e,". Additional information:",w].join(""))}ul.prototype.toString=function(){return"v"+this.g+"."+this.h};var Yl=null;function su(e,n){for(this.h=e,this.g=new Set([e]),n=(e=i(n=n||[])).next();!n.done;n=e.next())this.add(n.value)}function zl(e,n){var o;if(!(o=!!e.audio!=!!n.audio||!!e.video!=!!n.video||e.language!=n.language)&&(o=e.audio&&n.audio)){o=e.audio;var w=n.audio;o=!((!(!o.channelsCount||!w.channelsCount||2<o.channelsCount||2<w.channelsCount)||o.channelsCount==w.channelsCount)&&Td(o,w)&&Wl(o.roles,w.roles))}return!o&&(o=e.video&&n.video)&&(o=!(Td(e=e.video,n=n.video)&&Wl(e.roles,n.roles))),!o}function Td(e,n){if(e.mimeType!=n.mimeType||(e=e.codecs.split(",").map(function(w){return Xa(w)[0]}),n=n.codecs.split(",").map(function(w){return Xa(w)[0]}),e.length!=n.length))return!1;e.sort(),n.sort();for(var o=0;o<e.length;o++)if(e[o]!=n[o])return!1;return!0}function Wl(e,n){if(e=new Set(e),n=new Set(n),e.delete("main"),n.delete("main"),e.size!=n.size)return!1;for(var o=(e=i(e)).next();!o.done;o=e.next())if(!n.has(o.value))return!1;return!0}function Xl(e){this.g=e,this.h=new ms(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function ms(e,n,o,w){this.i=e,this.j=n,this.g=o,this.h=w===void 0?"":w}function _d(){this.g=ku,this.h=new Map().set(ku,2).set(js,1)}function Sd(e,n,o){e.h.set(ku,o).set(js,n)}Q("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),su.prototype.add=function(e){return!!zl(this.h,e)&&(this.g.add(e),!0)},su.prototype.values=function(){return this.g.values()},Xl.prototype.create=function(e){var n=this,o=e.filter(function(w){return zl(n.g,w)});return o.length?new su(o[0],o):this.h.create(e)},ms.prototype.create=function(e){var n=[];n=function(w,O){var L=po(O=jr(O),w.map(function(F){return Da(F)}));return L?w.filter(function(F){return L==Da(F)}):[]}(e,this.i);var o=e.filter(function(w){return w.primary});for(e=function(w,O){return w.filter(function(L){return!!L.audio&&(O?L.audio.roles.includes(O):L.audio.roles.length==0)})}(n=n.length?n:o.length?o:e,this.j),e.length&&(n=e),this.g&&(e=Kl(n,this.g)).length&&(n=e),this.h&&(e=function(w,O){return w.filter(function(L){return!!L.audio&&L.audio.label.toLowerCase()==O.toLowerCase()})}(n,this.h),e.length&&(n=e)),e=new su(n[0]),o=(n=i(n)).next();!o.done;o=n.next())o=o.value,zl(e.h,o)&&e.add(o);return e};var js=0,ku=1;function cl(e,n){var o=2,w=1e3,O=2,L=.5;this.l=e.maxAttempts==null?o:e.maxAttempts,this.j=e.baseDelay==null?w:e.baseDelay,this.o=e.fuzzFactor==null?L:e.fuzzFactor,this.m=e.backoffFactor==null?O:e.backoffFactor,this.g=0,this.h=this.j,(this.i=n!==void 0&&n)&&(this.g=1)}function Ad(e){var n,o;return W(function(w){if(w.g==1){if(e.g>=e.l){if(!e.i)throw new ht(2,7,1010);e.g=1,e.h=e.j}return n=e.g,e.g++,n==0?w.return():(o=e.h*(1+(2*Math.random()-1)*e.o),f(w,new Promise(function(O){new ni(O).N(o/1e3)}),2))}e.h*=e.m,b(w)})}function ya(e,n){this.promise=e,this.i=n,this.g=!1}function vs(e){return new ya(Promise.reject(e),function(){return Promise.resolve()})}function uu(){var e=Promise.reject(new ht(2,7,7001));return e.catch(function(){}),new ya(e,function(){return Promise.resolve()})}function Gs(e){return new ya(Promise.resolve(e),function(){return Promise.resolve()})}function No(e){return new ya(e,function(){return e.catch(function(){})})}function wd(e){return new ya(Promise.all(e.map(function(n){return n.promise})),function(){return Promise.all(e.map(function(n){return n.abort()}))})}function si(e,n){if(n)if(n instanceof Map)for(var o=i(n.keys()),w=o.next();!w.done;w=o.next())w=w.value,Object.defineProperty(this,w,{value:n.get(w),writable:!0,enumerable:!0});else for(o in n)Object.defineProperty(this,o,{value:n[o],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=C.performance&&C.performance.now?C.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function lu(e){var n,o=new si(e.type);for(n in e)Object.defineProperty(o,n,{value:e[n],writable:!0,enumerable:!0});return o}ya.prototype.abort=function(){return this.g=!0,this.i()},ya.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},ya.prototype.Y=function(e,n){function o(q){return function($){if(O.g&&q)L.reject(F);else{var ce=q?e:n;ce?w=function(ue,Ie,_e){try{var Qe=ue(Ie);return Qe&&Qe.promise&&Qe.abort?(_e.resolve(Qe.promise),function(){return Qe.abort()}):(_e.resolve(Qe),function(){return Promise.resolve(Qe).then(function(){},function(){})})}catch(ut){return _e.reject(ut),function(){return Promise.resolve()}}}(ce,$,L):(q?L.resolve:L.reject)($)}}}function w(){return L.reject(F),O.abort()}var O=this,L=new xi,F=new ht(2,7,7001);return this.promise.then(o(!0),o(!1)),new ya(L,function(){return w()})},Q("shaka.util.AbortableOperation",ya),ya.prototype.chain=ya.prototype.Y,ya.prototype.finally=ya.prototype.finally,ya.all=wd,ya.prototype.abort=ya.prototype.abort,ya.notAbortable=No,ya.completed=Gs,ya.aborted=uu,ya.failed=vs,si.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},si.prototype.stopImmediatePropagation=function(){this.g=!0},si.prototype.stopPropagation=function(){},Q("shaka.util.FakeEvent",si);var Ou={Ig:"abrstatuschanged",Jg:"adaptation",Kg:"buffering",Mg:"downloadfailed",Ng:"downloadheadersreceived",Og:"drmsessionupdate",Qg:"emsg",dh:"prft",Error:"error",Rg:"expirationupdated",Sg:"gapjumped",Vg:"loaded",Wg:"loading",Yg:"manifestparsed",Zg:"mediaqualitychanged",Metadata:"metadata",ah:"onstatechange",bh:"onstateidle",eh:"ratechange",gh:"segmentappended",hh:"sessiondata",ih:"stalldetected",jh:"streaming",kh:"textchanged",lh:"texttrackvisibility",mh:"timelineregionadded",nh:"timelineregionenter",oh:"timelineregionexit",ph:"trackschanged",rh:"unloading",sh:"variantchanged"};function wi(){this.ca=new es,this.Wc=this}function ys(e){var n=new Set;return function o(w){switch(typeof w){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return w;default:if(!w||w.buffer&&w.buffer.constructor==ArrayBuffer)return w;if(n.has(w))return null;var O=w.constructor==Array;if(w.constructor!=Object&&!O)return null;n.add(w);var L,F=O?[]:{};for(L in w)F[L]=o(w[L]);return O&&(F.length=w.length),F}}(e)}function Id(e){var n,o={};for(n in e)o[n]=e[n];return o}function Du(){this.g=[]}function Hs(e,n){e.g.push(n.finally(function(){me(e.g,n)}))}function Hi(e,n,o){wi.call(this),this.i=!1,this.m=new Du,this.g=new Set,this.h=new Set,this.l=e||null,this.j=n||null,this.s=o||null,this.o=!1}function Es(e,n,o,w){o=o||Cd;var O=fl[e];(!O||o>=O.priority)&&(fl[e]={priority:o,jg:n,kg:w!==void 0&&w})}function xo(e,n,o){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:n,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:o===void 0?null:o}}function Rd(e,n,o,w,O,L,F){e.o&&(o.uris[O]=o.uris[O].replace("http://","https://"));var q=new vn(o.uris[O]),$=q.Ea,ce=!1;$||(fr(q,$=($=location.protocol).slice(0,-1)),o.uris[O]=q.toString()),$=$.toLowerCase();var ue=($=fl[$])?$.jg:null;if(!ue)return vs(new ht(2,1,1e3,q));var Ie,_e=$.kg,Qe=null,ut=null,at=!1,Ct=!1;return No(Ad(w)).Y(function(){if(e.i)return uu();Ie=Date.now();var yt=ue(o.uris[O],o,n,function(Zt,sn,Xt){Qe&&Qe.stop(),ut&&ut.N(jt/1e3),e.l&&n==bs&&(e.l(Zt,sn),ce=!0,F.g=Xt)},function(Zt){e.j&&e.j(Zt,o,n),Ct=!0});if(!_e)return yt;var Lt=o.retryParameters.connectionTimeout;Lt&&(Qe=new ni(function(){at=!0,yt.abort()})).N(Lt/1e3);var jt=o.retryParameters.stallTimeout;return jt&&(ut=new ni(function(){at=!0,yt.abort()})),yt}).Y(function(yt){Qe&&Qe.stop(),ut&&ut.stop(),yt.timeMs==null&&(yt.timeMs=Date.now()-Ie);var Lt={response:yt,Yf:ce};return!Ct&&e.j&&e.j(yt.headers,o,n),Lt},function(yt){if(Qe&&Qe.stop(),ut&&ut.stop(),e.s){var Lt=null,jt=0;yt instanceof ht&&(Lt=yt,yt.code==1001&&(jt=yt.data[1])),e.s(o,Lt,jt,at)}if(e.i)return uu();if(at&&(yt=new ht(1,1,1003,o.uris[O],n)),yt instanceof ht){if(yt.code==7001)throw yt;if(yt.code==1010)throw L;if(yt.severity==1)return Lt=new si("retry",Lt=new Map().set("error",yt)),e.dispatchEvent(Lt),O=(O+1)%o.uris.length,Rd(e,n,o,w,O,yt,F)}throw yt})}function Qc(){this.g=0}function Ql(e,n,o){ya.call(this,e,n),this.h=o}wi.prototype.addEventListener=function(e,n){this.ca&&this.ca.push(e,n)},wi.prototype.removeEventListener=function(e,n){this.ca&&this.ca.remove(e,n)},wi.prototype.dispatchEvent=function(e){if(!this.ca)return!0;var n=this.ca.get(e.type)||[],o=this.ca.get("All");for(o&&(n=n.concat(o)),o=(n=i(n)).next();!o.done;o=n.next()){o=o.value,e.target=this.Wc,e.currentTarget=this.Wc;try{o.handleEvent?o.handleEvent(e):o.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},wi.prototype.release=function(){this.ca=null},Du.prototype.destroy=function(){for(var e=[],n=i(this.g),o=n.next();!o.done;o=n.next())(o=o.value).promise.catch(function(){}),e.push(o.abort());return this.g=[],Promise.all(e)},S(Hi,wi),(E=Hi.prototype).ie=function(e){this.o=e},E.lg=function(e){this.g.add(e)},E.Bg=function(e){this.g.delete(e)},E.rf=function(){this.g.clear()},E.mg=function(e){this.h.add(e)},E.Cg=function(e){this.h.delete(e)},E.tf=function(){this.h.clear()},E.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),wi.prototype.release.call(this),this.m.destroy()},E.request=function(e,n){var o=this,w=new Qc;if(this.i){var O=Promise.reject(new ht(2,7,7001));return O.catch(function(){}),new Ql(O,function(){return Promise.resolve()},w)}n.method=n.method||"GET",n.headers=n.headers||{},n.retryParameters=n.retryParameters?ys(n.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},n.uris=ys(n.uris),O=function(Ie,_e,Qe){for(var ut=Gs(void 0),at={},Ct=(Ie=i(Ie.g)).next();!Ct.done;at={sd:at.sd},Ct=Ie.next())at.sd=Ct.value,ut=ut.Y(function(yt){return function(){return Qe.body&&(Qe.body=Dt(Qe.body)),yt.sd(_e,Qe)}}(at));return ut.Y(void 0,function(yt){throw yt instanceof ht&&yt.code==7001?yt:new ht(2,1,1006,yt)})}(this,e,n);var L=O.Y(function(){return Rd(o,e,n,new cl(n.retryParameters,!1),0,null,w)}),F=L.Y(function(Ie){return function(_e,Qe,ut){for(var at=Gs(void 0),Ct={},yt=(_e=i(_e.h)).next();!yt.done;Ct={td:Ct.td},yt=_e.next())Ct.td=yt.value,at=at.Y(function(Lt){return function(){var jt=ut.response;return jt.data&&(jt.data=Dt(jt.data)),Lt.td(Qe,jt)}}(Ct));return at.Y(function(){return ut},function(Lt){var jt=2;if(Lt instanceof ht){if(Lt.code==7001)throw Lt;jt=Lt.severity}throw new ht(jt,1,1007,Lt)})}(o,e,Ie)}),q=Date.now(),$=0;O.promise.then(function(){$=Date.now()-q},function(){});var ce=0;L.promise.then(function(){ce=Date.now()},function(){});var ue=F.Y(function(Ie){var _e=Date.now()-ce,Qe=Ie.response;return Qe.timeMs+=$,Qe.timeMs+=_e,Ie.Yf||!o.l||Qe.fromCache||e!=bs||o.l(Qe.timeMs,Qe.data.byteLength),Qe},function(Ie){throw Ie&&(Ie.severity=2),Ie});return O=new Ql(ue.promise,function(){return ue.abort()},w),Hs(this.m,O),O},Q("shaka.net.NetworkingEngine",Hi),Hi.prototype.request=Hi.prototype.request,Hi.prototype.destroy=Hi.prototype.destroy,Hi.makeRequest=xo,Hi.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},Hi.prototype.clearAllResponseFilters=Hi.prototype.tf,Hi.prototype.unregisterResponseFilter=Hi.prototype.Cg,Hi.prototype.registerResponseFilter=Hi.prototype.mg,Hi.prototype.clearAllRequestFilters=Hi.prototype.rf,Hi.prototype.unregisterRequestFilter=Hi.prototype.Bg,Hi.prototype.registerRequestFilter=Hi.prototype.lg,Hi.unregisterScheme=function(e){delete fl[e]},Hi.registerScheme=Es,Hi.prototype.setForceHTTPS=Hi.prototype.ie,Hi.NumBytesRemainingClass=Qc,S(Ql,ya),Hi.PendingRequest=Ql;var bs=1;Hi.RequestType={MANIFEST:0,SEGMENT:bs,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6};var Cd=3;Hi.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Cd};var fl={};function Vs(e){this.g=!1,this.h=new xi,this.i=e}function aa(e,n){if(e.g)throw n instanceof ht&&n.code==7003?n:new ht(2,7,7003,n)}function da(){this.g=new es}function $c(e,n,o,w){this.target=e,this.type=n,this.listener=o,this.g=function(O,L){if(L==null)return!1;if(typeof L=="boolean")return L;var F=new Set(["passive","capture"]);return Object.keys(L).filter(function(q){return!F.has(q)}),function(q){var $=kd;if($==null){$=!1;try{var ce={},ue={get:function(){return $=!0,!1}};Object.defineProperty(ce,"passive",ue),Object.defineProperty(ce,"capture",ue),ue=function(){},q.addEventListener("test",ue,ce),q.removeEventListener("test",ue,ce)}catch{$=!1}kd=$}return $||!1}(O)?L:L.capture||!1}(e,w),this.target.addEventListener(n,o,this.g)}Vs.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))},(E=da.prototype).release=function(){this.nb(),this.g=null},E.C=function(e,n,o,w){this.g&&(e=new $c(e,n,o,w),this.g.push(n,e))},E.ma=function(e,n,o,w){var O=this;this.C(e,n,function L(F){O.zc(e,n,L),o(F)},w)},E.zc=function(e,n,o){if(this.g)for(var w=this.g.get(n)||[],O=(w=i(w)).next();!O.done;O=w.next())(O=O.value).target!=e||o!=O.listener&&o||(O.zc(),this.g.remove(n,O))},E.nb=function(){if(this.g){var e,n=this.g,o=[];for(e in n.g)o.push.apply(o,g(n.g[e]));for(o=(n=i(o)).next();!o.done;o=n.next())o.value.zc();this.g.g={}}},Q("shaka.util.EventManager",da),da.prototype.removeAll=da.prototype.nb,da.prototype.unlisten=da.prototype.zc,da.prototype.listenOnce=da.prototype.ma,da.prototype.listen=da.prototype.C,da.prototype.release=da.prototype.release,$c.prototype.zc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var kd=void 0;function Jc(e,n){for(var o=[],w=(e=i(e)).next();!w.done;w=e.next())o.push(n(w.value));return o}function dl(e){for(var n=new Map,o=i(Object.keys(e)),w=o.next();!w.done;w=o.next())w=w.value,n.set(w,e[w]);return n}function hl(e){var n={};return e.forEach(function(o,w){n[w]=o}),n}function Od(e,n){if(!e&&!n)return!0;if(e&&!n||n&&!e||e.size!=n.size)return!1;for(var o=(e=i(e)).next();!o.done;o=e.next()){var w=i(o.value);if(o=w.next().value,w=w.next().value,!n.has(o)||(o=n.get(o))!=w||o==null)return!1}return!0}function Vi(e,n){this.S=Wt(e),this.h=n==ef,this.g=0}function Ts(){return new ht(2,3,3e3)}(E=Vi.prototype).ga=function(){return this.g<this.S.byteLength},E.Z=function(){return this.g},E.Gf=function(){return this.S.byteLength},E.Qa=function(){try{var e=this.S.getUint8(this.g);return this.g+=1,e}catch{throw Ts()}},E.Zd=function(){try{var e=this.S.getUint16(this.g,this.h);return this.g+=2,e}catch{throw Ts()}},E.K=function(){try{var e=this.S.getUint32(this.g,this.h);return this.g+=4,e}catch{throw Ts()}},E.Pe=function(){try{var e=this.S.getInt32(this.g,this.h);return this.g+=4,e}catch{throw Ts()}},E.$a=function(){try{if(this.h)var e=this.S.getUint32(this.g,!0),n=this.S.getUint32(this.g+4,!0);else n=this.S.getUint32(this.g,!1),e=this.S.getUint32(this.g+4,!1)}catch{throw Ts()}if(2097151<n)throw new ht(2,3,3001);return this.g+=8,n*Math.pow(2,32)+e},E.Za=function(e){if(this.g+e>this.S.byteLength)throw Ts();var n=Vt(this.S,this.g,e);return this.g+=e,n},E.skip=function(e){if(this.g+e>this.S.byteLength)throw Ts();this.g+=e},E.sg=function(e){if(this.g<e)throw Ts();this.g-=e},E.seek=function(e){if(0>e||e>this.S.byteLength)throw Ts();this.g=e},E.sc=function(){for(var e=this.g;this.ga()&&this.S.getUint8(this.g)!=0;)this.g+=1;return e=Vt(this.S,e,this.g-e),this.g+=1,Oi(e)},Q("shaka.util.DataViewReader",Vi),Vi.prototype.readTerminatedString=Vi.prototype.sc,Vi.prototype.seek=Vi.prototype.seek,Vi.prototype.rewind=Vi.prototype.sg,Vi.prototype.skip=Vi.prototype.skip,Vi.prototype.readBytes=Vi.prototype.Za,Vi.prototype.readUint64=Vi.prototype.$a,Vi.prototype.readInt32=Vi.prototype.Pe,Vi.prototype.readUint32=Vi.prototype.K,Vi.prototype.readUint16=Vi.prototype.Zd,Vi.prototype.readUint8=Vi.prototype.Qa,Vi.prototype.getLength=Vi.prototype.Gf,Vi.prototype.getPosition=Vi.prototype.Z,Vi.prototype.hasMoreData=Vi.prototype.ga;var ef=1;function ra(){this.i=[],this.h=[],this.g=!1}function oa(e){for(var n=gl(e);e.reader.ga()&&!e.parser.g;)e.parser.qc(e.start+n,e.reader,e.partialOkay)}function Pu(e){for(var n=gl(e),o=e.reader.K(),w=0;w<o&&(e.parser.qc(e.start+n,e.reader,e.partialOkay),!e.parser.g);w++);}function Dd(e){var n=gl(e);for(e.reader.skip(78);e.reader.ga()&&!e.parser.g;)e.parser.qc(e.start+n,e.reader,e.partialOkay)}function cu(e){return function(n){e(n.reader.Za(n.reader.S.byteLength-n.reader.Z()))}}function Pd(e){for(var n=0,o=(e=i(e)).next();!o.done;o=e.next())n=n<<8|o.value.charCodeAt(0);return n}function pl(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function gl(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}Vi.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:ef},(E=ra.prototype).box=function(e,n){return e=Pd(e),this.i[e]=tf,this.h[e]=n,this},E.P=function(e,n){return e=Pd(e),this.i[e]=$l,this.h[e]=n,this},E.stop=function(){this.g=!0},E.parse=function(e,n,o){for(e=new Vi(e,0),this.g=!1;e.ga()&&!this.g;)this.qc(0,e,n,o)},E.qc=function(e,n,o,w){var O=n.Z();if(w&&O+8>n.S.byteLength)this.g=!0;else{var L=n.K(),F=n.K(),q=pl(F),$=!1;switch(L){case 0:L=n.S.byteLength-O;break;case 1:if(w&&n.Z()+8>n.S.byteLength)return void(this.g=!0);L=n.$a(),$=!0}var ce=this.h[F];if(ce){var ue=null,Ie=null;if(this.i[F]==$l){if(w&&n.Z()+4>n.S.byteLength)return void(this.g=!0);ue=(Ie=n.K())>>>24,Ie&=16777215}F=O+L,o&&F>n.S.byteLength&&(F=n.S.byteLength),w&&F>n.S.byteLength?this.g=!0:(w=F-n.Z(),ce({name:q,parser:this,partialOkay:o||!1,version:ue,flags:Ie,reader:n=new Vi(n=0<w?n.Za(w):new Uint8Array(0),0),size:L,start:O+e,has64BitSize:$}))}else n.skip(Math.min(O+L-n.Z(),n.S.byteLength-n.Z()))}},Q("shaka.util.Mp4Parser",ra),ra.headerSize=gl,ra.typeToString=pl,ra.allData=cu,ra.visualSampleEntry=Dd,ra.sampleDescription=Pu,ra.children=oa,ra.prototype.parseNext=ra.prototype.qc,ra.prototype.parse=ra.prototype.parse,ra.prototype.stop=ra.prototype.stop,ra.prototype.fullBox=ra.prototype.P,ra.prototype.box=ra.prototype.box;var tf=0,$l=1;function Nd(e){var n=this;this.g=[],this.h=[],this.data=[],new ra().box("moov",oa).box("moof",oa).P("pssh",function(o){if(!(1<o.version)){var w=Vt(o.reader.S,-12,o.size);if(n.data.push(w),n.g.push(pi(o.reader.Za(16))),0<o.version){w=o.reader.K();for(var O=0;O<w;O++){var L=pi(o.reader.Za(16));n.h.push(L)}}}}).parse(e)}function nf(e,n,o,w){var O=e.length,L=n.length+16+O;0<w&&(L+=4+16*o.size);var F=new Uint8Array(L),q=Wt(F),$=0;if(q.setUint32($,L),$+=4,q.setUint32($,1886614376),$+=4,1>w?q.setUint32($,0):q.setUint32($,16777216),$+=4,F.set(n,$),$+=n.length,0<w)for(q.setUint32($,o.size),$+=4,o=(n=i(o)).next();!o.done;o=n.next())o=Br(o.value),F.set(o,$),$+=o.length;return q.setUint32($,O),F.set(e,$+4),F}function ml(e,n){return(e=_a(e,n)).length!=1?null:e[0]}function Jl(e,n,o){return(e=rf(e,n,o)).length!=1?null:e[0]}function _a(e,n){for(var o=[],w=(e=i(e.childNodes)).next();!w.done;w=e.next())(w=w.value)instanceof Element&&w.tagName==n&&o.push(w);return o}function rf(e,n,o){for(var w=[],O=(e=i(e.childNodes)).next();!O.done;O=e.next())(O=O.value)instanceof Element&&O.localName==o&&O.namespaceURI==n&&w.push(O);return w}function Zs(e,n,o){return e.hasAttributeNS(n,o)?e.getAttributeNS(n,o):null}function Ro(e,n,o){for(var w=(n=i(n)).next();!w.done;w=n.next())if(w=w.value,e.hasAttributeNS(w,o))return e.getAttributeNS(w,o);return null}function vl(e){return Array.from(e.childNodes).every(af)?e.textContent.trim():null}function af(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function ha(e,n,o,w){w=w===void 0?null:w;var O=null;return(e=e.getAttribute(n))!=null&&(O=o(e)),O??w}function xd(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function _s(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function yl(e){var n=/([0-9]+)-([0-9]+)/.exec(e);return n?(e=Number(n[1]),isFinite(e)?(n=Number(n[2]),isFinite(n)?{start:e,end:n}:null):null):null}function Ld(e){return(e=Number(e))%1==0?e:null}function ec(e){return(e=Number(e))%1==0&&0<e?e:null}function Yo(e){return(e=Number(e))%1==0&&0<=e?e:null}function Nu(e){return e=Number(e),isNaN(e)?null:e}function Md(e){var n,o=(n=e.match(/^(\d+)\/(\d+)$/))?Number(n[1])/Number(n[2]):Number(e);return isNaN(o)?null:o}function El(e,n){var o=new DOMParser,w=Jp.value()(e);e=null;try{e=o.parseFromString(w,"text/xml")}catch{return null}if(!(o=e.documentElement)||o.getElementsByTagName("parsererror").length||o.tagName!=n)return null;for(n=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=n.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return o}function of(e,n){try{return El(Oi(e),n)}catch{return null}}var Jp=new bo(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(n){return n}});return function(n){return e.createHTML(n)}}return function(n){return n}});function bl(e,n){var o=this;n=n===void 0?1:n,this.D=e,this.G=new Set,this.l=this.u=null,this.da=this.W=!1,this.H=0,this.g=null,this.s=new da,this.i=new Map,this.B=[],this.o=new xi,this.h=null,this.m=function(w){o.o.reject(w),e.onError(w)},this.ia=new Map,this.ba=new Map,this.O=new ni(function(){return function(w){var O=w.ia,L=w.ba;L.clear(),O.forEach(function(F,q){return L.set(q,F)}),(O=Array.from(L.values())).length&&O.every(function(F){return F=="expired"})&&w.m(new ht(2,6,6014)),w.D.cd(hl(L))}(o)}),this.L=!1,this.J=[],this.M=!1,this.ca=new ni(function(){(function(w){w.i.forEach(function(O,L){var F=O.Ud,q=L.expiration;isNaN(q)&&(q=1/0),q!=F&&(w.D.onExpirationUpdated(L.sessionId,q),O.Ud=q)})})(o)}).Ca(n),this.o.catch(function(){}),this.j=new Vs(function(){return function(w){return W(function(O){switch(O.g){case 1:return w.s.release(),w.s=null,w.o.reject(),w.ca.stop(),w.ca=null,w.O.stop(),w.O=null,f(O,Vd(w),2);case 2:if(!w.l){O.A(3);break}return p(O,4),f(O,w.l.setMediaKeys(null),6);case 6:P(O,5);break;case 4:j(O);case 5:w.l=null;case 3:w.g=null,w.G.clear(),w.u=null,w.B=[],w.h=null,w.m=function(){},w.D=null,w.V=!1,w.F=null,b(O)}})}(o)}),this.V=!1,this.F=null}function tc(e,n,o){return e.B=o,e.L=0<o.length,sf(e,n)}function sf(e,n){var o,w,O,L,F,q,$,ce,ue,Ie,_e,Qe;return W(function(ut){if(ut.g==1){if(o=function(at){if((at=dl(at.h.clearKeys)).size==0)return null;var Ct=[],yt=[];at.forEach(function(jt,Zt){var sn=Zt;sn.length!=22&&(sn=qr(Br(Zt),!1)),(Zt=jt).length!=22&&(Zt=qr(Br(jt),!1)),jt={kty:"oct",kid:sn,k:Zt},Ct.push(jt),yt.push(jt.kid)}),at=JSON.stringify({keys:Ct});var Lt=JSON.stringify({kids:yt});return Lt=[{initData:Vt(Un(Lt)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+C.btoa(at),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:Lt,keyIds:new Set(yt)}}(e))for(w=i(n),O=w.next();!O.done;O=w.next())(L=O.value).video&&(L.video.drmInfos=[o]),L.audio&&(L.audio.drmInfos=[o]);for((F=n.some(function(at){return!!(at.video&&at.video.drmInfos.length||at.audio&&at.audio.drmInfos.length)}))||(q=dl(e.h.servers),function(at,Ct){var yt=[];for(Ct.forEach(function(Lt,jt){yt.push({keySystem:jt,licenseServerUri:Lt,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),Ct=(at=i(at)).next();!Ct.done;Ct=at.next())(Ct=Ct.value).video&&(Ct.video.drmInfos=yt),Ct.audio&&(Ct.audio.drmInfos=yt)}(n,q)),$=i(n),O=$.next();!O.done;O=$.next())for(ce=O.value,ue=Zd(ce),Ie=i(ue),_e=Ie.next();!_e.done;_e=Ie.next())eg(_e.value,dl(e.h.servers),dl(e.h.advanced||{}),e.h.keySystemsMapping);return f(ut,nu(n,e.L,e.V),2)}return F||Object.keys(e.h.servers).length?(Qe=jd(e,void 0,n),ut.return(F?Qe:Qe.catch(function(){}))):(e.W=!0,ut.return(Promise.resolve()))})}function Fd(e){var n;return W(function(o){switch(o.g){case 1:if(e.l.mediaKeys)return o.return();if(!e.F){o.A(2);break}return f(o,e.F,3);case 3:return aa(e.j),o.return();case 2:return p(o,4),e.F=e.l.setMediaKeys(e.u),f(o,e.F,6);case 6:P(o,5);break;case 4:n=j(o),e.m(new ht(2,6,6003,n.message));case 5:aa(e.j),b(o)}})}function uf(e){var n,o;return W(function(w){switch(w.g){case 1:if(!e.u||!e.g)return w.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){w.A(2);break}return n=xo([e.g.serverCertificateUri],e.h.retryParameters),p(w,3),f(w,e.D.kb.request(5,n).promise,5);case 5:o=w.h,e.g.serverCertificate=Vt(o.data),P(w,4);break;case 3:throw new ht(2,6,6017,j(w));case 4:if(e.j.g)return w.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(p(w,6),f(w,e.u.setServerCertificate(e.g.serverCertificate),8)):w.return();case 8:P(w,0);break;case 6:throw new ht(2,6,6004,j(w).message)}})}function Ud(e){for(var n=(e.g?e.g.initData:[])||[],o=i(n),w=o.next();!w.done;w=o.next())xu(e,(w=w.value).initDataType,w.initData);for(w=(o=i(e.B)).next();!w.done;w=o.next())Gd(e,w.value);return n.length||e.B.length||e.o.resolve(),e.o}function xu(e,n,o){if(o.length){for(var w=e.i.values(),O=(w=i(w)).next();!O.done;O=w.next())if(pt(o,O.value.initData)&&!ai("Tizen 2"))return;0<e.i.size&&rc(e)&&(e.o.resolve(),e.o=new xi,e.o.catch(function(){})),function(L,F,q,$){try{var ce=L.u.createSession($)}catch(ue){return void L.m(new ht(2,6,6005,ue.message))}L.s.C(ce,"message",function(ue){L.l&&L.h.delayLicenseRequestUntilPlayed&&L.l.paused&&!L.M?L.J.push(ue):cf(L,ue)}),L.s.C(ce,"keystatuseschange",function(ue){return Hd(L,ue)}),L.i.set(ce,{initData:q,initDataType:F,loaded:!1,Ud:1/0,Ja:null,type:$});try{q=L.h.initDataTransform(q,F,L.g)}catch(ue){return F=ue,ue instanceof ht||(F=new ht(2,6,6016,ue)),void L.m(F)}L.h.logLicenseExchange&&qr(q),ce.generateRequest(F,q).catch(function(ue){if(!L.j.g){L.i.delete(ce);var Ie=ue.errorCode;if(Ie&&Ie.systemCode){var _e=Ie.systemCode;0>_e&&(_e+=Math.pow(2,32)),_e="0x"+_e.toString(16)}L.m(new ht(2,6,6006,ue.message,ue,_e))}})}(e,n,o,e.g.sessionType)}}function Bd(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function lf(e){return e=Jc(e=e.i.keys(),function(n){return n.sessionId}),Array.from(e)}function jd(e,n,o){var w,O,L,F,q,$,ce,ue,Ie,_e,Qe,ut,at;return W(function(Ct){switch(Ct.g){case 1:if(w=new Map,o.length){O=function(Tn,Ut,ln){for(var Rn=i(Ut),cn=Rn.next();!cn.done;cn=Rn.next()){var Dn=i(Zd(cn.value));for(cn=Dn.next();!cn.done;cn=Dn.next())cn=cn.value,ln.has(cn.keySystem)||ln.set(cn.keySystem,[]),ln.get(cn.keySystem).push(cn)}if(ln.size==1&&ln.has(""))throw new ht(2,6,6e3);for(Rn={},cn=(Tn=i(Tn.h.preferredKeySystems)).next();!cn.done;Rn={qd:Rn.qd},cn=Tn.next())for(Rn.qd=cn.value,cn=(Dn=i(Ut)).next();!cn.done;cn=Dn.next())if(cn=cn.value.decodingInfos.find(function(Hn){return function(Gn){return Gn.supported&&Gn.keySystemAccess!=null&&Gn.keySystemAccess.keySystem==Hn.qd}}(Rn)))return cn.keySystemAccess;for(cn=(Tn=i([!0,!1])).next();!cn.done;cn=Tn.next())for(Rn=cn.value,cn=(Dn=i(Ut)).next();!cn.done;cn=Dn.next()){var Jn=i(cn.value.decodingInfos);for(cn=Jn.next();!cn.done;cn=Jn.next()){var Fn=cn.value;if(Fn.supported&&Fn.keySystemAccess){var An=i(cn=ln.get(Fn.keySystemAccess.keySystem));for(cn=An.next();!cn.done;cn=An.next())if(!!cn.value.licenseServerUri==Rn)return Fn.keySystemAccess}}}return null}(e,o,w),Ct.A(2);break}return f(Ct,function(Tn,Ut){var ln,Rn,cn,Dn,Jn,Fn,An,Hn,Gn,rr,br,dr,cr,Qn,Kn;return W(function(Vn){switch(Vn.g){case 1:if(Ut.size==1&&Ut.has(""))throw new ht(2,6,6e3);for(Rn=i(Ut.values()),cn=Rn.next();!cn.done;cn=Rn.next())(Dn=cn.value).audioCapabilities.length==0&&delete Dn.audioCapabilities,Dn.videoCapabilities.length==0&&delete Dn.videoCapabilities;Jn=i(Tn.h.preferredKeySystems),Fn=Jn.next();case 2:if(Fn.done){Vn.A(4);break}if(An=Fn.value,!Ut.has(An)){Vn.A(3);break}return Hn=Ut.get(An),p(Vn,6),f(Vn,navigator.requestMediaKeySystemAccess(An,[Hn]),8);case 8:return ln=Vn.h,Vn.return(ln);case 6:j(Vn);case 7:aa(Tn.j);case 3:Fn=Jn.next(),Vn.A(2);break;case 4:Gn=i([!0,!1]),rr=Gn.next();case 9:if(rr.done){Vn.A(11);break}br=rr.value,dr=i(Ut.keys()),Fn=dr.next();case 12:if(Fn.done){rr=Gn.next(),Vn.A(9);break}if(cr=Fn.value,Qn=Ut.get(cr),Kn=Qn.drmInfos.some(function(tr){return!!tr.licenseServerUri}),Kn!=br){Vn.A(13);break}return p(Vn,15),f(Vn,navigator.requestMediaKeySystemAccess(cr,[Qn]),17);case 17:return ln=Vn.h,Vn.return(ln);case 15:j(Vn);case 16:aa(Tn.j);case 13:Fn=dr.next(),Vn.A(12);break;case 11:return Vn.return(ln)}})}(e,n),3);case 3:O=Ct.h;case 2:if(!(L=O))throw new ht(2,6,6001);for(aa(e.j),p(Ct,4),e.G.clear(),F=L.getConfiguration(),q=F.audioCapabilities||[],$=F.videoCapabilities||[],ce=i(q),ue=ce.next();!ue.done;ue=ce.next())Ie=ue.value,e.G.add(Ie.contentType.toLowerCase());for(_e=i($),ue=_e.next();!ue.done;ue=_e.next())Qe=ue.value,e.G.add(Qe.contentType.toLowerCase());if(o.length){var yt=L.keySystem,Lt=w.get(L.keySystem),jt=[],Zt=[],sn=[],Xt=[],Gt=new Set;ic(Lt,jt,sn,Zt,Xt,Gt);var bn=e.L?"persistent-license":"temporary";for(yt={keySystem:yt,licenseServerUri:jt[0],distinctiveIdentifierRequired:Lt[0].distinctiveIdentifierRequired,persistentStateRequired:Lt[0].persistentStateRequired,sessionType:Lt[0].sessionType||bn,audioRobustness:Lt[0].audioRobustness||"",videoRobustness:Lt[0].videoRobustness||"",serverCertificate:sn[0],serverCertificateUri:Zt[0],initData:Xt,keyIds:Gt},jt=(Lt=i(Lt)).next();!jt.done;jt=Lt.next())(jt=jt.value).distinctiveIdentifierRequired&&(yt.distinctiveIdentifierRequired=jt.distinctiveIdentifierRequired),jt.persistentStateRequired&&(yt.persistentStateRequired=jt.persistentStateRequired);Lt=yt}else Lt=L.keySystem,yt=n.get(L.keySystem),jt=[],Zt=[],sn=[],Xt=[],Gt=new Set,ic(yt.drmInfos,jt,sn,Zt,Xt,Gt),Lt={keySystem:Lt,licenseServerUri:jt[0],distinctiveIdentifierRequired:yt.distinctiveIdentifier=="required",persistentStateRequired:yt.persistentState=="required",sessionType:yt.sessionTypes[0]||"temporary",audioRobustness:(yt.audioCapabilities?yt.audioCapabilities[0].robustness:"")||"",videoRobustness:(yt.videoCapabilities?yt.videoCapabilities[0].robustness:"")||"",serverCertificate:sn[0],serverCertificateUri:Zt[0],initData:Xt,keyIds:Gt};if(e.g=Lt,!e.g.licenseServerUri)throw new ht(2,6,6012,e.g.keySystem);return f(Ct,L.createMediaKeys(),6);case 6:return ut=Ct.h,aa(e.j),e.u=ut,e.W=!0,f(Ct,uf(e),7);case 7:aa(e.j),P(Ct,0);break;case 4:throw at=j(Ct),aa(e.j,at),e.g=null,e.G.clear(),at instanceof ht?at:new ht(2,6,6002,at.message)}})}function Gd(e,n){var o,w,O,L,F;return W(function(q){switch(q.g){case 1:try{o=e.u.createSession("persistent-license")}catch($){return w=new ht(2,6,6005,$.message),e.m(w),q.return(Promise.reject(w))}return e.s.C(o,"message",function($){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.M?e.J.push($):cf(e,$)}),e.s.C(o,"keystatuseschange",function($){return Hd(e,$)}),O={initData:null,initDataType:null,loaded:!1,Ud:1/0,Ja:null,type:"persistent-license"},e.i.set(o,O),p(q,2),f(q,o.load(n),4);case 4:return L=q.h,aa(e.j),L?(O.loaded=!0,rc(e)&&e.o.resolve(),q.return(o)):(e.i.delete(o),e.m(new ht(2,6,6013)),q.return(Promise.resolve()));case 2:F=j(q),aa(e.j,F),e.i.delete(o),e.m(new ht(2,6,6005,F.message));case 3:return q.return(Promise.resolve())}})}function cf(e,n){var o,w,O,L,F,q,$,ce,ue,Ie,_e,Qe;W(function(ut){switch(ut.g){case 1:return o=n.target,e.h.logLicenseExchange&&qr(n.message),w=e.i.get(o),O=e.g.licenseServerUri,L=e.h.advanced[e.g.keySystem],n.messageType=="individualization-request"&&L&&L.individualizationServer&&(O=L.individualizationServer),(F=xo([O],e.h.retryParameters)).body=n.message,F.method="POST",F.licenseRequestType=n.messageType,F.sessionId=o.sessionId,F.drmInfo=e.g,w&&(F.initData=w.initData,F.initDataType=w.initDataType),Bd(e.g.keySystem)&&function(at){var Ct=Bt(at.body,!0,!0);if(Ct.includes("PlayReadyKeyMessage")){for(var yt=i((Ct=El(Ct,"PlayReadyKeyMessage")).getElementsByTagName("HttpHeader")),Lt=yt.next();!Lt.done;Lt=yt.next())Lt=Lt.value,at.headers[Lt.getElementsByTagName("name")[0].textContent]=Lt.getElementsByTagName("value")[0].textContent;at.body=Dr(Ct.getElementsByTagName("Challenge")[0].textContent)}else at.headers["Content-Type"]="text/xml; charset=utf-8"}(F),q=Date.now(),p(ut,2),f(ut,e.D.kb.request(2,F).promise,4);case 4:$=ut.h,P(ut,3);break;case 2:return ce=j(ut),ue=new ht(2,6,6007,ce),e.m(ue),w&&w.Ja&&w.Ja.reject(ue),ut.return();case 3:return e.j.g?ut.return():(e.H+=(Date.now()-q)/1e3,e.h.logLicenseExchange&&qr($.data),p(ut,5),f(ut,o.update($.data),7));case 7:P(ut,6);break;case 5:return Ie=j(ut),_e=new ht(2,6,6008,Ie.message),e.m(_e),w&&w.Ja&&w.Ja.reject(_e),ut.return();case 6:if(e.j.g)return ut.return();Qe=new si("drmsessionupdate"),e.D.onEvent(Qe),w&&(w.Ja&&w.Ja.resolve(),new ni(function(){w.loaded=!0,rc(e)&&e.o.resolve()}).N(ng)),b(ut)}})}function Hd(e,n){n=n.target;var o=e.i.get(n),w=!1;n.keyStatuses.forEach(function(L,F){if(typeof F=="string"){var q=F;F=L,L=q}if(Bd(e.g.keySystem)&&F.byteLength==16&&(navigator.userAgent.match(/Edge?\//)||Li())){var $=(q=Wt(F)).getUint32(0,!0),ce=q.getUint16(4,!0),ue=q.getUint16(6,!0);q.setUint32(0,$,!1),q.setUint16(4,ce,!1),q.setUint16(6,ue,!1)}L!="status-pending"&&(o.loaded=!0),L=="expired"&&(w=!0),F=pi(F).slice(0,32),e.ia.set(F,L)});var O=n.expiration-Date.now();(0>O||w&&1e3>O)&&o&&!o.Ja&&(e.i.delete(n),n.close().catch(function(){})),rc(e)&&(e.o.resolve(),e.O.N(rg))}function Vd(e){var n;return W(function(o){return n=Array.from(e.i.entries()),e.i.clear(),f(o,Promise.all(n.map(function(w){var O=(w=i(w)).next().value,L=w.next().value;return W(function(F){return F.g==1?(p(F,2),e.da||e.B.includes(O.sessionId)||L.type!=="persistent-license"?f(F,function(q){var $;return W(function(ce){return ce.g==1?($=new Promise(function(ue,Ie){new ni(Ie).N(tg)}),p(ce,2),f(ce,Promise.race([Promise.all([q.close(),q.closed]),$]),4)):ce.g!=2?P(ce,0):(j(ce),void b(ce))})}(O),5):f(F,O.remove(),5)):F.g!=2?P(F,0):(j(F),void b(F))})})),0)})}function nc(e,n){if(!e.length)return n;if(!n.length)return e;for(var o=[],w=(e=i(e)).next();!w.done;w=e.next()){w=w.value;for(var O={},L=i(n),F=L.next();!F.done;O={Da:O.Da},F=L.next())if(F=F.value,w.keySystem==F.keySystem){O.Da=[],O.Da=O.Da.concat(w.initData||[]),O.Da=O.Da.concat(F.initData||[]),O.Da=O.Da.filter(function(q){return function($,ce){return $.keyId===void 0||ce===q.Da.findIndex(function(ue){return ue.keyId===$.keyId})}}(O)),L=w.keyIds&&F.keyIds?new Set([].concat(g(w.keyIds),g(F.keyIds))):w.keyIds||F.keyIds,o.push({keySystem:w.keySystem,licenseServerUri:w.licenseServerUri||F.licenseServerUri,distinctiveIdentifierRequired:w.distinctiveIdentifierRequired||F.distinctiveIdentifierRequired,persistentStateRequired:w.persistentStateRequired||F.persistentStateRequired,videoRobustness:w.videoRobustness||F.videoRobustness,audioRobustness:w.audioRobustness||F.audioRobustness,serverCertificate:w.serverCertificate||F.serverCertificate,serverCertificateUri:w.serverCertificateUri||F.serverCertificateUri,initData:O.Da,keyIds:L});break}}return o}function Zd(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function rc(e){return function(n,o){for(var w=(n=i(n)).next();!w.done;w=n.next())if(!o(w.value))return!1;return!0}(e=e.i.values(),function(n){return n.loaded})}function ic(e,n,o,w,O,L){for(var F={},q=(e=i(e)).next();!q.done;F={oa:F.oa},q=e.next()){if(F.oa=q.value,n.includes(F.oa.licenseServerUri)||n.push(F.oa.licenseServerUri),w.includes(F.oa.serverCertificateUri)||w.push(F.oa.serverCertificateUri),F.oa.serverCertificate&&(o.some(function(ue){return function(Ie){return pt(Ie,ue.oa.serverCertificate)}}(F))||o.push(F.oa.serverCertificate)),F.oa.initData){q={};for(var $=i(F.oa.initData),ce=$.next();!ce.done;q={Dc:q.Dc},ce=$.next())q.Dc=ce.value,O.some(function(ue){return function(Ie){var _e=ue.Dc;return!(!Ie.keyId||Ie.keyId!=_e.keyId)||Ie.initDataType==_e.initDataType&&pt(Ie.initData,_e.initData)}}(q))||O.push(q.Dc)}if(F.oa.keyIds)for($=(q=i(F.oa.keyIds)).next();!$.done;$=q.next())L.add($.value)}}function eg(e,n,o,w){var O=e.keySystem;!O||O=="org.w3.clearkey"&&e.licenseServerUri||(n.size&&(n=n.get(O)||"",e.licenseServerUri=n),e.keyIds||(e.keyIds=new Set),(o=o.get(O))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=o.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=o.persistentStateRequired),e.videoRobustness||(e.videoRobustness=o.videoRobustness),e.audioRobustness||(e.audioRobustness=o.audioRobustness),e.serverCertificate||(e.serverCertificate=o.serverCertificate),o.sessionType&&(e.sessionType=o.sessionType),e.serverCertificateUri||(e.serverCertificateUri=o.serverCertificateUri)),w[O]&&(e.keySystem=w[O]),C.cast&&C.cast.__platform__&&O=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}(E=bl.prototype).destroy=function(){return this.j.destroy()},E.configure=function(e){this.h=e},E.Yb=function(e){var n,o=this;return W(function(w){if(w.g==1)return o.u?(o.l=e,o.s.ma(o.l,"play",function(){for(var O=i(o.J),L=O.next();!L.done;L=O.next())cf(o,L.value);o.M=!0,o.J=[]}),"webkitCurrentPlaybackTargetIsWireless"in o.l&&o.s.C(o.l,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Vd(o)}),(n=o.g.initData.find(function(O){return 0<O.initData.length}))||o.g.keySystem!=="com.apple.fps"||o.B.length?f(w,Fd(o),2):w.A(2)):(o.s.ma(e,"encrypted",function(){o.m(new ht(2,6,6010))}),w.return());Ud(o),n||o.B.length||o.h.parseInbandPsshEnabled||o.s.C(o.l,"encrypted",function(O){return function(L,F){return W(function(q){if(q.g==1)return f(q,Fd(L),2);xu(L,F.initDataType,Vt(F.initData)),b(q)})}(o,O)}),b(w)})},E.ic=function(){for(var e=1/0,n=this.i.keys(),o=(n=i(n)).next();!o.done;o=n.next())o=o.value,isNaN(o.expiration)||(e=Math.min(e,o.expiration));return e},E.Qc=function(){return hl(this.ba)};var tg=1,ng=5,rg=.5,ac=new bo(function(){return Dt(new Uint8Array([0]))});function Tl(){}function Kd(e,n,o,w){var O,L,F,q;return W(function($){if($.g==1)return w&&(O=Lo[w.toLowerCase()])?$.return(O):(L=Lu(e))&&(F=fu[L])?$.return(F):w?$.A(2):f($,ff(e,n,o),3);if($.g!=2&&(w=$.h)&&(q=Lo[w]))return $.return(q);throw new ht(2,4,4e3,e)})}function ff(e,n,o){var w,O,L;return W(function(F){return F.g==1?((w=xo([e],o)).method="HEAD",f(F,n.request(0,w).promise,2)):(O=F.h,L=O.headers["content-type"],F.return(L?L.toLowerCase().split(";").shift():""))})}function Lu(e){return(e=new vn(e).qa.split("/").pop().split(".")).length==1?"":e.pop().toLowerCase()}Q("shaka.media.ManifestParser",Tl),Tl.unregisterParserByMime=function(e){delete Lo[e]},Tl.registerParserByMime=function(e,n){Lo[e]=n},Tl.registerParserByExtension=function(e,n){fu[e]=n};var Lo={},fu={};function df(e,n,o,w,O){var L=hf.value(),F=e.subarray(o.start,o.start+o.size),q=Wt(F),$=new Uint8Array(o.size+L.byteLength);for($.set(F,0),(F=Wt($)).setUint32(4,O),$.set(L,o.size),O=q.getUint32(4),F.setUint32(o.size+16,O),_l($,0,$.byteLength),O=new Uint8Array(e.byteLength+$.byteLength),o=$r()?o.start:o.start+o.size,L=e.subarray(o),O.set(e.subarray(0,o)),O.set($,o),O.set(L,o+$.byteLength),w=(e=i(w)).next();!w.done;w=e.next())_l(O,(w=w.value).start,w.size+$.byteLength);return $=Wt(O,n.start),n=gl(n),e=$.getUint32(n),$.setUint32(n,e+1),O}function _l(e,n,o){(n=(e=Wt(e,n)).getUint32(0))!=0&&(n==1?(e.setUint32(8,o>>32),e.setUint32(12,4294967295&o)):e.setUint32(0,o))}var hf=new bo(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function oc(e,n,o,w,O){if(w>=O)return null;for(var L=-1,F=-1,q=0;q<o.length;q++)if(o[q].some(function(Zt){return Zt!=null&&Zt.g.trim()!=""})){L=q;break}for(q=o.length-1;0<=q;q--)if(o[q].some(function(Zt){return Zt!=null&&Zt.g.trim()!=""})){F=q;break}if(L===-1||F===-1)return null;for(var $=q=!1,ce="white",ue="black",Ie=Mu(w,O,q,$,ce,ue);L<=F;L++){for(var _e=o[L],Qe=-1,ut=-1,at=0;at<_e.length;at++)if(_e[at]!=null&&_e[at].g.trim()!==""){Qe=at;break}for(at=_e.length-1;0<=at;at--)if(_e[at]!=null&&_e[at].g.trim()!==""){ut=at;break}if(Qe===-1||ut===-1)_e=qd(w,O),e.nestedCues.push(_e);else{for(;Qe<=ut;Qe++)if(at=_e[Qe]){var Ct=at.l,yt=at.i,Lt=at.j,jt=at.h;Ct==q&&yt==$&&Lt==ce&&jt==ue||(Ie.payload&&e.nestedCues.push(Ie),Ie=Mu(w,O,Ct,yt,Lt,jt),q=Ct,$=yt,ce=Lt,ue=jt),Ie.payload+=at.g}else Ie.payload+=" ";Ie.payload&&e.nestedCues.push(Ie),L!==F&&(Ie=qd(w,O),e.nestedCues.push(Ie)),Ie=Mu(w,O,q,$,ce,ue)}}return e.nestedCues.length?{cue:e,stream:n}:null}function Mu(e,n,o,w,O,L){return e=new Xe(e,n,""),o&&e.textDecoration.push("underline"),w&&(e.fontStyle="italic"),e.color=O,e.backgroundColor=L,e}function qd(e,n){return(e=new Xe(e,n,"")).lineBreak=!0,e}function Yd(e,n,o,w,O){this.g=e,this.l=n,this.i=o,this.h=w,this.j=O}function sc(e,n){this.i=[],this.g=1,this.h=0,this.u=e,this.s=n,this.j=this.m=!1,this.l="white",this.o="black",Fu(this)}function uc(e,n,o){return oc(new Xe(n,o,""),"CC"+(e.u<<1|e.s+1),e.i,n,o)}function Fu(e){rs(e,0,15),e.g=1}function Uu(e,n,o){if(!(32>o||127<o)){var w="";switch(n){case Sl:w=Wd.has(o)?Wd.get(o):String.fromCharCode(o);break;case pf:w=Xd.get(o);break;case zd:e.i[e.g].pop(),w=ig.get(o);break;case gf:e.i[e.g].pop(),w=Qd.get(o)}w&&e.i[e.g].push(new Yd(w,e.m,e.j,e.o,e.l))}}function lc(e,n,o,w){if(!(0>o||0>n))if(n>=o)for(--w;0<=w;w--)e.i[n+w]=e.i[o+w].map(function(L){return L});else for(var O=0;O<w;O++)e.i[n+O]=e.i[o+O].map(function(L){return L})}function rs(e,n,o){for(var w=0;w<=o;w++)e.i[n+w]=[]}var Sl=0,pf=1,zd=2,gf=3,Wd=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),Xd=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),ig=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Qd=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]);function cc(e,n){this.h=hc,this.o=new sc(e,n),this.i=new sc(e,n),this.l=new sc(e,n),this.g=this.i,this.j=0,this.m=null}function fc(e,n,o){e.g=e.i;var w=e.g,O=null;return e.h!==ae&&e.h!==ie&&(O=uc(w,e.j,o),(o=e.i).g=0<o.h?o.h:0,rs(o,0,15),(o=e.l).g=0<o.h?o.h:0,rs(o,0,15),w.g=15),e.h=ae,w.h=n,O}function $d(e){e.h=ag,e.g=e.l,e.g.h=0}function dc(e){X("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=ie}var hc=0,ag=1,ae=3,ie=4,se="black green blue cyan red yellow magenta black".split(" "),Re="white green blue cyan red yellow magenta white_italics".split(" ");function Ae(){this.l=!1,this.B=this.F=0,this.D=We,this.i=[],this.g=this.h=this.j=0,this.u=this.o=!1,this.s="white",this.m="black",ve(this)}function ve(e){e.i=[];for(var n=0;16>n;n++)e.i.push(ye())}function ye(){for(var e=[],n=0;42>n;n++)e.push(null);return e}function Oe(e,n){je(e)&&(e.i[e.h][e.g]=new Yd(n,e.u,e.o,e.m,e.s),e.g++)}function je(e){var n=e.g<e.B&&0<=e.g;return e.h<e.F&&0<=e.h&&n}function He(e,n,o){var w=new Xe(e.j,n,"");return w.textAlign=e.D===Be?"left":e.D===De?"right":bt,(o=oc(w,"svc"+o,e.i,e.j,n))&&(e.j=n),o}Ae.prototype.isVisible=function(){return this.l};var Be=0,De=1,We=2;function qe(){this.i=[],this.h=null,this.g=0}function vt(e,n){n.type===3?(e.g=2*(63&n.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(n),e.g--),e.g===0&&(e.i.push(new ot(e.h)),e.h=null,e.g=0))}function ot(e){this.g=0,this.h=e}function ct(e){if(!e.ga())throw new ht(2,2,3e3);return e.h[e.g++]}function mt(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Me(e,n,o,w){if(128<=o&&135>=o)w=7&o,e.h[w]&&(e.g=e.h[w]);else{if(o===136){o=ct(n).value,n=null;for(var O=(o=i(st(e,o))).next();!O.done;O=o.next())(O=e.h[O.value]).isVisible()&&(n=He(O,w,e.i)),ve(O);return n}if(o===137)for(o=(n=i(st(e,n=ct(n).value))).next();!o.done;o=n.next())(o=e.h[o.value]).isVisible()||(o.j=w),o.l=!0;else{if(o===138){for(o=ct(n).value,n=null,O=(o=i(st(e,o))).next();!O.done;O=o.next())(O=e.h[O.value]).isVisible()&&(n=He(O,w,e.i)),O.l=!1;return n}if(o===139){for(o=ct(n).value,n=null,O=(o=i(st(e,o))).next();!O.done;O=o.next())(O=e.h[O.value]).isVisible()?n=He(O,w,e.i):O.j=w,O.l=!O.l;return n}if(o===140)return tt(e,n=ct(n).value,w);if(o===143)return w=tt(e,255,w),ft(e),w;if(o===144)n.skip(1),w=ct(n).value,e.g&&(e.g.o=0<(128&w),e.g.u=0<(64&w));else if(o===145)w=ct(n).value,o=ct(n).value,n.skip(1),e.g&&(n=he((48&o)>>4,(12&o)>>2,3&o),e.g.s=he((48&w)>>4,(12&w)>>2,3&w),e.g.m=n);else if(o===146)w=ct(n).value,n=ct(n).value,e.g&&((e=e.g).h=15&w,e.g=63&n);else if(o===151)n.skip(1),n.skip(1),w=ct(n).value,n.skip(1),e.g&&(e.g.D=3&w);else if(152<=o&&159>=o){if(o=(15&o)-8,!(O=e.h[o]!==null)){var L=new Ae;L.j=w,e.h[o]=L}w=ct(n).value,ct(n),ct(n),L=ct(n).value;var F=ct(n).value;n=ct(n).value,O&&!(7&n)||((n=e.h[o]).h=0,n.g=0,n.u=!1,n.o=!1,n.s="white",n.m="black"),(n=e.h[o]).l=0<(32&w),n.F=1+(15&L),n.B=1+(63&F),e.g=e.h[o]}}}return null}function st(e,n){for(var o=[],w=0;8>w;w++)(1&n)==1&&e.h[w]&&o.push(w),n>>=1;return o}function tt(e,n,o){for(var w=null,O=(n=i(st(e,n))).next();!O.done;O=n.next()){O=O.value;var L=e.h[O];L.isVisible()&&(w=He(L,o,e.i)),e.h[O]=null}return w}function ft(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function he(e,n,o){var w={0:0,1:0,2:1,3:1};return Ve[(e=w[e])<<2|(n=w[n])<<1|(o=w[o])]}ot.prototype.ga=function(){return this.g<this.h.length},ot.prototype.Z=function(){return this.g},ot.prototype.skip=function(e){if(this.g+e>this.h.length)throw new ht(2,2,3e3);this.g+=e};var Le=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),Ve="black blue green cyan red magenta yellow white".split(" ");function Fe(){this.h=[],this.g=[],this.i=new qe,this.l=0,this.s=new Map([["CC1",new cc(0,0)],["CC2",new cc(0,1)],["CC3",new cc(1,0)],["CC4",new cc(1,1)]]),this.o=this.m=0,this.j=new Map,Pe(this)}function Pe(e){e.m=0,e.o=0;for(var n=(e=i(e.s.values())).next();!n.done;n=e.next())(n=n.value).h=2,n.g=n.i,n.m=null,Fu(n.i),Fu(n.l),Fu(n.o)}function Ne(e,n){var o=n.type;if((112&n.xa)==16){var w=n.xa>>3&1;o===0?e.m=w:e.o=w}if(o=e.s.get("CC"+(o<<1|(o?e.o:e.m)+1)),n.xa===255&&n.La===255||!n.xa&&!n.La||!$e(n.xa)||!$e(n.La))return 45<=++e.l&&Pe(e),null;if(e.l=0,n.xa&=127,n.La&=127,!n.xa&&!n.La)return null;if(e=null,(112&n.xa)==16)e:{if(w=n.xa,e=n.La,o.m===(w<<8|e))o.m=null;else if(o.m=w<<8|e,(240&w)==16&&(192&e)==64){n=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&w)<<1|e>>5&1];var O=(30&e)>>1;w="white";var L=!1;if(7>O?w=Re[O]:O===7&&(L=!0),e=(1&e)==1,o.h!==ie){if(O=o.g,o.h===ae&&n!==O.g){var F=1+n-O.h;lc(O,F,1+O.g-O.h,O.h),rs(O,0,F-1),rs(O,n+1,15-n)}O.g=n,o.g.m=e,o.g.j=L,o.g.l=w,o.g.o="black"}}else if((247&w)==17&&(240&e)==32)o.g.m=!1,o.g.j=!1,o.g.l="white",Uu(o.g,Sl,32),w=!1,(n=Re[(14&e)>>1])==="white_italics"&&(n="white",w=!0),o.g.m=(1&e)==1,o.g.j=w,o.g.l=n;else if((247&w)==16&&(240&e)==32||(247&w)==23&&(255&e)==45)n="black",!(7&w)&&(n=se[(14&e)>>1]),o.g.o=n;else if((247&w)==17&&(240&e)==48)Uu(o.g,pf,e);else if((246&w)==18&&(224&e)==32)Uu(o.g,1&w?gf:zd,e);else if((246&w)==20&&(240&e)==32){switch(e=n.pts,w=null,n.La){case 32:$d(o);break;case 33:(o=o.g).i[o.g].pop();break;case 37:w=fc(o,2,e);break;case 38:w=fc(o,3,e);break;case 39:w=fc(o,4,e);break;case 40:Uu(o.g,Sl,32);break;case 41:o.h=2,o.g=o.i,o.g.h=0,o.j=e;break;case 42:Fu(o.o),dc(o);break;case 43:dc(o);break;case 44:n=o.i,w=null,o.h!==ie&&(w=uc(n,o.j,e)),rs(n,0,15);break;case 45:n=o.g,o.h!==ae?w=null:(w=uc(n,o.j,e),lc(n,(L=n.g-n.h+1)-1,L,n.h),rs(n,0,L-1),rs(n,n.g,15-n.g),o.j=e);break;case 46:rs(o.l,0,15);break;case 47:n=null,o.h!==ie&&(n=uc(o.i,o.j,e)),w=o.l,o.l=o.i,o.i=w,$d(o),o.j=e,w=n}e=w;break e}e=null}else w=n.La,Uu(o.g,Sl,n.xa),Uu(o.g,Sl,w);return e}function lt(e,n){var o=[];try{for(;n.ga();){var w=ct(n).value,O=(224&w)>>5,L=31&w;if(O===7&&L!=0&&(O=63&ct(n).value),O!=0){e.j.has(O)||e.j.set(O,new mt(O));for(var F=e.j.get(O),q=n.Z();n.Z()-q<L;){var $=ct(O=n),ce=$.value,ue=$.pts;if(ce===16&&(ce=ce<<16|ct(O).value),0<=ce&&31>=ce){var Ie=ue;if(F.g){var _e=F.g;switch(O=null,ce){case 8:!je(_e)||0>=_e.g&&0>=_e.h||(0>=_e.g?(_e.g=_e.B-1,_e.h--):_e.g--,_e.i[_e.h][_e.g]=null);break;case 13:if(_e.isVisible()&&(O=He(_e,Ie,F.i)),_e.h+1>=_e.F){Ie=_e;for(var Qe=0,ut=1;16>ut;ut++,Qe++)Ie.i[Qe]=Ie.i[ut];for(ut=0;1>ut;ut++,Qe++)Ie.i[Qe]=ye()}else _e.h++;_e.g=0;break;case 14:_e.isVisible()&&(O=He(_e,Ie,F.i)),_e.i[_e.h]=ye(),_e.g=0;break;case 12:_e.isVisible()&&(O=He(_e,Ie,F.i)),ve(_e),(Ie=_e).h=0,Ie.g=0}var at=O}else at=null}else if(128<=ce&&159>=ce)at=Me(F,O,ce,ue);else{if(4096<=ce&&4127>=ce)8<=(Ie=255&ce)&&15>=Ie?O.skip(1):16<=Ie&&23>=Ie?O.skip(2):24<=Ie&&31>=Ie&&O.skip(3);else if(4224<=ce&&4255>=ce)128<=(Ie=255&ce)&&135>=Ie?O.skip(4):136<=Ie&&143>=Ie&&O.skip(5);else if(32<=ce&&127>=ce)O=ce,F.g&&Oe(F.g,O===127?"":String.fromCharCode(O));else if(160<=ce&&255>=ce)F.g&&Oe(F.g,String.fromCharCode(ce));else if(4128<=ce&&4223>=ce){if(O=255&ce,F.g)if(Le.has(O)){var Ct=Le.get(O);Oe(F.g,Ct)}else Oe(F.g,"_")}else 4256<=ce&&4351>=ce&&F.g&&Oe(F.g,(255&ce)!=160?"_":"[CC]");at=null}(O=at)&&o.push(O)}}}}catch(yt){if(!(yt instanceof ht&&yt.code===3e3))throw yt;X("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return o}function $e(e){for(var n=0;e;)n^=1&e,e>>=1;return n===1}function xe(){}function et(e,n){var o=null,w=null,O=null,L=e.K();return 1&n&&(O=e.$a()),2&n&&e.skip(4),8&n&&(o=e.K()),16&n&&(w=e.K()),{trackId:L,Be:o,xf:w,th:O}}function Et(e,n){return{ve:n==1?e.$a():e.K()}}function kt(e,n){return n==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),{timescale:e.K()}}function Mt(e,n,o){var w=e.K(),O=[],L=null;1&o&&(L=e.K()),4&o&&e.skip(4);for(var F=0;F<w;F++){var q={de:null,sampleSize:null,ed:null};256&o&&(q.de=e.K()),512&o&&(q.sampleSize=e.K()),1024&o&&e.skip(4),2048&o&&(q.ed=n==0?e.K():e.Pe()),O.push(q)}return{yh:w,Re:O,wf:L}}function At(){this.j=new Map,this.i=this.h=0,this.g=Ot}xe.prototype.init=function(){},xe.prototype.parse=function(){return[]},At.prototype.init=function(e){function n(L){(L=L.name)in Jt&&(o.g=Jt[L])}var o=this,w=[],O=[];if(new ra().box("moov",oa).box("mvex",oa).P("trex",function(L){var F=L.reader;F.skip(4),F.skip(4),L=F.K(),F=F.K(),o.h=L,o.i=F}).box("trak",oa).P("tkhd",function(L){var F=L.reader;L.version==1?(F.skip(8),F.skip(8)):(F.skip(4),F.skip(4)),L=F.K(),w.push(L)}).box("mdia",oa).P("mdhd",function(L){L=kt(L.reader,L.version),O.push(L.timescale)}).box("minf",oa).box("stbl",oa).P("stsd",Pu).box("avc1",n).box("avc3",n).box("hev1",n).box("hvc1",n).box("dvh1",n).box("dvhe",n).box("encv",Dd).box("sinf",oa).box("frma",function(L){(L=pl(L=L.reader.K()))in Jt&&(o.g=Jt[L])}).parse(e,!0),!w.length||!O.length||w.length!=O.length)throw new ht(2,2,2010);this.g==Ot&&z("Unable to determine bitstream format for CEA parsing!"),w.forEach(function(L,F){o.j.set(L,O[F])})},At.prototype.parse=function(e){var n=this;if(this.g==Ot)return[];var o=[],w=this.h,O=this.i,L=[],F=null,q=null,$=null,ce=9e4;return new ra().box("moof",function(ue){F=ue.start,oa(ue)}).box("traf",oa).P("trun",function(ue){ue=Mt(ue.reader,ue.version,ue.flags),L=ue.Re,q=ue.wf}).P("tfhd",function(ue){ue=et(ue.reader,ue.flags),w=ue.Be||n.h,O=ue.xf||n.i,ue=ue.trackId,n.j.has(ue)&&(ce=n.j.get(ue))}).P("tfdt",function(ue){$=Et(ue.reader,ue.version).ve}).box("mdat",function(ue){if($===null)throw new ht(2,2,2010);e:{var Ie=ue.reader,_e=$,Qe=ce,ut=w,at=O,Ct=L,yt=0,Lt=at;for(Ct.length&&(Lt=Ct[0].sampleSize||at),Ie.skip((F||0)+(q||0)-ue.start-8);Ie.ga();){ue=Ie.K();var jt=Ie.Qa();switch(n.g){case Kt:jt=(jt&=31)==6;break;case _n:jt=(jt=jt>>1&63)==39||jt==40;break;default:break e}if(jt){jt=0,Ct.length>yt&&(jt=Ct[yt].ed||0),jt=(_e+jt)/Qe;for(var Zt,sn=[],Xt=Ie.Za(ue-1),Gt=Zt=0;Gt<Xt.length;)Zt==2&&Xt[Gt]==3?(Zt=0,(Xt=[].concat(g(Xt))).splice(Gt,1),Xt=new Uint8Array(Xt)):Xt[Gt]==0?Zt++:Zt=0,Gt++;for(Zt=Xt,Gt=0;Gt<Zt.length;){for(Xt=0;Zt[Gt]==255;)Xt+=255,Gt++;Xt+=Zt[Gt++];for(var bn=0;Zt[Gt]==255;)bn+=255,Gt++;bn+=Zt[Gt++],Xt==4&&sn.push(Zt.subarray(Gt,Gt+bn)),Gt+=bn}for(Zt=(sn=i(sn)).next();!Zt.done;Zt=sn.next())o.push({ig:Zt.value,pts:jt})}else try{Ie.skip(ue-1)}catch{break}(Lt-=ue+4)==0&&(_e=Ct.length>yt?_e+(Ct[yt].de||ut):_e+ut,yt++,Lt=Ct.length>yt&&Ct[yt].sampleSize||at)}}}).parse(e,!1),o};var Ot=0,Kt=1,_n=2,Jt={avc1:Kt,avc3:Kt,hev1:_n,hvc1:_n,dvh1:_n,dvhe:_n};function un(e){this.h=new xe,e.includes("video/mp4")&&(this.h=new At),this.g=new Fe}function Cn(e,n,o,w,O){this.ya=e,this.Ba=n,this.ka=o,this.Nd=w===void 0?null:w,this.timescale=O}function mn(e,n,o,w,O,L,F,q,$,ce,ue,Ie,_e,Qe,ut){ce=ce===void 0?[]:ce,Qe=Qe===void 0?St:Qe,this.startTime=e,this.j=this.endTime=n,this.u=o,this.Ba=w,this.ka=O,this.h=L,this.timestampOffset=F,this.appendWindowStart=q,this.appendWindowEnd=$,this.i=ce,this.tilesLayout=ue===void 0?"":ue,this.s=Ie===void 0?null:Ie,this.g=_e===void 0?null:_e,this.status=Qe,this.l=ut===void 0?null:ut,this.o=null,this.m=0}un.prototype.init=function(e){this.h.init(e)},Cn.prototype.lc=function(){return this.Ba},Cn.prototype.hc=function(){return this.ka},Q("shaka.media.InitSegmentReference",Cn),Cn.prototype.getEndByte=Cn.prototype.hc,Cn.prototype.getStartByte=Cn.prototype.lc,(E=mn.prototype).ya=function(){return this.u()},E.getStartTime=function(){return this.startTime},E.Ef=function(){return this.endTime},E.lc=function(){return this.Ba},E.hc=function(){return this.ka},E.Vf=function(){return this.tilesLayout},E.Uf=function(){return this.s},E.Eb=function(){return this.status},E.bg=function(){this.status=gt},E.Ye=function(e){this.o=e},E.Sf=function(){return this.o},E.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var n=i(this.i),o=n.next();!o.done;o=n.next())(o=o.value).startTime+=e,o.endTime+=e,o.j+=e},E.ne=function(e){this.g==null?H("Sync attempted without sync time!"):(e=this.g-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},Q("shaka.media.SegmentReference",mn),mn.prototype.syncAgainst=mn.prototype.ne,mn.prototype.offset=mn.prototype.offset,mn.prototype.getThumbnailSprite=mn.prototype.Sf,mn.prototype.setThumbnailSprite=mn.prototype.Ye,mn.prototype.markAsUnavailable=mn.prototype.bg,mn.prototype.getStatus=mn.prototype.Eb,mn.prototype.getTileDuration=mn.prototype.Uf,mn.prototype.getTilesLayout=mn.prototype.Vf,mn.prototype.getEndByte=mn.prototype.hc,mn.prototype.getStartByte=mn.prototype.lc,mn.prototype.getEndTime=mn.prototype.Ef,mn.prototype.getStartTime=mn.prototype.getStartTime,mn.prototype.getUris=mn.prototype.ya;var St=0,gt=1;function Rt(e){return!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null}function It(e){return!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function xt(e,n){return!(!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)||n>e.end(e.length-1))&&n>=e.start(0)}function zt(e,n){if(!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0))return 0;for(var o=0,w=(e=i(qt(e))).next();!w.done;w=e.next()){var O=w.value;w=O.start,(O=O.end)>n&&(o+=O-Math.max(w,n))}return o}function qt(e){if(!e)return[];for(var n=[],o=0;o<e.length;o++)n.push({start:e.start(o),end:e.end(o)});return n}function In(){}function Pn(e,n){var o=(127&e[n])<<21;return o|=(127&e[n+1])<<14,(o|=(127&e[n+2])<<7)|127&e[n+3]}function yr(e){var n={key:e.type,description:"",data:""};if(e.type==="TXXX"){if(2>e.size||e.data[0]!==3)return null;var o=e.data.subarray(1).indexOf(0);if(o===-1)return null;var w=Oi(Vt(e.data,1,o));return e=Oi(Vt(e.data,2+o)).replace(/\0*$/,""),n.description=w,n.data=e,n}return e.type==="WXXX"?2>e.size||e.data[0]!==3||(o=e.data.subarray(1).indexOf(0))===-1?null:(w=Oi(Vt(e.data,1,o)),e=Oi(Vt(e.data,2+o)).replace(/\0*$/,""),n.description=w,n.data=e,n):e.type==="PRIV"?2>e.size||(w=e.data.indexOf(0))===-1?null:(w=Oi(Vt(e.data,0,w)),e=Dt(e.data.subarray(w.length+1)),n.description=w,n.data=e,n):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Oi(e.data.subarray(1)).replace(/\0*$/,""),n.data=e,n):e.type[0]==="W"?(e=Oi(e.data).replace(/\0*$/,""),n.data=e,n):e.data?(n.data=Dt(e.data),n):null}function ar(e){for(var n=0,o=[];n+10<=e.length&&e[n]===73&&e[n+1]===68&&e[n+2]===51&&255>e[n+3]&&255>e[n+4]&&128>e[n+6]&&128>e[n+7]&&128>e[n+8]&&128>e[n+9];){var w=Pn(e,n+6);for(e[n+5]>>6&1&&(n+=10),w=(n+=10)+w;n+10<w;){var O=e.subarray(n),L=Pn(O,4);(L=yr(O={type:String.fromCharCode(O[0],O[1],O[2],O[3]),size:L,data:O.subarray(10,10+L)}))&&o.push(L),n+=O.size+10}n+10<=e.length&&e[n]===51&&e[n+1]===68&&e[n+2]===73&&255>e[n+3]&&255>e[n+4]&&128>e[n+6]&&128>e[n+7]&&128>e[n+8]&&128>e[n+9]&&(n+=10)}return o}function lr(){this.o=null,this.s=!1,this.l=this.m=null,this.B=[],this.g=this.h=null,this.u=[],this.j=null,this.i=[]}function ur(e){if((e[0]<<16|e[1]<<8|e[2])!=1)return null;var n={data:new Uint8Array(0),xh:6+(e[4]<<8|e[5]),pts:null,dts:null},o=e[7];return 192&o&&(n.pts=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,n.dts=n.pts,64&o&&(n.dts=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)),n.data=e.subarray(9+e[8]),n}function wr(e){for(var n=Math.min(1e3,e.length-564),o=0;o<n;){if(e[o]===71&&e[o+188]===71&&e[o+376]===71)return o;o++}return-1}function Jr(e,n,o){this.g=null,this.i=-1,this.j=e,this.h=n,this.l=o,typeof libDPIModule>"u"&&z("Could not Find LCEVC Library dependencies on this page"),typeof LcevcDil>"u"?z("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||z(LcevcDil.SupportObject.SupportError),typeof LcevcDil<"u"&&typeof libDPIModule<"u"&&this.h instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus&&!this.g&&LcevcDil.SupportObject.webGLSupport(this.h)&&(this.h.classList.remove("shaka-hidden"),this.g=new LcevcDil.LcevcDil(this.j,this.h,this.l))}function Xr(e,n){var o=ri;switch(n.mimeType){case"video/webm":o=hi;break;case"video/mp4":o=Ei}e.g&&(e.i=n.id,e.g.setLevelSwitching(n.id,!0),e.g.setContainerFormat(o))}mn.Status={Hg:St,qh:gt,Xg:2},Q("shaka.util.Id3Utils",In),In.getID3Frames=ar,lr.prototype.parse=function(e){if(564>e.length)return this;for(var n=Math.max(0,wr(e)),o=e.length-(e.length+n)%188,w=!1,O=n;O<o;O+=188)if(e[O]===71){var L=!!(64&e[O+1]),F=((31&e[O+1])<<8)+e[O+2];if(1<(48&e[O+3])>>4){var q=O+5+e[O+4];if(q===O+188)continue}else q=O+4;switch(F){case 0:L&&(q+=e[q]+1),this.o=(31&e[q+10])<<8|e[q+11];break;case 17:case 8191:break;case this.o:L&&(q+=e[q]+1),F={audio:-1,video:-1,Ed:-1,audioCodec:"",videoCodec:""};var $=q+3+((15&(L=e)[q+1])<<8|L[q+2])-4;for(q+=12+((15&L[q+10])<<8|L[q+11]);q<$;){var ce=(31&L[q+1])<<8|L[q+2];switch(L[q]){case 15:F.audio===-1&&(F.audio=ce,F.audioCodec="aac");break;case 21:F.Ed===-1&&(F.Ed=ce);break;case 27:F.video===-1&&(F.video=ce,F.videoCodec="avc");break;case 3:case 4:F.audio===-1&&(F.audio=ce,F.audioCodec="mp3");break;case 36:F.video===-1&&(F.video=ce,F.videoCodec="hvc")}q+=5+((15&L[q+3])<<8|L[q+4])}L=F,this.l==null&&(this.l=L.video),this.g==null&&(this.g=L.audio),this.j==null&&(this.j=L.Ed),w&&!this.s&&(w=!1,O=n-188),this.s=!0;break;case this.l:L=e.subarray(q,O+188),this.m==null&&(q=ur(L))&&q.pts!=null&&(this.m=q.pts/9e4),this.B.push(L);break;case this.g:L=e.subarray(q,O+188),this.h==null&&(q=ur(L))&&q.pts!=null&&(this.h=q.pts/9e4),this.u.push(L);break;case this.j:this.i.push(e.subarray(q,O+188));break;default:w=!0}}return this},lr.prototype.getStartTime=function(){return{audio:this.h,video:this.m}},Q("shaka.util.TsParser",lr),Jr.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},Q("shaka.lcevc.Dil",Jr),Jr.prototype.release=Jr.prototype.release;var ri=0,hi=1,Ei=2;function ui(e,n,o,w){var O=this;this.j=e,this.F=null,this.m=n,this.h={},this.L={},this.O={},this.g=null,this.H=!1,this.V=o||function(){},this.D=w||null,this.i={},this.u=new da,this.o={},this.s=null,this.J=new xi,this.l=function(L,F){var q=new MediaSource;return L.u.ma(q,"sourceopen",function(){URL.revokeObjectURL(L.M),F.resolve()}),L.M=$a(q),L.j.src=L.M,q}(this,this.J),this.G=new Vs(function(){return function(L){var F,q,$,ce,ue,Ie,_e;return W(function(Qe){if(Qe.g==1){for(q in F=[],L.i)for($=L.i[q],ce=$[0],L.i[q]=$.slice(0,1),ce&&F.push(ce.p.catch(Ri)),ue=i($.slice(1)),Ie=ue.next();!Ie.done;Ie=ue.next())Ie.value.p.reject(new ht(2,7,7003,void 0));for(_e in L.g&&F.push(L.g.destroy()),L.m&&F.push(L.m.destroy()),L.o)F.push(L.o[_e].destroy());return f(Qe,Promise.all(F),2)}L.u&&(L.u.release(),L.u=null),L.j&&(L.j.removeAttribute("src"),L.j.load(),L.j=null),L.F=null,L.l=null,L.g=null,L.m=null,L.h={},L.o={},L.s=null,L.i={},L.D=null,b(Qe)})}(O)}),this.M="",this.B=!1,this.W=new xi}function Sn(e,n,o){e.g||(e.g=new Qa(e.m));var w=e.g;e=e.H,n!="application/cea-608"&&n!="application/cea-708"&&(w.j=(0,ia[n])(),w.j.setSequenceMode?w.j.setSequenceMode(o):z('Text parsers should have a "setSequenceMode" method!'),w.u=e)}function sr(e){return!e.l||e.l.readyState=="ended"}function $n(e,n){return n==Tr?e.g.g:Rt(yn(e,n))}function Yt(e,n){return n==Tr?e.g.h:It(yn(e,n))}function yn(e,n){try{return e.h[n].buffered}catch{return null}}function Ht(e,n,o,w,O,L,F){var q,$,ce,ue,Ie,_e,Qe,ut,at,Ct,yt,Lt,jt,Zt,sn,Xt,Gt,bn,Tn,Ut,ln,Rn;return L=L!==void 0&&L,F=F!==void 0&&F,W(function(cn){switch(cn.g){case 1:if(n!=(q=ji).X){cn.A(2);break}if(!e.B){cn.A(3);break}return f(cn,e.W,4);case 4:$=cn.h,e.g.s=$;case 3:return f(cn,function(Dn,Jn,Fn,An){var Hn,Gn,rr,br;return W(function(dr){return dr.g==1?f(dr,Promise.resolve(),2):Dn.j&&Dn.i?Fn==null||An==null?(Dn.j.parseInit(Vt(Jn)),dr.return()):(Hn=Dn.u?Fn:Dn.s,Gn={periodStart:Dn.s,segmentStart:Fn,segmentEnd:An,vttOffset:Hn},rr=Dn.j.parseMedia(Vt(Jn),Gn),br=rr.filter(function(cr){return cr.startTime>=Dn.l&&cr.startTime<Dn.m}),Dn.i.append(br),Dn.g==null&&(Dn.g=Math.max(Fn,Dn.l)),Dn.h=Math.min(An,Dn.m),void b(dr)):dr.return()})}(e.g,o,w?w.startTime:null,w?w.endTime:null),5);case 5:return cn.return();case 2:if(ce=Vt(o),ue=e.L[n],e.o[n]&&(ue=e.o[n].o),0>wr(ce)?Co.includes(ue)&&(ut=ar(ce)).length&&w&&(at={cueTime:w.startTime,data:ce,frames:ut,dts:w.startTime,pts:w.startTime},e.V([at],0,w.endTime)):(Ie=new lr().parse(ce),_e=w.startTime-(Ie.getStartTime()[n]||0),Qe=function(Dn){for(var Jn=[],Fn=new Uint8Array(0),An=Dn.i.length-1;0<=An;An--){var Hn=ur(Fn=zi(Dn.i[An],Fn));Hn&&(Jn.unshift({cueTime:Hn.pts?Hn.pts/9e4:null,data:Hn.data,frames:ar(Hn.data),dts:Hn.dts,pts:Hn.pts}),Fn=new Uint8Array(0))}return Jn}(Ie),Qe.length&&e.V(Qe,_e,w?w.endTime:null)),!e.o[n]){O&&n==q.va&&(e.g||Sn(e,"text/vtt",e.B),e.s||(e.s=new un(ue)),w?(Ct=function(Dn,Jn){for(var Fn=(Jn=i(Jn=Dn.h.parse(Jn))).next();!Fn.done;Fn=Jn.next()){var An=Fn.value,Hn=Vt(An.ig);if(0<Hn.length&&(Fn=Dn.g,An=An.pts,(Hn=new Vi(Hn,0)).Qa()===181&&Hn.Zd()===49&&Hn.K()===1195456820&&Hn.Qa()===3)){var Gn=Hn.Qa();if(64&Gn){Gn&=31,Hn.skip(1);for(var rr=0;rr<Gn;rr++){var br=Hn.Qa(),dr=(4&br)>>2,cr=Hn.Qa(),Qn=Hn.Qa();dr&&((br&=3)==0||br===1?Fn.h.push({pts:An,type:br,xa:cr,La:Qn,order:Fn.h.length}):(Fn.g.push({pts:An,type:br,value:cr,order:Fn.g.length}),Fn.g.push({pts:An,type:2,value:Qn,order:Fn.g.length})))}}}}return function(Kn){function Vn(hr,Ur){return hr.pts-Ur.pts||hr.order-Ur.order}var tr=[];Kn.h.sort(Vn),Kn.g.sort(Vn);for(var qn=i(Kn.h),Er=qn.next();!Er.done;Er=qn.next())(Er=Ne(Kn,Er.value))&&tr.push(Er);for(Er=(qn=i(Kn.g)).next();!Er.done;Er=qn.next())vt(Kn.i,Er.value);for(Er=(qn=i(Kn.i.i)).next();!Er.done;Er=qn.next())Er=lt(Kn,Er.value),tr.push.apply(tr,g(Er));return Kn.i.i=[],Kn.h=[],Kn.g=[],tr}(Dn.g)}(e.s,o)).length&&(yt=e.h[q.va].timestampOffset,To(e.g,Ct,w.startTime,w.endTime,yt)):e.s.init(o)),cn.A(6);break}return L&&e.o[n].g.resetCaptions(),f(cn,function(Dn,Jn){return Dn.j=!0,Dn.h=new xi,Dn.l=[],Dn.i=[],Jn=Vt(Jn),Dn.g.push(Jn),Dn.g.flush(),Dn.j&&Dn.h.reject(new ht(2,3,3018)),Dn.h}(e.o[n],o),7);case 7:Lt=cn.h,e.g||Sn(e,"text/vtt",e.B),Lt.captions&&Lt.captions.length&&(jt=e.h[q.va].timestampOffset,Zt=function(Dn){for(var Jn=[],Fn=(Dn=i(Dn)).next();!Fn.done;Fn=Dn.next())Fn=Fn.value,Jn.push({stream:Fn.stream,cue:new Xe(Fn.startTime,Fn.endTime,Fn.text)});return Jn}(Lt.captions),To(e.g,Zt,w?w.startTime:null,w?w.endTime:null,jt)),o=Lt.data;case 6:if(o=function(Dn,Jn,Fn,An){var Hn=Dn.O[An];return Fn==null&&Hn&&(Ji()||$r())&&Dn.L[An].split(";")[0].split("/")[1]=="mp4"&&(Jn=function(Gn){function rr(){cr=!0}function br(qn){Qn.push(qn),oa(qn)}Gn=Vt(Gn);var dr,cr=!1,Qn=[],Kn=[];if(new ra().box("moov",br).box("trak",br).box("mdia",br).box("minf",br).box("stbl",br).P("stsd",function(qn){dr=qn,Qn.push(qn),Pu(qn)}).P("encv",rr).P("enca",rr).P("hev1",function(qn){Kn.push({box:qn,lb:1701733238})}).P("hvc1",function(qn){Kn.push({box:qn,lb:1701733238})}).P("avc1",function(qn){Kn.push({box:qn,lb:1701733238})}).P("avc3",function(qn){Kn.push({box:qn,lb:1701733238})}).P("ac-3",function(qn){Kn.push({box:qn,lb:1701733217})}).P("ec-3",function(qn){Kn.push({box:qn,lb:1701733217})}).P("mp4a",function(qn){Kn.push({box:qn,lb:1701733217})}).parse(Gn),cr)return Gn;if(Kn.length==0||!dr)throw pi(Gn),new ht(2,3,3019);Kn.reverse();for(var Vn=i(Kn),tr=Vn.next();!tr.done;tr=Vn.next())tr=tr.value,Gn=df(Gn,dr,tr.box,Qn,tr.lb);return Gn}(Jn)),Jn}(e,o,w?w.startTime:null,n),sn=e.h[n],Xt=Fa,!e.B||sn.mode==Xt||!w){cn.A(8);break}if(Gt=e.l.duration,n!=q.va&&q.va in e.h){cn.A(9);break}return bn=[sn.appendWindowStart,sn.appendWindowEnd],sn.appendWindowStart=0,sn.appendWindowEnd=1/0,Tn=sn.timestampOffset,sn.timestampOffset=0,f(cn,mr(e,n,function(){return rt(e,n,o)}),10);case 10:return f(cn,mr(e,n,function(){return an(e,n)}),11);case 11:return sn.timestampOffset=Tn,sn.appendWindowStart=bn[0],sn.appendWindowEnd=bn[1],Ut=Rt(yn(e,n)),ln=(w.startTime||0)-(Ut||0),e.W.resolve(ln),f(cn,mr(e,n,function(){return Pt(e,n,0,Gt)}),12);case 12:if(n!=q.va){cn.A(9);break}return f(cn,mr(e,n,function(){e.j.currentTime-=.001,Wn(e,n)}),9);case 9:return sn.mode=Xt,f(cn,e.Aa(Gt),8);case 8:return w&&e.B&&n!=q.X&&(L||F)&&(Rn=w.startTime,mr(e,n,function(){return an(e,n)}),mr(e,n,function(){return On(e,n,Rn)})),f(cn,mr(e,n,function(){rt(e,n,o)}),16);case 16:b(cn)}})}function tn(e,n){return W(function(o){return n==ji.X?e.g?f(o,e.g.remove(0,1/0),0):o.return():f(o,mr(e,n,function(){return Pt(e,n,0,e.l.duration)}),0)})}function rt(e,n,o){if(n=="video"&&e.D){var w=e.D;w.g&&w.g.appendBuffer(o,"video",w.i)}e.h[n].appendBuffer(o)}function Pt(e,n,o,w){w<=o?Wn(e,n):e.h[n].remove(o,w)}function an(e,n){var o=e.h[n].appendWindowStart,w=e.h[n].appendWindowEnd;e.h[n].abort(),e.h[n].appendWindowStart=o,e.h[n].appendWindowEnd=w,Wn(e,n)}function On(e,n,o){0>o&&(o+=.001),e.h[n].timestampOffset=o,Wn(e,n)}function Wn(e,n){var o=e.i[n][0];o&&(o.p.resolve(),Pa(e,n))}function mr(e,n,o){return aa(e.G),o={start:o,p:new xi},e.i[n].push(o),e.i[n].length==1&&Ea(e,n),o.p}function Zi(e,n){var o,w,O,L,F;return W(function(q){switch(q.g){case 1:for(O in aa(e.G),o=[],w={},e.h)w.Ub=new xi,L={start:function($){return function(){return $.Ub.resolve()}}(w),p:w.Ub},e.i[O].push(L),o.push(w.Ub),e.i[O].length==1&&L.start(),w={Ub:w.Ub};return p(q,2),f(q,Promise.all(o),4);case 4:P(q,3);break;case 2:throw j(q);case 3:try{n()}catch($){throw new ht(2,3,3015,$)}finally{for(F in e.h)Pa(e,F)}b(q)}})}function Pa(e,n){e.i[n].shift(),Ea(e,n)}function Ea(e,n){var o=e.i[n][0];if(o)try{o.start()}catch(w){w.name=="QuotaExceededError"?o.p.reject(new ht(2,3,3017,n)):o.p.reject(new ht(2,3,3015,w)),Pa(e,n)}}(E=ui.prototype).destroy=function(){return this.G.destroy()},E.init=function(e,n,o){o=o!==void 0&&o;var w,O,L,F,q,$,ce,ue,Ie=this;return W(function(_e){if(_e.g==1)return w=ji,f(_e,Ie.J,2);for(Ie.B=o,O={},L=i(e.keys()),F=L.next();!F.done;O={na:O.na},F=L.next())O.na=F.value,q=e.get(O.na),$=ma(q.mimeType,q.codecs),O.na==w.X?Sn(Ie,$,o):(!n&&Ye($)||!Yn($,O.na)||(Ie.o[O.na]=new Gi($),$=Ar(O.na,$)),ce=$+Ie.F.sourceBufferExtraFeatures,ue=Ie.l.addSourceBuffer(ce),Ie.u.C(ue,"error",function(Qe){return function(){Ie.i[Qe.na][0].p.reject(new ht(2,3,3014,Ie.j.error?Ie.j.error.code:0))}}(O)),Ie.u.C(ue,"updateend",function(Qe){return function(){return Wn(Ie,Qe.na)}}(O)),Ie.h[O.na]=ue,Ie.L[O.na]=$,Ie.i[O.na]=[],Ie.O[O.na]=!!q.drmInfos.length);b(_e)})},E.configure=function(e){this.F=e},E.Ma=function(){var e={total:qt(this.j.buffered),audio:qt(yn(this,"audio")),video:qt(yn(this,"video")),text:[]};if(this.g){var n=this.g.g,o=this.g.h;n!=null&&o!=null&&e.text.push({start:n,end:o})}return e},E.remove=function(e,n,o){var w=this;return W(function(O){return e==ji.X?f(O,w.g.remove(n,o),0):f(O,mr(w,e,function(){return Pt(w,e,n,o)}),0)})},E.flush=function(e){var n=this;return W(function(o){return e==ji.X?o.return():f(o,mr(n,e,function(){n.j.currentTime-=.001,Wn(n,e)}),0)})},E.endOfStream=function(e){var n=this;return W(function(o){return f(o,Zi(n,function(){sr(n)||(e?n.l.endOfStream(e):n.l.endOfStream())}),0)})},E.Aa=function(e){var n=this;return W(function(o){return f(o,Zi(n,function(){if(e<n.l.duration)for(var w in n.h){var O={start:function(){},p:new xi};n.i[w].unshift(O)}n.l.duration=e}),0)})},E.getDuration=function(){return this.l.duration};var $a=C.URL.createObjectURL,Fa="sequence",Co=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Gr(e,n,o){this.i=e,this.m=n,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.s=0,this.u=!0,this.B=0,this.D=o===void 0||o,this.F=0,this.G=!1}function Bo(e,n,o){this.l=o,this.j=e,this.s=ko(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.u=n,this.i=function(){}}function Ss(e){this.g=e}function ko(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var n=!1;else e:{n=e.g.currentTime;for(var o=(e=i(qt(e.g.buffered))).next();!o.done;o=e.next())if(!(n<(o=o.value).start-.1||n>o.end-.5)){n=!0;break e}n=!1}return n}function zo(e,n,o,w,O){var L=this;this.o=O,this.g=e,this.s=n,this.D=o,this.i=new da,this.m=!1,this.B=e.readyState,this.u=0,this.h=w,this.l=!1,this.i.C(e,"waiting",function(){return is(L)}),this.j=new ni(function(){is(L)}).Ca(.25)}function is(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||e.g.currentTime==0&&(e.g.autoplay||e.g.currentTime!=0)){var n;if(e.g.readyState!=e.B&&(e.B=e.g.readyState),!(n=!e.h)){var o=(n=e.h).j,w=ko(o),O=o.g.currentTime,L=Date.now()/1e3;n.g==O&&n.s==w||(n.m=L,n.g=O,n.s=w,n.h=!1),(w=(O=L-n.m)>=n.u&&w&&!n.h)&&(n.i(n.g,O),n.h=!0,n.g=o.g.currentTime,n.o++,n.l(new si("stalldetected"))),n=!w}n&&(n=e.g.currentTime,w=function(F,q,$){return!F||!F.length||F.length==1&&1e-6>F.end(0)-F.start(0)?null:0<=(F=qt(F).findIndex(function(ce,ue,Ie){return ce.start>q&&(ue==0||Ie[ue-1].end-q<=$)}))?F:null}(o=e.g.buffered,n,e.D.gapDetectionThreshold),w==null||w==0&&!e.l||(O=o.start(w))>=e.s.Na()||.001>O-n||(w!=0&&o.end(w-1),e.g.currentTime=O,e.u++,e.o(new si("gapjumped"))))}}}function Mo(e,n,o,w){n==HTMLMediaElement.HAVE_NOTHING||e.readyState>=n?w():(n=Ks.value().get(n),o.ma(e,n,w))}(E=Gr.prototype).getDuration=function(){return this.j},E.Kf=function(){return this.g},E.Xe=function(e){this.i=e},E.Aa=function(e){this.j=e},E.Pf=function(){return this.i},E.Ve=function(e){this.s=e},E.yc=function(e){this.u=e},E.le=function(e){this.o=e},E.We=function(e){this.m=e},E.Df=function(){return this.m},E.Ib=function(e){if(e.length!=0){for(var n=e[0].startTime,o=e[0].endTime,w=(e=i(e)).next();!w.done;w=e.next())w=w.value,n=Math.min(n,w.startTime),o=Math.max(o,w.endTime),this.g=Math.max(this.g,w.endTime-w.startTime);this.Sd(n),this.h=Math.max(this.h,o),this.i!=null&&this.D&&!this.G&&(this.i=(Date.now()+this.s)/1e3-this.h-this.g)}},E.Ld=function(){this.G=!0},E.Sd=function(e){this.l=this.l==null?e:Math.min(this.l,e)},E.Rd=function(e){this.g=Math.max(this.g,e)},E.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},E.T=function(){return this.j==1/0&&!this.u},E.jb=function(){return this.j!=1/0&&!this.u},E.Oa=function(){return Math.max(this.B,this.gb()-this.o)},E.Ze=function(e){this.B=e},E.gb=function(){return this.T()||this.jb()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.g-this.i)+this.F,this.j):this.h?Math.min(this.h,this.j):this.j},E.kc=function(e){var n=Math.max(this.l,this.B);return this.o==1/0?Math.ceil(1e3*n)/1e3:Math.max(n,Math.min(this.gb()-this.o+e,this.Na()))},E.Db=function(){return this.kc(0)},E.Na=function(){return Math.max(0,this.gb()-(this.T()||this.jb()?this.m:0))},E.df=function(){return!(this.i==null||this.h!=null&&this.D)},E.Ue=function(e){this.F=e},Q("shaka.media.PresentationTimeline",Gr),Gr.prototype.setAvailabilityTimeOffset=Gr.prototype.Ue,Gr.prototype.usingPresentationStartTime=Gr.prototype.df,Gr.prototype.getSeekRangeEnd=Gr.prototype.Na,Gr.prototype.getSeekRangeStart=Gr.prototype.Db,Gr.prototype.getSafeSeekRangeStart=Gr.prototype.kc,Gr.prototype.getSegmentAvailabilityEnd=Gr.prototype.gb,Gr.prototype.setUserSeekStart=Gr.prototype.Ze,Gr.prototype.getSegmentAvailabilityStart=Gr.prototype.Oa,Gr.prototype.isInProgress=Gr.prototype.jb,Gr.prototype.isLive=Gr.prototype.T,Gr.prototype.offset=Gr.prototype.offset,Gr.prototype.notifyMaxSegmentDuration=Gr.prototype.Rd,Gr.prototype.notifyMinSegmentStartTime=Gr.prototype.Sd,Gr.prototype.lockStartTime=Gr.prototype.Ld,Gr.prototype.notifySegments=Gr.prototype.Ib,Gr.prototype.getDelay=Gr.prototype.Df,Gr.prototype.setDelay=Gr.prototype.We,Gr.prototype.setSegmentAvailabilityDuration=Gr.prototype.le,Gr.prototype.setStatic=Gr.prototype.yc,Gr.prototype.setClockOffset=Gr.prototype.Ve,Gr.prototype.getPresentationStartTime=Gr.prototype.Pf,Gr.prototype.setDuration=Gr.prototype.Aa,Gr.prototype.setPresentationStartTime=Gr.prototype.Xe,Gr.prototype.getMaxSegmentDuration=Gr.prototype.Kf,Gr.prototype.getDuration=Gr.prototype.getDuration,Bo.prototype.release=function(){this.l=this.j=null,this.i=function(){}},zo.prototype.release=function(){this.i&&(this.i.release(),this.i=null),this.j!=null&&(this.j.stop(),this.j=null),this.h&&(this.h.release(),this.h=null),this.g=this.s=this.o=null},zo.prototype.Vd=function(){this.l=!0,is(this)};var Ks=new bo(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function Bu(e,n,o){var w=this;this.g=e,this.l=n,this.j=o,this.m=!1,this.h=new da,this.i=new Hu(e),Mo(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){hu(w,w.j)})}function ju(e){return e.m?e.g.currentTime:e.j}function du(e,n){0<e.g.readyState?Qt(e.i,n):Mo(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){hu(e,e.j)})}function hu(e,n){.001>Math.abs(e.g.currentTime-n)?Gu(e):(e.h.ma(e.g,"seeking",function(){Gu(e)}),Qt(e.i,e.g.currentTime==0?n:e.g.currentTime))}function Gu(e){e.m=!0,e.h.C(e.g,"seeking",function(){return e.l()})}function Hu(e){var n=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new ni(function(){0>=n.i||n.h.currentTime!=n.j?n.g.stop():(n.h.currentTime=n.l,n.i--)})}function Qt(e,n){e.j=e.h.currentTime,e.l=n,e.i=e.m,e.h.currentTime=n,e.g.Ca(.1)}function Mn(e){this.g=e,this.j=!1,this.h=null,this.i=new da}function _r(e,n,o,w,O,L){var F=this;this.i=e,this.g=n.presentationTimeline,this.B=n.minBufferTime||0,this.l=o,this.u=O,this.s=null,this.o=function(q,$,ce){if(!$.stallEnabled)return null;var ue=$.stallSkip;return function(Ie,_e){Ie.i=_e}($=new Bo(new Ss(q),$.stallThreshold,ce),function(){ue?q.currentTime+=ue:(q.pause(),q.play())}),$}(e,o,L),this.j=new zo(e,n.presentationTimeline,o,this.o,L),this.h=new Bu(e,function(){var q=F.j;q.m=!0,q.l=!1;var $=ju(F.h);return q=bi(F,$),.001<Math.abs(q-$)&&($=Date.now()/1e3,!F.s||F.s<$-1)?(F.s=$,du(F.h,q),q=void 0):(F.u(),q=void 0),q},function(q,$){return $==null?$=1/0>q.g.getDuration()?q.g.Db():q.g.Na():0>$&&($=q.g.Na()+$),Fr(q,gi(q,$))}(this,w)),this.m=new ni(function(){if(F.i.readyState!=0&&!F.i.paused){var q=ju(F.h),$=F.g.Db(),ce=F.g.Na();3>ce-$&&($=ce-3),q<$&&(q=bi(F,q),F.i.currentTime=q)}})}function Fr(e,n){var o=e.g.getDuration();return n>=o?o-e.l.durationBackoff:n}function bi(e,n){var o=Math.max(e.B,e.l.rebufferingGoal),w=e.l.safeSeekOffset,O=e.g.Db(),L=e.g.Na(),F=e.g.getDuration();3>L-O&&(O=L-3);var q=e.g.kc(o),$=e.g.kc(w);return o=e.g.kc(o+w),n>=F?Fr(e,n):n>L?L:n<O?xt(e.i.buffered,$)?$:o:n>=q||xt(e.i.buffered,n)?n:o}function gi(e,n){var o=e.g.Db();return n<o?o:n>(e=e.g.Na())?e:n}function er(e){this.g=e,this.h=null,this.i=0,this.j=!1}function ba(e,n){for(var o=(e=i(e.g)).next();!o.done;o=e.next())n(o.value)}function sa(e,n,o){return new er([new mn(e,e+n,function(){return o},0,null,null,e,e,e+n)])}function Ya(e,n,o){this.i=e,this.g=n,this.h=o}function Sa(){er.call(this,[]),this.l=[]}function mf(e){var n=this;this.g=e,this.j=!1,this.i=this.g.Tc(),this.h=new ni(function(){n.g.Me(.25*n.i)})}function gy(e){e.h.stop();var n=e.j?0:e.i;if(0<=n)try{return void(e.g.Tc()!=n&&e.g.ke(n))}catch{}e.h.Ca(.25),e.g.Tc()!=0&&e.g.ke(0)}function my(e){var n=this;this.h=e,this.g=new Set,this.i=new ni(function(){vy(n,!1)}).Ca(.25)}function vy(e,n){for(var o=i(e.g),w=o.next();!w.done;w=o.next())w.value.j(e.h.currentTime,n)}function Jd(e){wi.call(this),this.g=new Map,this.h=e}function og(e){wi.call(this);var n=this;this.g=new Set,this.i=e,this.h=new ni(function(){for(var o=n.i(),w=i(n.g),O=w.next();!O.done;O=w.next())(O=O.value).endTime<o.start&&(n.g.delete(O),O=new si("regionremove",new Map([["region",O]])),n.dispatchEvent(O))}).Ca(2)}function eh(e){wi.call(this);var n=this;this.i=e,this.g=new Map,this.l=[{rb:null,qb:pc,ib:function(o,w){return Al(n,"enter",o,w)}},{rb:vf,qb:pc,ib:function(o,w){return Al(n,"enter",o,w)}},{rb:yf,qb:pc,ib:function(o,w){return Al(n,"enter",o,w)}},{rb:pc,qb:vf,ib:function(o,w){return Al(n,"exit",o,w)}},{rb:pc,qb:yf,ib:function(o,w){return Al(n,"exit",o,w)}},{rb:vf,qb:yf,ib:function(o,w){return Al(n,"skip",o,w)}},{rb:yf,qb:vf,ib:function(o,w){return Al(n,"skip",o,w)}}],this.h=new da,this.h.C(this.i,"regionremove",function(o){n.g.delete(o.region)})}function Al(e,n,o,w){n=new si(n,new Map([["region",o],["seeking",w]])),e.dispatchEvent(n)}Bu.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.l=function(){},this.g=null},Hu.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},(E=Mn.prototype).yd=function(){var e=this;Mo(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e.h==null||e.h==0?e.j=!0:(e.i.ma(e.g,"seeking",function(){e.j=!0}),e.g.currentTime=Math.max(0,e.g.currentTime+e.h))})},E.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},E.zd=function(e){this.h=this.j?this.h:e},E.Ic=function(){return(this.j?this.g.currentTime:this.h)||0},E.te=function(){return 0},E.se=function(){return 0},E.Ne=function(){},(E=_r.prototype).yd=function(){this.m.Ca(.25)},E.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},E.zd=function(e){du(this.h,e)},E.Ic=function(){var e=ju(this.h);return 0<this.i.readyState&&!this.i.paused?gi(this,e):e},E.te=function(){return this.o?this.o.o:0},E.se=function(){return this.j.u},E.Ne=function(){this.j.Vd()},(E=er.prototype).release=function(){this.j||(this.g=[],this.h&&this.h.stop(),this.h=null)},E.cg=function(){this.j=!0},E.find=function(e){for(var n=this.g.length-1,o=n;0<=o;--o){var w=this.g[o],O=o<n?this.g[o+1].startTime:w.endTime;if(e>=w.startTime&&e<O)return o+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},E.get=function(e){return this.g.length==0||0>(e-=this.i)||e>=this.g.length?null:this.g[e]},E.offset=function(e){if(!this.j)for(var n=i(this.g),o=n.next();!o.done;o=n.next())o.value.offset(e)},E.pc=function(e){if(!this.j&&e.length){var n=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(o){return Math.round(1e3*o.startTime)/1e3<n}),this.g.push.apply(this.g,g(e))}},E.Hb=function(e,n){var o=this;e=e.filter(function(w){return w.endTime>n&&(o.g.length==0||w.endTime>o.g[0].startTime)}),this.pc(e),this.eb(n)},E.eb=function(e){if(!this.j){var n=this.g.length;this.g=this.g.filter(function(o){return o.endTime>e}),this.i+=n-this.g.length}},E.Wa=function(e,n,o){if(o=o!==void 0&&o,!this.j){for(;this.g.length&&this.g[this.g.length-1].startTime>=n;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),o||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],this.g[this.g.length-1]=new mn(e.startTime,n,e.u,e.Ba,e.ka,e.h,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.i,e.tilesLayout,e.s,e.g,e.status,e.l))}},E.fd=function(e,n){var o=this;this.j||(this.h&&this.h.stop(),this.h=new ni(function(){var w=n();w?o.g.push.apply(o.g,g(w)):(o.h.stop(),o.h=null)}),this.h.Ca(e))},er.prototype[Symbol.iterator]=function(){return this.Cb(0)},er.prototype.Cb=function(e){var n=this.find(e);if(n==null)return null;n--;var o=this.get(n+1),w=-1;if(o&&0<o.i.length)for(var O=o.i.length-1;0<=O;--O){var L=o.i[O];if(e>=L.startTime&&e<L.endTime){n++,w=O-1;break}}return new Ya(this,n,w)},Q("shaka.media.SegmentIndex",er),er.forSingleSegment=sa,er.prototype.getIteratorForTime=er.prototype.Cb,er.prototype.updateEvery=er.prototype.fd,er.prototype.fit=er.prototype.Wa,er.prototype.evict=er.prototype.eb,er.prototype.mergeAndEvict=er.prototype.Hb,er.prototype.offset=er.prototype.offset,er.prototype.get=er.prototype.get,er.prototype.find=er.prototype.find,er.prototype.markImmutable=er.prototype.cg,er.prototype.release=er.prototype.release,Ya.prototype.vf=function(){return this.g},Ya.prototype.current=function(){var e=this.i.get(this.g);return e&&0<e.i.length&&e.ya().length&&this.h>=e.i.length&&(this.g++,this.h=0,e=this.i.get(this.g)),e&&0<e.i.length?e.i[this.h]:e},Ya.prototype.next=function(){var e=this.i.get(this.g);return e&&0<e.i.length?(this.h++,e.ya().length&&this.h==e.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0),{value:e=this.current(),done:!e}},Q("shaka.media.SegmentIterator",Ya),Ya.prototype.next=Ya.prototype.next,Ya.prototype.current=Ya.prototype.current,Ya.prototype.currentPosition=Ya.prototype.vf,S(Sa,er),(E=Sa.prototype).clone=function(){var e=new Sa;return e.l=this.l.slice(),e},E.release=function(){for(var e=i(this.l),n=e.next();!n.done;n=e.next())n.value.release();this.l=[]},E.find=function(e){for(var n=0,o=i(this.l),w=o.next();!w.done;w=o.next()){var O=(w=w.value).find(e);if(O!=null)return O+n;n+=w.i+w.g.length}return null},E.get=function(e){for(var n=0,o=i(this.l),w=o.next();!w.done;w=o.next()){var O=(w=w.value).get(e-n);if(O)return O;n+=w.i+w.g.length}return null},E.offset=function(){},E.pc=function(){},E.eb=function(){},E.Hb=function(){},E.Wa=function(){},E.fd=function(){},Q("shaka.media.MetaSegmentIndex",Sa),Sa.prototype.updateEvery=Sa.prototype.fd,Sa.prototype.fit=Sa.prototype.Wa,Sa.prototype.mergeAndEvict=Sa.prototype.Hb,Sa.prototype.evict=Sa.prototype.eb,Sa.prototype.merge=Sa.prototype.pc,Sa.prototype.offset=Sa.prototype.offset,Sa.prototype.get=Sa.prototype.get,Sa.prototype.find=Sa.prototype.find,Sa.prototype.release=Sa.prototype.release,mf.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},mf.prototype.set=function(e){this.i=e,gy(this)},mf.prototype.Pc=function(){return this.g.Pc()},my.prototype.release=function(){this.i.stop();for(var e=i(this.g),n=e.next();!n.done;n=e.next())n.value.release();this.g.clear()},S(Jd,wi),Jd.prototype.release=function(){this.g.clear(),wi.prototype.release.call(this)},Jd.prototype.j=function(e){for(var n=i(this.g.values()),o=n.next();!o.done;o=n.next()){e:{for(var w=(o=o.value).rc,O=w.length-1;0<=O;O--){var L=w[O];if(L.position<=e){w=L.Nd;break e}}w=null}if((O=w)&&(O=!((O=o.ze)===w||O&&w&&O.bandwidth==w.bandwidth&&O.audioSamplingRate==w.audioSamplingRate&&O.codecs==w.codecs&&O.contentType==w.contentType&&O.frameRate==w.frameRate&&O.height==w.height&&O.mimeType==w.mimeType&&O.channelsCount==w.channelsCount&&O.pixelAspectRatio==w.pixelAspectRatio&&O.width==w.width)),O)e:{if(O=e,L=w.contentType,(L=this.h()[L])&&0<L.length){var F=L[L.length-1].end;if(O>=L[0].start&&O<F){O=!0;break e}}O=!1}O&&(o.ze=w,JSON.stringify(w),o=new si("qualitychange",new Map([["quality",w],["position",e]])),this.dispatchEvent(o))}},S(og,wi),og.prototype.release=function(){this.g.clear(),this.h.stop(),wi.prototype.release.call(this)},S(eh,wi),eh.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,wi.prototype.release.call(this)},eh.prototype.j=function(e,n){for(var o=i(this.i.g),w=o.next();!w.done;w=o.next()){w=w.value;var O=this.g.get(w),L=e<w.startTime?vf:e>w.endTime?yf:pc;this.g.set(w,L);for(var F=i(this.l),q=F.next();!q.done;q=F.next())(q=q.value).rb==O&&q.qb==L&&q.ib(w,n)}};var vf=1,pc=2,yf=3;function sg(e,n,o,w,O){return e=xo(e,w,O),n==0&&o==null||(e.headers.Range=o?"bytes="+n+"-"+o:"bytes="+n+"-"),e}function yy(e,n){var o=this;this.g=n,this.m=e,this.i=null,this.u=1,this.o=this.l=null,this.D=!1,this.j=new Map,this.B=!1,this.F=null,this.s=!1,this.h=new Vs(function(){return function(w){var O,L,F,q;return W(function($){if($.g==1){for(O=[],L=i(w.j.values()),F=L.next();!F.done;F=L.next())Ef(q=F.value),O.push(_y(q));return f($,Promise.all(O),2)}w.j.clear(),w.g=null,w.m=null,w.i=null,b($)})}(o)})}function Ey(e,n){var o=e.j.get("video");if(o){var w=o.stream;w&&(n?(n=w.trickModeVideo)&&!o.ob&&(gc(e,n,!1,0,!1),o.ob=w):(w=o.ob)&&(o.ob=null,gc(e,w,!0,0,!1)))}}function by(e,n,o,w,O,L){o=o!==void 0&&o,w=w===void 0?0:w,O=O!==void 0&&O,L=L!==void 0&&L,e.l=n,e.B&&(n.video&&gc(e,n.video,o,w,O,L),n.audio&&gc(e,n.audio,o,w,O,L))}function th(e,n){e.o=n,e.B&&gc(e,n,!0,0,!1)}function gc(e,n,o,w,O,L){var F=e.j.get(n.type);F||n.type!=Tr?F&&(F.ob&&(n.trickModeVideo?(F.ob=n,n=n.trickModeVideo):F.ob=null),F.stream!=n||O)&&(n.type==Tr&&Sn(e.g.R,ma(n.mimeType,n.codecs),e.m.sequenceMode),F.stream.closeSegmentIndex&&F.stream.closeSegmentIndex(),F.stream=n,F.aa=null,F.ue=!!L,o&&(F.ac?F.hd=!0:F.ra?(F.bb=!0,F.Nc=w,F.hd=!0):(Ef(F),fg(e,F,!0,w).catch(function(q){e.g&&e.g.onError(q)}))),function(q,$){var ce,ue;return W(function(Ie){if(Ie.g==1)return $.ta?(ce=$.stream,ue=$.ta,ce.segmentIndex?Ie.A(2):f(Ie,ce.createSegmentIndex(),2)):Ie.return();if($.ta!=ue||$.stream!=ce)return Ie.return();var _e=q.g.Sc(),Qe=Yt(q.g.R,$.type),ut=$.stream.segmentIndex.find($.pa?$.pa.endTime:_e),at=ut==null?null:$.stream.segmentIndex.get(ut);ut=at&&at.ka?at.ka-at.Ba:null,at&&!ut&&(ut=(at.endTime-at.getStartTime())*($.stream.bandwidth||0)/8),ut?((at=at.h)&&(ut+=(at.ka?at.ka-at.Ba:null)||0),_e=8*ut/(at=q.g.getBandwidthEstimate())<(Qe||0)-_e-Math.max(q.m.minBufferTime||0,q.i.rebufferingGoal)||$.ta.h.g>ut):_e=!1,_e&&$.ta.abort(),b(Ie)})}(e,F).catch(function(q){e.g&&e.g.onError(q)})):function(q,$){var ce,ue,Ie,_e;W(function(Qe){switch(Qe.g){case 1:return ce=ji,p(Qe,2),f(Qe,tn(q.g.R,ce.X),4);case 4:P(Qe,3);break;case 2:ue=j(Qe),q.g&&q.g.onError(ue);case 3:Ie=ma($.mimeType,$.codecs),Sn(q.g.R,Ie,q.m.sequenceMode),(q.g.R.m.isTextVisible()||q.i.alwaysStreamText)&&(_e=Ty($),q.j.set(ce.X,_e),as(q,_e,0)),b(Qe)}})}(e,n)}function Z_(e,n){n.ac||n.bb||(n.ra?(n.bb=!0,n.Nc=0):$n(e.g.R,n.type)==null?n.Ka==null&&as(e,n,0):(Ef(n),fg(e,n,!1,0).catch(function(o){e.g&&e.g.onError(o)})))}function Ty(e){return{stream:e,type:e.type,aa:null,pa:null,Zc:null,Jd:null,Id:null,Hd:null,ob:null,endOfStream:!1,ra:!1,Ka:null,bb:!1,Nc:0,hd:!1,ac:!1,vc:!0,Qd:!1,ae:!1,nc:!1,ta:null}}function ug(e,n,o,w,O,L){var F,q,$,ce,ue,Ie;return W(function(_e){switch(_e.g){case 1:return F=w.closedCaptions&&0<w.closedCaptions.size,$=w.emsgSchemeIdUris!=null&&0<w.emsgSchemeIdUris.length||e.i.dispatchAllEmsgBoxes,ce=e.i.parsePrftBox&&!e.D,($||ce)&&(q=new ra),$&&q.P("emsg",function(Qe){var ut=w.emsgSchemeIdUris;if(Qe.version===0)var at=Qe.reader.sc(),Ct=Qe.reader.sc(),yt=Qe.reader.K(),Lt=Qe.reader.K(),jt=Qe.reader.K(),Zt=Qe.reader.K(),sn=O.startTime+Lt/yt;else yt=Qe.reader.K(),Lt=(sn=Qe.reader.$a()/yt+O.timestampOffset)-O.startTime,jt=Qe.reader.K(),Zt=Qe.reader.K(),at=Qe.reader.sc(),Ct=Qe.reader.sc();Qe=Qe.reader.Za(Qe.reader.S.byteLength-Qe.reader.Z()),(ut&&ut.includes(at)||e.i.dispatchAllEmsgBoxes)&&(at=="urn:mpeg:dash:event:2012"?e.g.gg():at=="https://aomedia.org/emsg/ID3"?(ut=ar(Qe)).length&&O&&e.g.hg([{cueTime:O.startTime,data:Qe,frames:ut,dts:O.startTime,pts:O.startTime}],0,O.endTime):(ut=new si("emsg",ut=new Map().set("detail",{startTime:sn,endTime:sn+jt/yt,schemeIdUri:at,value:Ct,timescale:yt,presentationTimeDelta:Lt,eventDuration:jt,id:Zt,messageData:Qe})),e.g.onEvent(ut)))}),ce&&q.P("prft",function(Qe){e:{if(!e.D&&O.h.timescale){Qe.reader.K();var ut=Qe.reader.K();if(ut=1e3*ut+Qe.reader.K()/Math.pow(2,32)*1e3,Qe.version===0)var at=Qe.reader.K();else try{at=Qe.reader.$a()}catch{e.D=!0,at=void 0;break e}Qe=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+ut).getTime(),at=new si("prft",at=new Map().set("detail",{wallClockTime:Qe,programStartDate:new Date(Qe-at/O.h.timescale*1e3)})),e.g.onEvent(at),e.D=!0}at=void 0}return at}),($||ce)&&q.parse(L),f(_e,function(Qe,ut,at){var Ct,yt,Lt;return W(function(jt){if(jt.g==1)return Ct=Math.max(Qe.i.bufferBehind,Qe.m.presentationTimeline.g),(yt=$n(Qe.g.R,ut.type))==null||.01>=(Lt=at-yt-Ct)?jt.return():f(jt,Qe.g.R.remove(ut.type,yt,yt+Lt),2);aa(Qe.h),b(jt)})}(e,n,o),2);case 2:return aa(e.h),ue=n.vc,n.vc=!1,Ie=n.ue,n.ue=!1,f(_e,e.g.we(n.type,L),3);case 3:return f(_e,Ht(e.g.R,n.type,L,O,F,ue,Ie),4);case 4:aa(e.h),b(_e)}})}function lg(e){return e&&e.type==Tr&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function cg(e,n,o,w){var O,L,F,q,$;return W(function(ce){return ce.g==1?(O=bs,L=sg(o.ya(),o.Ba,o.ka,e.i.retryParameters,w),F=n.stream,e.g.modifySegmentRequest(L,{type:F.type,init:o instanceof Cn,duration:o.endTime-o.startTime,mimeType:F.mimeType,codecs:F.codecs,bandwidth:F.bandwidth}),q=e.g.kb.request(O,L),n.ta=q,f(ce,q.promise,2)):($=ce.h,n.ta=null,ce.return($.data))})}function fg(e,n,o,w){var O,L;return W(function(F){return F.g==1?(n.bb=!1,n.hd=!1,n.Nc=0,n.ac=!0,n.pa=null,n.Zc=null,n.aa=null,w?(O=e.g.Sc(),L=e.g.R.getDuration(),f(F,e.g.R.remove(n.type,O+w,L),3)):f(F,tn(e.g.R,n.type),4)):F.g!=3?(aa(e.h),o?f(F,e.g.R.flush(n.type),3):F.A(3)):(aa(e.h),n.ac=!1,n.endOfStream=!1,n.ra||n.Ka||as(e,n,0),void b(F))})}function as(e,n,o){var w=n.type;(w!=Tr||e.j.has(w))&&(n.Ka=new ho(function(){var O;return W(function(L){return L.g==1?(p(L,2),f(L,function(F,q){var $,ce,ue,Ie,_e;return W(function(Qe){switch(Qe.g){case 1:if(aa(F.h),q.ra||q.Ka==null||q.ac)return Qe.return();if(q.Ka=null,!q.bb){Qe.A(2);break}return f(Qe,fg(F,q,q.hd,q.Nc),3);case 3:return Qe.return();case 2:if(q.stream.segmentIndex){Qe.A(4);break}return $=q.stream,f(Qe,q.stream.createSegmentIndex(),5);case 5:if($!=q.stream)return $.closeSegmentIndex&&$.closeSegmentIndex(),q.ra||q.Ka||as(F,q,0),Qe.return();case 4:p(Qe,6),ce=function(ut,at){if(lg(at))return function(Xt,Gt){var bn=Yt(Xt,"video")||0;qo(Xt.g,Gt,bn)}(ut.g.R,at.stream.originalId||""),null;at.type==Tr&&function(Xt){Xt.g&&qo(Xt.g,"",0)}(ut.g.R);var Ct=ut.g.Sc(),yt=at.pa?at.pa.endTime:Ct,Lt=function(Xt,Gt,bn){return Gt==Tr?(Xt=Xt.g).h==null||Xt.h<bn?0:Xt.h-Math.max(bn,Xt.g):zt(Xt=yn(Xt,Gt),bn)}(ut.g.R,at.type,Ct),jt=Math.max(ut.m.minBufferTime||0,ut.i.rebufferingGoal,ut.i.bufferingGoal)*ut.u,Zt=ut.m.presentationTimeline.getDuration()-yt,sn=Yt(ut.g.R,at.type);if(1e-6>Zt&&sn)return at.endOfStream=!0,at.type=="video"&&(ut=ut.j.get(Tr))&&lg(ut)&&(ut.endOfStream=!0),null;if(at.endOfStream=!1,Lt>=jt)return ut.i.updateIntervalSeconds/2;if(Lt=function(Xt,Gt,bn,Tn){if(Gt.aa)return Gt.aa.current();if(Gt.pa||Tn)return bn=Gt.pa?Gt.pa.endTime:Tn,Gt.Qd=!0,Gt.aa=Gt.stream.segmentIndex.Cb(bn),Gt.aa&&Gt.aa.next().value;Xt=Xt.i.inaccurateManifestTolerance,Tn=Math.max(bn-Xt,0);var Ut=null;return Xt&&(Gt.aa=Gt.stream.segmentIndex.Cb(Tn),Ut=Gt.aa&&Gt.aa.next().value),Ut||(Gt.aa=Gt.stream.segmentIndex.Cb(bn),Ut=Gt.aa&&Gt.aa.next().value),Ut}(ut,at,Ct,sn),!Lt)return ut.i.updateIntervalSeconds;for(jt=1/0,sn=(Zt=i(Zt=Array.from(ut.j.values()))).next();!sn.done;sn=Zt.next())lg(sn=sn.value)||sn.aa&&!sn.aa.current()||(jt=Math.min(jt,sn.pa?sn.pa.endTime:Ct));return yt>=jt+ut.m.presentationTimeline.g?ut.i.updateIntervalSeconds:(function(Xt,Gt,bn,Tn){var Ut,ln,Rn,cn,Dn,Jn,Fn,An,Hn,Gn,rr,br,dr,cr;return W(function(Qn){switch(Qn.g){case 1:if(Ut=ji,ln=Gt.stream,Rn=Gt.aa,Gt.ra=!0,p(Qn,2),Tn.Eb()==2)throw new ht(1,1,1011);return f(Qn,function(Kn,Vn,tr){var qn,Er,hr,Ur,Wr,ua,Di,Ki;return W(function(Qi){return qn=[],Er=Math.max(0,tr.appendWindowStart-.1),hr=tr.appendWindowEnd+.01,(Ur=tr.timestampOffset)==Vn.Jd&&Er==Vn.Id&&hr==Vn.Hd||(Wr=function(){var Ii;return W(function(xr){if(xr.g==1)return p(xr,2),Vn.Id=Er,Vn.Hd=hr,Vn.Jd=Ur,f(xr,function(ti,Kr,xn,kr,li,Pr){return W(function(ii){return Kr==ji.X?(Pr||(ti.g.s=xn),function(Ti,$i,oi){Ti.l=$i,Ti.m=oi}(ti.g,kr,li),ii.return()):f(ii,Promise.all([mr(ti,Kr,function(){return an(ti,Kr)}),Pr?Promise.resolve():mr(ti,Kr,function(){return On(ti,Kr,xn)}),mr(ti,Kr,function(){ti.h[Kr].appendWindowStart=0,ti.h[Kr].appendWindowEnd=li,ti.h[Kr].appendWindowStart=kr,Wn(ti,Kr)})]),0)})}(Kn.g.R,Vn.type,Ur,Er,hr,Kn.m.sequenceMode),4);if(xr.g!=2)return P(xr,0);throw Ii=j(xr),Vn.Id=null,Vn.Hd=null,Vn.Jd=null,Ii})},qn.push(Wr())),!function(Ii,xr){return Ii&&xr?Ii.lc()==xr.lc()&&Ii.hc()==xr.hc()&&Je(Ii.ya(),xr.ya()):Ii==xr}(tr.h,Vn.Zc)&&(Vn.Zc=tr.h)&&(ua=cg(Kn,Vn,tr.h),Di=function(){var Ii,xr,ti;return W(function(Kr){switch(Kr.g){case 1:return p(Kr,2),f(Kr,ua,4);case 4:return Ii=Kr.h,aa(Kn.h),new ra().box("moov",oa).box("trak",oa).box("mdia",oa).P("mdhd",function(xn){xn=kt(xn.reader||0,xn.version||0),tr.h.timescale=xn.timescale}).parse(Ii),xr=Vn.stream.closedCaptions&&0<Vn.stream.closedCaptions.size,f(Kr,Kn.g.we(Vn.type,Ii),5);case 5:return f(Kr,Ht(Kn.g.R,Vn.type,Ii,null,xr),6);case 6:P(Kr,0);break;case 2:throw ti=j(Kr),Vn.Zc=null,ti}})},Kn.g.fg(tr.startTime,tr.h),qn.push(Di())),Kn.m.sequenceMode&&(Ki=Vn.pa?Vn.pa.m:null,tr.m!=Ki||Vn.Qd)&&(Vn.Qd=!1,qn.push(function(Ii,xr,ti){return W(function(Kr){return xr==ji.X?Kr.return():(mr(Ii,xr,function(){return an(Ii,xr)}),f(Kr,mr(Ii,xr,function(){return On(Ii,xr,ti)}),0))})}(Kn.g.R,Vn.type,tr.startTime))),f(Qi,Promise.all(qn),0)})}(Xt,Gt,Tn),4);case 4:return aa(Xt.h),Xt.s?Qn.return():(cn=ln.mimeType=="video/mp4"||ln.mimeType=="audio/mp4",Dn=C.ReadableStream,Xt.i.lowLatencyMode&&Dn&&cn&&!Tn.l?(Fn=new Uint8Array(0),Hn=An=!1,Gn=function(Kn){var Vn,tr,qn;return W(function(Er){return An?Er.return():(Hn=!0,aa(Xt.h),Xt.s?Er.return():(Fn=function(hr,Ur){var Wr=new Uint8Array(hr.length+Ur.length);return Wr.set(hr),Wr.set(Ur,hr.length),Wr}(Fn,Kn),Vn=!1,tr=0,new ra().box("mdat",function(hr){tr=hr.size+hr.start,Vn=!0}).parse(Fn,!1,!0),Vn?(qn=Fn.subarray(0,tr),Fn=Fn.subarray(tr),f(Er,ug(Xt,Gt,bn,ln,Tn,qn),0)):Er.A(0)))})},f(Qn,cg(Xt,Gt,Tn,Gn),11)):f(Qn,cg(Xt,Gt,Tn),7));case 7:if(Jn=Qn.h,aa(Xt.h),Xt.s)return Qn.return();if(!Tn.l){Qn.A(8);break}return f(Qn,function(Kn,Vn,tr){var qn,Er,hr,Ur;return W(function(Wr){if(Wr.g==1)return(qn=Vn.l).cryptoKey?Wr.A(2):f(Wr,qn.fetchKey(),3);if(!(Er=qn.iv))for(Er=Vt(new ArrayBuffer(16)),hr=qn.firstMediaSequenceNumber+tr.g,Ur=Er.byteLength-1;0<=Ur;Ur--)Er[Ur]=255&hr,hr>>=8;return Wr.return(C.crypto.subtle.decrypt({name:"AES-CBC",iv:Er},qn.cryptoKey,Kn))})}(Jn,Tn,Rn),9);case 9:Jn=Qn.h;case 8:return aa(Xt.h),Gt.bb?(Gt.ra=!1,as(Xt,Gt,0),Qn.return()):f(Qn,ug(Xt,Gt,bn,ln,Tn,Jn),6);case 11:if(rr=Qn.h,Hn){Qn.A(6);break}return An=!0,aa(Xt.h),Xt.s?Qn.return():Gt.bb?(Gt.ra=!1,as(Xt,Gt,0),Qn.return()):f(Qn,ug(Xt,Gt,bn,ln,Tn,rr),6);case 6:if(aa(Xt.h),Xt.s)return Qn.return();Gt.pa=Tn,Rn.next(),Gt.ra=!1,Gt.ae=!1,br=Xt.g.R.Ma(),dr=br[Gt.type],JSON.stringify(dr),Gt.bb||Xt.g.Vd(Tn.startTime,Tn.endTime,Gt.type),as(Xt,Gt,0),P(Qn,0);break;case 2:if(cr=j(Qn),aa(Xt.h,cr),Xt.s)return Qn.return();if(Gt.ra=!1,cr.code==7001)Gt.ra=!1,Ef(Gt),as(Xt,Gt,0),Qn.A(0);else if(Gt.type==Ut.X&&Xt.i.ignoreTextStreamFailures)Xt.j.delete(Ut.X),Qn.A(0);else{if(cr.code!=3017)return Gt.nc=!0,cr.severity=2,f(Qn,Sy(Xt,cr),0);(function(Kn,Vn,tr){if(!Array.from(Kn.j.values()).some(function(Er){return Er!=Vn&&Er.ae})){var qn=Math.round(100*Kn.u);if(20<qn)Kn.u-=.2;else{if(!(4<qn))return Vn.nc=!0,Kn.s=!0,void Kn.g.onError(tr);Kn.u-=.04}Vn.ae=!0}as(Kn,Vn,4)})(Xt,Gt,cr),Qn.A(0)}}})}(ut,at,Ct,Lt).catch(function(){}),null)}(F,q),ce!=null&&(as(F,q,ce),q.nc=!1),P(Qe,7);break;case 6:return ue=j(Qe),f(Qe,Sy(F,ue),8);case 8:return Qe.return();case 7:if(Ie=Array.from(F.j.values()),!F.B||!Ie.every(function(ut){return ut.endOfStream})){Qe.A(0);break}return f(Qe,F.g.R.endOfStream(),10);case 10:aa(F.h),(_e=F.g.R.getDuration())!=0&&_e<F.m.presentationTimeline.getDuration()&&F.m.presentationTimeline.Aa(_e),b(Qe)}})}(e,n),4)):L.g!=2?P(L,0):(O=j(L),e.g&&e.g.onError(O),void b(L))})}).N(o))}function Ef(e){e.Ka!=null&&(e.Ka.stop(),e.Ka=null)}function _y(e){return W(function(n){return e.ta?f(n,e.ta.abort(),0):n.A(0)})}function Sy(e,n){return W(function(o){if(o.g==1)return f(o,Ad(e.F),2);aa(e.h),e.g.onError(n),n.handled||e.i.failureCallback(n),b(o)})}function Ay(e,n){var o={mediaElement:null,mimeType:null,startTime:null,me:NaN,uri:null},w=this;this.j=n,this.i=e,this.l=o,this.o=null,this.m=[],this.h=this.g=null,this.u=Promise.resolve().then(function(){return function(O){return W(function(L){if(O.s.g)L=L.A(0);else{if(O.m.length==0||O.g&&!O.g.hb)var F=!1;else{O.g&&(O.g.Ia.mb(),O.g=null);var q=(F=O.m.shift()).create(O.l);q?(F.Ia.Jb(),O.g={node:q.node,payload:q.payload,hb:q.hb,Ia:F.Ia}):F.Ia.dd(),F=!0}F?F=Promise.resolve():O.g?F=function($){var ce,ue;return W(function(Ie){switch(Ie.g){case 1:return $.i=$.j.Mf($.i,$.l,$.g.node,$.g.payload),p(Ie,2),$.h=$.j.yf($.i,$.l,$.g.payload),f(Ie,$.h.promise,4);case 4:$.h=null,$.i==$.g.node&&($.g.Ia.bd(),$.g=null),P(Ie,0);break;case 2:return(ce=j(Ie)).code==7001?$.g.Ia.mb():$.g.Ia.onError(ce),$.g=null,$.h=null,ue=$,f(Ie,$.j.handleError($.l,ce),5);case 5:ue.i=Ie.h,b(Ie)}})}(O):(O.j.eg(O.i),O.o=new xi,F=O.o),L=f(L,F,1)}return L})}(w)}),this.s=new Vs(function(){return function(O){var L,F;return W(function(q){if(q.g==1)return O.h&&O.h.abort(),wy(O),f(q,O.u,2);for(O.g&&O.g.Ia.mb(),L=i(O.m),F=L.next();!F.done;F=L.next())F.value.Ia.mb();O.g=null,O.m=[],O.j=null,b(q)})}(w)})}function bf(e,n){var o={Jb:function(){},bd:function(){},mb:function(){},onError:function(){},dd:function(){},wh:function(){}};return e.m.push({create:n,Ia:o}),e.h&&e.h.abort(),wy(e),o}function wy(e){e.o&&(e.o.resolve(),e.o=null)}function Wo(e){this.g=null;for(var n=i(Array.from(e.textTracks)),o=n.next();!o.done;o=n.next())(o=o.value).mode="disabled",o.label=="Shaka Player TextTrack"&&(this.g=o);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}function K_(e){if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function Iy(e,n){var o=e.mode;e.mode=o=="showing"?"showing":"hidden";for(var w=i(Array.from(e.cues)),O=w.next();!O.done;O=w.next())(O=O.value)&&n(O)&&e.removeCue(O);e.mode=o}function Ry(){}function nh(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Xo(e,n){var o=this;this.j=!1,this.i=[],this.B=e,this.m=n,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.u=new ni(function(){Tf(o)}).Ca(.25),this.h=new Map,this.s=new da,this.s.C(document,"fullscreenchange",function(){Tf(o,!0)}),this.l=null,"ResizeObserver"in C&&(this.l=new ResizeObserver(function(){Tf(o,!0)}),this.l.observe(this.g)),this.o=new Map}function q_(e,n){for(;n!=null;){if(n==e.g)return!0;n=n.parentElement}return!1}function Cy(e,n,o,w,O){for(var L=!1,F=[],q=[],$=(n=i(n)).next();!$.done;$=n.next()){$=$.value,O.push($);var ce=e.h.get($),ue=$.startTime<=w&&$.endTime>w,Ie=ce?ce.ef:null;ce&&(F.push(ce.Bd),ce.tc&&F.push(ce.tc),ue||(L=!0,e.h.delete($),ce=null)),ue&&(q.push($),ce?q_(e,Ie)||(L=!0):(Y_(e,$,O),Ie=(ce=e.h.get($)).ef,L=!0)),0<$.nestedCues.length&&Ie&&Cy(e,$.nestedCues,Ie,w,O),O.pop()}if(L){for(O=(w=i(F)).next();!O.done;O=w.next())(O=O.value).parentElement&&O.parentElement.removeChild(O);for(q.sort(function(_e,Qe){return _e.startTime!=Qe.startTime?_e.startTime-Qe.startTime:_e.endTime-Qe.endTime}),$=(q=i(q)).next();!$.done;$=q.next())(w=e.h.get($.value)).tc?(o.appendChild(w.tc),w.tc.appendChild(w.Bd)):o.appendChild(w.Bd)}}function Tf(e,n){if(e.g){var o=e.B.currentTime;if(!e.j||n!==void 0&&n){for(var w=(n=i(e.o.values())).next();!w.done;w=n.next())nh(w.value);nh(e.g),e.h.clear(),e.o.clear()}if(e.j){n=new Map;for(var O=(w=i(e.h.keys())).next();!O.done;O=w.next())O=O.value,n.set(O,e.h.get(O));Cy(e,e.i,e.g,o,[])}}}function Y_(e,n,o){var w=1<o.length,O=w?"span":"div";n.lineBreak&&(O="br"),w=!w&&0<n.nestedCues.length;var L=document.createElement(O);if(O!="br"&&function(ue,Ie,_e,Qe,ut){var at=Ie.style,Ct=_e.nestedCues.length==0,yt=1<Qe.length;at.whiteSpace="pre-wrap";var Lt=_e.payload.replace(/\s+$/g,function(Zt){return"".repeat(Zt.length)});if(at.webkitTextStrokeColor=_e.textStrokeColor,at.webkitTextStrokeWidth=_e.textStrokeWidth,at.color=_e.color,at.direction=_e.direction,at.opacity=_e.opacity,at.paddingLeft=dg(_e.linePadding,_e,ue.m),at.paddingRight=dg(_e.linePadding,_e,ue.m),at.textShadow=_e.textShadow,_e.backgroundImage)at.backgroundImage="url('"+_e.backgroundImage+"')",at.backgroundRepeat="no-repeat",at.backgroundSize="contain",at.backgroundPosition="center",at.width="100%",at.height="100%";else{if(_e.nestedCues.length)var jt=Ie;else jt=document.createElement("span"),Ie.appendChild(jt);_e.border&&(jt.style.border=_e.border),ut||((Ie=function(Zt,sn){for(var Xt=Zt.length-1;0<=Xt;Xt--){var Gt=Zt[Xt].backgroundColor;if(Gt||Gt===0)return Gt}return null}(Qe))?jt.style.backgroundColor=Ie:Lt&&(jt.style.backgroundColor="rgba(0, 0, 0, 0.8)")),Lt&&(jt.textContent=Lt)}yt&&!Qe[Qe.length-1].isContainer?at.display="inline":(at.display="flex",at.flexDirection="column",at.alignItems="center",at.justifyContent=_e.displayAlign=="before"?"flex-start":_e.displayAlign=="center"?"center":"flex-end"),Ct||(at.margin="0"),at.fontFamily=_e.fontFamily,at.fontWeight=_e.fontWeight.toString(),at.fontStyle=_e.fontStyle,at.letterSpacing=_e.letterSpacing,at.fontSize=dg(_e.fontSize,_e,ue.m),_e.line!=null&&_e.lineInterpretation==1&&(at.position="absolute",at.left="0",at.top="0",_e.writingMode==Xn?(at.width="100%",_e.lineAlign==Zn?at.top=_e.line+"%":_e.lineAlign=="end"&&(at.bottom=100-_e.line+"%")):_e.writingMode=="vertical-lr"?(at.height="100%",_e.lineAlign==Zn?at.left=_e.line+"%":_e.lineAlign=="end"&&(at.right=100-_e.line+"%")):(at.height="100%",_e.lineAlign==Zn?at.right=_e.line+"%":_e.lineAlign=="end"&&(at.left=100-_e.line+"%"))),at.lineHeight=_e.lineHeight,_e.position!=null&&(_e.writingMode==Xn?at.paddingLeft=_e.position:at.paddingTop=_e.position),_e.positionAlign=="line-left"?at.cssFloat="left":_e.positionAlign=="line-right"&&(at.cssFloat="right"),at.textAlign=_e.textAlign,at.textDecoration=_e.textDecoration.join(" "),at.writingMode=_e.writingMode,"writingMode"in document.documentElement.style&&at.writingMode==_e.writingMode||(at.webkitWritingMode=_e.writingMode),_e.size&&(_e.writingMode==Xn?at.width=_e.size+"%":at.height=_e.size+"%")}(e,L,n,o,w),o=null,n.region&&n.region.id)if(O=(o=n.region).id+"_"+o.width+"x"+o.height+(o.heightUnits==Nt?"%":"px")+"-"+o.viewportAnchorX+"x"+o.viewportAnchorY+(o.viewportAnchorUnits==Nt?"%":"px"),e.o.has(O))o=e.o.get(O);else{var F=document.createElement("span"),q=o.heightUnits==Nt?"%":"px",$=o.widthUnits==Nt?"%":"px",ce=o.viewportAnchorUnits==Nt?"%":"px";F.id="shaka-text-region---"+O,F.classList.add("shaka-text-region"),F.style.height=o.height+q,F.style.width=o.width+$,F.style.position="absolute",F.style.top=o.viewportAnchorY+ce,F.style.left=o.viewportAnchorX+ce,F.style.display="flex",F.style.flexDirection="column",F.style.alignItems="center",F.style.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end",e.o.set(O,F),o=F}O=L,w&&((O=document.createElement("span")).classList.add("shaka-text-wrapper"),O.style.backgroundColor=n.backgroundColor,L.appendChild(O)),e.h.set(n,{Bd:L,ef:O,tc:o})}function dg(e,n,o){var w=(w=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(w[1]),unit:w[2]}:null;if(!w)return e;var O=w.value;switch(w.unit){case"%":return O/100*o.clientHeight/n.cellResolution.rows+"px";case"c":return o.clientHeight*O/n.cellResolution.rows+"px";default:return e}}function z_(e,n){this.h=e,this.g=n,this.j="",this.o=void 0,this.i=!1,this.m=!0,this.l=!1}function ky(e,n,o){try{if(e.g.enabled){var w={d:1e3*o.duration,st:e.h.T()?Q_:X_};w.ot=function(L){var F=L.type;return L.init?W_:F=="video"?L.codecs.includes(",")?ah:ih:F=="audio"?mg:F=="text"?L.mimeType==="application/mp4"?yg:vg:void 0}(o);var O=w.ot===ih||w.ot===mg||w.ot===ah||w.ot===yg;O&&(w.bl=function(L,F){if(!(F=L.h.Ma()[F]).length)return NaN;var q=L.h.getCurrentTime();return(L=F.find(function($){return $.start<=q&&$.end>=q}))?1e3*(L.end-q):NaN}(e,o.type)),o.bandwidth&&(w.br=o.bandwidth/1e3),O&&w.ot!==yg&&(w.tb=function(L,F){var q=L.h.Xa();if(!q.length)return NaN;L=q[0];for(var $=(q=i(q)).next();!$.done;$=q.next())($=$.value).type==="variant"&&$.bandwidth>L.bandwidth&&(L=$);switch(F){case ih:return L.videoBandwidth||NaN;case mg:return L.audioBandwidth||NaN;default:return L.bandwidth}}(e,w.ot)/1e3),pg(e,n,w)}}catch(L){X("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",L)}}function hg(e){return e.j||(e.j=e.g.sessionId||C.crypto.randomUUID()),{v:1,sf:e.o,sid:e.j,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function pg(e,n,o){o=o===void 0?{}:o;var w=w===void 0?e.g.useHeaders:w;if(e.g.enabled){Object.assign(o,hg(e)),o.pr=e.h.Rc();var O=o.ot===ih||o.ot===ah;if(e.l&&O&&(o.bs=!0,o.su=!0,e.l=!1),o.su==null&&(o.su=e.m),w)e=function(F){for(var q=Object.keys(F),$={},ce=["Object","Request","Session","Status"],ue=[{},{},{},{}],Ie={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},_e=(q=i(q)).next();!_e.done;_e=q.next())ue[Ie[_e=_e.value]!=null?Ie[_e]:1][_e]=F[_e];for(F=0;F<ue.length;F++)(Ie=rh(ue[F]))&&($["CMCD-"+ce[F]]=Ie);return $}(o),Object.keys(e).length&&Object.assign(n.headers,e);else{var L=rh(o);L&&(n.uris=n.uris.map(function(F){return gg(F,L)}))}}}function rh(e){function n(Ie){return 100*o(Ie/100)}function o(Ie){return Math.round(Ie)}for(var w,O=[],L={br:o,d:o,bl:n,dl:n,mtp:n,nor:function(Ie){return encodeURIComponent(Ie)},rtp:n,tb:o},F=Object.keys(e||{}).sort(),q=(F=i(F)).next();!q.done;q=F.next()){var $=e[q=q.value];if(w=$,!(Number.isNaN(w)||w==null||w===""||w===!1||q==="v"&&$===1||q=="pr"&&$===1)){var ce,ue=L[q];ue&&($=ue($)),ce=(ue=typeof $)=="string"&&q!=="ot"&&q!=="sf"&&q!=="st"?q+"="+JSON.stringify($):ue==="boolean"?q:ue==="symbol"?q+"="+$.description:q+"="+$,O.push(ce)}}return O.join(",")}function gg(e,n){return!n||e.includes("offline:")?e:((e=new vn(e)).g.set("CMCD",n),e.toString())}(E=yy.prototype).destroy=function(){return this.h.destroy()},E.configure=function(e){this.i=e,this.F=new cl({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},E.start=function(){var e=this;return W(function(n){if(n.g==1)return f(n,function(o){var w,O,L,F,q,$,ce,ue,Ie,_e;return W(function(Qe){if(Qe.g==1){if(w=ji,!o.l)throw new ht(2,5,5006);return O=new Map,L=new Set,o.l.audio&&(O.set(w.Hc,o.l.audio),L.add(o.l.audio)),o.l.video&&(O.set(w.va,o.l.video),L.add(o.l.video)),o.o&&(O.set(w.X,o.o),L.add(o.o)),F=o.g.R,q=o.i.forceTransmux,f(Qe,F.init(O,q,o.m.sequenceMode),2)}for(aa(o.h),o.updateDuration(),$=i(O.keys()),ce=$.next();!ce.done;ce=$.next())ue=ce.value,Ie=O.get(ue),o.j.has(ue)||(_e=Ty(Ie),o.j.set(ue,_e),as(o,_e,0));b(Qe)})}(e),2);aa(e.h),e.B=!0,b(n)})},E.vc=function(){if(this.g)for(var e=this.g.Sc(),n=i(this.j.keys()),o=n.next();!o.done;o=n.next()){var w=o.value;(o=this.j.get(w)).aa=null;var O=this.g.R;if(!(O=w==Tr?(O=O.g).g!=null&&O.h!=null&&e>=O.g&&e<O.h:xt(O=yn(O,w),e))){if((Yt(this.g.R,w)!=null||o.ra)&&Z_(this,o),o.ta&&(o.ta.abort(),o.ta=null),w===Tr&&(w=this.g.R).s)for((w=w.s.g).l=0,w.h=[],w.g=[],(O=w.i).i=[],O.h=[],O.g=0,Pe(w),O=(w=i(w.j.values())).next();!O.done;O=w.next())ft(O.value);o.vc=!0}}},E.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.R.Aa(e):this.g.R.Aa(Math.pow(2,32))},Ay.prototype.destroy=function(){return this.s.destroy()},(E=Wo.prototype).remove=function(e,n){return!!this.g&&(Iy(this.g,function(o){return o.startTime<n&&o.endTime>e}),!0)},E.append=function(e){function n(F){var q=[],$=700<=F.fontWeight,ce=F.fontStyle=="italic",ue=F.textDecoration.includes("underline");return $&&q.push("b"),ce&&q.push("i"),ue&&q.push("u"),$=q.reduce(function(Ie,_e){return Ie+"<"+_e+">"},""),q=q.reduceRight(function(Ie,_e){return Ie+"</"+_e+">"},""),F.lineBreak?`
`:F.nestedCues.length?F.nestedCues.map(n).join(""):$+F.payload+q}var o=function F(q,$){for(var ce=(q=i(q)).next();!ce.done;ce=q.next())if((ce=ce.value).isContainer)F(ce.nestedCues,$);else{var ue=ce.clone();ue.nestedCues=[],ue.payload=n(ce),$.push(ue)}return $}(e,[]),w=[];e=this.g.cues?Array.from(this.g.cues):[];for(var O={},L=(o=i(o)).next();!L.done;O={sb:O.sb},L=o.next())O.sb=L.value,e.some(function(F){return function(q){return q.startTime==F.sb.startTime&&q.endTime==F.sb.endTime&&q.text==F.sb.payload}}(O))||(L=K_(O.sb))&&w.push(L);for(e=w.slice().sort(function(F,q){return F.startTime!=q.startTime?F.startTime-q.startTime:F.endTime!=q.endTime?F.endTime-q.startTime:"line"in VTTCue.prototype?w.indexOf(q)-w.indexOf(F):w.indexOf(F)-w.indexOf(q)}),O=(e=i(e)).next();!O.done;O=e.next())this.g.addCue(O.value)},E.destroy=function(){return this.g&&(Iy(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},E.isTextVisible=function(){return this.g.mode=="showing"},E.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},Q("shaka.text.SimpleTextDisplayer",Wo),Wo.prototype.setTextVisibility=Wo.prototype.setTextVisibility,Wo.prototype.isTextVisible=Wo.prototype.isTextVisible,Wo.prototype.destroy=Wo.prototype.destroy,Wo.prototype.append=Wo.prototype.append,Wo.prototype.remove=Wo.prototype.remove,Q("shaka.util.Dom",Ry),Ry.removeAllChildren=nh,(E=Xo.prototype).append=function(e){for(var n=[].concat(g(this.i)),o={},w=(e=i(e)).next();!w.done;o={Cc:o.Cc},w=e.next())o.Cc=w.value,n.some(function(O){return function(L){return nt(L,O.Cc)}}(o))||this.i.push(o.Cc);Tf(this)},E.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.u&&this.u.stop(),this.h.clear(),this.s&&(this.s.release(),this.s=null),this.l&&(this.l.disconnect(),this.l=null)},E.remove=function(e,n){if(!this.g)return!1;var o=this.i.length;return this.i=this.i.filter(function(w){return w.startTime<e||w.endTime>=n}),Tf(this,o>this.i.length),!0},E.isTextVisible=function(){return this.j},E.setTextVisibility=function(e){this.j=e},Q("shaka.text.UITextDisplayer",Xo),Xo.prototype.setTextVisibility=Xo.prototype.setTextVisibility,Xo.prototype.isTextVisible=Xo.prototype.isTextVisible,Xo.prototype.remove=Xo.prototype.remove,Xo.prototype.destroy=Xo.prototype.destroy,Xo.prototype.append=Xo.prototype.append,Q("shaka.text.WebVttGenerator",function(){});var Oy="m",mg="a",ih="v",ah="av",W_="i",vg="c",yg="tt",X_="v",Q_="l";function Eg(){}function bg(e,n,o,w,O){var L,F=O in w,q=!0;for(L in n){var $=O+"."+L,ce=F?w[O]:o[L];F||L in o?n[L]===void 0?ce===void 0||F?delete e[L]:e[L]=ys(ce):ce.constructor==Object&&n[L]&&n[L].constructor==Object?(e[L]||(e[L]=ys(ce)),$=bg(e[L],n[L],ce,w,$),q=q&&$):typeof n[L]!=typeof ce||n[L]==null||typeof n[L]!="function"&&n[L].constructor!=ce.constructor?(H("Invalid config, wrong type for "+$),q=!1):(typeof o[L]=="function"&&o[L].length!=n[L].length&&z("Unexpected number of arguments for "+$),e[L]=n[L]):(H("Invalid config, unrecognized key "+$),q=!1)}return q}function Tg(e,n){for(var o={},w=o,O=0,L=0;!(0>(O=e.indexOf(".",O)));)O!=0&&e[O-1]=="\\"||(w[L=e.substring(L,O).replace(/\\\./g,".")]={},w=w[L],L=O+1),O+=1;return w[e.substring(L).replace(/\\\./g,".")]=n,o}function _g(e,n){return e&&n}function As(){}function Dy(e){return new vn(e=dn(e)).Ha}function _f(e,n,o){function w(q){Wt(L).setUint32(F,q.byteLength,!0),F+=4,L.set(Vt(q),F),F+=q.byteLength}if(!o||!o.byteLength)throw new ht(2,6,6015);var O;O=typeof n=="string"?or(n,!0):n,e=or(e=dn(e),!0);var L=new Uint8Array(12+e.byteLength+O.byteLength+o.byteLength),F=0;return w(e),w(O),w(o),L}function Sg(){}function mc(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(F,q,$){return $.keySystem=="com.apple.fps.1_0"&&q=="skd"&&(q=$.serverCertificate,F=_f(F,$=Dy(F),q)),F},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:$r()},o={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(F){return _g([F],F)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3}},w={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(F){return _g([F])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,durationBackoff:1,forceTransmux:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1};(ai("Web0S")||Ji()||ai("CrKey"))&&(w.stallSkip=0);var O={trackSelectionCallback:function(F){return W(function(q){return q.return(F)})},downloadSizeCallback:function(F){var q;return W(function($){return $.g==1?navigator.storage&&navigator.storage.estimate?f($,navigator.storage.estimate(),3):$.return(!0):(q=$.h,$.return(q.usage+F<.95*q.quota))})},progressCallback:function(F,q){return _g([F,q])},usePersistentLicense:!0,numberOfParallelDownloads:5},L={drm:n,manifest:o,streaming:w,mediaSource:{sourceBufferExtraFeatures:""},offline:O,abrFactory:function(){return new Ra},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1},autoShowText:3,preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1}};return O.trackSelectionCallback=function(F){return W(function(q){return q.return(function($,ce){var ue=$.filter(function(ut){return ut.type=="variant"}),Ie=[],_e=po(ce,ue.map(function(ut){return ut.language}));_e&&(Ie=ue.filter(function(ut){return jr(ut.language)==_e})),Ie.length==0&&(Ie=ue.filter(function(ut){return ut.primary})),Ie.length==0&&(ue.map(function(ut){return ut.language}),Ie=ue);var Qe=Ie.filter(function(ut){return ut.height&&480>=ut.height});for(Qe.length&&(Qe.sort(function(ut,at){return at.height-ut.height}),Ie=Qe.filter(function(ut){return ut.height==Qe[0].height})),ce=[],Ie.length&&(ue=Math.floor(Ie.length/2),Ie.sort(function(ut,at){return ut.bandwidth-at.bandwidth}),ce.push(Ie[ue])),Ie=($=i($)).next();!Ie.done;Ie=$.next())(Ie=Ie.value).type!=Tr&&Ie.type!="image"||ce.push(Ie);return ce}(F,L.preferredAudioLanguage))})},L}function vc(e,n,o){var w={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return bg(e,n,o||mc(),w,"")}function $_(){this.g=null,this.h=[]}function oh(e,n){if(e.g==null)e.g={timestamp:Date.now()/1e3,state:n,duration:0};else{var o=Date.now()/1e3;e.g.duration=o-e.g.timestamp,e.g.state!=n&&(e.h.push(e.g),e.g={timestamp:o,state:n,duration:0})}}function Ag(e,n){var o=0;e.g&&e.g.state==n&&(o+=e.g.duration);for(var w=(e=i(e.h)).next();!w.done;w=e.next())o+=(w=w.value).state==n?w.duration:0;return o}function J_(){this.i=this.h=null,this.g=[]}function wg(e,n,o){e.i!=n&&(e.i=n,e.g.push({timestamp:Date.now()/1e3,id:n.id,type:"text",fromAdaptation:o,bandwidth:null}))}function Py(){this.u=this.B=this.G=this.D=this.s=this.j=this.F=this.m=this.i=this.M=this.O=this.H=this.J=this.L=this.l=this.o=NaN,this.g=new $_,this.h=new J_}function Ln(e,n){wi.call(this);var o=this;this.l=Lg,this.Uc=this.g=null,this.ia=!1,this.Xc=new da,this.Xb=new da,this.s=new da,this.Nb=this.i=this.Yc=this.J=this.j=this.ua=this.L=this.cf=this.V=this.Fa=this.M=this.Vc=this.H=this.xb=this.B=this.G=this.m=this.D=null,this.dc=!1,this.Md=this.u=null,this.Xd=1e9,this.h=yc(this),this.ec={width:1/0,height:1/0},this.o=null,this.ub=new ms(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount),this.vb=this.h.preferredTextLanguage,this.cc=this.h.preferredTextRole,this.$b=this.h.preferForcedSubs,this.Zb=[],this.fc=null,n&&n(this),this.D=function(O){return new Hi(function(L,F){O.u&&O.u.segmentDownloaded(L,F)},function(L,F,q){L=new Map().set("headers",L).set("request",F).set("requestType",q),O.dispatchEvent(Ua("downloadheadersreceived",L))},function(L,F,q,$){L=new Map().set("request",L).set("error",F).set("httpResponseCode",q).set("aborted",$),O.dispatchEvent(Ua("downloadfailed",L))})}(this),this.D.ie(this.h.streaming.forceHTTPS),this.F=null,dh&&(this.F=dh()),this.Xc.C(C,"online",function(){o.be()}),this.O={name:"detach"},this.W={name:"attach"},this.da={name:"unload"},this.Yd={name:"manifest-parser"},this.Wd={name:"manifest"},this.wb={name:"media-source"},this.Pd={name:"drm-engine"},this.ba={name:"load"},this.ce={name:"src-equals-drm-engine"},this.yb={name:"src-equals"};var w=new Map;w.set(this.W,function(O,L){return No(function(F,q,$){return q.mediaElement==null&&(q.mediaElement=$.mediaElement,F.Xb.C(q.mediaElement,"error",function(){var ce=Pg(F);ce&&wl(F,ce)})),F.g=q.mediaElement,Promise.resolve()}(o,O,L))}),w.set(this.O,function(O){return O.mediaElement&&(o.Xb.nb(),O.mediaElement=null),o.F&&o.F.release(),o.g=null,No(O=Promise.resolve())}),w.set(this.da,function(O){return No(Ny(o,O))}),w.set(this.wb,function(O){return O=function(L,F){var q,$,ce,ue,Ie;return W(function(_e){if(_e.g==1)return q=L.h.textDisplayFactory,$=q(),L.Td=q,ce=function(Qe,ut,at,Ct){return new ui(Qe,ut,at,Ct)}(F.mediaElement,$,function(Qe,ut,at){xy(L,Qe,ut,at)},L.L),ce.configure(L.h.mediaSource),ue=L.h.manifest,Ie=ue.segmentRelativeVttTiming,ce.H=Ie,f(_e,ce.J,2);L.G=ce,b(_e)})}(o,O),No(O)}),w.set(this.Yd,function(O,L){return O=function(F,q,$){var ce,ue,Ie,_e;return W(function(Qe){if(Qe.g==1)return q.mimeType=$.mimeType,q.uri=$.uri,ce=q.uri,ue=F.D,F.Nb=ce,Ie=F,f(Qe,Kd(ce,ue,F.h.manifest.retryParameters,q.mimeType),2);Ie.Yc=Qe.h,F.J=F.Yc(),_e=ys(F.h.manifest),$.mediaElement&&$.mediaElement.nodeName==="AUDIO"&&(_e.disableVideo=!0),F.J.configure(_e),b(Qe)})}(o,O,L),No(O)}),w.set(this.Wd,function(O){return function(L,F){var q=F.uri;F=L.D,L.Fa=new og(function(){return L.uc()}),L.Fa.addEventListener("regionadd",function(ue){ue=ue.region,If(L,"timelineregionadded",ue),L.F&&L.F.onDashTimedMetadata(ue)}),L.ua=null,L.h.streaming.observeQualityChanges&&(L.ua=new Jd(function(){return L.Ma()}),L.ua.addEventListener("qualitychange",function(ue){var Ie=ue.quality;ue=ue.position,Ie=new Map().set("mediaQuality",{bandwidth:Ie.bandwidth,audioSamplingRate:Ie.audioSamplingRate,codecs:Ie.codecs,contentType:Ie.contentType,frameRate:Ie.frameRate,height:Ie.height,mimeType:Ie.mimeType,channelsCount:Ie.channelsCount,pixelAspectRatio:Ie.pixelAspectRatio,width:Ie.width}).set("position",ue),L.dispatchEvent(Ua("mediaqualitychanged",Ie))}));var $={networkingEngine:F,modifyManifestRequest:function(ue,Ie){var _e=L.V;try{_e.g.enabled&&(_e.o=Ie.format,pg(_e,ue,{ot:Oy,su:!_e.i}))}catch(Qe){X("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Qe)}},modifySegmentRequest:function(ue,Ie){ky(L.V,ue,Ie)},filter:function(ue){return Vy(L,ue)},makeTextStreamsForClosedCaptions:function(ue){return function(Ie,_e){for(var Qe=new Set,ut=i(_e.textStreams),at=ut.next();!at.done;at=ut.next())(at=at.value).mimeType!="application/cea-608"&&at.mimeType!="application/cea-708"||Qe.add(at.originalId);for(at=(ut=i(_e.variants)).next();!at.done;at=ut.next())if((at=at.value.video)&&at.closedCaptions){for(var Ct=i(at.closedCaptions.keys()),yt=Ct.next();!yt.done;yt=Ct.next())if(yt=yt.value,!Qe.has(yt)){var Lt=yt.startsWith("CC")?"application/cea-608":"application/cea-708",jt=new Sa;Lt={id:Ie.Xd++,originalId:yt,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:jt,mimeType:Lt,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:at.closedCaptions.get(yt),label:null,type:Tr,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:at.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},_e.textStreams.push(Lt),Qe.add(yt)}}}(L,ue)},onTimelineRegionAdded:function(ue){var Ie=L.Fa;e:{for(var _e=i(Ie.g),Qe=_e.next();!Qe.done;Qe=_e.next())if((Qe=Qe.value).schemeIdUri==ue.schemeIdUri&&Qe.id==ue.id&&Qe.startTime==ue.startTime&&Qe.endTime==ue.endTime){_e=Qe;break e}_e=null}_e==null&&(Ie.g.add(ue),ue=new si("regionadd",new Map([["region",ue]])),Ie.dispatchEvent(ue))},onEvent:function(ue){return L.dispatchEvent(ue)},onError:function(ue){return wl(L,ue)},isLowLatencyMode:function(){return L.h.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return L.h.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){L.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){L.j&&L.j.updateDuration()},newDrmInfo:function(ue){var Ie=L.m?L.m.g:null;Ie&&L.m.u&&kg(L,Ie.keySystem,ue)}},ce=Date.now()/1e3;return new ya(function(){var ue,Ie,_e,Qe;return W(function(ut){if(ut.g==1)return ue=L,f(ut,L.J.start(q,$),2);if(ue.i=ut.h,Ie=Ua("manifestparsed"),L.dispatchEvent(Ie),L.i.variants.length==0)throw new ht(2,4,4036);(function(at){function Ct(yt){return yt.video&&yt.audio||yt.video&&yt.video.codecs.includes(",")}at.variants.some(Ct)&&(at.variants=at.variants.filter(Ct))})(L.i),_e=Date.now()/1e3,Qe=_e-ce,L.o.F=Qe,b(ut)})}(),function(){return L.J.stop()})}(o,O)}),w.set(this.Pd,function(O){return O=function(L,F){var q,$;return W(function(ce){return ce.g==1?(q=Date.now()/1e3,$=!0,L.m=Fy(L,{kb:L.D,onError:function(ue){wl(L,ue)},cd:function(ue){Xy(L,ue)},onExpirationUpdated:function(ue,Ie){Qy(L,ue,Ie)},onEvent:function(ue){L.dispatchEvent(ue),ue.type=="drmsessionupdate"&&$&&($=!1,L.o.j=Date.now()/1e3-q,L.L&&(ue=L.L).g&&ue.h.classList.add("shaka-hidden"))}}),L.m.configure(L.h.drm),f(ce,tc(L.m,L.i.variants,L.i.offlineSessionIds),2)):ce.g!=3?f(ce,L.m.Yb(F.mediaElement),3):f(ce,Vy(L,L.i),0)})}(o,O),No(O)}),w.set(this.ba,function(O,L){return No(function(F,q,$){var ce,ue,Ie,_e,Qe,ut,at,Ct,yt,Lt,jt,Zt,sn,Xt,Gt,bn;return W(function(Tn){switch(Tn.g){case 1:for(q.startTime=$.startTime,F.fc!=null&&(q.startTime=F.fc,F.fc=null),ce=q.mediaElement,ue=q.uri,F.Nb=ue,F.H=new mf({Tc:function(){return ce.playbackRate},Pc:function(){return ce.defaultPlaybackRate},ke:function(Ut){ce.playbackRate=Ut},Me:function(Ut){ce.currentTime+=Ut}}),Ie=function(){return uh(F)},_e=function(){return Ky(F)},F.s.C(ce,"playing",Ie),F.s.C(ce,"pause",Ie),F.s.C(ce,"ended",Ie),F.s.C(ce,"ratechange",_e),function(Ut,ln){if(ln.lcevc.enabled){var Rn=Ut.Xa();Rn&&Rn[0]&&Rn[0].videoMimeType==hh.ts&&(navigator.userAgent.match(/Edge?\//)||navigator.userAgent.match(/Edge\//))&&(ln.streaming.forceTransmux||z("LCEVC Warning: For MPEG-2 TS decoding the config.streaming.forceTransmux must be enabled.")),sh(Ut),Ut.L==null&&(Ut.L=new Jr(Ut.g,Ut.cf,ln.lcevc),Ut.G&&(Ut.G.D=Ut.L))}else sh(Ut)}(F,F.h),Qe=F.h.abrFactory,F.u&&F.Md==Qe||(F.Md=Qe,F.u=Qe(),typeof F.u.setMediaElement!="function"&&(ll("AbrManager","Please use an AbrManager with setMediaElement function."),F.u.setMediaElement=function(){}),F.u.configure(F.h.abr)),F.ub=new ms(F.h.preferredAudioLanguage,F.h.preferredVariantRole,F.h.preferredAudioChannelCount),F.vb=F.h.preferredTextLanguage,F.cc=F.h.preferredTextRole,F.$b=F.h.preferForcedSubs,$y(F.i.presentationTimeline,F.h.playRangeStart,F.h.playRangeEnd),F.u.init(function(Ut,ln,Rn){F.j&&Ut!=F.j.l&&wf(F,Ut,!0,ln!==void 0&&ln,Rn===void 0?0:Rn)}),F.u.setMediaElement(ce),ps(F.i,F.h.preferredVideoCodecs,F.h.preferredAudioCodecs,F.h.preferredAudioChannelCount,F.h.preferredDecodingAttributes),F.j=function(Ut){return new yy(Ut.i,{Sc:function(){return Ut.B?Ut.B.Ic():0},getBandwidthEstimate:function(){return Ut.u.getBandwidthEstimate()},modifySegmentRequest:function(ln,Rn){ky(Ut.V,ln,Rn)},R:Ut.G,kb:Ut.D,onError:function(ln){return wl(Ut,ln)},onEvent:function(ln){return Ut.dispatchEvent(ln)},gg:function(){Ut.J&&Ut.J.update&&Ut.J.update()},Vd:function(ln,Rn,cn){Ut.B&&Ut.B.Ne(),Ig(Ut),ln=new Map().set("start",ln).set("end",Rn).set("contentType",cn),Ut.dispatchEvent(Ua("segmentappended",ln))},fg:function(ln,Rn){(Rn=Rn.Nd)&&Ut.ua&&function(cn,Dn,Jn){var Fn=function(An,Hn){var Gn=An.g.get(Hn);return Gn||(Gn={rc:[],ze:null,contentType:Hn},An.g.set(Hn,Gn)),Gn}(cn,Dn.contentType);(function(An,Hn){if((An=An.h()[Hn.contentType])&&0<An.length){var Gn=An[0].start,rr=An[An.length-1].end,br=Hn.rc;Hn.rc=br.filter(function(dr,cr){return!(dr.position<=Gn&&cr+1<br.length&&br[cr+1].position<=Gn||dr.position>=rr)})}else Hn.rc=[]})(cn,Fn),cn={Nd:Dn,position:Jn},0<=(Dn=(Fn=Fn.rc).findIndex(function(An){return An.position>=Jn}))?Fn.splice(Dn,Fn[Dn].position==Jn?1:0,cn):Fn.push(cn)}(Ut.ua,Rn,ln)},we:function(ln,Rn){var cn=Ut.m;if(cn.h.parseInbandPsshEnabled&&["audio","video"].includes(ln)){var Dn=0,Jn=i((Rn=new Nd(Vt(Rn))).data);for(ln=Jn.next();!ln.done;ln=Jn.next())Dn+=ln.value.length;if(Dn==0)cn=Promise.resolve();else{for(Dn=new Uint8Array(Dn),Jn=0,ln=(Rn=i(Rn.data)).next();!ln.done;ln=Rn.next())ln=ln.value,Dn.set(ln,Jn),Jn+=ln.length;xu(cn,"cenc",Dn),cn=cn.o}}else cn=Promise.resolve();return cn},hg:function(ln,Rn,cn){xy(Ut,ln,Rn,cn)}})}(F),F.j.configure(F.h.streaming),F.l=Qo,ce.textTracks&&F.s.C(ce.textTracks,"addtrack",function(Ut){Ut.track&&(Ut=Ut.track).kind==="chapters"&&My(F,Ut)}),F.dispatchEvent(Ua("streaming")),ut=null,(at=F.j.l)||(ut=lh(F)),Ct=[],Lt=i([(yt=at||ut).video,yt.audio]),jt=Lt.next();!jt.done;jt=Lt.next())(Zt=jt.value)&&!Zt.segmentIndex&&Ct.push(Zt.createSegmentIndex());if(!(0<Ct.length)){Tn.A(2);break}return f(Tn,Promise.all(Ct),2);case 2:if(F.B=function(Ut,ln){return new _r(Ut.g,Ut.i,Ut.h.streaming,ln,function(){Ut.xb&&vy(Ut.xb,!0),Ut.j&&Ut.j.vc(),Ut.M&&Ig(Ut)},function(Rn){return Ut.dispatchEvent(Rn)})}(F,q.startTime),F.xb=function(Ut){var ln=new eh(Ut.Fa);ln.addEventListener("enter",function(cn){If(Ut,"timelineregionenter",cn.region)}),ln.addEventListener("exit",function(cn){If(Ut,"timelineregionexit",cn.region)}),ln.addEventListener("skip",function(cn){var Dn=cn.region;cn.seeking||(If(Ut,"timelineregionenter",Dn),If(Ut,"timelineregionexit",Dn))});var Rn=new my(Ut.g);return Rn.g.add(ln),Ut.ua&&Rn.g.add(Ut.ua),Rn}(F),sn=Math.max(F.i.minBufferTime,F.h.streaming.rebufferingGoal),Uy(F,sn),at){Tn.A(4);break}if(wf(F,ut,!0,!1,0),!F.h.streaming.startAtSegmentBoundary){Tn.A(5);break}return Xt=F.B.Ic(),f(Tn,function(Ut,ln){var Rn,cn,Dn,Jn,Fn;return W(function(An){return An.g==1?(Rn=Ut.audio,cn=Ut.video,Dn=function(Hn,Gn){var rr,br,dr;return W(function(cr){return cr.g==1?Hn?f(cr,Hn.createSegmentIndex(),2):cr.return(null):(br=(rr=Hn.segmentIndex.Cb(Gn))?rr.next().value:null)?(dr=br.startTime,cr.return(dr)):cr.return(null)})},f(An,Dn(Rn,ln),2)):An.g!=3?(Jn=An.h,f(An,Dn(cn,ln),3)):(Fn=An.h)!=null&&Jn!=null?An.return(Math.max(Fn,Jn)):Fn!=null?An.return(Fn):Jn!=null?An.return(Jn):An.return(ln)})}(ut,Xt),6);case 6:Gt=Tn.h,F.B.zd(Gt);case 5:qy(F,null,iu(ut));case 4:return F.B.yd(),F.Fb().find(function(Ut){return Ut.active})||((bn=Ru(F.i.textStreams,F.vb,F.cc,F.$b)[0]||null)&&wg(F.o.h,bn,!0),ut&&(bn?(ut.audio&&function(Ut,ln,Rn){if(Ut.h.autoShowText==0)return!1;if(Ut.h.autoShowText==1)return!0;var cn=jr(Ut.h.preferredTextLanguage);return Rn=jr(Rn.language),Ut.h.autoShowText==2?Ci(Rn,cn):Ut.h.autoShowText==3?(Ut=jr(ln.language),Ci(Rn,cn)&&!Ci(Ut,Rn)):(z("Invalid autoShowText setting!"),!1)}(F,ut.audio,bn)&&(F.ia=!0),F.ia&&F.G.m.setTextVisibility(!0),zy(F)):F.ia=!1),bn&&(F.h.streaming.alwaysStreamText||F.Gd())&&th(F.j,bn)),f(Tn,F.j.start(),7);case 7:F.h.abr.enabled&&(F.u.enable(),Wy(F)),ru(F.j?F.j.l:null,F.i),e0(F.i),os(F),Af(F),F.i.variants.some(function(Ut){return Ut.primary}),F.dc=!0,F.s.ma(ce,"loadedmetadata",function(){F.o.m=Date.now()/1e3-$.me}),b(Tn)}})}(o,O,L))}),w.set(this.ce,function(O,L){return O=function(F,q,$){var ce,ue,Ie,_e,Qe,ut,at;return W(function(Ct){return Ct.g==1?(ce=ji,ue=Date.now()/1e3,Ie=!0,F.m=Fy(F,{kb:F.D,onError:function(yt){wl(F,yt)},cd:function(yt){Xy(F,yt)},onExpirationUpdated:function(yt,Lt){Qy(F,yt,Lt)},onEvent:function(yt){F.dispatchEvent(yt),yt.type=="drmsessionupdate"&&Ie&&(Ie=!1,F.o.j=Date.now()/1e3-ue)}}),F.m.configure(F.h.drm),_e=$.uri||"",Qe=Lu(_e),(ut=hh[Qe])=="application/x-mpegurl"&&ta()&&(ut="application/vnd.apple.mpegurl"),ut||(ut="video/mp4"),at={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:$.mimeType?$.mimeType.split(";")[0]:ut,codecs:$.mimeType?Uo($.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:ce.va,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},F.m.V=!0,f(Ct,tc(F.m,[at],[]),2)):f(Ct,F.m.Yb(q.mediaElement),0)})}(o,O,L),No(O)}),w.set(this.yb,function(O,L){return function(F,q,$){function ce(){return uh(F)}q.uri=$.uri,q.startTime=$.startTime,F.Nb=q.uri;var ue=q.mediaElement;F.B=new Mn(ue);var Ie=!1;F.Zb.push(function(){Ie=!0}),q.startTime!=null&&F.B.zd(q.startTime),F.H=new mf({Tc:function(){return ue.playbackRate},Pc:function(){return ue.defaultPlaybackRate},ke:function(ut){ue.playbackRate=ut},Me:function(ut){ue.currentTime+=ut}}),Uy(F,F.h.streaming.rebufferingGoal),F.s.C(ue,"playing",ce),F.s.C(ue,"pause",ce),F.s.C(ue,"ended",ce),F.s.C(ue,"ratechange",function(){return Ky(F)}),ue.preload!="none"&&F.s.ma(ue,"loadedmetadata",function(){F.o.m=Date.now()/1e3-$.me}),ue.audioTracks&&(F.s.C(ue.audioTracks,"addtrack",function(){return os(F)}),F.s.C(ue.audioTracks,"removetrack",function(){return os(F)}),F.s.C(ue.audioTracks,"change",function(){return os(F)})),ue.textTracks&&(F.s.C(ue.textTracks,"addtrack",function(ut){if(ut.track)switch(ut=ut.track,ut.kind){case"metadata":(function(at,Ct){if(Ct.kind=="metadata"){Ct.mode="hidden",at.s.C(Ct,"cuechange",function(){if(Ct.activeCues)for(var Lt=i(Ct.activeCues),jt=Lt.next();!jt.done;jt=Lt.next())jt=jt.value,Ly(at,jt.startTime,jt.endTime,jt.type,jt.value),at.F&&at.F.onCueMetadataChange(jt.value)});var yt=new ni(function(){for(var Lt=function(Zt){return Array.from(Zt.g.textTracks).filter(function(sn){return sn.kind=="metadata"})}(at),jt=(Lt=i(Lt)).next();!jt.done;jt=Lt.next())jt.value.mode="hidden"}).Mb().N(.5);at.Zb.push(function(){yt.stop()})}})(F,ut);break;case"chapters":My(F,ut);break;default:os(F)}}),F.s.C(ue.textTracks,"removetrack",function(){return os(F)}),F.s.C(ue.textTracks,"change",function(){return os(F)}));var _e=Lu(q.uri);ue.src=function(ut,at,Ct){try{if(!ut.g.enabled)return at;var yt=hg(ut);e:{switch(Ct){case"video/webm":case"video/mp4":var Lt=ah;break e;case"application/x-mpegurl":Lt=Oy;break e}Lt=void 0}return yt.ot=Lt,yt.su=!0,gg(at,rh(yt))}catch(jt){return X("CMCD_SRC_ERROR","Could not generate src CMCD data.",jt),at}}(F.V,q.uri,hh[_e]),(Ji()||ai("Web0S"))&&ue.load(),F.l=ss,F.dispatchEvent(Ua("streaming"));var Qe=new xi;return Mo(ue,HTMLMediaElement.HAVE_METADATA,F.s,function(){F.B.yd(),Qe.resolve()}),Mo(ue,HTMLMediaElement.HAVE_CURRENT_DATA,F.s,function(){return W(function(ut){return ut.g==1?(function(at){var Ct=at.h.preferredAudioLanguage;if(Ct!=""){at.fe(Ct);var yt=at.h.preferredVariantRole;yt!=""&&at.fe(Ct,yt)}}(F),Sf(F).find(function(at){return at.mode!="disabled"})?ut.A(2):f(ut,new Promise(function(at){F.s.ma(ue.textTracks,"change",at),new ni(at).N(1)}),2)):Ie?ut.return():(function(at){var Ct=at.h.preferredTextLanguage,yt=at.h.preferForcedSubs;if(Ct!=""){at.ge(Ct,"",yt);var Lt=at.h.preferredTextRole;Lt!=""&&at.ge(Ct,Lt,yt)}}(F),void b(ut))})}),ue.error?Qe.reject(Pg(F)):ue.preload=="none"&&(z('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),Qe.resolve()),F.s.ma(ue,"error",function(){Qe.reject(Pg(F))}),new ya(Qe,function(){return Qe.reject(new ht(2,7,7001)),Promise.resolve()}).Y(function(){F.dc=!0})}(o,O,L)}),this.Ga=new Ay(this.O,{Mf:function(O,L,F,q){var $=null;return O==o.O&&($=F==o.O?o.O:o.W),O==o.W&&($=F==o.O||L.mediaElement!=q.mediaElement?o.O:F==o.W?o.W:F==o.wb||F==o.ba?o.wb:F==o.yb?o.ce:null),O==o.wb&&($=F==o.ba&&L.mediaElement==q.mediaElement?o.Yd:o.da),O==o.Yd&&($=Ng(o.ba,o.Wd,o.da,F,L,q)),O==o.Wd&&($=Ng(o.ba,o.Pd,o.da,F,L,q)),O==o.Pd&&($=Ng(o.ba,o.ba,o.da,F,L,q)),O==o.ce&&($=F==o.yb&&L.mediaElement==q.mediaElement?o.yb:o.da),O!=o.ba&&O!=o.yb||($=o.da),O==o.da&&($=q.mediaElement&&L.mediaElement==q.mediaElement?o.W:o.O),$},yf:function(O,L,F){return o.dispatchEvent(Ua("onstatechange",new Map().set("state",O.name))),w.get(O)(L,F)},handleError:function(O){return W(function(L){return L.g==1?f(L,Ny(o,O),2):L.return(O.mediaElement?o.W:o.O)})},eg:function(O){o.dispatchEvent(Ua("onstateidle",new Map().set("state",O.name)))}}),this.af=new ni(function(){tu(o.i.variants,o.h.restrictions,o.ec)&&lh(o)}),e&&this.Yb(e,!0)}function sh(e){e.L!=null&&(e.L.release(),e.L=null)}function Ua(e,n){return new si(e,n)}function Ny(e,n){var o,w,O,L,F,q,$,ce,ue;return W(function(Ie){switch(Ie.g){case 1:return e.l!=ws&&(e.l=Lg),o=e.Zb.map(function(_e){return _e()}),e.Zb=[],f(Ie,Promise.all(o),2);case 2:if(e.dispatchEvent(Ua("unloading")),n.mimeType=null,n.startTime=null,n.uri=null,e.Fa&&(e.Fa.release(),e.Fa=null),n.mediaElement&&e.s.nb(),e.af.stop(),e.xb&&(e.xb.release(),e.xb=null),e.Vc&&(e.Vc.stop(),e.Vc=null),!e.J){Ie.A(3);break}return f(Ie,e.J.stop(),4);case 4:e.J=null,e.Yc=null;case 3:if(!e.u){Ie.A(5);break}return f(Ie,e.u.stop(),5);case 5:if(!e.j){Ie.A(7);break}return f(Ie,e.j.destroy(),8);case 8:e.j=null;case 7:if(e.H&&(e.H.release(),e.H=null),e.B&&(e.B.release(),e.B=null),!e.G){Ie.A(9);break}return f(Ie,e.G.destroy(),10);case 10:e.G=null;case 9:if(e.F&&e.F.onAssetUnload(),!n.mediaElement||!n.mediaElement.src){Ie.A(11);break}return f(Ie,new Promise(function(_e){return new ni(_e).N(.1)}),12);case 12:for(n.mediaElement.removeAttribute("src"),n.mediaElement.load();n.mediaElement.lastChild;)n.mediaElement.removeChild(n.mediaElement.firstChild);case 11:if(!e.m){Ie.A(13);break}return f(Ie,e.m.destroy(),14);case 14:e.m=null;case 13:if(e.Nb=null,e.M=null,e.i){for(w=i(e.i.variants),O=w.next();!O.done;O=w.next())for(L=O.value,F=i([L.audio,L.video]),q=F.next();!q.done;q=F.next())($=q.value)&&$.segmentIndex&&$.segmentIndex.release();for(ce=i(e.i.textStreams),q=ce.next();!q.done;q=ce.next())(ue=q.value).segmentIndex&&ue.segmentIndex.release()}e.i=null,e.o=new Py,e.Td=null,Og(e),b(Ie)}})}function xy(e,n,o,w){for(var O=(n=i(n)).next();!O.done;O=n.next())if((O=O.value).data&&O.cueTime&&O.frames){var L=O.cueTime+o,F=w;F&&L>F&&(F=L);for(var q=i(O.frames),$=q.next();!$.done;$=q.next())Ly(e,L,F,"org.id3",$.value);e.F&&e.F.onHlsTimedMetadata(O,L)}}function Ly(e,n,o,w,O){n=new Map().set("startTime",n).set("endTime",o).set("metadataType",w).set("payload",O),e.dispatchEvent(Ua("metadata",n))}function My(e,n){if(n&&n.kind=="chapters"){n.mode="hidden";var o=new ni(function(){n.mode="hidden"}).Mb().N(.5);e.Zb.push(function(){o.stop()})}}function Fy(e,n){return new bl(n,e.h.drm.updateExpirationTime)}function Uy(e,n){e.M=new _d,e.M.g=js,Sd(e.M,n,Math.min(.5,n/2)),Og(e),e.Vc=new ni(function(){Ig(e)}).Ca(.25)}function Ig(e){switch(e.l){case ss:if(e.g.ended)var n=!0;else{var o=It(e.g.buffered);n=o!=null&&o>=e.g.duration-1}break;case Qo:e:if(e.g.ended||sr(e.G))n=!0;else{if(e.i.presentationTimeline.T()){o=e.i.presentationTimeline.gb();var w=It(e.g.buffered);if(w!=null&&w>=o){n=!0;break e}}n=!1}break;default:n=!1}w=zt(e.g.buffered,e.g.currentTime);var O=n,L=(o=e.M).h.get(o.g);n=o.g,w=O||w>=L?ku:js,o.g=w,n!=w&&Og(e)}function By(e){if(e.J){var n=ys(e.h.manifest);e.g&&e.g.nodeName==="AUDIO"&&(n.disableVideo=!0),e.J.configure(n)}if(e.m&&e.m.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{Zy(e,e.i)}catch(L){wl(e,L)}e.u&&Af(e),!(n=e.j.l)||n.allowedByApplication&&n.allowedByKeySystem||ch(e)}if(e.D&&e.D.ie(e.h.streaming.forceHTTPS),e.G&&(e.G.configure(e.h.mediaSource),e.G.H=e.h.manifest.segmentRelativeVttTiming,n=e.h.textDisplayFactory,e.Td!=n)){var o=n(),w=e.G,O=w.m;w.m=o,O&&(o.setTextVisibility(O.isTextVisible()),O.destroy()),w.g&&(w.g.i=o),e.Td=n,e.j&&(o=(n=e.j).j.get(Tr))&&gc(n,o.stream,!0,0,!0)}e.u&&(e.u.configure(e.h.abr),e.h.abr.enabled?e.u.enable():e.u.disable(),Wy(e)),e.M&&(n=e.h.streaming.rebufferingGoal,e.i&&(n=Math.max(n,e.i.minBufferTime)),Sd(e.M,n,Math.min(.5,n/2))),e.i&&$y(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd)}function Sf(e){return Array.from(e.g.textTracks).filter(function(n){return n.kind!="metadata"&&n.kind!="chapters"&&n.label!="Shaka Player TextTrack"})}function jy(e){return Array.from(e.g.textTracks).filter(function(n){return n.kind=="chapters"})}function Rg(e,n){var o,w;return W(function(O){switch(O.g){case 1:return o=Lu(n),(w=eS[o])?O.return(w):(p(O,2),f(O,ff(n,e.D,e.h.streaming.retryParameters),4));case 4:w=O.h,P(O,3);break;case 2:j(O);case 3:if(w)return O.return(w);throw new ht(1,2,2011,o)}})}function Gy(e,n,o,w,O,L,F){var q,$,ce,ue;return W(function(Ie){if(Ie.g==1)return O!="text/vtt"||F.length?f(Ie,Cg(e,n,e.D,e.h.streaming.retryParameters),3):Ie.A(2);Ie.g!=2&&(q=Ie.h,$=Hy(e,q,O,F),ce=new Blob([$],{type:"text/vtt"}),n=$a(ce),O="text/vtt"),ue=document.createElement("track");var _e=e.V,Qe=n;try{if(_e.g.enabled){var ut=hg(_e);ut.ot=vg,ut.su=!0;var at=gg(Qe,rh(ut))}else at=Qe}catch(Ct){X("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",Ct),at=Qe}return ue.src=at,ue.label=L,ue.kind=w,ue.srclang=o,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(ue),Ie.return(ue)})}function Cg(e,n,o,w){var O,L,F;return W(function(q){if(q.g==1){O=bs,(L=xo([n],w)).method="GET";var $=e.V;try{$.g.enabled&&pg($,L,{ot:vg,su:!0})}catch(ce){X("CMCD_TEXT_ERROR","Could not generate text CMCD data.",ce)}return f(q,o.request(O,L).promise,2)}return F=q.h,q.return(F.data)})}function Hy(e,n,o,w){var O=ia[o];if(O)return o=O(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},n=Vt(n),function(L,F){function q(Ie){for(var _e=Ie,Qe=i(F),ut=Qe.next();!ut.done;ut=Qe.next())(ut=ut.value).end&&ut.start<Ie&&(_e+=ut.end-ut.start);return(10>(Ie=Math.floor(_e/3600))?"0":"")+Ie+":"+(10>(Qe=Math.floor(_e/60%60))?"0":"")+Qe+":"+(10>(ut=Math.floor(_e%60))?"0":"")+ut+"."+(100>(_e=Math.floor(1e3*_e%1e3))?10>_e?"00":"0":"")+_e}function $(Ie){var _e=[],Qe=700<=Ie.fontWeight,ut=Ie.fontStyle=="italic",at=Ie.textDecoration.includes("underline");return Qe&&_e.push("b"),ut&&_e.push("i"),at&&_e.push("u"),Qe=_e.reduce(function(Ct,yt){return Ct+"<"+yt+">"},""),_e=_e.reduceRight(function(Ct,yt){return Ct+"</"+yt+">"},""),Ie.lineBreak?`
`:Ie.nestedCues.length?Ie.nestedCues.map($).join(""):Qe+Ie.payload+_e}var ce=function Ie(_e,Qe){for(var ut=(_e=i(_e)).next();!ut.done;ut=_e.next())if((ut=ut.value).isContainer)Ie(ut.nestedCues,Qe);else{var at=ut.clone();at.nestedCues=[],at.payload=$(ut),Qe.push(at)}return Qe}(L,[]);L=`WEBVTT

`;for(var ue=(ce=i(ce)).next();!ue.done;ue=ce.next())L+=q((ue=ue.value).startTime)+" --> "+q(ue.endTime)+function(Ie){var _e=[];switch(Ie.textAlign){case"left":_e.push("align:left");break;case"right":_e.push("align:right");break;case bt:_e.push("align:middle");break;case"start":_e.push("align:start");break;case"end":_e.push("align:end")}switch(Ie.writingMode){case"vertical-lr":_e.push("vertical:lr");break;case"vertical-rl":_e.push("vertical:rl")}return _e.length?" "+_e.join(" "):""}(ue)+`
`,L+=ue.payload+`

`;return L}(n=o.parseMedia(n,e),w);throw new ht(2,2,2014,o)}function yc(e){var n=mc();return n.streaming.failureCallback=function(o){if(e.T()){var w=null;o.code==1001||o.code==1002?w=1:o.code==1003&&(w=.1),w!=null&&(o.severity=1,e.be(w))}},n.textDisplayFactory=function(){return e.Uc?new Xo(e.g,e.Uc):new Wo(e.g)},n}function Vy(e,n){return W(function(o){if(o.g==1)return f(o,function(w,O){return W(function(L){if(L.g==1)return f(L,function(F,q){return W(function($){return $.g==1?f($,ns(q,0<q.offlineSessionIds.length),2):(ru(F,q),function(ce){ce.textStreams=ce.textStreams.filter(function(ue){return io(ma(ue.mimeType,ue.codecs))})}(q),f($,function(ce){var ue,Ie,_e,Qe,ut,at,Ct;return W(function(yt){switch(yt.g){case 1:ue=[],Ie=i(ce.imageStreams),_e=Ie.next();case 2:if(_e.done){yt.A(4);break}if(Qe=_e.value,ut=Qe.mimeType,Bs.has(ut)){yt.A(5);break}if(!(at=bd.get(ut))){Bs.set(ut,!1),yt.A(5);break}return f(yt,function(Lt){return new Promise(function(jt){var Zt=new Image;Zt.src=Lt,"decode"in Zt?Zt.decode().then(function(){jt(!0)}).catch(function(){jt(!1)}):Zt.onload=Zt.onerror=function(){jt(Zt.height===2)}})}(at),7);case 7:Ct=yt.h,Bs.set(ut,Ct);case 5:Bs.get(ut)&&ue.push(Qe),_e=Ie.next(),yt.A(2);break;case 4:ce.imageStreams=ue,b(yt)}})}(q),0))})}(w.j?w.j.l:null,O),2);e0(O),b(L)})}(e,n),2);Zy(e,n),b(o)})}function Zy(e,n){if(e.l!=ws){tu(n.variants,e.h.restrictions,e.ec)&&e.j&&os(e);var o=e.m?e.m.g:null;if(o&&e.m.u)for(var w=i(n.variants),O=w.next();!O.done;O=w.next())O=O.value,kg(e,o.keySystem,O.video),kg(e,o.keySystem,O.audio);Jy(e,n)}}function kg(e,n,o){if(o){for(var w=(o=i(o.drmInfos)).next();!w.done;w=o.next())if((w=w.value).keySystem==n)for(var O=(w=i(w.initData||[])).next();!O.done;O=w.next())O=O.value,xu(e.m,O.initDataType,O.initData)}}function Og(e){var n=e.Fd();if(e.o&&e.M&&e.B){var o=e.H;o.j=n,gy(o),e.V&&(o=e.V,n||o.i||(o.i=!0),o.i&&n&&(o.l=!0),o.m=n),uh(e)}n=new Map().set("buffering",n),e.dispatchEvent(Ua("buffering",n))}function Ky(e){var n=e.g.playbackRate;n!=0&&(e.H&&e.H.set(n),n=Ua("ratechange"),e.dispatchEvent(n))}function uh(e){if(e.o&&e.M){var n=e.o.g;e.M.g==js?oh(n,"buffering"):e.g.paused?oh(n,"paused"):e.g.ended?oh(n,"ended"):oh(n,"playing")}}function Af(e){try{Jy(e,e.i)}catch(o){return wl(e,o),!1}var n=e.i.variants.filter(function(o){return au(o)});return n=e.ub.create(n),e.u.setVariants(Array.from(n.values())),!0}function lh(e){return Af(e)?e.u.chooseVariant():null}function ch(e){var n=lh(e);n&&wf(e,n,!0,!0,0)}function wf(e,n,o,w,O){var L=e.j.l;if(n==L)w&&by(e.j,n,w,O,!0);else{var F=e.o.h;F.h!=n&&(F.h=n,F.g.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:o,bandwidth:n.bandwidth})),by(e.j,n,w,O,void 0,o),w=null,L&&(w=iu(L)),n=iu(n),o?qy(e,w,n):Yy(e,w,n)}}function Dg(e,n){var o=Array.from(e.g.audioTracks).find(function(w){return w.enabled});n.enabled=!0,n.id!==o.id&&(o.enabled=!1),Yy(e,o=sl(o),n=sl(n))}function qy(e,n,o){n=new Map().set("oldTrack",n).set("newTrack",o),e.L&&Xr(e.L,o),Ec(e,o=Ua("adaptation",n))}function os(e){Ec(e,Ua("trackschanged"))}function Yy(e,n,o){n=new Map().set("oldTrack",n).set("newTrack",o),e.L&&Xr(e.L,o),Ec(e,o=Ua("variantchanged",n))}function fh(e){Ec(e,Ua("textchanged"))}function zy(e){Ec(e,Ua("texttrackvisibility"))}function Wy(e){Ec(e,Ua("abrstatuschanged",new Map().set("newStatus",e.h.abr.enabled)))}function wl(e,n){if(e.l!=ws)if(function(w,O){if(O.code!=1002&&O.code!=1011||O.category!=1||!navigator.onLine)return!1;var L=w.h.streaming.maxDisabledTime;if(L==0){if(O.code!=1011)return!1;L=1}O=w.Xa().find(function(ce){return ce.active});for(var F=w.i,q=i(F.variants),$=q.next();!$.done;$=q.next())($=$.value).id===O.id&&($.disabledUntilTime=Date.now()/1e3+L);return tu(F.variants,w.h.restrictions,w.ec),!!(O=lh(w))&&(F=w.Ma().video.reduce(function(ce,ue){return ce+ue.end-ue.start},0),wf(w,O,!1,!0,F),w.af.N(L),!0)}(e,n))n.handled=!0;else{var o=Ua("error",new Map().set("detail",n));e.dispatchEvent(o),o.defaultPrevented&&(n.handled=!0)}}function If(e,n,o){o=new Map().set("detail",{schemeIdUri:o.schemeIdUri,value:o.value,startTime:o.startTime,endTime:o.endTime,id:o.id,eventElement:o.eventElement}),e.dispatchEvent(Ua(n,o))}function Pg(e){if(!e.g.error)return null;var n=e.g.error.code;if(n==1)return null;var o=e.g.error.msExtendedCode;return o&&(0>o&&(o+=Math.pow(2,32)),o=o.toString(16)),new ht(2,3,3016,n,o,e.g.error.message)}function Xy(e,n){if(e.j){var o=Object.keys(n),w=o.length==1&&o[0]=="00",O=!1;if(o.length)for(var L=(o=i(e.i.variants)).next();!L.done;L=o.next()){var F=[];(L=L.value).audio&&F.push(L.audio),L.video&&F.push(L.video);for(var q=(F=i(F)).next();!q.done;q=F.next()){var $=q.value;if(q=L.allowedByKeySystem,$.keyIds.size){L.allowedByKeySystem=!0;for(var ce=($=i($.keyIds)).next();!ce.done;ce=$.next())ce=ce.value,ce=n[w?"00":ce],L.allowedByKeySystem=L.allowedByKeySystem&&!!ce&&!i0.includes(ce)}q!=L.allowedByKeySystem&&(O=!0)}}O&&!Af(e)||((n=e.j.l)&&!n.allowedByKeySystem&&ch(e),O&&os(e))}}function Qy(e,n,o){e.J&&e.J.onExpirationUpdated&&e.J.onExpirationUpdated(n,o),n=Ua("expirationupdated"),e.dispatchEvent(n)}function $y(e,n,o){0<n&&(e.T()||e.Ze(n)),o<(n=e.getDuration())&&(e.T()||e.Aa(o))}function Jy(e,n){e=e.m?e.m.Qc():{};var o=Object.keys(e);o=o.length&&o[0]=="00";for(var w=!1,O=!1,L=new Set,F=new Set,q=(n=i(n.variants)).next();!q.done;q=n.next()){var $=[];(q=q.value).audio&&$.push(q.audio),q.video&&$.push(q.video);for(var ce=($=i($)).next();!ce.done;ce=$.next())if((ce=ce.value).keyIds.size)for(var ue=(ce=i(ce.keyIds)).next();!ue.done;ue=ce.next()){ue=ue.value;var Ie=e[o?"00":ue];Ie?i0.includes(Ie)&&F.add(Ie):L.add(ue)}q.allowedByApplication?q.allowedByKeySystem&&(w=!0):O=!0}if(!w)throw new ht(2,4,4012,e={hasAppRestrictions:O,missingKeys:Array.from(L),restrictedKeyStatuses:Array.from(F)})}function e0(e){if(!e.variants.some(au))throw new ht(2,4,4032)}function Ec(e,n){W(function(o){if(o.g==1)return f(o,Promise.resolve(),2);e.l!=ws&&e.dispatchEvent(n),b(o)})}function t0(e){for(var n=new Set,o=(e=i(e)).next();!o.done;o=e.next())(o=o.value).language?n.add(jr(o.language)):n.add("und");return n}function n0(e){for(var n=new Map,o=new Map,w=(e=i(e)).next();!w.done;w=e.next()){var O="und",L=[];(w=w.value).language&&(O=jr(w.language)),(L=w.type=="variant"?w.audioRoles:w.roles)&&L.length||(L=[""]),n.has(O)||n.set(O,new Set);for(var F=(L=i(L)).next();!F.done;F=L.next())F=F.value,n.get(O).add(F),w.label&&(o.has(O)||o.set(O,new Map),o.get(O).set(F,w.label))}var q=[];return n.forEach(function($,ce){for(var ue=($=i($)).next();!ue.done;ue=$.next()){ue=ue.value;var Ie=null;o.has(ce)&&o.get(ce).has(ue)&&(Ie=o.get(ce).get(ue)),q.push({language:ce,role:ue,label:Ie})}}),q}function Il(){return new ht(2,7,7e3)}function Ng(e,n,o,w,O,L){return w==e&&O.mediaElement==L.mediaElement&&O.uri==L.uri&&O.mimeType==L.mimeType?n:o}function xg(e){return new Promise(function(n,o){e.mb=function(){return o(Il())},e.bd=function(){return n()},e.onError=function(w){return o(w)},e.dd=function(){return o(Il())}})}Q("shaka.util.CmcdManager.StreamingFormat",{Lg:"d",Tg:"h",fh:"s",$g:"o"}),Q("shaka.util.ConfigUtils",Eg),Eg.convertToConfigObject=Tg,Eg.mergeConfigObjects=bg,Q("shaka.util.FairPlayUtils",As),As.commonFairPlayResponse=function(e,n){if(e===2){try{var o=Oi(n.data)}catch{return}e=!1,(o=o.trim()).substr(0,5)==="<ckc>"&&o.substr(-6)==="</ckc>"&&(o=o.slice(5,-6),e=!0);try{var w=JSON.parse(o);w.ckc&&(o=w.ckc,e=!0),w.CkcMessage&&(o=w.CkcMessage,e=!0),w.License&&(o=w.License,e=!0)}catch{}e&&(n.data=Dt(Dr(o)))}},As.conaxFairPlayRequest=function(e,n){e===2&&(n.headers["Content-Type"]="application/octet-stream")},As.ezdrmFairPlayRequest=function(e,n){e===2&&(n.headers["Content-Type"]="application/octet-stream")},As.verimatrixFairPlayRequest=function(e,n){e===2&&(e=qr(e=Vt(n.body)),n.headers["Content-Type"]="application/x-www-form-urlencoded",n.body=Un("spc="+e))},As.conaxInitDataTransform=function(e,n,o){if(n!=="skd")return e;n=o.serverCertificate,o=dn(e).split("skd://").pop().split("?").shift(),o=C.atob(o);var w=new ArrayBuffer(2*o.length);w=new Uint16Array(w);for(var O=0,L=o.length;O<L;O++)w[O]=o.charCodeAt(O);return _f(e,w,n)},As.ezdrmInitDataTransform=function(e,n,o){return n!=="skd"?e:(n=o.serverCertificate,_f(e,o=dn(e).split(";").pop(),n))},As.verimatrixInitDataTransform=function(e,n,o){return n!=="skd"?e:(n=o.serverCertificate,_f(e,o=dn(e).split("skd://").pop(),n))},As.initDataTransform=_f,As.defaultGetContentId=Dy,As.isFairPlaySupported=function(){var e;return W(function(n){return n.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},p(n,2),f(n,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):n.g!=2?n.return(!0):(j(n),n.return(!1))})},Q("shaka.util.PlayerConfiguration",Sg),Sg.mergeConfigObjects=vc,Sg.createDefault=mc,S(Ln,wi),(E=Ln.prototype).destroy=function(){var e,n=this;return W(function(o){switch(o.g){case 1:return n.l==ws?o.return():(sh(n),n.l=ws,e=bf(n.Ga,function(){return{node:n.O,payload:{mediaElement:null,mimeType:null,startTime:null,me:NaN,uri:null},hb:!1}}),f(o,new Promise(function(w){e.Jb=function(){},e.bd=function(){w()},e.mb=function(){w()},e.onError=function(){w()},e.dd=function(){w()}}),2));case 2:return f(o,n.Ga.destroy(),3);case 3:if(n.Xc&&(n.Xc.release(),n.Xc=null),n.Xb&&(n.Xb.release(),n.Xb=null),n.s&&(n.s.release(),n.s=null),n.Md=null,n.u=null,n.h=null,n.o=null,n.Uc=null,n.V=null,!n.D){o.A(4);break}return f(o,n.D.destroy(),5);case 5:n.D=null;case 4:wi.prototype.release.call(n),b(o)}})},E.Yb=function(e,n){if(n=n===void 0||n,this.l==ws)return Promise.reject(Il());var o={mediaElement:null,mimeType:null,startTime:null,me:NaN,uri:null};o.mediaElement=e,kn()||(n=!1);var w=n?this.wb:this.W;return(e=bf(this.Ga,function(){return{node:w,payload:o,hb:!1}})).Jb=function(){},xg(e)},E.lf=function(e){this.cf=e},E.detach=function(){var e=this;if(this.l==ws)return Promise.reject(Il());var n=bf(this.Ga,function(){return{node:e.O,payload:{mediaElement:null,mimeType:null,startTime:null,me:NaN,uri:null},hb:!1}});return n.Jb=function(){},xg(n)},E.qe=function(e){var n=this;if(e=e===void 0||e,this.l==ws)return Promise.reject(Il());this.dc=!1,kn()||(e=!1),sh(this);var o={mediaElement:null,mimeType:null,startTime:null,me:NaN,uri:null},w=bf(this.Ga,function(O){var L=O.mediaElement&&e?n.wb:O.mediaElement?n.W:n.O;return o.mediaElement=O.mediaElement,{node:L,payload:o,hb:!1}});return w.Jb=function(){},xg(w)},E.Fg=function(e){this.fc=e},E.load=function(e,n,o){var w=this;if(this.fc=null,this.dc=!1,this.l==ws)return Promise.reject(Il());this.dispatchEvent(Ua("loading"));var O={mediaElement:null,mimeType:null,startTime:null,me:NaN,uri:null};O.uri=e,O.me=Date.now()/1e3,o&&(O.mimeType=o),n!==void 0&&(O.startTime=n);var L=function(q,$){if(!kn())return!0;var ce=$.mimeType,ue=$.uri||"";if(ce||(ce=Lu(ue),ce=hh[ce]),ce){if(($.mediaElement||Yi()).canPlayType(ce)=="")return!1;if(!kn()||!(ce in Lo)&&!(Lu(ue)in fu)||q.h.streaming.preferNativeHls)return!0;if(ta())return q.h.streaming.useNativeHlsOnSafari}return!1}(this,O)?this.yb:this.ba,F=bf(this.Ga,function(q){return q.mediaElement==null?null:(O.mediaElement=q.mediaElement,{node:L,payload:O,hb:!0})});return this.o=new Py,this.V=function(q){return new z_({getBandwidthEstimate:function(){return q.u?q.u.getBandwidthEstimate():NaN},Ma:function(){return q.Ma()},getCurrentTime:function(){return q.g?q.g.currentTime:0},Xa:function(){return q.Xa()},Rc:function(){return q.Rc()},T:function(){return q.T()}},q.h.cmcd)}(this),F.Jb=function(){},new Promise(function(q,$){F.dd=function(){return $(new ht(2,7,7002))},F.bd=function(){q(),w.dispatchEvent(Ua("loaded"))},F.mb=function(){return $(Il())},F.onError=function(ce){return $(ce)}})},E.configure=function(e,n){arguments.length==2&&typeof e=="string"&&(e=Tg(e,n)),e.streaming&&"forceTransmuxTS"in e.streaming&&(ll("streaming.forceTransmuxTS configuration","Please Use streaming.forceTransmux instead."),e.streaming.forceTransmux=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01));var o=vc(this.h,e,yc(this));return By(this),o},E.getConfiguration=function(){var e=yc(this);return vc(e,this.h,yc(this)),e},E.Bf=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var n=this.getConfiguration().streaming.bufferingGoal;if(e>=(n=Math.min(this.g.currentTime+n,this.uc().end)))return 1;if(!(e<=this.g.currentTime)&&e<n)return(e-this.g.currentTime)/(n-this.g.currentTime)}return 0},E.rg=function(){for(var e in this.h)delete this.h[e];vc(this.h,yc(this),yc(this)),By(this)},E.Hf=function(){return this.l},E.Lf=function(){return this.g},E.jc=function(){return this.D},E.Dd=function(){return this.Nb},E.Fe=function(){return this.F?this.F:null},E.T=function(){return this.i?this.i.presentationTimeline.T():!(!this.g||!this.g.src)&&this.g.duration==1/0},E.jb=function(){return!!this.i&&this.i.presentationTimeline.jb()},E.Zf=function(){if(this.i){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.g||!this.g.src)&&(this.g.videoTracks?this.g.videoTracks.length==0:this.g.videoHeight==0)},E.uc=function(){if(!this.dc)return{start:0,end:0};if(this.i){var e=this.i.presentationTimeline;return{start:e.Db(),end:e.Na()}}return this.g&&this.g.src&&(e=this.g.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},E.Xf=function(){this.T()&&(this.g.currentTime=this.uc().end)},E.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},E.drmInfo=function(){return this.m?this.m.g:null},E.ic=function(){return this.m?this.m.ic():1/0},E.Qc=function(){return this.m?this.m.Qc():{}},E.Fd=function(){return!!this.M&&this.M.g==js},E.Rc=function(){return this.g?this.H?this.H.i:1:0},E.Ag=function(e){e==0?z("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.H.set(e),this.l==Qo&&(this.u.playbackRateChanged(e),Ey(this.j,1<Math.abs(e))))},E.pf=function(){var e=this.H.Pc();this.l==ss&&this.H.set(e),this.l==Qo&&(this.H.set(e),this.u.playbackRateChanged(e),Ey(this.j,!1))},E.Xa=function(){if(this.i){for(var e=this.j?this.j.l:null,n=[],o=0,w=i(this.i.variants),O=w.next();!O.done;O=w.next())if(au(O=O.value)){var L=iu(O);L.active=O==e,L.active||o==1||e==null||O.video!=e.video||O.audio!=e.audio||(L.active=!0),L.active&&o++,n.push(L)}return n}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(F){return sl(F)}):[]},E.Fb=function(){if(this.i){for(var e=this.j?this.j.o:null,n=[],o=i(this.i.textStreams),w=o.next();!w.done;w=o.next()){var O=ol(w=w.value);O.active=w==e,n.push(O)}return n}return this.g&&this.g.src&&this.g.textTracks?Sf(this).map(function(L){return gd(L)}):[]},E.Ff=function(){return this.i?this.i.imageStreams.map(function(e){return Yc(e)}):[]},E.Tf=function(e,n){var o,w,O,L,F,q,$,ce,ue,Ie,_e,Qe,ut,at,Ct,yt,Lt,jt,Zt,sn,Xt=this;return W(function(Gt){return Gt.g==1?Xt.i?(o=Xt.i.imageStreams.find(function(bn){return bn.id==e}))?o.segmentIndex?Gt.A(3):f(Gt,o.createSegmentIndex(),3):Gt.return(null):Gt.A(2):Gt.g!=2?(w=o.segmentIndex.find(n))==null?Gt.return(null):(O=o.segmentIndex.get(w),L=O.tilesLayout||o.tilesLayout,(F=/(\d+)x(\d+)/.exec(L))?(q=o.width||0,$=o.height||0,ce=parseInt(F[1],10),ue=parseInt(F[2],10),Ie=q/ce,_e=$/ue,Qe=ce*ue,ut=O.j-O.startTime,at=O.s||ut/Qe,Ct=O.startTime,Lt=yt=0,1<Qe&&(jt=Math.floor((n-O.startTime)/at),Ct=O.startTime+jt*at,yt=jt%ce*Ie,Lt=Math.floor(jt/ce)*_e),Zt=!1,(sn=O.o)&&(Zt=!0,_e=sn.height,yt=sn.positionX,Lt=sn.positionY,Ie=sn.width),Gt.return({imageHeight:$,imageWidth:q,height:_e,positionX:yt,positionY:Lt,startTime:Ct,duration:at,uris:O.ya(),width:Ie,sprite:Zt})):Gt.return(null)):Gt.return(null)})},E.Se=function(e){if(this.i&&this.j){var n=this.i.textStreams.find(function(w){return w.id==e.id});n&&n!=this.j.o&&(wg(this.o.h,n,!1),th(this.j,n),fh(this),this.vb=n.language)}else if(this.g&&this.g.src&&this.g.textTracks){for(var o=(n=i(n=Sf(this))).next();!o.done;o=n.next())Zl(o=o.value)==e.id?o.mode=this.ia?"showing":"hidden":o.mode="disabled";fh(this)}},E.Te=function(e,n,o){if(n=n!==void 0&&n,o=o===void 0?0:o,this.i&&this.j){this.h.abr.enabled&&z("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var w=this.i.variants.find(function(O){return O.id==e.id});w&&au(w)&&(wf(this,w,!1,n,o),this.ub=new Xl(w),Af(this))}else if(this.g&&this.g.audioTracks){for(o=(n=i(n=Array.from(this.g.audioTracks))).next();!o.done;o=n.next())if(Zl(o=o.value)==e.id){Dg(this,o);break}}},E.Af=function(){return n0(this.Xa())},E.Rf=function(){return n0(this.Fb())},E.zf=function(){return Array.from(t0(this.Xa()))},E.Qf=function(){return Array.from(t0(this.Fb()))},E.fe=function(e,n,o){if(o=o===void 0?0:o,this.i&&this.B){this.ub=new ms(e,n||"",o,""),n=function(q,$){return q.video||$.video?q.video&&$.video?Math.abs((q.video.height||0)-($.video.height||0))+Math.abs((q.video.width||0)-($.video.width||0)):1/0:0},e=this.j.l;var w=this.ub.create(this.i.variants);o=null;for(var O=(w=i(w.values())).next();!O.done;O=w.next())O=O.value,(!o||n(o,e)>n(O,e))&&(o=O);o?(n=iu(o),this.Te(n,!0)):ch(this)}else if(this.g&&this.g.audioTracks){O=Array.from(this.g.audioTracks),e=jr(e),w=o=null;for(var L=(O=i(O)).next();!L.done;L=O.next()){var F=sl(L=L.value);jr(F.language)==e&&(o=L,n?F.roles.includes(n)&&(w=L):F.roles.length==0&&(w=L))}w?Dg(this,w):o&&Dg(this,o)}},E.ge=function(e,n,o){if(o=o!==void 0&&o,this.i&&this.B)this.vb=e,this.cc=n||"",this.$b=o,(e=Ru(this.i.textStreams,this.vb,this.cc,this.$b)[0]||null)&&e!=this.j.o&&(wg(this.o.h,e,!1),this.h.streaming.alwaysStreamText||this.Gd())&&(th(this.j,e),fh(this));else{var w=jr(e);(e=this.Fb().find(function(O){return jr(O.language)==w&&(!n||O.roles.includes(n))&&O.forced==o}))&&this.Se(e)}},E.tg=function(e){if(this.i&&this.B){for(var n=null,o=i(this.i.variants),w=o.next();!w.done;w=o.next())if((w=w.value).audio.label==e){n=w;break}n!=null&&(this.ub=new ms(n.language,"",0,e),ch(this))}},E.Gd=function(){var e=this.ia;return this.G?this.G.m.isTextVisible():this.g&&this.g.src&&this.g.textTracks?Sf(this).some(function(n){return n.mode=="showing"}):e},E.Ge=function(){return this.g&&this.g.src&&this.g.textTracks?jy(this).map(function(e){return gd(e)}):[]},E.Cf=function(e){var n=jr(e),o=jy(this).filter(function(q){return jr(q.language)==n});if(!o||!o.length)return[];e=[];for(var w=new Set,O=(o=i(o)).next();!O.done;O=o.next())if((O=O.value)&&O.cues)for(var L=(O=i(O.cues)).next();!L.done;L=O.next()){var F=L.value;(L=F.id)&&L!=""||(L=F.startTime+"-"+F.endTime+"-"+F.text),F={id:L,title:F.text,startTime:F.startTime,endTime:F.endTime},w.has(L)||(e.push(F),w.add(L))}return e},E.yg=function(e){if(e=!!e,this.ia!=e){if(this.ia=e,this.l==Qo)this.G.m.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.o||0<(e=Ru(this.i.textStreams,this.vb,this.cc,this.$b)).length&&(th(this.j,e[0]),fh(this)):function(w){var O=w.j.get(Tr);O&&(Ef(O),_y(O).catch(function(){}),w.j.delete(Tr)),w.o=null}(this.j));else if(this.g&&this.g.src&&this.g.textTracks)for(var n=Sf(this),o=(n=i(n)).next();!o.done;o=n.next())(o=o.value).mode!="disabled"&&(o.mode=e?"showing":"hidden");zy(this)}},E.Of=function(){if(!this.T())return null;var e=this.Ga.l,n=0;if(this.B)n=this.B.Ic();else if(e){if(e.startTime==null)return new Date;n=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+n)):this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*n)):null},E.He=function(){if(!this.T())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.g&&this.g.getStartDate){var e=this.g.getStartDate();return isNaN(e.getTime())?null:e}return null},E.Ma=function(){if(this.l==Qo)return this.G.Ma();var e={total:[],audio:[],video:[],text:[]};return this.l==ss&&(e.total=qt(this.g.buffered)),e},E.getStats=function(){if(this.l!=Qo&&this.l!=ss)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};uh(this);var e=this.g,n=e.currentTime/e.duration;if(!isNaN(n)){var o=this.o;n=Math.round(100*n),o.i=isNaN(o.i)?n:Math.max(o.i,n)}if(this.B&&(this.o.M=this.B.se(),this.o.O=this.B.te()),e.getVideoPlaybackQuality){o=e.getVideoPlaybackQuality(),n=this.o;var w=Number(o.totalVideoFrames);n.L=Number(o.droppedVideoFrames),n.J=w,this.o.H=Number(o.corruptedVideoFrames)}o=this.m&&(o=this.m).H?o.H:NaN,this.o.s=o,this.l==Qo&&((o=this.j.l)&&(this.o.B=(this.H?this.H.i:1)*o.bandwidth),o&&o.video&&(n=this.o,w=o.video.height||NaN,n.o=o.video.width||NaN,n.l=w),this.T()&&(o=this.He().valueOf()+1e3*this.uc().end,this.o.D=(Date.now()-o)/1e3),this.i&&this.i.presentationTimeline&&(this.o.G=this.i.presentationTimeline.g),o=this.u.getBandwidthEstimate(),this.o.u=o),this.l==ss&&(o=this.o,n=e.videoHeight||NaN,o.o=e.videoWidth||NaN,o.l=n);var O=this.o;e=O.o,o=O.l,n=O.B,w=O.J;for(var L=O.L,F=O.H,q=O.O,$=O.M,ce=O.u,ue=O.i,Ie=O.m,_e=O.F,Qe=O.j,ut=Ag(O.g,"playing"),at=Ag(O.g,"paused"),Ct=Ag(O.g,"buffering"),yt=O.s,Lt=O.D,jt=O.G,Zt=function(Gt){function bn(Rn){return{timestamp:Rn.timestamp,state:Rn.state,duration:Rn.duration}}for(var Tn=[],Ut=i(Gt.h),ln=Ut.next();!ln.done;ln=Ut.next())Tn.push(bn(ln.value));return Gt.g&&Tn.push(bn(Gt.g)),Tn}(O.g),sn=[],Xt=(O=i(O.h.g)).next();!Xt.done;Xt=O.next())Xt=Xt.value,sn.push({timestamp:Xt.timestamp,id:Xt.id,type:Xt.type,fromAdaptation:Xt.fromAdaptation,bandwidth:Xt.bandwidth});return{width:e,height:o,streamBandwidth:n,decodedFrames:w,droppedFrames:L,corruptedFrames:F,stallsDetected:q,gapsJumped:$,estimatedBandwidth:ce,completionPercent:ue,loadLatency:Ie,manifestTimeSeconds:_e,drmTimeSeconds:Qe,playTime:ut,pauseTime:at,bufferingTime:Ct,licenseTime:yt,liveLatency:Lt,maxSegmentDuration:jt,stateHistory:Zt,switchHistory:sn}},E.hf=function(e,n,o,w,O,L,F){F=F!==void 0&&F;var q,$,ce,ue,Ie,_e,Qe,ut,at,Ct=this;return W(function(yt){switch(yt.g){case 1:if(Ct.l!=Qo&&Ct.l!=ss)throw new ht(1,7,7004);if(w){yt.A(2);break}return f(yt,Rg(Ct,e),3);case 3:w=yt.h;case 2:if(q=[],Ct.F)try{q=Ct.F.getServerSideCuePoints()}catch{}if(Ct.l!=ss){yt.A(4);break}return F&&(o="forced"),f(yt,Gy(Ct,e,n,o,w,L||"",q),5);case 5:if($=Ct.Fb(),ce=$.find(function(Lt){return Lt.language==n&&Lt.label==(L||"")&&Lt.kind==o}))return os(Ct),yt.return(ce);throw new ht(1,2,2012);case 4:if(ue=ji,(Ie=Ct.i.presentationTimeline.getDuration())==1/0)throw new ht(1,4,4033);if(!q.length){yt.A(6);break}return f(yt,Cg(Ct,e,Ct.D,Ct.h.streaming.retryParameters),7);case 7:_e=yt.h,Qe=Hy(Ct,_e,w,q),ut=new Blob([Qe],{type:"text/vtt"}),e=$a(ut),w="text/vtt";case 6:if(at={id:Ct.Xd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:sa(0,Ie,[e]),mimeType:w||"",codecs:O||"",kind:o,encrypted:!1,drmInfos:[],keyIds:new Set,language:n,label:L||null,type:ue.X,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!F,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},!io(ma(at.mimeType,at.codecs)))throw new ht(2,2,2014,w);return Ct.i.textStreams.push(at),os(Ct),yt.return(ol(at))}})},E.jf=function(e,n){var o,w,O,L,F,q,$,ce,ue,Ie,_e,Qe,ut,at,Ct,yt,Lt=this;return W(function(jt){switch(jt.g){case 1:if(Lt.l!=Qo&&Lt.l!=ss)throw new ht(1,7,7004);if(Lt.l==ss)throw new ht(1,2,2016);if(n){jt.A(2);break}return f(jt,Rg(Lt,e),3);case 3:n=jt.h;case 2:if(n!="text/vtt")throw new ht(1,2,2017,e);if(o=ji,(w=Lt.i.presentationTimeline.getDuration())==1/0)throw new ht(1,4,4045);return f(jt,Cg(Lt,e,Lt.D,Lt.h.streaming.retryParameters),4);case 4:if(O=jt.h,!(L=ia[n]))throw new ht(2,2,2014,n);for(F=L(),q={periodStart:0,segmentStart:0,segmentEnd:w,vttOffset:0},$=Vt(O),ce=F.parseMedia($,q),ue=[],Ie={},_e=i(ce),Qe=_e.next();!Qe.done;Ie={Rb:Ie.Rb},Qe=_e.next())ut=Qe.value,Ie.Rb=ki([e],[ut.payload])[0],at=new mn(ut.startTime,ut.endTime,function(Zt){return function(){return[Zt.Rb]}}(Ie),0,null,null,0,0,1/0),Ie.Rb.includes("#xywh")&&(Ct=Ie.Rb.split("#xywh=")[1].split(",")).length===4&&at.Ye({height:parseInt(Ct[3],10),positionX:parseInt(Ct[0],10),positionY:parseInt(Ct[1],10),width:parseInt(Ct[2],10)}),ue.push(at);return yt={id:Lt.Xd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new er(ue),mimeType:n||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",label:null,type:o.Wb,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1"},Lt.i.imageStreams.push(yt),os(Lt),jt.return(Yc(yt))}})},E.gf=function(e,n,o){var w,O,L,F,q=this;return W(function($){switch($.g){case 1:if(q.l!=Qo&&q.l!=ss)throw new ht(1,7,7004);if(o){$.A(2);break}return f($,Rg(q,e),3);case 3:o=$.h;case 2:if(w=[],q.F)try{w=q.F.getServerSideCuePoints()}catch{}return f($,Gy(q,e,n,"chapters",o,"",w),4);case 4:if(O=$.h,L=q.Ge(),!(F=L.find(function(ce){return ce.language==n}))){$.A(5);break}return f($,new Promise(function(ce,ue){q.s.ma(O,"load",ce),q.s.ma(O,"error",function(){ue(new ht(1,2,2015))})}),6);case 6:return $.return(F);case 5:throw new ht(1,2,2012)}})},E.je=function(e,n){this.ec.width=e,this.ec.height=n},E.be=function(e){if(this.l==Qo){var n=this.j;if(e=e===void 0?.1:e,n.h.g)n=!1;else if(n.s)n=!1;else{for(var o=i(n.j.values()),w=o.next();!w.done;w=o.next())!(w=w.value).nc||w.ra||w.Ka||(w.nc=!1,as(n,w,e));n=!0}}else n=!1;return n},E.If=function(){return z("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},E.Jf=function(){return this.Yc},E.$e=function(e){this.Uc=e},Q("shaka.Player",Ln),Ln.prototype.setVideoContainer=Ln.prototype.$e,Ln.prototype.getManifestParserFactory=Ln.prototype.Jf,Ln.prototype.getManifest=Ln.prototype.If,Ln.prototype.retryStreaming=Ln.prototype.be,Ln.prototype.setMaxHardwareResolution=Ln.prototype.je,Ln.prototype.addChaptersTrack=Ln.prototype.gf,Ln.prototype.addThumbnailsTrack=Ln.prototype.jf,Ln.prototype.addTextTrackAsync=Ln.prototype.hf,Ln.prototype.getStats=Ln.prototype.getStats,Ln.prototype.getBufferedInfo=Ln.prototype.Ma,Ln.prototype.getPresentationStartTimeAsDate=Ln.prototype.He,Ln.prototype.getPlayheadTimeAsDate=Ln.prototype.Of,Ln.prototype.setTextTrackVisibility=Ln.prototype.yg,Ln.prototype.getChapters=Ln.prototype.Cf,Ln.prototype.getChaptersTracks=Ln.prototype.Ge,Ln.prototype.isTextTrackVisible=Ln.prototype.Gd,Ln.prototype.selectVariantsByLabel=Ln.prototype.tg,Ln.prototype.selectTextLanguage=Ln.prototype.ge,Ln.prototype.selectAudioLanguage=Ln.prototype.fe,Ln.prototype.getTextLanguages=Ln.prototype.Qf,Ln.prototype.getAudioLanguages=Ln.prototype.zf,Ln.prototype.getTextLanguagesAndRoles=Ln.prototype.Rf,Ln.prototype.getAudioLanguagesAndRoles=Ln.prototype.Af,Ln.prototype.selectVariantTrack=Ln.prototype.Te,Ln.prototype.selectTextTrack=Ln.prototype.Se,Ln.prototype.getThumbnails=Ln.prototype.Tf,Ln.prototype.getImageTracks=Ln.prototype.Ff,Ln.prototype.getTextTracks=Ln.prototype.Fb,Ln.prototype.getVariantTracks=Ln.prototype.Xa,Ln.prototype.cancelTrickPlay=Ln.prototype.pf,Ln.prototype.trickPlay=Ln.prototype.Ag,Ln.prototype.getPlaybackRate=Ln.prototype.Rc,Ln.prototype.isBuffering=Ln.prototype.Fd,Ln.prototype.getKeyStatuses=Ln.prototype.Qc,Ln.prototype.getExpiration=Ln.prototype.ic,Ln.prototype.drmInfo=Ln.prototype.drmInfo,Ln.prototype.keySystem=Ln.prototype.keySystem,Ln.prototype.goToLive=Ln.prototype.Xf,Ln.prototype.seekRange=Ln.prototype.uc,Ln.prototype.isAudioOnly=Ln.prototype.Zf,Ln.prototype.isInProgress=Ln.prototype.jb,Ln.prototype.isLive=Ln.prototype.T,Ln.prototype.getAdManager=Ln.prototype.Fe,Ln.prototype.getAssetUri=Ln.prototype.Dd,Ln.prototype.getNetworkingEngine=Ln.prototype.jc,Ln.prototype.getMediaElement=Ln.prototype.Lf,Ln.prototype.getLoadMode=Ln.prototype.Hf,Ln.prototype.resetConfiguration=Ln.prototype.rg,Ln.prototype.getBufferFullness=Ln.prototype.Bf,Ln.prototype.getConfiguration=Ln.prototype.getConfiguration,Ln.prototype.configure=Ln.prototype.configure,Ln.prototype.load=Ln.prototype.load,Ln.prototype.updateStartTime=Ln.prototype.Fg,Ln.prototype.unload=Ln.prototype.qe,Ln.prototype.detach=Ln.prototype.detach,Ln.prototype.attachCanvas=Ln.prototype.lf,Ln.prototype.attach=Ln.prototype.Yb,Ln.probeSupport=function(e){var n,o,w,O,L;return e=e===void 0||e,W(function(F){if(F.g==1)return n={},e?f(F,function(){var _e,Qe,ut,at,Ct,yt;return W(function(Lt){return Lt.g==1?(_e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),ut=[{videoCapabilities:Qe=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{initDataTypes:["cenc"],videoCapabilities:Qe}],at=new Map,Ct=function(jt){var Zt,sn,Xt;return W(function(Gt){switch(Gt.g){case 1:if(p(Gt,2),jt==="org.w3.clearkey"&&fa())throw Error("Unsupported keySystem");return f(Gt,navigator.requestMediaKeySystemAccess(jt,ut),4);case 4:return Zt=Gt.h,Xt=!!(sn=Zt.getConfiguration().sessionTypes)&&sn.includes("persistent-license"),ai("Tizen 3")&&(Xt=!1),at.set(jt,{persistentState:Xt}),f(Gt,Zt.createMediaKeys(),5);case 5:P(Gt,0);break;case 2:j(Gt),at.set(jt,null),b(Gt)}})},yt=_e.map(function(jt){return Ct(jt)}),f(Lt,Promise.all(yt),2)):Lt.return(hl(at))})}(),3):F.A(2);F.g!=2&&(n=F.h);var q={};if(kn()){for(var $ in Lo)q[$]=!0;for(var ce in fu)q[ce]=!0}$={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var ue=(ce=i(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!ue.done;ue=ce.next())q[ue=ue.value]=kn()?!!Lo[ue]:nr(ue);for(var Ie in $)q[Ie]=kn()?!!fu[Ie]:nr($[Ie]);for(o=q,q={},$=(Ie=i(Ie='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(g(Co)))).next();!$.done;$=Ie.next())q[$=$.value]=kn()?!!io($)||Ye($)||Yn($):nr($),q[ce=$.split(";")[0]]=q[ce]||q[$];for(L in w={manifest:o,media:q,drm:n},O=Mg)w[L]=O[L]();return F.return(w)})},Ln.isBrowserSupported=function(){if(C.Promise||z("A Promise implementation or polyfill is required"),!(C.Promise&&C.Uint8Array&&Array.prototype.forEach)||ai("Trident/"))return!1;var e=fa();return!(e&&13>e||!(C.MediaKeys&&C.navigator&&C.navigator.requestMediaKeySystemAccess&&C.MediaKeySystemAccess&&C.MediaKeySystemAccess.prototype.getConfiguration))&&(!!kn()||nr("application/x-mpegurl"))},Ln.setAdManagerFactory=function(e){dh=e},Ln.registerSupportPlugin=function(e,n){Mg[e]=n},Ln.prototype.destroy=Ln.prototype.destroy;var ws=0,Lg=1,Qo=2,ss=3;Ln.LoadMode={DESTROYED:ws,NOT_LOADED:Lg,MEDIA_SOURCE:Qo,SRC_EQUALS:ss},Ln.version="v4.3.3";var r0=["4","3"];Yl=new function(e){this.g=e,this.i=$p,this.h=Xc}(new ul(Number(r0[0]),Number(r0[1])));var i0=["output-restricted","internal-error"],Mg={},dh=null,hh={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},eS={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function a0(){this.h=[],this.j=this.i=this.g=0}function vi(e,n,o){var w=this;this.h=e,this.g=n,this.m=o,this.i=!1,this.l=this.g.getVolume(),this.j=new da,this.j.C(this.g,google.ima.AdEvent.Type.PAUSED,function(){w.i=!0}),this.j.C(this.g,google.ima.AdEvent.Type.RESUMED,function(){w.i=!1})}function Fg(e,n,o,w){var O=this;this.o=e,this.i=n,this.s=null,this.u=NaN,this.l=w,this.j=null,this.h=new da,google.ima.settings.setLocale(o),(e=new google.ima.AdDisplayContainer(this.o,this.i)).initialize(),this.m=new google.ima.AdsLoader(e),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.3.3"),this.g=null,this.h.ma(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(L){(function(F,q){F.l(new si("ads-loaded",new Map().set("loadTime",Date.now()/1e3-F.u))),F.g=q.getAdsManager(F.i),F.l(new si("ima-ad-manager-loaded",new Map().set("imaAdManager",F.g)));var $=F.g.getCuePoints();if($.length){q=[];for(var ce=($=i($)).next();!ce.done;ce=$.next())q.push({start:ce.value,end:null});F.l(new si("ad-cue-points-changed",new Map().set("cuepoints",q)))}(function(ue){function Ie(_e,Qe){_e=new Map().set("originalEvent",_e),ue.l(new si(Qe,_e))}ue.h.C(ue.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(_e){o0(ue,_e)}),ue.h.C(ue.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(_e){s0(ue,_e)}),ue.h.C(ue.g,google.ima.AdEvent.Type.STARTED,function(_e){s0(ue,_e)}),ue.h.C(ue.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(_e){Ie(_e,"ad-first-quartile")}),ue.h.C(ue.g,google.ima.AdEvent.Type.MIDPOINT,function(_e){Ie(_e,"ad-midpoint")}),ue.h.C(ue.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(_e){Ie(_e,"ad-third-quartile")}),ue.h.C(ue.g,google.ima.AdEvent.Type.COMPLETE,function(_e){Ie(_e,"ad-complete")}),ue.h.C(ue.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(_e){gh(ue,_e)}),ue.h.C(ue.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(_e){gh(ue,_e)}),ue.h.C(ue.g,google.ima.AdEvent.Type.SKIPPED,function(_e){Ie(_e,"ad-skipped")}),ue.h.C(ue.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(_e){Ie(_e,"ad-volume-changed")}),ue.h.C(ue.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(_e){Ie(_e,"ad-muted")}),ue.h.C(ue.g,google.ima.AdEvent.Type.PAUSED,function(_e){ue.j&&(ue.j.i=!0,Ie(_e,"ad-paused"))}),ue.h.C(ue.g,google.ima.AdEvent.Type.RESUMED,function(_e){ue.j&&(ue.j.i=!1,Ie(_e,"ad-resumed"))}),ue.h.C(ue.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(_e){ue.j&&Ie(_e,"ad-skip-state-changed")}),ue.h.C(ue.g,google.ima.AdEvent.Type.CLICK,function(_e){Ie(_e,"ad-clicked")}),ue.h.C(ue.g,google.ima.AdEvent.Type.AD_PROGRESS,function(_e){Ie(_e,"ad-progress")}),ue.h.C(ue.g,google.ima.AdEvent.Type.AD_BUFFERING,function(_e){Ie(_e,"ad-buffering")}),ue.h.C(ue.g,google.ima.AdEvent.Type.IMPRESSION,function(_e){Ie(_e,"ad-impression")}),ue.h.C(ue.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(_e){Ie(_e,"ad-duration-changed")}),ue.h.C(ue.g,google.ima.AdEvent.Type.USER_CLOSE,function(_e){Ie(_e,"ad-closed")}),ue.h.C(ue.g,google.ima.AdEvent.Type.LOADED,function(_e){Ie(_e,"ad-loaded")}),ue.h.C(ue.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(_e){Ie(_e,"all-ads-completed")}),ue.h.C(ue.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(_e){Ie(_e,"ad-linear-changed")}),ue.h.C(ue.g,google.ima.AdEvent.Type.AD_METADATA,function(_e){Ie(_e,"ad-metadata")}),ue.h.C(ue.g,google.ima.AdEvent.Type.LOG,function(_e){Ie(_e,"ad-recoverable-error")}),ue.h.C(ue.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(_e){Ie(_e,"ad-break-ready")}),ue.h.C(ue.g,google.ima.AdEvent.Type.INTERACTION,function(_e){Ie(_e,"ad-interaction")})})(F);try{F.g.init(F.i.offsetWidth,F.i.offsetHeight,ph(F)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),F.h.C(F.i,"loadeddata",function(){F.g.resize(F.i.offsetWidth,F.i.offsetHeight,ph(F)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in C?(F.s=new ResizeObserver(function(){F.g.resize(F.i.offsetWidth,F.i.offsetHeight,ph(F)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),F.s.observe(F.i)):F.h.C(document,"fullscreenchange",function(){F.g.resize(F.i.offsetWidth,F.i.offsetHeight,ph(F)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),F.i.addEventListener("play",function(){F.g.start()},{once:!0})}catch{gh(F,null)}})(O,L)}),this.h.C(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(L){o0(O,L)}),this.i.onended=function(){O.m.contentComplete()}}function o0(e,n){n.getError(),gh(e,null),e.l(new si("ad-cue-points-changed",new Map().set("cuepoints",[])))}function ph(e){return document.fullscreenEnabled?!!document.fullscreenElement:!!(e=e.i).webkitSupportsFullscreen&&e.webkitDisplayingFullscreen}function s0(e,n){var o=n.getAd();o?(e.j=new vi(o,e.g,e.i),n=new Map().set("ad",e.j).set("sdkAdObject",o).set("originalEvent",n),e.l(new si("ad-started",n)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.i.pause())):z("The IMA SDK fired a "+n.type+" event with no associated ad. Unable to play ad!")}function gh(e,n){e.l(new si("ad-stopped",new Map().set("originalEvent",n))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.i.play())}function yi(e,n){this.i=e,this.h=null,this.g=n}function mh(e,n,o,w){var O=this;this.s=e,this.l=n,this.j=null,this.G=NaN,this.i=w,this.F=!1,this.u=this.m=this.o=null,this.B="",this.D=[],this.h=new da,(e=new google.ima.dai.api.UiSettings).setLocale(o),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new si("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(L){(function(F,q){F.i(new si("ads-loaded",new Map().set("loadTime",Date.now()/1e3-F.G))),q=q.getStreamData().url,F.j.resolve(q),F.j=null,F.F||F.h.C(F.l,"seeked",function(){var $=F.l.currentTime;if($!=0){F.g.streamTimeForContentTime($);var ce=F.g.previousCuePointForStreamTime($);ce&&!ce.played&&(F.o=$,F.l.currentTime=ce.start)}})})(O,L)}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){O.B.length?O.j.resolve(O.B):O.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),O.j=null}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(L){L=L.getAd(),O.m=new yi(L,O.l),O.u&&(O.m.h=O.u),O.i(new si("ad-started",new Map().set("ad",O.m))),O.s.setAttribute("ad-active","true")}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){O.s.removeAttribute("ad-active");var L=O.l.currentTime;O.o&&O.o>L&&(O.l.currentTime=O.o,O.o=null)}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(L){O.u=L.getStreamData().adProgressData,O.m&&(O.m.h=O.u)}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){O.i(new si("ad-first-quartile"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){O.i(new si("ad-midpoint"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){O.i(new si("ad-third-quartile"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){O.i(new si("ad-complete")),O.i(new si("ad-stopped")),O.s.removeAttribute("ad-active"),O.m=null}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){O.i(new si("ad-skipped")),O.i(new si("ad-stopped"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(L){var F=L.getStreamData();L=[];for(var q=(F=i(F.cuepoints)).next();!q.done;q=F.next())q=q.value,L.push({start:q.start,end:q.end});O.D=L,O.i(new si("ad-cue-points-changed",new Map().set("cuepoints",L)))})}function zr(){wi.call(this),this.g=this.i=null,this.h=new a0,this.j=navigator.language}function u0(e){return JSON.stringify(e,function(n,o){if(typeof o!="function"){if(o instanceof Event||o instanceof si){var w={};for(O in o)(n=o[O])&&typeof n=="object"?O=="detail"&&(w[O]=n):O in Event||(w[O]=n);return w}if(o instanceof Error){var O=new Set(["name","message","stack"]);for(w in o)O.add(w);for(w=(n=i(Object.getOwnPropertyNames(o))).next();!w.done;w=n.next())O.add(w.value);for(n={},w=(O=i(O)).next();!w.done;w=O.next())n[w=w.value]=o[w];o={__type__:"Error",contents:n}}else if(o instanceof TimeRanges){for(O={__type__:"TimeRanges",length:o.length,start:[],end:[]},w=(o=i(qt(o))).next();!w.done;w=o.next())n=(w=w.value).end,O.start.push(w.start),O.end.push(n);o=O}else o=o instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(o)}:typeof o=="number"?isNaN(o)?"NaN":isFinite(o)?o:0>o?"-Infinity":"Infinity":o;return o}})}function Ug(e){return JSON.parse(e,function(n,o){if(o=="NaN")var w=NaN;else if(o=="-Infinity")w=-1/0;else if(o=="Infinity")w=1/0;else if(o&&typeof o=="object"&&o.__type__=="TimeRanges")w=function(O){return{length:O.length,start:function(L){return O.start[L]},end:function(L){return O.end[L]}}}(o);else if(o&&typeof o=="object"&&o.__type__=="Uint8Array")w=new Uint8Array(o.entries);else if(o&&typeof o=="object"&&o.__type__=="Error"){for(w in n=o.contents,o=Error(n.message),n)o[w]=n[w];w=o}else w=o;return w})}(E=vi.prototype).getDuration=function(){return this.h.getDuration()},E.getMinSuggestedDuration=function(){return this.h.getMinSuggestedDuration()},E.getRemainingTime=function(){return this.g.getRemainingTime()},E.isPaused=function(){return this.i},E.isSkippable=function(){return 0<=this.h.getSkipTimeOffset()},E.getTimeUntilSkippable=function(){var e=this.h.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},E.canSkipNow=function(){return this.g.getAdSkippableState()},E.skip=function(){return this.g.skip()},E.pause=function(){return this.g.pause()},E.play=function(){return this.g.resume()},E.getVolume=function(){return this.g.getVolume()},E.setVolume=function(e){return this.g.setVolume(e)},E.isMuted=function(){return this.g.getVolume()==0},E.isLinear=function(){return this.h.isLinear()},E.resize=function(e,n){var o=!1,w=this.m;document.fullscreenEnabled?o=!!document.fullscreenElement:w.webkitSupportsFullscreen&&(o=w.webkitDisplayingFullscreen),this.g.resize(e,n,o?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},E.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},E.getSequenceLength=function(){var e=this.h.getAdPodInfo();return e==null?1:e.getTotalAds()},E.getPositionInSequence=function(){var e=this.h.getAdPodInfo();return e==null?1:e.getAdPosition()},E.getTitle=function(){return this.h.getTitle()},E.getDescription=function(){return this.h.getDescription()},E.release=function(){this.g=this.h=null},Q("shaka.ads.ClientSideAd",vi),vi.prototype.release=vi.prototype.release,vi.prototype.getDescription=vi.prototype.getDescription,vi.prototype.getTitle=vi.prototype.getTitle,vi.prototype.getPositionInSequence=vi.prototype.getPositionInSequence,vi.prototype.getSequenceLength=vi.prototype.getSequenceLength,vi.prototype.setMuted=vi.prototype.setMuted,vi.prototype.resize=vi.prototype.resize,vi.prototype.isLinear=vi.prototype.isLinear,vi.prototype.isMuted=vi.prototype.isMuted,vi.prototype.setVolume=vi.prototype.setVolume,vi.prototype.getVolume=vi.prototype.getVolume,vi.prototype.play=vi.prototype.play,vi.prototype.pause=vi.prototype.pause,vi.prototype.skip=vi.prototype.skip,vi.prototype.canSkipNow=vi.prototype.canSkipNow,vi.prototype.getTimeUntilSkippable=vi.prototype.getTimeUntilSkippable,vi.prototype.isSkippable=vi.prototype.isSkippable,vi.prototype.isPaused=vi.prototype.isPaused,vi.prototype.getRemainingTime=vi.prototype.getRemainingTime,vi.prototype.getMinSuggestedDuration=vi.prototype.getMinSuggestedDuration,vi.prototype.getDuration=vi.prototype.getDuration,Fg.prototype.stop=function(){this.g&&this.g.stop(),this.o&&nh(this.o)},Fg.prototype.release=function(){this.stop(),this.s&&this.s.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy()},(E=yi.prototype).getDuration=function(){return this.h?this.h.duration:-1},E.getMinSuggestedDuration=function(){return this.getDuration()},E.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},E.isPaused=function(){return this.g.paused},E.isSkippable=function(){return this.i.isSkippable()},E.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},E.canSkipNow=function(){return this.getTimeUntilSkippable()==0},E.skip=function(){this.g.currentTime+=this.getRemainingTime()},E.pause=function(){return this.g.pause()},E.play=function(){return this.g.play()},E.getVolume=function(){return this.g.volume},E.setVolume=function(e){this.g.volume=e},E.isMuted=function(){return this.g.muted},E.isLinear=function(){return!0},E.resize=function(){},E.setMuted=function(e){this.g.muted=e},E.getSequenceLength=function(){var e=this.i.getAdPodInfo();return e==null?1:e.getTotalAds()},E.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return e==null?1:e.getAdPosition()},E.getTitle=function(){return this.i.getTitle()},E.getDescription=function(){return this.i.getDescription()},E.release=function(){this.g=this.h=this.i=null},Q("shaka.ads.ServerSideAd",yi),yi.prototype.release=yi.prototype.release,yi.prototype.getDescription=yi.prototype.getDescription,yi.prototype.getTitle=yi.prototype.getTitle,yi.prototype.getPositionInSequence=yi.prototype.getPositionInSequence,yi.prototype.getSequenceLength=yi.prototype.getSequenceLength,yi.prototype.setMuted=yi.prototype.setMuted,yi.prototype.resize=yi.prototype.resize,yi.prototype.isLinear=yi.prototype.isLinear,yi.prototype.isMuted=yi.prototype.isMuted,yi.prototype.setVolume=yi.prototype.setVolume,yi.prototype.getVolume=yi.prototype.getVolume,yi.prototype.play=yi.prototype.play,yi.prototype.pause=yi.prototype.pause,yi.prototype.skip=yi.prototype.skip,yi.prototype.canSkipNow=yi.prototype.canSkipNow,yi.prototype.getTimeUntilSkippable=yi.prototype.getTimeUntilSkippable,yi.prototype.isSkippable=yi.prototype.isSkippable,yi.prototype.isPaused=yi.prototype.isPaused,yi.prototype.getRemainingTime=yi.prototype.getRemainingTime,yi.prototype.getMinSuggestedDuration=yi.prototype.getMinSuggestedDuration,yi.prototype.getDuration=yi.prototype.getDuration,mh.prototype.stop=function(){this.B="",this.o=null,this.D=[]},mh.prototype.release=function(){this.stop(),this.h&&this.h.release()},mh.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var n={};n[e.key]=e.data,this.g.onTimedMetadata(n)}},S(zr,wi),(E=zr.prototype).setLocale=function(e){this.j=e},E.initClientSide=function(e,n){var o=this;if(!C.google||!google.ima||!google.ima.AdsLoader)throw new ht(2,10,1e4);this.i&&this.i.release(),this.i=new Fg(e,n,this.j,function(w){if(w&&w.type)switch(w.type){case"ads-loaded":o.h.h.push(w.loadTime);break;case"ad-started":o.h.g++;break;case"ad-complete":o.h.i++;break;case"ad-skipped":o.h.j++}o.dispatchEvent(w)})},E.release=function(){this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),wi.prototype.release.call(this)},E.onAssetUnload=function(){this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new si("ad-stopped")),this.h=new a0},E.requestClientSideAds=function(e){if(!this.i)throw new ht(1,10,10001);var n=this.i;n.u=Date.now()/1e3,n.m.requestAds(e)},E.initServerSide=function(e,n){var o=this;if(!C.google||!google.ima||!google.ima.dai)throw new ht(2,10,10002);this.g&&this.g.release(),this.g=new mh(e,n,this.j,function(w){if(w&&w.type)switch(w.type){case"ads-loaded":o.h.h.push(w.loadTime);break;case"ad-started":o.h.g++;break;case"ad-complete":o.h.i++;break;case"ad-skipped":o.h.j++}o.dispatchEvent(w)})},E.requestServerSideStream=function(e,n){if(n=n===void 0?"":n,!this.g)throw new ht(1,10,10003);e.adTagParameters||(e.adTagParameters={});var o=e.adTagParameters;return(o.mpt||o.mpv)&&z('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.3.3",(o=this.g).j?e=Promise.reject(new ht(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(o.F=!0),o.j=new xi,o.g.requestStream(e),o.B=n||"",o.G=Date.now()/1e3,e=o.j),e},E.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new ht(1,10,10003);(e.mpt||e.mpv)&&z('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.3.3",this.g.g.replaceAdTagParameters(e)},E.getServerSideCuePoints=function(){if(!this.g)throw new ht(1,10,10003);return this.g.D},E.getStats=function(){var e=this.h;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},E.onDashTimedMetadata=function(e){if(this.g&&e.schemeIdUri=="urn:google:dai:2018"){var n=e.schemeIdUri,o=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(n,o,e.startTime)}},E.onHlsTimedMetadata=function(e,n){this.g&&this.g.g.processMetadata("ID3",e.data,n)},E.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},Q("shaka.ads.AdManager",zr),zr.prototype.onCueMetadataChange=zr.prototype.onCueMetadataChange,zr.prototype.onHlsTimedMetadata=zr.prototype.onHlsTimedMetadata,zr.prototype.onDashTimedMetadata=zr.prototype.onDashTimedMetadata,zr.prototype.getStats=zr.prototype.getStats,zr.prototype.getServerSideCuePoints=zr.prototype.getServerSideCuePoints,zr.prototype.replaceServerSideAdTagParameters=zr.prototype.replaceServerSideAdTagParameters,zr.prototype.requestServerSideStream=zr.prototype.requestServerSideStream,zr.prototype.initServerSide=zr.prototype.initServerSide,zr.prototype.requestClientSideAds=zr.prototype.requestClientSideAds,zr.prototype.onAssetUnload=zr.prototype.onAssetUnload,zr.prototype.release=zr.prototype.release,zr.prototype.initClientSide=zr.prototype.initClientSide,zr.prototype.setLocale=zr.prototype.setLocale,zr.ADS_LOADED="ads-loaded",zr.AD_STARTED="ad-started",zr.AD_FIRST_QUARTILE="ad-first-quartile",zr.AD_MIDPOINT="ad-midpoint",zr.AD_THIRD_QUARTILE="ad-third-quartile",zr.AD_COMPLETE="ad-complete",zr.AD_STOPPED="ad-stopped",zr.AD_SKIPPED="ad-skipped",zr.AD_VOLUME_CHANGED="ad-volume-changed",zr.AD_MUTED="ad-muted",zr.AD_PAUSED="ad-paused",zr.AD_RESUMED="ad-resumed",zr.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",zr.CUEPOINTS_CHANGED="ad-cue-points-changed",zr.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",zr.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",zr.AD_CLICKED="ad-clicked",zr.AD_PROGRESS="ad-progress",zr.AD_BUFFERING="ad-buffering",zr.AD_IMPRESSION="ad-impression",zr.AD_DURATION_CHANGED="ad-duration-changed",zr.AD_CLOSED="ad-closed",zr.AD_LOADED="ad-loaded",zr.ALL_ADS_COMPLETED="all-ads-completed",zr.AD_LINEAR_CHANGED="ad-linear-changed",zr.AD_METADATA="ad-metadata",zr.AD_RECOVERABLE_ERROR="ad-recoverable-error",zr.AD_BREAK_READY="ad-break-ready",zr.AD_INTERACTION="ad-interaction",dh=function(){return new zr};var l0="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),tS="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Bg=["loop","playbackRate"],nS=["pause","play"],vh={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},yh={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},jg={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},c0=[["getConfiguration","configure"]],f0=[["isTextTrackVisible","setTextTrackVisibility"]],rS="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),iS=["attach","attachCanvas","detach","load","unload"];function Gg(e,n,o,w,O,L,F){var q=this;this.G=e,this.M=F,this.j=new ni(n),this.O=o,this.u=!1,this.s=w,this.F=O,this.J=L,this.h=this.m=!1,this.L="",this.o=null,this.B=function(){return Vg(q)},this.D=function($,ce){switch(($=Ug(ce)).type){case"event":var ue=$.targetName,Ie=lu($.event);q.s(ue,Ie);break;case"update":for(Ie in ue=$.update)for(var _e in $=q.g[Ie]||{},ue[Ie])$[_e]=ue[Ie][_e];q.u&&(q.O(),q.u=!1);break;case"asyncComplete":if(Ie=$.id,_e=$.error,$=q.i[Ie],delete q.i[Ie],$)if(_e){for(ue in Ie=new ht(_e.severity,_e.category,_e.code),_e)Ie[ue]=_e[ue];$.reject(Ie)}else $.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.l=null,Cf.add(this)}function Hg(e,n,o){us=o,o.addUpdateListener(e.B),o.addMessageListener("urn:x-cast:com.google.shaka.v2",e.D),Vg(e),Rf(e,{type:"init",initState:n,appData:e.o}),e.l.resolve()}function d0(e,n){var o=8003;switch(n.code){case"cancel":o=8004;break;case"timeout":o=8005;break;case"receiver_unavailable":o=8006}e.l.reject(new ht(2,8,o,n))}function h0(e,n){var o=e.J();e.l=new xi,e.u=!0,Hg(e,o,n)}function p0(e){var n=us;n.removeUpdateListener(e.B),n.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.D)}function Vg(e){var n=!!us&&us.status=="connected";if(e.h&&!n){for(var o in e.F(),e.g)e.g[o]={};Zg(e)}e.h=n,e.L=n?us.receiver.friendlyName:"",e.j.Mb()}function Zg(e){for(var n in e.i){var o=e.i[n];delete e.i[n],o.reject(new ht(1,7,7e3))}}function Rf(e,n){n=u0(n);var o=us;try{o.sendMessage("urn:x-cast:com.google.shaka.v2",n,function(){},de)}catch(w){throw n=new ht(2,8,8005,w),o=new si("error",new Map().set("detail",n)),e.s("player",o),e.Ab(),n}}(E=Gg.prototype).destroy=function(){return Cf.delete(this),Zg(this),us&&p0(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.D=this.B=this.l=this.i=this.g=this.o=null,Promise.resolve()},E.sa=function(){return this.h},E.$d=function(){return this.L},E.init=function(){if(this.G.length)if(C.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.Mb();var e=new chrome.cast.SessionRequest(this.G,[],null,this.M,null);e=new chrome.cast.ApiConfig(e,function(n){for(var o=i(Cf),w=o.next();!w.done;w=o.next())h0(w.value,n)},function(n){for(var o=i(Cf),w=o.next();!w.done;w=o.next())w=w.value,Eh=n=="available",w.j.Mb()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Eh&&this.j.N(aS),(e=us)&&e.status!=chrome.cast.SessionStatus.STOPPED?h0(this,e):us=null}else C.__onGCastApiAvailable!==g0&&(bh=C.__onGCastApiAvailable||null,C.__onGCastApiAvailable=g0)},E.he=function(e){this.o=e,this.h&&Rf(this,{type:"appData",appData:this.o})},E.cast=function(e){var n=this;return W(function(o){if(!n.m)throw new ht(1,8,8e3);if(!Eh)throw new ht(1,8,8001);if(n.h)throw new ht(1,8,8002);return n.l=new xi,chrome.cast.requestSession(function(w){return Hg(n,e,w)},function(w){return d0(n,w)}),f(o,n.l,0)})},E.Ab=function(){if(this.h){if(Zg(this),us){p0(this);try{us.stop(function(){},function(){})}catch{}us=null}Vg(this)}},E.get=function(e,n){var o=this;if(e=="video"){if(nS.includes(n))return function(){return o.Qe.apply(o,[e,n].concat(g(Te.apply(0,arguments))))}}else if(e=="player"){if(jg[n]&&!this.get("player","isLive")())return function(){};if(rS.includes(n))return function(){return o.Qe.apply(o,[e,n].concat(g(Te.apply(0,arguments))))};if(iS.includes(n))return function(){return o.og.apply(o,[e,n].concat(g(Te.apply(0,arguments))))};if(vh[n]||yh[n])return function(){return o.g[e][n]}}return this.g[e][n]},E.set=function(e,n,o){this.g[e][n]=o,Rf(this,{type:"set",targetName:e,property:n,value:o})},E.Qe=function(e,n){Rf(this,{type:"call",targetName:e,methodName:n,args:Te.apply(2,arguments)})},E.og=function(e,n){var o=Te.apply(2,arguments),w=new xi,O=this.H.toString();this.H++,this.i[O]=w;try{Rf(this,{type:"asyncCall",targetName:e,methodName:n,args:o,id:O})}catch(L){w.reject(L)}return w};var aS=.02,Eh=!1,us=null,bh=null,Cf=new Set;function g0(e){if(bh?C.__onGCastApiAvailable=bh:delete C.__onGCastApiAvailable,bh=null,e)for(var n=i(Cf),o=n.next();!o.done;o=n.next())o.value.init();typeof C.__onGCastApiAvailable=="function"&&C.__onGCastApiAvailable(e)}function Na(e,n,o,w){w=w!==void 0&&w,wi.call(this);var O=this;this.i=e,this.h=n,this.m=this.o=this.j=this.s=this.l=null,this.D=o,this.B=w,this.u=new Map,this.g=new Gg(o,function(){return v0(O)},function(){return y0(O)},function(L,F){return b0(O,L,F)},function(){return E0(O)},function(){return Kg(O)},w),function(L){L.g.init(),L.m=new da;for(var F=i(l0),q=F.next();!q.done;q=F.next())L.m.C(L.i,q.value,function(ue){L.g.sa()||(ue=lu(ue),L.j.dispatchEvent(ue))});for(var $ in Ou)L.m.C(L.h,Ou[$],function(ue){L.g.sa()||L.o.dispatchEvent(ue)});for(var ce in L.l={},F={},L.i)F.Sb=ce,Object.defineProperty(L.l,F.Sb,{configurable:!1,enumerable:!0,get:function(ue){return function(){return oS(L,ue.Sb)}}(F),set:function(ue){return function(Ie){var _e=ue.Sb;L.g.sa()?L.g.set("video",_e,Ie):L.i[_e]=Ie}}(F)}),F={Sb:F.Sb};L.s={},m0(L,function(ue){Object.defineProperty(L.s,ue,{configurable:!1,enumerable:!0,get:function(){return function(Ie,_e){if(Ie.u.has(_e)&&(_e=Ie.u.get(_e)),_e=="addEventListener")return function(Qe,ut,at){return Ie.o.addEventListener(Qe,ut,at)};if(_e=="removeEventListener")return function(Qe,ut,at){return Ie.o.removeEventListener(Qe,ut,at)};if(_e=="getMediaElement")return function(){return Ie.l};if(_e=="getSharedConfiguration")return Ie.g.get("player","getConfiguration");if(_e=="getNetworkingEngine")return function(){return Ie.h.jc()};if(_e=="getDrmEngine")return function(){return Ie.h.m};if(_e=="getAdManager")return function(){return Ie.h.Fe()};if(_e=="setVideoContainer")return function(Qe){return Ie.h.$e(Qe)};if(Ie.g.sa()){if(_e=="getManifest"||_e=="drmInfo")return function(){return z(_e+"() does not work while casting!"),null};if(_e=="attach"||_e=="detach")return function(){return z(_e+"() does not work while casting!"),Promise.resolve()}}return Ie.g.sa()&&Object.keys(Ie.g.g.video).length==0&&(vh[_e]||yh[_e])||!Ie.g.sa()?Ie.h[_e].bind(Ie.h):Ie.g.get("player",_e)}(L,ue)}})}),function(ue){var Ie=new Map;m0(ue,function(_e,Qe){Ie.has(Qe)?(Qe=Ie.get(Qe),_e.length<Qe.length?ue.u.set(_e,Qe):ue.u.set(Qe,_e)):Ie.set(Qe,_e)})}(L),L.j=new wi,L.j.Wc=L.l,L.o=new wi,L.o.Wc=L.s}(this)}function m0(e,n){function o($){return $!="constructor"&&typeof O[$]=="function"&&!L.has($)}var w,O=e.h,L=new Set;for(w in O)o(w)&&(L.add(w),n(w,O[w]));for(e=Object.getPrototypeOf(O),w=Object.getPrototypeOf({});e&&e!=w;){for(var F=i(Object.getOwnPropertyNames(e)),q=F.next();!q.done;q=F.next())o(q=q.value)&&(L.add(q),n(q,O[q]));e=Object.getPrototypeOf(e)}}function Kg(e){var n={video:{},player:{},playerAfterLoad:{},manifest:e.h.Dd(),startTime:null};e.i.pause();for(var o=i(Bg),w=o.next();!w.done;w=o.next())w=w.value,n.video[w]=e.i[w];for(e.i.ended||(n.startTime=e.i.currentTime),w=(o=i(c0)).next();!w.done;w=o.next()){var O=w.value;w=O[1],O=e.h[O[0]](),n.player[w]=O}for(w=(o=i(f0)).next();!w.done;w=o.next())w=(O=w.value)[1],O=e.h[O[0]](),n.playerAfterLoad[w]=O;return n}function v0(e){var n=new si("caststatuschanged");e.dispatchEvent(n)}function y0(e){var n=new si(e.l.paused?"pause":"play");e.j.dispatchEvent(n)}function E0(e){for(var n=i(c0),o=n.next();!o.done;o=n.next()){var w=o.value;o=w[1],w=e.g.get("player",w[0])(),e.h[o](w)}var O=e.g.get("player","getAssetUri")();o=e.g.get("video","ended"),n=Promise.resolve();var L=e.i.autoplay;w=null,o||(w=e.g.get("video","currentTime")),O&&(e.i.autoplay=!1,n=e.h.load(O,w));var F={};for(w=(o=i(Bg)).next();!w.done;w=o.next())w=w.value,F[w]=e.g.get("video",w);n.then(function(){if(e.i){for(var q=i(Bg),$=q.next();!$.done;$=q.next())$=$.value,e.i[$]=F[$];for($=(q=i(f0)).next();!$.done;$=q.next()){var ce=$.value;$=ce[1],ce=e.g.get("player",ce[0])(),e.h[$](ce)}e.i.autoplay=L,O&&e.i.play()}},function(q){q=new si("error",q=new Map().set("detail",q)),e.h.dispatchEvent(q)})}function oS(e,n){if(n=="addEventListener")return function(w,O,L){return e.j.addEventListener(w,O,L)};if(n=="removeEventListener")return function(w,O,L){return e.j.removeEventListener(w,O,L)};if(e.g.sa()&&Object.keys(e.g.g.video).length==0){var o=e.i[n];if(typeof o!="function")return o}return e.g.sa()?e.g.get("video",n):(typeof(n=e.i[n])=="function"&&(n=n.bind(e.i)),n)}function b0(e,n,o){e.g.sa()&&(n=="video"?e.j.dispatchEvent(o):n=="player"&&e.o.dispatchEvent(o))}function oo(e,n,o,w){wi.call(this);var O=this;this.g=e,this.h=n,this.j=new da,this.H={video:e,player:n},this.D=o||function(){},this.J=w||function(L){return L},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.u=!0,this.s=this.l=null,this.G=new ni(function(){qg(O)}),function(L){var F=cast.receiver.CastReceiverManager.getInstance();F.onSenderConnected=function(){return T0(L)},F.onSenderDisconnected=function(){return T0(L)},F.onSystemVolumeChanged=function(){var ce=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();ce&&pu(L,{type:"update",update:{video:{volume:ce.level,muted:ce.muted}}},L.l),pu(L,{type:"event",targetName:"video",event:{type:"volumechange"}},L.l)},L.s=F.getCastMessageBus("urn:x-cast:com.google.cast.media"),L.s.onMessage=function(ce){return function(ue,Ie){var _e=Ug(Ie.data);switch(_e.type){case"PLAY":ue.g.play(),gu(ue);break;case"PAUSE":ue.g.pause(),gu(ue);break;case"SEEK":Ie=_e.currentTime;var Qe=_e.resumeState;Ie!=null&&(ue.g.currentTime=Number(Ie)),Qe&&Qe=="PLAYBACK_START"?(ue.g.play(),gu(ue)):Qe&&Qe=="PLAYBACK_PAUSE"&&(ue.g.pause(),gu(ue));break;case"STOP":ue.h.qe().then(function(){ue.h&&gu(ue)});break;case"GET_STATUS":Yg(ue,Number(_e.requestId));break;case"VOLUME":Ie=(Qe=_e.volume).level,Qe=Qe.muted;var ut=ue.g.volume,at=ue.g.muted;Ie!=null&&(ue.g.volume=Number(Ie)),Qe!=null&&(ue.g.muted=Qe),ut==ue.g.volume&&at==ue.g.muted||gu(ue);break;case"LOAD":ue.m=0,ue.B=!1,ue.u=!1,Ie=_e.media,Qe=_e.currentTime,ut=ue.J(Ie.contentId),at=_e.autoplay||!0,ue.D(Ie.customData),at&&(ue.g.autoplay=!0),ue.h.load(ut,Qe).then(function(){ue.h&&Yg(ue)}).catch(function(Ct){var yt="LOAD_FAILED";Ct.category==7&&Ct.code==7e3&&(yt="LOAD_CANCELLED"),pu(ue,{requestId:Number(_e.requestId),type:yt},ue.s)});break;default:pu(ue,{requestId:Number(_e.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},ue.s)}}(L,ce)},L.l=F.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),L.l.onMessage=function(ce){return function(ue,Ie){var _e=Ug(Ie.data);switch(_e.type){case"init":ue.m=0,ue.B=!1,ue.u=!0,function(yt,Lt,jt){var Zt,sn,Xt,Gt,bn,Tn,Ut,ln,Rn,cn;W(function(Dn){switch(Dn.g){case 1:for(Zt in Lt.player)sn=Lt.player[Zt],yt.h[Zt](sn);return yt.D(jt),Xt=yt.g.autoplay,Lt.manifest?(yt.g.autoplay=!1,p(Dn,5),f(Dn,yt.h.load(Lt.manifest,Lt.startTime),7)):f(Dn,Promise.resolve(),3);case 7:P(Dn,3);break;case 5:return Gt=j(Dn),bn=new Map().set("detail",Gt),Tn=new si("error",bn),yt.h&&yt.h.dispatchEvent(Tn),Dn.return();case 3:if(!yt.h)return Dn.return();for(Ut in Lt.video)ln=Lt.video[Ut],yt.g[Ut]=ln;for(Rn in Lt.playerAfterLoad)cn=Lt.playerAfterLoad[Rn],yt.h[Rn](cn);yt.g.autoplay=Xt,Lt.manifest&&(yt.g.play(),gu(yt)),b(Dn)}})}(ue,_e.initState,_e.appData),qg(ue);break;case"appData":ue.D(_e.appData);break;case"set":var Qe=_e.targetName,ut=_e.property;if(_e=_e.value,Qe=="video"){if(Ie=cast.receiver.CastReceiverManager.getInstance(),ut=="volume"){Ie.setSystemVolumeLevel(_e);break}if(ut=="muted"){Ie.setSystemVolumeMuted(_e);break}}ue.H[Qe][ut]=_e;break;case"call":(Qe=ue.H[_e.targetName])[_e.methodName].apply(Qe,_e.args);break;case"asyncCall":Qe=_e.targetName,ut=_e.methodName,Qe=="player"&&ut=="load"&&(ue.m=0,ue.B=!1);var at=_e.id,Ct=Ie.senderId;_e=(Ie=ue.H[Qe])[ut].apply(Ie,_e.args),Qe=="player"&&ut=="load"&&(_e=_e.then(function(){ue.u=!0})),_e.then(function(){return A0(ue,Ct,at,null)},function(yt){return A0(ue,Ct,at,yt)})}}(L,ce)},F.start();for(var q=(F=i(l0)).next();!q.done;q=F.next())L.j.C(L.g,q.value,function(ce){return _0(L,"video",ce)});for(var $ in Ou)L.j.C(L.h,Ou[$],function(ce){return _0(L,"player",ce)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?L.h.je(3840,2160):L.h.je(1920,1080),L.j.C(L.g,"loadeddata",function(){L.B=!0}),L.j.C(L.h,"loading",function(){L.o=!1,bc(L)}),L.j.C(L.g,"playing",function(){L.o=!1,bc(L)}),L.j.C(L.g,"pause",function(){bc(L)}),L.j.C(L.h,"unloading",function(){L.o=!0,bc(L)}),L.j.C(L.g,"ended",function(){new ni(function(){L.g&&L.g.ended&&(L.o=!0,bc(L))}).N(uS)})}(this)}function T0(e){e.m=0,e.u=!0,e.F=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,bc(e)}function bc(e){var n;W(function(o){return o.g==1?f(o,Promise.resolve(),2):e.h?(n=new si("caststatuschanged"),e.dispatchEvent(n),S0(e)||gu(e),void b(o)):o.return()})}function _0(e,n,o){e.h&&(qg(e),pu(e,{type:"event",targetName:n,event:o},e.l))}function qg(e){e.G.N(sS);for(var n={video:{},player:{}},o=i(tS),w=o.next();!w.done;w=o.next())w=w.value,n.video[w]=e.g[w];if(e.h.T())for(var O in jg)e.m%jg[O]==0&&(n.player[O]=e.h[O]());for(var L in vh)e.m%vh[L]==0&&(n.player[L]=e.h[L]());for(var F in(o=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(n.video.volume=o.level,n.video.muted=o.muted),pu(e,{type:"update",update:n},e.l),yh)e.m%yh[F]==0&&((n={player:{}}).player[F]=e.h[F](),pu(e,{type:"update",update:n},e.l));e.B&&(e.m+=1),S0(e)}function S0(e){return!(!e.u||!e.g.duration&&!e.h.T()||(Yg(e),e.u=!1,0))}function Yg(e,n){var o={contentId:e.h.Dd(),streamType:e.h.T()?"LIVE":"BUFFERED",contentType:""};e.h.T()||(o.duration=e.g.duration),e.i&&(o.metadata=e.i),gu(e,n===void 0?0:n,o)}function A0(e,n,o,w){e.h&&pu(e,{type:"asyncComplete",id:o,error:w},e.l,n)}function pu(e,n,o,w){e.F&&(e=u0(n),w?o.getCastChannel(w).send(e):o.broadcast(e))}function gu(e,n,o){o=o===void 0?null:o;var w={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?lS:e.h.Fd()?fS:e.g.paused?dS:cS,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};o&&(w.media=o),pu(e,{requestId:n===void 0?0:n,type:"MEDIA_STATUS",status:[w]},e.s)}S(Na,wi),(E=Na.prototype).destroy=function(e){return e&&this.g.Ab(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,wi.prototype.release.call(this),Promise.all(e)},E.Wf=function(){return this.l},E.Nf=function(){return this.s},E.nf=function(){return this.g.m&&Eh},E.sa=function(){return this.g.sa()},E.$d=function(){return this.g.$d()},E.cast=function(){var e,n=this;return W(function(o){return o.g==1?(e=Kg(n),f(o,n.g.cast(e),2)):n.h?f(o,n.h.qe(),0):o.return()})},E.he=function(e){this.g.he(e)},E.zg=function(){(function(e){if(e.h){var n=e.J();chrome.cast.requestSession(function(o){return Hg(e,n,o)},function(o){return d0(e,o)})}})(this.g)},E.Ab=function(){this.g.Ab()},E.qf=function(e,n){n=n!==void 0&&n;var o=this;return W(function(w){if(w.g==1)return e==o.D&&n==o.B?w.return():(o.D=e,o.B=n,o.g.Ab(),f(w,o.g.destroy(),2));o.g=null,o.g=new Gg(e,function(){return v0(o)},function(){return y0(o)},function(O,L){return b0(o,O,L)},function(){return E0(o)},function(){return Kg(o)},n),o.g.init(),b(w)})},Q("shaka.cast.CastProxy",Na),Na.prototype.changeReceiverId=Na.prototype.qf,Na.prototype.forceDisconnect=Na.prototype.Ab,Na.prototype.suggestDisconnect=Na.prototype.zg,Na.prototype.setAppData=Na.prototype.he,Na.prototype.cast=Na.prototype.cast,Na.prototype.receiverName=Na.prototype.$d,Na.prototype.isCasting=Na.prototype.sa,Na.prototype.canCast=Na.prototype.nf,Na.prototype.getPlayer=Na.prototype.Nf,Na.prototype.getVideo=Na.prototype.Wf,Na.prototype.destroy=Na.prototype.destroy,S(oo,wi),(E=oo.prototype).isConnected=function(){return this.F},E.$f=function(){return this.o},E.wg=function(e){this.i=e},E.uf=function(){this.i=null},E.xg=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},E.vg=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},E.ug=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},E.destroy=function(){var e,n=this;return W(function(o){if(o.g==1)return n.j&&(n.j.release(),n.j=null),e=[],n.h&&(e.push(n.h.destroy()),n.h=null),n.G&&(n.G.stop(),n.G=null),n.g=null,n.H=null,n.D=null,n.F=!1,n.o=!0,n.l=null,n.s=null,wi.prototype.release.call(n),f(o,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),b(o)})},Q("shaka.cast.CastReceiver",oo),oo.prototype.destroy=oo.prototype.destroy,oo.prototype.setContentArtist=oo.prototype.ug,oo.prototype.setContentImage=oo.prototype.vg,oo.prototype.setContentTitle=oo.prototype.xg,oo.prototype.clearContentMetadata=oo.prototype.uf,oo.prototype.setContentMetadata=oo.prototype.wg,oo.prototype.isIdle=oo.prototype.$f,oo.prototype.isConnected=oo.prototype.isConnected;var sS=.5,uS=5,lS="IDLE",cS="PLAYING",fS="BUFFERING",dS="PAUSED";function w0(e,n,o){var w=function(q){for(var $=[],ce=(q=i(q)).next();!ce.done;ce=q.next())(ce=hS(ce.value))&&$.push(ce);return $}(e),O=null;e=[];var L=[],F=new Set(w.map(function(q){return q.keyId}));if(F.delete(null),1<F.size)throw new ht(2,4,4010);if(n||(L=w.filter(function(q){return q.ee!="urn:mpeg:dash:mp4protection:2011"||(O=q.init||O,!1)})).length&&(e=function(q,$,ce,ue){for(var Ie=[],_e=($=i($)).next();!_e.done;_e=$.next()){var Qe=ce[(_e=_e.value).ee];if(Qe){var ut;if(ut=Jl(_e.node,"urn:microsoft:playready","pro")){ut=Dr(ut.textContent);var at=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);ut=[{initData:nf(ut,at,new Set,0),initDataType:"cenc",keyId:_e.keyId}]}else ut=null;if(at=null,_e.ee==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if((at=ue).size==0)at=null;else{var Ct=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);at=[{initData:nf(new Uint8Array([]),Ct,at,1),initDataType:"cenc",keyId:_e.keyId}]}ut=Za(Qe,_e.init||q||ut||at),(Qe=gS.get(Qe))&&(ut.licenseServerUri=Qe(_e)),Ie.push(ut)}}return Ie}(O,L,o,F),e.length==0&&(e=[Za("",O)])),w.length&&(n||!L.length))for(e=[],o=(n=i(Object.values(o))).next();!o.done;o=n.next())(o=o.value)!="org.w3.clearkey"&&e.push(Za(o,O));if(F=Array.from(F)[0]||null)for(o=(n=i(e)).next();!o.done;o=n.next())for(w=(o=i(o.value.initData)).next();!w.done;w=o.next())w.value.keyId=F;return{Ae:F,uh:O,drmInfos:e,Ee:!0}}function Th(e){return(e=Jl(e.node,"urn:microsoft:playready","pro"))&&(e=function(n){var o=0,w=Wt(n),O=w.getUint32(o,!0);if(O!=n.byteLength)return[];e:{for(n=o+6,o=[];n<w.byteLength-1;){O=w.getUint16(n,!0),n+=2;var L=w.getUint16(n,!0);if(n+=2,(1&L)!=0||L+n>w.byteLength){w=[];break e}var F=Vt(w,n,L);o.push({type:O,value:F}),n+=L}w=o}return w}(e=Dr(e.textContent)).filter(function(n){return n.type===pS})[0])&&(e=El(e=Bt(e.value,!0),"WRMHEADER"))?function(n){for(var o=(n=i(n.getElementsByTagName("DATA"))).next();!o.done;o=n.next())for(var w=(o=i(o.value.childNodes)).next();!w.done;w=o.next())if((w=w.value)instanceof Element&&w.tagName=="LA_URL")return w.textContent;return""}(e):""}function hS(e){var n=e.getAttribute("schemeIdUri"),o=Zs(e,"urn:mpeg:cenc:2013","default_KID"),w=rf(e,"urn:mpeg:cenc:2013","pssh").map(vl);if(!n)return null;if(n=n.toLowerCase(),o&&(o=o.replace(/-/g,"").toLowerCase()).includes(" "))throw new ht(2,4,4009);var O=[];try{O=w.map(function(L){return{initDataType:"cenc",initData:Dr(L),keyId:null}})}catch{throw new ht(2,4,4007)}return{node:e,ee:n,keyId:o,init:0<O.length?O:null}}var pS=1,gS=new Map().set("com.widevine.alpha",function(e){return(e=Jl(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",Th).set("com.microsoft.playready.recommendation",Th).set("com.microsoft.playready.software",Th).set("com.microsoft.playready.hardware",Th).set("org.w3.clearkey",function(e){return(e=Jl(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.getAttribute("Lic_type")==="EME-1.0"&&e.textContent?e.textContent:""});function _h(e,n,o,w,O){var L={RepresentationID:n,Number:o,Bandwidth:w,Time:O};return e.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(F,q,$,ce){if(F=="$$")return"$";var ue=L[q];if(ue==null)return F;switch(q=="RepresentationID"&&$&&($=void 0),q=="Time"&&(ue=Math.round(ue)),ce){case void 0:case"d":case"i":case"u":F=ue.toString();break;case"o":F=ue.toString(8);break;case"x":F=ue.toString(16);break;case"X":F=ue.toString(16).toUpperCase();break;default:F=ue.toString()}return $=C.parseInt($,10)||1,Array(Math.max(0,$-F.length)+1).join("0")+F})}function I0(e,n){var o=qs(e,n,"timescale"),w=1;o&&(w=ec(o)||1);var O=qs(e,n,"duration");o=ec(O||""),e.I.contentType=="image"&&(o=Nu(O||"")),o&&(o/=w);var L=qs(e,n,"startNumber");O=Number(qs(e,n,"presentationTimeOffset"))||0;var F=Yo(L||"");if(L!=null&&F!=null||(F=1),L=Sh(e,n,"SegmentTimeline"),n=null,L){n=w,e=e.U.duration||1/0,L=_a(L,"S");for(var q=[],$=-O,ce=0;ce<L.length;++ce){var ue=L[ce],Ie=L[ce+1],_e=ha(ue,"t",Yo),Qe=ha(ue,"d",Yo);if(ue=ha(ue,"r",Ld),_e!=null&&(_e-=O),!Qe)break;if(_e=_e??$,0>(ue=ue||0))if(Ie){if((Ie=ha(Ie,"t",Yo))==null||_e>=Ie)break;ue=Math.ceil((Ie-_e)/Qe)-1}else{if(e==1/0||_e/n>=e)break;ue=Math.ceil((e*n-_e)/Qe)-1}for(0<q.length&&_e!=$&&(q[q.length-1].end=_e/n),Ie=0;Ie<=ue;++Ie)$=_e+Qe,q.push({start:_e/n,end:$/n,Dg:_e}),_e=$}n=q}return{timescale:w,ha:o,Lb:F,Ra:O/w||0,re:O,timeline:n}}function qs(e,n,o){return[n(e.I),n(e.ea),n(e.$)].filter(_i).map(function(w){return w.getAttribute(o)}).reduce(function(w,O){return w||O})}function Sh(e,n,o){return[n(e.I),n(e.ea),n(e.$)].filter(_i).map(function(w){return ml(w,o)}).reduce(function(w,O){return w||O})}function Ah(e,n,o,w,O,L){if(L=L===void 0?0:L,Zs(e,"http://www.w3.org/1999/xlink","href")){var F=function(ce,ue,Ie,_e,Qe,ut){for(var at=Zs(ce,"http://www.w3.org/1999/xlink","href"),Ct=Zs(ce,"http://www.w3.org/1999/xlink","actuate")||"onRequest",yt=i(Array.from(ce.attributes)),Lt=yt.next();!Lt.done;Lt=yt.next())(Lt=Lt.value).namespaceURI=="http://www.w3.org/1999/xlink"&&ce.removeAttributeNS(Lt.namespaceURI,Lt.localName);if(5<=ut)return vs(new ht(2,4,4028));if(Ct!="onLoad")return vs(new ht(2,4,4027));var jt=ki([_e],[at]);return Qe.request(0,xo(jt,ue)).Y(function(Zt){if(!(Zt=of(Zt.data,ce.tagName)))return vs(new ht(2,4,4001,at));for(;ce.childNodes.length;)ce.removeChild(ce.childNodes[0]);for(;Zt.childNodes.length;){var sn=Zt.childNodes[0];Zt.removeChild(sn),ce.appendChild(sn)}for(sn=(Zt=i(Array.from(Zt.attributes))).next();!sn.done;sn=Zt.next())ce.setAttributeNode(sn.value.cloneNode(!1));return Ah(ce,ue,Ie,jt[0],Qe,ut+1)})}(e,n,o,w,O,L);return o&&(F=F.Y(void 0,function(){return Ah(e,n,o,w,O,L)})),F}F=[];for(var q=i(Array.from(e.childNodes)),$=q.next();!$.done;$=q.next())($=$.value)instanceof Element&&(Zs($,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.removeChild($):$.tagName!="SegmentTimeline"&&F.push(Ah($,n,o,w,O,L)));return wd(F).Y(function(){return e})}function Vu(e){this.h=Wt(e),this.g=new Vi(this.h,0)}function mu(e){var n=R0(e);if(7<n.length)throw new ht(2,3,3002);for(var o=0,w=(n=i(n)).next();!w.done;w=n.next())o=256*o+w.value;n=R0(e);e:{for(var O=(w=i(mS)).next();!O.done;O=w.next())if(pt(n,new Uint8Array(O.value))){w=!0;break e}w=!1}if(w)n=e.h.byteLength-e.g.Z();else{if(n.length==8&&224&n[1])throw new ht(2,3,3001);for(O=w=0;O<n.length;O++){var L=n[O];w=O==0?L&(1<<8-n.length)-1:256*w+L}n=w}return n=e.g.Z()+n<=e.h.byteLength?n:e.h.byteLength-e.g.Z(),w=Wt(e.h,e.g.Z(),n),e.g.skip(n),new vS(o,w)}function R0(e){var n=e.g.Z(),o=e.g.Qa();if(o==0)throw new ht(2,3,3002);return o=8-Math.floor(Math.log2(o)),e.g.skip(o-1),Vt(e.h,n,o)}Vu.prototype.ga=function(){return this.g.ga()};var mS=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function vS(e,n){this.id=e,this.g=n}function zg(e){if(8<e.g.byteLength)throw new ht(2,3,3002);if(e.g.byteLength==8&&224&e.g.getUint8(0))throw new ht(2,3,3001);for(var n=0,o=0;o<e.g.byteLength;o++)n=256*n+e.g.getUint8(o);return n}function yS(e){var n=new Vu(e.g);if((e=mu(n)).id!=179)throw new ht(2,3,3013);if(e=zg(e),(n=mu(n)).id!=183)throw new ht(2,3,3012);n=new Vu(n.g);for(var o=0;n.ga();){var w=mu(n);if(w.id==241){o=zg(w);break}}return{Eg:e,ng:o}}function C0(e,n){if(!(n=Sh(e,n,"Initialization")))return null;var o=e.I.wa,w=n.getAttribute("sourceURL");w&&(o=ki(e.I.wa,[w])),w=0;var O=null;return(n=ha(n,"range",yl))&&(w=n.start,O=n.end),new Cn(function(){return o},w,O,P0(e))}function k0(e,n,o,w,O,L,F){var q,$,ce,ue,Ie,_e,Qe,ut,at,Ct,yt,Lt,jt,Zt,sn;return W(function(Xt){if(Xt.g==1)return q=e.presentationTimeline,$=!e.Va||!e.U.Le,ce=e.U.start,ue=e.U.duration,Ie=e.I.mimeType.split("/")[1],Qe=null,ut=[(_e=n)(w,O,L),Ie=="webm"?_e(o.ya(),o.Ba,o.ka):null],_e=null,f(Xt,Promise.all(ut),2);if(at=Xt.h,Ct=at[0],yt=at[1]||null,jt=ce-F,Zt=ce,sn=ue?ce+ue:1/0,Ie=="mp4")var Gt=function(Rn,cn,Dn,Jn,Fn,An,Hn){var Gn,rr=new ra().P("sidx",function(br){Gn=function(dr,cr,Qn,Kn,Vn,tr,qn){var Er=[];qn.reader.skip(4);var hr=qn.reader.K();if(hr==0)throw new ht(2,3,3005);if(qn.version==0)var Ur=qn.reader.K(),Wr=qn.reader.K();else Ur=qn.reader.$a(),Wr=qn.reader.$a();qn.reader.skip(2);var ua=qn.reader.Zd();for(dr=dr+qn.size+Wr,Wr=0;Wr<ua;Wr++){var Di=qn.reader.K(),Ki=(2147483648&Di)>>>31;Di&=2147483647;var Qi=qn.reader.K();if(qn.reader.skip(4),Ki==1)throw new ht(2,3,3006);Er.push(new mn(Ur/hr+Qn,(Ur+Qi)/hr+Qn,function(){return tr},dr,dr+Di-1,cr,Qn,Kn,Vn)),Ur+=Qi,dr+=Di}return qn.parser.stop(),Er}(cn,Jn,Fn,An,Hn,Dn,br)});if(Rn&&rr.parse(Rn),Gn)return Gn;throw new ht(2,3,3004)}(Ct,O,w,o,jt,Zt,sn);else{if(mu(Gt=new Vu(yt)).id!=440786851)throw new ht(2,3,3008);var bn=mu(Gt);if(bn.id!=408125543)throw new ht(2,3,3009);Gt=bn.g.byteOffset,bn=new Vu(bn.g);for(var Tn=null;bn.ga();){var Ut=mu(bn);if(Ut.id==357149030){Tn=Ut;break}}if(!Tn)throw new ht(2,3,3010);for(Tn=new Vu(Tn.g),Ut=1e6,bn=null;Tn.ga();){var ln=mu(Tn);if(ln.id==2807729)Ut=zg(ln);else if(ln.id==17545)if(ln.g.byteLength==4)bn=ln.g.getFloat32(0);else{if(ln.g.byteLength!=8)throw new ht(2,3,3003);bn=ln.g.getFloat64(0)}}if(bn==null)throw new ht(2,3,3011);if(bn*=Tn=Ut/1e9,(Ut=mu(new Vu(Ct))).id!=475249515)throw new ht(2,3,3007);Gt=function(Rn,cn,Dn,Jn,Fn,An,Hn,Gn,rr){function br(){return Fn}var dr=[];Rn=new Vu(Rn.g);for(var cr=null,Qn=null;Rn.ga();){var Kn=mu(Rn);if(Kn.id==187){var Vn=yS(Kn);Vn&&(Kn=Dn*Vn.Eg,Vn=cn+Vn.ng,cr!=null&&dr.push(new mn(cr+Hn,Kn+Hn,br,Qn,Vn-1,An,Hn,Gn,rr)),cr=Kn,Qn=Vn)}}return cr!=null&&dr.push(new mn(cr+Hn,Jn+Hn,br,Qn,null,An,Hn,Gn,rr)),dr}(Ut,Gt,Tn,bn,w,o,jt,Zt,sn)}return Lt=Gt,q.Ib(Lt),Qe=new er(Lt),$&&Qe.Wa(Zt,sn,!0),Xt.return(Qe)})}function Tc(e){return e.wc}function O0(e){var n=Sh(e,Tc,"RepresentationIndex");return e=yl((e=qs(e,Tc,"indexRange"))||""),n&&(e=ha(n,"range",yl,e)),e}function D0(e,n){var o=e.I.mimeType.split("/")[1];if(e.I.contentType!=Tr&&o!="mp4"&&o!="webm")throw new ht(2,4,4006);if(o=="webm"&&!n)throw new ht(2,4,4005)}function P0(e){var n=e.I;return{bandwidth:e.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate||null,height:n.height||null,mimeType:n.mimeType,channelsCount:n.ad,pixelAspectRatio:n.pixelAspectRatio||null,width:n.width||null}}function N0(e){return e.ab}function wh(e){return e.xc}function x0(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.m=new Set}function L0(e){var n,o,w,O,L,F,q,$,ce,ue,Ie,_e,Qe,ut,at,Ct,yt,Lt,jt,Zt,sn,Xt,Gt,bn;return W(function(Tn){switch(Tn.g){case 1:if(n=ji,e.length==1)return Tn.return(e[0]);for(o=e.map(function(Ut){return Ut.filter(function(ln){return ln.type==n.Hc})}),w=e.map(function(Ut){return Ut.filter(function(ln){return ln.type==n.va})}),O=e.map(function(Ut){return Ut.filter(function(ln){return ln.type==n.X})}),L=e.map(function(Ut){return Ut.filter(function(ln){return ln.type==n.Wb})}),F=i(O),q=F.next();!q.done;q=F.next())q.value.push(j0(n.X));for($=i(L),ce=$.next();!ce.done;ce=$.next())ce.value.push(j0(n.Wb));return f(Tn,Zu([],o,0,Ih,Rh),2);case 2:return ue=Tn.h,f(Tn,Zu([],w,0,Ih,Rh),3);case 3:return Ie=Tn.h,f(Tn,Zu([],O,0,Ih,Rh),4);case 4:return _e=Tn.h,f(Tn,Zu([],L,0,Ih,Rh),5);case 5:if(Qe=Tn.h,ut=0,Ie.length&&ue.length)for(Lt=i(ue),jt=Lt.next();!jt.done;jt=Lt.next())for(Zt=jt.value,sn=i(Ie),Xt=sn.next();!Xt.done;Xt=sn.next())Gt=Xt.value,bn=ut++,Gt.variantIds.push(bn),Zt.variantIds.push(bn);else for(at=Ie.concat(ue),Ct=i(at),yt=Ct.next();!yt.done;yt=Ct.next())yt.value.variantIds=[ut++];return Tn.return(Ie.concat(ue).concat(_e).concat(Qe))}})}function Zu(e,n,o,w,O){var L,F,q,$,ce,ue,Ie,_e,Qe,ut,at,Ct,yt,Lt,jt,Zt,sn,Xt;return W(function(Gt){switch(Gt.g){case 1:for(L=ji,F=[],q=0;q<n.length;q++)q>=o?F.push(new Set(n[q])):F.push(new Set);$=i(e),ce=$.next();case 2:if(ce.done){Gt.A(4);break}return f(Gt,function(bn,Tn,Ut,ln,Rn){return W(function(cn){return cn.g==1?(U0(Tn,bn),bn.matchedStreams?bn.segmentIndex?f(cn,M0(bn,Ut),2):cn.A(2):cn.return(!1)):(F0(bn,Ut,ln,Rn),cn.return(!0))})}(ce.value,n,o,O,F),5);case 5:if(!Gt.h)throw new ht(2,4,4037);ce=$.next(),Gt.A(2);break;case 4:for(ue=i(F),Ie=ue.next();!Ie.done;Ie=ue.next())for(_e=Ie.value,Qe=i(_e),ut=Qe.next();!ut.done;ut=Qe.next())at=ut.value,(Ct=ES(at,n,w,O,F))&&e.push(Ct);for(yt=i(F),Ie=yt.next();!Ie.done;Ie=yt.next())for(Lt=Ie.value,jt={},Zt=i(Lt),ut=Zt.next();!ut.done;jt={Ua:jt.Ua},ut=Zt.next())if(jt.Ua=ut.value,sn=jt.Ua.type==L.X&&!jt.Ua.language,Xt=jt.Ua.type==L.Wb&&!jt.Ua.tilesLayout,!sn&&!Xt&&e.some(function(bn){return function(Tn){return Tn.mimeType==bn.Ua.mimeType&&Ta(Tn.codecs)==Ta(bn.Ua.codecs)}}(jt)))throw new ht(2,4,4037);return Gt.return(e)}})}function M0(e,n){var o,w,O,L,F,q,$;return W(function(ce){if(ce.g==1){for(o=[],w=e.matchedStreams,O=i(w),L=O.next();!L.done;L=O.next())F=L.value,o.push(F.createSegmentIndex()),F.trickModeVideo&&!F.trickModeVideo.segmentIndex&&o.push(F.trickModeVideo.createSegmentIndex());return f(ce,Promise.all(o),2)}if(e.segmentIndex instanceof Sa)for(q=0;q<w.length;q++)($=w[q]).segmentIndex&&q>=n&&e.segmentIndex.l.push($.segmentIndex);b(ce)})}function ES(e,n,o,w,O){var L=o(e);return U0(n,L),L.createSegmentIndex&&(L.createSegmentIndex=function(){return W(function(F){return L.segmentIndex?F.A(0):(L.segmentIndex=new Sa,f(F,M0(L,0),0))})}),L.matchedStreams?(F0(L,0,w,O),L):null}function F0(e,n,o,w){for(var O=e.matchedStreams,L=0;L<O.length;L++)if(L>=n){var F=O[L];o(e,F);var q=!0;e.type=="audio"&&Xi(e.language,F.language)==0&&(q=!1),q&&w[L].delete(F)}}function kf(e){var n=Object.assign({},e);return n.originalId=null,n.createSegmentIndex=function(){return Promise.resolve()},n.closeSegmentIndex=function(){if(n.segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null),n.matchedStreams)for(var o=i(n.matchedStreams),w=o.next();!w.done;w=o.next())(w=w.value).segmentIndex&&(w.segmentIndex.release(),w.segmentIndex=null)},n.segmentIndex=null,n.emsgSchemeIdUris=[],n.keyIds=new Set,n.closedCaptions=null,n.trickModeVideo=null,n}function Ih(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function _c(e,n){var o,w;e.roles=Array.from(new Set(e.roles.concat(n.roles))),n.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(n.emsgSchemeIdUris)))),e.keyIds=(o=e.keyIds,w=n.keyIds,new Set([].concat(g(o),g(w)))),e.originalId==null?e.originalId=n.originalId:e.originalId+=","+(n.originalId||"");var O=nc(e.drmInfos,n.drmInfos);if(n.drmInfos.length&&e.drmInfos.length&&!O.length)throw new ht(2,4,4038);if(e.drmInfos=O,e.encrypted=e.encrypted||n.encrypted,n.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var L=(O=i(n.closedCaptions)).next();!L.done;L=O.next()){var F=i(L.value);L=F.next().value,F=F.next().value,e.closedCaptions.set(L,F)}}n.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=kf(n.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),_c(e.trickModeVideo,n.trickModeVideo)):e.trickModeVideo&&_c(e.trickModeVideo,n)}function Rh(e,n){e.roles=Array.from(new Set(e.roles.concat(n.roles)));var o=n.keyIds;if(o=new Set([].concat(g(e.keyIds),g(o))),e.keyIds=o,e.encrypted=e.encrypted&&n.encrypted,e.segments.push.apply(e.segments,g(n.segments)),n.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),o=(n=i(n.closedCaptions)).next();!o.done;o=n.next()){var w=i(o.value);o=w.next().value,w=w.next().value,e.closedCaptions.set(o,w)}}function U0(e,n){for(var o=[],w=(e=i(e)).next();!w.done;w=e.next()){for(var O=n,L={audio:B0,video:B0,text:bS,image:TS}[O.type],F={audio:_S,video:SS,text:AS,image:wS}[O.type],q=null,$=(w=i(w.value)).next();!$.done;$=w.next())!L(O,$=$.value)||q&&!F(O,q,$)||(q=$);if(!(O=q))return;o.push(O)}n.matchedStreams=o}function B0(e,n){var o;return!(o=n.mimeType!=e.mimeType||Ta(n.codecs)!=Ta(e.codecs))&&(o=e.drmInfos)&&(e=e.drmInfos,n=n.drmInfos,o=!(!e.length||!n.length||0<nc(e,n).length)),!o}function bS(e,n){return!!e.language&&(!n.language||Xi(e.language,n.language)!=0&&n.kind==e.kind)}function TS(e){return!!e.tilesLayout}function _S(e,n,o){if(e.id==o.id)return!0;var w=Xi(e.language,n.language),O=Xi(e.language,o.language);return O>w||!(O<w)&&(e.roles.length?(w=n.roles.filter(function(L){return e.roles.includes(L)}),(O=o.roles.filter(function(L){return e.roles.includes(L)})).length>w.length||!(O.length<w.length)&&o.roles.length<n.roles.length):!((o.roles.length||!n.roles.length)&&(o.roles.length&&!n.roles.length||(n.primary||!o.primary)&&(n.primary&&!o.primary||(w=Of(e.channelsCount,n.channelsCount,o.channelsCount))!=Is&&(w==vu||(w=Of(e.audioSamplingRate,n.audioSamplingRate,o.audioSamplingRate))!=Is&&(w==vu||!e.bandwidth||H0(e.bandwidth,n.bandwidth,o.bandwidth)!=Is))))))}function SS(e,n,o){if(e.id==o.id)return!0;var w=Of(e.width*e.height,n.width*n.height,o.width*o.height);if(w==Is)return!0;if(w==vu)return!1;if(e.frameRate){if((w=Of(e.frameRate,n.frameRate,o.frameRate))==Is)return!0;if(w==vu)return!1}return!(!e.bandwidth||H0(e.bandwidth,n.bandwidth,o.bandwidth)!=Is)}function AS(e,n,o){if(e.id==o.id)return!0;var w=Xi(e.language,n.language),O=Xi(e.language,o.language);if(O>w)return!0;if(O<w)return!1;if(!n.primary&&o.primary)return!0;if(n.primary&&!o.primary)return!1;if(e.roles.length){if(w=n.roles.filter(function(L){return e.roles.includes(L)}),(O=o.roles.filter(function(L){return e.roles.includes(L)})).length>w.length)return!0;if(O.length<w.length)return!1}else{if(!o.roles.length&&n.roles.length)return!0;if(o.roles.length&&!n.roles.length)return!1}return o.mimeType==e.mimeType&&o.codecs==e.codecs&&(n.mimeType!=e.mimeType||n.codecs!=e.codecs)}function wS(e,n,o){return e.id==o.id||Of(e.width*e.height,n.width*n.height,o.width*o.height)==Is}function j0(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function G0(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new er([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function Of(e,n,o){if(n==e&&e!=o)return vu;if(o==e&&e!=n)return Is;if(n>e){if(o<=e||o-e<n-e)return Is;if(o-e>n-e)return vu}else{if(o>e)return vu;if(e-o<e-n)return Is;if(e-o>e-n)return vu}return V0}function H0(e,n,o){return n=Math.abs(e-n),(e=Math.abs(e-o))<n?Is:n<e?vu:V0}x0.prototype.release=function(){for(var e=i(this.g.concat(this.h,this.j,this.i)),n=e.next();!n.done;n=e.next())(n=n.value).segmentIndex&&n.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};var Is=1,V0=0,vu=-1;function Df(){var e=this;this.h=this.g=null,this.m=[],this.i=null,this.G=1,this.l={},this.L={},this.j=new x0,this.F=0,this.H=new J(5),this.D=new ni(function(){(function(n){var o,w;W(function(O){switch(O.g){case 1:return o=0,p(O,2),f(O,Wg(n),4);case 4:o=O.h,P(O,3);break;case 2:w=j(O),n.h&&(w.severity=1,n.h.onError(w));case 3:if(!n.h)return O.return();K0(n,o),b(O)}})})(e)}),this.o=new Du,this.s=null,this.J=[],this.u=1/0,this.B=!1}function Wg(e){var n,o,w,O,L,F,q;return W(function($){return $.g==1?(n=xo(e.m,e.g.retryParameters),o=e.h.networkingEngine,e.h.modifyManifestRequest(n,{format:"d"}),w=Date.now(),O=o.request(0,n),Hs(e.o,O),f($,O.promise,2)):$.g!=3?(L=$.h,e.h?(L.uri&&!e.m.includes(L.uri)&&e.m.unshift(L.uri),f($,function(ce,ue,Ie){var _e,Qe,ut,at;return W(function(Ct){if(Ct.g==1){if(!(_e=of(ue,"MPD")))throw new ht(2,4,4001,Ie);return ce.g.dash.disableXlinkProcessing?Ct.return(Z0(ce,_e,Ie)):(Qe=ce.g.dash.xlinkFailGracefully,ut=Ah(_e,ce.g.retryParameters,Qe,Ie,ce.h.networkingEngine),Hs(ce.o,ut),f(Ct,ut.promise,2))}return at=Ct.h,Ct.return(Z0(ce,at,Ie))})}(e,L.data,L.uri),3)):$.return(0)):(F=Date.now(),q=(F-w)/1e3,e.H.sample(1,q),$.return(q))})}function Z0(e,n,o){var w,O,L,F,q,$,ce,ue,Ie,_e,Qe,ut,at,Ct,yt,Lt,jt,Zt,sn,Xt,Gt,bn,Tn,Ut,ln,Rn,cn,Dn,Jn;return W(function(Fn){switch(Fn.g){case 1:if((w=e.g.dash.manifestPreprocessor)&&w(n),O=[o],0<(L=_a(n,"Location").map(vl).filter(_i)).length&&(F=ki(O,L),O=e.m=F),q=_a(n,"BaseURL"),$=q.map(vl),ce=ki(O,$),ue=0,q&&q.length&&(ue=ha(q[0],"availabilityTimeOffset",Nu)||0),Ie=e.g.dash.ignoreMinBufferTime,_e=0,Ie||(_e=ha(n,"minBufferTime",_s)||0),e.F=ha(n,"minimumUpdatePeriod",_s,-1),Qe=ha(n,"availabilityStartTime",xd),ut=ha(n,"timeShiftBufferDepth",_s),at=e.g.dash.ignoreSuggestedPresentationDelay,Ct=null,at||(Ct=ha(n,"suggestedPresentationDelay",_s)),yt=e.g.dash.ignoreMaxSegmentDuration,Lt=null,yt||(Lt=ha(n,"maxSegmentDuration",_s)),jt=n.getAttribute("type")||"static",e.i)for(Zt=e.i.presentationTimeline,sn=i(Object.values(e.l)),Xt=sn.next();!Xt.done;Xt=sn.next())(Gt=Xt.value).segmentIndex&&Gt.segmentIndex.eb(Zt.Oa());else bn=e.g.defaultPresentationDelay||1.5*_e,Zt=new Gr(Qe,Ct??bn,e.g.dash.autoCorrectDrift);return Zt.yc(jt=="static"),Zt.T()&&!isNaN(e.g.availabilityWindowOverride)&&(ut=e.g.availabilityWindowOverride),ut==null&&(ut=1/0),Zt.le(ut),Tn=n.getAttribute("profiles")||"",Ut={Va:jt!="static",presentationTimeline:Zt,$:null,U:null,ea:null,I:null,bandwidth:0,Je:!1,zb:ue,profiles:Tn.split(",")},ln=function(An,Hn,Gn,rr){var br=ha(rr,"mediaPresentationDuration",_s),dr=[],cr=0;rr=_a(rr,"Period");for(var Qn=0;Qn<rr.length;Qn++){var Kn=rr[Qn],Vn=rr[Qn+1],tr=ha(Kn,"start",_s,cr),qn=Kn.id,Er=ha(Kn,"duration",_s),hr=null;if(Vn){var Ur=ha(Vn,"start",_s);Ur!=null&&(hr=Ur-tr)}else br!=null&&(hr=br-tr);if(hr==null&&(hr=Er),!(An.s!==null&&qn!==null&&tr!==null&&tr<An.s)||An.J.includes(qn)||Qn+1==rr.length){if(tr!==null&&(An.s===null||tr>An.s)&&(An.s=tr),cr=IS(An,Hn,Gn,{start:tr,duration:hr,node:Kn,Le:hr==null||!Vn}),dr.push(cr),Hn.$.id&&hr&&(An.L[Hn.$.id]=hr),hr==null){cr=null;break}cr=tr+hr}}return An.J=dr.map(function(Wr){return Wr.id}),br!=null?{periods:dr,duration:br,Ce:!1}:{periods:dr,duration:cr,Ce:!0}}(e,Ut,ce,n),Rn=ln.duration,cn=ln.periods,jt!="static"&&ln.Ce||Zt.Aa(Rn||1/0),e.u&&!e.B&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.B=e.h.isLowLatencyMode()),e.B?Zt.Ue(e.u):e.u&&z("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),Zt.Rd(Lt||1),f(Fn,function(An,Hn,Gn){var rr,br,dr,cr,Qn,Kn,Vn,tr,qn,Er,hr,Ur,Wr,ua,Di,Ki,Qi,Ii,xr,ti,Kr,xn,kr,li,Pr,ii,Ti,$i;return W(function(oi){switch(oi.g){case 1:if(rr=ji,function(Vr){for(var Qr=(Vr=i(Vr)).next();!Qr.done;Qr=Vr.next()){for(var ei=[],qi=i((Qr=Qr.value).Kc),vr=qi.next();!vr.done;vr=qi.next()){vr=vr.value;for(var Cr=!1,Si=i(ei),Lr=Si.next();!Lr.done;Lr=Si.next())Lr=Lr.value,vr.id!=Lr.id&&vr.channelsCount==Lr.channelsCount&&vr.language==Lr.language&&vr.bandwidth==Lr.bandwidth&&vr.label==Lr.label&&vr.codecs==Lr.codecs&&vr.mimeType==Lr.mimeType&&ke(vr.roles,Lr.roles)&&vr.audioSamplingRate==Lr.audioSamplingRate&&vr.primary==Lr.primary&&(Cr=!0);Cr||ei.push(vr)}Qr.Kc=ei}}(Hn),function(Vr){for(var Qr=(Vr=i(Vr)).next();!Qr.done;Qr=Vr.next()){for(var ei=[],qi=i((Qr=Qr.value).gd),vr=qi.next();!vr.done;vr=qi.next()){vr=vr.value;for(var Cr=!1,Si=i(ei),Lr=Si.next();!Lr.done;Lr=Si.next())Lr=Lr.value,vr.id!=Lr.id&&vr.width==Lr.width&&vr.frameRate==Lr.frameRate&&vr.codecs==Lr.codecs&&vr.mimeType==Lr.mimeType&&vr.label==Lr.label&&ke(vr.roles,Lr.roles)&&Od(vr.closedCaptions,Lr.closedCaptions)&&vr.bandwidth==Lr.bandwidth&&(Cr=!0);Cr||ei.push(vr)}Qr.gd=ei}}(Hn),function(Vr){for(var Qr=(Vr=i(Vr)).next();!Qr.done;Qr=Vr.next()){for(var ei=[],qi=i((Qr=Qr.value).textStreams),vr=qi.next();!vr.done;vr=qi.next()){vr=vr.value;for(var Cr=!1,Si=i(ei),Lr=Si.next();!Lr.done;Lr=Si.next())Lr=Lr.value,vr.id!=Lr.id&&vr.language==Lr.language&&vr.label==Lr.label&&vr.codecs==Lr.codecs&&vr.mimeType==Lr.mimeType&&vr.bandwidth==Lr.bandwidth&&ke(vr.roles,Lr.roles)&&(Cr=!0);Cr||ei.push(vr)}Qr.textStreams=ei}}(Hn),function(Vr){for(var Qr=(Vr=i(Vr)).next();!Qr.done;Qr=Vr.next()){for(var ei=[],qi=i((Qr=Qr.value).imageStreams),vr=qi.next();!vr.done;vr=qi.next()){vr=vr.value;for(var Cr=!1,Si=i(ei),Lr=Si.next();!Lr.done;Lr=Si.next())Lr=Lr.value,vr.id!=Lr.id&&vr.width==Lr.width&&vr.codecs==Lr.codecs&&vr.mimeType==Lr.mimeType&&(Cr=!0);Cr||ei.push(vr)}Qr.imageStreams=ei}}(Hn),!Gn&&Hn.length==1){br=Hn[0],An.g=br.Kc,An.h=br.gd,An.j=br.textStreams,An.i=br.imageStreams,oi.A(2);break}for(dr=-1,cr=0;cr<Hn.length;cr++)Qn=Hn[cr],An.m.has(Qn.id)||(An.m.add(Qn.id),dr==-1&&(dr=cr));if(dr==-1)return oi.return();for(Kn=Hn.map(function(Vr){return Vr.Kc}),Vn=Hn.map(function(Vr){return Vr.gd}),tr=Hn.map(function(Vr){return Vr.textStreams}),qn=Hn.map(function(Vr){return Vr.imageStreams}),Er=i(tr),hr=Er.next();!hr.done;hr=Er.next())hr.value.push(G0(rr.X));for(Ur=i(qn),Wr=Ur.next();!Wr.done;Wr=Ur.next())Wr.value.push(G0(rr.Wb));return f(oi,Zu(An.g,Kn,dr,kf,_c),3);case 3:return f(oi,Zu(An.h,Vn,dr,kf,_c),4);case 4:return f(oi,Zu(An.j,tr,dr,kf,_c),5);case 5:return f(oi,Zu(An.i,qn,dr,kf,_c),2);case 2:if(ua=0,Di=[],An.h.length&&An.g.length)for(Kr=i(An.g),xn=Kr.next();!xn.done;xn=Kr.next())for(kr=xn.value,li=i(An.h),Pr=li.next();!Pr.done;Pr=li.next())ii=Pr.value,Ti=nc(kr.drmInfos,ii.drmInfos),kr.drmInfos.length&&ii.drmInfos.length&&!Ti.length||($i=ua++,Di.push({id:$i,language:kr.language,primary:kr.primary,audio:kr,video:ii,bandwidth:(kr.bandwidth||0)+(ii.bandwidth||0),drmInfos:Ti,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(Ki=An.h.concat(An.g),Qi=i(Ki),Ii=Qi.next();!Ii.done;Ii=Qi.next())xr=Ii.value,ti=ua++,Di.push({id:ti,language:xr.language,primary:xr.primary,audio:xr.type==rr.Hc?xr:null,video:xr.type==rr.va?xr:null,bandwidth:xr.bandwidth||0,drmInfos:xr.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});An.l=Di,b(oi)}})}(e.j,cn,Ut.Va),2);case 2:if(e.i){e.i.variants=e.j.l,e.i.textStreams=e.j.j.slice(),e.i.imageStreams=e.j.i,e.h.filter(e.i),Fn.A(3);break}if(e.i={presentationTimeline:Zt,variants:e.j.l,textStreams:e.j.j.slice(),imageStreams:e.j.i,offlineSessionIds:[],minBufferTime:_e||0,sequenceMode:e.g.dash.sequenceMode},!Zt.df()){Fn.A(4);break}return Dn=_a(n,"UTCTiming"),f(Fn,function(An,Hn,Gn){var rr,br,dr,cr,Qn,Kn,Vn,tr;return W(function(qn){switch(qn.g){case 1:rr=Gn.map(function(Er){return{scheme:Er.getAttribute("schemeIdUri"),value:Er.getAttribute("value")}}),br=An.g.dash.clockSyncUri,!rr.length&&br&&rr.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:br}),dr=i(rr),cr=dr.next();case 2:if(cr.done){qn.A(4);break}switch(Qn=cr.value,p(qn,5),Kn=Qn.scheme,Vn=Qn.value,Kn){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return qn.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return qn.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return tr=Date.parse(Vn),qn.return(isNaN(tr)?0:tr-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":z("NTP UTCTiming scheme is not supported");break;default:z("Unrecognized scheme in UTCTiming element",Kn)}qn.A(9);break;case 7:return f(qn,q0(An,Hn,Vn,"HEAD"),10);case 10:return qn.return(qn.h);case 8:return f(qn,q0(An,Hn,Vn,"GET"),11);case 11:return qn.return(qn.h);case 9:P(qn,3);break;case 5:j(qn);case 3:cr=dr.next(),qn.A(2);break;case 4:return z("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),qn.return(0)}})}(e,ce,Dn),5);case 5:if(Jn=Fn.h,!e.h)return Fn.return();Zt.Ve(Jn);case 4:Zt.Ld();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),b(Fn)}})}function IS(e,n,o,w){n.$=Xg(w.node,null,o),n.U=w,n.$.zb=n.zb,n.$.id||(n.$.id="__shaka_period_"+w.start);var O=_a(w.node,"EventStream");o=n.presentationTimeline.Oa();for(var L=(O=i(O)).next();!L.done;L=O.next())RS(e,w.start,w.duration,L.value,o);if(o=_a(w.node,"AdaptationSet").map(function(ue){return function(Ie,_e,Qe){function ut(An){switch(An){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}_e.ea=Xg(Qe,_e.$,null);var at,Ct=!1,yt=_a(Qe,"Role"),Lt=yt.map(function(An){return An.getAttribute("value")}).filter(_i),jt=void 0,Zt=_e.ea.contentType==Tr;Zt&&(jt="subtitle");for(var sn=(yt=i(yt)).next();!sn.done;sn=yt.next()){var Xt=(sn=sn.value).getAttribute("schemeIdUri");if(Xt==null||Xt=="urn:mpeg:dash:role:2011")switch(sn=sn.getAttribute("value"),sn){case"main":Ct=!0;break;case"caption":case"subtitle":jt=sn}}yt=null,sn=!1;for(var Gt=(Xt=i(Xt=_a(Qe,"EssentialProperty"))).next();!Gt.done;Gt=Xt.next()){var bn=(Gt=Gt.value).getAttribute("schemeIdUri");bn=="http://dashif.org/guidelines/trickmode"?yt=Gt.getAttribute("value"):bn=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?at=ut(parseInt(Gt.getAttribute("value"),10)):sn=!0}for(Gt=(Xt=i(Xt=_a(Qe,"SupplementalProperty"))).next();!Gt.done;Gt=Xt.next())(Gt=Gt.value).getAttribute("schemeIdUri")=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(at=ut(parseInt(Gt.getAttribute("value"),10)));Xt=_a(Qe,"Accessibility");var Tn=new Map;for(Gt=(Xt=i(Xt)).next();!Gt.done;Gt=Xt.next())if(Gt=(bn=Gt.value).getAttribute("schemeIdUri"),bn=bn.getAttribute("value"),Gt=="urn:scte:dash:cc:cea-608:2015")if(Gt=1,bn!=null)for(var Ut=i(bn=bn.split(";")),ln=Ut.next();!ln.done;ln=Ut.next()){var Rn=ln.value,cn=ln=void 0;Rn.includes("=")?(ln=(Rn=Rn.split("="))[0].startsWith("CC")?Rn[0]:"CC"+Rn[0],cn=Rn[1]||"und"):(ln="CC"+Gt,bn.length==2?Gt+=2:Gt++,cn=Rn),Tn.set(ln,jr(cn))}else Tn.set("CC1","und");else if(Gt=="urn:scte:dash:cc:cea-708:2015")if(Gt=1,bn!=null)for(ln=(bn=i(bn.split(";"))).next();!ln.done;ln=bn.next())Rn=Ut=void 0,(ln=ln.value).includes("=")?(Ut="svc"+(ln=ln.split("="))[0],Rn=ln[1].split(",")[0].split(":").pop()):(Ut="svc"+Gt,Gt++,Rn=ln),Tn.set(Ut,jr(Rn));else Tn.set("svc1","und");else Gt=="urn:mpeg:dash:role:2011"&&bn!=null&&(Lt.push(bn),bn=="captions"&&(jt="caption"));if(sn)return null;var Dn=w0(sn=_a(Qe,"ContentProtection"),Ie.g.dash.ignoreDrmInfo,Ie.g.dash.keySystemsByURI),Jn=jr(Qe.getAttribute("lang")||"und"),Fn=Qe.getAttribute("label");if((sn=_a(Qe,"Label"))&&sn.length&&(sn=sn[0]).textContent&&(Fn=sn.textContent),Qe=(sn=_a(Qe,"Representation")).map(function(An){return(An=function(Hn,Gn,rr,br,dr,cr,Qn,Kn,Vn,tr){if(Gn.I=Xg(tr,Gn.ea,null),Hn.u=Math.min(Hn.u,Gn.I.zb),!function(xn){var kr=xn.wc?1:0;return kr+=xn.ab?1:0,(kr+=xn.xc?1:0)==0?xn.contentType==Tr||xn.contentType=="application":(kr!=1&&(xn.wc&&(xn.ab=null),xn.xc=null),!0)}(Gn.I))return null;var qn=Gn.U.start;Gn.bandwidth=ha(tr,"bandwidth",ec)||0;var Er=Gn.I.contentType,hr=Er==Tr||Er=="application";Er=Er=="image";try{var Ur=function(xn,kr,li){return function(Pr,ii,Ti,$i){var oi,Vr,Qr,ei,qi;return W(function(vr){return vr.g==1?(oi=bs,Vr=sg(ii,Ti,$i,Pr.g.retryParameters),Qr=Pr.h.networkingEngine,ei=Qr.request(oi,Vr),Hs(Pr.o,ei),f(vr,ei.promise,2)):(qi=vr.h,vr.return(qi.data))})}(Hn,xn,kr,li)};if(Gn.I.wc)var Wr=function(xn,kr){var li=Number(qs(xn,Tc,"presentationTimeOffset"))||0,Pr=qs(xn,Tc,"timescale"),ii=1;Pr&&(ii=ec(Pr)||1);var Ti=li/ii||0,$i=C0(xn,Tc);(function(Vr,Qr){if(D0(Vr,Qr),!O0(Vr))throw new ht(2,4,4002)})(xn,$i);var oi=Id(xn);return{Bb:function(){var Vr=Sh(oi,Tc,"RepresentationIndex"),Qr=oi.I.wa;return Vr&&(Vr=Vr.getAttribute("sourceURL"))&&(Qr=ki(oi.I.wa,[Vr])),Vr=O0(oi),k0(oi,kr,$i,Qr,Vr.start,Vr.end,Ti)}}}(Gn,Ur);else if(Gn.I.ab)Wr=function(xn,kr){var li=C0(xn,N0),Pr=function(oi){var Vr=function(qi){return[qi.I.ab,qi.ea.ab,qi.$.ab].filter(_i).map(function(vr){return _a(vr,"SegmentURL")}).reduce(function(vr,Cr){return 0<vr.length?vr:Cr}).map(function(vr){return vr.getAttribute("indexRange")&&!qi.Je&&(qi.Je=!0),{dg:vr.getAttribute("media"),start:(vr=ha(vr,"mediaRange",yl,{start:0,end:null})).start,end:vr.end}})}(oi),Qr=(oi=I0(oi,N0)).Lb;Qr==0&&(Qr=1);var ei=0;return oi.ha?ei=oi.ha*(Qr-1):oi.timeline&&0<oi.timeline.length&&(ei=oi.timeline[0].start),{ha:oi.ha,startTime:ei,Lb:Qr,Ra:oi.Ra,timeline:oi.timeline,Gb:Vr}}(xn);if(!Pr.ha&&!Pr.timeline&&1<Pr.Gb.length)throw new ht(2,4,4002);if(!Pr.ha&&!xn.U.duration&&!Pr.timeline&&Pr.Gb.length==1)throw new ht(2,4,4002);if(Pr.timeline&&Pr.timeline.length==0)throw new ht(2,4,4002);var ii=null,Ti=null;xn.$.id&&xn.I.id&&(Ti=kr[xn.$.id+","+xn.I.id])&&(ii=Ti.segmentIndex);var $i=function(oi,Vr,Qr,ei,qi){var vr=ei.Gb.length;ei.timeline&&ei.timeline.length!=ei.Gb.length&&(vr=Math.min(ei.timeline.length,ei.Gb.length));for(var Cr=oi-ei.Ra,Si=Vr?oi+Vr:1/0,Lr=[],mo=ei.startTime,wo={},Ha=0;Ha<vr;wo={od:wo.od},Ha++){var vo,Ca=ei.Gb[Ha];wo.od=ki(Qr,[Ca.dg]),vo=ei.ha!=null?mo+ei.ha:ei.timeline?ei.timeline[Ha].end:mo+Vr,Lr.push(new mn(oi+mo,oi+vo,function(so){return function(){return so.od}}(wo),Ca.start,Ca.end,qi,Cr,oi,Si)),mo=vo}return Lr}(xn.U.start,xn.U.duration,xn.I.wa,Pr,li);return kr=!ii,ii?ii.Hb($i,xn.presentationTimeline.Oa()):ii=new er($i),xn.presentationTimeline.Ib($i),xn.Va&&xn.U.Le||ii.Wa(xn.U.start,xn.U.duration?xn.U.start+xn.U.duration:1/0,kr),Ti&&(Ti.segmentIndex=ii),{Bb:function(){return ii&&ii.g.length!=0||ii.pc($i),Promise.resolve(ii)}}}(Gn,Hn.l);else if(Gn.I.xc)Wr=function(xn,kr,li,Pr,ii,Ti){var $i=function(Cr){var Si=qs(Cr,wh,"initialization");if(!Si)return null;var Lr=Cr.I.id,mo=Cr.bandwidth||null,wo=Cr.I.wa;return new Cn(function(){var Ha=_h(Si,Lr,null,mo,null);return ki(wo,[Ha])},0,null,P0(Cr))}(xn),oi=function(Cr){var Si=I0(Cr,wh),Lr=qs(Cr,wh,"media");return Cr=qs(Cr,wh,"index"),{ha:Si.ha,timescale:Si.timescale,Lb:Si.Lb,Ra:Si.Ra,re:Si.re,timeline:Si.timeline,Od:Lr,oc:Cr}}(xn);(function(Cr){var Si=Cr.oc?1:0;if(Si+=Cr.timeline?1:0,(Si+=Cr.ha?1:0)==0)throw new ht(2,4,4002);if(Si!=1&&(Cr.oc&&(Cr.timeline=null),Cr.ha=null),!Cr.oc&&!Cr.Od)throw new ht(2,4,4002)})(oi);var Vr=Id(xn);if(oi.oc)return D0(xn,$i),{Bb:function(){var Cr=_h(oi.oc,Vr.I.id,null,Vr.bandwidth||null,null);return Cr=ki(Vr.I.wa,[Cr]),k0(Vr,kr,$i,Cr,0,null,oi.Ra)}};if(oi.ha)return Pr||xn.ea.contentType==="image"||(xn.presentationTimeline.Rd(oi.ha),xn.presentationTimeline.Sd(xn.U.start)),{Bb:function(){return function(Cr,Si,Lr,mo,wo){function Ha(Ds){var Ho=(Ds-tp)*ds,Hf=Ho+Si.Ra,Cc=Ho+uo;return Ho=Cc+ds,(Cc=new mn(Cc,Math.min(Ho,Ca()),function(){var UA=_h(PA,xA,Ds,NA,Hf*zm);return ki(LA,[UA])},0,null,mo,MA,uo,Ca())).j=Ho,Cc}function vo(){var Ds=[Math.max(so.Oa(),uo),Math.min(so.gb(),Ca())].map(function(Ho){return Ho-uo});return[Math.ceil(Ds[0]/ds),Math.ceil(Ds[1]/ds)-1].map(function(Ho){return Ho+tp})}function Ca(){var Ds=ep!=null&&wo[ep]||Ym;return Ds?uo+Ds:1/0}var so=Cr.presentationTimeline,uo=Cr.U.start,ep=Cr.$.id,Ym=Cr.U.duration,ds=Si.ha,tp=Si.Lb,zm=Si.timescale,PA=Si.Od,NA=Cr.bandwidth||null,xA=Cr.I.id,LA=Cr.I.wa,MA=uo-Si.Ra,Dl=vo();Cr=Cr.Va?Math.max(Dl[0],Dl[1]-Lr+1):Dl[0],Dl=Dl[1],Lr=[];for(var Gf=Cr;Gf<=Dl;++Gf){var FA=Ha(Gf);Lr.push(FA)}var Wm=new er(Lr);if(Lr=so.gb()<Ca(),Gf=so.T(),Lr||Gf){var Xm=Math.max(Cr,Dl+1);Wm.fd(ds,function(){var Ds=so.Oa();Wm.eb(Ds);var Ho=i(vo());Ho.next(),Ho=Ho.next().value;for(var Hf=[];Xm<=Ho;){var Cc=Ha(Xm);Hf.push(Cc),Xm++}return Ds>Ca()&&!Hf.length?null:Hf})}return Promise.resolve(Wm)}(Vr,oi,ii,$i,Ti)}};var Qr=null;Pr=Pr=null,xn.$.id&&xn.I.id&&(Pr=li[Pr=xn.$.id+","+xn.I.id])&&(Qr=Pr.segmentIndex);var ei=function(Cr,Si,Lr){var mo=Cr.U.start,wo=Cr.U.duration,Ha=mo-Si.Ra;wo=wo?mo+wo:1/0;for(var vo=[],Ca={},so=0;so<Si.timeline.length;Ca={nd:Ca.nd,rd:Ca.rd,ud:Ca.ud,kd:Ca.kd,wd:Ca.wd,ld:Ca.ld},so++){var uo=Si.timeline[so],ep=uo.start,Ym=uo.Dg;uo=uo.end,Ca.ud=so+Si.Lb,Ca.wd=Ym+Si.re,Ca.rd=Cr.I.id,Ca.kd=Cr.bandwidth||null,Ca.nd=Si.Od,Ca.ld=Cr.I.wa,vo.push(new mn(mo+ep,mo+uo,function(ds){return function(){var tp=_h(ds.nd,ds.rd,ds.ud,ds.kd||null,ds.wd);return ki(ds.ld,[tp]).map(function(zm){return zm.toString()})}}(Ca),0,null,Lr,Ha,mo,wo))}return vo}(Vr,oi,$i);li=xn.U.start;var qi=xn.U.duration?xn.U.start+xn.U.duration:1/0,vr=1/0!=qi;return Qr?(vr&&new er(ei).Wa(li,qi,!0),Qr.Hb(ei,xn.presentationTimeline.Oa())):Qr=new er(ei),xn.presentationTimeline.Ib(ei),vr&&Qr.Wa(li,qi),Pr&&xn.Va&&(Pr.segmentIndex=Qr),{Bb:function(){return Qr&&Qr.g.length!=0||Qr.pc(ei),Promise.resolve(Qr)}}}(Gn,Ur,Hn.l,!!Hn.i,Hn.g.dash.initialSegmentLimit,Hn.L);else{var ua=Gn.I.wa,Di=Gn.U.duration||0;Wr={Bb:function(){return Promise.resolve(sa(qn,Di,ua))}}}}catch(xn){if((hr||Er)&&xn.code==4002)return null;throw xn}Ur=function(xn,kr,li,Pr){var ii=w0(xn,li,Pr);if(kr.Ee)xn=kr.drmInfos.length==1&&!kr.drmInfos[0].keySystem,li=ii.drmInfos.length==0,(kr.drmInfos.length==0||xn&&!li)&&(kr.drmInfos=ii.drmInfos),kr.Ee=!1;else if(0<ii.drmInfos.length&&(kr.drmInfos=kr.drmInfos.filter(function(Ti){return ii.drmInfos.some(function($i){return $i.keySystem==Ti.keySystem})}),kr.drmInfos.length==0))throw new ht(2,4,4008);return ii.Ae||kr.Ae}(Ur=_a(tr,"ContentProtection"),rr,Hn.g.dash.ignoreDrmInfo,Hn.g.dash.keySystemsByURI),Ur=new Set(Ur?[Ur]:[]);var Ki=!1;_a(tr,"SupplementalProperty").some(function(xn){return xn.getAttribute("schemeIdUri")=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&xn.getAttribute("value")=="JOC"})&&(Ki=!0);var Qi,Ii,xr=!1;if(hr&&(xr=Kn.includes("forced_subtitle")||Kn.includes("forced-subtitle")),Er&&((tr=_a(tr,"EssentialProperty").find(function(xn){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(xn.getAttribute("schemeIdUri"))}))&&(Qi=tr.getAttribute("value")),!Qi))return null;tr=Gn.I.codecs,Gn.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(tr.includes("hvc1.2.4.L153.B0")||tr.includes("hev1.2.4.L153.B0"))&&(Ii="PQ");var ti=Gn.I.id?Gn.$.id+","+Gn.I.id:"",Kr={id:Hn.G++,originalId:Gn.I.id,createSegmentIndex:function(){var xn,kr;return W(function(li){if(li.g==1)return(xn=ti&&Gn.Va&&Hn.l[ti]?Hn.l[ti]:Kr).segmentIndex?li.A(0):(kr=xn,f(li,Wr.Bb(),3));kr.segmentIndex=li.h,b(li)})},closeSegmentIndex:function(){Kr.segmentIndex&&(Kr.segmentIndex.release(),Kr.segmentIndex=null)},segmentIndex:null,mimeType:Gn.I.mimeType,codecs:Gn.I.codecs,frameRate:Gn.I.frameRate,pixelAspectRatio:Gn.I.pixelAspectRatio,bandwidth:Gn.bandwidth,width:Gn.I.width,height:Gn.I.height,kind:br,encrypted:0<rr.drmInfos.length,drmInfos:rr.drmInfos,keyIds:Ur,language:dr,label:cr,type:Gn.ea.contentType,primary:Qn,trickModeVideo:null,emsgSchemeIdUris:Gn.I.emsgSchemeIdUris,roles:Kn,forced:xr,channelsCount:Gn.I.ad,audioSamplingRate:Gn.I.audioSamplingRate,spatialAudio:Ki,closedCaptions:Vn,hdr:Ii,tilesLayout:Qi,matchedStreams:[]};return ti&&Gn.Va&&!Hn.l[ti]&&(Hn.l[ti]=Kr),Kr}(Ie,_e,Dn,jt,Jn,Fn,Ct,Lt,Tn,An))&&(An.hdr=An.hdr||at),An}).filter(function(An){return!!An}),Qe.length==0){if(yt=_e.ea.contentType=="image",Ie.g.dash.ignoreEmptyAdaptationSet||Zt||yt)return null;throw new ht(2,4,4003)}if(!_e.ea.contentType||_e.ea.contentType=="application")for(_e.ea.contentType=Y0(Qe[0].mimeType,Qe[0].codecs),Xt=(Zt=i(Qe)).next();!Xt.done;Xt=Zt.next())Xt.value.type=_e.ea.contentType;for(Xt=(Zt=i(Qe)).next();!Xt.done;Xt=Zt.next())for(Xt=Xt.value,bn=(Gt=i(Dn.drmInfos)).next();!bn.done;bn=Gt.next())(bn=bn.value).keyIds=bn.keyIds&&Xt.keyIds?new Set([].concat(g(bn.keyIds),g(Xt.keyIds))):bn.keyIds||Xt.keyIds;return Zt=sn.map(function(An){return An.getAttribute("id")}).filter(_i),{id:_e.ea.id||"__fake__"+Ie.G++,contentType:_e.ea.contentType,language:Jn,vh:Ct,streams:Qe,drmInfos:Dn.drmInfos,pe:yt,qg:Zt}}(e,n,ue)}).filter(_i),n.Va){for(w=[],L=(O=i(o)).next();!L.done;L=O.next())for(var F=(L=i(L.value.qg)).next();!F.done;F=L.next())w.push(F.value);if(w.length!=new Set(w).size)throw new ht(2,4,4018)}for(w=o.filter(function(ue){return!ue.pe}),O=(o=i(o=o.filter(function(ue){return ue.pe}))).next();!O.done;O=o.next()){L=(O=O.value).pe.split(" ");for(var q=(F=i(w)).next();!q.done;q=F.next()){var $=q.value;if(L.includes($.id)){q={};for(var ce=($=i($.streams)).next();!ce.done;q={Gc:q.Gc},ce=$.next())q.Gc=ce.value,q.Gc.trickModeVideo=O.streams.find(function(ue){return function(Ie){return Ta(ue.Gc.codecs)==Ta(Ie.codecs)}}(q))}}}if(O=e.g.disableAudio?[]:Ch(w,"audio"),F=e.g.disableVideo?[]:Ch(w,"video"),L=e.g.disableText?[]:Ch(w,Tr),o=e.g.disableThumbnails?[]:Ch(w,"image"),!F.length&&!O.length)throw new ht(2,4,4004);for(w=[],q=(O=i(O)).next();!q.done;q=O.next())w.push.apply(w,g(q.value.streams));for(O=[],q=(F=i(F)).next();!q.done;q=F.next())O.push.apply(O,g(q.value.streams));for(F=[],q=(L=i(L)).next();!q.done;q=L.next())F.push.apply(F,g(q.value.streams));for(L=[],q=(o=i(o)).next();!q.done;q=o.next())L.push.apply(L,g(q.value.streams));return{id:n.$.id,Kc:w,gd:O,textStreams:F,imageStreams:L}}function Ch(e,n){return e.filter(function(o){return o.contentType==n})}function K0(e,n){0>e.F||e.D.N(Math.max(3,e.F-n,fe(e.H)))}function Xg(e,n,o){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,ad:null,audioSamplingRate:null,zb:0},o=o||n.wa;for(var w=_a(e,"BaseURL"),O=w.map(vl),L=e.getAttribute("contentType")||n.contentType,F=e.getAttribute("mimeType")||n.mimeType,q=e.getAttribute("codecs")||n.codecs,$=ha(e,"frameRate",Md)||n.frameRate,ce=e.getAttribute("sar")||n.pixelAspectRatio,ue=_a(e,"InbandEventStream"),Ie=n.emsgSchemeIdUris.slice(),_e=(ue=i(ue)).next();!_e.done;_e=ue.next())_e=_e.value.getAttribute("schemeIdUri"),Ie.includes(_e)||Ie.push(_e);ue=function(yt){for(var Lt=(yt=i(yt)).next();!Lt.done;Lt=yt.next()){var jt=Lt.value;if((Lt=jt.getAttribute("schemeIdUri"))&&(jt=jt.getAttribute("value")))switch(Lt){case"urn:mpeg:dash:outputChannelPositionList:2012":return jt.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(Lt=parseInt(jt,10)))continue;return Lt;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(Lt=parseInt(jt,16)))continue;for(yt=0;Lt;)1&Lt&&++yt,Lt>>=1;return yt;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(Lt=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(jt=parseInt(jt,10))&&0<jt&&jt<Lt.length)return Lt[jt]}}return null}(ue=_a(e,"AudioChannelConfiguration"))||n.ad,_e=ha(e,"audioSamplingRate",Yo)||n.audioSamplingRate,L||(L=Y0(F,q));var Qe=ml(e,"SegmentBase"),ut=ml(e,"SegmentTemplate"),at=Qe&&ha(Qe,"availabilityTimeOffset",Nu)||0,Ct=ut&&ha(ut,"availabilityTimeOffset",Nu)||0;return w=w&&w.length&&ha(w[0],"availabilityTimeOffset",Nu)||0,w=n.zb+w+at+Ct,{wa:ki(o,O),wc:Qe||n.wc,ab:ml(e,"SegmentList")||n.ab,xc:ut||n.xc,width:ha(e,"width",Yo)||n.width,height:ha(e,"height",Yo)||n.height,contentType:L,mimeType:F,codecs:q,frameRate:$,pixelAspectRatio:ce,emsgSchemeIdUris:Ie,id:e.getAttribute("id"),ad:ue,audioSamplingRate:_e,zb:w}}function q0(e,n,o,w){var O,L,F,q,$,ce;return W(function(ue){if(ue.g==1)return O=ki(n,[o]),(L=xo(O,e.g.retryParameters)).method=w,F=e.h.networkingEngine.request(4,L),Hs(e.o,F),f(ue,F.promise,2);if(q=ue.h,w=="HEAD"){if(!q.headers||!q.headers.date)return ue.return(0);$=q.headers.date}else $=Oi(q.data);return ce=Date.parse($),isNaN(ce)?ue.return(0):ue.return(ce-Date.now())})}function RS(e,n,o,w,O){for(var L=w.getAttribute("schemeIdUri")||"",F=w.getAttribute("value")||"",q=ha(w,"timescale",Yo)||1,$=(w=i(_a(w,"Event"))).next();!$.done;$=w.next()){var ce=ha($=$.value,"presentationTime",Yo)||0,ue=ha($,"duration",Yo)||0;ue=(ce=ce/q+n)+ue/q,o!=null&&(ce=Math.min(ce,n+o),ue=Math.min(ue,n+o)),ue<O||($={schemeIdUri:L,value:F,startTime:ce,endTime:ue,id:$.getAttribute("id")||"",eventElement:$},e.h.onTimelineRegionAdded($))}}function Y0(e,n){return io(ma(e,n))?Tr:e.split("/")[0]}function z0(e,n,o,w){this.h=e,this.type=n,this.g=o,this.segments=w||null}function Qg(e,n,o,w){this.id=e,this.name=n,this.g=o,this.value=w===void 0?null:w}function fi(e,n,o){return(e=e.getAttribute(n))?e.value:o||null}function Ba(e,n){if(!(e=e.getAttribute(n)))throw new ht(2,4,4023,n);return e.value}function W0(e,n,o){o=o===void 0?[]:o,this.g=n,this.i=e,this.h=o}function X0(e,n){this.name=e,this.value=n}function Ys(e,n){return e.filter(function(o){return o.name==n})}function Q0(e,n){return e.filter(function(o){return Ba(o,"TYPE")==n})}function Oo(e,n){return(e=Ys(e,n)).length?e[0]:null}function kh(e,n){var o=0;return o=o===void 0?0:o,(e=Oo(e,n))?Number(e.value):o}function Sc(e,n){return ki([e],[n])[0]}function Rl(e){this.h=e,this.g=0}function Ac(e){Ku(e,/[ \t]+/gm)}function Ku(e,n){return n.lastIndex=e.g,n=(n=n.exec(e.h))==null?null:{position:n.index,length:n[0].length,results:n},e.g==e.h.length||n==null||n.position!=e.g?null:(e.g+=n.length,n.results)}function Cl(e){return e.g==e.h.length?null:(e=Ku(e,/[^ \t\n]*/gm))?e[0]:null}function CS(){this.g=0}function $g(e,n,o){var w=(n=(n=Oi(n)).replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(w[0]))throw new ht(2,4,4015);n=0;for(var O=!0,L=i(w),F=L.next();!F.done;F=L.next())if(F=F.value,/^#(?!EXT)/m.test(F)||O)O=!1;else{if(F=Jg(e,F),--e.g,$0.includes(F.name)){n=1;break}F.name=="EXT-X-STREAM-INF"&&(O=!0)}for(L=[],O=!0,F=0;F<w.length;F++){var q=w[F],$=w[F+1];if(/^#(?!EXT)/m.test(q)||O)O=!1;else{if(q=Jg(e,q),kS.includes(q.name)){if(n!=1)throw new ht(2,4,4017);var ce=w.splice(F,w.length-F);w=o,O=[],F=[],$=[],q=null;for(var ue=(ce=i(ce)).next();!ue.done;ue=ce.next())ue=ue.value,/^(#EXT)/.test(ue)?(ue=Jg(e,ue),$0.includes(ue.name)?L.push(ue):ue.name=="EXT-X-MAP"?q=ue:ue.name=="EXT-X-PART"?$.push(ue):ue.name=="EXT-X-PRELOAD-HINT"?fi(ue,"TYPE")=="PART"?$.push(ue):fi(ue,"TYPE")=="MAP"&&(ue.name="EXT-X-MAP",q=ue):F.push(ue)):/^#(?!EXT)/m.test(ue)||(ue=Sc(w,ue.trim()),q&&F.push(q),O.push(new W0(ue,F,$)),F=[],$=[]);return $.length&&(q&&F.push(q),O.push(new W0("",F,$))),new z0(o,n,L,O)}L.push(q),q.name=="EXT-X-STREAM-INF"&&(q.g.push(new X0("URI",$)),O=!0)}}return new z0(o,n,L)}function Jg(e,n){e=e.g++;var o=n.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!o)throw new ht(2,4,4016,n);n=o[1];var w,O=o[2];if(o=[],O){var L;(L=Ku(O=new Rl(O),/^([^,=]+)(?:,|$)/g))&&(w=L[1]);for(var F=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;L=Ku(O,F);)o.push(new X0(L[1],L[2]||L[3])),Ac(O)}return new Qg(e,n,o,w)}(E=Df.prototype).configure=function(e){this.g=e},E.start=function(e,n){var o,w=this;return W(function(O){if(O.g==1)return w.B=n.isLowLatencyMode(),w.m=[e],w.h=n,f(O,Wg(w),2);if(o=O.h,w.h&&K0(w,o),!w.h)throw new ht(2,7,7001);return O.return(w.i)})},E.stop=function(){for(var e=i(Object.values(this.l)),n=e.next();!n.done;n=e.next())(n=n.value).segmentIndex&&n.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.m=[],this.i=null,this.l={},this.j=null,this.D!=null&&(this.D.stop(),this.D=null),this.o.destroy()},E.update=function(){var e,n=this;return W(function(o){return o.g==1?(p(o,2),f(o,Wg(n),4)):o.g!=2?P(o,0):(e=j(o),n.h&&e?(n.h.onError(e),void b(o)):o.return())})},E.onExpirationUpdated=function(){},Q("shaka.dash.DashParser",Df),fu.mpd=function(){return new Df},Lo["application/dash+xml"]=function(){return new Df},Lo["video/vnd.mpeg.dash.mpd"]=function(){return new Df},Qg.prototype.toString=function(){var e="#"+this.name,n=this.g?this.g.map(function(o){return o.name+"="+(isNaN(Number(o.value))?'"'+o.value+'"':o.value)}):[];return this.value&&n.unshift(this.value),0<n.length&&(e+=":"+n.join(",")),e},Qg.prototype.getAttribute=function(e){var n=this.g.filter(function(o){return o.name==e});return n.length?n[0]:null};var $0="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),kS="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function J0(){}function eE(e){try{var n=em(e);return Gs({uri:e,Oe:e,data:n.data,headers:{"content-type":n.contentType}})}catch(o){return vs(o)}}function em(e){var n=e.split(":");if(2>n.length||n[0]!="data")throw new ht(2,1,1004,e);if(2>(n=n.slice(1).join(":").split(",")).length)throw new ht(2,1,1004,e);var o=n[0];e=C.decodeURIComponent(n.slice(1).join(",")),n=o.split(";"),o=n[0];var w=!1;return 1<n.length&&n[n.length-1]=="base64"&&(w=!0,n.pop()),{data:w?Dr(e):Un(e),contentType:o}}function Pf(){var e=this;this.g=this.i=null,this.Fa=1,this.o=new Map,this.u=new Map,this.F=new Map,this.F.set("video",new Map),this.F.set("audio",new Map),this.F.set(Tr,new Map),this.F.set("image",new Map),this.ua=new Set,this.h=new Map,this.j=null,this.M="",this.W=new CS,this.O=0,this.B=-1,this.H=1/0,this.Ga=!1,this.m=new ni(function(){(function(n){var o,w;W(function(O){return O.g==1?n.i?(p(O,2),f(O,n.update(),4)):O.return():O.g!=2?(ls(n)&&(o=n.O,n.m.N(o)),P(O,0)):(w=j(O),n.i?(w.severity=1,n.i.onError(w),n.m.N(.1),void b(O)):O.return())})})(e)}),this.ia=Oh,this.D=null,this.ca=0,this.J=1/0,this.V=this.da=0,this.G=new Du,this.L=new Map,this.s=new Map,this.ba=new Map,this.l=!1}function tm(e,n){return ls(e)?e.F.get(n.type):n.$c}function OS(e,n){var o,w,O,L,F,q,$,ce,ue,Ie,_e,Qe,ut,at,Ct;return W(function(yt){if(yt.g==1)return o=n.Jc,w=new vn(o),e.l&&n.Mc&&Zr(w,new Fi("_HLS_skip=YES")),f(yt,om(e,w.toString()),2);if(O=yt.h,!n.stream.segmentIndex)return yt.return();if((L=$g(e.W,O.data,O.uri)).type!=1)throw new ht(2,4,4017);var Lt,jt;F=Ys(L.g,"EXT-X-DEFINE"),q=rE(e,F),$=n.stream,ce=tm(e,n),ue=lE(L,$.mimeType),Ie=ue.keyIds,_e=ue.drmInfos,Lt=$.keyIds,jt=Ie,Lt.size===jt.size&&[].concat(g(Lt)).every(function(Zt){return jt.has(Zt)})||($.keyIds=Ie,$.drmInfos=_e,e.i.newDrmInfo($)),Qe=hE(e,L,$.type,ce,q),$.segmentIndex.Hb(Qe,e.j.Oa()),Qe.length&&(ut=kh(L.g,"EXT-X-MEDIA-SEQUENCE"),at=ce.get(ut),$.segmentIndex.eb(at)),Ct=Qe[Qe.length-1],Oo(L.g,"EXT-X-ENDLIST")&&(n.mc=!0,n.Ya=Ct.endTime),b(yt)})}function tE(e,n,o){n.Ya+=o;for(var w=(n=i(e=tm(e,n))).next();!w.done;w=n.next()){var O=i(w.value);w=O.next().value,O=O.next().value,e.set(w,O+o)}}function nE(e){if(ls(e)){if(e.O=e.J,e.ia==dm){var n=im(e);e.g.hls.useSafariBehaviorForLive&&(n=e.j.m),isNaN(e.g.availabilityWindowOverride)||(n=e.g.availabilityWindowOverride),e.j.le(n)}}else e.j.Aa(im(e));e.j.Ld()}function rE(e,n){for(var o=new Map,w=(n=i(n)).next();!w.done;w=n.next()){var O=w.value;w=fi(O,"NAME");var L=fi(O,"VALUE");O=fi(O,"IMPORT"),w&&L&&o.set(w,L),O&&(w=e.o.get(O))&&o.set(O,w)}return o}function iE(e,n){var o=[];e.g.disableVideo||o.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||o.push(e.g.hls.defaultAudioCodec),o=fi(n,"CODECS",o.join(",")).split(/\s*,\s*/),e=new Set,n=[];for(var w=(o=i(o)).next();!w.done;w=o.next()){var O=Xa(w=w.value)[0];e.has(O)||(n.push(w),e.add(O))}return n}function nm(e){return jr(e=fi(e,"LANGUAGE")||"und")}function aE(e,n){var o=Ba(n,"GROUP-ID"),w="",O=Ba(n,"TYPE").toLowerCase();O=="subtitles"&&(O=Tr);var L=O;if(L!=Tr&&o&&e.s.has(o)&&(w=e.s.get(o)),O=wc(Ba(n,"URI"),e.o),e.h.has(O))return e.h.get(O);var F=nm(n),q=fi(n,"NAME"),$=fi(n,"DEFAULT")=="YES",ce=L=="audio"&&(ce=fi(n,"CHANNELS"))?parseInt(ce.split("/")[0],10):null,ue=L=="audio"&&!!(ue=fi(n,"CHANNELS"))&&ue.includes("/JOC");return w=rm(e,O,w,L,F,$,q,ce,null,fi(n,"CHARACTERISTICS"),n=fi(n,"FORCED")=="YES",ue),e.u.has(o)?e.u.get(o).push(w):e.u.set(o,[w]),e.h.has(O)?e.h.get(O):(e.h.set(O,w),w)}function rm(e,n,o,w,O,L,F,q,$,ce,ue,Ie){var _e=Sc(e.M,n),Qe=uE(e,o,w,O,L,F,q,$,ce,ue,Ie);Co.includes(Qe.mimeType)&&(Qe.codecs="");var ut={stream:Qe,type:w,Ac:n,Jc:_e,Ya:0,$c:new Map,Mc:!1,mc:!1,Cd:-1,Kd:!1},at=null,Ct=new AbortController;return Qe.createSegmentIndex=function(){return at||(Ct=new AbortController,at=new Promise(function(yt){yt(function(Lt){var jt,Zt,sn,Xt,Gt,bn,Tn,Ut,ln,Rn,cn,Dn,Jn;return W(function(Fn){if(Fn.g==1)return f(Fn,om(e,ut.Jc),2);if(Fn.g!=3)return jt=Fn.h,Lt.aborted?Fn.return():(Zt=jt.uri,sn=$g(e.W,jt.data,Zt),Xt=ls(e),f(Fn,sE(e,sn,n,Zt,o,w,O,L,F,q,$,ce,ue,Ie),3));if(Gt=Fn.h,Lt.aborted)return Fn.return();if(bn=Gt.stream,ls(e)&&!Xt&&fE(e),ut.Jc=Zt,ut.Ya=Gt.Ya,ut.Mc=Gt.Mc,ut.mc=Gt.mc,ut.$c=Gt.$c,ut.Kd=!0,Qe.segmentIndex=bn.segmentIndex,Qe.encrypted=bn.encrypted,Qe.drmInfos=bn.drmInfos,Qe.keyIds=bn.keyIds,Qe.mimeType=bn.mimeType,Co.includes(Qe.mimeType)&&(Qe.codecs=""),Qe.drmInfos.length&&e.i.newDrmInfo(Qe),w==(Tn=ji).va||w==Tn.Hc)for(Ut=i(e.h.values()),ln=Ut.next();!ln.done;ln=Ut.next())(Rn=ln.value).Kd||Rn.type!=w||(Rn.stream.mimeType=bn.mimeType,Co.includes(Rn.stream.mimeType)&&(Rn.stream.codecs=""));(function(An){if(!An.D)return!1;for(var Hn=[],Gn=[],rr=(An=i(An.D.variants)).next();!rr.done;rr=An.next())(rr=rr.value).video&&Hn.push(rr.video),rr.audio&&Gn.push(rr.audio);return!(0<Hn.length&&!Hn.some(function(br){return br.segmentIndex})||0<Gn.length&&!Gn.some(function(br){return br.segmentIndex}))})(e)&&(e.Ga?am(e,[ut]):(e.Ga=!0,cn=Array.from(e.h.values()),Dn=cn.filter(function(An){return An.stream.segmentIndex}),am(e,Dn),nE(e),0<(Jn=e.O)&&e.m.N(Jn))),b(Fn)})}(Ct.signal))}))},Qe.closeSegmentIndex=function(){at&&!Qe.segmentIndex&&Ct.abort(),Qe.segmentIndex&&(Qe.segmentIndex.release(),Qe.segmentIndex=null),at=null},ut}function im(e){for(var n=1/0,o=(e=i(e.h.values())).next();!o.done;o=e.next())(o=o.value).stream.segmentIndex&&o.stream.type!="text"&&(n=Math.min(n,o.Ya));return n}function oE(e,n){for(var o=[],w=(n=i(n)).next();!w.done;w=n.next())(w=w.value).segmentIndex&&ba(w.segmentIndex,function(O){o.push(O)});e.j.Ib(o)}function am(e,n){if(!ls(e))for(var o=im(e),w=i(n),O=w.next();!O.done;O=w.next())O.value.stream.segmentIndex.Wa(0,o);for(O=(o=i(n)).next();!O.done;O=o.next())O=O.value.stream,Co.includes(O.mimeType)&&(O.codecs="");oE(e,n.map(function(L){return L.stream})),e.g.hls.ignoreManifestProgramDateTime?function(L,F){for(var q=L.B==-1,$=i(F),ce=$.next();!ce.done;ce=$.next()){var ue=(ce=ce.value).stream.segmentIndex,Ie=tm(L,ce);if(ue=ue.g[0]||null)for(var _e=(Ie=i(Ie)).next();!_e.done;_e=Ie.next()){var Qe=(_e=i(_e.value)).next().value;if(_e.next().value==ue.startTime){q&&(L.B=Math.max(L.B,Qe)),ce.Cd=Qe;break}}}if(!(0>L.B))for(ce=(F=i(F)).next();!ce.done;ce=F.next())($=(q=ce.value).stream.segmentIndex)&&($.g.splice(0,L.B-q.Cd),($=$.g[0]||null)&&($=-$.startTime,q.stream.segmentIndex.offset($),tE(L,q,$)))}(e,n):function(L,F){if(L.H==1/0)for(var q=(F=i(F)).next();!q.done;q=F.next()){var $=q.value.stream.segmentIndex.g[0]||null;$!=null&&$.g!=null&&(L.H=Math.min(L.H,$.g))}if((F=L.H)!=1/0)for(q=($=i(L.h.values())).next();!q.done;q=$.next()){var ce=(q=q.value).stream.segmentIndex;if(ce!=null){var ue=ce.g[0]||null;if(ue.g==null)H("Missing EXT-X-PROGRAM-DATE-TIME for stream",q.Ac,"Expect AV sync issues!");else for(tE(L,q,ue.g-F-ue.startTime),ce=(q=i(ce)).next();!ce.done;ce=q.next())ce.value.ne(F)}}}(e,n)}function sE(e,n,o,w,O,L,F,q,$,ce,ue,Ie,_e,Qe,ut){var at,Ct,yt,Lt,jt,Zt,sn,Xt,Gt,bn,Tn,Ut,ln,Rn,cn;return W(function(Dn){if(Dn.g==1){if(n.type!=1)throw new ht(2,4,4017);return at=Ys(n.g,"EXT-X-DEFINE"),Ct=rE(e,at),cE(e,n),ut?Dn.A(2):f(Dn,function(Jn,Fn,An,Hn,Gn){var rr,br,dr,cr,Qn,Kn,Vn,tr,qn,Er;return W(function(hr){return hr.g==1?(rr=bs,br=Math.trunc((Hn.segments.length-1)/2),dr=wc(Hn.segments[br].i,Gn),cr=new vn(dr),Qn=cr.qa.split(".").pop(),Kn=fm[Fn],(Vn=Kn[Qn])||(Vn=gE[Qn])||(Vn=pE(Fn,An))?hr.return(Vn):((tr=xo([dr],Jn.g.retryParameters)).method="HEAD",f(hr,um(Jn,tr,rr),2))):(qn=hr.h,(Er=qn.headers["content-type"])?hr.return(Er.split(";")[0]):hr.return(Fn==Tr?"text/vtt":fm[Fn].mp4))})}(e,L,O,n,Ct),3)}if(Dn.g!=2&&(ut=Dn.h),yt=lE(n,ut),Lt=yt.drmInfos,jt=yt.keyIds,Zt=yt.encrypted,sn=yt.kf,Zt&&!Lt.length&&!sn)throw new ht(2,4,4026);return Xt=ls(e)?e.F.get(L):new Map,Gt=e.l,bn=hE(e,n,L,Xt,Ct),Gt!=e.l&&cE(e,n),Tn=bn[bn.length-1].endTime,Ut=new er(bn),Rn=!!(ln=Oo(n.g,"EXT-X-SERVER-CONTROL"))&&ln.getAttribute("CAN-SKIP-UNTIL")!=null,(cn=uE(e,O,L,F,q,$,ce,ue,Ie,_e,Qe)).segmentIndex=Ut,cn.encrypted=Zt,cn.drmInfos=Lt,cn.keyIds=jt,cn.mimeType=ut,Dn.return({stream:cn,type:L,Ac:o,Jc:w,Ya:Tn,Mc:Rn,mc:!1,Cd:-1,$c:Xt,Kd:!1})})}function uE(e,n,o,w,O,L,F,q,$,ce,ue){var Ie=pE(o,n)||(o==Tr?"text/vtt":fm[o].mp4);return{id:e.Fa++,originalId:L,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:Ie,codecs:n,kind:o==Tr?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:w,label:L,type:o,primary:O,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:$?$.split(","):[],forced:ce,channelsCount:F,audioSamplingRate:null,spatialAudio:ue,closedCaptions:q,hdr:void 0,tilesLayout:void 0}}function lE(e,n){var o=[];if(e.segments)for(var w=(e=i(e.segments)).next();!w.done;w=e.next())w=Ys(w.value.g,"EXT-X-KEY"),o.push.apply(o,g(w));w=e=!1;for(var O=[],L=new Set,F=(o=i(o)).next();!F.done;F=o.next()){var q=Ba(F=F.value,"METHOD");if(q!="NONE"){if(e=!0,q=="AES-128")w=!0;else if(q=fi(F,"KEYFORMAT")||"identity",F=(q=mE[q])?q(F,n):null){if(F.keyIds)for(var $=(q=i(F.keyIds)).next();!$.done;$=q.next())L.add($.value);O.push(F)}}}return{drmInfos:O,keyIds:L,encrypted:e,kf:w}}function DS(e,n,o){if(!C.crypto||!C.crypto.subtle)throw z("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new ht(2,4,4042);var w=0,O=fi(n,"IV","");if(O){var L=Br(O.substr(2));if(L.byteLength!=16)throw new ht(2,4,4043)}else w=kh(o.g,"EXT-X-MEDIA-SEQUENCE");var F=xo([n=Sc(o.h,Ba(n,"URI"))],e.g.retryParameters),q={method:"AES-128",iv:L,firstMediaSequenceNumber:w,fetchKey:function(){var $,ce,ue;return W(function(Ie){if(Ie.g==1)return f(Ie,um(e,F,6),2);if(Ie.g!=3){if(!($=Ie.h).data||$.data.byteLength!=16)throw new ht(2,4,4044);return ce={name:"AES-CBC"},ue=q,f(Ie,C.crypto.subtle.importKey("raw",$.data,ce,!0,["decrypt"]),3)}ue.cryptoKey=Ie.h,q.fetchKey=void 0,b(Ie)})}};return q}function cE(e,n){var o=Oo(n.g,"EXT-X-PLAYLIST-TYPE"),w=Oo(n.g,"EXT-X-ENDLIST");if(w=o&&o.value=="VOD"||w,o=o&&o.value=="EVENT"&&!w,o=!w&&!o,w)sm(e,Oh);else{if(sm(e,o?dm:vE),!(w=Oo(n.g,"EXT-X-TARGETDURATION")))throw new ht(2,4,4024,"EXT-X-TARGETDURATION");w=Number(w.value),o=Oo(n.g,"EXT-X-PART-INF"),e.l&&o?(e.da=Number(Ba(o,"PART-TARGET")),e.J=Math.min(e.da,e.J),n=Oo(n.g,"EXT-X-SERVER-CONTROL"),e.V=n?Number(Ba(n,"PART-HOLD-BACK")):0):e.J=Math.min(w,e.J),e.ca=Math.max(w,e.ca)}}function fE(e){var n=e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:e.V?e.V:e.ca*e.g.hls.liveSegmentsDelay;e.j.Xe(0),e.j.We(n),e.j.yc(!1)}function PS(e,n,o,w){return(o=Oo(o,"EXT-X-MAP"))?(n=[w=wc(Sc(n,Ba(o,"URI")),w),fi(o,"BYTERANGE","")].join("-"),e.ba.has(n)||(o=function(O,L){var F=0,q=null;return(L=fi(L,"BYTERANGE"))&&(F=L.split("@"),q=Number(F[0]),q=(F=Number(F[1]))+q-1),new Cn(function(){return[O]},F,q)}(w,o),e.ba.set(n,o)),e.ba.get(n)):null}function NS(e,n,o,w,O,L,F,q,$){var ce=w.g,ue=wc(w.i,L),Ie=Oo(ce,"EXTINF"),_e=L=0,Qe=null;w.h.length&&!e.l&&z("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var ut=null;if(!e.g.hls.ignoreManifestProgramDateTime){var at=Oo(ce,"EXT-X-PROGRAM-DATE-TIME");at&&at.value&&(ut=xd(at.value))}if(at=St,Oo(ce,"EXT-X-GAP")&&(at=2),!Ie){if(w.h.length==0)throw new ht(2,4,4024,"EXTINF");if(!e.l)return null}var Ct=[];if(e.l)for(var yt={},Lt=0;Lt<w.h.length;yt={pd:yt.pd},Lt++){var jt=w.h[Lt],Zt=Lt==0?o:Ct[Ct.length-1],sn=Lt==0?O:Zt.endTime,Xt=Number(fi(jt,"DURATION"))||e.da;if(Xt){Xt=sn+Xt;var Gt=0,bn=null;jt.name=="EXT-X-PRELOAD-HINT"?Gt=(Gt=fi(jt,"BYTERANGE-START"))?Number(Gt):0:(Gt=(bn=i(dE(Zt,Gt=fi(jt,"BYTERANGE")))).next().value,bn=bn.next().value),(Zt=fi(jt,"URI"))&&(yt.pd=Sc(F,Zt),Zt=St,fi(jt,"GAP")=="YES"&&(Zt=2),Ct.push(new mn(sn,Xt,function(Tn){return function(){return[Tn.pd]}}(yt),Gt,bn,n,0,0,1/0,[],"",null,null,Zt)))}}return L=Ie?O+Number(Ie.value.split(",")[0]):Ct[Ct.length-1].endTime,(e=Oo(ce,"EXT-X-BYTERANGE"))?(_e=(Qe=i(dE(o,e.value))).next().value,Qe=Qe.next().value):Ct.length&&(_e=Ct[0].Ba,Qe=Ct[Ct.length-1].ka),o="",e=null,q=="image"&&(o="1x1",q=Oo(ce,"EXT-X-TILES"))&&(o=Ba(q,"LAYOUT"),(q=fi(q,"DURATION"))&&(e=Number(q))),new mn(O,L,function(){return ue.length?[ue]:[]},_e,Qe,n,0,0,1/0,Ct,o,e,ut,at,$)}function dE(e,n){var o=0,w=null;return n&&(o=n.split("@"),n=Number(o[0]),w=(o=o[1]?Number(o[1]):e.ka+1)+n-1),[o,w]}function hE(e,n,o,w,O){var L=n.segments,F=void 0,q=kh(n.g,"EXT-X-DISCONTINUITY-SEQUENCE"),$=kh(n.g,"EXT-X-MEDIA-SEQUENCE"),ce=Oo(n.g,"EXT-X-SKIP"),ue=$+(ce=ce?Number(fi(ce,"SKIPPED-SEGMENTS")):0),Ie=0;ls(e)&&w.has(ue)&&(Ie=w.get(ue));for(var _e=[],Qe=null,ut=0;ut<L.length;ut++){var at=L[ut],Ct=ut==0?Ie:Qe.endTime;ue=$+ce+ut,Oo(at.g,"EXT-X-DISCONTINUITY")&&q++;for(var yt=i(at.g),Lt=yt.next();!Lt.done;Lt=yt.next())(Lt=Lt.value).name=="EXT-X-KEY"&&(F=Ba(Lt,"METHOD")=="AES-128"?DS(e,Lt,n):void 0);w.set(ue,Ct),yt=PS(e,n.h,at.g,O),!e.l&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.l=e.i.isLowLatencyMode()),(Qe=at=NS(e,yt,Qe,at,Ct,O,n.h,o,F))&&(at.m=q,e.g.hls.ignoreManifestProgramDateTime&&e.B!=null&&ue<e.B||_e.push(at))}if(n=_e.some(function(jt){return jt.g!=null})){for(o={},w=0;w<_e.length;o={Qb:o.Qb,Pb:o.Pb,Bc:o.Bc,Sa:o.Sa,Ob:o.Ob},w++)if(o.Sa=_e[w],o.Sa.g==null)for(o.Pb=0,o.Qb=w,O=function(jt){return function(){var Zt=_e[jt.Qb];if(Zt){if(Zt.g!=null)return Zt.g+jt.Pb;jt.Pb-=Zt.endTime-Zt.startTime,jt.Qb+=1}return null}}(o),o.Ob=0,o.Bc=w,L=function(jt){return function(){var Zt=_e[jt.Bc];if(Zt){if(Zt!=jt.Sa&&(jt.Ob+=Zt.endTime-Zt.startTime),Zt.g!=null)return Zt.g+jt.Ob;--jt.Bc}return null}}(o);o.Sa.g==null;)o.Sa.g=L(),o.Sa.g==null&&(o.Sa.g=O())}if(n)for(w=(o=i(_e)).next();!w.done;w=o.next())for(w=(O=w.value).g,L=(O=i(O.i)).next();!L.done;L=O.next())(L=L.value).g=w,w+=L.endTime-L.startTime;if(e=e.H,n&&e!=1/0)for(w=(n=i(_e)).next();!w.done;w=n.next())w.value.ne(e);return _e}function wc(e,n){var o=(e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(o)for(var w=(o=i(o)).next();!w.done;w=o.next()){var O=(w=w.value).slice(2,w.length-1),L=n.get(O);if(!L)throw new ht(2,4,4039,O);e=e.replace(w,L)}return e}function pE(e,n){if(e==Tr){if(n=="vtt"||n=="wvtt")return"text/vtt";if(n&&n!=="")return"application/mp4"}return e!="image"||n&&n!="jpeg"?e=="audio"&&n=="mp4a.40.34"?"audio/mpeg":null:"image/jpeg"}function om(e,n){return n=xo([n],e.g.retryParameters),e.i.modifyManifestRequest(n,{format:"h"}),um(e,n,0)}function ls(e){return e.ia!=Oh}function sm(e,n){e.ia=n,e.j&&e.j.yc(!ls(e)),ls(e)||e.m.stop()}function um(e,n,o){if(!e.G)throw new ht(2,7,7001);return n=e.i.networkingEngine.request(o,n),Hs(e.G,n),n.promise}Q("shaka.net.DataUriPlugin",J0),J0.parse=eE,Es("data",eE),(E=Pf.prototype).configure=function(e){this.g=e},E.start=function(e,n){var o,w=this;return W(function(O){return O.g==1?(w.i=n,w.l=n.isLowLatencyMode(),f(O,om(w,e),2)):O.g!=3?(o=O.h,w.M=o.uri,f(O,function(L,F,q){var $,ce,ue,Ie,_e,Qe,ut,at,Ct,yt,Lt,jt,Zt,sn,Xt,Gt,bn,Tn,Ut,ln,Rn,cn,Dn,Jn,Fn,An,Hn,Gn,rr,br,dr;return W(function(cr){switch(cr.g){case 1:for(var Qn=i(Ys(($=$g(L.W,F,L.M)).g,"EXT-X-DEFINE")),Kn=Qn.next();!Kn.done;Kn=Qn.next()){var Vn=Kn.value;Kn=fi(Vn,"NAME"),Vn=fi(Vn,"VALUE"),Kn&&Vn&&(L.o.has(Kn)||L.o.set(Kn,Vn))}if(ce=[],ue=[],Ie=[],$.type==1)return Ut=L.g.hls.mediaPlaylistFullMimeType,$.segments.length&&(ln=new vn($.segments[0].i),Rn=ln.qa.split(".").pop(),(cn=gE[Rn])?Ut=cn:Rn!=="ts"&&Rn!=="mp4"&&(lm[Rn]?(cn=lm[Rn],Dn=L.g.hls.defaultAudioCodec,Ut=cn+'; codecs="'+Dn+'"'):cm[Rn]&&(cn=cm[Rn],Jn=L.g.hls.defaultVideoCodec,Ut=cn+'; codecs="'+Jn+'"'))),Fn=Ut.split(";")[0],An=Fn.split("/")[0],Hn=Uo(Ut),Gn=new Map,f(cr,sE(L,$,q,q,Hn,An,"",!0,"Media Playlist",null,Gn,null,!1,!1,Fn),5);for(_e=Ys($.g,"EXT-X-MEDIA"),Qe=Ys($.g,"EXT-X-STREAM-INF"),ut=Ys($.g,"EXT-X-IMAGE-STREAM-INF"),at=Ys($.g,"EXT-X-SESSION-KEY"),Kn=(Qn=i(Qe)).next();!Kn.done;Kn=Qn.next()){var tr=Kn.value;Vn=fi(tr,"AUDIO"),Kn=fi(tr,"VIDEO");var qn=fi(tr,"SUBTITLES");if(tr=iE(L,tr),qn){var Er=Bi(Tr,tr);L.s.set(qn,Er),me(tr,Er)}Vn&&((qn=Bi("audio",tr))||(qn=L.g.hls.defaultAudioCodec),L.s.set(Vn,qn)),Kn&&((Vn=Bi("video",tr))||(Vn=L.g.hls.defaultVideoCodec),L.s.set(Kn,Vn))}for(Ct=Ys($.g,"EXT-X-SESSION-DATA"),yt=i(Ct),Lt=yt.next();!Lt.done;Lt=yt.next())jt=Lt.value,Zt=fi(jt,"DATA-ID"),sn=fi(jt,"URI"),Xt=fi(jt,"LANGUAGE"),Gt=fi(jt,"VALUE"),bn=new Map().set("id",Zt),sn&&bn.set("uri",Sc(L.M,sn)),Xt&&bn.set("language",Xt),Gt&&bn.set("value",Gt),Tn=new si("sessiondata",bn),L.i&&L.i.onEvent(Tn);for(function(hr,Ur){Ur=Ur.filter(function(ua){var Di=fi(ua,"URI")||"";return fi(ua,"TYPE")!="SUBTITLES"&&Di!=""});for(var Wr=(Ur=i(Ur)).next();!Wr.done;Wr=Ur.next())aE(hr,Wr.value)}(L,_e),Kn=(Qn=i(Qn=Q0(_e,"CLOSED-CAPTIONS"))).next();!Kn.done;Kn=Qn.next())Kn=nm(qn=Kn.value),Vn=Ba(qn,"GROUP-ID"),qn=Ba(qn,"INSTREAM-ID"),L.L.get(Vn)||L.L.set(Vn,new Map),L.L.get(Vn).set(qn,Kn);return ce=function(hr,Ur,Wr){var ua=[],Di=new Set;if(0<Wr.length)for(var Ki=(Wr=i(Wr)).next();!Ki.done;Ki=Wr.next()){var Qi=Ba(Ki=Ki.value,"METHOD");if(Qi!="NONE"&&Qi!="AES-128"&&(Qi=fi(Ki,"KEYFORMAT")||"identity",Ki=(Qi=mE[Qi])?Qi(Ki,""):null)){if(Ki.keyIds)for(var Ii=(Qi=i(Ki.keyIds)).next();!Ii.done;Ii=Qi.next())Di.add(Ii.value);ua.push(Ki)}}return Ur=Ur.map(function(xr){var ti=fi(xr,"FRAME-RATE"),Kr=Number(fi(xr,"AVERAGE-BANDWIDTH"))||Number(Ba(xr,"BANDWIDTH")),xn=fi(xr,"RESOLUTION"),kr=(xn=i(xn?xn.split("x"):[null,null])).next().value,li=xn.next().value,Pr=fi(xr,"VIDEO-RANGE");xr=function(Vr,Qr){var ei=iE(Vr,Qr),qi=fi(Qr,"AUDIO"),vr=fi(Qr,"VIDEO"),Cr=qi||vr;Cr=Cr&&Vr.u.has(Cr)?Vr.u.get(Cr):[],qi={audio:qi?Cr:[],video:vr?Cr:[]},vr=!1;var Si=Ba(Qr,"URI"),Lr=qi.audio.find(function(Ha){return Ha&&Ha.Ac==Si}),mo=Bi("video",ei),wo=Bi("audio",ei);return wo&&!mo?Cr="audio":!Cr.length&&wo&&mo?(Cr="video",ei=[[mo,wo].join()]):qi.audio.length&&Lr?(Cr="audio",vr=!0):Cr=qi.video.length&&!qi.audio.length?"audio":"video",vr||(Vr=function(Ha,vo,Ca,so){var uo=wc(Ba(vo,"URI"),Ha.o);return Ha.h.has(uo)?Ha.h.get(uo):(vo=fi(vo,"CLOSED-CAPTIONS"),vo=so=="video"&&vo&&vo!="NONE"?Ha.L.get(vo):null,so=rm(Ha,uo,Ca=Oa(so,Ca),so,"und",!1,null,null,vo,null,!1,!1),Ha.h.has(uo)?Ha.h.get(uo):(Ha.h.set(uo,so),so))}(Vr,Qr,ei,Cr),qi[Vr.stream.type]=[Vr]),qi}(hr,xr),xn=xr.audio;for(var ii=i(xr=xr.video),Ti=ii.next();!Ti.done;Ti=ii.next())(Ti=Ti.value.stream)&&(Ti.width=Number(kr)||void 0,Ti.height=Number(li)||void 0,Ti.frameRate=Number(ti)||void 0,Ti.hdr=Pr||void 0);for(ti=hr.g.disableAudio,xn.length&&!ti||(xn=[null]),ti=hr.g.disableVideo,xr.length&&!ti||(xr=[null]),ti=[],kr=(xn=i(xn)).next();!kr.done;kr=xn.next())for(kr=kr.value,Pr=(li=i(xr)).next();!Pr.done;Pr=li.next()){var $i=Pr.value;(Pr=kr?kr.stream:null)&&(Pr.drmInfos=ua,Pr.keyIds=Di),(ii=$i?$i.stream:null)&&(ii.drmInfos=ua,ii.keyIds=Di),Ti=kr?kr.stream.drmInfos:null;var oi=$i?$i.stream.drmInfos:null;$i=($i?$i.Ac:"")+" - "+(kr?kr.Ac:""),Pr&&ii&&Ti.length&&oi.length&&!(0<nc(Ti,oi).length)||hr.ua.has($i)||(Pr={id:hr.Fa++,language:Pr?Pr.language:"und",primary:!!Pr&&Pr.primary||!!ii&&ii.primary,audio:Pr,video:ii,bandwidth:Kr,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},ti.push(Pr),hr.ua.add($i))}return ti}).reduce(Ui,[]),Ur.filter(function(xr){return xr!=null})}(L,Qe,at),ue=function(hr,Ur){var Wr=Q0(Ur,"SUBTITLES");Ur=Wr.map(function(Qi){if(hr.g.disableText)return null;try{return aE(hr,Qi).stream}catch(Ii){if(hr.g.hls.ignoreTextStreamFailures)return null;throw Ii}});for(var ua=(Wr=i(Wr)).next();!ua.done;ua=Wr.next()){var Di=Ba(ua.value,"GROUP-ID");if((ua=hr.s.get(Di))&&(Di=hr.u.get(Di)))for(var Ki=(Di=i(Di)).next();!Ki.done;Ki=Di.next())Ki.value.stream.codecs=ua}return Ur.filter(function(Qi){return Qi})}(L,_e),f(cr,function(hr,Ur){var Wr,ua;return W(function(Di){return Di.g==1?(Wr=Ur.map(function(Ki){var Qi,Ii;return W(function(xr){if(xr.g==1)return hr.g.disableThumbnails?xr.return(null):(p(xr,2),f(xr,function(ti,Kr){var xn,kr,li,Pr,ii,Ti,$i,oi,Vr,Qr;return W(function(ei){return ei.g==1?(xn=wc(Ba(Kr,"URI"),ti.o),kr=fi(Kr,"CODECS","jpeg")||"",ti.h.has(xn)?ei.return(ti.h.get(xn)):(li=nm(Kr),Pr=fi(Kr,"NAME"),ii=fi(Kr,"CHARACTERISTICS"),Ti=rm(ti,xn,kr,"image",li,!1,Pr,null,null,ii,!1,!1),ti.h.has(xn)?ei.return(ti.h.get(xn)):($i=fi(Kr,"RESOLUTION"))?f(ei,Ti.stream.createSegmentIndex(),3):ei.A(2))):(ei.g!=2&&(oi=Ti.stream.segmentIndex.get(0),Vr=oi.tilesLayout)&&(Ti.stream.width=Number($i.split("x")[0])*Number(Vr.split("x")[0]),Ti.stream.height=Number($i.split("x")[1])*Number(Vr.split("x")[1])),(Qr=fi(Kr,"BANDWIDTH"))&&(Ti.stream.bandwidth=Number(Qr)),ti.h.set(xn,Ti),ei.return(Ti))})}(hr,Ki),4));if(xr.g!=2)return Qi=xr.h,xr.return(Qi.stream);if(Ii=j(xr),hr.g.hls.ignoreImageStreamFailures)return xr.return(null);throw Ii})}),f(Di,Promise.all(Wr),2)):(ua=Di.h,Di.return(ua.filter(function(Ki){return Ki})))})}(L,ut),4);case 4:Ie=cr.h,cr.A(3);break;case 5:rr=cr.h,L.h.set(q,rr),ce.push({id:0,language:"und",disabledUntilTime:0,primary:!0,audio:An=="audio"?rr.stream:null,video:An=="video"?rr.stream:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!L.i)throw new ht(2,7,7001);L.j=new Gr(null,0),L.j.yc(!0),$.type==1&&(ls(L)&&(fE(L),br=L.O,L.m.N(br)),dr=Array.from(L.h.values()),am(L,dr),nE(L)),L.D={presentationTimeline:L.j,variants:ce,textStreams:ue,imageStreams:Ie,offlineSessionIds:[],minBufferTime:0,sequenceMode:!0},L.i.makeTextStreamsForClosedCaptions(L.D),b(cr)}})}(w,o.data,e),3)):O.return(w.D)})},E.stop=function(){this.m&&(this.m.stop(),this.m=null);var e=[];return this.G&&(e.push(this.G.destroy()),this.G=null),this.g=this.i=null,this.ua.clear(),this.D=null,this.h.clear(),this.u.clear(),this.s.clear(),this.o.clear(),Promise.all(e)},E.update=function(){var e,n,o,w,O,L,F,q,$=this;return W(function(ce){if(ce.g==1){if(!ls($))return ce.return();for(e=[],n=Array.from($.h.values()),o=n.filter(function(ue){return ue.stream.segmentIndex}),w=i(o),O=w.next();!O.done;O=w.next())L=O.value,e.push(OS($,L));return f(ce,Promise.all(e),2)}oE($,o.map(function(ue){return ue.stream})),F=o.some(function(ue){return ue.mc==0}),o.length&&!F&&(sm($,xS.ff),q=n.map(function(ue){return ue.Ya}),$.j.Aa(Math.min.apply(Math,g(q))),$.i.updateDuration()),b(ce)})},E.onExpirationUpdated=function(){},Q("shaka.hls.HlsParser",Pf);var gE={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},lm={mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t"},cm={mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},fm={audio:lm,video:cm,text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"txt/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},mE={"com.apple.streamingkeydelivery":function(e,n){if(n=="video/mp2t")throw new ht(2,4,4040);if(C.shakaMediaKeysPolyfill)throw new ht(2,4,4041);return Za("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var n=Ba(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)?(n=Za("com.widevine.alpha",[{initDataType:"cenc",initData:n=Vt((n=em(n=Ba(e,"URI"))).data)}]),(e=fi(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n):null},"com.microsoft.playready":function(e){var n=Ba(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)?Za("com.microsoft.playready",[{initDataType:"cenc",initData:e=nf(e=Vt((e=em(e=Ba(e,"URI"))).data),n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]):null},identity:function(e){return e=Ba(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?Za("org.w3.clearkey",null):null}},Oh="VOD",vE="EVENT",dm="LIVE",xS={ff:Oh,Pg:vE,Ug:dm};function yE(e,n,o,w,O,L){if(200<=o&&299>=o&&o!=202)return{uri:O||w,Oe:w,data:n,status:o,headers:e,fromCache:!!e["x-shaka-from-cache"]};O=null;try{O=dn(n)}catch{}throw new ht(o==401||o==403?2:1,1,1001,w,o,O,e,L)}function hm(){}function Dh(e,n,o,w,O){var L=new US;dl(n.headers).forEach(function(ce,ue){L.append(ue,ce)});var F=new MS,q={xe:!1,bf:!1};if(e=function(ce,ue,Ie,_e,Qe,ut,at){var Ct,yt,Lt,jt,Zt,sn,Xt,Gt,bn,Tn,Ut,ln;return W(function(Rn){switch(Rn.g){case 1:return Ct=LS,yt=FS,sn=Zt=0,Xt=Date.now(),p(Rn,2),f(Rn,Ct(ce,Ie),4);case 4:return Lt=Rn.h,ut(EE(Lt.headers)),Gt=Lt.clone().body.getReader(),Tn=(bn=Lt.headers.get("Content-Length"))?parseInt(bn,10):0,new yt({start:function(cn){(function Dn(){var Jn,Fn;return W(function(An){switch(An.g){case 1:return p(An,2),f(An,Gt.read(),4);case 4:Jn=An.h,P(An,3);break;case 2:return j(An),An.return();case 3:if(Jn.done){An.A(5);break}if(Zt+=Jn.value.byteLength,!at){An.A(5);break}return f(An,at(Jn.value),5);case 5:(100<(Fn=Date.now())-Xt||Jn.done)&&(Qe(Fn-Xt,Zt-sn,Tn-Zt),sn=Zt,Xt=Fn),Jn.done?cn.close():(cn.enqueue(Jn.value),Dn()),b(An)}})})()}}),f(Rn,Lt.arrayBuffer(),5);case 5:jt=Rn.h,P(Rn,3);break;case 2:throw Ut=j(Rn),_e.xe?new ht(1,1,7001,ce,ue):_e.bf?new ht(1,1,1003,ce,ue):new ht(1,1,1002,ce,Ut,ue);case 3:return ln=EE(Lt.headers),Rn.return(yE(ln,jt,Lt.status,ce,Lt.url,ue))}})}(e,o,{body:n.body||void 0,headers:L,method:n.method,signal:F.signal,credentials:n.allowCrossSiteCredentials?"include":void 0},q,w,O,n.streamDataCallback),e=new ya(e,function(){return q.xe=!0,F.abort(),Promise.resolve()}),n=n.retryParameters.timeout){var $=new ni(function(){q.bf=!0,F.abort()});$.N(n/1e3),e.finally(function(){$.stop()})}return e}function EE(e){var n={};return e.forEach(function(o,w){n[w.trim()]=o}),n}function bE(){if(!C.ReadableStream)return!1;try{new ReadableStream({})}catch{return!1}return!(!C.fetch||!C.AbortController)}ai("Tizen 3")||ai("Tizen 2")||ea()||(fu.m3u8=function(){return new Pf},Lo["application/x-mpegurl"]=function(){return new Pf},Lo["application/vnd.apple.mpegurl"]=function(){return new Pf}),Q("shaka.net.HttpFetchPlugin",hm),hm.isSupported=bE,hm.parse=Dh;var LS=C.fetch,MS=C.AbortController,FS=C.ReadableStream,US=C.Headers;function TE(){}function Ph(e,n,o,w,O){var L=new BS,F=Date.now(),q=0;return new ya(new Promise(function($,ce){L.open(n.method,e,!0),L.responseType="arraybuffer",L.timeout=n.retryParameters.timeout,L.withCredentials=n.allowCrossSiteCredentials,L.onabort=function(){ce(new ht(1,1,7001,e,o))};var ue=!1;for(var Ie in L.onreadystatechange=function(){if(L.readyState==2&&!ue){var _e=_E(L);O(_e),ue=!0}},L.onload=function(){var _e=_E(L),Qe=L.response;try{var ut=yE(_e,Qe,L.status,e,L.responseURL,o);$(ut)}catch(at){ce(at)}},L.onerror=function(_e){ce(new ht(1,1,1002,e,_e,o))},L.ontimeout=function(){ce(new ht(1,1,1003,e,o))},L.onprogress=function(_e){var Qe=Date.now();(100<Qe-F||_e.lengthComputable&&_e.loaded==_e.total)&&(w(Qe-F,_e.loaded-q,_e.total-_e.loaded),q=_e.loaded,F=Qe)},n.headers)L.setRequestHeader(Ie.toLowerCase(),n.headers[Ie]);L.send(n.body)}),function(){return L.abort(),Promise.resolve()})}function _E(e){var n=e.getAllResponseHeaders().trim().split(`\r
`);e={};for(var o=(n=i(n)).next();!o.done;o=n.next())e[(o=o.value.split(": "))[0].toLowerCase()]=o.slice(1).join(": ");return e}bE()&&(Es("http",Dh,2,!0),Es("https",Dh,2,!0),Es("blob",Dh,2,!0)),Q("shaka.net.HttpXHRPlugin",TE),TE.parse=Ph;var BS=C.XMLHttpRequest;function SE(e,n,o,w){this.g=e,this.i=n,this.groupId=o,this.h=w}function pm(e){return e.ya().map(function(n){return"{"+encodeURI(n)+"}"}).join("")+":"+e.Ba+":"+e.ka}function jS(e,n){return sg(e.g.ya(),e.g.Ba,e.g.ka,n.streaming.retryParameters)}function AE(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function wE(e,n){e.i+=n;var o=e.l;return e.l++,e.g.set(o,n),o}function IE(e){var n=this;this.o=e,this.j=new Map,this.i=new Vs(function(){return gm(n).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new AE}function gm(e){var n=e.h.map(function(o){return o()});return e.h=[],Promise.all(n)}function GS(e,n,o,w,O,L){aa(e.i);var F=(e.j.get(n)||Promise.resolve()).then(function(){var q,$,ce,ue,Ie,_e,Qe;return W(function(ut){if(ut.g==1)return f(ut,function(Ct,yt){var Lt,jt,Zt,sn;return W(function(Xt){return Xt.g==1?(Lt=bs,jt=Ct.o.request(Lt,yt),Zt=function(){return jt.abort()},Ct.h.push(Zt),f(Xt,jt.promise,2)):(sn=Xt.h,me(Ct.h,Zt),Xt.return(sn.data))})}(e,o),2);if(q=ut.h,e.i.g)throw new ht(2,9,7001);if(O)for(ue in $=Vt(q),(ce=new Nd($)).data)Ie=Number(ue),_e=ce.data[Ie],Qe=ce.g[Ie],e.l(_e,Qe);e.g.close(w,q.byteLength);var at=e.g;return e.m(at.i==0?0:at.j/at.i,e.g.h),ut.return(L(q))})});e.j.set(n,F)}function Nh(e,n){var o=this;this.i=e,this.h=e.objectStore(n),this.g=new xi,e.onabort=function(w){w.preventDefault(),o.g.reject()},e.onerror=function(w){w.preventDefault(),o.g.reject()},e.oncomplete=function(){o.g.resolve()}}function mm(e,n){return new Promise(function(o,w){var O=e.h.openCursor();O.onerror=w,O.onsuccess=function(){var L;return W(function(F){if(F.g==1)return O.result==null?(o(),F.return()):(L=O.result,f(F,n(L.key,L.value,L),2));L.continue(),b(F)})}})}function vm(e){this.h=e,this.g=[]}function kl(e,n){return xh(e,n,"readwrite")}function xh(e,n,o){var w=new Nh(o=e.h.transaction([n],o),n);return e.g.push(w),w.promise().then(function(){me(e.g,w)},function(){me(e.g,w)}),w}function Ol(e,n,o){this.h=new vm(e),this.i=n,this.g=o}function RE(e){return Promise.reject(new ht(2,9,9011,"Cannot add new value to "+e))}function CE(e,n,o,w){n=(e=kl(e.h,n)).store();for(var O={},L=(o=i(o)).next();!L.done;O={Ec:O.Ec},L=o.next())O.Ec=L.value,n.delete(O.Ec).onsuccess=function(F){return function(){return w(F.Ec)}}(O);return e.promise()}function kE(e,n,o){var w,O,L,F,q,$,ce;return W(function(ue){if(ue.g==1){for(w=xh(e.h,n,"readonly"),O=w.store(),L={},F=[],q={},$=i(o),ce=$.next();!ce.done;q={Vb:q.Vb,Tb:q.Tb},ce=$.next())q.Tb=ce.value,q.Vb=O.get(q.Tb),q.Vb.onsuccess=function(Ie){return function(){Ie.Vb.result==null&&F.push(Ie.Tb),L[Ie.Tb]=Ie.Vb.result}}(q);return f(ue,w.promise(),2)}if(F.length)throw new ht(2,9,9012,"Could not find values for "+F);return ue.return(o.map(function(Ie){return L[Ie]}))})}function Nf(e){this.g=new vm(e)}function Do(){this.g=new Map}function OE(e){var n=null;if(e.g.forEach(function(o,w){o.getCells().forEach(function(O,L){O.hasFixedKeySpace()||n||(n={path:{za:w,ja:L},ja:O})})}),n)return n;throw new ht(2,9,9013,"Could not find a cell that supports add-operations")}function Lh(e,n,o){if(!(e=e.g.get(n)))throw new ht(2,9,9013,"Could not find mechanism with name "+n);if(!(n=e.getCells().get(o)))throw new ht(2,9,9013,"Could not find cell with name "+o);return n}function DE(e,n){xf.set(e,n)}Es("http",Ph,1,!0),Es("https",Ph,1,!0),Es("blob",Ph,1,!0),AE.prototype.close=function(e,n){if(this.g.has(e)){var o=this.g.get(e);this.g.delete(e),this.j+=o,this.h+=n}},IE.prototype.destroy=function(){return this.i.destroy()},Nh.prototype.abort=function(){var e=this;return W(function(n){if(n.g==1){try{e.i.abort()}catch{}return p(n,2),f(n,e.g,4)}if(n.g!=2)return P(n,0);j(n),b(n)})},Nh.prototype.store=function(){return this.h},Nh.prototype.promise=function(){return this.g},vm.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))},(E=Ol.prototype).destroy=function(){return this.h.destroy()},E.hasFixedKeySpace=function(){return!0},E.addSegments=function(){return RE(this.i)},E.removeSegments=function(e,n){return CE(this,this.i,e,n)},E.getSegments=function(e){var n,o=this;return W(function(w){return w.g==1?f(w,kE(o,o.i,e),2):(n=w.h,w.return(n.map(function(O){return o.ye(O)})))})},E.addManifests=function(){return RE(this.g)},E.updateManifest=function(){return Promise.reject(new ht(2,9,9016,"Cannot modify values in "+this.g))},E.updateManifestExpiration=function(e,n){var o=kl(this.h,this.g),w=o.store();return w.get(e).onsuccess=function(O){(O=O.target.result)&&(O.expiration=n,w.put(O,e))},o.promise()},E.removeManifests=function(e,n){return CE(this,this.g,e,n)},E.getManifests=function(e){var n,o=this;return W(function(w){return w.g==1?f(w,kE(o,o.g,e),2):(n=w.h,w.return(Promise.all(n.map(function(O){return o.bc(O)}))))})},E.getAllManifests=function(){var e,n,o=this;return W(function(w){return w.g==1?(e=xh(o.h,o.g,"readonly"),n=new Map,f(w,mm(e,function(O,L){var F;return W(function(q){if(q.g==1)return f(q,o.bc(L),2);F=q.h,n.set(O,F),b(q)})}),2)):w.g!=3?f(w,e.promise(),3):w.return(n)})},E.ye=function(e){return e},E.bc=function(e){return Promise.resolve(e)},E.add=function(e,n){var o,w,O,L,F,q,$,ce=this;return W(function(ue){if(ue.g==1){for(o=kl(ce.h,e),w=o.store(),O=[],L={},F=i(n),q=F.next();!q.done;L={Fc:L.Fc},q=F.next())$=q.value,L.Fc=w.add($),L.Fc.onsuccess=function(Ie){return function(){O.push(Ie.Fc.result)}}(L);return f(ue,o.promise(),2)}return ue.return(O)})},Nf.prototype.destroy=function(){return this.g.destroy()},Nf.prototype.getAll=function(){var e,n,o=this;return W(function(w){return w.g==1?(e=xh(o.g,"session-ids","readonly"),n=[],f(w,mm(e,function(O,L){n.push(L)}),2)):w.g!=3?f(w,e.promise(),3):w.return(n)})},Nf.prototype.add=function(e){for(var n=kl(this.g,"session-ids"),o=n.store(),w=(e=i(e)).next();!w.done;w=e.next())o.add(w.value);return n.promise()},Nf.prototype.remove=function(e){var n,o=this;return W(function(w){return w.g==1?f(w,mm(n=kl(o.g,"session-ids"),function(O,L,F){e.includes(L.sessionId)&&F.delete()}),2):f(w,n.promise(),0)})},Do.prototype.destroy=function(){for(var e=[],n=i(this.g.values()),o=n.next();!o.done;o=n.next())e.push(o.value.destroy());return this.g.clear(),Promise.all(e)},Do.prototype.init=function(){var e=this;xf.forEach(function(O,L){(O=O())&&e.g.set(L,O)});for(var n=[],o=i(this.g.values()),w=o.next();!w.done;w=o.next())n.push(w.value.init());return Promise.all(n)},Q("shaka.offline.StorageMuxer",Do),Do.unregister=function(e){xf.delete(e)},Do.register=DE,Do.prototype.destroy=Do.prototype.destroy;var xf=new Map;function Lf(){Ol.apply(this,arguments)}function HS(e,n){(function(O){var L=O.streams.filter(function(Ie){return Ie.contentType=="audio"});if(O=O.streams.filter(function(Ie){return Ie.contentType=="video"}),!L.every(function(Ie){return Ie.variantIds})||!O.every(function(Ie){return Ie.variantIds})){for(var F=i(L),q=F.next();!q.done;q=F.next())q.value.variantIds=[];for(q=(F=i(O)).next();!q.done;q=F.next())q.value.variantIds=[];if(F=0,O.length&&!L.length){var $=F++,ce=i(O);for(q=ce.next();!q.done;q=ce.next())q.value.variantIds.push($)}if(!O.length&&L.length)for($=F++,q=(ce=i(L)).next();!q.done;q=ce.next())q.value.variantIds.push($);if(O.length&&L.length)for(q=(L=i(L)).next();!q.done;q=L.next())for(q=q.value,ce=($=i(O)).next();!ce.done;ce=$.next()){ce=ce.value;var ue=F++;q.variantIds.push(ue),ce.variantIds.push(ue)}}})(e);for(var o=i(e.streams),w=o.next();!w.done;w=o.next());return e.streams.map(function(O){return function(L,F,q){var $=L.initSegmentUri?PE(L.initSegmentUri):null,ce=F+L.presentationTimeOffset,ue=F+q;return{id:L.id,originalId:null,primary:L.primary,type:L.contentType,mimeType:L.mimeType,codecs:L.codecs,frameRate:L.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:L.kind,language:L.language,label:L.label,width:L.width,height:L.height,initSegmentKey:$,encrypted:L.encrypted,keyIds:new Set([L.keyId]),segments:L.segments.map(function(Ie){var _e=PE(Ie.uri);return{startTime:F+Ie.startTime,endTime:F+Ie.endTime,dataKey:_e,initSegmentKey:$,appendWindowStart:F,appendWindowEnd:ue,timestampOffset:ce,tilesLayout:""}}),variantIds:L.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}(O,e.startTime,n)})}function PE(e){var n;if((n=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(n=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(n[1]);throw new ht(2,9,9004,"Could not parse uri "+e)}function Mh(){Ol.apply(this,arguments)}function VS(e,n,o){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(w){return{startTime:n+w.startTime,endTime:n+w.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:n,appendWindowEnd:o,timestampOffset:n-e.presentationTimeOffset,dataKey:w.dataKey,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function ym(){Ol.apply(this,arguments)}function NE(){this.m=this.j=this.i=this.h=this.g=this.l=null}function zs(e,n,o,w){this.g=e,this.i=n,this.h=o,this.l=w,this.j=["offline:",e,"/",n,"/",o,"/",w].join("")}function Em(e){if((e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e))==null)return null;var n=e[1];if(n!="manifest"&&n!="segment")return null;var o=e[2];if(!o)return null;var w=e[3];return w&&n!=null?new zs(n,o,w,Number(e[4])):null}function xE(e,n){this.h=e,this.g=n}function LE(e,n){var o=new Gr(null,0);o.Aa(n.duration);var w=n.streams.filter(function(ce){return ce.type=="audio"}),O=n.streams.filter(function(ce){return ce.type=="video"});w=function(ce,ue,Ie,_e){for(var Qe=new Set,ut=i(ue),at=ut.next();!at.done;at=ut.next()){var Ct=i(at.value.variantIds);for(at=Ct.next();!at.done;at=Ct.next())Qe.add(at.value)}for(at=(ut=i(Ie)).next();!at.done;at=ut.next())for(at=(Ct=i(at.value.variantIds)).next();!at.done;at=Ct.next())Qe.add(at.value);for(ut=new Map,at=(Qe=i(Qe)).next();!at.done;at=Qe.next())at=at.value,ut.set(at,{id:at,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(Qe=(ue=i(ue)).next();!Qe.done;Qe=ue.next())for(at=Fh(ce,Qe=Qe.value,_e),Qe=(Ct=i(Qe.variantIds)).next();!Qe.done;Qe=Ct.next())(Qe=ut.get(Qe.value)).language=at.language,Qe.primary=Qe.primary||at.primary,Qe.audio=at;for(ue=(Ie=i(Ie)).next();!ue.done;ue=Ie.next())for(ue=Fh(ce,Qe=ue.value,_e),Qe=(at=i(Qe.variantIds)).next();!Qe.done;Qe=at.next())(Qe=ut.get(Qe.value)).primary=Qe.primary||ue.primary,Qe.video=ue;return ut}(e,w,O,o),O=n.streams.filter(function(ce){return ce.type==Tr}).map(function(ce){return Fh(e,ce,o)});var L=n.streams.filter(function(ce){return ce.type=="image"}).map(function(ce){return Fh(e,ce,o)}),F=n.drmInfo?[n.drmInfo]:[];if(n.drmInfo)for(var q=i(w.values()),$=q.next();!$.done;$=q.next())($=$.value).audio&&$.audio.encrypted&&($.audio.drmInfos=F),$.video&&$.video.encrypted&&($.video.drmInfos=F);return{presentationTimeline:o,minBufferTime:2,offlineSessionIds:n.sessionIds,variants:Array.from(w.values()),textStreams:O,imageStreams:L,sequenceMode:n.sequenceMode||!1}}function Fh(e,n,o){var w=n.segments.map(function(O){return function(L,F){var q=new zs("segment",L.h,L.g,F.dataKey);return new mn(F.startTime,F.endTime,function(){return[q.toString()]},0,null,F.initSegmentKey!=null?function($,ce){var ue=new zs("segment",$.h,$.g,ce);return new Cn(function(){return[ue.toString()]},0,null)}(L,F.initSegmentKey):null,F.timestampOffset,F.appendWindowStart,F.appendWindowEnd,[],F.tilesLayout||"")}(e,O)});return o.Ib(w),{id:n.id,originalId:n.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new er(w),mimeType:n.mimeType,codecs:n.codecs,width:n.width||void 0,height:n.height||void 0,frameRate:n.frameRate,pixelAspectRatio:n.pixelAspectRatio,hdr:n.hdr,kind:n.kind,encrypted:n.encrypted,drmInfos:[],keyIds:n.keyIds,language:n.language,label:n.label,type:n.type,primary:n.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:n.roles,forced:n.forced,channelsCount:n.channelsCount,audioSamplingRate:n.audioSamplingRate,spatialAudio:n.spatialAudio,closedCaptions:n.closedCaptions,tilesLayout:n.tilesLayout}}function ME(){this.g=null}function FE(){}function UE(e){var n=Em(e);return e=n&&n.g=="manifest"?Gs(e={uri:e,Oe:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):n&&n.g=="segment"?function(o,w){var O=new Do;return Gs(void 0).Y(function(){return O.init()}).Y(function(){return Lh(O,w.za(),w.ja())}).Y(function(L){return L.getSegments([w.key()])}).Y(function(L){return{uri:w,data:L[0].data,headers:{}}}).finally(function(){return O.destroy()})}(n.key(),n):vs(new ht(2,1,9004,e))}function BE(e,n,o){var w,O,L,F,q,$;return W(function(ce){switch(ce.g){case 1:w=[];for(var ue=[],Ie=i(o),_e=Ie.next();!_e.done;_e=Ie.next()){_e=_e.value;for(var Qe=!1,ut=i(ue),at=ut.next();!at.done;at=ut.next())if(ZS((at=at.value).info,_e)){at.sessionIds.push(_e.sessionId),Qe=!0;break}Qe||ue.push({info:_e,sessionIds:[_e.sessionId]})}O=i(ue),L=O.next();case 2:if(L.done){ce.A(4);break}return F=L.value,q=function(Ct,yt,Lt){var jt,Zt;return W(function(sn){switch(sn.g){case 1:return jt=new bl({kb:yt,onError:function(){},cd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),p(sn,2),jt.configure(Ct),f(sn,function(Xt,Gt,bn,Tn,Ut,ln){var Rn=new Map;return(Ut={audioCapabilities:Ut,videoCapabilities:ln,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:Gt}).drmInfos=[{keySystem:Gt,licenseServerUri:bn,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:Tn,serverCertificateUri:"",initData:null,keyIds:null}],Rn.set(Gt,Ut),jd(Xt,Rn,[])}(jt,Lt.info.keySystem,Lt.info.licenseUri,Lt.info.serverCertificate,Lt.info.audioCapabilities,Lt.info.videoCapabilities),4);case 4:P(sn,3);break;case 2:return j(sn),f(sn,jt.destroy(),5);case 5:case 9:return sn.return([]);case 3:return p(sn,6),f(sn,uf(jt),8);case 8:P(sn,7);break;case 6:return j(sn),f(sn,jt.destroy(),9);case 7:return Zt=[],f(sn,Promise.all(Lt.sessionIds.map(function(Xt){return W(function(Gt){return Gt.g==1?(p(Gt,2),f(Gt,function(bn,Tn){var Ut,ln,Rn;return W(function(cn){return cn.g==1?f(cn,Gd(bn,Tn),2):cn.g!=3?(Ut=cn.h)?(ln=[],(Rn=bn.i.get(Ut))&&(Rn.Ja=new xi,ln.push(Rn.Ja)),ln.push(Ut.remove()),f(cn,Promise.all(ln),3)):cn.return():(bn.i.delete(Ut),void b(cn))})}(jt,Xt),4)):Gt.g!=2?(Zt.push(Xt),P(Gt,0)):(j(Gt),void b(Gt))})})),10);case 10:return f(sn,jt.destroy(),11);case 11:return sn.return(Zt)}})}(e,n,F),f(ce,q,5);case 5:$=ce.h,w=w.concat($),L=O.next(),ce.A(2);break;case 4:return ce.return(w)}})}function ZS(e,n){function o(w,O){return w.robustness==O.robustness&&w.contentType==O.contentType}return e.keySystem==n.keySystem&&e.licenseUri==n.licenseUri&&ke(e.audioCapabilities,n.audioCapabilities,o)&&ke(e.videoCapabilities,n.videoCapabilities,o)}function bm(e,n){var o=LE(new xE(e.za(),e.ja()),n),w=n.appMetadata||{};return o=jE(o),{offlineUri:e.toString(),originalManifestUri:n.originalManifestUri,duration:n.duration,size:n.size,expiration:n.expiration,tracks:o,appMetadata:w,isIncomplete:n.isIncomplete||!1}}function jE(e){for(var n=[],o=function(O){return O.filter(function(L){return au(L)})}(e.variants),w=(o=i(o)).next();!w.done;w=o.next())n.push(iu(w.value));for(o=(e=i(e.textStreams)).next();!o.done;o=e.next())n.push(ol(o.value));return n}function KS(){this.g={}}function qS(e,n){var o=n.audio,w=n.video;if(o&&!w&&(e.g[o.id]=o.bandwidth||n.bandwidth),!o&&w&&(e.g[w.id]=w.bandwidth||n.bandwidth),o&&w){var O=o.bandwidth||393216,L=w.bandwidth||n.bandwidth-O;0>=L&&(L=n.bandwidth),e.g[o.id]=O,e.g[w.id]=L}}function YS(e,n){e.g[n.id]=n.bandwidth||2048}function GE(e,n){return(e=e.g[n])==null&&(e=0),e}function Ja(e){var n=this;if(e&&e.constructor!=Ln)throw new ht(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.jc()):(this.h=mc(),this.g=new Hi),this.i=[],this.j=[];var o=!e;this.l=new Vs(function(){var w,O,L,F,q;return W(function($){switch($.g){case 1:return f($,Promise.all(n.j.map(function(ce){return gm(ce)})),2);case 2:for(w=function(){},O=[],L=i(n.i),F=L.next();!F.done;F=L.next())q=F.value,O.push(q.then(w,w));return f($,Promise.all(O),3);case 3:if(!o){$.A(4);break}return f($,n.g.destroy(),4);case 4:n.h=null,n.g=null,b($)}})})}function Tm(){if(kn())e:{for(var e=i(xf.values()),n=e.next();!n.done;n=e.next())if(n=(n=n.value)()){n.destroy(),e=!0;break e}e=!1}else e=!1;return e}function HE(e){var n,o,w;return W(function(O){switch(O.g){case 1:return f(O,(n=new Do).init(),2);case 2:return f(O,OE(n),3);case 3:return o=O.h,w=new zs("manifest",o.path.za,o.path.ja,e),f(O,n.destroy(),4);case 4:return f(O,new Ja().remove(w.toString()),0)}})}function VE(e,n,o,w,O,L){var F,q,$,ce,ue,Ie,_e,Qe,ut,at,Ct;return W(function(yt){switch(yt.g){case 1:for(F=!1,p(yt,2),q=!0,$=i(o.streams),ce=$.next();!ce.done;ce=$.next())for(ue=ce.value,Ie=i(ue.segments),_e=Ie.next();!_e.done;_e=Ie.next())Qe=_e.value,(ut=Qe.pendingSegmentRefId?w[Qe.pendingSegmentRefId]:null)!=null&&(Qe.dataKey=ut,Qe.pendingSegmentRefId=void 0),(ut=Qe.pendingInitSegmentRefId?w[Qe.pendingInitSegmentRefId]:null)!=null&&(Qe.initSegmentKey=ut,Qe.pendingInitSegmentRefId=void 0),Qe.pendingSegmentRefId&&(q=!1),Qe.pendingInitSegmentRefId&&(q=!1);return o.size+=O,q&&(o.isIncomplete=!1),f(yt,e.updateManifest(n,o),4);case 4:F=!0,L(),P(yt,0);break;case 2:return at=j(yt),f(yt,HE(n),5);case 5:if(F){yt.A(6);break}return Ct=Object.values(w),f(yt,e.removeSegments(Ct,function(){}),6);case 6:throw at}})}function _m(e){return e.variants.some(function(n){var o=n.audio&&n.audio.encrypted;return n.video&&n.video.encrypted||o})}function ZE(e){return e.variants.some(function(n){return(n.video?n.video.drmInfos:[]).concat(n.audio?n.audio.drmInfos:[]).some(function(o){return o.initData&&o.initData.length})})}function KE(e,n){for(var o=[],w=i(e.streams),O=w.next();!O.done;O=w.next())O=O.value,n&&O.type=="video"?o.push({contentType:ma(O.mimeType,O.codecs),robustness:e.drmInfo.videoRobustness}):n||O.type!="audio"||o.push({contentType:ma(O.mimeType,O.codecs),robustness:e.drmInfo.audioRobustness});return o}function zS(e,n,o){return W(function(w){return f(w,function(O,L,F,q){var $,ce,ue;return W(function(Ie){return Ie.g==1?q.drmInfo?($=function(_e){var Qe=Array.from(_e.g.keys());if(!Qe.length)throw new ht(2,9,9e3,"No supported storage mechanisms found");return _e.g.get(Qe[0]).getEmeSessionCell()}(F),ce=q.sessionIds.map(function(_e){return{sessionId:_e,keySystem:q.drmInfo.keySystem,licenseUri:q.drmInfo.licenseServerUri,serverCertificate:q.drmInfo.serverCertificate,audioCapabilities:KE(q,!1),videoCapabilities:KE(q,!0)}}),f(Ie,BE(L,O,ce),2)):Ie.return():Ie.g!=3?(ue=Ie.h,f(Ie,$.remove(ue),3)):f(Ie,$.add(ce.filter(function(_e){return!ue.includes(_e.sessionId)})),0)})}(e.g,e.h.drm,o,n),0)})}function WS(e,n,o){function w(){}var O=function(L){for(var F=new Set,q=(L=i(L.streams)).next();!q.done;q=L.next())for(var $=(q=i(q.value.segments)).next();!$.done;$=q.next())($=$.value).initSegmentKey!=null&&F.add($.initSegmentKey),F.add($.dataKey);return Array.from(F)}(o);return bm(n,o),Promise.all([e.removeSegments(O,w),e.removeManifests([n.key()],w)])}function XS(e,n,o,w,O,L){var F={id:w.id,originalId:w.originalId,primary:w.primary,type:w.type,mimeType:w.mimeType,codecs:w.codecs,frameRate:w.frameRate,pixelAspectRatio:w.pixelAspectRatio,hdr:w.hdr,kind:w.kind,language:w.language,label:w.label,width:w.width||null,height:w.height||null,encrypted:w.encrypted,keyIds:w.keyIds,segments:[],variantIds:[],roles:w.roles,forced:w.forced,channelsCount:w.channelsCount,audioSamplingRate:w.audioSamplingRate,spatialAudio:w.spatialAudio,closedCaptions:w.closedCaptions,tilesLayout:w.tilesLayout},q=O.offline.numberOfParallelDownloads,$=0;return function(ce,ue,Ie){if((ue=ce.segmentIndex.find(ue))!=null)for(var _e=ce.segmentIndex.get(ue);_e;)Ie(_e),_e=ce.segmentIndex.get(++ue)}(w,o.presentationTimeline.Oa(),function(ce){var ue=pm(ce),Ie=void 0;if(!L.has(ue)){var _e=ce.endTime-ce.startTime;_e=GE(n,w.id)*_e,_e=wE(e.g,_e),L.set(ue,new SE(ce,_e,$,!1))}ce.h&&(Ie=pm(ce.h),L.has(Ie)||(_e=.5*GE(n,w.id),_e=wE(e.g,_e),L.set(Ie,new SE(ce.h,_e,$,!0)))),F.segments.push({pendingInitSegmentRefId:Ie,initSegmentKey:Ie?0:null,startTime:ce.startTime,endTime:ce.endTime,appendWindowStart:ce.appendWindowStart,appendWindowEnd:ce.appendWindowEnd,timestampOffset:ce.timestampOffset,tilesLayout:ce.tilesLayout,pendingSegmentRefId:ue,dataKey:0}),$=($+1)%q}),F}function go(e){if(e.l.g)throw new ht(2,9,7001)}function Uh(){if(!Tm())throw new ht(2,9,9e3)}function Sm(e,n){return W(function(o){return o.g==1?(e.i.push(n),k(o),f(o,n,4)):o.g!=2?o.return(o.h):(U(o),me(e.i,n),G(o,0))})}function qE(e){for(var n=new Set,o=i(e.textStreams),w=o.next();!w.done;w=o.next())n.add(w.value);for(w=(o=i(e.imageStreams)).next();!w.done;w=o.next())n.add(w.value);for(o=(e=i(e.variants)).next();!o.done;o=e.next())(o=o.value).audio&&n.add(o.audio),o.video&&n.add(o.video);return n}S(Lf,Ol),Lf.prototype.updateManifestExpiration=function(e,n){var o,w,O,L=this;return W(function(F){return o=kl(L.h,L.g),w=o.store(),O=new xi,w.get(e).onsuccess=function(q){(q=q.target.result)?(q.expiration=n,w.put(q),O.resolve()):O.reject(new ht(2,9,9012,"Could not find values for "+e))},f(F,Promise.all([o.promise(),O]),0)})},Lf.prototype.bc=function(e){var n,o,w,O,L,F;return W(function(q){if(q.g==1){for(n=[],o=0;o<e.periods.length;++o)w=o==e.periods.length-1?e.duration:e.periods[o+1].startTime,O=w-e.periods[o].startTime,L=HS(e.periods[o],O),n.push(L);return f(q,L0(n),2)}return F=q.h,q.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:F,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})},Lf.prototype.ye=function(e){return{data:e.data}},S(Mh,Ol),Mh.prototype.bc=function(e){var n,o,w,O,L,F;return W(function(q){if(q.g==1){for(n=[],o=0;o<e.periods.length;++o){w=o==e.periods.length-1?e.duration:e.periods[o+1].startTime,O=w-e.periods[o].startTime;for(var $=e.periods[o],ce=[],ue=i($.streams),Ie=ue.next();!Ie.done;Ie=ue.next())(Ie=Ie.value).variantIds.length!=0&&ce.push(VS(Ie,$.startTime,$.startTime+O));L=ce,n.push(L)}return f(q,L0(n),2)}return F=q.h,q.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:F,sequenceMode:!1})})},S(ym,Ol),(E=ym.prototype).hasFixedKeySpace=function(){return!1},E.addSegments=function(e){return this.add(this.i,e)},E.addManifests=function(e){return this.add(this.g,e)},E.updateManifest=function(e,n){return function(o,w,O){var L=(o=kl(o.h,o.g)).store();return L.get(w).onsuccess=function(){L.put(O,w)},o.promise()}(this,e,n)},E.bc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)},(E=NE.prototype).init=function(){var e=this,n=new xi,o=!1,w=new ni(function(){o=!0,n.reject(new ht(2,9,9017))});w.N(2);var O=C.indexedDB.open("shaka_offline_db",5);return O.onsuccess=function(){if(!o){var L=O.result;e.l=L;var F=L.objectStoreNames;F=F.contains("manifest")&&F.contains("segment")?new Lf(L,"segment","manifest"):null,e.g=F,F=(F=L.objectStoreNames).contains("manifest-v2")&&F.contains("segment-v2")?new Mh(L,"segment-v2","manifest-v2"):null,e.h=F,F=(F=L.objectStoreNames).contains("manifest-v3")&&F.contains("segment-v3")?new Mh(L,"segment-v3","manifest-v3"):null,e.i=F,F=(F=L.objectStoreNames).contains("manifest-v5")&&F.contains("segment-v5")?new ym(L,"segment-v5","manifest-v5"):null,e.j=F,L=L.objectStoreNames.contains("session-ids")?new Nf(L):null,e.m=L,w.stop(),n.resolve()}},O.onupgradeneeded=function(){for(var L=O.result,F=i(["segment-v5","manifest-v5","session-ids"]),q=F.next();!q.done;q=F.next())q=q.value,L.objectStoreNames.contains(q)||L.createObjectStore(q,{autoIncrement:!0})},O.onerror=function(L){o||(n.reject(new ht(2,9,9001,O.error)),w.stop(),L.preventDefault())},n},E.destroy=function(){var e=this;return W(function(n){switch(n.g){case 1:if(!e.g){n.A(2);break}return f(n,e.g.destroy(),2);case 2:if(!e.h){n.A(4);break}return f(n,e.h.destroy(),4);case 4:if(!e.i){n.A(6);break}return f(n,e.i.destroy(),6);case 6:if(!e.j){n.A(8);break}return f(n,e.j.destroy(),8);case 8:if(!e.m){n.A(10);break}return f(n,e.m.destroy(),10);case 10:e.l&&e.l.close(),b(n)}})},E.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},E.getEmeSessionCell=function(){return this.m},E.erase=function(){var e=this;return W(function(n){switch(n.g){case 1:if(!e.g){n.A(2);break}return f(n,e.g.destroy(),2);case 2:if(!e.h){n.A(4);break}return f(n,e.h.destroy(),4);case 4:if(!e.i){n.A(6);break}return f(n,e.i.destroy(),6);case 6:if(!e.j){n.A(8);break}return f(n,e.j.destroy(),8);case 8:return e.l&&e.l.close(),f(n,function(){var o=new xi,w=C.indexedDB.deleteDatabase("shaka_offline_db");return w.onblocked=function(){},w.onsuccess=function(){o.resolve()},w.onerror=function(O){o.reject(new ht(2,9,9001,w.error)),O.preventDefault()},o}(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,f(n,e.init(),0)}})},DE("idb",function(){return ai("CrKey")||$r()||!C.indexedDB?null:new NE}),zs.prototype.za=function(){return this.i},zs.prototype.ja=function(){return this.h},zs.prototype.key=function(){return this.l},zs.prototype.toString=function(){return this.j},(E=ME.prototype).configure=function(){},E.start=function(e,n){var o,w,O,L,F,q,$=this;return W(function(ce){switch(ce.g){case 1:if(o=Em(e),$.g=o,o==null||o.g!="manifest")throw new ht(2,1,9004,e);return w=new Do,k(ce),f(ce,w.init(),4);case 4:return f(ce,Lh(w,o.za(),o.ja()),5);case 5:return f(ce,ce.h.getManifests([o.key()]),6);case 6:return O=ce.h,L=O[0],F=new xE(o.za(),o.ja()),q=LE(F,L),n.makeTextStreamsForClosedCaptions(q),ce.return(q);case 2:return U(ce),f(ce,w.destroy(),7);case 7:G(ce,0)}})},E.stop=function(){return Promise.resolve()},E.update=function(){},E.onExpirationUpdated=function(e,n){var o,w,O,L,F,q,$,ce=this;return W(function(ue){switch(ue.g){case 1:return o=ce.g,w=new Do,p(ue,2,3),f(ue,w.init(),5);case 5:return f(ue,Lh(w,o.za(),o.ja()),6);case 6:return f(ue,(O=ue.h).getManifests([o.key()]),7);case 7:if(L=ue.h,F=L[0],q=F.sessionIds.includes(e),$=F.expiration==null||F.expiration>n,!q||!$){ue.A(3);break}return f(ue,O.updateManifestExpiration(o.key(),n),3);case 3:return U(ue),f(ue,w.destroy(),10);case 10:G(ue,0);break;case 2:j(ue),ue.A(3)}})},Lo["application/x-offline-manifest"]=function(){return new ME},Q("shaka.offline.OfflineScheme",FE),FE.plugin=UE,Es("offline",UE),(E=Ja.prototype).destroy=function(){return this.l.destroy()},E.configure=function(e,n){return arguments.length==2&&typeof e=="string"&&(e=Tg(e,n)),vc(this.h,e)},E.getConfiguration=function(){var e=mc();return vc(e,this.h,mc()),e},E.jc=function(){return this.g},E.store=function(e,n,o){var w=this,O=this.getConfiguration(),L=new IE(this.g);return this.j.push(L),n=function(F,q,$,ce,ue,Ie){var _e,Qe,ut,at,Ct,yt,Lt,jt,Zt,sn,Xt,Gt,bn;return W(function(Tn){switch(Tn.g){case 1:return Uh(),Qe=_e=null,ut=new Do,yt=Ct=at=null,p(Tn,2,3),f(Tn,ce(),5);case 5:return _e=Tn.h,f(Tn,function(Ut,ln,Rn,cn){var Dn,Jn,Fn,An,Hn;return W(function(Gn){if(Gn.g==1)return Dn=null,Jn=Ut.g,Fn={networkingEngine:Jn,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(rr){Dn=rr},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){}},Rn.configure(cn.manifest),go(Ut),f(Gn,Rn.start(ln,Fn),2);if(Gn.g!=3)return An=Gn.h,go(Ut),Hn=qE(An),f(Gn,Promise.all(Jc(Hn,function(rr){return rr.createSegmentIndex()})),3);if(go(Ut),Dn)throw Dn;return Gn.return(An)})}(F,q,_e,ue),6);case 6:if(Lt=Tn.h,go(F),Lt.presentationTimeline.T()||Lt.presentationTimeline.jb())throw new ht(2,9,9005,q);return f(Tn,function(Ut,ln,Rn,cn){var Dn;return W(function(Jn){switch(Jn.g){case 1:return(Dn=new bl({kb:Ut.g,onError:Rn,cd:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(cn.drm),f(Jn,function(Fn,An,Hn){return Fn.da=!0,Fn.B=[],Fn.L=Hn,sf(Fn,An)}(Dn,ln.variants,cn.offline.usePersistentLicense),2);case 2:return f(Jn,uf(Dn),3);case 3:return f(Jn,Ud(Dn),4);case 4:return Jn.return(Dn)}})}(F,Lt,function(Ut){yt=yt||Ut},ue),7);case 7:if(Qe=Tn.h,go(F),yt)throw yt;return f(Tn,function(Ut,ln){var Rn,cn,Dn,Jn,Fn,An,Hn,Gn,rr,br,dr,cr,Qn,Kn,Vn,tr,qn,Er,hr,Ur,Wr,ua,Di,Ki,Qi,Ii,xr,ti;return W(function(Kr){switch(Kr.g){case 1:return Rn={width:1/0,height:1/0},function(xn,kr,li){xn.variants=xn.variants.filter(function(Pr){return Fs(Pr,kr,li)})}(Ut,ln.restrictions,Rn),f(Kr,ns(Ut,ln.offline.usePersistentLicense),2);case 2:for(cn=[],Dn=ln.preferredAudioChannelCount,Jn=ln.preferredDecodingAttributes,Fn=ln.preferredVideoCodecs,An=ln.preferredAudioCodecs,ps(Ut,Fn,An,Dn,Jn),Hn=i(Ut.variants),Gn=Hn.next();!Gn.done;Gn=Hn.next())rr=Gn.value,cn.push(iu(rr));for(br=i(Ut.textStreams),dr=br.next();!dr.done;dr=br.next())cr=dr.value,cn.push(ol(cr));for(Qn=i(Ut.imageStreams),Kn=Qn.next();!Kn.done;Kn=Qn.next())Vn=Kn.value,cn.push(Yc(Vn));return f(Kr,ln.offline.trackSelectionCallback(cn),3);case 3:for(tr=Kr.h,qn=Ut.presentationTimeline.getDuration(),Er=0,hr=i(tr),Ur=hr.next();!Ur.done;Ur=hr.next())Wr=Ur.value,ua=Wr.bandwidth*qn/8,Er+=ua;return p(Kr,4),f(Kr,ln.offline.downloadSizeCallback(Er),6);case 6:if(!Kr.h)throw new ht(2,9,9014);P(Kr,5);break;case 4:throw(Di=j(Kr))instanceof ht?Di:new ht(2,9,9015);case 5:for(Ki=new Set,Qi=new Set,Ii=new Set,xr=i(tr),Ur=xr.next();!Ur.done;Ur=xr.next())(ti=Ur.value).type=="variant"&&Ki.add(ti.id),ti.type=="text"&&Qi.add(ti.id),ti.type=="image"&&Ii.add(ti.id);Ut.variants=Ut.variants.filter(function(xn){return Ki.has(xn.id)}),Ut.textStreams=Ut.textStreams.filter(function(xn){return Qi.has(xn.id)}),Ut.imageStreams=Ut.imageStreams.filter(function(xn){return Ii.has(xn.id)}),function(xn){xn.variants.map(function(Ti){return Ti.video});var kr=new Set(xn.variants.map(function(Ti){return Ti.audio}));xn=xn.textStreams;for(var li=i(kr),Pr=li.next();!Pr.done;Pr=li.next())for(var ii=(Pr=i(kr)).next();!ii.done;ii=Pr.next());for(li=(kr=i(xn)).next();!li.done;li=kr.next())for(Pr=(li=i(xn)).next();!Pr.done;Pr=li.next());}(Ut),b(Kr)}})}(Lt,ue),8);case 8:return f(Tn,ut.init(),9);case 9:return go(F),f(Tn,OE(ut),10);case 10:return at=Tn.h,go(F),jt=function(Ut,ln,Rn,cn,Dn,Jn){var Fn=function(cr,Qn,Kn){return{offlineUri:null,originalManifestUri:cr,duration:Qn.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:Qn=jE(Qn),appMetadata:Kn,isIncomplete:!1}}(Rn,ln,cn),An=Dn.offline.progressCallback;(function(cr,Qn,Kn){cr.m=function(Vn,tr){Fn.size=tr,An(Fn,Vn)},cr.l=Kn})(Jn,0,function(cr,Qn){Hn&&Dn.offline.usePersistentLicense&&Gn==Qn&&xu(Ut,"cenc",cr)});var Hn=_m(ln)&&!ZE(ln),Gn=null;Hn&&(Gn=QS.get(Ut.g.keySystem));for(var rr=new KS,br=i(ln.textStreams),dr=br.next();!dr.done;dr=br.next())rr.g[dr.value.id]=52;for(dr=(br=i(ln.imageStreams)).next();!dr.done;dr=br.next())YS(rr,dr.value);for(br=(dr=i(ln.variants)).next();!br.done;br=dr.next())qS(rr,br.value);return rr=function(cr,Qn,Kn,Vn){for(var tr=new Map,qn=qE(Kn),Er=new Map,hr=(qn=i(qn)).next();!hr.done;hr=qn.next()){var Ur=XS(cr,Qn,Kn,hr=hr.value,Vn,tr);Er.set(hr.id,Ur)}for(Qn=(cr=i(Kn.variants)).next();!Qn.done;Qn=cr.next())(Qn=Qn.value).audio&&Er.get(Qn.audio.id).variantIds.push(Qn.id),Qn.video&&Er.get(Qn.video.id).variantIds.push(Qn.id);return{streams:Array.from(Er.values()),oe:Array.from(tr.values())}}(Jn,rr,ln,Dn),Jn=rr.streams,rr=rr.oe,dr=Ut.g,br=Dn.offline.usePersistentLicense,dr&&br&&(dr.initData=[]),{ag:{creationTime:Date.now(),originalManifestUri:Rn,duration:ln.presentationTimeline.getDuration(),size:0,expiration:Ut.ic(),streams:Jn,sessionIds:br?lf(Ut):[],drmInfo:dr,appMetadata:cn,isIncomplete:!0,sequenceMode:ln.sequenceMode},oe:rr}}(Qe,Lt,q,$,ue,Ie),Zt=jt.ag,sn=jt.oe,f(Tn,at.ja.addManifests([Zt]),11);case 11:if(Xt=Tn.h,go(F),Ct=Xt[0],go(F),yt)throw yt;return f(Tn,function(Ut,ln,Rn,cn,Dn,Jn,Fn,An,Hn){var Gn,rr,br,dr,cr,Qn,Kn,Vn,tr,qn;return W(function(Er){switch(Er.g){case 1:if(Gn={},rr=0,br=function(hr,Ur){var Wr,ua,Di,Ki,Qi,Ii,xr;return W(function(ti){if(ti.g==1){for(Wr={},ua=i(hr),Di=ua.next();!Di.done;Wr={cb:Wr.cb},Di=ua.next())Wr.cb=Di.value,Ki=jS(Wr.cb,Jn),Qi=Wr.cb.i,Ii=Wr.cb.h,xr=function(Kr){return function(xn){var kr,li,Pr;return W(function(ii){if(ii.g==1)return f(ii,Fn.addSegments([{data:xn}]),2);kr=ii.h,go(Ut),li=Kr.cb.g,Pr=pm(li),Gn[Pr]=kr[0],rr+=xn.byteLength,b(ii)})}}(Wr),GS(Dn,Wr.cb.groupId,Ki,Qi,Ii,xr);return f(ti,function(Kr){return W(function(xn){return xn.g==1?f(xn,Promise.all(Kr.j.values()),2):xn.return(Kr.g.h)})}(Dn),2)}return Ur?(go(Ut),function(Kr,xn,kr,li){if(xn.expiration=kr.ic(),kr=lf(kr),xn.sessionIds=li.offline.usePersistentLicense?kr:[],_m(Kr)&&li.offline.usePersistentLicense&&!kr.length)throw new ht(2,9,9007)}(An,cn,Hn,Jn),f(ti,Fn.updateManifest(Rn,cn),0)):ti.A(0)})},dr=!1,p(Er,2),!_m(An)||!dr||ZE(An)){Er.A(4);break}return f(Er,br(ln.filter(function(hr){return hr.h}),!0),5);case 5:return go(Ut),ln=ln.filter(function(hr){return!hr.h}),cr=Gn,Qn=rr,Gn={},rr=0,f(Er,VE(Fn,Rn,cn,cr,Qn,function(){return go(Ut)}),6);case 6:go(Ut);case 4:if(dr){Er.A(7);break}return f(Er,br(ln,!1),8);case 8:return go(Ut),Kn=Gn,Vn=rr,Gn={},rr=0,f(Er,VE(Fn,Rn,cn,Kn,Vn,function(){return go(Ut)}),9);case 9:go(Ut);case 7:P(Er,0);break;case 2:return tr=j(Er),qn=Object.values(Gn),f(Er,Fn.removeSegments(qn,function(){}),10);case 10:throw tr}})}(F,sn,Ct,Zt,Ie,ue,at.ja,Lt,Qe),12);case 12:return go(F),Gt=new zs("manifest",at.path.za,at.path.ja,Ct),Tn.return(bm(Gt,Zt));case 3:return U(Tn),f(Tn,ut.destroy(),13);case 13:if(!_e){Tn.A(14);break}return f(Tn,_e.stop(),14);case 14:if(!Qe){Tn.A(16);break}return f(Tn,Qe.destroy(),16);case 16:G(Tn,0);break;case 2:if(bn=j(Tn),Ct==null){Tn.A(18);break}return f(Tn,HE(Ct),18);case 18:throw yt||bn}})}(this,e,n||{},function(){var F;return W(function(q){return q.g==1?f(q,Kd(e,w.g,O.manifest.retryParameters,o||null),2):(F=q.h,q.return(F()))})},O,L),(n=new ya(n,function(){return gm(L)})).finally(function(){me(w.j,L)}),function(F,q){var $=q.promise;return F.i.push($),q.finally(function(){me(F.i,$)})}(this,n)},E.remove=function(e){return Sm(this,function(n,o){var w,O,L,F,q,$;return W(function(ce){switch(ce.g){case 1:if(Uh(),(w=Em(o))==null||w.g!="manifest")throw new ht(2,9,9004,o);return O=w,L=new Do,k(ce),f(ce,L.init(),4);case 4:return f(ce,Lh(L,O.za(),O.ja()),5);case 5:return f(ce,(F=ce.h).getManifests([O.key()]),6);case 6:return q=ce.h,$=q[0],f(ce,Promise.all([zS(n,$,L),WS(F,O,$)]),2);case 2:return U(ce),f(ce,L.destroy(),8);case 8:G(ce,0)}})}(this,e))},E.pg=function(){return Sm(this,function(e){var n,o,w,O,L,F,q,$,ce,ue;return W(function(Ie){switch(Ie.g){case 1:return Uh(),n=e.g,o=e.h.drm,w=new Do,O=!1,k(Ie),f(Ie,w.init(),4);case 4:L=[],function(_e,Qe){_e.g.forEach(function(ut){var at;at=ut.getEmeSessionCell(),L.push(at)})}(w),F=i(L),q=F.next();case 5:if(q.done){Ie.A(2);break}return f(Ie,($=q.value).getAll(),8);case 8:return ce=Ie.h,f(Ie,BE(o,n,ce),9);case 9:return ue=Ie.h,f(Ie,$.remove(ue),10);case 10:ue.length!=ce.length&&(O=!0),q=F.next(),Ie.A(5);break;case 2:return U(Ie),f(Ie,w.destroy(),11);case 11:G(Ie,3);break;case 3:return Ie.return(!O)}})}(this))},E.list=function(){return Sm(this,function(){var e,n,o;return W(function(w){switch(w.g){case 1:return Uh(),e=[],n=new Do,k(w),f(w,n.init(),4);case 4:return o=Promise.resolve(),function(O,L){O.g.forEach(function(F,q){F.getCells().forEach(function($,ce){L({za:q,ja:ce},$)})})}(n,function(O,L){o=o.then(function(){return W(function(F){if(F.g==1)return f(F,L.getAllManifests(),2);F.h.forEach(function(q,$){q=bm(new zs("manifest",O.za,O.ja,$),q),e.push(q)}),b(F)})})}),f(w,o,2);case 2:return U(w),f(w,n.destroy(),6);case 6:G(w,3);break;case 3:return w.return(e)}})}())},Q("shaka.offline.Storage",Ja),Ja.deleteAll=function(){var e;return W(function(n){return n.g==1?(e=new Do,k(n),f(n,function(o){var w,O;return W(function(L){return L.g==1?(w=Array.from(o.g.values()),(O=0<w.length)||xf.forEach(function(F){(F=F())&&w.push(F)}),f(L,Promise.all(w.map(function(F){return F.erase()})),2)):O?L.A(0):f(L,Promise.all(w.map(function(F){return F.destroy()})),0)})}(e),2)):n.g!=5?(U(n),f(n,e.destroy(),5)):G(n,0)})},Ja.prototype.list=Ja.prototype.list,Ja.prototype.removeEmeSessions=Ja.prototype.pg,Ja.prototype.remove=Ja.prototype.remove,Ja.prototype.store=Ja.prototype.store,Ja.prototype.getNetworkingEngine=Ja.prototype.jc,Ja.prototype.getConfiguration=Ja.prototype.getConfiguration,Ja.prototype.configure=Ja.prototype.configure,Ja.prototype.destroy=Ja.prototype.destroy,Ja.support=Tm;var QS=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function ro(){}function So(e,n){for(e={priority:n||0,mf:e},n=0;n<Mf.length;n++)if(Mf[n].priority<e.priority)return void Mf.splice(n,0,e);Mf.push(e)}Mg.offline=Tm,Q("shaka.polyfill",ro),ro.register=So,ro.installAll=function(){for(var e=i(Mf),n=e.next();!n.done;n=e.next()){n=n.value;try{n.mf()}catch(o){z("Error installing polyfill!",o)}}};var Mf=[];function Ff(){this.g=new Bh}function YE(){C.AbortController||(C.AbortController=Ff,C.AbortSignal=Bh)}function Bh(){wi.call(this),this.h=!1,this.g=void 0,this.onabort=null}function zE(){}function WE(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=i(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),n=e.next();!n.done;n=e.next())$S(n.value)}function $S(e){var n="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(n)},set:function(o){o==null||o==null?this.removeAttribute(n):this.setAttribute(n,o)}})}function XE(){}function QE(){oT()}function $E(){}function JE(){if(C.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,(e=Document.prototype).exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Ic),document.addEventListener("webkitfullscreenerror",Ic),document.addEventListener("mozfullscreenchange",Ic),document.addEventListener("mozfullscreenerror",Ic),document.addEventListener("MSFullscreenChange",Ic),document.addEventListener("MSFullscreenError",Ic)}}function Ic(e){var n=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),o=document.createEvent("Event");o.initEvent(n,e.bubbles,e.cancelable),e.target.dispatchEvent(o)}function Am(){}function eb(){var e=!0;(ta()||ai("PlayStation 5")||Li()||ai("Web0S")||Ji()||ai("CrKey")||ai("PC=EOS"))&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),tb=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=JS)}function JS(e){var n,o,w,O,L,F,q,$,ce,ue;return W(function(Ie){switch(Ie.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return Ie.return(n);if(o=e.video,w=e.audio,e.type=="media-source"){if(!kn())return Ie.return(n);if(o){if(ai("CrKey")){if(!C.cast)throw new ht(2,8,8e3);if(cast.__platform__&&cast.__platform__.canDisplayType){var _e=o.contentType;o.width&&o.height&&(_e+="; width="+o.width+"; height="+o.height),o.framerate&&(_e+="; framerate="+o.framerate),o.transferFunction==="pq"&&(_e+="; eotf=smpte2084"),_e=cast.__platform__.canDisplayType(_e)}else _e=Ye(o.contentType)}else _e=Ye(o.contentType);if(!_e)return Ie.return(n)}if(w&&!Ye(w.contentType))return Ie.return(n)}else if(e.type!="file"||o&&!nr(o.contentType)||w&&!nr(w.contentType))return Ie.return(n);return e.keySystemConfiguration?(O=e.keySystemConfiguration,L=[],F=[],O.audio&&(q={robustness:O.audio.robustness||"",contentType:e.audio.contentType},L.push(q)),O.video&&($={robustness:O.video.robustness||"",contentType:e.video.contentType},F.push($)),ce={initDataTypes:[O.initDataType],distinctiveIdentifier:O.distinctiveIdentifier,persistentState:O.persistentState,sessionTypes:O.sessionTypes},L.length&&(ce.audioCapabilities=L),F.length&&(ce.videoCapabilities=F),p(Ie,3),f(Ie,navigator.requestMediaKeySystemAccess(O.keySystem,[ce]),5)):(n.supported=!0,Ie.return(Promise.resolve(n)));case 5:ue=Ie.h,P(Ie,4);break;case 3:j(Ie);case 4:ue&&(n.supported=!0,n.keySystemAccess=ue);case 2:return Ie.return(n)}})}Ff.prototype.abort=function(e){var n=this.g;n.h||(n.h=!0,n.g=e,n.g===void 0&&(n.g=new DOMException("signal is aborted without reason","AbortError")),e=new si("abort"),n.onabort&&n.onabort(e),n.dispatchEvent(e))},c.Object.defineProperties(Ff.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),ro.AbortController=Ff,Ff.install=YE,S(Bh,wi),c.Object.defineProperties(Bh.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),So(YE),ro.Aria=zE,zE.install=WE,So(WE),ro.EncryptionScheme=XE,XE.install=QE,So(QE,-2),ro.Fullscreen=$E,$E.install=JE,So(JE),ro.MediaCapabilities=Am,Am.install=eb;var wm,Im,Rm,Cm,km,Om,tb=null;function nb(){}function rb(){var e=fa();C.MediaSource&&(C.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function(){var n=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(o){var w=o.split(/ *; */);return w.shift(),w.some(function(O){return O.startsWith("codecs=")})?cast.__platform__.canDisplayType(o):n(o)}}():e?12>=e?(ib(),function(){var n=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(o,w){return n.call(this,o,w-.001)}}()):ib():(ai("Tizen 2")||ai("Tizen 3")||ai("Tizen 4"))&&function(){var n=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(o){return Xa(o)[0]!="opus"&&n(o)}}()),C.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function(){var n=MediaSource.isTypeSupported;ai("Web0S")||(MediaSource.isTypeSupported=function(o){var w=o.split(/ *; */),O=w.findIndex(function(q){return q.startsWith("codecs=")});if(0>O)return n(o);var L=w[O].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),F=L.findIndex(function(q){return q.startsWith("vp09")});return 0<=F&&(L[F]="vp9",w[O]='codecs="'+L.join(",")+'"',o=w.join("; ")),n(o)})}()}function ib(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var n=e.apply(this,Te.apply(0,arguments));return n.abort=function(){},n}}function ab(){}function ob(){screen.orientation||C.orientation!=null&&function(){function e(){switch(C.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new jh;screen.orientation=n,e(),C.addEventListener("orientationchange",function(){e();var o=new si("change");n.dispatchEvent(o)})}()}function jh(){wi.call(this),this.type="",this.angle=0}function Dm(){}function eA(e,n){try{var o=new Gh(e,n);return Promise.resolve(o)}catch(w){return Promise.reject(w)}}function tA(e){var n=this.mediaKeys;return n&&n!=e&&sb(n,null),delete this.mediaKeys,(this.mediaKeys=e)?sb(e,this):Promise.resolve()}function nA(e){if(Wt(e=Vt(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Un(e=Bt(e.subarray(4),!0));var n=new Event("encrypted");n.initDataType="skd",n.initData=Dt(e),this.dispatchEvent(n)}function Gh(e,n){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(n=(e=i(n)).next();!n.done;n=e.next()){var o=n.value;if(o.persistentState=="required")n=null;else{n={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label};var w=!1,O=!1;if(o.audioCapabilities)for(var L=i(o.audioCapabilities),F=L.next();!F.done;F=L.next())(F=F.value).contentType&&(w=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,F.contentType.split(";")[0])&&(n.audioCapabilities.push(F),O=!0));if(o.videoCapabilities)for(F=(o=i(o.videoCapabilities)).next();!F.done;F=o.next())(L=F.value).contentType&&(w=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,L.contentType.split(";")[0])&&(n.videoCapabilities.push(L),O=!0));w||(O=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),n=O?n:null}if(n)return void(this.g=n)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Hh(e){this.h=new WebKitMediaKeys(e),this.g=new da}function sb(e,n){if(e.g.nb(),!n)return Promise.resolve();e.g.C(n,"webkitneedkey",nA);try{return Mo(n,HTMLMediaElement.HAVE_METADATA,e.g,function(){n.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(o){return Promise.reject(o)}}function Pm(e){wi.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new da,this.sessionId="",this.expiration=NaN,this.closed=new xi,this.keyStatuses=new ub}function Vh(e,n){var o=e.keyStatuses;o.size=n==null?0:1,o.g=n,n=new si("keystatuseschange"),e.dispatchEvent(n)}function ub(){this.size=0,this.g=void 0}function lb(){}function cb(){!C.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=rA,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=iA,C.MediaKeys=Nm,C.MediaKeySystemAccess=xm,C.shakaMediaKeysPolyfill=!0)}function rA(){return Promise.reject(Error("The key system specified is not supported."))}function iA(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Nm(){throw new TypeError("Illegal constructor.")}function xm(){throw this.keySystem="",new TypeError("Illegal constructor.")}function fb(){}function db(){if(!(!C.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)qh="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=aA,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=oA,C.MediaKeys=Kh,C.MediaKeySystemAccess=Zh,C.shakaMediaKeysPolyfill=!0}}function Lm(e){return qh?qh+e.charAt(0).toUpperCase()+e.slice(1):e}function aA(e,n){try{var o=new Zh(e,n);return Promise.resolve(o)}catch(w){return Promise.reject(w)}}function oA(e){var n=this.mediaKeys;return n&&n!=e&&hb(n,null),delete this.mediaKeys,(this.mediaKeys=e)&&hb(e,this),Promise.resolve()}function Zh(e,n){this.g=this.keySystem=e;var o=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",o=!1);var w=!1,O=document.getElementsByTagName("video");O=O.length?O[0]:document.createElement("video");for(var L=(n=i(n)).next();!L.done;L=n.next()){var F={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(L=L.value).initDataTypes,sessionTypes:["temporary"],label:L.label},q=!1;if(L.audioCapabilities)for(var $=i(L.audioCapabilities),ce=$.next();!ce.done;ce=$.next())(ce=ce.value).contentType&&(q=!0,O.canPlayType(ce.contentType.split(";")[0],this.g)&&(F.audioCapabilities.push(ce),w=!0));if(L.videoCapabilities)for(ce=($=i(L.videoCapabilities)).next();!ce.done;ce=$.next())(ce=ce.value).contentType&&(q=!0,O.canPlayType(ce.contentType,this.g)&&(F.videoCapabilities.push(ce),w=!0));if(q||(w=O.canPlayType("video/mp4",this.g)||O.canPlayType("video/webm",this.g)),L.persistentState=="required"&&(o?(F.persistentState="required",F.sessionTypes=["persistent-license"]):w=!1),w)return void(this.h=F)}throw o="Unsupported keySystem",e!="org.w3.clearkey"&&e!="com.widevine.alpha"||(o="None of the requested configurations were supported."),(e=Error(o)).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Kh(e){this.l=e,this.h=null,this.g=new da,this.i=[],this.j=new Map}function hb(e,n){e.h=n,e.g.nb();var o=qh;n&&(e.g.C(n,o+"needkey",function(w){var O=new CustomEvent("encrypted");O.initDataType="cenc",O.initData=Dt(w.initData),e.h.dispatchEvent(O)}),e.g.C(n,o+"keymessage",function(w){var O=Mm(e,w.sessionId);O&&(w=new si("message",w=new Map().set("messageType",O.keyStatuses.Eb()==null?"licenserequest":"licenserenewal").set("message",w.message)),O.h&&(O.h.resolve(),O.h=null),O.dispatchEvent(w))}),e.g.C(n,o+"keyadded",function(w){(w=Mm(e,w.sessionId))&&(Bm(w,"usable"),w.g&&w.g.resolve(),w.g=null)}),e.g.C(n,o+"keyerror",function(w){var O=Mm(e,w.sessionId);O&&O.handleError(w)}))}function Mm(e,n){var o=e.j.get(n);return o||((o=e.i.shift())?(o.sessionId=n,e.j.set(n,o),o):null)}function Fm(e,n,o){wi.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=n,this.l=o,this.sessionId="",this.expiration=NaN,this.closed=new xi,this.keyStatuses=new gb}function pb(e,n,o){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(o)var w=Vt(Un("LOAD_SESSION|"+o));else{var O=Un("PERSISTENT|");w=zi(O,n)}else w=Vt(n)}catch(F){return Promise.reject(F)}e.h=new xi;var L=Lm("generateKeyRequest");try{e.j[L](e.i,w)}catch(F){if(F.name!="InvalidStateError")return e.h=null,Promise.reject(F);new ni(function(){try{e.j[L](e.i,w)}catch(q){e.h.reject(q),e.h=null}}).N(.01)}return e.h}function Um(e,n,o){if(e.g)e.g.then(function(){return Um(e,n,o)}).catch(function(){return Um(e,n,o)});else{if(e.g=n,e.i=="webkit-org.w3.clearkey"){var w=Oi(o),O=JSON.parse(w);O.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),w=Dr(O.keys[0].k),O=Dr(O.keys[0].kid)}else w=Vt(o),O=null;var L=Lm("addKey");try{e.j[L](e.i,w,O,e.sessionId)}catch(F){e.g.reject(F),e.g=null}}}function Bm(e,n){var o=e.keyStatuses;o.size=n==null?0:1,o.g=n,n=new si("keystatuseschange"),e.dispatchEvent(n)}function gb(){this.size=0,this.g=void 0}Am.originalMcap=tb,So(eb,-1),ro.MediaSource=nb,nb.install=rb,So(rb),ro.Orientation=ab,ab.install=ob,S(jh,wi),jh.prototype.lock=function(e){function n(w){return screen.lockOrientation?screen.lockOrientation(w):screen.mozLockOrientation?screen.mozLockOrientation(w):!!screen.msLockOrientation&&screen.msLockOrientation(w)}var o=!1;switch(e){case"natural":o=n("default");break;case"any":o=!0,this.unlock();break;default:o=n(e)}return o?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},jh.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},So(ob),ro.PatchedMediaKeysApple=Dm,Dm.uninstall=function(){wm&&(wm=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Im),HTMLMediaElement.prototype.setMediaKeys=Rm,C.MediaKeys=Cm,C.MediaKeySystemAccess=km,navigator.requestMediaKeySystemAccess=Om,Im=Om=Rm=km=Cm=null,C.shakaMediaKeysPolyfill=!1)},Dm.install=function(e){C.HTMLVideoElement&&C.WebKitMediaKeys&&(e!==void 0&&e&&(wm=!0,Im=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),Rm=HTMLMediaElement.prototype.setMediaKeys,Cm=C.MediaKeys,km=C.MediaKeySystemAccess,Om=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=tA,C.MediaKeys=Hh,C.MediaKeySystemAccess=Gh,navigator.requestMediaKeySystemAccess=eA,C.shakaMediaKeysPolyfill=!0)},Gh.prototype.createMediaKeys=function(){var e=new Hh(this.keySystem);return Promise.resolve(e)},Gh.prototype.getConfiguration=function(){return this.g},Hh.prototype.createSession=function(e){if((e=e||"temporary")!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Pm(this.h)},Hh.prototype.setServerCertificate=function(){return Promise.resolve(!1)},S(Pm,wi),(E=Pm.prototype).generateRequest=function(e,n){var o=this;this.h=new xi;try{var w=this.l.createSession("video/mp4",Vt(n));this.i=w,this.sessionId=w.sessionId||"",this.j.C(this.i,"webkitkeymessage",function(O){o.h&&(o.h.resolve(),o.h=null),O=new si("message",O=new Map().set("messageType",o.keyStatuses.Eb()==null?"license-request":"license-renewal").set("message",Dt(O.message))),o.dispatchEvent(O)}),this.j.C(w,"webkitkeyadded",function(){o.g&&(Vh(o,"usable"),o.g.resolve(),o.g=null)}),this.j.C(w,"webkitkeyerror",function(){var O=Error("EME PatchedMediaKeysApple key error");if(O.errorCode=o.i.error,o.h!=null)o.h.reject(O),o.h=null;else if(o.g!=null)o.g.reject(O),o.g=null;else switch(o.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Vh(o,"output-not-allowed");break;default:Vh(o,"internal-error")}}),Vh(this,"status-pending")}catch(O){this.h.reject(O)}return this.h},E.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},E.update=function(e){this.g=new xi;try{this.i.update(Vt(e))}catch(n){this.g.reject(n)}return this.g},E.close=function(){try{this.i.close(),this.closed.resolve(),this.j.nb()}catch(e){this.closed.reject(e)}return this.closed},E.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(E=ub.prototype).Eb=function(){return this.g},E.forEach=function(e){this.g&&e(this.g,ac.value())},E.get=function(e){if(this.has(e))return this.g},E.has=function(e){var n=ac.value();return!(!this.g||!pt(e,n))},E.entries=function(){},E.keys=function(){},E.values=function(){},ro.PatchedMediaKeysNop=lb,lb.install=cb,Nm.prototype.createSession=function(){},Nm.prototype.setServerCertificate=function(){},xm.prototype.getConfiguration=function(){},xm.prototype.createMediaKeys=function(){},So(cb,-10),ro.PatchedMediaKeysWebkit=fb,fb.install=db,Zh.prototype.createMediaKeys=function(){var e=new Kh(this.g);return Promise.resolve(e)},Zh.prototype.getConfiguration=function(){return this.h},Kh.prototype.createSession=function(e){if((e=e||"temporary")!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var n=this.h||document.createElement("video");return n.src||(n.src="about:blank"),e=new Fm(n,this.l,e),this.i.push(e),e},Kh.prototype.setServerCertificate=function(){return Promise.resolve(!1)},S(Fm,wi),(E=Fm.prototype).handleError=function(e){var n=Error("EME v0.1b key error"),o=e.errorCode;o.systemCode=e.systemCode,n.errorCode=o,!e.sessionId&&this.h?(e.systemCode==45&&(n.message="Unsupported session type."),this.h.reject(n),this.h=null):e.sessionId&&this.g?(this.g.reject(n),this.g=null):(n=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Bm(this,"output-restricted"):Bm(this,n==1?"expired":"internal-error"))},E.generateRequest=function(e,n){return pb(this,n,null)},E.load=function(e){return this.l=="persistent-license"?pb(this,null,e):Promise.reject(Error("Not a persistent session."))},E.update=function(e){var n=new xi;return Um(this,n,e),n},E.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Lm("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},E.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()},(E=gb.prototype).Eb=function(){return this.g},E.forEach=function(e){this.g&&e(this.g,ac.value())},E.get=function(e){if(this.has(e))return this.g},E.has=function(e){var n=ac.value();return!(!this.g||!pt(e,n))},E.entries=function(){},E.keys=function(){},E.values=function(){};var qh="";function mb(){}function vb(){if(C.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=uA,Object.defineProperty(e,"disablePictureInPicture",{get:cA,set:fA,enumerable:!0,configurable:!0}),document.exitPictureInPicture=lA,document.addEventListener("webkitpresentationmodechanged",sA,!0))}}function sA(e){if((e=e.target).webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var n=new Event("enterpictureinpicture");e.dispatchEvent(n)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),n=new Event("leavepictureinpicture"),e.dispatchEvent(n)}function uA(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function lA(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function cA(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function fA(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function yb(){}function Eb(){C.crypto&&("randomUUID"in C.crypto||(C.crypto.randomUUID=dA))}function dA(){var e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.substr(n.lastIndexOf("/")+1)}function bb(){}function Tb(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=hA)}function hA(){return new Promise(function(e,n){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(o,w){e({usage:o,quota:w})},n)})}function _b(){}function Sb(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:pA})}function pA(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function Ab(){}function wb(){if(C.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var n=e.apply(this);return n&&n.catch(function(){}),n}}}function Ib(){}function Rb(){if(C.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||ea())&&(e.getVideoPlaybackQuality=gA)}}function gA(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Cb(){}function kb(){if(!C.VTTCue&&C.TextTrackCue){var e=null,n=TextTrackCue.length;if(n==3)e=jm;else if(n==6)e=mA;else{try{var o=!!jm(1,2,"")}catch{o=!1}o&&(e=jm)}e&&(C.VTTCue=function(w,O,L){return e(w,O,L)})}}function jm(e,n,o){return new C.TextTrackCue(e,n,o)}function mA(e,n,o){return new C.TextTrackCue(e+"-"+n+"-"+o,e,n,o)}function Rs(){}So(db),ro.PiPWebkit=mb,mb.install=vb,So(vb),ro.RandomUUID=yb,yb.install=Eb,So(Eb),ro.StorageEstimate=bb,bb.install=Tb,So(Tb),ro.Symbol=_b,_b.install=Sb,So(Sb),ro.VideoPlayPromise=Ab,Ab.install=wb,So(wb),ro.VideoPlaybackQuality=Ib,Ib.install=Rb,So(Rb),ro.VTTCue=Cb,Cb.install=kb,So(kb),Rs.prototype.parseInit=function(){},Rs.prototype.setSequenceMode=function(){},Rs.prototype.parseMedia=function(e,n){for(var o=null,w=[],O=(e=i(e=Oi(e).split(/\r?\n/))).next();!O.done;O=e.next())if((O=O.value)&&!/^\s+$/.test(O)&&(O=vA.exec(O))){var L=yA.exec(O[1]);O=new Xe(L=60*parseInt(L[1],10)+parseFloat(L[2].replace(",",".")),n.segmentEnd?n.segmentEnd:L+2,O[2]),o&&(o.endTime=L,w.push(o)),o=O}return o&&w.push(o),w},Q("shaka.text.LrcTextParser",Rs),Rs.prototype.parseMedia=Rs.prototype.parseMedia,Rs.prototype.setSequenceMode=Rs.prototype.setSequenceMode,Rs.prototype.parseInit=Rs.prototype.parseInit;var vA=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,yA=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function cs(){}function Ob(e,n,o,w,O,L,F,q,$,ce,ue){var Ie=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!ue)return null;var _e=document.createElement("span");_e.textContent=e.textContent}else _e=e;for(var Qe=null,ut=i(AA),at=ut.next();!at.done&&!(Qe=zh(_e,"backgroundImage",w,"#",at.value)[0]);at=ut.next());if(ut=ue,(e.nodeName=="p"||Qe)&&(ue=!0),q=(_e.getAttribute("xml:space")||(q?"default":"preserve"))=="default",e=[],!(at=Array.from(_e.childNodes).every(function(Zt){return Zt.nodeType==Node.TEXT_NODE})))for(var Ct=i(_e.childNodes),yt=Ct.next();!yt.done;yt=Ct.next())(yt=Ob(yt.value,n,o,w,O,L,F,q,$,_e,ue))&&e.push(yt);w=ce!=null,Ct=/\S/.test(_e.textContent);var Lt=_e.hasAttribute("begin")||_e.hasAttribute("end")||_e.hasAttribute("dur");if(!(Lt||Ct||_e.tagName=="br"||e.length!=0||w&&!q))return null;for(Ct=(yt=Nb(_e,o)).start,yt=yt.end;Ie&&Ie.nodeType==Node.ELEMENT_NODE&&Ie.tagName!="tt";)Ct=(yt=EA(Ie,o,Ct,yt)).start,yt=yt.end,Ie=Ie.parentNode;if(Ct==null&&(Ct=0),Ct+=n.periodStart,yt=yt==null?1/0:yt+n.periodStart,Ct=Math.max(Ct,n.segmentStart),yt=Math.min(yt,n.segmentEnd),!Lt&&0<e.length)for(Ct=1/0,yt=0,o=(n=i(e)).next();!o.done;o=n.next())o=o.value,Ct=Math.min(Ct,o.startTime),yt=Math.max(yt,o.endTime);if(_e.tagName=="br")return(O=new Xe(Ct,yt,"")).lineBreak=!0,O;if(n="",at&&(n=_e.textContent,q&&(n=(n=n.trim()).replace(/\s+/g," "))),(n=new Xe(Ct,yt,n)).nestedCues=e,ue||(n.isContainer=!0),$&&(n.cellResolution=$),$=zh(_e,"region",L,"")[0],_e.hasAttribute("region")&&$&&$.getAttribute("xml:id")){var jt=$.getAttribute("xml:id");n.region=F.filter(function(Zt){return Zt.id==jt})[0]}return F=$,ce&&w&&!_e.getAttribute("region")&&!_e.getAttribute("style")&&(F=zh(ce,"region",L,"")[0]),function(Zt,sn,Xt,Gt,bn,Tn,Ut){if(Ao(sn,Xt,bn,"direction",Tn=Tn||Ut)=="rtl"&&(Zt.direction="rtl"),(Ut=Ao(sn,Xt,bn,"writingMode",Tn))=="tb"||Ut=="tblr"?Zt.writingMode="vertical-lr":Ut=="tbrl"?Zt.writingMode="vertical-rl":Ut=="rltb"||Ut=="rl"?Zt.direction="rtl":Ut&&(Zt.direction=hn),(Ut=Ao(sn,Xt,bn,"textAlign",!0))?(Zt.positionAlign=SA[Ut],Zt.lineAlign=_A[Ut],Zt.textAlign=Ft[Ut.toUpperCase()]):Zt.textAlign=bt,(Ut=Ao(sn,Xt,bn,"displayAlign",!0))&&(Zt.displayAlign=wn[Ut.toUpperCase()]),(Ut=Ao(sn,Xt,bn,"color",Tn))&&(Zt.color=Ut),(Ut=Ao(sn,Xt,bn,"backgroundColor",Tn))&&(Zt.backgroundColor=Ut),(Ut=Ao(sn,Xt,bn,"border",Tn))&&(Zt.border=Ut),Ut=Ao(sn,Xt,bn,"fontFamily",Tn))switch(Ut){case"monospaceSerif":Zt.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":Zt.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":Zt.fontFamily="sans-serif";break;case"monospaceSansSerif":Zt.fontFamily="Consolas,monospace";break;case"proportionalSerif":Zt.fontFamily="serif";break;default:Zt.fontFamily=Ut}if((Ut=Ao(sn,Xt,bn,"fontWeight",Tn))&&Ut=="bold"&&(Zt.fontWeight=700),Ut=Ao(sn,Xt,bn,"wrapOption",Tn),Zt.wrapLine=!Ut||Ut!="noWrap",(Ut=Ao(sn,Xt,bn,"lineHeight",Tn))&&Ut.match(Rc)&&(Zt.lineHeight=Ut),(Ut=Ao(sn,Xt,bn,"fontSize",Tn))&&(Ut.match(Rc)||Ut.match(TA))&&(Zt.fontSize=Ut),(Ut=Ao(sn,Xt,bn,"fontStyle",Tn))&&(Zt.fontStyle=rn[Ut.toUpperCase()]),Gt){Ut=Gt.getAttribute("imageType")||Gt.getAttribute("imagetype");var ln=Gt.getAttribute("encoding");Gt=Gt.textContent.trim(),Ut=="PNG"&&ln=="Base64"&&Gt&&(Zt.backgroundImage="data:image/png;base64,"+Gt)}(Gt=Ao(sn,Xt,bn,"textOutline",Tn))&&((Gt=Gt.split(" "))[0].match(Rc)?Zt.textStrokeColor=Zt.color:(Zt.textStrokeColor=Gt[0],Gt.shift()),Gt[0]&&Gt[0].match(Rc)?Zt.textStrokeWidth=Gt[0]:Zt.textStrokeColor=""),(Gt=Ao(sn,Xt,bn,"letterSpacing",Tn))&&Gt.match(Rc)&&(Zt.letterSpacing=Gt),(Gt=Ao(sn,Xt,bn,"linePadding",Tn))&&Gt.match(Rc)&&(Zt.linePadding=Gt),(Tn=Ao(sn,Xt,bn,"opacity",Tn))&&(Zt.opacity=parseFloat(Tn)),(Xt=Yh(Xt,bn,"textDecoration"))&&Db(Zt,Xt),(sn=Gm(sn,bn,"textDecoration"))&&Db(Zt,sn)}(n,_e,F,Qe,O,ut,e.length==0),n}function Db(e,n){for(var o=(n=i(n.split(" "))).next();!o.done;o=n.next())switch(o.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&me(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&me(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&me(e.textDecoration,"overline")}}function Ao(e,n,o,w,O){return O=O===void 0||O,(e=Gm(e,o,w))?e:O?Yh(n,o,w):null}function Yh(e,n,o){return e?Ro(e,Wh,o)||Pb(e,n,o):null}function Gm(e,n,o){return Ro(e,Wh,o)||Pb(e,n,o)}function Pb(e,n,o){e=zh(e,"style",n,"");for(var w=null,O=0;O<e.length;O++){var L=Zs(e[O],"urn:ebu:tt:style",o);L||(L=Ro(e[O],Wh,o)),L||(L=Gm(e[O],n,o)),L&&(w=L)}return w}function zh(e,n,o,w,O){var L=[];if(!e||1>o.length)return L;var F=e;for(e=null;F&&!(e=O?Zs(F,O,n):F.getAttribute(n))&&(F=F.parentNode)instanceof Element;);if(n=e){for(O=(n=i(n.split(" "))).next();!O.done;O=n.next())for(O=O.value,F=(e=i(o)).next();!F.done;F=e.next())if(w+(F=F.value).getAttribute("xml:id")==O){L.push(F);break}}return L}function EA(e,n,o,w){return e=Nb(e,n),o==null?o=e.start:e.start!=null&&(o+=e.start),w==null?w=e.end:e.start!=null&&(w+=e.start),{start:o,end:w}}function Nb(e,n){var o=Hm(e.getAttribute("begin"),n),w=Hm(e.getAttribute("end"),n);return e=Hm(e.getAttribute("dur"),n),w==null&&e!=null&&(w=o+e),{start:o,end:w}}function Hm(e,n){var o=null;if(xb.test(e)){e=xb.exec(e),o=Number(e[1]);var w=Number(e[2]),O=Number(e[3]),L=Number(e[4]);o=(O+=(L+=(Number(e[5])||0)/n.h)/n.frameRate)+60*w+3600*o}else if(Lb.test(e))o=Vm(Lb,e);else if(Mb.test(e))o=Vm(Mb,e);else if(Fb.test(e))e=Fb.exec(e),o=Number(e[1])/n.frameRate;else if(Ub.test(e))e=Ub.exec(e),o=Number(e[1])/n.g;else if(Bb.test(e))o=Vm(Bb,e);else if(e)throw new ht(2,2,2001,"Could not parse cue time range in TTML");return o}function Vm(e,n){return(e=e.exec(n))==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function bA(e,n,o,w){this.frameRate=Number(e)||30,this.h=Number(n)||1,this.g=Number(w),this.g==0&&(this.g=e?this.frameRate*this.h:1),o&&(e=/^(\d+) (\d+)$/g.exec(o))&&(this.frameRate*=Number(e[1])/Number(e[2]))}ia["application/x-subtitle-lrc"]=function(){return new Rs},cs.prototype.parseInit=function(){},cs.prototype.setSequenceMode=function(){},cs.prototype.parseMedia=function(e,n){var o=Oi(e);if(e=[],o=="")return e;var w=El(o,"tt");if(!w)throw new ht(2,2,2005,"Failed to parse TTML.");if(!(o=w.getElementsByTagName("body")[0]))return[];var O=Ro(w,Uf,"frameRate"),L=Ro(w,Uf,"subFrameRate"),F=Ro(w,Uf,"frameRateMultiplier"),q=Ro(w,Uf,"tickRate"),$=Ro(w,Uf,"cellResolution"),ce=w.getAttribute("xml:space")||"default",ue=Ro(w,Wh,"extent");if(ce!="default"&&ce!="preserve")throw new ht(2,2,2005,"Invalid xml:space value: "+ce);ce=ce=="default",O=new bA(O,L,F,q),$=$&&($=/^(\d+) (\d+)$/.exec($))?{columns:parseInt($[1],10),rows:parseInt($[2],10)}:null,L=(L=w.getElementsByTagName("metadata")[0])?function(Lt){return Array.from(Lt.childNodes).filter(function(jt){return jt instanceof Element})}(L):[],F=Array.from(w.getElementsByTagName("style")),q=[];for(var Ie=i(w=Array.from(w.getElementsByTagName("region"))),_e=Ie.next();!_e.done;_e=Ie.next()){var Qe=_e.value;_e=new $t;var ut=Qe.getAttribute("xml:id");if(ut){_e.id=ut;var at,Ct,yt=null;ue&&(yt=Zm.exec(ue)||Km.exec(ue)),ut=yt?Number(yt[1]):null,yt=yt?Number(yt[2]):null,(at=Yh(Qe,F,"extent"))&&(at=(Ct=Zm.exec(at))||Km.exec(at))!=null&&(_e.width=Number(at[1]),_e.height=Number(at[2]),Ct||(ut!=null&&(_e.width=100*_e.width/ut),yt!=null&&(_e.height=100*_e.height/yt)),_e.widthUnits=Ct||ut!=null?Nt:0,_e.heightUnits=Ct||yt!=null?Nt:0),(Qe=Yh(Qe,F,"origin"))&&(at=(Ct=Zm.exec(Qe))||Km.exec(Qe))!=null&&(_e.viewportAnchorX=Number(at[1]),_e.viewportAnchorY=Number(at[2]),Ct||(yt!=null&&(_e.viewportAnchorY=100*_e.viewportAnchorY/yt),ut!=null&&(_e.viewportAnchorX=100*_e.viewportAnchorX/ut)),_e.viewportAnchorUnits=Ct||ut!=null?Nt:0)}else _e=null;_e&&q.push(_e)}if(_a(o,"p").length)throw new ht(2,2,2001,"<p> can only be inside <div> in TTML");for(Ie=(ue=i(_a(o,"div"))).next();!Ie.done;Ie=ue.next())if(_a(Ie.value,"span").length)throw new ht(2,2,2001,"<span> can only be inside <p> in TTML");return(n=Ob(o,n,O,L,F,w,q,ce,$,null,!1))&&(n.backgroundColor||(n.backgroundColor="transparent"),e.push(n)),e},Q("shaka.text.TtmlTextParser",cs),cs.prototype.parseMedia=cs.prototype.parseMedia,cs.prototype.setSequenceMode=cs.prototype.setSequenceMode,cs.prototype.parseInit=cs.prototype.parseInit;var Zm=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,TA=/^(\d{1,2}(?:\.\d+)?|100)%$/,Rc=/^(\d+px|\d+em|\d*\.?\d+c)$/,Km=/^(\d+)px (\d+)px$/,xb=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Lb=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Mb=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Fb=/^(\d*(?:\.\d*)?)f$/,Ub=/^(\d*(?:\.\d*)?)t$/,Bb=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),_A={left:Zn,center:"center",right:"end",start:Zn,end:"end"},SA={left:"line-left",center:"center",right:"line-right"},Uf=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Wh=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],AA=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function jo(){this.g=new cs}function Go(){this.g=!1}function jb(e){for(var n=i(Object.entries(Rr)),o=n.next();!o.done;o=n.next()){var w=i(o.value);o=w.next().value,w=w.next().value;var O=new Xe(0,0,"");O.color=w,e.set(o,O)}for(o=(n=i(Object.entries(Nr))).next();!o.done;o=n.next())o=(w=i(o.value)).next().value,w=w.next().value,(O=new Xe(0,0,"")).backgroundColor=w,e.set(o,O)}function Gb(e,n,o){o.size===0&&jb(o),e=function(F){for(var q=[],$=-1,ce="",ue=0;ue<F.length;ue++)if(F[ue]==="/"){var Ie=F.indexOf(">",ue);if(Ie<=ue)return F;Ie=F.substring(ue+1,Ie);var _e=q.pop();if(!Ie||!_e)return F;if(_e===Ie)ce+="/"+Ie+">";else{if(!_e.startsWith("c.")||Ie!=="c")return F;ce+="/"+_e+">"}ue+=Ie.length+1}else F[ue]==="<"?$=ue+1:F[ue]===">"&&0<$&&(q.push(F.substr($,ue-$)),$=-1),ce+=F[ue];return ce}(e);for(var w=[],O=-1,L=0;L<e.length;L++)e[L]==="<"?O=L+1:e[L]===">"&&0<O&&((O=e.substr(O,L-O)).match(Zb)&&w.push(O),O=-1);for(L=(w=i(w)).next();!L.done;L=w.next())L=L.value,e=e.replace("<"+L+">",'<div time="'+L+'">'),e+="</div>";if(L=El("<span>"+e+"</span>","span")){if(w=[],(L=L.childNodes).length==1&&((O=L[0]).nodeType==Node.TEXT_NODE||O.nodeType==Node.CDATA_SECTION_NODE))return void(n.payload=e);for(L=(e=i(L)).next();!L.done;L=e.next())Hb(L.value,n,w,o);n.nestedCues=w}else n.payload=e}function Xh(e,n){return e&&0<e.length?e:n}function Hb(e,n,o,w){var O=n.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var L=i(e.nodeName.split(/[ .]+/)),F=L.next();!F.done;F=L.next()){if(F=F.value,w.has(F)){var q=w.get(F);q&&(O.backgroundColor=Xh(q.backgroundColor,O.backgroundColor),O.color=Xh(q.color,O.color),O.fontFamily=Xh(q.fontFamily,O.fontFamily),O.fontSize=Xh(q.fontSize,O.fontSize),O.fontWeight=q.fontWeight,O.fontStyle=q.fontStyle,O.opacity=q.opacity,O.wrapLine=q.wrapLine)}switch(F){case"b":O.fontWeight=700;break;case"i":O.fontStyle="italic";break;case"u":O.textDecoration.push("underline");break;case"div":(F=e.getAttribute("time"))&&(F=Qh(new Rl(F)))&&(O.startTime=F)}}if(af(e))for(L=!0,w=i(e.textContent.split(`
`)),e=w.next();!e.done;e=w.next())e=e.value,L||((L=n.clone()).lineBreak=!0,o.push(L)),0<e.length&&((L=O.clone()).payload=e,o.push(L)),L=!1;else for(e=(n=i(e.childNodes)).next();!e.done;e=n.next())Hb(e.value,O,o,w)}function Vb(e,n,o){var w;(w=/^align:(start|middle|center|end|left|right)$/.exec(n))?(n=w[1],e.textAlign=n=="middle"?bt:Ft[n.toUpperCase()]):(w=/^vertical:(lr|rl)$/.exec(n))?e.writingMode=w[1]=="lr"?"vertical-lr":"vertical-rl":(w=/^size:([\d.]+)%$/.exec(n))?e.size=Number(w[1]):(w=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(n))?(e.position=Number(w[1]),w[2]&&(n=w[2],e.positionAlign=n=="line-left"||n=="start"?"line-left":n=="line-right"||n=="end"?"line-right":"center")):(w=/^region:(.*)$/.exec(n))?(n=function(O,L){return O=O.filter(function(F){return F.id==L}),O.length?O[0]:null}(o,w[1]))&&(e.region=n):(o=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(n))?(e.lineInterpretation=1,e.line=Number(o[1]),o[2]&&(e.lineAlign=Bn[o[2].toUpperCase()])):(o=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(n))&&(e.lineInterpretation=on,e.line=Number(o[1]),o[2]&&(e.lineAlign=Bn[o[2].toUpperCase()]))}function Qh(e){if((e=Ku(e,Zb))==null)return null;var n=Number(e[2]),o=Number(e[3]);return 59<n||59<o?null:Number(e[4])/1e3+o+60*n+3600*(Number(e[1])||0)}function wA(e){var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},o=/&(?:amp|lt|gt|quot|#(0+)?39);/g,w=RegExp(o.source);return e&&w.test(e)?e.replace(o,function(O){return n[O]||"'"}):e||""}ia["application/ttml+xml"]=function(){return new cs},jo.prototype.parseInit=function(e){var n=!1;if(new ra().box("moov",oa).box("trak",oa).box("mdia",oa).box("minf",oa).box("stbl",oa).P("stsd",Pu).box("stpp",function(o){n=!0,o.parser.stop()}).parse(e),!n)throw new ht(2,2,2007)},jo.prototype.setSequenceMode=function(){},jo.prototype.parseMedia=function(e,n){var o=this,w=!1,O=[];if(new ra().box("mdat",cu(function(L){w=!0,O=O.concat(o.g.parseMedia(L,n))})).parse(e,!1),!w)throw new ht(2,2,2007);return O},Q("shaka.text.Mp4TtmlParser",jo),jo.prototype.parseMedia=jo.prototype.parseMedia,jo.prototype.setSequenceMode=jo.prototype.setSequenceMode,jo.prototype.parseInit=jo.prototype.parseInit,ia['application/mp4; codecs="stpp"']=function(){return new jo},ia['application/mp4; codecs="stpp.ttml"']=function(){return new jo},ia['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new jo},ia['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new jo},Go.prototype.parseInit=function(){},Go.prototype.setSequenceMode=function(e){this.g=e},Go.prototype.parseMedia=function(e,n){var o=(e=(e=Oi(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,`
`)).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(o[0]))throw new ht(2,2,2e3);if(e=n.vttOffset,o[0].includes("X-TIMESTAMP-MAP")&&this.g){var w=o[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),O=o[0].match(/MPEGTS:(\d+)/m);if(w&&O){if((e=Qh(new Rl(w[1])))==null)throw new ht(2,2,2e3);for(O=Number(O[1]),w=n.segmentStart-n.periodStart;95443.7176888889<=w;)w-=95443.7176888889,O+=8589934592;e=n.periodStart+O/9e4-e}}for(n=[],w=(O=i(o[0].split(`
`))).next();!w.done;w=O.next())if(w=w.value,/^Region:/.test(w)){w=new Rl(w);var L=new $t;Cl(w),Ac(w);for(var F=Cl(w);F;){var q=L,$=F;(F=/^id=(.*)$/.exec($))?q.id=F[1]:(F=/^width=(\d{1,2}|100)%$/.exec($))?q.width=Number(F[1]):(F=/^lines=(\d+)$/.exec($))?(q.height=Number(F[1]),q.heightUnits=2):(F=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec($))?(q.regionAnchorX=Number(F[1]),q.regionAnchorY=Number(F[2])):(F=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec($))?(q.viewportAnchorX=Number(F[1]),q.viewportAnchorY=Number(F[2])):/^scroll=up$/.exec($)&&(q.scroll="up"),Ac(w),F=Cl(w)}n.push(L)}for(jb(O=new Map),w=[],L=(o=i(o.slice(1))).next();!L.done;L=o.next()){if(((L=L.value.split(`
`)).length!=1||L[0])&&!/^NOTE($|[ \t])/.test(L[0])&&L[0]=="STYLE"&&L[1].includes("::cue")){q="global",(F=L[1].match(/\((.*)\)/))&&(q=F.pop()),F=L.slice(2,-1),L[1].includes("}")&&($=/\{(.*?)\}/.exec(L[1]))&&(F=$[1].split(";")),$=new Xe(0,0,"");for(var ce=!1,ue=0;ue<F.length;ue++){var Ie=/^\s*([^:]+):\s*(.*)/.exec(F[ue]);if(Ie){var _e=Ie[2].trim().replace(";","");switch(Ie[1].trim()){case"background-color":ce=!0,$.backgroundColor=_e;break;case"color":ce=!0,$.color=_e;break;case"font-family":ce=!0,$.fontFamily=_e;break;case"font-size":ce=!0,$.fontSize=_e;break;case"font-weight":700<=parseInt(_e,10)&&(ce=!0,$.fontWeight=700);break;case"font-style":switch(_e){case"normal":ce=!0,$.fontStyle=nn;break;case"italic":ce=!0,$.fontStyle="italic";break;case"oblique":ce=!0,$.fontStyle="oblique"}break;case"opacity":ce=!0,$.opacity=parseFloat(_e);break;case"text-shadow":ce=!0,$.textShadow=_e;break;case"white-space":ce=!0,$.wrapLine=_e!="noWrap"}}}ce&&O.set(q,$)}if(ue=e,L.length==1&&!L[0]||/^NOTE($|[ \t])/.test(L[0])||L[0]=="STYLE")L=null;else{if(q=null,L[0].includes("-->")||(q=L[0],L.splice(0,1)),$=Qh(F=new Rl(L[0])),Ie=Ku(F,/[ \t]+--\x3e[ \t]+/g),ce=Qh(F),$==null||Ie==null||ce==null)throw new ht(2,2,2001,"Could not parse cue time range in WebVTT");for($+=ue,ce+=ue,ue=wA(L.slice(1).join(`
`).trim()),O.has("global")?((L=O.get("global").clone()).startTime=$,L.endTime=ce,L.payload=""):L=new Xe($,ce,""),Gb(ue,L,O),Ac(F),$=Cl(F);$;)Vb(L,$,n),Ac(F),$=Cl(F);q!=null&&(L.id=q)}L&&w.push(L)}return w},Q("shaka.text.VttTextParser",Go),Go.prototype.parseMedia=Go.prototype.parseMedia,Go.prototype.setSequenceMode=Go.prototype.setSequenceMode,Go.prototype.parseInit=Go.prototype.parseInit;var Zb=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Cs(){this.g=null}function IA(e,n,o){var w,O,L;return new ra().box("payl",cu(function(F){w=Oi(F)})).box("iden",cu(function(F){O=Oi(F)})).box("sttg",cu(function(F){L=Oi(F)})).parse(e),w?function(F,q,$,ce,ue){if(Gb(F,ce=new Xe(ce,ue,""),new Map),q&&(ce.id=q),$)for(q=Cl(F=new Rl($));q;)Vb(ce,q,[]),Ac(F),q=Cl(F);return ce}(w,O,L,n,o):null}function ks(){}function Kb(e){if((e=Ku(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g))==null)return null;var n=Number(e[2]),o=Number(e[3]);return 59<n||59<o?null:Number(e[4])/1e3+o+60*n+3600*(Number(e[1])||0)}function fs(){this.g=new Go}function qb(e){var n=`WEBVTT

`;if(e=="")return n;for(var o=(e=i((e=(e=e.replace(/\r+/g,"")).trim()).split(`

`))).next();!o.done;o=e.next())(o=o.value.split(/\n/))[0].match(/\d+/)&&o.shift(),o[0]=o[0].replace(/,/g,"."),n+=o.join(`
`)+`

`;return n}function Os(){}function RA(e,n){var o=n.Fontname;if(o&&(e.fontFamily=o),(o=n.Fontsize)&&(e.fontSize=o+"px"),(o=n.PrimaryColour)&&(o=Yb(o))&&(e.color=o),(o=n.BackColour)&&(o=Yb(o))&&(e.backgroundColor=o),n.Bold&&(e.fontWeight=700),n.Italic&&(e.fontStyle="italic"),n.Underline&&e.textDecoration.push("underline"),(o=n.Spacing)&&(e.letterSpacing=o+"px"),o=n.Alignment)switch(parseInt(o,10)){case 1:e.displayAlign=pn,e.textAlign="start";break;case 2:e.displayAlign=pn,e.textAlign=bt;break;case 3:e.displayAlign=pn,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=bt;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=bt;break;case 11:e.displayAlign="center",e.textAlign="end"}(n=n.AlphaLevel)&&(e.opacity=parseFloat(n))}function Yb(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function zb(e){return 3600*((e=kA.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}ia["text/vtt"]=function(){return new Go},ia['text/vtt; codecs="vtt"']=function(){return new Go},ia['text/vtt; codecs="wvtt"']=function(){return new Go},Cs.prototype.parseInit=function(e){var n=this,o=!1;if(new ra().box("moov",oa).box("trak",oa).box("mdia",oa).P("mdhd",function(w){w=kt(w.reader,w.version),n.g=w.timescale}).box("minf",oa).box("stbl",oa).P("stsd",Pu).box("wvtt",function(){o=!0}).parse(e),!this.g)throw new ht(2,2,2008);if(!o)throw new ht(2,2,2008)},Cs.prototype.setSequenceMode=function(){},Cs.prototype.parseMedia=function(e,n){if(!this.g)throw new ht(2,2,2008);var o,w=0,O=[],L=[],F=!1,q=!1,$=!1,ce=null;if(new ra().box("moof",oa).box("traf",oa).P("tfdt",function(Lt){F=!0,w=Et(Lt.reader,Lt.version).ve}).P("tfhd",function(Lt){ce=et(Lt.reader,Lt.flags).Be}).P("trun",function(Lt){q=!0,O=Mt(Lt.reader,Lt.version,Lt.flags).Re}).box("mdat",cu(function(Lt){$=!0,o=Lt})).parse(e,!1),!$&&!F&&!q)throw new ht(2,2,2008);e=w;for(var ue=new Vi(o,0),Ie=i(O),_e=Ie.next();!_e.done;_e=Ie.next()){var Qe=(_e=_e.value).de||ce,ut=_e.ed?w+_e.ed:e;e=ut+(Qe||0);var at=0;do{var Ct=ue.K();at+=Ct;var yt=null;pl(ue.K())=="vttc"?8<Ct&&(yt=ue.Za(Ct-8)):ue.skip(Ct-8),Qe&&yt&&(Ct=IA(yt,n.periodStart+ut/this.g,n.periodStart+e/this.g),L.push(Ct))}while(_e.sampleSize&&at<_e.sampleSize)}return L.filter(_i)},Q("shaka.text.Mp4VttParser",Cs),Cs.prototype.parseMedia=Cs.prototype.parseMedia,Cs.prototype.setSequenceMode=Cs.prototype.setSequenceMode,Cs.prototype.parseInit=Cs.prototype.parseInit,ia['application/mp4; codecs="wvtt"']=function(){return new Cs},ks.prototype.parseInit=function(){},ks.prototype.setSequenceMode=function(){},ks.prototype.parseMedia=function(e){var n=Oi(e).replace(/\r+/g,"");if(e=[],(n=n.trim())=="")return e;for(var o=(n=i(n.split(`

`))).next();!o.done;o=n.next()){var w=new Rl((o=o.value.split(`
`))[0]),O=Kb(w),L=Ku(w,/,/g);if(w=Kb(w),O==null||L==null||w==null)throw new ht(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Xe(O,w,o.slice(1).join(`
`).trim()))}return e},Q("shaka.text.SbvTextParser",ks),ks.prototype.parseMedia=ks.prototype.parseMedia,ks.prototype.setSequenceMode=ks.prototype.setSequenceMode,ks.prototype.parseInit=ks.prototype.parseInit,ia["text/x-subviewer"]=function(){return new ks},fs.prototype.parseInit=function(){},fs.prototype.setSequenceMode=function(){},fs.prototype.parseMedia=function(e,n){return e=Vt(Un(e=qb(e=Oi(e)))),this.g.parseMedia(e,n)},Q("shaka.text.SrtTextParser",fs),fs.srt2webvtt=qb,fs.prototype.parseMedia=fs.prototype.parseMedia,fs.prototype.setSequenceMode=fs.prototype.setSequenceMode,fs.prototype.parseInit=fs.prototype.parseInit,ia["text/srt"]=function(){return new fs},Os.prototype.parseInit=function(){},Os.prototype.setSequenceMode=function(){},Os.prototype.parseMedia=function(e){for(var n="",o="",w=(e=i(e=Oi(e).split(/\r?\n\s*\r?\n/))).next();!w.done;w=e.next()){var O=CA.exec(w.value);O&&(w=O[1],O=O[2],w=="V4 Styles"||w=="V4+ Styles"?n=O:w=="Events"&&(o=O))}e=[],w=null;for(var L=(n=i(n.split(/\r?\n/))).next();!L.done;L=n.next())if(O=L.value,!/^\s*;/.test(O)&&(L=Wb.exec(O))){if(O=L[1].trim(),L=L[2].trim(),O=="Format")w=L.split($h);else if(O=="Style"){O=L.split($h),L={};for(var F=0;F<w.length&&F<O.length;F++)L[w[F]]=O[F];e.push(L)}}for(w=[],n=null,O={},L=(o=i(o.split(/\r?\n/))).next();!L.done;O={vd:O.vd},L=o.next())if(L=L.value,!/^\s*;/.test(L)&&(F=Wb.exec(L))){if(L=F[1].trim(),F=F[2].trim(),L=="Format")n=F.split($h);else if(L=="Dialogue"){F=F.split($h),L={};for(var q=0;q<n.length&&q<F.length;q++)L[n[q]]=F[q];F=new Xe(q=zb(L.Start),zb(L.End),F.slice(n.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),O.vd=L.Style,(L=e.find(function($){return function(ce){return ce.Name==$.vd}}(O)))&&RA(F,L),w.push(F)}}return w},Q("shaka.text.SsaTextParser",Os),Os.prototype.parseMedia=Os.prototype.parseMedia,Os.prototype.setSequenceMode=Os.prototype.setSequenceMode,Os.prototype.parseInit=Os.prototype.parseInit;var Bf,jf,CA=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Wb=/^\s*([^:]+):\s*(.*)/,$h=/\s*,\s*/,kA=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function Xb(){}function Qb(){Bf?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Bf=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=OA):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function OA(e,n){var o,w=this;return W(function(O){return O.g==1?(console.assert(w==navigator,'bad "this" for requestMediaKeySystemAccess'),f(O,Bf.call(w,e,n),2)):aT(o=O.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Bf,O.return(o)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=$b,O.return($b.call(w,e,n)))})}function $b(e,n){var o,w,O,L,F,q,$,ce,ue,Ie,_e=this;return W(function(Qe){if(Qe.g==1){for(console.assert(_e==navigator,'bad "this" for requestMediaKeySystemAccess'),o=iT(e),w=[],O=i(n),L=O.next();!L.done;L=O.next())F=L.value,q=Jb(F.videoCapabilities,o),$=Jb(F.audioCapabilities,o),F.videoCapabilities&&F.videoCapabilities.length&&!q.length||F.audioCapabilities&&F.audioCapabilities.length&&!$.length||((ce=Object.assign({},F)).videoCapabilities=q,ce.audioCapabilities=$,w.push(ce));if(!w.length)throw(ue=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",ue.code=DOMException.NOT_SUPPORTED_ERR,ue;return f(Qe,Bf.call(_e,e,w),2)}return Ie=Qe.h,Qe.return(new Jh(Ie,o))})}function Jb(e,n){return e&&e.filter(function(o){return!o.encryptionScheme||o.encryptionScheme==n})}function eT(){}function tT(){jf?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(jf=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=DA):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function DA(e){var n,o,w,O=this;return W(function(L){switch(L.g){case 1:return console.assert(O==navigator.mediaCapabilities,'bad "this" for decodingInfo'),f(L,jf.call(O,e),2);case 2:if(n=L.h,!e.keySystemConfiguration)return L.return(n);if((o=n.keySystemAccess)&&aT(o))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=jf,L.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=nT,o){L.A(3);break}return w=n,f(L,rT(e),4);case 4:return w.keySystemAccess=L.h,L.return(n);case 3:return L.return(nT.call(O,e))}})}function nT(e){var n,o,w,O,L,F,q,$,ce=this;return W(function(ue){switch(ue.g){case 1:return console.assert(ce==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(o=e.keySystemConfiguration,w=o.keySystem,O=o.audio&&o.audio.encryptionScheme,L=o.video&&o.video.encryptionScheme,n=iT(w),F={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},O&&O!=n||L&&L!=n)?ue.return(F):f(ue,jf.call(ce,e),2);case 2:if((q=ue.h).keySystemAccess){q.keySystemAccess=new Jh(q.keySystemAccess,n),ue.A(3);break}if(!e.keySystemConfiguration){ue.A(3);break}return $=q,f(ue,rT(e),5);case 5:$.keySystemAccess=ue.h;case 3:return ue.return(q)}})}function rT(e){var n,o;return W(function(w){if(w.g==1){var O=e.keySystemConfiguration,L=[],F=[];return O.audio&&L.push({robustness:O.audio.robustness||"",contentType:e.audio.contentType}),O.video&&F.push({robustness:O.video.robustness||"",contentType:e.video.contentType}),O={initDataTypes:O.initDataType?[O.initDataType]:[],distinctiveIdentifier:O.distinctiveIdentifier,persistentState:O.persistentState,sessionTypes:O.sessionTypes},L.length&&(O.audioCapabilities=L),F.length&&(O.videoCapabilities=F),n=O,f(w,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[n]),2)}return o=w.h,w.return(o)})}function Jh(e,n){this.h=e,this.g=n,this.keySystem=e.keySystem}function iT(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function aT(e){var n=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||n)||e.encryptionScheme===void 0)}function qm(){}function oT(){Qb(),tT()}ia["text/x-ssa"]=function(){return new Os},Q("EmeEncryptionSchemePolyfill",Xb),Xb.install=Qb,Q("McEncryptionSchemePolyfill",eT),eT.install=tT,Jh.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var n=i(e.videoCapabilities),o=n.next();!o.done;o=n.next())o.value.encryptionScheme=this.g;if(e.audioCapabilities)for(o=(n=i(e.audioCapabilities)).next();!o.done;o=n.next())o.value.encryptionScheme=this.g;return e},Jh.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},Q("EncryptionSchemePolyfills",qm),qm.install=oT,I!==void 0&&I.exports&&(I.exports=qm)}).call(x,M,M,void 0),x.shaka)B[N]=x.shaka[N]})()},5452:Ee=>{Ee.exports=(B,K)=>{if(typeof B!="string"||typeof K!="string")throw new TypeError("Expected the arguments to be of type `string`");if(K==="")return[B];const M=B.indexOf(K);return M===-1?[B]:[B.slice(0,M),B.slice(M+K.length)]}},7785:Ee=>{Ee.exports=B=>encodeURIComponent(B).replace(/[!'()*]/g,K=>`%${K.charCodeAt(0).toString(16).toUpperCase()}`)},5580:Ee=>{const B=/^[-+]?0x[a-fA-F0-9]+$/,K=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const M={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};Ee.exports=function(x,N={}){if(N=Object.assign({},M,N),!x||typeof x!="string")return x;let C=x.trim();if(N.skipLike!==void 0&&N.skipLike.test(C))return x;if(N.hex&&B.test(C))return Number.parseInt(C,16);{const I=K.exec(C);if(I){const E=I[1],T=I[2];let l=((R=I[3])&&R.indexOf(".")!==-1&&((R=R.replace(/0+$/,""))==="."?R="0":R[0]==="."?R="0"+R:R[R.length-1]==="."&&(R=R.substr(0,R.length-1))),R);const c=I[4]||I[6];if(!N.leadingZeros&&T.length>0&&E&&C[2]!=="."||!N.leadingZeros&&T.length>0&&!E&&C[1]!==".")return x;{const h=Number(C),y=""+h;return y.search(/[eE]/)!==-1||c?N.eNotation?h:x:C.indexOf(".")!==-1?y==="0"&&l===""||y===l||E&&y==="-"+l?h:x:T?l===y||E+l===y?h:x:C===y||C===E+y?h:x}}return x}var R}},7372:function(Ee,B,K){function M(i,g){for(var d=0;d<g.length;d++){var r=g[d];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function x(i,g,d){return x=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(r,t,u){var m=function(A,_){for(;!Object.prototype.hasOwnProperty.call(A,_)&&(A=N(A))!==null;);return A}(r,t);if(m){var S=Object.getOwnPropertyDescriptor(m,t);return S.get?S.get.call(u||r):S.value}},x(i,g,d||i)}function N(i){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},N(i)}function C(i,g){return!g||((d=g)&&typeof Symbol<"u"&&d.constructor===Symbol?"symbol":typeof d)!="object"&&typeof g!="function"?function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(i):g;var d}function R(i,g){return R=Object.setPrototypeOf||function(d,r){return d.__proto__=r,d},R(i,g)}var I=this&&this.__awaiter||function(i,g,d,r){return new(d||(d=Promise))(function(t,u){var m=function(_){try{A(r.next(_))}catch(v){u(v)}},S=function(_){try{A(r.throw(_))}catch(v){u(v)}},A=function(_){var v,f,b;_.done?t(_.value):(v=_.value,f=v,((b=d)!=null&&typeof Symbol<"u"&&b[Symbol.hasInstance]?b[Symbol.hasInstance](f):f instanceof b)?v:new d(function(p){p(v)})).then(m,S)};A((r=r.apply(i,g||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.AdMonitor=void 0;var E=K(3217),T=K(9327),l=K(6979),c=K(5245),h=K(4155),y=function(i){(function(S,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(A&&A.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),A&&R(S,A)})(m,i);var g,d,r,t,u=(r=m,t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var S,A=N(r);if(t){var _=N(this).constructor;S=Reflect.construct(A,arguments,_)}else S=A.apply(this,arguments);return C(this,S)});function m(S,A){var _;return function(v,f){if(!(v instanceof f))throw new TypeError("Cannot call a class as a function")}(this,m),(_=u.call(this)).adBlocks=[],_.trackedAds={},_.format=S,_.ads=A,_.adStitchEngine=_.resolveEngine(A.stitcher),_.adStitchEngine?(_.adStitchEngine.on(h.StitcherEvent.ADBLOCK,function(v){return _.addAdBlock(v)}),_.adStitchEngine.init(),_):(console.warn(A.stitcher?"[AdMonitor] Stitcher: ".concat(A.stitcher," is not supported"):"[AdMonitor] Stitcher is not defined"),C(_))}return g=m,(d=[{key:"resolveEngine",value:function(S){switch(S){case E.Stitcher.NOWTILUS:return new c.NowtilusAdsParser(this.format,this.ads);case E.Stitcher.INTERNAL:return new l.InternalAdsParser(this.ads.clips)}}},{key:"handleTimeUpdate",value:function(S){var A=S.utcCurrentTime,_=S.currentTime,v=this;if(this.adStitchEngine&&this.adBlocks.length){var f=this.adStitchEngine.isTimeUTC()?A:1e3*_;if(!this.currentAdBlock){var b=this.adBlocks.find(function(U){return f>=U.startTime&&f<=U.endTime});if(!b)return;this.currentAdBlock=b,this.emit(h.AdMonitorEvent.ADBLOCK_START,Object.assign({},this.currentAdBlock))}var p=this.currentAdBlock,k=0,P=this.currentAdBlock.ads;if(P.forEach(function(U){var G,ee=p.startTime+k,ne=p.startTime+k+U.duration;if(k+=U.duration,f>=ee&&f<ne){var re=ne-f,oe=Math.round(100-100*re/U.duration);if(((G=v.currentAd)===null||G===void 0?void 0:G.id)!==U.id){v.currentAd&&(v.emit(h.AdMonitorEvent.AD_END,Object.assign({},v.currentAd)),v.trackEvent(v.currentAd,T.TrackingEvent.COMPLETE)),v.currentAd=U;var W=P.indexOf(U)+1,Te=P.length;v.emit(h.AdMonitorEvent.AD_START,Object.assign(Object.assign({},U),{adIndex:W,adsTotal:Te})),v.trackEvent(U,T.TrackingEvent.LOADED),v.trackEvent(U,T.TrackingEvent.START),v.trackEvent(U,T.TrackingEvent.IMPRESSION)}Object.keys(h.TrackingCuePoints).map(function(Ue){var ze=h.TrackingCuePoints[Ue];oe>parseInt(Ue,10)&&v.trackEvent(U,ze)})}}),f>Math.floor(p.endTime)){var j=f-this.currentAdBlock.endTime<2e3;this.currentAd&&j&&(this.emit(h.AdMonitorEvent.AD_END,Object.assign({},this.currentAd)),this.trackEvent(this.currentAd,T.TrackingEvent.COMPLETE)),this.emit(h.AdMonitorEvent.ADBLOCK_END,Object.assign({},this.currentAdBlock)),this.currentAdBlock=void 0,this.currentAd=void 0}}}},{key:"handleEnded",value:function(){this.currentAd&&(this.emit(h.AdMonitorEvent.AD_END,Object.assign({},this.currentAd)),this.trackEvent(this.currentAd,T.TrackingEvent.COMPLETE)),this.emit(h.AdMonitorEvent.ADBLOCK_END,this.currentAdBlock?Object.assign({},this.currentAdBlock):void 0),this.currentAdBlock=void 0,this.currentAd=void 0}},{key:"trackEvent",value:function(S,A){var _=this;if(S&&A&&(!this.trackedAds[S.id]||this.trackedAds[S.id][A]!==!0)){this.trackedAds[S.id]||(this.trackedAds[S.id]={});var v=S.trackingEvents[A];v==null||v.forEach(function(f){return I(_,void 0,void 0,function(){return function(b,p){var k,P,j,U,G={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return U={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(U[Symbol.iterator]=function(){return this}),U;function ee(ne){return function(re){return function(oe){if(k)throw new TypeError("Generator is already executing.");for(;G;)try{if(k=1,P&&(j=2&oe[0]?P.return:oe[0]?P.throw||((j=P.return)&&j.call(P),0):P.next)&&!(j=j.call(P,oe[1])).done)return j;switch(P=0,j&&(oe=[2&oe[0],j.value]),oe[0]){case 0:case 1:j=oe;break;case 4:return G.label++,{value:oe[1],done:!1};case 5:G.label++,P=oe[1],oe=[0];continue;case 7:oe=G.ops.pop(),G.trys.pop();continue;default:if(!((j=(j=G.trys).length>0&&j[j.length-1])||oe[0]!==6&&oe[0]!==2)){G=0;continue}if(oe[0]===3&&(!j||oe[1]>j[0]&&oe[1]<j[3])){G.label=oe[1];break}if(oe[0]===6&&G.label<j[1]){G.label=j[1],j=oe;break}if(j&&G.label<j[2]){G.label=j[2],G.ops.push(oe);break}j[2]&&G.ops.pop(),G.trys.pop();continue}oe=p.call(b,G)}catch(W){oe=[6,W],P=0}finally{k=j=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([ne,re])}}}(this,function(b){return new Image().src=f,[2]})})}),this.trackedAds[S.id][A]=!0}}},{key:"getAdBlocks",value:function(){return this.adBlocks}},{key:"addAdBlock",value:function(S){S.ads.length&&!this.adBlocks.find(function(A){return A.startTime===S.startTime})&&(this.adBlocks.push(S),this.emit(h.AdMonitorEvent.ADBLOCK_ADDED,S))}},{key:"destroy",value:function(){var S;x(N(m.prototype),"destroy",this).call(this),(S=this.adStitchEngine)===null||S===void 0||S.destroy(),this.adStitchEngine=void 0,this.currentAd=void 0,this.currentAdBlock=void 0}}])&&M(g.prototype,d),m}(T.EmitterBaseClass);B.AdMonitor=y},8517:(Ee,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.AdMonitorEvent=B.AdMonitor=void 0;var M=K(7372);Object.defineProperty(B,"AdMonitor",{enumerable:!0,get:function(){return M.AdMonitor}});var x=K(4155);Object.defineProperty(B,"AdMonitorEvent",{enumerable:!0,get:function(){return x.AdMonitorEvent}})},1413:(Ee,B,K)=>{function M(I,E){for(var T=0;T<E.length;T++){var l=E[T];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(I,l.key,l)}}function x(I){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)},x(I)}function N(I,E){return N=Object.setPrototypeOf||function(T,l){return T.__proto__=l,T},N(I,E)}function C(I){var E=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var T,l=x(I);if(E){var c=x(this).constructor;T=Reflect.construct(l,arguments,c)}else T=l.apply(this,arguments);return function(h,y){return!y||((i=y)&&typeof Symbol<"u"&&i.constructor===Symbol?"symbol":typeof i)!="object"&&typeof y!="function"?function(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(h):y;var i}(this,T)}}Object.defineProperty(B,"__esModule",{value:!0}),B.AbstractAdsParser=void 0;var R=function(I){(function(h,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(y&&y.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),y&&N(h,y)})(c,I);var E,T,l=C(c);function c(){var h,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return function(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}(this,c),(h=l.call(this)).clips=y,h.isLive=i,h}return E=c,(T=[{key:"isTimeUTC",value:function(){return this.isLive}}])&&M(E.prototype,T),c}(K(9327).EmitterBaseClass);B.AbstractAdsParser=R},6979:(Ee,B,K)=>{function M(T,l){for(var c=0;c<l.length;c++){var h=l[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(T,h.key,h)}}function x(T){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},x(T)}function N(T,l){return N=Object.setPrototypeOf||function(c,h){return c.__proto__=h,c},N(T,l)}function C(T){var l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var c,h=x(T);if(l){var y=x(this).constructor;c=Reflect.construct(h,arguments,y)}else c=h.apply(this,arguments);return function(i,g){return!g||((d=g)&&typeof Symbol<"u"&&d.constructor===Symbol?"symbol":typeof d)!="object"&&typeof g!="function"?function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(i):g;var d}(this,c)}}Object.defineProperty(B,"__esModule",{value:!0}),B.InternalAdsParser=void 0;var R=K(3217),I=K(4155),E=function(T){(function(i,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(g&&g.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),g&&N(i,g)})(y,T);var l,c,h=C(y);function y(){return function(i,g){if(!(i instanceof g))throw new TypeError("Cannot call a class as a function")}(this,y),h.apply(this,arguments)}return l=y,(c=[{key:"init",value:function(){var i,g=this;if(!((i=this.clips)===null||i===void 0)&&i.length){var d=0,r=0,t=[];this.clips.forEach(function(u,m){var S,A=u.category,_=u.duration,v=_===void 0?0:_,f=u.title,b=f===void 0?"":f;if(A===R.AdClipCategory.AD){((S=g.clips[m-1])===null||S===void 0?void 0:S.category)!==R.AdClipCategory.AD&&t.push({startTime:d,endTime:d,duration:0,relativeStartTime:d-r,ads:[]});var p=t.at(-1);p&&(p.endTime+=v,p.duration+=v,p.ads.push({id:"".concat(d,"_").concat(m),title:b,duration:v,system:"",trackingEvents:{}})),r+=v}d+=v}),t.forEach(function(u){g.emit(I.StitcherEvent.ADBLOCK,u)})}else console.warn("[InternalAdsStitcher] No ad clip data available.")}}])&&M(l.prototype,c),y}(K(1413).AbstractAdsParser);B.InternalAdsParser=E},5245:function(Ee,B,K){function M(r,t){(t==null||t>r.length)&&(t=r.length);for(var u=0,m=new Array(t);u<t;u++)m[u]=r[u];return m}function x(r,t){for(var u=0;u<t.length;u++){var m=t[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(r,m.key,m)}}function N(r,t,u){return t in r?Object.defineProperty(r,t,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[t]=u,r}function C(r,t,u){return C=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(m,S,A){var _=function(f,b){for(;!Object.prototype.hasOwnProperty.call(f,b)&&(f=R(f))!==null;);return f}(m,S);if(_){var v=Object.getOwnPropertyDescriptor(_,S);return v.get?v.get.call(A||m):v.value}},C(r,t,u||r)}function R(r){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},R(r)}function I(r,t){return I=Object.setPrototypeOf||function(u,m){return u.__proto__=m,u},I(r,t)}function E(r){return function(t){if(Array.isArray(t))return M(t)}(r)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(r)||function(t,u){if(t){if(typeof t=="string")return M(t,u);var m=Object.prototype.toString.call(t).slice(8,-1);return m==="Object"&&t.constructor&&(m=t.constructor.name),m==="Map"||m==="Set"?Array.from(m):m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?M(t,u):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(r){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,m=R(r);if(t){var S=R(this).constructor;u=Reflect.construct(m,arguments,S)}else u=m.apply(this,arguments);return function(A,_){return!_||((v=_)&&typeof Symbol<"u"&&v.constructor===Symbol?"symbol":typeof v)!="object"&&typeof _!="function"?function(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}(A):_;var v}(this,u)}}function l(r,t){var u,m,S,A,_={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return A={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function v(f){return function(b){return function(p){if(u)throw new TypeError("Generator is already executing.");for(;_;)try{if(u=1,m&&(S=2&p[0]?m.return:p[0]?m.throw||((S=m.return)&&S.call(m),0):m.next)&&!(S=S.call(m,p[1])).done)return S;switch(m=0,S&&(p=[2&p[0],S.value]),p[0]){case 0:case 1:S=p;break;case 4:return _.label++,{value:p[1],done:!1};case 5:_.label++,m=p[1],p=[0];continue;case 7:p=_.ops.pop(),_.trys.pop();continue;default:if(!((S=(S=_.trys).length>0&&S[S.length-1])||p[0]!==6&&p[0]!==2)){_=0;continue}if(p[0]===3&&(!S||p[1]>S[0]&&p[1]<S[3])){_.label=p[1];break}if(p[0]===6&&_.label<S[1]){_.label=S[1],S=p;break}if(S&&_.label<S[2]){_.label=S[2],_.ops.push(p);break}S[2]&&_.ops.pop(),_.trys.pop();continue}p=t.call(r,_)}catch(k){p=[6,k],m=0}finally{u=S=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([f,b])}}}var c=this&&this.__awaiter||function(r,t,u,m){return new(u||(u=Promise))(function(S,A){var _=function(b){try{f(m.next(b))}catch(p){A(p)}},v=function(b){try{f(m.throw(b))}catch(p){A(p)}},f=function(b){var p,k,P;b.done?S(b.value):(p=b.value,k=p,((P=u)!=null&&typeof Symbol<"u"&&P[Symbol.hasInstance]?P[Symbol.hasInstance](k):k instanceof P)?p:new u(function(j){j(p)})).then(_,v)};f((m=m.apply(r,t||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.NowtilusAdsParser=void 0;var h=K(3217),y=K(9327),i=K(4155),g=K(171),d=function(r){(function(A,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(_&&_.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),_&&I(A,_)})(S,r);var t,u,m=T(S);function S(A,_){var v;return function(f,b){if(!(f instanceof b))throw new TypeError("Cannot call a class as a function")}(this,S),v=m.call(this),_.clips?(v.clips=_.clips,v.isLive=!1):A.vastUrl&&(v.vastUrl=A.vastUrl,v.isLive=!0),v}return t=S,(u=[{key:"init",value:function(){this.vastUrl||this.clips&&this.clips.length?this.isLive?this.vastUrl&&this.initLive():this.initVOD():console.warn("[Nowtilus] Can't monitor stream, no clips or vastUrl")}},{key:"initLive",value:function(){var A=this;this.poll(),this.longPoll=window.setInterval(function(){return c(A,void 0,void 0,function(){return l(this,function(_){return this.poll(),[2]})})},5e3)}},{key:"initVOD",value:function(){var A=this;if(this.clips){var _,v=0,f=0,b=[];this.clips.forEach(function(p,k){var P,j,U,G,ee,ne,re,oe,W,Te,Ue,ze;p.category===h.AdClipCategory.VOD?_=void 0:(_||(_={startTime:v,endTime:v,duration:0,relativeStartTime:v-f,ads:[]},b.push(_)),_.endTime+=(P=p.duration)!==null&&P!==void 0?P:0,_.duration+=(j=p.duration)!==null&&j!==void 0?j:0,_.ads.push({id:"".concat(v,"_").concat(k,"_").concat(p.titleId),title:(U=p.title)!==null&&U!==void 0?U:"",duration:(G=p.duration)!==null&&G!==void 0?G:0,system:"",trackingEvents:Object.assign((ze={},N(ze,y.TrackingEvent.IMPRESSION,E((ee=p.impressionUrlTemplates)!==null&&ee!==void 0?ee:[])),N(ze,y.TrackingEvent.CLICK_THROUGH,E((re=(ne=p.videoClicks)===null||ne===void 0?void 0:ne.clickTrackingUrls)!==null&&re!==void 0?re:[])),ze),(oe=p.trackingEvents)!==null&&oe!==void 0?oe:[]),clickThrough:(W=p.videoClicks)===null||W===void 0?void 0:W.clickThroughUrl}),f+=(Te=p.duration)!==null&&Te!==void 0?Te:0),v+=(Ue=p.duration)!==null&&Ue!==void 0?Ue:0}),b.forEach(function(p){A.emit(i.StitcherEvent.ADBLOCK,p)})}}},{key:"poll",value:function(){return c(this,void 0,void 0,function(){var A,_,v,f,b;return l(this,function(p){switch(p.label){case 0:if(!this.vastUrl)return[2,console.error("vastUrl not defined")];p.label=1;case 1:return p.trys.push([1,4,,5]),[4,fetch(this.vastUrl,{headers:{accept:"application/json"}})];case 2:if(!(A=p.sent()).ok)throw new Error("[Nowtilus] something went wrong when fetching the VAST JSON");return A.status!==200?[2]:[4,A.json()];case 3:if(!(_=p.sent()).time)throw new Error("[Nowtilus] VAST response invalid, no time availble");return _.time===this.vastStartTime?[2]:(v=(0,g.parseVAST)(_.vast,_.time.toString()),this.vastStartTime=_.time,f={startTime:_.time,duration:v.reduce(function(k,P){return k+P.duration},0),relativeStartTime:_.time,endTime:v.reduce(function(k,P){return k+P.duration},_.time),ads:v},this.emit(i.StitcherEvent.ADBLOCK,f),[3,5]);case 4:return b=p.sent(),console.error("[Nowtilus] something went wrong when fetching the vast",b),[3,5];case 5:return[2]}})})}},{key:"destroy",value:function(){C(R(S.prototype),"destroy",this).call(this),clearInterval(this.longPoll)}}])&&x(t.prototype,u),S}(K(1413).AbstractAdsParser);B.NowtilusAdsParser=d},4155:(Ee,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.StitcherEvent=B.AdMonitorEvent=B.TrackingCuePoints=void 0;var M=K(9327);B.TrackingCuePoints={25:M.TrackingEvent.FIRST_QUARTILE,50:M.TrackingEvent.MIDPOINT,75:M.TrackingEvent.THIRD_QUARTILE},B.AdMonitorEvent={AD_START:"AD_START",AD_END:"AD_END",ADBLOCK_START:"ADBLOCK_START",ADBLOCK_END:"ADBLOCK_END",ADBLOCK_ADDED:"ADBLOCK_ADDED"},B.StitcherEvent={ADBLOCK:"ADBLOCK"}},171:(Ee,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.parseVAST=void 0;var M=new(K(2215)).XMLParser({ignoreAttributes:!1,allowBooleanAttributes:!0,parseAttributeValue:!0,alwaysCreateTextNode:!0});B.parseVAST=function(x){var N,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",R=[],I=M.parse(x);return!((N=I==null?void 0:I.VAST)===null||N===void 0)&&N.Ad&&(Array.isArray(I.VAST.Ad)?I.VAST.Ad:[I.VAST.Ad]).forEach(function(E,T){var l,c,h,y=E.InLine,i=(c=(l=y==null?void 0:y.Creatives)===null||l===void 0?void 0:l.Creative)===null||c===void 0?void 0:c.Linear,g=(h=i==null?void 0:i.TrackingEvents)===null||h===void 0?void 0:h.Tracking,d=function(m){return Array.isArray(m)?m.map(function(S){return S["#text"]}):m!=null&&m["#text"]?[m["#text"]]:[]}(y==null?void 0:y.Impression),r=function(m){var S={};return m.forEach(function(A){var _=S[A["@_event"]];_?_.push(A["#text"]):S[A["@_event"]]=[A["#text"]]}),S}(g),t=E["@_id"]||"title:".concat(y==null?void 0:y.AdTitle["#text"],",system:").concat(y==null?void 0:y.AdSystem["#text"]),u={id:"".concat(C,"_").concat(T,"_").concat(t),system:y==null?void 0:y.AdSystem["#text"],title:y==null?void 0:y.AdTitle["#text"],duration:new Date("1970-01-01T".concat(i==null?void 0:i.Duration["#text"],".000Z")).getTime(),trackingEvents:Object.assign({impression:d||[]},r)};R.push(u)}),R}},2910:function(Ee,B,K){function M(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function x(h,y){for(var i=0;i<y.length;i++){var g=y[i];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,g.key,g)}}function N(h,y,i){return N=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(g,d,r){var t=function(m,S){for(;!Object.prototype.hasOwnProperty.call(m,S)&&(m=C(m))!==null;);return m}(g,d);if(t){var u=Object.getOwnPropertyDescriptor(t,d);return u.get?u.get.call(r||g):u.value}},N(h,y,i||h)}function C(h){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},C(h)}function R(h,y){return R=Object.setPrototypeOf||function(i,g){return i.__proto__=g,i},R(h,y)}function I(h){var y=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var i,g=C(h);if(y){var d=C(this).constructor;i=Reflect.construct(g,arguments,d)}else i=g.apply(this,arguments);return function(r,t){return!t||((u=t)&&typeof Symbol<"u"&&u.constructor===Symbol?"symbol":typeof u)!="object"&&typeof t!="function"?M(r):t;var u}(this,i)}}var E=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(B,"__esModule",{value:!0}),B.EventPool=B.EVENT_POOL_SEND=void 0;var T=E(K(8357)),l=K(9327);B.EVENT_POOL_SEND="eventpool:send";var c=function(h){(function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&R(r,t)})(d,h);var y,i,g=I(d);function d(r,t){var u;return function(m,S){if(!(m instanceof S))throw new TypeError("Cannot call a class as a function")}(this,d),(u=g.call(this)).sequenceNumber=0,u.payloadQueue=[],u.sessionId=r,u.logger=t,u.queueDispatcher=u.queueDispatcher.bind(M(u)),u.updateInterval(3e3),document.addEventListener("visibilitychange",u.queueDispatcher,{capture:!0}),document.addEventListener("pagehide",u.queueDispatcher,{capture:!0}),u}return y=d,i=[{key:"updateInterval",value:function(r){var t=r.toString().length<4?Number(1e3*r):r;this.dispatcher=(0,T.default)(this.queueDispatcher,t,{leading:!1,trailing:!0})}},{key:"add",value:function(r){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.sequenceNumber++,r.SequenceNumber=this.sequenceNumber,this.logger.debug("Analytics added to pool",this.sessionId,r),this.payloadQueue.push(r),t?this.queueDispatcher():this.dispatcher()}},{key:"queueDispatcher",value:function(){if(navigator.onLine&&this.payloadQueue.length){var r=this.payloadQueue.sort(function(t,u){return t.TimeStamp-u.TimeStamp});this.payloadQueue=[],this.logger.debug("Analytics dispatched from pool",r),this.emit(B.EVENT_POOL_SEND,r)}}},{key:"destroy",value:function(){document.removeEventListener("visibilitychange",this.queueDispatcher),document.removeEventListener("pagehide",this.queueDispatcher),this.dispatcher.flush(),N(C(d.prototype),"destroy",this).call(this)}}],i&&x(y.prototype,i),d}(l.EmitterBaseClass);B.EventPool=c},6257:function(Ee,B,K){function M(y,i){for(var g=0;g<i.length;g++){var d=i[g];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(y,d.key,d)}}function x(y,i){var g,d,r,t,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return t={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(t[Symbol.iterator]=function(){return this}),t;function m(S){return function(A){return function(_){if(g)throw new TypeError("Generator is already executing.");for(;u;)try{if(g=1,d&&(r=2&_[0]?d.return:_[0]?d.throw||((r=d.return)&&r.call(d),0):d.next)&&!(r=r.call(d,_[1])).done)return r;switch(d=0,r&&(_=[2&_[0],r.value]),_[0]){case 0:case 1:r=_;break;case 4:return u.label++,{value:_[1],done:!1};case 5:u.label++,d=_[1],_=[0];continue;case 7:_=u.ops.pop(),u.trys.pop();continue;default:if(!((r=(r=u.trys).length>0&&r[r.length-1])||_[0]!==6&&_[0]!==2)){u=0;continue}if(_[0]===3&&(!r||_[1]>r[0]&&_[1]<r[3])){u.label=_[1];break}if(_[0]===6&&u.label<r[1]){u.label=r[1],r=_;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(_);break}r[2]&&u.ops.pop(),u.trys.pop();continue}_=i.call(y,u)}catch(v){_=[6,v],d=0}finally{g=r=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([S,A])}}}var N=this&&this.__awaiter||function(y,i,g,d){return new(g||(g=Promise))(function(r,t){var u=function(A){try{S(d.next(A))}catch(_){t(_)}},m=function(A){try{S(d.throw(A))}catch(_){t(_)}},S=function(A){var _,v,f;A.done?r(A.value):(_=A.value,v=_,((f=g)!=null&&typeof Symbol<"u"&&f[Symbol.hasInstance]?f[Symbol.hasInstance](v):v instanceof f)?_:new g(function(b){b(_)})).then(u,m)};S((d=d.apply(y,i||[])).next())})},C=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(B,"__esModule",{value:!0}),B.RedBeeAnalytics=void 0;var R=C(K(9653)),I=K(9327),E=K(9257),T=K(2910),l={"content-type":"application/json"},c={appType:"browser",pageUrl:window.location.href,referrer:function(){var y,i;if(document.referrer)return document.referrer;if(window.self===window.top)return"";try{return(i=(y=window.top)===null||y===void 0?void 0:y.location.href)!==null&&i!==void 0?i:""}catch{return""}}()},h=function(){function y(d){var r=d.customer,t=d.businessUnit,u=d.sessionToken,m=d.analyticsBaseUrl,S=d.device,A=d.debug;if(function(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}(this,y),this.droppedFramesCount=0,this.testSegment=void 0,!r||!t)throw new Error("No Customer or BusinessUnit defined");if(this.customer=r,this.businessUnit=t,!u)throw new Error("No sessionToken defined");this.deviceId=(0,I.getDeviceId)(u),this.logger=new I.Logger({prefix:"[RedBeeAnalytics]",logLevel:A?I.LogLevel.DEBUG:I.LogLevel.NONE}),this.setAnalyticsBaseUrl(m),this.requestHeaders=Object.assign({Authorization:"Bearer ".concat(u)},l),this.device=Object.assign({},c,S),this.playerFields={Player:"",Version:"",Technology:"",TechVersion:"",StreamingTechnology:""}}var i,g;return i=y,(g=[{key:"_send",value:function(d){return N(this,void 0,void 0,function(){var r,t,u,m;return x(this,function(S){switch(S.label){case 0:if(r=this,t=new URL("".concat(this.customerSpecificBaseUrl,"/eventsink/send")).toString(),u={DispatchTime:Date.now(),Customer:this.customer,BusinessUnit:this.businessUnit,SessionId:this.sessionId,Payload:d},this.logger.logLevel===I.LogLevel.DEBUG)return this.logger.debug("send",t,u),[2,!0];S.label=1;case 1:return S.trys.push([1,3,,4]),[4,fetch(t,{method:"POST",mode:"cors",body:JSON.stringify(u),headers:this.requestHeaders})];case 2:return[2,S.sent().ok];case 3:return m=S.sent(),this.logger.error("_send() failed",m),d.forEach(function(A){var _;(_=r.eventPool)===null||_===void 0||_.add(A)}),[2,!1];case 4:return[2]}})})}},{key:"isActive",value:function(){return!(!this.sessionId||!this.eventPool)}},{key:"setAnalyticsBaseUrl",value:function(d){this.baseUrl=d,this.customerSpecificBaseUrl=new URL("/v2/customer/".concat(this.customer,"/businessunit/").concat(this.businessUnit),this.baseUrl).toString()}},{key:"clear",value:function(){this.logger.info("clear",this.sessionId),this.sessionId=void 0,this.eventPool=void 0}},{key:"init",value:function(d){return N(this,void 0,void 0,function(){return x(this,function(r){if(!this.customerSpecificBaseUrl)throw new Error("[RedBeeAnalytics] analyticsBaseUrl was never set");return d?(this.logger.debug("init",d),this.clear(),this.sessionId=d,this.eventPool=new T.EventPool(d,this.logger),this.eventPool.on(T.EVENT_POOL_SEND,this._send.bind(this)),[2,!0]):(this.logger.info("no sessionId provided, session will not be tracked"),[2,!1])})})}},{key:"deviceInfoEvent",value:function(){var d;if(this.isActive()){var r=Object.assign({EventType:"Device.Info",Height:window.screen?window.screen.height:0,Width:window.screen?window.screen.width:0,Name:window.navigator?window.navigator.product:""},this.getDefaultFields());(d=this.eventPool)===null||d===void 0||d.add(r)}}},{key:"created",value:function(d){var r,t,u=d.assetId,m=d.autoplay,S=m===void 0||m,A=d.player,_=d.playerVersion,v=d.streamingTechnology,f=d.cdnProvider,b=d.analyticsPostInterval,p=d.analyticsBucket,k=d.analyticsTag,P=d.analyticsBaseUrl,j=d.analyticsPercentage,U=d.requestId,G=d.deviceModel,ee=d.deviceModelNumber,ne=d.deviceStats;if(this.isActive()){this.logger.debug("created",this.sessionId),this.assetId=u||"",this.device.model=G||this.device.model,this.device.deviceStats=ne,this.device.modelNumber=ee||this.device.modelNumber,this.updatePlayerFields(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({Player:A,Version:_,StreamingTechnology:v},f&&{CDNVendor:f}),b&&{AnalyticsPostInterval:b}),p&&{AnalyticsBucket:p}),k&&{AnalyticsTag:k}),P&&{AnalyticsBaseUrl:P}),j&&{AnalyticsPercentage:j})),b&&((r=this.eventPool)===null||r===void 0||r.updateInterval(b));var re=Object.assign(Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.CREATED,AssetId:this.assetId,AutoPlay:S},U&&{RequestId:U}),this.getDefaultFields());(t=this.eventPool)===null||t===void 0||t.add(re),this.deviceInfoEvent()}}},{key:"assetLoaded",value:function(d){var r,t=d.assetId,u=d.programId;if(this.isActive()){this.logger.debug("HandshakeStarted",this.assetId),t&&this.assetId!==t&&(this.assetId=t);var m=Object.assign(Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.HANDSHAKE,AssetId:this.assetId},u&&{programId:u}),this.getDefaultFields());(r=this.eventPool)===null||r===void 0||r.add(m)}}},{key:"playerReady",value:function(d){var r,t=d.startTime,u=d.playerTech,m=d.techVersion,S=d.testSegment;if(this.isActive()){this.logger.debug("playerReady",this.sessionId),this.startTime=t,this.testSegment=S,this.updatePlayerFields({Technology:u,TechVersion:m});var A=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.PLAYER_READY},this.getDefaultFields());(r=this.eventPool)===null||r===void 0||r.add(A)}}},{key:"playing",value:function(d){var r,t=d.bitrate,u=d.duration,m=u===void 0?0:u,S=d.mediaLocator;if(this.isActive()){this.logger.debug("playing");var A=Object.assign(Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.PLAYING,AssetId:this.assetId,Bitrate:t,VideoLength:1e3*m,MediaLocator:S},this.getDefaultFields()),{OffsetTime:this.startTime});(r=this.eventPool)===null||r===void 0||r.add(A,!0)}}},{key:"paused",value:function(d){var r;if(this.isActive()){this.logger.debug("paused",d);var t=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.PAUSED},this.getDefaultFields(d));(r=this.eventPool)===null||r===void 0||r.add(t)}}},{key:"seeked",value:function(d){var r;if(this.isActive()){this.logger.debug("seeked",d);var t=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.SEEKED},this.getDefaultFields(d));(r=this.eventPool)===null||r===void 0||r.add(t)}}},{key:"startCasting",value:function(){var d;if(this.isActive()){this.logger.debug("startCasting",Date.now());var r=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.START_CASTING},this.getDefaultFields());(d=this.eventPool)===null||d===void 0||d.add(r)}}},{key:"stopCasting",value:function(){var d;if(this.isActive()){this.logger.debug("stopCasting",Date.now());var r=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.STOP_CASTING},this.getDefaultFields());(d=this.eventPool)===null||d===void 0||d.add(r)}}},{key:"startAirPlay",value:function(){var d;if(this.isActive()){this.logger.debug("startAirPlay",Date.now());var r=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.START_AIRPLAY},this.getDefaultFields());(d=this.eventPool)===null||d===void 0||d.add(r)}}},{key:"stopAirPlay",value:function(){var d;if(this.isActive()){this.logger.debug("stopAirPlay",Date.now());var r=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.STOP_AIRPLAY},this.getDefaultFields());(d=this.eventPool)===null||d===void 0||d.add(r)}}},{key:"heartbeat",value:function(d){var r;if(this.isActive()){this.logger.debug("heartbeat");var t=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.HEARTBEAT},this.getDefaultFields(d));(r=this.eventPool)===null||r===void 0||r.add(t)}}},{key:"resume",value:function(d){var r;if(this.isActive()){this.logger.debug("resume",d);var t=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.RESUME},this.getDefaultFields(d));(r=this.eventPool)===null||r===void 0||r.add(t)}}},{key:"bitrateChanged",value:function(d,r){var t;if(this.isActive()&&d){this.logger.debug("bitrateChanged",d,r);var u=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.BITRATE_CHANGED,Bitrate:r},this.getDefaultFields(d));(t=this.eventPool)===null||t===void 0||t.add(u)}}},{key:"buffering",value:function(d){var r;if(this.isActive()){this.logger.debug("buffering",d);var t=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.BUFFERING},this.getDefaultFields(d));(r=this.eventPool)===null||r===void 0||r.add(t)}}},{key:"buffered",value:function(d){var r;if(this.isActive()){this.logger.debug("buffered",d);var t=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.BUFFERED},this.getDefaultFields(d));(r=this.eventPool)===null||r===void 0||r.add(t)}}},{key:"dispose",value:function(d){var r;if(this.isActive()){this.logger.debug("dispose");var t=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.ABORTED},this.getDefaultFields(d));(r=this.eventPool)===null||r===void 0||r.add(t)}}},{key:"mediaEnded",value:function(d){var r;if(this.isActive()){this.logger.debug("mediaEnded");var t=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.ENDED},this.getDefaultFields(d));(r=this.eventPool)===null||r===void 0||r.add(t)}}},{key:"adStarted",value:function(d,r){var t;if(this.isActive()){this.logger.debug("ssai adStarted, adId: ".concat(r));var u=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.AD_STARTED,AdMediaId:r},this.getDefaultFields(d));(t=this.eventPool)===null||t===void 0||t.add(u)}}},{key:"adCompleted",value:function(d,r){var t;if(this.isActive()){this.logger.debug("ssai adCompleted, adId: ".concat(r));var u=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.AD_ENDED,AdMediaId:r},this.getDefaultFields(d));(t=this.eventPool)===null||t===void 0||t.add(u)}}},{key:"programChanged",value:function(d,r){var t;if(this.isActive()){this.logger.debug("programChanged",d,r);var u=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.PROGRAM_CHANGED,ProgramId:r},this.getDefaultFields(d));(t=this.eventPool)===null||t===void 0||t.add(u)}}},{key:"error",value:function(d){var r,t=d.message,u=d.currentTime,m=d.code,S=d.info,A=d.details,_=d.supportedDevice,v=_===void 0||_,f=d.deviceStats;if(this.isActive()){this.logger.debug("error",m,t),this.device.deviceStats=f;var b=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.ERROR,AssetId:this.assetId,Message:t,Code:m,Info:S,Details:A,SupportedDevice:v?"yes":"no"},this.getDefaultFields(u));(r=this.eventPool)===null||r===void 0||r.add(b)}}},{key:"drmSessionUpdate",value:function(d){var r;if(this.isActive()){this.logger.debug("drmSessionUpdate",d);var t=Object.assign({EventType:E.REDBEE_ANALYTICS_EVENT.DRM_SESSION_UPDATED,Code:0,Message:d},this.getDefaultFields());(r=this.eventPool)===null||r===void 0||r.add(t)}}},{key:"droppedFrames",value:function(d){this.isActive()&&(this.droppedFramesCount=d)}},{key:"updatePlayerFields",value:function(d){this.playerFields=Object.assign(Object.assign({},this.playerFields),d)}},{key:"getOffset",value:function(d){return Math.floor(1e3*d)}},{key:"getDefaultFields",value:function(d){var r,t;return Object.assign(Object.assign(Object.assign({Timestamp:Date.now(),DeviceId:this.deviceId,DeviceModel:this.device.model,DeviceModelNumber:this.device.modelNumber,DeviceStats:this.device.deviceStats,Manufacturer:this.device.manufacturer,AppType:this.device.appType},this.device.appName&&{AppName:this.device.appName}),{PageUrl:this.device.pageUrl,Referrer:this.device.referrer,UserAgent:window.navigator?window.navigator.userAgent:"",OS:(r=R.default.os)===null||r===void 0?void 0:r.family,OSVersion:(t=R.default.os)===null||t===void 0?void 0:t.version,OffsetTime:d&&d>0?this.getOffset(d):void 0,TotalNumberOfDroppedFrames:this.droppedFramesCount,TestSegment:this.testSegment}),this.playerFields)}},{key:"destroy",value:function(){var d;(d=this.eventPool)===null||d===void 0||d.destroy(),this.eventPool=void 0,this.clear()}}])&&M(i.prototype,g),y}();B.RedBeeAnalytics=h},9551:(Ee,B,K)=>{function M(R,I){for(var E=0;E<I.length;E++){var T=I[E];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(R,T.key,T)}}Object.defineProperty(B,"__esModule",{value:!0}),B.BaseConnector=void 0;var x=K(3217),N=K(6257),C=function(){function R(T){var l=T.customer,c=T.businessUnit,h=T.analyticsBaseUrl,y=T.sessionToken,i=T.playerName,g=i===void 0?"javascript-player":i,d=T.playerVersion,r=T.device,t=T.debug,u=t!==void 0&&t;(function(S,A){if(!(S instanceof A))throw new TypeError("Cannot call a class as a function")})(this,R),this.customer=l,this.businessUnit=c,this.analyticsBaseUrl=h,this.playerName=g,this.playerVersion=d;var m=new N.RedBeeAnalytics({customer:this.customer,businessUnit:this.businessUnit,sessionToken:y,analyticsBaseUrl:h,device:r,debug:u});this.rbmAnalytics=m}var I,E;return I=R,(E=[{key:"setAnalyticsBaseUrl",value:function(T){this.analyticsBaseUrl=T,this.rbmAnalytics.setAnalyticsBaseUrl(T)}},{key:"resolveFormatType",value:function(T){return T.includes(".mpd")?x.FormatType.DASH:T.includes(".m3u8")?x.FormatType.HLS:T.includes(".ism")?x.FormatType.SMOOTHSTREAMING:T.includes(".mp4")?x.FormatType.MP4:T.includes(".mp3")?x.FormatType.MP3:void 0}},{key:"destroy",value:function(){var T;(T=this.rbmAnalytics)===null||T===void 0||T.destroy()}}])&&M(I.prototype,E),R}();B.BaseConnector=C},9542:(Ee,B,K)=>{function M(l,c){for(var h=0;h<c.length;h++){var y=c[h];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(l,y.key,y)}}function x(l,c,h){return x=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(y,i,g){var d=function(t,u){for(;!Object.prototype.hasOwnProperty.call(t,u)&&(t=N(t))!==null;);return t}(y,i);if(d){var r=Object.getOwnPropertyDescriptor(d,i);return r.get?r.get.call(g||y):r.value}},x(l,c,h||l)}function N(l){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},N(l)}function C(l,c){return C=Object.setPrototypeOf||function(h,y){return h.__proto__=y,h},C(l,c)}function R(l){var c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var h,y=N(l);if(c){var i=N(this).constructor;h=Reflect.construct(y,arguments,i)}else h=y.apply(this,arguments);return function(g,d){return!d||((r=d)&&typeof Symbol<"u"&&r.constructor===Symbol?"symbol":typeof r)!="object"&&typeof d!="function"?function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(g):d;var r}(this,h)}}Object.defineProperty(B,"__esModule",{value:!0}),B.CastConnector=void 0;var I=K(8517),E=K(6101),T=function(l){(function(g,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(d&&d.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),d&&C(g,d)})(i,l);var c,h,y=R(i);function i(g,d){var r,t=g.customer,u=g.businessUnit,m=g.analyticsBaseUrl,S=g.sessionToken,A=g.playerVersion,_=g.deviceInfo,v=g.debug;return function(f,b){if(!(f instanceof b))throw new TypeError("Cannot call a class as a function")}(this,i),(r=y.call(this,{customer:t,businessUnit:u,analyticsBaseUrl:m,sessionToken:S,playerName:"cast-receiver",playerVersion:A,debug:v,device:Object.assign({model:"cc-unknown",manufacturer:"Google",appType:"chromecast"},_)})).beatInterval=1e4,r.defaultPostInterval=3e4,r.sessionStarted=!1,r.session=d,r}return c=i,(h=[{key:"connect",value:function(g,d){var r;this.playerManager=g,this.adMonitor=d,this.setupEventListeners();var t=this.session,u=t.assetId,m=t.requestId,S=t.playSessionId,A=(r=g==null?void 0:g.getMediaInformation())===null||r===void 0?void 0:r.contentUrl,_=A?this.resolveFormatType(A):"";this.rbmAnalytics.init(S),this.rbmAnalytics.created({player:this.playerName,playerVersion:this.playerVersion,streamingTechnology:_,analyticsPostInterval:this.defaultPostInterval,assetId:u,autoplay:!0,requestId:m,deviceStats:(0,E.getDeviceStats)()}),this.rbmAnalytics.assetLoaded({assetId:u})}},{key:"disconnect",value:function(){var g;this.disableHeartbeat(),this.onEventHandler&&((g=this.playerManager)===null||g===void 0||g.removeEventListener(cast.framework.events.EventType.ALL,this.onEventHandler),this.onEventHandler=void 0)}},{key:"setupEventListeners",value:function(){var g,d,r,t=this;(g=this.playerManager)===null||g===void 0||g.addEventListener(cast.framework.events.EventType.ALL,this.onEventHandler=function(u){var m,S,A;if(t.rbmAnalytics&&t.playerManager){var _=cast.framework.events.EventType,v=t.playerManager.getCurrentTimeSec(),f=t.playerManager.getStats();switch(u.type){case _.PLAYING:t.sessionStarted?(t.rbmAnalytics.resume(v),t.initHeartbeat()):(t.sessionStarted=!0,t.rbmAnalytics.playerReady({startTime:v,playerTech:"CAF Receiver",techVersion:cast.framework.VERSION}),t.rbmAnalytics.playing({duration:t.playerManager.getDurationSec(),mediaLocator:(S=(m=t.playerManager.getMediaInformation())===null||m===void 0?void 0:m.contentUrl)!==null&&S!==void 0?S:"",bitrate:f.streamBandwidth?f.streamBandwidth/1e3:0}),t.initHeartbeat());break;case _.PAUSE:t.rbmAnalytics.paused(v);break;case _.SEEKED:t.rbmAnalytics.seeked(v);break;case _.BUFFERING:u.isBuffering?t.rbmAnalytics.buffering(v):t.rbmAnalytics.buffered(v);break;case _.BITRATE_CHANGED:var b=u.totalBitrate;t.rbmAnalytics.bitrateChanged(v,b?b/1e3:0);break;case _.ENDED:t.rbmAnalytics.mediaEnded(v),t.disconnect();break;case _.REQUEST_STOP:t.rbmAnalytics.dispose(v),t.disconnect();break;case _.ERROR:var p=u,k=p.error;t.rbmAnalytics.error({currentTime:v,code:(A=k==null?void 0:k.shakaErrorCode)!==null&&A!==void 0?A:p.detailedErrorCode,message:k!=null&&k.shakaErrorData?k.shakaErrorData.join(","):p.reason,deviceStats:(0,E.getDeviceStats)()}),t.disconnect()}}}),(d=this.adMonitor)===null||d===void 0||d.on(I.AdMonitorEvent.AD_START,function(u){var m,S=u.id;t.rbmAnalytics.adStarted((m=t.playerManager)===null||m===void 0?void 0:m.getCurrentTimeSec(),S)}),(r=this.adMonitor)===null||r===void 0||r.on(I.AdMonitorEvent.AD_END,function(u){var m,S=u.id;t.rbmAnalytics.adCompleted((m=t.playerManager)===null||m===void 0?void 0:m.getCurrentTimeSec(),S)})}},{key:"initHeartbeat",value:function(){var g=this;this.beat||(this.beat=setInterval(function(){var d;g.rbmAnalytics.heartbeat((d=g.playerManager)===null||d===void 0?void 0:d.getCurrentTimeSec())},this.beatInterval))}},{key:"disableHeartbeat",value:function(){this.beat&&(clearInterval(this.beat),this.beat=void 0)}},{key:"destroy",value:function(){var g;(g=this.rbmAnalytics)===null||g===void 0||g.dispose(),this.disconnect(),x(N(i.prototype),"destroy",this).call(this)}}])&&M(c.prototype,h),i}(K(9551).BaseConnector);B.CastConnector=T},7649:(Ee,B,K)=>{function M(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function x(h,y){for(var i=0;i<y.length;i++){var g=y[i];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,g.key,g)}}function N(h,y,i){return N=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(g,d,r){var t=function(m,S){for(;!Object.prototype.hasOwnProperty.call(m,S)&&(m=C(m))!==null;);return m}(g,d);if(t){var u=Object.getOwnPropertyDescriptor(t,d);return u.get?u.get.call(r||g):u.value}},N(h,y,i||h)}function C(h){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},C(h)}function R(h,y){return R=Object.setPrototypeOf||function(i,g){return i.__proto__=g,i},R(h,y)}function I(h){var y=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var i,g=C(h);if(y){var d=C(this).constructor;i=Reflect.construct(g,arguments,d)}else i=g.apply(this,arguments);return function(r,t){return!t||((u=t)&&typeof Symbol<"u"&&u.constructor===Symbol?"symbol":typeof u)!="object"&&typeof t!="function"?M(r):t;var u}(this,i)}}Object.defineProperty(B,"__esModule",{value:!0}),B.PlayerCoreConnector=void 0;var E=K(3217),T=K(9327),l=K(6101),c=function(h){(function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&R(r,t)})(d,h);var y,i,g=I(d);function d(r){var t,u=r.customer,m=r.businessUnit,S=r.analyticsBaseUrl,A=r.sessionToken,_=r.playerName,v=r.playerVersion,f=r.device,b=r.debug;return function(p,k){if(!(p instanceof k))throw new TypeError("Cannot call a class as a function")}(this,d),(t=g.call(this,{customer:u,businessUnit:m,analyticsBaseUrl:S,sessionToken:A,playerName:_,playerVersion:v,device:f,debug:b})).beatInterval=1e4,t.analyticsEnabled=!0,t.onPlayerEvents=t.onPlayerEvents.bind(M(t)),t}return y=d,(i=[{key:"connect",value:function(r){this.playerInstance=r,this.currentTime=0,this.sessionEnded=!1,this.isBrowserSupported=r.isBrowserSupported(),this.playerInstance.onAll(this.onPlayerEvents)}},{key:"disconnect",value:function(){this.disableHeartbeat(),this.sessionEnded=!0}},{key:"onPlayerEvents",value:function(r){var t,u,m,S,A,_=r.event,v=r.data;if(!this.sessionEnded&&this.analyticsEnabled&&this.playerInstance)switch(v&&"currentTime"in v&&(this.currentTime=v.currentTime),_){case T.PlayerEvents.LOADING:var f=this.playerInstance.getPlayerInfo().playerVersion,b=this.playerInstance.getSession(),p=b.analyticsPostInterval?1e3*b.analyticsPostInterval:this.beatInterval;if(b.analyticsBaseUrl&&this.setAnalyticsBaseUrl(b.analyticsBaseUrl),this.analyticsEnabled=!b.analyticsPercentage||b.analyticsPercentage>100*Math.random(),!this.analyticsEnabled)return;p>this.beatInterval&&(this.beatInterval=p),this.rbmAnalytics.init(v.playSessionId),this.rbmAnalytics.created({player:this.playerName,playerVersion:this.playerVersion||f,streamingTechnology:b.playbackFormat,assetId:b.assetId,autoplay:b.autoplay,requestId:b.requestId,cdnProvider:b.cdnProvider,analyticsPostInterval:b.analyticsPostInterval,analyticsBucket:b.analyticsBucket,analyticsTag:b.analyticsTag,analyticsPercentage:b.analyticsPercentage,analyticsBaseUrl:b.analyticsBaseUrl||"",deviceStats:(0,l.getDeviceStats)()}),this.rbmAnalytics.assetLoaded({assetId:b.assetId});break;case T.PlayerEvents.LOADED:var k=this.playerInstance.getPlayerInfo().playerEngine,P=this.playerInstance.getSession();this.rbmAnalytics.playerReady({startTime:v.startTime,playerTech:k.name||"",techVersion:k.version,testSegment:P.testSegment});break;case T.PlayerEvents.DRM_UPDATE:this.rbmAnalytics.drmSessionUpdate(v.type);break;case T.PlayerEvents.START:this.rbmAnalytics.playing({bitrate:v.bitrate,duration:v.duration,mediaLocator:v.source}),this.initHeartbeat();break;case T.PlayerEvents.PAUSE:this.rbmAnalytics.paused(this.currentTime);break;case T.PlayerEvents.SEEKED:this.rbmAnalytics.seeked(this.currentTime);break;case T.PlayerEvents.RESUME:this.rbmAnalytics.resume(this.currentTime),this.initHeartbeat();break;case T.PlayerEvents.BUFFERING:this.rbmAnalytics.buffering(this.currentTime);break;case T.PlayerEvents.BUFFERED:this.rbmAnalytics.buffered(this.currentTime);break;case T.PlayerEvents.BITRATE_CHANGED:this.rbmAnalytics.bitrateChanged(this.currentTime,v.bitrate);break;case T.PlayerEvents.ENDED:this.rbmAnalytics.mediaEnded(this.currentTime),this.disconnect();break;case T.PlayerEvents.STOP:this.rbmAnalytics.dispose(this.currentTime),this.disconnect();break;case T.PlayerEvents.ERROR:var j,U=(v==null?void 0:v.metadata)||{},G=U.code,ee=G===void 0?500:G,ne=U.rawError,re=v==null?void 0:v.toString();if(ne)try{j=JSON.stringify(ne,null,2)}catch{}this.rbmAnalytics.error({currentTime:this.currentTime,message:re,code:ee,details:j,supportedDevice:this.isBrowserSupported,deviceStats:(0,l.getDeviceStats)()}),this.disconnect();break;case T.PlayerEvents.CAST_START:this.disableHeartbeat(),this.rbmAnalytics.startCasting();break;case T.PlayerEvents.CAST_STOP:this.initHeartbeat(),this.rbmAnalytics.stopCasting();break;case T.PlayerEvents.AIRPLAY_START:this.rbmAnalytics.startAirPlay();break;case T.PlayerEvents.AIRPLAY_STOP:this.rbmAnalytics.stopAirPlay();break;case T.PlayerEvents.AD_START:this.rbmAnalytics.adStarted(this.currentTime,v.id);break;case T.PlayerEvents.AD_COMPLETE:this.rbmAnalytics.adCompleted(this.currentTime,v.id);break;case T.PlayerEvents.DROPPED_FRAMES:this.rbmAnalytics.droppedFrames(v.droppedFrames);break;case T.PlayerEvents.PROGRAM_CHANGED:var oe=(S=v.program,((A=E.Program)!=null&&typeof Symbol<"u"&&A[Symbol.hasInstance]?!!A[Symbol.hasInstance](S):S instanceof A)&&v.program.programId||((u=(t=v.program)===null||t===void 0?void 0:t.asset)===null||u===void 0?void 0:u.assetId));this.rbmAnalytics.programChanged((m=this.currentTime)!==null&&m!==void 0?m:0,oe)}}},{key:"initHeartbeat",value:function(){var r=this;this.beat||(this.beat=setInterval(function(){r.rbmAnalytics.heartbeat(r.currentTime)},this.beatInterval))}},{key:"disableHeartbeat",value:function(){this.beat&&(clearInterval(this.beat),this.beat=void 0)}},{key:"destroy",value:function(){var r;(r=this.playerInstance)===null||r===void 0||r.offAll(this.onPlayerEvents),this.disableHeartbeat(),N(C(d.prototype),"destroy",this).call(this)}}])&&x(y.prototype,i),d}(K(9551).BaseConnector);B.PlayerCoreConnector=c},9257:(Ee,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.REDBEE_ANALYTICS_EVENT=void 0,B.REDBEE_ANALYTICS_EVENT={CREATED:"Playback.Created",PLAYER_READY:"Playback.PlayerReady",PLAYING:"Playback.Started",PAUSED:"Playback.Paused",SEEKED:"Playback.ScrubbedTo",START_CASTING:"Playback.StartCasting",STOP_CASTING:"Playback.StopCasting",START_AIRPLAY:"Playback.StartAirplay",STOP_AIRPLAY:"Playback.StopAirplay",HANDSHAKE:"Playback.HandshakeStarted",RESUME:"Playback.Resumed",BITRATE_CHANGED:"Playback.BitrateChanged",DRM_SESSION_UPDATED:"Playback.DRM",ENDED:"Playback.Completed",ERROR:"Playback.Error",ABORTED:"Playback.Aborted",BUFFERING:"Playback.BufferingStarted",BUFFERED:"Playback.BufferingEnded",HEARTBEAT:"Playback.Heartbeat",AD_STARTED:"Playback.AdStarted",AD_ENDED:"Playback.AdCompleted",DROPPED_FRAMES:"Playback.DroppedFrames",PROGRAM_CHANGED:"Playback.ProgramChanged"}},1751:(Ee,B,K)=>{B.q7=void 0,K(6257),K(9542);var M=K(7649);Object.defineProperty(B,"q7",{enumerable:!0,get:function(){return M.PlayerCoreConnector}})},6101:(Ee,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.getDeviceStats=void 0,B.getDeviceStats=function(){var K,M=(K=window.performance)===null||K===void 0?void 0:K.memory,x=window.navigator,N=x==null?void 0:x.connection;return{cpuCores:x==null?void 0:x.hardwareConcurrency,deviceMemory:x==null?void 0:x.deviceMemory,heapSizeLimit:M==null?void 0:M.jsHeapSizeLimit,totalHeapSize:M==null?void 0:M.totalJSHeapSize,usedHeapSize:M==null?void 0:M.usedJSHeapSize,networkDownlink:N==null?void 0:N.downlink,networkType:N==null?void 0:N.effectiveType}}},8536:function(Ee,B,K){function M(Te,Ue){(Ue==null||Ue>Te.length)&&(Ue=Te.length);for(var ze=0,le=new Array(Ue);ze<Ue;ze++)le[ze]=Te[ze];return le}function x(Te){if(Te===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Te}function N(Te,Ue){for(var ze=0;ze<Ue.length;ze++){var le=Ue[ze];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(Te,le.key,le)}}function C(Te,Ue,ze){return C=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(le,Se,be){var Y=function(J,fe){for(;!Object.prototype.hasOwnProperty.call(J,fe)&&(J=R(J))!==null;);return J}(le,Se);if(Y){var Q=Object.getOwnPropertyDescriptor(Y,Se);return Q.get?Q.get.call(be||le):Q.value}},C(Te,Ue,ze||Te)}function R(Te){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(Ue){return Ue.__proto__||Object.getPrototypeOf(Ue)},R(Te)}function I(Te,Ue){return I=Object.setPrototypeOf||function(ze,le){return ze.__proto__=le,ze},I(Te,Ue)}function E(Te,Ue){return function(ze){if(Array.isArray(ze))return ze}(Te)||function(ze,le){var Se=ze==null?null:typeof Symbol<"u"&&ze[Symbol.iterator]||ze["@@iterator"];if(Se!=null){var be,Y,Q=[],J=!0,fe=!1;try{for(Se=Se.call(ze);!(J=(be=Se.next()).done)&&(Q.push(be.value),!le||Q.length!==le);J=!0);}catch(Ce){fe=!0,Y=Ce}finally{try{J||Se.return==null||Se.return()}finally{if(fe)throw Y}}return Q}}(Te,Ue)||function(ze,le){if(ze){if(typeof ze=="string")return M(ze,le);var Se=Object.prototype.toString.call(ze).slice(8,-1);return Se==="Object"&&ze.constructor&&(Se=ze.constructor.name),Se==="Map"||Se==="Set"?Array.from(Se):Se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Se)?M(ze,le):void 0}}(Te,Ue)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(Te){var Ue=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ze,le=R(Te);if(Ue){var Se=R(this).constructor;ze=Reflect.construct(le,arguments,Se)}else ze=le.apply(this,arguments);return function(be,Y){return!Y||((Q=Y)&&typeof Symbol<"u"&&Q.constructor===Symbol?"symbol":typeof Q)!="object"&&typeof Y!="function"?x(be):Y;var Q}(this,ze)}}function l(Te,Ue){var ze,le,Se,be,Y={label:0,sent:function(){if(1&Se[0])throw Se[1];return Se[1]},trys:[],ops:[]};return be={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol=="function"&&(be[Symbol.iterator]=function(){return this}),be;function Q(J){return function(fe){return function(Ce){if(ze)throw new TypeError("Generator is already executing.");for(;Y;)try{if(ze=1,le&&(Se=2&Ce[0]?le.return:Ce[0]?le.throw||((Se=le.return)&&Se.call(le),0):le.next)&&!(Se=Se.call(le,Ce[1])).done)return Se;switch(le=0,Se&&(Ce=[2&Ce[0],Se.value]),Ce[0]){case 0:case 1:Se=Ce;break;case 4:return Y.label++,{value:Ce[1],done:!1};case 5:Y.label++,le=Ce[1],Ce=[0];continue;case 7:Ce=Y.ops.pop(),Y.trys.pop();continue;default:if(!((Se=(Se=Y.trys).length>0&&Se[Se.length-1])||Ce[0]!==6&&Ce[0]!==2)){Y=0;continue}if(Ce[0]===3&&(!Se||Ce[1]>Se[0]&&Ce[1]<Se[3])){Y.label=Ce[1];break}if(Ce[0]===6&&Y.label<Se[1]){Y.label=Se[1],Se=Ce;break}if(Se&&Y.label<Se[2]){Y.label=Se[2],Y.ops.push(Ce);break}Se[2]&&Y.ops.pop(),Y.trys.pop();continue}Ce=Ue.call(Te,Y)}catch(V){Ce=[6,V],le=0}finally{ze=Se=0}if(5&Ce[0])throw Ce[1];return{value:Ce[0]?Ce[1]:void 0,done:!0}}([J,fe])}}}var c=this&&this.__awaiter||function(Te,Ue,ze,le){return new(ze||(ze=Promise))(function(Se,be){var Y=function(fe){try{J(le.next(fe))}catch(Ce){be(Ce)}},Q=function(fe){try{J(le.throw(fe))}catch(Ce){be(Ce)}},J=function(fe){var Ce,V,H;fe.done?Se(fe.value):(Ce=fe.value,V=Ce,((H=ze)!=null&&typeof Symbol<"u"&&H[Symbol.hasInstance]?H[Symbol.hasInstance](V):V instanceof H)?Ce:new ze(function(z){z(Ce)})).then(Y,Q)};J((le=le.apply(Te,Ue||[])).next())})},h=this&&this.__importDefault||function(Te){return Te&&Te.__esModule?Te:{default:Te}};Object.defineProperty(B,"__esModule",{value:!0}),B.PlayerCore=void 0;var y=K(3217),i=K(1674),g=h(K(8357)),d=K(844),r=K(9327),t=K(7875),u=K(901),m=K(4676),S=K(9886),A=K(4456),_=K(1353),v=K(2558),f=K(1568),b=K(4064),p=K(9892),k=K(129),P=K(5614),j=K(9736),U=K(8640),G=K(6020),ee=K(9584),ne=K(574),re=K(1049),oe=K(7312),W=function(Te){(function(Y,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(Q&&Q.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),Q&&I(Y,Q)})(be,Te);var Ue,ze,le,Se=T(be);function be(Y){var Q,J;(function(de,ge){if(!(de instanceof ge))throw new TypeError("Cannot call a class as a function")})(this,be),(Q=Se.call(this)).spriteCueCache={},Q.destroyed=!1,Q.state=Object.assign(Object.assign({},A.DefaultState),{isCasting:!1,isCastAvailable:!1,isAirPlaying:!1,isAirPlayAvailable:!1}),Q.subtitleSizeSet=!1,(0,ne.setLogLevel)((J=Y.logLevel)!==null&&J!==void 0?J:r.LogLevel.NONE),Q.instanceSettings={playerSDKVersion:"1.0.1",initOptions:Object.assign(Object.assign({},j.PLAYER_OPTIONS),Y),isAsset:!1},Q.deviceAdapter=Y.deviceAdapter;var fe=Q.instanceSettings.initOptions,Ce=fe.wrapperElement,V=fe.fullscreenElement,H=document.createElement("div");H.className="redbee-player-container",H.tabIndex=0;var z=document.createElement("div");if(z.className="redbee-player-media-container",H.appendChild(z),Q.videoElement=(0,U.setupVideoElement)(),z.appendChild(Q.videoElement),Q.subtitleContainer=document.createElement("div"),Q.subtitleContainer.className="redbee-player-subtitle-container",z.appendChild(Q.subtitleContainer),Q.mediaContainer=z,Q.container=H,Ce){Ce.appendChild(Q.container);var X=V&&document.querySelector(V)||Ce;X&&(Q.fullscreenManager=new G.FullscreenManager(X,Q.videoElement))}return Q.pipManager=new oe.PictureInPictureManager(Q.videoElement),Q.updateSubtitleSize(),window.addEventListener("resize",Q.throttledUpdateSubtitleSize=(0,g.default)(Q.updateSubtitleSize.bind(x(Q)),500)),Y.disableCast||Q.setupCast(),Y.disableAirPlay||Q.setupAirPlay(),Q}return Ue=be,ze=[{key:"setState",value:function(Y){var Q=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.destroyed||(this.state=Object.assign(Object.assign({},this.state),Y),Q&&this.emit(r.PlayerEvents.STATE_CHANGED,this.state),this.subtitleSizeSet||this.updateSubtitleSize())}},{key:"checkInstance",value:function(){if(this.destroyed)throw new r.InitError("Cannot load on a destroyed instance of the player. Please create a new instance",{type:r.ErrorTypes.DESTROYED})}},{key:"updateSubtitleSize",value:function(){var Y=this.subtitleContainer.clientWidth;if(Y){this.subtitleSizeSet=!0;var Q=Math.min(2,Math.max(.2,Y/1e3));this.subtitleContainer.style.fontSize="".concat(Q,"em")}}},{key:"setupCast",value:function(){var Y=this;this.castSender=new u.CastSender(this.instanceSettings),this.castSender.on(u.CastSenderEvent.CONNECTED,function(Q){var J,fe,Ce,V,H,z,X=Q.isResumed,de=Y.instanceSettings,ge=de.loadOptions,Ge=de.isAsset,it=ge==null?void 0:ge.source;if(Y.castSender&&it){Y.setState({isCasting:!0});var Ye=Y.castSender.getContentId();if(!X||Ye!==it){Y.emit(r.PlayerEvents.CAST_START,{currentTime:(J=Y.player)===null||J===void 0?void 0:J.getCurrentTime()}),(fe=Y.player)===null||fe===void 0||fe.pause();var Ke=Y.state.currentTime;Y.state.seekable.start&&(Ke-=Y.state.seekable.start),Y.castSender.load(it,Ge,Y.state.playbackState===r.PlaybackState.IDLE,(V=(Ce=Y.player)===null||Ce===void 0?void 0:Ce.getAudioTrack())===null||V===void 0?void 0:V.language,(z=(H=Y.player)===null||H===void 0?void 0:H.getSubtitleTrack())===null||z===void 0?void 0:z.language,Ke).catch(function(){var dt;(dt=Y.castSender)===null||dt===void 0||dt.stop()})}}}),this.castSender.on(u.CastSenderEvent.DISCONNECTED,function(){var Q,J;if(Y.emit(r.PlayerEvents.CAST_STOP,{currentTime:(Q=Y.castSender)===null||Q===void 0?void 0:Q.getCurrentTime()}),Y.player){var fe,Ce,V=(J=Y.castSender)===null||J===void 0?void 0:J.getCurrentTime(),H=Y.player.getSeekable();Y.state.subtitleTrack&&(fe=Y.player.getSubtitleTracks().find(function(z){var X;return z.language===((X=Y.state.subtitleTrack)===null||X===void 0?void 0:X.language)})),Y.state.audioTrack&&(Ce=Y.player.getAudioTracks().find(function(z){var X;return z.language===((X=Y.state.audioTrack)===null||X===void 0?void 0:X.language)})),Y.setState(Object.assign({isCasting:!1},Y.player.getState())),V&&Y.player.seekTo(H.start+V),fe&&Y.player.setSubtitleTrack(fe),Ce&&Y.player.setAudioTrack(Ce)}else Y.setState({isCasting:!1})}),this.castSender.on(u.CastSenderEvent.AVAILABILITY_CHANGED,function(Q){var J=Q.available;Y.setState({isCastAvailable:J})}),this.castSender.on(u.CastSenderEvent.STATE_CHANGE,function(Q){Y.state.isCasting&&Y.setState(Q)})}},{key:"setupAirPlay",value:function(){var Y=this;this.airPlay=new t.AirPlay(this.videoElement),this.airPlay.on(t.AirPlayEvent.AVAILABILITY_CHANGED,function(Q){var J=Q.available;Y.setState({isAirPlayAvailable:J})}),this.airPlay.on(t.AirPlayEvent.CONNECTED,function(){Y.setState({isAirPlaying:!0}),Y.emit(r.PlayerEvents.AIRPLAY_START,void 0)}),this.airPlay.on(t.AirPlayEvent.DISCONNETED,function(){Y.setState({isAirPlaying:!0}),Y.emit(r.PlayerEvents.AIRPLAY_STOP,void 0)})}},{key:"Player",get:function(){var Y,Q=this.instanceSettings,J=Q.isAsset,fe=Q.mediaInfo,Ce=Q.playResponse,V=fe!=null&&fe.ssai?(Y=Ce==null?void 0:Ce.ads)===null||Y===void 0?void 0:Y.stitcher:void 0;return fe!=null&&fe.lowLatency?b.LowLatencyPlayer:V===y.Stitcher.INTERNAL||V===y.Stitcher.NOWTILUS?_.AdInsertionPlayer:J?v.AssetPlayer:f.BasePlayer}},{key:"loadPlayer",value:function(Y){var Q=this;this.player&&(this.player.load(Y),this.player.once(r.PlayerEvents.LOADED,function(){var J,fe;Q.autoplay&&!(!((J=Q.state)===null||J===void 0)&&J.isCasting)&&((fe=Q.play())===null||fe===void 0||fe.catch(function(){(0,ne.info)("Autoplay detection invalid, failed to autoplay")}))}))}},{key:"updateMetadata",value:function(Y,Q){var J;return c(this,void 0,void 0,function(){var fe,Ce,V,H,z,X,de,ge,Ge,it,Ye,Ke,dt,me,ke,Je,Xe,nt,Tt,bt,Ft,pn,wn,hn,Xn,on,Zn;return l(this,function(Bn){switch(Bn.label){case 0:return V={isLive:!1,lowLatency:!1},H=this.instanceSettings.initOptions,z=H.autoplay,X=H.adobePrimetimeToken,de=H.businessUnit,ge=H.customer,Ge=H.exposureBaseUrl,it=H.maxResolution,Ye=H.sessionToken,Y&&Ye&&ge&&de&&Ge&&!Y.source.includes("://")?(dt=(Ke=Y||{}).audioOnly,me=Ke.source,ke=Ke.materialProfile,Je=Y.manifest||{},Xe=Je.start,nt=Je.end,Tt=me.startsWith("external:"),bt=Tt?me.slice(9):me,this.exposureService=new p.ExposureService({customer:ge,businessUnit:de,exposureBaseUrl:Ge}),wn=(pn=this.exposureService).playRequest,hn={assetId:bt,sessionToken:Ye},Xn=k.enrichAdsOptions,on=[(Y==null?void 0:Y.ads)||{},this.videoElement],[4,this.getDevice()]):[3,8];case 1:return[4,Xn.apply(void 0,on.concat([Bn.sent(),z]))];case 2:return Ft=wn.apply(pn,[(hn.adsOptions=Bn.sent(),hn.audioOnly=dt,hn.adobePrimetimeToken=X,hn.maxResolution=it,hn.supportedKeySystem=this.instanceSettings.supportedKeySystem,hn.supportedFormatTypes=(0,ee.getSupportedFormats)(),hn.materialProfile=ke,hn.start=Xe,hn.end=nt,hn)]),Tt?[4,Ft]:[3,5];case 3:if(!(fe=Bn.sent()).assetId)throw new r.InitError("Could not fetch information for the given source asset id",{type:r.ErrorTypes.OPTIONS});return Y.source=fe.assetId,[4,this.exposureService.assetMetadata(fe.assetId)];case 4:return Ce=Bn.sent(),[3,7];case 5:return[4,Promise.all([Ft,this.exposureService.assetMetadata(bt)])];case 6:Zn=E.apply(void 0,[Bn.sent(),2]),fe=Zn[0],Ce=Zn[1],Bn.label=7;case 7:Q=fe.formats,V={isLive:(J=fe==null?void 0:fe.streamInfo)===null||J===void 0?void 0:J.live,lowLatency:(Ce==null?void 0:Ce.materialType)==="LOW_LATENCY_CHANNEL",ssai:fe==null?void 0:fe.streamInfo.ssai},this.setContractRestrictions(fe==null?void 0:fe.contractRestrictions),Bn.label=8;case 8:return Object.assign(this.instanceSettings,{playResponse:fe,assetMetadata:Ce,formats:Q,isAsset:!!Q,loadOptions:Y,mediaInfo:V}),[2]}})})}},{key:"setContractRestrictions",value:function(Y){var Q,J;Y&&(Y.airplayEnabled===!1?(Q=this.airPlay)===null||Q===void 0||Q.disable():(J=this.airPlay)===null||J===void 0||J.enable(),this.setState({contractRestrictions:Y}))}},{key:"setupProgramService",value:function(){var Y,Q,J,fe=this,Ce=this.instanceSettings,V=Ce.assetMetadata,H=Ce.initOptions,z=Ce.playResponse,X=H.businessUnit,de=H.customer,ge=H.exposureBaseUrl,Ge=H.sessionToken;de&&X&&ge&&Ge&&V&&(!((Y=z==null?void 0:z.epg)===null||Y===void 0)&&Y.enabled)&&((V==null?void 0:V.type)===y.AssetType.TV_CHANNEL||!((Q=z==null?void 0:z.streamInfo)===null||Q===void 0)&&Q.channelId)&&(this.programService=new d.ProgramService({asset:V,play:z,baseUrl:ge,customer:de,businessUnit:X,sessionToken:Ge}),(J=this.player)===null||J===void 0||J.on(r.PlayerEvents.TIME_UPDATE,function(it){var Ye,Ke=it.utcCurrentTime;return(Ye=fe.programService)===null||Ye===void 0?void 0:Ye.ping(Ke)}),this.on(r.PlayerEvents.CAST_START,function(){return fe.emit(r.PlayerEvents.PROGRAM_CHANGED,{channel:V,program:void 0,upnext:void 0})}),this.programService.on(d.ProgramServiceEvent.NOT_ENTITLED,function(it){var Ye;fe.emit(r.PlayerEvents.NOT_ENTITLED,it),(Ye=fe.player)===null||Ye===void 0||Ye.stop()}),this.programService.on(d.ProgramServiceEvent.BLACKOUT,function(it){fe.emit(r.PlayerEvents.BLACKOUT,it)}),this.programService.on(d.ProgramServiceEvent.EMPTY_SLOT,function(){fe.emit(r.PlayerEvents.EMPTY_SLOT,void 0)}),this.programService.on(d.ProgramServiceEvent.PROGRAM_CHANGED,function(it){var Ye=it.currentProgram,Ke=it.upcomingProgram;fe.instanceSettings.programData={current:Ye,next:Ke},fe.emit(r.PlayerEvents.PROGRAM_CHANGED,{channel:V,program:Ye,upnext:Ke})}))}},{key:"setupPlayerEventListeners",value:function(){var Y,Q=this;(Y=this.player)===null||Y===void 0||Y.onAll(function(J){var fe,Ce=J.event,V=J.data;Q.state.isCasting?(fe=Q.player)===null||fe===void 0||fe.pause():Ce===A.INTERNAL_STATE_CHANGED?Q.setState(V):Q.emit(Ce,V)})}},{key:"getPlayerInfo",value:function(){var Y,Q,J=(Y=this.player)===null||Y===void 0?void 0:Y.getPlayerEngineName(),fe=(Q=this.player)===null||Q===void 0?void 0:Q.getPlayerEngineVersion();return{playerVersion:this.instanceSettings.playerSDKVersion,playerEngine:{name:J,version:fe}}}},{key:"getDevice",value:function(){return c(this,void 0,void 0,function(){return l(this,function(Y){switch(Y.label){case 0:return[4,(0,m.getDevice)(this.deviceAdapter)];case 1:return[2,Y.sent()]}})})}},{key:"getStreamInfo",value:function(){if(this.player)return this.player.getStreamInfo()}},{key:"getSession",value:function(){var Y,Q,J,fe,Ce,V,H,z,X,de,ge=this.instanceSettings,Ge=ge.initOptions,it=ge.loadOptions,Ye=ge.playResponse,Ke=Ge.sessionToken,dt=Ye||{},me=dt.playSessionId,ke=dt.requestId,Je=dt.assetId;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Je&&{assetId:Je}),{initOptions:Ge,loadOptions:it,sessionToken:Ke}),Ye&&{playSessionId:me}),Ye&&{requestId:ke}),{playbackFormat:(Y=this.player)===null||Y===void 0?void 0:Y.getPlaybackFormat(),playerEngine:this.player&&{name:this.player.getPlayerEngineName(),version:this.player.getPlayerEngineVersion()},testSegment:(Q=this.player)===null||Q===void 0?void 0:Q.getTestSegment(),autoplay:this.autoplay,locale:Ge.locale||"en"}),((J=Ye==null?void 0:Ye.cdn)===null||J===void 0?void 0:J.provider)&&{cdnProvider:(fe=Ye.cdn)===null||fe===void 0?void 0:fe.provider}),(Ye==null?void 0:Ye.analytics)&&{analyticsPostInterval:(Ce=Ye.analytics)===null||Ce===void 0?void 0:Ce.postInterval,analyticsBucket:(V=Ye.analytics)===null||V===void 0?void 0:V.bucket,analyticsTag:(H=Ye.analytics)===null||H===void 0?void 0:H.tag,analyticsBaseUrl:(z=Ye.analytics)===null||z===void 0?void 0:z.baseUrl,analyticsPercentage:(de=(X=Ye.analytics)===null||X===void 0?void 0:X.percentage)!==null&&de!==void 0?de:100})}},{key:"getAssetInfo",value:function(){var Y;return(Y=this.instanceSettings)===null||Y===void 0?void 0:Y.assetMetadata}},{key:"getProgramInfo",value:function(){var Y;return(Y=this.instanceSettings)===null||Y===void 0?void 0:Y.programData}},{key:"getContractRestrictions",value:function(){var Y;return(Y=this.instanceSettings.playResponse)===null||Y===void 0?void 0:Y.contractRestrictions}},{key:"getContainerElement",value:function(){return this.container}},{key:"getVideoElement",value:function(){return this.videoElement}},{key:"getSubtitleContainerElement",value:function(){return this.subtitleContainer}},{key:"getTimelineSpriteCues",value:function(Y){var Q;Y=Y||this.videoElement.offsetWidth/4;var J=(Q=this.instanceSettings.playResponse)===null||Q===void 0?void 0:Q.sprites;if(J!=null&&J.length){var fe,Ce=0,V=!0,H=!1,z=void 0;try{for(var X,de=J[Symbol.iterator]();!(V=(X=de.next()).done);V=!0){var ge=X.value;if(fe=ge.vtt,ge.offsetInMs&&(Ce=ge.offsetInMs/1e3),ge.vtt&&Y<=ge.width)break}}catch(Ge){H=!0,z=Ge}finally{try{V||de.return==null||de.return()}finally{if(H)throw z}}if(fe)return this.spriteCueCache[fe]||(this.spriteCueCache[fe]=(0,i.getTimelineSpriteCues)(fe,Ce))}return Promise.resolve([])}},{key:"getState",value:function(){return this.state}},{key:"getCurrentTime",value:function(){var Y,Q;return this.state.isCasting?(Y=this.castSender)===null||Y===void 0?void 0:Y.getCurrentTime():(Q=this.player)===null||Q===void 0?void 0:Q.getCurrentTime()}},{key:"getVolume",value:function(){var Y,Q;return this.state.isCasting?(Y=this.castSender)===null||Y===void 0?void 0:Y.getVolume():(Q=this.player)===null||Q===void 0?void 0:Q.getVolume()}},{key:"_load",value:function(Y,Q){var J,fe;return c(this,void 0,void 0,function(){var Ce,V,H,z,X,de;return l(this,function(ge){switch(ge.label){case 0:return Ce=this.instanceSettings.initOptions,V=Ce.autoplay,H=Ce.muted,this.emit(r.PlayerEvents.LOAD_START,void 0),this.setState({playbackState:r.PlaybackState.LOADING}),this.autoplay!==void 0?[3,4]:(z=this,V?[4,(0,ee.isAutoplaySupported)(H)]:[3,2]);case 1:return X=ge.sent(),[3,3];case 2:X=!1,ge.label=3;case 3:z.autoplay=X,ge.label=4;case 4:return Y!=null&&Y.poster?this.videoElement.setAttribute("poster",Y.poster):this.videoElement.removeAttribute("poster"),this.checkInstance(),de=this.instanceSettings,[4,(0,ee.getSupportedDrm)(this.instanceSettings.initOptions.keysystem)];case 5:return de.supportedKeySystem=ge.sent(),this.checkInstance(),this.emit(r.PlayerEvents.PLAYER_SETUP_COMPLETED,void 0),[4,this.updateMetadata(Y,Q)];case 6:return ge.sent(),this.checkInstance(),this.emit(r.PlayerEvents.ENTITLEMENT_GRANTED,void 0),this.player=new this.Player(this.videoElement,this.subtitleContainer,this.instanceSettings,Y==null?void 0:Y.source),this.setupPlayerEventListeners(),this.setupProgramService(),this.emit(r.PlayerEvents.LOADING,Object.assign({},((J=this.instanceSettings.playResponse)===null||J===void 0?void 0:J.playSessionId)&&{playSessionId:this.instanceSettings.playResponse.playSessionId})),this.instanceSettings.assetMetadata&&new re.MediaSessionManager(this.player,this.instanceSettings),this.loadPlayer((fe=Y==null?void 0:Y.startTime)!==null&&fe!==void 0?fe:(0,P.getStartTime)(this.instanceSettings.playResponse)),[2]}})})}},{key:"load",value:function(Y){var Q=this;this._load(Y).catch(function(J){Q.setState({playbackState:r.PlaybackState.ERROR}),Q.emit(r.PlayerEvents.ERROR,J)})}},{key:"loadFromFormats",value:function(Y){var Q=this;this._load(void 0,Y).catch(function(J){Q.setState({playbackState:r.PlaybackState.ERROR}),Q.emit(r.PlayerEvents.ERROR,J)})}},{key:"play",value:function(){var Y,Q;return this.state.isCasting?(Y=this.castSender)===null||Y===void 0?void 0:Y.play():(Q=this.player)===null||Q===void 0?void 0:Q.play()}},{key:"getSeekable",value:function(){var Y,Q;return this.state.isCasting?(Y=this.castSender)===null||Y===void 0?void 0:Y.getSeekable():(Q=this.player)===null||Q===void 0?void 0:Q.getSeekable()}},{key:"pause",value:function(){var Y,Q;this.state.isCasting?(Y=this.castSender)===null||Y===void 0||Y.pause():(Q=this.player)===null||Q===void 0||Q.pause()}},{key:"setMuted",value:function(Y){var Q,J;this.state.isCasting?(Q=this.castSender)===null||Q===void 0||Q.setMuted(Y):(J=this.player)===null||J===void 0||J.setMuted(Y)}},{key:"toggleMuted",value:function(){var Y,Q;this.state.isCasting?(Y=this.castSender)===null||Y===void 0||Y.toggleMuted():(Q=this.player)===null||Q===void 0||Q.toggleMuted()}},{key:"clickThrough",value:function(){var Y;(Y=this.player)===null||Y===void 0||Y.clickThrough()}},{key:"isFullscreen",value:function(){if(this.fullscreenManager)return this.fullscreenManager.isFullscreen()}},{key:"toggleFullscreen",value:function(){this.fullscreenManager&&this.fullscreenManager.toggleFullscreen()}},{key:"isPictureInPicture",value:function(){var Y;return(Y=this.pipManager)===null||Y===void 0?void 0:Y.isPictureInPicture()}},{key:"togglePictureInPicture",value:function(){var Y;return(Y=this.pipManager)===null||Y===void 0?void 0:Y.togglePictureInPicture()}},{key:"isAirplaySupported",value:function(){var Y,Q;return(Q=(Y=this.airPlay)===null||Y===void 0?void 0:Y.isSupported())!==null&&Q!==void 0&&Q}},{key:"isAirplaying",value:function(){var Y,Q;return(Q=(Y=this.state)===null||Y===void 0?void 0:Y.isAirPlaying)!==null&&Q!==void 0&&Q}},{key:"toggleAirPlay",value:function(){var Y;return(Y=this.airPlay)===null||Y===void 0?void 0:Y.toggleAirPlay()}},{key:"seekTo",value:function(Y){var Q=Y.time,J=Y.change,fe=this.state.isCasting?this.castSender:this.player;typeof Q=="number"?fe==null||fe.seekTo(Q):typeof J=="number"&&(fe==null||fe.scrub(J))}},{key:"seekToUTC",value:function(Y){var Q,J,fe=(Y-this.state.utcSeekable.start)/1e3;this.state.seekable.start&&(fe+=this.state.seekable.start),this.state.isCasting?(Q=this.castSender)===null||Q===void 0||Q.seekTo(fe):(J=this.player)===null||J===void 0||J.seekTo(fe)}},{key:"seekToOffset",value:function(Y){var Q,J;this.state.isCasting?(Q=this.castSender)===null||Q===void 0||Q.scrub(Y):(J=this.player)===null||J===void 0||J.scrub(Y)}},{key:"seekToLive",value:function(){var Y,Q;this.isLive()&&(this.state.isCasting?(Y=this.castSender)===null||Y===void 0||Y.seekToLive():(Q=this.player)===null||Q===void 0||Q.seekToLive())}},{key:"setPlaybackRate",value:function(Y){var Q;this.player&&((Q=this.player)===null||Q===void 0||Q.setPlaybackRate(Y))}},{key:"setQualityLevel",value:function(Y){var Q;this.player&&((Q=this.player)===null||Q===void 0||Q.setQualityLevel(Y))}},{key:"getQualityLevels",value:function(){var Y;return this.player?(Y=this.player)===null||Y===void 0?void 0:Y.getQualityLevels():[]}},{key:"setAudioTrack",value:function(Y){var Q,J;this.state.isCasting?(Q=this.castSender)===null||Q===void 0||Q.setAudioTrack(Y):(J=this.player)===null||J===void 0||J.setAudioTrack(Y)}},{key:"setSubtitleTrack",value:function(Y){var Q,J;this.state.isCasting?(Q=this.castSender)===null||Q===void 0||Q.setSubtitleTrack(Y):(J=this.player)===null||J===void 0||J.setSubtitleTrack(Y)}},{key:"setVolume",value:function(Y){var Q,J,fe=Y.percentage;this.state.isCasting?(Q=this.castSender)===null||Q===void 0||Q.setVolume({percentage:fe}):(J=this.player)===null||J===void 0||J.setVolume({percentage:fe})}},{key:"getAudioTrack",value:function(){var Y,Q;return this.state.isCasting?(Y=this.castSender)===null||Y===void 0?void 0:Y.getAudioTrack():(Q=this.player)===null||Q===void 0?void 0:Q.getAudioTrack()}},{key:"getAudioTracks",value:function(){var Y,Q,J;return(J=this.state.isCasting?(Y=this.castSender)===null||Y===void 0?void 0:Y.getAudioTracks():(Q=this.player)===null||Q===void 0?void 0:Q.getAudioTracks())!==null&&J!==void 0?J:[]}},{key:"getSubtitleTrack",value:function(){var Y,Q;return this.state.isCasting?(Y=this.castSender)===null||Y===void 0?void 0:Y.getSubtitleTrack():(Q=this.player)===null||Q===void 0?void 0:Q.getSubtitleTrack()}},{key:"getSubtitleTracks",value:function(){var Y,Q,J;return(J=this.state.isCasting?(Y=this.castSender)===null||Y===void 0?void 0:Y.getSubtitleTracks():(Q=this.player)===null||Q===void 0?void 0:Q.getSubtitleTracks())!==null&&J!==void 0?J:[]}},{key:"isLive",value:function(){var Y,Q,J=this.state.isCasting?(Y=this.castSender)===null||Y===void 0?void 0:Y.isLive():(Q=this.player)===null||Q===void 0?void 0:Q.isLive();return J===void 0&&this.instanceSettings.mediaInfo&&(J=this.instanceSettings.mediaInfo.isLive),J}},{key:"isPlaying",value:function(){var Y,Q,J;return this.state.isCasting?(Y=this.castSender)===null||Y===void 0?void 0:Y.isPlaying():(J=(Q=this.player)===null||Q===void 0?void 0:Q.isPlaying())!==null&&J!==void 0&&J}},{key:"isBrowserSupported",value:function(){return(0,S.isBrowserSupported)()}},{key:"isPictureInPictureSupported",value:function(){return oe.PictureInPictureManager.isSupported()}},{key:"destroy",value:function(){var Y,Q,J,fe,Ce=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).retainCastSession;this.destroyed=!0,(Y=this.pipManager)===null||Y===void 0||Y.destroy(),(Q=this.player)===null||Q===void 0||Q.destroy(),(J=this.castSender)===null||J===void 0||J.destroy({retainCastSession:Ce}),(fe=this.programService)===null||fe===void 0||fe.destroy(),this.container.remove(),window.removeEventListener("resize",this.throttledUpdateSubtitleSize),C(R(be.prototype),"destroy",this).call(this)}}],le=[{key:"isBrowserSupported",value:function(){return(0,S.isBrowserSupported)()}},{key:"isPictureInPictureSupported",value:function(){return oe.PictureInPictureManager.isSupported()}}],ze&&N(Ue.prototype,ze),le&&N(Ue,le),be}(r.EmitterBaseClass);B.PlayerCore=W},7875:(Ee,B,K)=>{function M(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function x(T,l){for(var c=0;c<l.length;c++){var h=l[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(T,h.key,h)}}function N(T){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},N(T)}function C(T,l){return C=Object.setPrototypeOf||function(c,h){return c.__proto__=h,c},C(T,l)}function R(T){var l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var c,h=N(T);if(l){var y=N(this).constructor;c=Reflect.construct(h,arguments,y)}else c=h.apply(this,arguments);return function(i,g){return!g||((d=g)&&typeof Symbol<"u"&&d.constructor===Symbol?"symbol":typeof d)!="object"&&typeof g!="function"?M(i):g;var d}(this,c)}}Object.defineProperty(B,"__esModule",{value:!0}),B.AirPlay=B.AirPlayEvent=void 0;var I=K(9327);B.AirPlayEvent={AVAILABILITY_CHANGED:"airplay:availability_changed",CONNECTED:"airplay:connected",DISCONNETED:"airplay:disconnected"};var E=function(T){(function(i,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(g&&g.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),g&&C(i,g)})(y,T);var l,c,h=R(y);function y(i){var g;return function(d,r){if(!(d instanceof r))throw new TypeError("Cannot call a class as a function")}(this,y),(g=h.call(this)).isEnabled=!0,g.isAvailable=!1,g.isBrowserSupported=!1,g.video=i,window.WebKitPlaybackTargetAvailabilityEvent?(g.isBrowserSupported=!0,i.addEventListener("webkitplaybacktargetavailabilitychanged",g.onAvailabilityChanged=g.onAvailabilityChanged.bind(M(g))),i.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",g.onTargetChanged=g.onTargetChanged.bind(M(g)))):(g.isBrowserSupported=!1,g.emit(B.AirPlayEvent.AVAILABILITY_CHANGED,{available:!1})),g}return l=y,(c=[{key:"onAvailabilityChanged",value:function(i){var g=i.availability;this.isEnabled&&(this.isAvailable=g==="available",this.emit(B.AirPlayEvent.AVAILABILITY_CHANGED,{available:this.isAvailable}))}},{key:"onTargetChanged",value:function(){var i=this;this.video.webkitCurrentPlaybackTargetIsWireless?(this.emit(B.AirPlayEvent.CONNECTED,void 0),setTimeout(function(){i.video.play()},0)):this.emit(B.AirPlayEvent.DISCONNETED,void 0)}},{key:"isSupported",value:function(){return this.isBrowserSupported}},{key:"enable",value:function(){this.isEnabled=!0,this.video.removeAttribute("x-webkit-airplay"),this.video.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.emit(B.AirPlayEvent.AVAILABILITY_CHANGED,{available:this.isAvailable})}},{key:"disable",value:function(){this.isEnabled=!1,this.video.setAttribute("x-webkit-airplay","deny"),this.video.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.emit(B.AirPlayEvent.AVAILABILITY_CHANGED,{available:!1})}},{key:"toggleAirPlay",value:function(){this.video.webkitShowPlaybackTargetPicker()}},{key:"destroy",value:function(){this.video.removeEventListener("webkitplaybacktargetavailabilitychanged",this.onAvailabilityChanged),this.video.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.onTargetChanged)}}])&&x(l.prototype,c),y}(I.EmitterBaseClass);B.AirPlay=E},901:function(Ee,B,K){function M(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function x(u,m){for(var S=0;S<m.length;S++){var A=m[S];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(u,A.key,A)}}function N(u,m,S){return N=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(A,_,v){var f=function(p,k){for(;!Object.prototype.hasOwnProperty.call(p,k)&&(p=C(p))!==null;);return p}(A,_);if(f){var b=Object.getOwnPropertyDescriptor(f,_);return b.get?b.get.call(v||A):b.value}},N(u,m,S||u)}function C(u){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},C(u)}function R(u,m){return R=Object.setPrototypeOf||function(S,A){return S.__proto__=A,S},R(u,m)}function I(u){var m=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var S,A=C(u);if(m){var _=C(this).constructor;S=Reflect.construct(A,arguments,_)}else S=A.apply(this,arguments);return function(v,f){return!f||((b=f)&&typeof Symbol<"u"&&b.constructor===Symbol?"symbol":typeof b)!="object"&&typeof f!="function"?M(v):f;var b}(this,S)}}var E=this&&this.__awaiter||function(u,m,S,A){return new(S||(S=Promise))(function(_,v){var f=function(k){try{p(A.next(k))}catch(P){v(P)}},b=function(k){try{p(A.throw(k))}catch(P){v(P)}},p=function(k){var P,j,U;k.done?_(k.value):(P=k.value,j=P,((U=S)!=null&&typeof Symbol<"u"&&U[Symbol.hasInstance]?U[Symbol.hasInstance](j):j instanceof U)?P:new S(function(G){G(P)})).then(f,b)};p((A=A.apply(u,m||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.CastSender=B.CastSenderEvent=B.initializeCast=void 0;var T,l,c,h=K(9327),y=K(5735),i=K(4456),g=K(574);function d(u){return{id:u.trackId,language:u.language,label:u.name||(u.language?(0,y.getLabel)(u.language):"-")}}function r(u){return T||(T=new Promise(function(m,S){window.__onGCastApiAvailable=function(_){_?(cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:u||"F40E2D17",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}),m()):S(new Error("[Cast] not available"))};var A=document.createElement("script");A.src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.body.appendChild(A)}))}B.initializeCast=r,B.CastSenderEvent={AVAILABILITY_CHANGED:"cast:availability_changed",CONNECTED:"cast:connected",RECONNECTED:"cast:reconnected",DISCONNECTED:"cast:disconnected",STATE_CHANGE:"cast:state_change",PROGRAM_CHANGED:"cast:program_change"};var t=function(u){(function(v,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(f&&f.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),f&&R(v,f)})(_,u);var m,S,A=I(_);function _(v){var f;(function(p,k){if(!(p instanceof k))throw new TypeError("Cannot call a class as a function")})(this,_),(f=A.call(this)).state=Object.assign({},i.DefaultState);var b=v.initOptions.castAppId;return f.instanceSettings=v,f.onAnyChange=f.onAnyChange.bind(M(f)),f.onSessionStateChanged=f.onSessionStateChanged.bind(M(f)),f.onCastStateChanged=f.onCastStateChanged.bind(M(f)),r(b).then(function(){f.player=l=l||new cast.framework.RemotePlayer,f.playerController=c=c||new cast.framework.RemotePlayerController(f.player);var p=cast.framework.CastContext.getInstance();if(f.onCastStateChanged({type:"",castState:p.getCastState()}),p.getCastState()===cast.framework.CastState.CONNECTED){var k=p.getCurrentSession();k&&(f.updateStateFromRemotePlayer(),f.onConnected(k,!0))}f.setupListeners()},function(p){return(0,g.warn)(p)}),f}return m=_,S=[{key:"setState",value:function(v){var f=this.state;this.state=Object.assign(Object.assign({},f),v),this.emit(B.CastSenderEvent.STATE_CHANGE,this.state)}},{key:"getStateFromPlayerState",value:function(v){switch(v){case chrome.cast.media.PlayerState.BUFFERING:return h.PlaybackState.BUFFERING;case chrome.cast.media.PlayerState.PAUSED:return h.PlaybackState.PAUSED;case chrome.cast.media.PlayerState.PLAYING:return h.PlaybackState.PLAYING;case chrome.cast.media.PlayerState.IDLE:return this.state.playbackState===h.PlaybackState.ENDED||this.state.playbackState!==h.PlaybackState.IDLE?h.PlaybackState.ENDED:h.PlaybackState.IDLE;default:return h.PlaybackState.IDLE}}},{key:"onConnected",value:function(v,f){var b;this.session=v,this.emit(B.CastSenderEvent.CONNECTED,{isResumed:f}),this.setState({isMuted:(b=this.player)===null||b===void 0?void 0:b.isMuted})}},{key:"onDisconnected",value:function(){this.session=void 0,this.emit(B.CastSenderEvent.DISCONNECTED,void 0),this.setState({playbackState:h.PlaybackState.IDLE})}},{key:"getContentId",value:function(){var v,f,b,p=(v=this.session)===null||v===void 0?void 0:v.getMediaSession();return!((f=p==null?void 0:p.media)===null||f===void 0)&&f.contentId?(b=p==null?void 0:p.media)===null||b===void 0?void 0:b.contentId:null}},{key:"setupListeners",value:function(){var v,f=cast.framework.CastContext.getInstance();f.addEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED,this.onSessionStateChanged),f.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.onCastStateChanged),(v=this.playerController)===null||v===void 0||v.addEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE,this.onAnyChange)}},{key:"updateStateFromRemotePlayer",value:function(){var v,f,b;if(this.player){var p=this.player,k=p.playerState,P=p.currentTime,j=p.duration,U=p.volumeLevel,G=p.isMuted,ee=p.liveSeekableRange,ne=this.getStateFromPlayerState(k),re=(v=this.player.mediaInfo)===null||v===void 0?void 0:v.startAbsoluteTime;this.setState({isLive:!!ee,currentTime:P,utcCurrentTime:re?re+1e3*P:0,duration:j,utcDuration:re?re+j:0,seekable:{start:(f=ee==null?void 0:ee.start)!==null&&f!==void 0?f:0,end:(b=ee==null?void 0:ee.end)!==null&&b!==void 0?b:j},playbackState:ne,hasStarted:!this.state.hasStarted&&ne===h.PlaybackState.PLAYING||this.state.hasStarted,volume:U,isMuted:G,adMarkers:this.getAdMarkers(),audioTrack:this.getAudioTrack(),audioTracks:this.getAudioTracks(),subtitleTrack:this.getSubtitleTrack(),subtitleTracks:this.getSubtitleTracks(),isSeekable:this.player.canSeek,isAtLiveEdge:(ee==null?void 0:ee.end)!==void 0&&P>ee.end-30})}}},{key:"getTrackById",value:function(v){var f,b,p,k;return(k=(p=(b=(f=this.session)===null||f===void 0?void 0:f.getMediaSession())===null||b===void 0?void 0:b.media)===null||p===void 0?void 0:p.tracks)===null||k===void 0?void 0:k.find(function(P){return P.trackId===v})}},{key:"getActiveTrackIds",value:function(){var v,f,b;return(b=(f=(v=this.session)===null||v===void 0?void 0:v.getMediaSession())===null||f===void 0?void 0:f.activeTrackIds)!==null&&b!==void 0?b:[]}},{key:"getActiveAudioTrack",value:function(){var v,f=(v=this.session)===null||v===void 0?void 0:v.getMediaSession();if(f)return this.getInternalAudioTracks().find(function(b){var p;return(p=f.activeTrackIds)===null||p===void 0?void 0:p.includes(b.trackId)})}},{key:"getAudioTrackById",value:function(v){return this.getInternalAudioTracks().find(function(f){return f.trackId===Number(v)})}},{key:"getInternalAudioTracks",value:function(){var v,f,b,p;return(p=(b=(f=(v=this.player)===null||v===void 0?void 0:v.mediaInfo)===null||f===void 0?void 0:f.tracks)===null||b===void 0?void 0:b.filter(function(k){return k.type===chrome.cast.media.TrackType.AUDIO}))!==null&&p!==void 0?p:[]}},{key:"getActiveTextTrack",value:function(){var v,f=(v=this.session)===null||v===void 0?void 0:v.getMediaSession();if(f)return this.getTextTracks().find(function(b){var p;return(p=f.activeTrackIds)===null||p===void 0?void 0:p.includes(b.trackId)})}},{key:"getTextTrackById",value:function(v){return this.getTextTracks().find(function(f){return f.trackId===Number(v)})}},{key:"getTextTracks",value:function(){var v,f,b,p;return(p=(b=(f=(v=this.player)===null||v===void 0?void 0:v.mediaInfo)===null||f===void 0?void 0:f.tracks)===null||b===void 0?void 0:b.filter(function(k){return k.type===chrome.cast.media.TrackType.TEXT}))!==null&&p!==void 0?p:[]}},{key:"getAdMarkers",value:function(){var v,f,b,p=(f=(v=this.session)===null||v===void 0?void 0:v.getMediaSession())===null||f===void 0?void 0:f.media,k=p==null?void 0:p.breaks,P=p==null?void 0:p.breakClips;return(b=k==null?void 0:k.map(function(j){return{startTime:j.position,watched:j.isWatched,duration:j.breakClipIds.map(function(U){var G,ee=P.find(function(ne){return ne.id===U});return(G=ee==null?void 0:ee.duration)!==null&&G!==void 0?G:0}).reduce(function(U,G){return U+G},0)}}))!==null&&b!==void 0?b:[]}},{key:"onCastStateChanged",value:function(v){v.castState===cast.framework.CastState.NO_DEVICES_AVAILABLE?this.emit(B.CastSenderEvent.AVAILABILITY_CHANGED,{available:!1}):this.emit(B.CastSenderEvent.AVAILABILITY_CHANGED,{available:!0})}},{key:"onSessionStateChanged",value:function(v){var f=v.session,b=v.sessionState;switch(b){case cast.framework.SessionState.SESSION_STARTED:case cast.framework.SessionState.SESSION_RESUMED:var p=b===cast.framework.SessionState.SESSION_RESUMED;this.onConnected(f,p);break;case cast.framework.SessionState.SESSION_ENDED:this.onDisconnected()}}},{key:"onAnyChange",value:function(){this.updateStateFromRemotePlayer()}},{key:"load",value:function(v,f,b,p,k,P){var j,U=this.instanceSettings.initOptions,G=U.customer,ee=U.businessUnit,ne=U.exposureBaseUrl,re=U.sessionToken,oe=U.adobePrimetimeToken,W=U.locale,Te=new chrome.cast.media.MediaInfo(v,"");f||Object.assign(Te,{contentUrl:v});var Ue=new chrome.cast.media.LoadRequest(Te);return P&&!b&&(Ue.currentTime=P),Ue.customData={customer:G,businessUnit:ee,audioLanguage:p,subtitleLanguage:k,locale:W},f&&(Object.assign(Ue,{credentials:re}),Object.assign(Ue.customData,{exposureBaseUrl:ne,adParameters:(j=this.instanceSettings.loadOptions)===null||j===void 0?void 0:j.ads,adobePrimetimeToken:oe})),this.loadRequest(Ue)}},{key:"loadRequest",value:function(v){return E(this,void 0,void 0,function(){var f,b;return function(p,k){var P,j,U,G,ee={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]};return G={next:ne(0),throw:ne(1),return:ne(2)},typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function ne(re){return function(oe){return function(W){if(P)throw new TypeError("Generator is already executing.");for(;ee;)try{if(P=1,j&&(U=2&W[0]?j.return:W[0]?j.throw||((U=j.return)&&U.call(j),0):j.next)&&!(U=U.call(j,W[1])).done)return U;switch(j=0,U&&(W=[2&W[0],U.value]),W[0]){case 0:case 1:U=W;break;case 4:return ee.label++,{value:W[1],done:!1};case 5:ee.label++,j=W[1],W=[0];continue;case 7:W=ee.ops.pop(),ee.trys.pop();continue;default:if(!((U=(U=ee.trys).length>0&&U[U.length-1])||W[0]!==6&&W[0]!==2)){ee=0;continue}if(W[0]===3&&(!U||W[1]>U[0]&&W[1]<U[3])){ee.label=W[1];break}if(W[0]===6&&ee.label<U[1]){ee.label=U[1],U=W;break}if(U&&ee.label<U[2]){ee.label=U[2],ee.ops.push(W);break}U[2]&&ee.ops.pop(),ee.trys.pop();continue}W=k.call(p,ee)}catch(Te){W=[6,Te],j=0}finally{P=U=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([re,oe])}}}(this,function(p){return(f=cast.framework.CastContext.getInstance().getCurrentSession())?[2,f.loadMedia(v).catch(function(k){if(k!=="timeout")throw(0,g.error)("[CastSender]",k),new h.PlayerError("Failed to load media: ".concat(k),{type:h.ErrorTypes.CAST,rawError:k})})]:(b=new h.PlayerError("Failed to create cast session",{type:h.ErrorTypes.CAST}),[2,Promise.reject(b)])})})}},{key:"isPlaying",value:function(){return this.state.playbackState===h.PlaybackState.PLAYING}},{key:"isLive",value:function(){return this.state.isLive}},{key:"play",value:function(){var v,f;return!((v=this.player)===null||v===void 0)&&v.isPaused&&((f=this.playerController)===null||f===void 0||f.playOrPause()),Promise.resolve()}},{key:"pause",value:function(){var v,f;!((v=this.player)===null||v===void 0)&&v.isPaused||(f=this.playerController)===null||f===void 0||f.playOrPause()}},{key:"stop",value:function(){var v;(v=this.session)===null||v===void 0||v.endSession(!0)}},{key:"mute",value:function(){this.player&&this.playerController&&!this.player.isMuted&&this.playerController.muteOrUnmute()}},{key:"unmute",value:function(){this.player&&this.playerController&&this.player.isMuted&&this.playerController.muteOrUnmute()}},{key:"getCurrentTime",value:function(){return this.state.currentTime}},{key:"getDuration",value:function(){return this.state.duration}},{key:"getUTCCurrentTime",value:function(){return this.state.utcCurrentTime}},{key:"getUTCDuration",value:function(){return this.state.utcDuration}},{key:"getSeekable",value:function(){var v,f,b,p,k;return!((v=this.player)===null||v===void 0)&&v.liveSeekableRange?{start:(f=this.player.liveSeekableRange.start)!==null&&f!==void 0?f:0,end:(b=this.player.liveSeekableRange.end)!==null&&b!==void 0?b:0}:{start:0,end:(k=(p=this.player)===null||p===void 0?void 0:p.duration)!==null&&k!==void 0?k:0}}},{key:"scrub",value:function(v){var f;!((f=this.player)===null||f===void 0)&&f.canSeek&&this.seekTo(this.player.currentTime+v)}},{key:"seekTo",value:function(v){var f;!((f=this.player)===null||f===void 0)&&f.canSeek&&this.playerController&&(v===0&&(v=.001),this.player.currentTime=v,this.playerController.seek())}},{key:"seekToLive",value:function(){var v,f;this.playerController&&((f=(v=this.player)===null||v===void 0?void 0:v.liveSeekableRange)===null||f===void 0?void 0:f.end)!==void 0&&(this.player.currentTime=this.player.liveSeekableRange.end,this.playerController.seek())}},{key:"setAudioTrack",value:function(v){var f,b=this,p=this.getAudioTrackById(v.id);if(p){var k=(f=this.session)===null||f===void 0?void 0:f.getMediaSession(),P=this.getActiveTrackIds(),j=new chrome.cast.media.EditTracksInfoRequest(P.map(function(U){var G;return((G=b.getTrackById(U))===null||G===void 0?void 0:G.type)===chrome.cast.media.TrackType.AUDIO?p.trackId:U}));k==null||k.editTracksInfo(j,function(){},function(){})}}},{key:"getAudioTrack",value:function(){var v=this.getActiveAudioTrack();if(v)return d(v)}},{key:"getAudioTracks",value:function(){return this.getInternalAudioTracks().map(function(v){return d(v)})}},{key:"setSubtitleTrack",value:function(v){var f,b=this,p=(f=this.session)===null||f===void 0?void 0:f.getMediaSession();if(p){var k=this.getActiveTrackIds();if(v){var P=this.getTextTrackById(v.id);if(!P)return;this.getActiveTextTrack()?k=k.map(function(G){var ee;return((ee=b.getTrackById(G))===null||ee===void 0?void 0:ee.type)===chrome.cast.media.TrackType.TEXT?P.trackId:G}):k.push(P.trackId);var j=new chrome.cast.media.EditTracksInfoRequest(k);p.editTracksInfo(j,function(){},function(){})}else{var U=new chrome.cast.media.EditTracksInfoRequest(k.filter(function(G){var ee;return((ee=b.getTrackById(G))===null||ee===void 0?void 0:ee.type)!==chrome.cast.media.TrackType.TEXT}));p.editTracksInfo(U,function(){},function(){})}}}},{key:"getSubtitleTrack",value:function(){var v=this.getActiveTextTrack();if(v)return d(v)}},{key:"getSubtitleTracks",value:function(){return this.getTextTracks().map(function(v){return d(v)})}},{key:"getVolume",value:function(){var v;return(v=this.player)===null||v===void 0?void 0:v.volumeLevel}},{key:"setVolume",value:function(v){var f,b=v.percentage,p=v.change;if(this.player){var k=this.getVolume();if(k!==void 0){if(b&&!p&&(k=(0,h.clamp)(b/100,.01,1)),!b&&p){var P=100*k+p;k=(0,h.clamp)(P/100,.01,1)}this.player.volumeLevel=k,(f=this.playerController)===null||f===void 0||f.setVolumeLevel()}}}},{key:"setMuted",value:function(v){var f;this.playerController&&((f=this.player)===null||f===void 0?void 0:f.isMuted)!==v&&this.playerController.muteOrUnmute()}},{key:"toggleMuted",value:function(){var v;(v=this.playerController)===null||v===void 0||v.muteOrUnmute()}},{key:"destroy",value:function(){var v,f=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).retainCastSession,b=f!==void 0&&f;if(window.cast){var p=cast.framework.CastContext.getInstance();p.removeEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED,this.onSessionStateChanged),p.removeEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.onCastStateChanged),(v=this.playerController)===null||v===void 0||v.removeEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE,this.onAnyChange),b===!1&&p.endCurrentSession(!0)}N(C(_.prototype),"destroy",this).call(this)}}],S&&x(m.prototype,S),_}(h.EmitterBaseClass);B.CastSender=t},7044:function(Ee,B,K){var M=this&&this.__awaiter||function(I,E,T,l){return new(T||(T=Promise))(function(c,h){var y=function(d){try{g(l.next(d))}catch(r){h(r)}},i=function(d){try{g(l.throw(d))}catch(r){h(r)}},g=function(d){var r,t,u;d.done?c(d.value):(r=d.value,t=r,((u=T)!=null&&typeof Symbol<"u"&&u[Symbol.hasInstance]?u[Symbol.hasInstance](t):t instanceof u)?r:new T(function(m){m(r)})).then(y,i)};g((l=l.apply(I,E||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.getBrowserDevice=B.getDeviceType=void 0;var x=K(9327),N=K(9886),C={firefox:"mozilla",edge:"microsoft",chrome:"google",safari:"apple",unknown:"unknown"};function R(){var I=window.navigator.userAgent.toLowerCase();return/iphone|ipod|android|blackberry|windows phone|iemobile|wpdesktop/.test(I)&&!/crkey/.test(I)?"mobile":/ipad/.test(I)||"ontouchstart"in document.documentElement?"tablet":"desktop"}B.getDeviceType=R,B.getBrowserDevice=function(){return M(this,void 0,void 0,function(){var I,E,T;return function(l,c){var h,y,i,g,d={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return g={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function r(t){return function(u){return function(m){if(h)throw new TypeError("Generator is already executing.");for(;d;)try{if(h=1,y&&(i=2&m[0]?y.return:m[0]?y.throw||((i=y.return)&&i.call(y),0):y.next)&&!(i=i.call(y,m[1])).done)return i;switch(y=0,i&&(m=[2&m[0],i.value]),m[0]){case 0:case 1:i=m;break;case 4:return d.label++,{value:m[1],done:!1};case 5:d.label++,y=m[1],m=[0];continue;case 7:m=d.ops.pop(),d.trys.pop();continue;default:if(!((i=(i=d.trys).length>0&&i[i.length-1])||m[0]!==6&&m[0]!==2)){d=0;continue}if(m[0]===3&&(!i||m[1]>i[0]&&m[1]<i[3])){d.label=m[1];break}if(m[0]===6&&d.label<i[1]){d.label=i[1],i=m;break}if(i&&d.label<i[2]){d.label=i[2],d.ops.push(m);break}i[2]&&d.ops.pop(),d.trys.pop();continue}m=c.call(l,d)}catch(S){m=[6,S],y=0}finally{h=i=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([t,u])}}}(this,function(l){return I=(0,N.getBrowser)(),E=(0,N.getBrowserVersion)(),T=R(),[2,{id:(0,x.getDeviceId)(),type:T,name:"".concat((0,N.getOS)()," ").concat(I," ").concat(E),manufacturer:C[I],model:"".concat(T,"-browser-").concat(I,"-").concat(E)}]})})}},9041:function(Ee,B,K){var M=this&&this.__awaiter||function(C,R,I,E){return new(I||(I=Promise))(function(T,l){var c=function(i){try{y(E.next(i))}catch(g){l(g)}},h=function(i){try{y(E.throw(i))}catch(g){l(g)}},y=function(i){var g,d,r;i.done?T(i.value):(g=i.value,d=g,((r=I)!=null&&typeof Symbol<"u"&&r[Symbol.hasInstance]?r[Symbol.hasInstance](d):d instanceof r)?g:new I(function(t){t(g)})).then(c,h)};y((E=E.apply(C,R||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.getLGTVAdapter=void 0;var x=K(9327),N=K(9886);B.getLGTVAdapter=function(){var C=this;if((0,N.isLGTV)())return function(){return M(C,void 0,void 0,function(){var R;return function(I,E){var T,l,c,h,y={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return h={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function i(g){return function(d){return function(r){if(T)throw new TypeError("Generator is already executing.");for(;y;)try{if(T=1,l&&(c=2&r[0]?l.return:r[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,r[1])).done)return c;switch(l=0,c&&(r=[2&r[0],c.value]),r[0]){case 0:case 1:c=r;break;case 4:return y.label++,{value:r[1],done:!1};case 5:y.label++,l=r[1],r=[0];continue;case 7:r=y.ops.pop(),y.trys.pop();continue;default:if(!((c=(c=y.trys).length>0&&c[c.length-1])||r[0]!==6&&r[0]!==2)){y=0;continue}if(r[0]===3&&(!c||r[1]>c[0]&&r[1]<c[3])){y.label=r[1];break}if(r[0]===6&&y.label<c[1]){y.label=c[1],c=r;break}if(c&&y.label<c[2]){y.label=c[2],y.ops.push(r);break}c[2]&&y.ops.pop(),y.trys.pop();continue}r=E.call(I,y)}catch(t){r=[6,t],l=0}finally{T=c=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([g,d])}}}(this,function(I){switch(I.label){case 0:return[4,new Promise(function(E,T){if(!window.webOS)return T("window.webOS does not exist");window.webOS.deviceInfo(function(l){E(l)})})];case 1:return R=I.sent(),[2,{id:(0,x.getDeviceId)(),type:"ctv",name:"LGTV ".concat(R.modelName),manufacturer:"lg",model:"lg-tv-".concat(R.sdkVersion),modelNumber:R.modelName||"unknown"}]}})})};window.navigator.userAgent.includes("Web0S")&&console.warn("[RedBeeMedia] You are using an LG TV, but the webOS javascript libraries are not loaded. The player may not function properly.")}},6412:function(Ee,B,K){var M=this&&this.__awaiter||function(C,R,I,E){return new(I||(I=Promise))(function(T,l){var c=function(i){try{y(E.next(i))}catch(g){l(g)}},h=function(i){try{y(E.throw(i))}catch(g){l(g)}},y=function(i){var g,d,r;i.done?T(i.value):(g=i.value,d=g,((r=I)!=null&&typeof Symbol<"u"&&r[Symbol.hasInstance]?r[Symbol.hasInstance](d):d instanceof r)?g:new I(function(t){t(g)})).then(c,h)};y((E=E.apply(C,R||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.getSamsungAdapter=void 0;var x=K(9327),N=K(9886);B.getSamsungAdapter=function(){var C=this;if((0,N.isSamsungTV)()){if(document.querySelector('script[src="$WEBAPIS/webapis/webapis.js"]'))return function(){return M(C,void 0,void 0,function(){var R,I;return function(E,T){var l,c,h,y,i={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return y={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function g(d){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;i;)try{if(l=1,c&&(h=2&t[0]?c.return:t[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,t[1])).done)return h;switch(c=0,h&&(t=[2&t[0],h.value]),t[0]){case 0:case 1:h=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,c=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!((h=(h=i.trys).length>0&&h[h.length-1])||t[0]!==6&&t[0]!==2)){i=0;continue}if(t[0]===3&&(!h||t[1]>h[0]&&t[1]<h[3])){i.label=t[1];break}if(t[0]===6&&i.label<h[1]){i.label=h[1],h=t;break}if(h&&i.label<h[2]){i.label=h[2],i.ops.push(t);break}h[2]&&i.ops.pop(),i.trys.pop();continue}t=T.call(E,i)}catch(u){t=[6,u],c=0}finally{l=h=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([d,r])}}}(this,function(E){return R=tizen.systeminfo.getCapability("http://tizen.org/feature/platform.version"),I=webapis.productinfo.getRealModel(),[2,{id:(0,x.getDeviceId)(),type:"ctv",name:"SamsungTV ".concat(I),manufacturer:"samsung",model:"samsung-tv-".concat(R),modelNumber:I}]})})};console.warn("[RedBeeMedia] You are using a Samsung TV, but the webapis script is not loaded. The player may not function properly.")}}},9886:(Ee,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.isBrowserSupported=B.isAppleSafari=B.getBrowserVersion=B.getBrowser=B.getOS=B.isSamsungTV=B.isLGTV=void 0;var K={firefox:85,chrome:88,edge:88,safari:13,unknown:!1},M={firefox:!1,chrome:88,safari:13,edge:!1,unknown:!1};function x(){var R=window.navigator.userAgent.toLowerCase();return/windows/.test(R)?"Windows":/mac os/.test(R)?/iphone|ipod/.test(R)?"iOS":/ipad/.test(R)||"ontouchstart"in document.documentElement?"iPadOS":"macOS":/android/.test(R)?"Android":/linux/.test(R)?"Linux":"unknown"}function N(){var R=window.navigator.userAgent.toLowerCase();return/firefox/.test(R)?"firefox":/edg/.test(R)||/edga/.test(R)?"edge":/chrome/.test(R)?"chrome":/safari/.test(R)&&/apple computer/.test(navigator.vendor.toLowerCase())&&!/tizen/.test(R)&&!/sopopenbrowser/.test(R)?"safari":"unknown"}function C(){var R,I,E,T,l,c,h,y,i,g,d=window.navigator.userAgent.toLowerCase(),r=N(),t=0;return r==="firefox"?t=parseInt((I=(R=d.match(/firefox\/(\d+)/))===null||R===void 0?void 0:R[1])!==null&&I!==void 0?I:"",10):r==="edge"?t=parseInt((T=(E=d.match(/edg\/(\d+)/))===null||E===void 0?void 0:E[1])!==null&&T!==void 0?T:"",10)||parseInt((c=(l=d.match(/edga\/(\d+)/))===null||l===void 0?void 0:l[1])!==null&&c!==void 0?c:"",10):r==="chrome"?t=parseInt((y=(h=d.match(/chrome\/(\d+)/))===null||h===void 0?void 0:h[1])!==null&&y!==void 0?y:"",10):r==="safari"&&(t=parseInt((g=(i=d.match(/version\/(\d+)/))===null||i===void 0?void 0:i[1])!==null&&g!==void 0?g:"",10)),t}B.isLGTV=function(){var R,I;return!!(!((I=(R=window.webOS)===null||R===void 0?void 0:R.platform)===null||I===void 0)&&I.tv)},B.isSamsungTV=function(){return!(!window.tizen||!window.webapis)},B.getOS=x,B.getBrowser=N,B.getBrowserVersion=C,B.isAppleSafari=function(){var R=x();return N()==="safari"||R==="iOS"||R==="iPadOS"},B.isBrowserSupported=function(){var R=x(),I=N(),E=C(),T=M[I],l=K[I];return!!(R==="Android"&&T&&E>=T)||!(R!=="iOS"&&R!=="iPadOS"||!T)||!(R!=="Windows"&&R!=="macOS"||!l||!(E>=l))}},4676:function(Ee,B,K){var M=this&&this.__awaiter||function(I,E,T,l){return new(T||(T=Promise))(function(c,h){var y=function(d){try{g(l.next(d))}catch(r){h(r)}},i=function(d){try{g(l.throw(d))}catch(r){h(r)}},g=function(d){var r,t,u;d.done?c(d.value):(r=d.value,t=r,((u=T)!=null&&typeof Symbol<"u"&&u[Symbol.hasInstance]?u[Symbol.hasInstance](t):t instanceof u)?r:new T(function(m){m(r)})).then(y,i)};g((l=l.apply(I,E||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.getDevice=void 0;var x,N=K(7044),C=K(9041),R=K(6412);B.getDevice=function(I){return M(this,void 0,void 0,function(){var E,T;return function(l,c){var h,y,i,g,d={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return g={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function r(t){return function(u){return function(m){if(h)throw new TypeError("Generator is already executing.");for(;d;)try{if(h=1,y&&(i=2&m[0]?y.return:m[0]?y.throw||((i=y.return)&&i.call(y),0):y.next)&&!(i=i.call(y,m[1])).done)return i;switch(y=0,i&&(m=[2&m[0],i.value]),m[0]){case 0:case 1:i=m;break;case 4:return d.label++,{value:m[1],done:!1};case 5:d.label++,y=m[1],m=[0];continue;case 7:m=d.ops.pop(),d.trys.pop();continue;default:if(!((i=(i=d.trys).length>0&&i[i.length-1])||m[0]!==6&&m[0]!==2)){d=0;continue}if(m[0]===3&&(!i||m[1]>i[0]&&m[1]<i[3])){d.label=m[1];break}if(m[0]===6&&d.label<i[1]){d.label=i[1],i=m;break}if(i&&d.label<i[2]){d.label=i[2],d.ops.push(m);break}i[2]&&d.ops.pop(),d.trys.pop();continue}m=c.call(l,d)}catch(S){m=[6,S],y=0}finally{h=i=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([t,u])}}}(this,function(l){switch(l.label){case 0:return x?[2,Promise.resolve(x)]:(E=I||[(0,C.getLGTVAdapter)(),(0,R.getSamsungAdapter)()].find(function(c){return!!c}),[4,E?E():(0,N.getBrowserDevice)()]);case 1:return T=l.sent(),x=T,[2,T]}})})}},180:(Ee,B,K)=>{function M(d,r){for(var t=0;t<r.length;t++){var u=r[t];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(d,u.key,u)}}function x(d,r,t){return x=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(u,m,S){var A=function(v,f){for(;!Object.prototype.hasOwnProperty.call(v,f)&&(v=N(v))!==null;);return v}(u,m);if(A){var _=Object.getOwnPropertyDescriptor(A,m);return _.get?_.get.call(S||u):_.value}},x(d,r,t||d)}function N(d){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},N(d)}function C(d,r){return C=Object.setPrototypeOf||function(t,u){return t.__proto__=u,t},C(d,r)}function R(d){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var t,u=N(d);if(r){var m=N(this).constructor;t=Reflect.construct(u,arguments,m)}else t=u.apply(this,arguments);return function(S,A){return!A||((_=A)&&typeof Symbol<"u"&&_.constructor===Symbol?"symbol":typeof _)!="object"&&typeof A!="function"?function(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}(S):A;var _}(this,t)}}Object.defineProperty(B,"__esModule",{value:!0}),B.AbstractBaseEngine=B.getAudioKind=B.getTextKind=B.getDashAudioKind=B.getDashTextKind=B.getQualityLevelName=B.SUPPORTED_TEXT_TRACK_KINDS=B.AUTO_QUALITY_LEVEL_DEFINITION=void 0;var I=K(1756),E=K(9327),T=K(8360),l=K(3820),c=K(5735),h=K(2479);function y(d){return{id:d.id,language:d.language||(0,c.getLabel)(d.language),label:d.label,kind:d.kind,raw:d}}function i(d){return{id:d.language,language:d.language||(0,c.getLabel)(d.language),kind:d.kind,label:d.label}}B.AUTO_QUALITY_LEVEL_DEFINITION={id:-1,name:"auto",bandwidth:-1,width:-1,height:-1},B.SUPPORTED_TEXT_TRACK_KINDS=["captions","subtitles","descriptions","forced"],B.getQualityLevelName=function(d){var r,t={720:"HD",1080:"Full HD",1440:"2K",2160:"4K"}[d.height],u=(r=d.height)===null||r===void 0?void 0:r.toString(),m=(d.bandwidth/1e6).toFixed(1),S=d.framerate?Math.round(d.framerate):void 0,A="";return A+=t?"".concat(u," ").concat(t):u,(A+=" @ ".concat(m," mbps"))+(S&&S>30?", ".concat(Math.round(S)," fps"):"")},B.getDashTextKind=function(d){return d==="captions"?"caption":d==="subtitles"?"subtitle":d==="forced"?"forced-subtitle":d},B.getDashAudioKind=function(d){return d&&["description","alternative"].includes(d)?"alternate":d},B.getTextKind=function(d){return d.includes("caption")?"captions":d.includes("description")?"descriptions":d.includes("chapters")?"chapters":d.includes("metadata")?"metadata":d.includes("forced")||d.includes("forced-subtitle")?"forced":"subtitles"},B.getAudioKind=function(d){return d.includes("")?"":d.includes("alternate")||d.includes("alternative")?"alternative":d.includes("main-desc")?"main-desc":d.includes("description")?"description":d.includes("commentary")?"commentary":"main"};var g=function(d){(function(S,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(A&&A.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),A&&C(S,A)})(m,d);var r,t,u=R(m);function m(S,A){var _,v;if(function(f,b){if(!(f instanceof b))throw new TypeError("Cannot call a class as a function")}(this,m),(_=u.call(this)).isSeekDisabled=!1,_.state=E.PlaybackState.IDLE,!S)throw"[AbstractBaseEngine] Invalid constructor";return _.instanceSettings=A,_.videoElement=S,_.guardian=new T.ContractRestrictionsGuardian((v=A.playResponse)===null||v===void 0?void 0:v.contractRestrictions),_.droppedFrames=0,_.supposedCurrentTime=0,_.videoEventListeners=[],_.instanceSettings.initOptions.nativeSkin===!0?_.videoElement.setAttribute("controls","controls"):_.videoElement.removeAttribute("controls"),_.videoElement.setAttribute("crossorigin","anonymous"),_.mediaEventFilter=_.setupMediaEventFilter(_.videoElement),_}return r=m,(t=[{key:"setupEventListeners",value:function(){this.addNativeVideoEvents(),this.addSubtitleEvents(),this.addAudioTrackEvents()}},{key:"convertToUTCTime",value:function(S){var A,_=(A=this.utcStartTime)!==null&&A!==void 0?A:this.fallbackUTCStartTime;if(Number.isFinite(_)===!1&&this.isLive()){var v=this.videoElement.seekable.length?this.videoElement.seekable.end(0):this.videoElement.duration;_=Date.now()-1e3*v,this.fallbackUTCStartTime=_}return _!==void 0&&Number.isFinite(_)?_+1e3*S:-1}},{key:"setUTCStartTime",value:function(S){this.utcStartTime=S}},{key:"setPlaybackState",value:function(S){this.state=S,this.emit(l.EngineEvents.STATE_CHANGED,this.state)}},{key:"load",value:function(S){var A=this;this.setPlaybackState(E.PlaybackState.LOADING),this.once(l.EngineEvents.LOADED,function(){A.setPreferredLanguages({audio:S.audio,subtitle:S.subtitle}),A.onTracksChange()})}},{key:"setPreferredLanguages",value:function(S){var A=S.audio,_=S.subtitle;if(A!=null&&A.language){var v=this.getAudioTracks(),f=v.find(function(p){return A.kind?p.language===A.language&&p.kind===A.kind:p.language===A.language});f||(f=v[0]),this.setAudioTrack(f)}if(_!=null&&_.language){var b=this.getSubtitleTracks().find(function(p){return _.kind?p.language===_.language&&p.kind===_.kind:p.language===_.language});this.setSubtitleTrack(b)}else this.setSubtitleTrack(void 0)}},{key:"setClientRestrictions",value:function(S){this.guardian.setClientRestrictions(S)}},{key:"play",value:function(){return this.videoElement.play()||Promise.resolve()}},{key:"pause",value:function(){this.videoElement&&this.videoElement.pause()}},{key:"stop",value:function(){this.videoElement.pause(),this.videoElement.removeAttribute("src"),this.videoElement.load(),this.setPlaybackState(E.PlaybackState.IDLE)}},{key:"getPlaybackState",value:function(){return this.state}},{key:"addNativeVideoEvents",value:function(){this.addOnVolumeChangeListener(),this.addOnErrorListener()}},{key:"setupMediaEventFilter",value:function(S){var A=this;return(0,I.getMediaEventFilter)({videoElement:S,callback:function(_){switch(_){case I.FilteredMediaEvent.LOADED:A.onLoaded();break;case I.FilteredMediaEvent.SEEKING:A.onSeeking();break;case I.FilteredMediaEvent.SEEKED:A.onSeeked();break;case I.FilteredMediaEvent.BUFFERING:A.onBuffering();break;case I.FilteredMediaEvent.BUFFERED:A.onBuffered();break;case I.FilteredMediaEvent.PLAY:A.onPlay();break;case I.FilteredMediaEvent.PLAYING:A.onPlaying();break;case I.FilteredMediaEvent.PAUSE:A.onPause();break;case I.FilteredMediaEvent.ENDED:A.onEnded();break;case I.FilteredMediaEvent.TIME_UPDATE:A.onTimeUpdate()}}})}},{key:"addOnVolumeChangeListener",value:function(){this.addVideoEventListener(E.HtmlVideoElementEvents.VOLUMECHANGE,this.onVolumeChange.bind(this))}},{key:"addOnErrorListener",value:function(){this.addVideoEventListener(E.HtmlVideoElementEvents.ERROR,this.onError.bind(this))}},{key:"addOnPlaybackRateChangedListener",value:function(){this.addVideoEventListener(E.HtmlVideoElementEvents.RATECHANGE,this.onPlaybackRateChanged.bind(this))}},{key:"addSubtitleEvents",value:function(){this.videoElement.textTracks&&this.videoElement.textTracks.addEventListener("change",this.onTextTracksChangeReference=this.onTextTracksChange.bind(this))}},{key:"addAudioTrackEvents",value:function(){this.videoElement.audioTracks&&this.videoElement.audioTracks.addEventListener("change",this.onAudioTrackChangeReference=this.onAudioTrackChange.bind(this))}},{key:"isPlaying",value:function(){return this.state===E.PlaybackState.PLAYING}},{key:"isLive",value:function(){return this.videoElement.duration===1/0}},{key:"isAtLiveEdge",value:function(){if(this.isLive()){var S=this.getSeekable().end||this.getDuration();return this.getCurrentTime()>S-30}return!1}},{key:"isEnded",value:function(){return this.videoElement.ended}},{key:"onLoaded",value:function(){this.setPlaybackState(this.videoElement.paused?E.PlaybackState.PAUSED:E.PlaybackState.PLAYING),this.emit(l.EngineEvents.LOADED,void 0)}},{key:"onPlaybackRateChanged",value:function(){this.emit(l.EngineEvents.PLAYBACK_RATE_CHANGED,{playbackRate:this.videoElement.playbackRate})}},{key:"onBuffering",value:function(){this.emit(l.EngineEvents.BUFFERING,void 0),this.setPlaybackState(E.PlaybackState.BUFFERING)}},{key:"onBuffered",value:function(){this.emit(l.EngineEvents.BUFFERED,void 0),this.setPlaybackState(this.videoElement.paused?E.PlaybackState.PAUSED:E.PlaybackState.PLAYING)}},{key:"onPlay",value:function(){this.emit(l.EngineEvents.PLAY,void 0)}},{key:"onPause",value:function(){this.setPlaybackState(E.PlaybackState.PAUSED),this.emit(l.EngineEvents.PAUSE,void 0)}},{key:"onPlaying",value:function(){this.setPlaybackState(E.PlaybackState.PLAYING),this.emit(l.EngineEvents.PLAYING,void 0)}},{key:"onTimeUpdate",value:function(){this.pollDroppedFrames(),this.supposedCurrentTime=this.videoElement.currentTime,this.guardian.isValidPosition(this.getCurrentTime(),!0),this.emit(l.EngineEvents.TIME_UPDATE,{currentTime:this.getCurrentTime()})}},{key:"pollDroppedFrames",value:function(){var S;if(this.videoElement.getVideoPlaybackQuality){var A=(S=this.videoElement.getVideoPlaybackQuality())===null||S===void 0?void 0:S.droppedVideoFrames;if(A===this.droppedFrames)return;this.droppedFrames=A,this.emit(l.EngineEvents.DROPPED_FRAMES,this.droppedFrames)}}},{key:"onSeeking",value:function(){var S=this.guardian.isValidPosition(this.getCurrentTime());S.valid?(this.setPlaybackState(E.PlaybackState.SEEKING),this.emit(l.EngineEvents.SEEKING,void 0)):this.seekTo(S.validPosition)}},{key:"onSeeked",value:function(){this.guardian.isValidPosition(this.getCurrentTime()).valid&&(this.setPlaybackState(this.videoElement.paused?E.PlaybackState.PAUSED:E.PlaybackState.PLAYING),this.emit(l.EngineEvents.SEEKED,void 0))}},{key:"onVolumeChange",value:function(){this.emit(l.EngineEvents.VOLUME_CHANGE,{volume:this.getVolume(),muted:this.getMuted()})}},{key:"onEnded",value:function(){this.supposedCurrentTime=0,this.setPlaybackState(E.PlaybackState.ENDED),this.emit(l.EngineEvents.ENDED,void 0)}},{key:"onError",value:function(S){if(S){this.setPlaybackState(E.PlaybackState.ERROR);var A=(0,h.convertError)(S);A&&this.emit(l.EngineEvents.ERROR,A)}}},{key:"onTextTracksChange",value:function(){var S=this,A=function(p,k){var P=S.videoElement.textTracks[p];if(v&&P.mode==="hidden"&&B.SUPPORTED_TEXT_TRACK_KINDS.includes(P.kind)){var j=P.activeCues?Array.from(P.activeCues):[];S.emit(l.EngineEvents.SUBTITLE_CUE_CHANGED,j),P.oncuechange=function(){var U=P.activeCues?Array.from(P.activeCues):[];_.emit(l.EngineEvents.SUBTITLE_CUE_CHANGED,U)}}else P.oncuechange=null},_=this,v=this.getSubtitleTrack();this.emit(l.EngineEvents.SUBTITLE_CHANGED,{track:v}),this.emit(l.EngineEvents.SUBTITLE_CUE_CHANGED,[]);for(var f=0,b=this.videoElement.textTracks.length;f<b;f++)A(f)}},{key:"onAudioTrackChange",value:function(){this.emit(l.EngineEvents.AUDIO_CHANGED,{track:this.getAudioTrack()})}},{key:"onTracksChange",value:function(){this.emit(l.EngineEvents.TRACKS_CHANGED,{subtitleTrack:this.getSubtitleTrack(),audioTrack:this.getAudioTrack(),subtitleTracks:this.getSubtitleTracks(),audioTracks:this.getAudioTracks()})}},{key:"setAutoPlay",value:function(){this.videoElement.setAttribute("autoplay","true")}},{key:"seekTo",value:function(S){this.videoElement.currentTime=S}},{key:"setPlaybackRate",value:function(S){this.videoElement.playbackRate=S}},{key:"getCurrentTime",value:function(){return this.videoElement.currentTime}},{key:"getUTCCurrentTime",value:function(){return this.convertToUTCTime(this.getCurrentTime())}},{key:"getDuration",value:function(){var S=this.getSeekable();return S!=null&&S.end?S.end:this.videoElement.duration||0}},{key:"getUTCDuration",value:function(){return this.convertToUTCTime(this.getDuration())}},{key:"getSeekable",value:function(){var S=this.videoElement.seekable;return S.length>0?{start:S.start(0),end:S.end(0)}:{start:0,end:0}}},{key:"getUTCSeekable",value:function(){var S=this.getSeekable();return{start:this.convertToUTCTime(S.start),end:this.convertToUTCTime(S.end)}}},{key:"seekToLive",value:function(){var S=this.getSeekable().end;S&&this.seekTo(S)}},{key:"setVolume",value:function(S){S&&!isNaN(S)||(S=1),this.videoElement.muted=!1,this.videoElement.volume=S}},{key:"getVolume",value:function(){return this.videoElement.volume}},{key:"getMuted",value:function(){return this.videoElement.muted}},{key:"toggleMuted",value:function(){this.setMuted(!this.videoElement.muted)}},{key:"setMuted",value:function(S){this.videoElement.muted=S}},{key:"getQualityLevel",value:function(){return B.AUTO_QUALITY_LEVEL_DEFINITION}},{key:"getQualityLevels",value:function(){return[B.AUTO_QUALITY_LEVEL_DEFINITION]}},{key:"setAudioTrack",value:function(S){var A=this.videoElement.audioTracks;if(A&&A.length>1){var _=!1;Array.from(A).forEach(function(v){_||v.id!==S.id||v.kind!==S.kind?v.enabled=!1:(v.enabled=!0,_=!0)}),_||(A[0].enabled=!0)}}},{key:"getAudioTrack",value:function(){var S=(this.videoElement.audioTracks?Array.from(this.videoElement.audioTracks):[]).find(function(A){return A.enabled});if(S)return y(S)}},{key:"getAudioTracks",value:function(){return(this.videoElement.audioTracks?Array.from(this.videoElement.audioTracks):[]).map(function(S){return y(S)}).filter(function(S,A,_){return _.findIndex(function(v){return S.language===v.language&&S.label===v.label&&S.kind===v.kind})===A})}},{key:"setSubtitleTrack",value:function(S){var A=this.videoElement.textTracks||[],_=!1;Array.from(A).filter(function(v){return B.SUPPORTED_TEXT_TRACK_KINDS.includes(v==null?void 0:v.kind)}).forEach(function(v){_||v.language!==(S==null?void 0:S.language)||v.kind!==(S==null?void 0:S.kind)?v.mode="disabled":(v.mode="hidden",_=!0)})}},{key:"getSubtitleTrack",value:function(){var S=this.videoElement.textTracks?Array.from(this.videoElement.textTracks):[];if(Array.isArray(S)&&S.length!==0){var A=S.find(function(_){return _.mode==="hidden"&&B.SUPPORTED_TEXT_TRACK_KINDS.includes(_.kind)});return A?i(A):void 0}}},{key:"getSubtitleTracks",value:function(){return(this.videoElement.textTracks?Array.from(this.videoElement.textTracks):[]).map(function(S){return i(S)}).filter(function(S,A,_){return _.findIndex(function(v){return S.language===v.language&&S.label===v.label&&S.kind&&S.kind===v.kind&&B.SUPPORTED_TEXT_TRACK_KINDS.includes(S.kind)})===A})}},{key:"addVideoEventListener",value:function(S,A){this.videoElement&&(this.videoEventListeners.push({type:S,listener:A}),this.videoElement.addEventListener(S,A))}},{key:"removeVideoEventListeners",value:function(){var S=this;this.videoElement&&this.videoEventListeners.forEach(function(A){S.videoElement.removeEventListener(A.type,A.listener)})}},{key:"destroy",value:function(){this.removeVideoEventListeners(),this.onTextTracksChangeReference&&this.videoElement.textTracks.removeEventListener("change",this.onTextTracksChangeReference),this.onAudioTrackChangeReference&&this.videoElement.audioTracks.removeEventListener("change",this.onAudioTrackChangeReference),this.mediaEventFilter&&this.mediaEventFilter.teardown(),this.stop(),x(N(m.prototype),"destroy",this).call(this)}}])&&M(r.prototype,t),m}(E.EmitterBaseClass);B.AbstractBaseEngine=g},7296:function(Ee,B,K){function M(j,U){(U==null||U>j.length)&&(U=j.length);for(var G=0,ee=new Array(U);G<U;G++)ee[G]=j[G];return ee}function x(j,U){for(var G=0;G<U.length;G++){var ee=U[G];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(j,ee.key,ee)}}function N(j,U,G){return N=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(ee,ne,re){var oe=function(Te,Ue){for(;!Object.prototype.hasOwnProperty.call(Te,Ue)&&(Te=C(Te))!==null;);return Te}(ee,ne);if(oe){var W=Object.getOwnPropertyDescriptor(oe,ne);return W.get?W.get.call(re||ee):W.value}},N(j,U,G||j)}function C(j){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)},C(j)}function R(j,U){return R=Object.setPrototypeOf||function(G,ee){return G.__proto__=ee,G},R(j,U)}function I(j){return function(U){if(Array.isArray(U))return M(U)}(j)||function(U){if(typeof Symbol<"u"&&U[Symbol.iterator]!=null||U["@@iterator"]!=null)return Array.from(U)}(j)||E(j)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(j,U){if(j){if(typeof j=="string")return M(j,U);var G=Object.prototype.toString.call(j).slice(8,-1);return G==="Object"&&j.constructor&&(G=j.constructor.name),G==="Map"||G==="Set"?Array.from(G):G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G)?M(j,U):void 0}}function T(j){var U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var G,ee=C(j);if(U){var ne=C(this).constructor;G=Reflect.construct(ee,arguments,ne)}else G=ee.apply(this,arguments);return function(re,oe){return!oe||((W=oe)&&typeof Symbol<"u"&&W.constructor===Symbol?"symbol":typeof W)!="object"&&typeof oe!="function"?function(Te){if(Te===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Te}(re):oe;var W}(this,G)}}var l=this&&this.__createBinding||(Object.create?function(j,U,G,ee){ee===void 0&&(ee=G);var ne=Object.getOwnPropertyDescriptor(U,G);ne&&!("get"in ne?!U.__esModule:ne.writable||ne.configurable)||(ne={enumerable:!0,get:function(){return U[G]}}),Object.defineProperty(j,ee,ne)}:function(j,U,G,ee){ee===void 0&&(ee=G),j[ee]=U[G]}),c=this&&this.__setModuleDefault||(Object.create?function(j,U){Object.defineProperty(j,"default",{enumerable:!0,value:U})}:function(j,U){j.default=U}),h=this&&this.__importStar||function(j){if(j&&j.__esModule)return j;var U={};if(j!=null)for(var G in j)G!=="default"&&Object.prototype.hasOwnProperty.call(j,G)&&l(U,j,G);return c(U,j),U},y=this&&this.__awaiter||function(j,U,G,ee){return new(G||(G=Promise))(function(ne,re){var oe=function(Ue){try{Te(ee.next(Ue))}catch(ze){re(ze)}},W=function(Ue){try{Te(ee.throw(Ue))}catch(ze){re(ze)}},Te=function(Ue){var ze,le,Se;Ue.done?ne(Ue.value):(ze=Ue.value,le=ze,((Se=G)!=null&&typeof Symbol<"u"&&Se[Symbol.hasInstance]?Se[Symbol.hasInstance](le):le instanceof Se)?ze:new G(function(be){be(ze)})).then(oe,W)};Te((ee=ee.apply(j,U||[])).next())})},i=this&&this.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(B,"__esModule",{value:!0}),B.DashJs=B.getCapabilitiesFilter=void 0;var g=h(K(2667)),d=K(5893),r=i(K(1344)),t=K(9327),u=K(9886),m=K(9584),S=K(180),A=K(5476),_=K(3820),v=K(5735);g.default.MssHandler=d.MssHandler;var f=new RegExp(/hev1|hvc1/);function b(j){var U,G,ee,ne;return j.type==="audio"?ne=(0,S.getAudioKind)((U=j.roles)!==null&&U!==void 0?U:[]):j.type==="text"&&(ne=(0,S.getTextKind)((G=j.roles)!==null&&G!==void 0?G:[])),{id:j.id,language:j.lang||"",label:((ee=j.labels[0])===null||ee===void 0?void 0:ee.text)||(0,v.getLabel)(j.lang),kind:ne,raw:j}}function p(j){return function(U){return!((0,u.isLGTV)()&&(0,u.getBrowserVersion)()===38&&(U.frameRate&&U.frameRate>30||U.codecs&&f.test(U.codecs)&&U.codecs.includes(".B0"))||j===!1&&U.codecs&&f.test(U.codecs))}}function k(j){return j.sort(function(U,G){return U.codec&&G.codec&&f.test(U.codec)&&!f.test(G.codec)?-1:0})}B.getCapabilitiesFilter=p;var P=function(j){(function(re,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(oe&&oe.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),oe&&R(re,oe)})(ne,j);var U,G,ee=T(ne);function ne(re,oe){var W;return function(Te,Ue){if(!(Te instanceof Ue))throw new TypeError("Cannot call a class as a function")}(this,ne),(W=ee.call(this,re,oe)).name="Dashjs",W.playertechVersion="",W.mediaPlayer=(0,g.MediaPlayer)().create(),W.playertechVersion=W.mediaPlayer.getVersion(),W.mediaPlayer.initialize(),W.mediaPlayer.attachView(re),W.mediaPlayer.setAutoPlay(!1),W.mediaPlayer.setCustomInitialTrackSelectionFunction(k),W.setupEventListeners(),W}return U=ne,G=[{key:"setupEventListeners",value:function(){var re,oe,W=this;N(C(ne.prototype),"setupEventListeners",this).call(this),this.mediaPlayer.on(g.MediaPlayer.events.KEY_STATUSES_CHANGED,function(){switch(W.keySystem){case t.KeySystem.PLAYREADY:W.emit(_.EngineEvents.DRM_UPDATE,"PLAYREADY_LICENSE_REQUEST"),W.emit(_.EngineEvents.DRM_UPDATE,"PLAYREADY_LICENSE_RESPONSE");break;case t.KeySystem.WIDEVINE:W.emit(_.EngineEvents.DRM_UPDATE,"WIDEVINE_LICENSE_REQUEST"),W.emit(_.EngineEvents.DRM_UPDATE,"WIDEVINE_LICENSE_RESPONSE")}}),this.mediaPlayer.on(g.MediaPlayer.events.KEY_ERROR,function(){switch(W.keySystem){case t.KeySystem.PLAYREADY:W.emit(_.EngineEvents.DRM_UPDATE,"PLAYREADY_LICENSE_ERROR");break;case t.KeySystem.WIDEVINE:W.emit(_.EngineEvents.DRM_UPDATE,"WIDEVINE_LICENSE_ERROR")}}),this.mediaPlayer.on(g.MediaPlayer.events.QUALITY_CHANGE_RENDERED,function(Te){if(Te.mediaType==="video"){var Ue=Te.newQuality,ze=W.mediaPlayer.getBitrateInfoListFor("video")[Ue];ze&&W.emit(_.EngineEvents.BITRATE_CHANGED,{bitrate:ze.bitrate,width:ze.width,height:ze.height})}}),this.mediaPlayer.on(g.MediaPlayer.events.TRACK_CHANGE_RENDERED,function(Te){switch(Te.mediaType){case"audio":W.onAudioTrackChange();break;case"text":W.onTextTracksChange()}}),((oe=(re=this.instanceSettings.initOptions)===null||re===void 0?void 0:re.metadataURIs)!==null&&oe!==void 0?oe:[]).forEach(function(Te){W.mediaPlayer.on(Te,function(Ue){W.emit(_.EngineEvents.METADATA_EVENT,{event:Ue,engineName:W.name,engineVersion:W.playertechVersion})})}),this.mediaPlayer.on(g.MediaPlayer.events.ERROR,this.onDashJsError.bind(this)),this.mediaPlayer.on(g.MediaPlayer.events.PLAYBACK_ERROR,this.onDashJsError.bind(this)),this.mediaPlayer.on(g.MediaPlayer.events.KEY_ERROR,this.onDashJsError.bind(this)),this.mediaPlayer.on(g.MediaPlayer.events.PERIOD_SWITCH_COMPLETED,function(){W.onTextTracksChange(),W.onTracksChange()}),this.mediaPlayer.on(g.MediaPlayer.events.MANIFEST_LOADED,function(Te){var Ue;(Ue=Te.data.Period_asArray)===null||Ue===void 0||Ue.forEach(function(ze){var le;(le=ze.AdaptationSet_asArray)===null||le===void 0||le.forEach(function(Se){var be;(be=Se.ContentProtection_asArray)===null||be===void 0||be.forEach(function(Y){var Q=Y.pssh;typeof Q=="string"&&(Y.pssh={__text:Q})})})})})}},{key:"_load",value:function(re){var oe=re.src,W=re.license,Te=re.startTime,Ue=re.subtitle,ze=re.audio,le=this,Se=Object.create(null,{load:{get:function(){return N(C(ne.prototype),"load",le)}}});return y(this,void 0,void 0,function(){var be,Y,Q,J;return function(fe,Ce){var V,H,z,X,de={label:0,sent:function(){if(1&z[0])throw z[1];return z[1]},trys:[],ops:[]};return X={next:ge(0),throw:ge(1),return:ge(2)},typeof Symbol=="function"&&(X[Symbol.iterator]=function(){return this}),X;function ge(Ge){return function(it){return function(Ye){if(V)throw new TypeError("Generator is already executing.");for(;de;)try{if(V=1,H&&(z=2&Ye[0]?H.return:Ye[0]?H.throw||((z=H.return)&&z.call(H),0):H.next)&&!(z=z.call(H,Ye[1])).done)return z;switch(H=0,z&&(Ye=[2&Ye[0],z.value]),Ye[0]){case 0:case 1:z=Ye;break;case 4:return de.label++,{value:Ye[1],done:!1};case 5:de.label++,H=Ye[1],Ye=[0];continue;case 7:Ye=de.ops.pop(),de.trys.pop();continue;default:if(!((z=(z=de.trys).length>0&&z[z.length-1])||Ye[0]!==6&&Ye[0]!==2)){de=0;continue}if(Ye[0]===3&&(!z||Ye[1]>z[0]&&Ye[1]<z[3])){de.label=Ye[1];break}if(Ye[0]===6&&de.label<z[1]){de.label=z[1],z=Ye;break}if(z&&de.label<z[2]){de.label=z[2],de.ops.push(Ye);break}z[2]&&de.ops.pop(),de.trys.pop();continue}Ye=Ce.call(fe,de)}catch(Ke){Ye=[6,Ke],H=0}finally{V=z=0}if(5&Ye[0])throw Ye[1];return{value:Ye[0]?Ye[1]:void 0,done:!0}}([Ge,it])}}}(this,function(fe){switch(fe.label){case 0:return be=this,this.src=oe,Y=this.instanceSettings.initOptions.customDashJSConfiguration||{},Q=(0,r.default)({},A.DashJS,Y,{streaming:{text:{defaultEnabled:!!(Ue!=null&&Ue.language)}}}),this.mediaPlayer.updateSettings(Q),[4,(0,m.getSupportedDrm)(this.instanceSettings.supportedKeySystem,"hvc1.1.6.L93.90")];case 1:return J=fe.sent(),this.mediaPlayer.registerCustomCapabilitiesFilter(p(!!J)),ze!=null&&ze.language&&this.mediaPlayer.setInitialMediaSettingsFor("audio",{lang:ze.language,role:(0,S.getDashAudioKind)(ze.kind)}),Ue!=null&&Ue.language&&this.mediaPlayer.setInitialMediaSettingsFor("text",{lang:Ue.language,role:(0,S.getDashTextKind)(Ue.kind)}),this.setContractRestrictedConfiguration(),this.setContentSpecificConfiguration(),this.setLicense(this.instanceSettings.supportedKeySystem,W),this.mediaPlayer.attachSource(Te===void 0?oe:"".concat(oe,"#t=").concat(Te)),this.once(_.EngineEvents.LOADED,function(){be.videoElement.autoplay=!0}),Se.load.call(this,{src:oe,license:W,startTime:Te,audio:ze,subtitle:Ue}),[2]}})})}},{key:"load",value:function(re){this._load(re)}},{key:"onLoaded",value:function(){var re,oe,W,Te,Ue=(Te=(W=(oe=(re=this.mediaPlayer.getDashMetrics())===null||re===void 0?void 0:re.getCurrentManifestUpdate())===null||oe===void 0?void 0:oe.representationInfo)===null||W===void 0?void 0:W[0])===null||Te===void 0?void 0:Te.presentationTimeOffset;!this.isLive()&&Ue&&this.setUTCStartTime(1e3*Ue),N(C(ne.prototype),"onLoaded",this).call(this)}},{key:"setPreferredLanguages",value:function(){}},{key:"addSubtitleEvents",value:function(){}},{key:"addAudioTrackEvents",value:function(){}},{key:"isLive",value:function(){var re,oe,W,Te=this.mediaPlayer.isReady()?this.mediaPlayer.isDynamic():null;return Te!==null?Te:(W=(oe=(re=this.instanceSettings.playResponse)===null||re===void 0?void 0:re.streamInfo)===null||oe===void 0?void 0:oe.live)!==null&&W!==void 0&&W}},{key:"setContractRestrictedConfiguration",value:function(){var re;if(this.instanceSettings.playResponse){var oe=((re=this.instanceSettings.playResponse)===null||re===void 0?void 0:re.contractRestrictions)||{},W=oe.minBitrate,Te=oe.maxBitrate,Ue=oe.maxResHeight;if(W||Te||Ue){var ze={streaming:{abr:Object.assign(Object.assign({},W&&{minBitrate:{audio:-1,video:W}}),Te&&{maxBitrate:{audio:-1,video:Te}})}};this.mediaPlayer.updateSettings(ze)}}}},{key:"setContentSpecificConfiguration",value:function(){var re,oe,W,Te=this,Ue={streaming:{delay:{}}},ze=(oe=(re=this.instanceSettings)===null||re===void 0?void 0:re.formats)===null||oe===void 0?void 0:oe.find(function(le){return le.mediaLocator===Te.src});ze!=null&&ze.liveDelay&&!(!((W=this.instanceSettings.mediaInfo)===null||W===void 0)&&W.lowLatency)&&(Ue.streaming.delay.liveDelay=ze.liveDelay/1e3,Ue.streaming.delay.useSuggestedPresentationDelay=!1),this.mediaPlayer.updateSettings(Ue)}},{key:"setLicense",value:function(re,oe){var W;if(re&&oe){var Te=oe[re];if(Te&&re){this.keySystem=re;var Ue={};Ue[re]={serverURL:Te.licenseServerUrl,priority:0},!((W=this.instanceSettings.playResponse)===null||W===void 0)&&W.playToken&&(Ue[re].httpRequestHeaders={authorization:"Bearer ".concat(this.instanceSettings.playResponse.playToken)},Ue[re].withCredentials=!1),Ue=this.setWidevineSpecifics(Ue),this.mediaPlayer.setProtectionData(Ue)}}}},{key:"setWidevineSpecifics",value:function(re){return re[t.KeySystem.WIDEVINE].videoRobustness="SW_SECURE_CRYPTO",re[t.KeySystem.WIDEVINE].audioRobustness="SW_SECURE_CRYPTO",re}},{key:"getSeekable",value:function(){var re,oe,W=(oe=(re=this.mediaPlayer)===null||re===void 0?void 0:re.getDashMetrics())===null||oe===void 0?void 0:oe.getCurrentDVRInfo("video");return W?W.range:N(C(ne.prototype),"getSeekable",this).call(this)}},{key:"onError",value:function(){}},{key:"onDashJsError",value:function(re){var oe=re.error;this.setPlaybackState(t.PlaybackState.ERROR);var W,Te,Ue,ze=new t.DashJsPlayerError(oe.message,{type:(W=oe.code,Ue=((Te=Object.entries(g.MediaPlayer.errors).find(function(le){return(Se=le,be=2,function(Y){if(Array.isArray(Y))return Y}(Se)||function(Y,Q){var J=Y==null?null:typeof Symbol<"u"&&Y[Symbol.iterator]||Y["@@iterator"];if(J!=null){var fe,Ce,V=[],H=!0,z=!1;try{for(J=J.call(Y);!(H=(fe=J.next()).done)&&(V.push(fe.value),!Q||V.length!==Q);H=!0);}catch(X){z=!0,Ce=X}finally{try{H||J.return==null||J.return()}finally{if(z)throw Ce}}return V}}(Se,be)||E(Se,be)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1]===W;var Se,be}))===null||Te===void 0?void 0:Te[0])||"",Ue.includes("REQUEST")?t.ErrorTypes.NETWORK:Ue.includes("CAPABILITY")?t.ErrorTypes.CODEC:Ue.includes("KEY")?t.ErrorTypes.DRM:Ue.includes("MANIFEST")?t.ErrorTypes.MANIFEST:Ue.includes("FRAGMENT")||Ue.includes("SEGMENT")?t.ErrorTypes.SEGMENT:Ue.includes("MEDIA")?t.ErrorTypes.MEDIA:t.ErrorTypes.OTHER),code:oe.code,rawError:oe});ze&&this.emit(_.EngineEvents.ERROR,ze)}},{key:"handleActiveTextTrack",value:function(re){var oe=this;if(Array.from(this.videoElement.textTracks).forEach(function(Te){Te!==re&&(Te.mode="disabled")}),re){this.activeTrack=re,re.mode="hidden";var W=re.activeCues?Array.from(re.activeCues):[];this.emit(_.EngineEvents.SUBTITLE_CUE_CHANGED,W),re.oncuechange=function(){var Te=re.activeCues?Array.from(re.activeCues):[];oe.emit(_.EngineEvents.SUBTITLE_CUE_CHANGED,Te)}}else this.activeTrack=void 0}},{key:"onTextTracksChange",value:function(){if(!(this.mediaPlayer.getTracksFor("text").length===0&&this.videoElement.textTracks.length>0)){var re=this.getSubtitleTrack();if(this.emit(_.EngineEvents.SUBTITLE_CHANGED,{track:re}),this.emit(_.EngineEvents.SUBTITLE_CUE_CHANGED,[]),re||!this.activeTrack)for(var oe=0,W=this.videoElement.textTracks.length;oe<W;oe++){var Te=this.videoElement.textTracks[oe];re&&Te.mode==="showing"&&this.handleActiveTextTrack(Te)}else this.handleActiveTextTrack(void 0)}}},{key:"getUTCCurrentTime",value:function(){var re,oe;return this.mediaPlayer.isReady()?this.isLive()?(oe=1e3*((re=this.mediaPlayer)===null||re===void 0?void 0:re.timeAsUTC()))!==null&&oe!==void 0?oe:0:N(C(ne.prototype),"getUTCCurrentTime",this).call(this):0}},{key:"getUTCDuration",value:function(){var re,oe;return this.mediaPlayer.isReady()?this.isLive()?(oe=1e3*((re=this.mediaPlayer)===null||re===void 0?void 0:re.durationAsUTC()))!==null&&oe!==void 0?oe:0:N(C(ne.prototype),"getUTCDuration",this).call(this):0}},{key:"getUTCSeekable",value:function(){if(!this.mediaPlayer.isReady())return{start:-1,end:-1};if(this.isLive()){var re=this.getSeekable();return{start:1e3*re.start,end:1e3*re.end}}return N(C(ne.prototype),"getUTCSeekable",this).call(this)}},{key:"setSubtitleTrack",value:function(re){var oe,W;if(re){this.mediaPlayer.isTextEnabled()||(this.mediaPlayer.enableText(!0),this.mediaPlayer.enableForcedTextStreaming(!0),this.mediaPlayer.setTextTrack(-1));var Te=((W=(oe=this.mediaPlayer)===null||oe===void 0?void 0:oe.getTracksFor("text"))!==null&&W!==void 0?W:[]).findIndex(function(Ue){return Ue.id===re.id});this.mediaPlayer.setTextTrack(Te)}else this.mediaPlayer.setTextTrack(-1),this.mediaPlayer.enableText(!1),this.mediaPlayer.enableForcedTextStreaming(!1),this.onTextTracksChange()}},{key:"getSubtitleTrack",value:function(){if(this.mediaPlayer){var re=this.mediaPlayer.getCurrentTrackFor("text");return this.mediaPlayer.isTextEnabled()&&re?b(re):void 0}}},{key:"getSubtitleTracks",value:function(){var re,oe,W;return((W=(oe=(re=this.mediaPlayer)===null||re===void 0?void 0:re.getTracksFor("text"))===null||oe===void 0?void 0:oe.map(function(Te){return b(Te)}))!==null&&W!==void 0?W:[]).filter(function(Te,Ue,ze){return ze.findIndex(function(le){return Te.language===le.language&&Te.label===le.label&&Te.kind===le.kind})===Ue})}},{key:"setAudioTrack",value:function(re){var oe,W,Te=((W=(oe=this.mediaPlayer)===null||oe===void 0?void 0:oe.getTracksFor("audio"))!==null&&W!==void 0?W:[]).find(function(Ue){return Ue.id===re.id});Te&&this.mediaPlayer.setCurrentTrack(Te)}},{key:"getAudioTrack",value:function(){var re,oe=(re=this.mediaPlayer)===null||re===void 0?void 0:re.getCurrentTrackFor("audio");if(oe)return b(oe)}},{key:"getAudioTracks",value:function(){var re,oe,W;return(W=(oe=(re=this.mediaPlayer)===null||re===void 0?void 0:re.getTracksFor("audio"))===null||oe===void 0?void 0:oe.map(function(Te){return b(Te)}))!==null&&W!==void 0?W:[]}},{key:"getQualityLevel",value:function(){var re=this.mediaPlayer.getQualityFor("video");if(re>-1){var oe=this.getQualityLevels().find(function(W){return W.id===re});if(oe)return oe}return N(C(ne.prototype),"getQualityLevel",this).call(this)}},{key:"getQualityLevels",value:function(){var re,oe,W=(oe=(re=this.mediaPlayer)===null||re===void 0?void 0:re.getBitrateInfoListFor("video"))===null||oe===void 0?void 0:oe.map(function(Te,Ue){var ze={id:Ue,bandwidth:Te.bitrate,width:Te.width,height:Te.height};return ze.name=(0,S.getQualityLevelName)(ze),ze});return I(N(C(ne.prototype),"getQualityLevels",this).call(this)).concat(I(W))}},{key:"setQualityLevel",value:function(re){re.id===S.AUTO_QUALITY_LEVEL_DEFINITION.id?this.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}}):(this.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),this.mediaPlayer.setQualityFor("video",re.id,!0))}},{key:"destroy",value:function(){this.mediaPlayer.destroy(),N(C(ne.prototype),"destroy",this).call(this)}}],G&&x(U.prototype,G),ne}(S.AbstractBaseEngine);B.DashJs=P},4223:function(Ee,B,K){function M(v,f){(f==null||f>v.length)&&(f=v.length);for(var b=0,p=new Array(f);b<f;b++)p[b]=v[b];return p}function x(v,f){for(var b=0;b<f.length;b++){var p=f[b];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(v,p.key,p)}}function N(v,f,b){return N=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(p,k,P){var j=function(G,ee){for(;!Object.prototype.hasOwnProperty.call(G,ee)&&(G=C(G))!==null;);return G}(p,k);if(j){var U=Object.getOwnPropertyDescriptor(j,k);return U.get?U.get.call(P||p):U.value}},N(v,f,b||v)}function C(v){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},C(v)}function R(v,f){return R=Object.setPrototypeOf||function(b,p){return b.__proto__=p,b},R(v,f)}function I(v){return function(f){if(Array.isArray(f))return M(f)}(v)||function(f){if(typeof Symbol<"u"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}(v)||function(f,b){if(f){if(typeof f=="string")return M(f,b);var p=Object.prototype.toString.call(f).slice(8,-1);return p==="Object"&&f.constructor&&(p=f.constructor.name),p==="Map"||p==="Set"?Array.from(p):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?M(f,b):void 0}}(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(v){var f=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var b,p=C(v);if(f){var k=C(this).constructor;b=Reflect.construct(p,arguments,k)}else b=p.apply(this,arguments);return function(P,j){return!j||((U=j)&&typeof Symbol<"u"&&U.constructor===Symbol?"symbol":typeof U)!="object"&&typeof j!="function"?function(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}(P):j;var U}(this,b)}}var T=this&&this.__createBinding||(Object.create?function(v,f,b,p){p===void 0&&(p=b);var k=Object.getOwnPropertyDescriptor(f,b);k&&!("get"in k?!f.__esModule:k.writable||k.configurable)||(k={enumerable:!0,get:function(){return f[b]}}),Object.defineProperty(v,p,k)}:function(v,f,b,p){p===void 0&&(p=b),v[p]=f[b]}),l=this&&this.__setModuleDefault||(Object.create?function(v,f){Object.defineProperty(v,"default",{enumerable:!0,value:f})}:function(v,f){v.default=f}),c=this&&this.__importStar||function(v){if(v&&v.__esModule)return v;var f={};if(v!=null)for(var b in v)b!=="default"&&Object.prototype.hasOwnProperty.call(v,b)&&T(f,v,b);return l(f,v),f},h=this&&this.__awaiter||function(v,f,b,p){return new(b||(b=Promise))(function(k,P){var j=function(ee){try{G(p.next(ee))}catch(ne){P(ne)}},U=function(ee){try{G(p.throw(ee))}catch(ne){P(ne)}},G=function(ee){var ne,re,oe;ee.done?k(ee.value):(ne=ee.value,re=ne,((oe=b)!=null&&typeof Symbol<"u"&&oe[Symbol.hasInstance]?oe[Symbol.hasInstance](re):re instanceof oe)?ne:new b(function(W){W(ne)})).then(j,U)};G((p=p.apply(v,f||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.HlsJs=void 0;var y=c(K(8711)),i=K(9327),g=K(9886),d=K(180),r=K(5476),t=K(3820),u=K(5735),m=K(5562);function S(v){var f=v.type,b=v.details;switch(f){case y.ErrorTypes.NETWORK_ERROR:return i.ErrorTypes.NETWORK;case y.ErrorTypes.MEDIA_ERROR:return b!=null&&b.includes("CODEC")?i.ErrorTypes.CODEC:i.ErrorTypes.MEDIA;case y.ErrorTypes.MUX_ERROR:case y.ErrorTypes.OTHER_ERROR:return i.ErrorTypes.PLAYER_ENGINE;default:return i.ErrorTypes.OTHER}}function A(v){var f,b,p=(f=v.attrs)===null||f===void 0?void 0:f.CHARACTERISTICS;return v.type==="AUDIO"&&(b=p?p.includes("accessibility")?"description":"alternative":"main"),["SUBTITLES","CLOSED-CAPTIONS"].includes(v.type)&&(b=v.forced?"forced":p?p.includes("transcribes")||p.includes("describes")?"captions":"":"subtitles"),{id:v.id.toString(),language:v.lang,label:v.name||(0,u.getLabel)(v.lang),raw:v,kind:b}}var _=function(v){(function(P,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(j&&j.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),j&&R(P,j)})(k,v);var f,b,p=E(k);function k(P,j){var U;(function(ne,re){if(!(ne instanceof re))throw new TypeError("Cannot call a class as a function")})(this,k),(U=p.call(this,P,j)).name="Hls.js",U.playertechVersion=y.default.version,U.currentBitrate=0,U.recoveryAttempts=0,U.maxRecoveryAttempts=1;var G={debug:!1,xhrSetup:function(ne,re){(0,g.isLGTV)()&&re.includes("redbee.serverside.ai")&&(re=re.replace("https://","http://")),ne.open("GET",re,!0)}},ee=U.instanceSettings.initOptions.customHlsJsConfiguration||{};return U.hls=new y.default(Object.assign(G,r.HlsJs,ee)),U.hls.subtitleDisplay=!1,U.setupEventListeners(),U}return f=k,(b=[{key:"setupEventListeners",value:function(){N(C(k.prototype),"setupEventListeners",this).call(this),this.hls.on(y.default.Events.FRAG_CHANGED,this.onFragChanged.bind(this)),this.hls.on(y.default.Events.ERROR,this.onHlsError.bind(this)),this.hls.on(y.default.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackChange.bind(this))}},{key:"load",value:function(P){var j=P.src,U=P.license,G=P.startTime,ee=P.audio,ne=P.subtitle,re=this;this.src=j,this.hls.loadSource(j),this.hls.attachMedia(this.videoElement),this.hls.once(y.default.Events.MANIFEST_PARSED,function(){return h(re,void 0,void 0,function(){var oe,W,Te;return function(Ue,ze){var le,Se,be,Y,Q={label:0,sent:function(){if(1&be[0])throw be[1];return be[1]},trys:[],ops:[]};return Y={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(Y[Symbol.iterator]=function(){return this}),Y;function J(fe){return function(Ce){return function(V){if(le)throw new TypeError("Generator is already executing.");for(;Q;)try{if(le=1,Se&&(be=2&V[0]?Se.return:V[0]?Se.throw||((be=Se.return)&&be.call(Se),0):Se.next)&&!(be=be.call(Se,V[1])).done)return be;switch(Se=0,be&&(V=[2&V[0],be.value]),V[0]){case 0:case 1:be=V;break;case 4:return Q.label++,{value:V[1],done:!1};case 5:Q.label++,Se=V[1],V=[0];continue;case 7:V=Q.ops.pop(),Q.trys.pop();continue;default:if(!((be=(be=Q.trys).length>0&&be[be.length-1])||V[0]!==6&&V[0]!==2)){Q=0;continue}if(V[0]===3&&(!be||V[1]>be[0]&&V[1]<be[3])){Q.label=V[1];break}if(V[0]===6&&Q.label<be[1]){Q.label=be[1],be=V;break}if(be&&Q.label<be[2]){Q.label=be[2],Q.ops.push(V);break}be[2]&&Q.ops.pop(),Q.trys.pop();continue}V=ze.call(Ue,Q)}catch(H){V=[6,H],Se=0}finally{le=be=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([fe,Ce])}}}(this,function(Ue){switch(Ue.label){case 0:return Te=(W=this).setResolutionAndBitrateRestrictions,[4,(0,m.getResolutionAndBitrateRestrictions)((oe=this.instanceSettings.playResponse)===null||oe===void 0?void 0:oe.contractRestrictions)];case 1:return Te.apply(W,[Ue.sent()]),this.setContentSpecificConfiguration(),this.hls.startLoad(G===void 0?-1:Math.floor(G)),[2]}})})}),N(C(k.prototype),"load",this).call(this,{src:j,license:U,startTime:G,audio:ee,subtitle:ne})}},{key:"stop",value:function(){this.hls.detachMedia(),this.setPlaybackState(i.PlaybackState.IDLE)}},{key:"isLive",value:function(){return this.videoElement.duration===1/0}},{key:"isAtLiveEdge",value:function(){return this.hls.liveSyncPosition!==null&&this.getCurrentTime()>=this.hls.liveSyncPosition-6}},{key:"setResolutionAndBitrateRestrictions",value:function(P){var j=P.minBitrate,U=P.maxBitrate,G=P.maxResHeight,ee=this;if(j||U||G){var ne=this.hls.levels,re=[];for(var oe in ne){var W=ne[oe];(j&&W.bitrate<j||U&&W.bitrate>U||G&&W.height>G)&&re.push(oe)}re.sort().reverse().forEach(function(Te){ee.hls.removeLevel(Number(Te))})}}},{key:"setContentSpecificConfiguration",value:function(){var P=this;if(this.instanceSettings.mediaInfo&&this.instanceSettings.formats&&this.instanceSettings.mediaInfo.isLive){var j=this.instanceSettings.formats.find(function(U){return U.mediaLocator===P.src});j!=null&&j.liveDelay&&(this.hls.config.liveSyncDuration=j.liveDelay/1e3)}}},{key:"setQualityLevel",value:function(P){this.hls.nextLevel=P.id,this.hls.loadLevel=P.id}},{key:"getQualityLevel",value:function(){var P=this.hls.levels[this.hls.currentLevel];if(P){var j=this.getQualityLevels().find(function(U){return U.bandwidth===P.bitrate});if(j)return j}return N(C(k.prototype),"getQualityLevel",this).call(this)}},{key:"getQualityLevels",value:function(){var P=this;if(!this.hls.levels||!Array.isArray(this.hls.levels))return[];var j=this.hls.levels.map(function(U){var G=P.hls.levels.findIndex(function(re){return re.bitrate===U.bitrate}),ee=U.attrs["FRAME-RATE"],ne={id:G,bandwidth:U.bitrate,width:U.width,height:U.height,framerate:ee?parseInt(ee,10):void 0};return ne.name=(0,d.getQualityLevelName)(ne),ne});return I(N(C(k.prototype),"getQualityLevels",this).call(this)).concat(I(j))}},{key:"setSubtitleTrack",value:function(P){var j=this.hls.subtitleTracks.findIndex(function(U){return P&&U.id===Number(P.id)});this.hls.subtitleDisplay=j!==-1,this.hls.subtitleTrack=-1,this.hls.subtitleTrack=j,Array.from(this.videoElement.textTracks||[]).forEach(function(U){U.mode==="showing"&&(U.mode="hidden")})}},{key:"getSubtitleTrack",value:function(){if(this.hls.subtitleTrack!==-1&&this.hls.subtitleDisplay){var P=this.hls.subtitleTracks[this.hls.subtitleTrack];if(P)return A(P)}}},{key:"getSubtitleTracks",value:function(){return this.hls.subtitleTracks.map(function(P){return A(P)}).filter(function(P,j,U){return U.findIndex(function(G){return P.language===G.language&&P.id===G.id&&P.kind===G.kind})===j})}},{key:"setAudioTrack",value:function(P){if(P){var j=this.hls.audioTracks.find(function(U){return Number(U.id)===Number(P.id)});j&&(this.hls.audioTrack=Number(j.id))}}},{key:"getAudioTrack",value:function(){var P=this,j=this.hls.audioTracks.find(function(U){return U.id===P.hls.audioTrack});if(j)return A(j)}},{key:"getAudioTracks",value:function(){var P=this,j=this.hls.audioTracks.find(function(U){return U.id===P.hls.audioTrack});return this.hls.audioTracks.filter(function(U){return U.groupId===(j==null?void 0:j.groupId)}).map(function(U){return A(U)}).filter(function(U,G,ee){return ee.findIndex(function(ne){return U.language===ne.language&&U.kind===ne.kind&&U.label===ne.label})===G})}},{key:"onFragChanged",value:function(P,j){var U=this,G=j.frag.tagList,ee=this.hls.levels[j.frag.level],ne=ee.bitrate;ne!==this.currentBitrate&&(this.emit(t.EngineEvents.BITRATE_CHANGED,{bitrate:ne,width:ee.width,height:ee.height}),this.currentBitrate=ne),!this.utcStartTime&&j.frag.programDateTime&&this.setUTCStartTime(j.frag.programDateTime-1e3*j.frag.start),G&&G.forEach(function(re){if(re.includes("EXT-X-DATERANGE")){var oe={event:re,engineName:"Hls.js",engineVersion:y.default.version};U.emit(t.EngineEvents.METADATA_EVENT,oe)}})}},{key:"onHlsError",value:function(P,j){if(j.fatal){var U=new i.HlsJsPlayerError(j.details,{type:S(j)});if(this.recoveryAttempts>=this.maxRecoveryAttempts)return void this.emit(t.EngineEvents.ERROR,U);switch(this.recoveryAttempts+=1,j.type){case y.default.ErrorTypes.NETWORK_ERROR:console.warn("fatal network error encountered, try to recover"),this.hls.startLoad(this.getCurrentTime());break;case y.default.ErrorTypes.MEDIA_ERROR:console.warn("fatal media error encountered, try to recover"),this.hls.recoverMediaError();break;default:this.emit(t.EngineEvents.ERROR,U)}}}},{key:"onError",value:function(){}},{key:"getSeekable",value:function(){return N(C(k.prototype),"getSeekable",this).call(this)}},{key:"seekTo",value:function(P){N(C(k.prototype),"seekTo",this).call(this,Math.round(P))}},{key:"seekToLive",value:function(){var P=this.hls.liveSyncPosition;P&&(this.videoElement.currentTime=P)}},{key:"destroy",value:function(){this.hls&&this.hls.destroy(),N(C(k.prototype),"destroy",this).call(this)}}])&&x(f.prototype,b),k}(d.AbstractBaseEngine);B.HlsJs=_},8613:function(Ee,B,K){function M(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t,u){for(var m=0;m<u.length;m++){var S=u[m];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(t,S.key,S)}}function N(t,u,m){return N=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(S,A,_){var v=function(b,p){for(;!Object.prototype.hasOwnProperty.call(b,p)&&(b=C(b))!==null;);return b}(S,A);if(v){var f=Object.getOwnPropertyDescriptor(v,A);return f.get?f.get.call(_||S):f.value}},N(t,u,m||t)}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},C(t)}function R(t,u){return R=Object.setPrototypeOf||function(m,S){return m.__proto__=S,m},R(t,u)}function I(t){var u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var m,S=C(t);if(u){var A=C(this).constructor;m=Reflect.construct(S,arguments,A)}else m=S.apply(this,arguments);return function(_,v){return!v||((f=v)&&typeof Symbol<"u"&&f.constructor===Symbol?"symbol":typeof f)!="object"&&typeof v!="function"?M(_):v;var f}(this,m)}}function E(t,u){var m,S,A,_,v={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return _={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function f(b){return function(p){return function(k){if(m)throw new TypeError("Generator is already executing.");for(;v;)try{if(m=1,S&&(A=2&k[0]?S.return:k[0]?S.throw||((A=S.return)&&A.call(S),0):S.next)&&!(A=A.call(S,k[1])).done)return A;switch(S=0,A&&(k=[2&k[0],A.value]),k[0]){case 0:case 1:A=k;break;case 4:return v.label++,{value:k[1],done:!1};case 5:v.label++,S=k[1],k=[0];continue;case 7:k=v.ops.pop(),v.trys.pop();continue;default:if(!((A=(A=v.trys).length>0&&A[A.length-1])||k[0]!==6&&k[0]!==2)){v=0;continue}if(k[0]===3&&(!A||k[1]>A[0]&&k[1]<A[3])){v.label=k[1];break}if(k[0]===6&&v.label<A[1]){v.label=A[1],A=k;break}if(A&&v.label<A[2]){v.label=A[2],v.ops.push(k);break}A[2]&&v.ops.pop(),v.trys.pop();continue}k=u.call(t,v)}catch(P){k=[6,P],S=0}finally{m=A=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([b,p])}}}var T=this&&this.__awaiter||function(t,u,m,S){return new(m||(m=Promise))(function(A,_){var v=function(p){try{b(S.next(p))}catch(k){_(k)}},f=function(p){try{b(S.throw(p))}catch(k){_(k)}},b=function(p){var k,P,j;p.done?A(p.value):(k=p.value,P=k,((j=m)!=null&&typeof Symbol<"u"&&j[Symbol.hasInstance]?j[Symbol.hasInstance](P):P instanceof j)?k:new m(function(U){U(k)})).then(v,f)};b((S=S.apply(t,u||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.Native=void 0;var l=K(9082),c=K(9327),h=K(574),y=K(180),i=K(3820),g=K(7581),d=K(2479),r=function(t){(function(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),v&&R(_,v)})(A,t);var u,m,S=I(A);function A(_,v){var f,b,p;return function(k,P){if(!(k instanceof P))throw new TypeError("Cannot call a class as a function")}(this,A),(f=S.call(this,_,v)).name="Native HTML Video",f.playertechVersion="N/A",f.instanceSettings=v,f.authToken=(p=(b=v.playResponse)===null||b===void 0?void 0:b.playToken)!==null&&p!==void 0?p:v.initOptions.playToken,f.onNeedKey=f.onNeedKey.bind(M(f)),f.onKeyMessage=f.onKeyMessage.bind(M(f)),f.onKeyAdded=f.onKeyAdded.bind(M(f)),f.onKeyError=f.onKeyError.bind(M(f)),f.videoElement.setAttribute("playsinline",""),f.setupEventListeners(),f}return u=A,m=[{key:"_load",value:function(_){var v,f=_.src,b=_.license,p=_.startTime,k=_.audio,P=_.subtitle,j=this,U=Object.create(null,{load:{get:function(){return N(C(A.prototype),"load",j)}}});return T(this,void 0,void 0,function(){var G,ee,ne,re;return E(this,function(oe){if(G=this,ee={load:U.load.bind(this)},b==null?void 0:b["com.apple.fps"])this.drmInfo=b["com.apple.fps"],re=new URL(this.drmInfo.licenseServerUrl),this.contentId=(v=re.searchParams.get("contentId"))!==null&&v!==void 0?v:void 0,ne=this.initDrmSetup();else{if(b)throw new Error("Unsupported drm type");ne=Promise.resolve()}return[2,ne.then(function(){G.videoElement.src=f,G.videoElement.load(),G.videoElement.textTracks.addEventListener("addtrack",function(W){var Te=W.track;Te&&Te.kind==="metadata"&&(Te.mode="hidden",Te.addEventListener("cuechange",function(Ue){return T(G,void 0,void 0,function(){var ze;return E(this,function(le){return ze={event:Ue,engineName:"Native HTML Video"},this.emit(i.EngineEvents.METADATA_EVENT,ze),[2]})})}))}),G.once(i.EngineEvents.LOADED,function(){return T(G,void 0,void 0,function(){var W,Te,Ue,ze;return E(this,function(le){switch(le.label){case 0:return(Ue=(Te=(W=this.videoElement).getStartDate)===null||Te===void 0?void 0:Te.call(W))&&!isNaN(Ue.getTime())&&this.setUTCStartTime(Ue.getTime()),p&&(this.videoElement.currentTime=p),f.includes(".m3u8")?(ze=this,[4,(0,g.getPlaylists)(f)]):[3,2];case 1:ze.playlists=le.sent(),this.startBitratePoll(),le.label=2;case 2:return[2]}})})}),ee.load({src:f,license:b,startTime:p,audio:k,subtitle:P})})]})})}},{key:"load",value:function(_){this._load(_)}},{key:"onSeeking",value:function(){if(this.isSeekDisabled){var _=this.videoElement.currentTime-this.supposedCurrentTime;Math.abs(_)>.01&&this.seekTo(this.supposedCurrentTime)}else N(C(A.prototype),"onSeeking",this).call(this)}},{key:"initDrmSetup",value:function(){return T(this,void 0,void 0,function(){var _;return E(this,function(v){switch(v.label){case 0:return this.addVideoEventListener("webkitneedkey",this.onNeedKey),_=this,[4,this.getCertificate()];case 1:return _.certificate=v.sent(),[2]}})})}},{key:"getCertificate",value:function(){var _;return T(this,void 0,void 0,function(){var v,f;return E(this,function(b){switch(b.label){case 0:if(this.emit(i.EngineEvents.DRM_UPDATE,"FAIRPLAY_CERTIFICATE_REQUEST"),!(v=(_=this.drmInfo)===null||_===void 0?void 0:_.certificateUrl))return[2,Promise.reject(new c.PlayerError("Missing Fairplay certificate url",{type:c.ErrorTypes.DRM}))];b.label=1;case 1:return b.trys.push([1,4,,5]),[4,fetch(v,{method:"GET",headers:{Pragma:"Cache-Control: no-cache","Cache-Control":"max-age=0"}})];case 2:return[4,b.sent().arrayBuffer()];case 3:return f=b.sent(),[2,new Uint8Array(f)];case 4:throw b.sent(),new c.PlayerError("The Fairplay certificate could not be fetched",{type:c.ErrorTypes.DRM});case 5:return[2]}})})}},{key:"getLicense",value:function(_){var v;return T(this,void 0,void 0,function(){var f,b,p,k,P,j;return E(this,function(U){switch(U.label){case 0:if(this.emit(i.EngineEvents.DRM_UPDATE,"FAIRPLAY_LICENSE_REQUEST"),!(f=(v=this.drmInfo)===null||v===void 0?void 0:v.licenseServerUrl))return[2,Promise.reject(new c.PlayerError("Missing Fairplay license url",{type:c.ErrorTypes.DRM}))];U.label=1;case 1:return U.trys.push([1,4,,5]),b=_.target,p=_.message,b?[4,fetch(f,{method:"POST",headers:{"Content-Type":"application/octet-stream",Authorization:"Bearer ".concat(this.authToken)},body:p})]:[2,Promise.reject(new c.PlayerError("MediaKeySession not found",{type:c.ErrorTypes.DRM}))];case 2:if(!(k=U.sent()).ok)throw new c.PlayerError("The Fairplay license could not be fetched",{type:c.ErrorTypes.DRM});return[4,k.arrayBuffer()];case 3:return P=U.sent(),j=new Uint8Array(P),b.update(j),this.emit(i.EngineEvents.DRM_UPDATE,"FAIRPLAY_LICENSE_RESPONSE"),[2,b];case 4:throw U.sent(),new c.PlayerError("The Fairplay license could not be fetched",{type:c.ErrorTypes.DRM});case 5:return[2]}})})}},{key:"concatInitDataIdAndCertificate",value:function(_,v,f){typeof v=="string"&&(v=(0,c.stringToArray)(v));var b=0,p=new ArrayBuffer(_.byteLength+4+v.byteLength+4+f.byteLength),k=new DataView(p);new Uint8Array(p,b,_.byteLength).set(_),b+=_.byteLength,k.setUint32(b,v.byteLength,!0),b+=4;var P=new Uint16Array(p,b,v.length);return P.set(v),b+=P.byteLength,k.setUint32(b,f.byteLength,!0),b+=4,new Uint8Array(p,b,f.byteLength).set(f),new Uint8Array(p,0,p.byteLength)}},{key:"setupSession",value:function(_,v){return this.videoElement.webkitKeys||this.videoElement.webkitSetMediaKeys(new WebKitMediaKeys(_)),this.videoElement.webkitKeys.createSession("video/mp4",v)}},{key:"onNeedKey",value:function(_){var v;if(!((v=this.drmInfo)===null||v===void 0)&&v.licenseServerUrl){var f=(0,c.arrayToString)(_.initData);if(f.includes("KID=")&&(this.contentId=f.substring(f.indexOf("KID=")+4)),f.includes("skd://")&&f.includes(".")&&!f.startsWith(".")){var b=f.split("skd://");if((0,l.parseURL)(b[1])){var p="https://".concat(b[1]);this.drmInfo.licenseServerUrl=p;var k=new URL(this.drmInfo.licenseServerUrl),P=Object.fromEntries(k.searchParams.entries()).contentId;this.contentId=P||this.contentId}}var j=this.contentId;if(!j||!this.certificate)throw"Could not create initData, contentId & certificate missing";var U=this.concatInitDataIdAndCertificate(_.initData,j,this.certificate);if(this.keySession=this.setupSession(c.KeySystem.FAIRPLAY,U),this.keySession.contentId=j,!this.keySession)throw"Could not create key session";this.keySession.addEventListener("webkitkeyadded",this.onKeyAdded,this.keySession),this.keySession.addEventListener("webkitkeyerror",this.onKeyError,this.keySession),this.keySession.addEventListener("webkitkeymessage",this.onKeyMessage,!1)}}},{key:"onKeyMessage",value:function(_){var v=this;this.getLicense(_).then(function(f){(0,h.debug)("[Native] everything is well",f)}).catch(function(f){v.emit(i.EngineEvents.ERROR,f)})}},{key:"onKeyError",value:function(){var _=(0,d.convertMediaKeyError)(this.keySession);this.emit(i.EngineEvents.ERROR,_)}},{key:"onKeyAdded",value:function(_){(0,h.debug)("[Native] Decryption key was added to session.",_)}},{key:"startBitratePoll",value:function(){var _,v=this;!((_=this.playlists)===null||_===void 0)&&_.length&&(this.bitrateInterval=window.setInterval(function(){var f;if(!((f=v.playlists)===null||f===void 0)&&f.length){var b=v.videoElement.videoWidth,p=v.videoElement.videoHeight,k=v.playlists.find(function(P){return P.width===b&&P.height===p});k&&k.bitrate!==v.currentBitrate&&(v.currentBitrate=k.bitrate,v.emit(i.EngineEvents.BITRATE_CHANGED,{bitrate:k.bitrate,width:k.width,height:k.height}))}},1e4))}},{key:"setQualityLevel",value:function(){}},{key:"stopBitratePoll",value:function(){clearInterval(this.bitrateInterval)}},{key:"onError",value:function(_){if(this.stopBitratePoll(),_){var v=(0,d.convertError)(_);v&&this.emit(i.EngineEvents.ERROR,v)}}},{key:"destroy",value:function(){this.stopBitratePoll(),this.keySession&&(this.keySession.close(),this.keySession=null),this.videoElement.removeAttribute("playsinline"),N(C(A.prototype),"destroy",this).call(this)}}],m&&x(u.prototype,m),A}(y.AbstractBaseEngine);B.Native=r},6953:function(Ee,B,K){function M(b,p){(p==null||p>b.length)&&(p=b.length);for(var k=0,P=new Array(p);k<p;k++)P[k]=b[k];return P}function x(b,p){for(var k=0;k<p.length;k++){var P=p[k];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,P.key,P)}}function N(b,p,k){return p in b?Object.defineProperty(b,p,{value:k,enumerable:!0,configurable:!0,writable:!0}):b[p]=k,b}function C(b,p,k){return C=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(P,j,U){var G=function(ne,re){for(;!Object.prototype.hasOwnProperty.call(ne,re)&&(ne=R(ne))!==null;);return ne}(P,j);if(G){var ee=Object.getOwnPropertyDescriptor(G,j);return ee.get?ee.get.call(U||P):ee.value}},C(b,p,k||b)}function R(b){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)},R(b)}function I(b,p){return I=Object.setPrototypeOf||function(k,P){return k.__proto__=P,k},I(b,p)}function E(b){return function(p){if(Array.isArray(p))return M(p)}(b)||function(p){if(typeof Symbol<"u"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}(b)||function(p,k){if(p){if(typeof p=="string")return M(p,k);var P=Object.prototype.toString.call(p).slice(8,-1);return P==="Object"&&p.constructor&&(P=p.constructor.name),P==="Map"||P==="Set"?Array.from(P):P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P)?M(p,k):void 0}}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(b){var p=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var k,P=R(b);if(p){var j=R(this).constructor;k=Reflect.construct(P,arguments,j)}else k=P.apply(this,arguments);return function(U,G){return!G||((ee=G)&&typeof Symbol<"u"&&ee.constructor===Symbol?"symbol":typeof ee)!="object"&&typeof G!="function"?function(ne){if(ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}(U):G;var ee}(this,k)}}var l=this&&this.__awaiter||function(b,p,k,P){return new(k||(k=Promise))(function(j,U){var G=function(re){try{ne(P.next(re))}catch(oe){U(oe)}},ee=function(re){try{ne(P.throw(re))}catch(oe){U(oe)}},ne=function(re){var oe,W,Te;re.done?j(re.value):(oe=re.value,W=oe,((Te=k)!=null&&typeof Symbol<"u"&&Te[Symbol.hasInstance]?Te[Symbol.hasInstance](W):W instanceof Te)?oe:new k(function(Ue){Ue(oe)})).then(G,ee)};ne((P=P.apply(b,p||[])).next())})},c=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(B,"__esModule",{value:!0}),B.Shaka=void 0;var h=c(K(1344)),y=c(K(3602)),i=K(9327),g=K(180),d=K(5476),r=K(3820),t=K(5735),u=K(5562),m=K(3989),S=K(549);function A(b){var p,k,P=b.label||(0,t.getLabel)(b.language);return b.type==="variant"?k=(0,g.getAudioKind)((p=b.audioRoles)!==null&&p!==void 0?p:[]):b.type==="text"&&(k=(0,g.getTextKind)(b.roles)),{id:"".concat(b.language," - ").concat(P),language:b.language,kind:k,label:P,raw:b}}var _=new RegExp(/hev1|hvc1/),v=!1,f=function(b){(function(U,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(G&&G.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),G&&I(U,G)})(j,b);var p,k,P=T(j);function j(U,G){var ee;return function(ne,re){if(!(ne instanceof re))throw new TypeError("Cannot call a class as a function")}(this,j),(ee=P.call(this,U,G)).name="Shaka Player",ee.playertechVersion=y.default.Player.version,ee.utcTimeIsSet=!1,ee.recoveryAttempts=0,y.default.polyfill.installAll(),ee.shakaPlayer=new y.default.Player(U),ee.instanceSettings=G,ee.subtitle={language:void 0,kind:void 0},ee.audio={language:void 0,kind:void 0},ee.setupEventListeners(),ee}return p=j,k=[{key:"setupEventListeners",value:function(){var U=this;C(R(j.prototype),"setupEventListeners",this).call(this);var G=this.shakaPlayer.getNetworkingEngine();G==null||G.registerRequestFilter(function(ee){var ne;if(ee===y.default.net.NetworkingEngine.RequestType.LICENSE)switch((ne=U.shakaPlayer.drmInfo())===null||ne===void 0?void 0:ne.keySystem){case i.KeySystem.PLAYREADY:case i.KeySystem.PLAYREADY_CHROMECAST:U.emit(r.EngineEvents.DRM_UPDATE,"PLAYREADY_LICENSE_REQUEST");break;case i.KeySystem.WIDEVINE:U.emit(r.EngineEvents.DRM_UPDATE,"WIDEVINE_LICENSE_REQUEST");break;case i.KeySystem.FAIRPLAY:U.emit(r.EngineEvents.DRM_UPDATE,"FAIRPLAY_LICENSE_REQUEST")}}),G==null||G.registerResponseFilter(function(ee){var ne;if(ee===y.default.net.NetworkingEngine.RequestType.LICENSE)switch((ne=U.shakaPlayer.drmInfo())===null||ne===void 0?void 0:ne.keySystem){case i.KeySystem.PLAYREADY:case i.KeySystem.PLAYREADY_CHROMECAST:U.emit(r.EngineEvents.DRM_UPDATE,"PLAYREADY_LICENSE_RESPONSE");break;case i.KeySystem.WIDEVINE:U.emit(r.EngineEvents.DRM_UPDATE,"WIDEVINE_LICENSE_RESPONSE");break;case i.KeySystem.FAIRPLAY:U.emit(r.EngineEvents.DRM_UPDATE,"FAIRPLAY_LICENSE_RESPONSE")}}),this.shakaPlayer.addEventListener("adaptation",function(){var ee,ne,re=U.shakaPlayer.getVariantTracks().filter(function(Te){return Te.active});if(re.length){var oe=re.reduce(function(Te,Ue){return Te+Ue.bandwidth},0),W=re.find(function(Te){return Te.type==="variant"});W&&U.emit(r.EngineEvents.BITRATE_CHANGED,{bitrate:oe,width:(ee=W.width)!==null&&ee!==void 0?ee:-1,height:(ne=W.height)!==null&&ne!==void 0?ne:-1})}}),this.shakaPlayer.addEventListener("error",function(ee){U.handleError(ee.detail)}),this.shakaPlayer.addEventListener("trackschanged",this.onTracksChange.bind(this)),this.shakaPlayer.addEventListener("timelineregionenter",function(ee){var ne,re=(ne=U.instanceSettings.initOptions)===null||ne===void 0?void 0:ne.metadataURIs,oe={event:[],engineName:"Shaka Player",engineVersion:y.default.Player.version};re!=null&&re.length?re.forEach(function(W){W===ee.detail.schemeIdUri&&(oe.event=ee,U.emit(r.EngineEvents.METADATA_EVENT,oe))}):re&&(oe.event=ee,U.emit(r.EngineEvents.METADATA_EVENT,oe))})}},{key:"convertToUTCTime",value:function(U){var G=this.shakaPlayer.getPresentationStartTimeAsDate();return this.isLive()&&G?1e3*(U+=G.getTime()/1e3):this.utcTimeIsSet?C(R(j.prototype),"convertToUTCTime",this).call(this,U):-1}},{key:"_load",value:function(U){var G,ee,ne,re,oe=U.src,W=U.license,Te=U.startTime,Ue=U.audio,ze=U.subtitle,le=this,Se=Object.create(null,{load:{get:function(){return C(R(j.prototype),"load",le)}}});return l(this,void 0,void 0,function(){var be,Y,Q,J,fe;return function(Ce,V){var H,z,X,de,ge={label:0,sent:function(){if(1&X[0])throw X[1];return X[1]},trys:[],ops:[]};return de={next:Ge(0),throw:Ge(1),return:Ge(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function Ge(it){return function(Ye){return function(Ke){if(H)throw new TypeError("Generator is already executing.");for(;ge;)try{if(H=1,z&&(X=2&Ke[0]?z.return:Ke[0]?z.throw||((X=z.return)&&X.call(z),0):z.next)&&!(X=X.call(z,Ke[1])).done)return X;switch(z=0,X&&(Ke=[2&Ke[0],X.value]),Ke[0]){case 0:case 1:X=Ke;break;case 4:return ge.label++,{value:Ke[1],done:!1};case 5:ge.label++,z=Ke[1],Ke=[0];continue;case 7:Ke=ge.ops.pop(),ge.trys.pop();continue;default:if(!((X=(X=ge.trys).length>0&&X[X.length-1])||Ke[0]!==6&&Ke[0]!==2)){ge=0;continue}if(Ke[0]===3&&(!X||Ke[1]>X[0]&&Ke[1]<X[3])){ge.label=Ke[1];break}if(Ke[0]===6&&ge.label<X[1]){ge.label=X[1],X=Ke;break}if(X&&ge.label<X[2]){ge.label=X[2],ge.ops.push(Ke);break}X[2]&&ge.ops.pop(),ge.trys.pop();continue}Ke=V.call(Ce,ge)}catch(dt){Ke=[6,dt],z=0}finally{H=X=0}if(5&Ke[0])throw Ke[1];return{value:Ke[0]?Ke[1]:void 0,done:!0}}([it,Ye])}}}(this,function(Ce){switch(Ce.label){case 0:return be=this,this.startTime=Te,Y=this.instanceSettings.initOptions.customShakaConfiguration||{},Q=(0,h.default)({},d.Shaka,Y),!((G=this.instanceSettings.mediaInfo)===null||G===void 0)&&G.isLive&&(0,h.default)(Q,d.ShakaLive),Q.textDisplayFactory=function(){return new m.ShakaCustomTextDisplayer(be.videoElement)},this.src=oe,this.setLicense(this.instanceSettings.supportedKeySystem,W),this.shakaPlayer.configure(Q),fe=(J=this).setResolutionAndBitrateRestrictions,[4,(0,u.getResolutionAndBitrateRestrictions)((ee=this.instanceSettings.playResponse)===null||ee===void 0?void 0:ee.contractRestrictions)];case 1:return fe.apply(J,[Ce.sent()]),this.setContentSpecificConfiguration(),this.setContextSpecificConfiguration(),this.setPlaybackState(i.PlaybackState.LOADING),Ue!=null&&Ue.language&&(this.audio={language:Ue.language,kind:Ue.kind},this.shakaPlayer.configure("preferredAudioLanguage",Ue.language),!((ne=this.audio)===null||ne===void 0)&&ne.kind&&this.shakaPlayer.configure("preferredVariantRole",(0,g.getDashAudioKind)(this.audio.kind))),ze!=null&&ze.language&&(this.subtitle={language:ze.language,kind:ze.kind},this.shakaPlayer.configure("preferredTextLanguage",ze.language),!((re=this.subtitle)===null||re===void 0)&&re.kind&&this.shakaPlayer.configure("preferredTextRole",(0,g.getDashTextKind)(this.subtitle.kind))),this.shakaPlayer.load(oe,Te).then(function(){Se.load.call(be,{src:oe,license:W,startTime:Te})}).catch(function(V){throw be.handleError(V),(0,S.convertError)(V)}),[2]}})})}},{key:"load",value:function(U){this._load(U)}},{key:"setPreferredLanguages",value:function(){}},{key:"stop",value:function(){this.shakaPlayer.getLoadMode()!==y.default.Player.LoadMode.DESTROYED&&this.shakaPlayer.unload(),C(R(j.prototype),"stop",this).call(this)}},{key:"isLive",value:function(){return this.shakaPlayer.isLive()}},{key:"addSubtitleEvents",value:function(){this.shakaPlayer.addEventListener("textchanged",this.onTextTracksChange.bind(this))}},{key:"addAudioTrackEvents",value:function(){this.shakaPlayer.addEventListener("variantchanged",this.onAudioTrackChange.bind(this))}},{key:"getSeekable",value:function(){var U=this.shakaPlayer.seekRange();return{start:U.start,end:U.end}}},{key:"getUTCSeekable",value:function(){var U=this.shakaPlayer.seekRange();return{start:this.convertToUTCTime(U.start),end:this.convertToUTCTime(U.end)}}},{key:"setLicense",value:function(U,G){G&&(U===i.KeySystem.WIDEVINE?this.setWidevine(G):U===i.KeySystem.PLAYREADY&&this.setPlayready(G))}},{key:"setPlayready",value:function(U){var G=U[i.KeySystem.PLAYREADY];G&&this.shakaPlayer.configure({drm:{servers:N({},i.KeySystem.PLAYREADY,G.licenseServerUrl)}})}},{key:"setWidevine",value:function(U){var G=U[i.KeySystem.WIDEVINE];G&&this.shakaPlayer.configure({drm:{servers:N({},i.KeySystem.WIDEVINE,G.licenseServerUrl),advanced:N({},i.KeySystem.WIDEVINE,{videoRobustness:"SW_SECURE_CRYPTO",audioRobustness:"SW_SECURE_CRYPTO"})}})}},{key:"setResolutionAndBitrateRestrictions",value:function(U){var G=U.minBitrate,ee=U.maxBitrate,ne=U.maxResHeight;(G||ee||ne)&&this.shakaPlayer.configure({restrictions:Object.assign(Object.assign(Object.assign({},G&&{minBandwidth:G}),ee&&{maxBandwidth:ee}),ne&&{maxHeight:ne})})}},{key:"setContentSpecificConfiguration",value:function(){var U=this;if(this.instanceSettings.mediaInfo&&this.instanceSettings.formats&&this.instanceSettings.mediaInfo.isLive){var G=this.instanceSettings.formats.find(function(ee){return ee.mediaLocator===U.src});G!=null&&G.liveDelay&&this.shakaPlayer.configure({manifest:{defaultPresentationDelay:G.liveDelay/1e3}})}}},{key:"setContextSpecificConfiguration",value:function(){window.ResizeObserver&&(this.resizeObserver=new ResizeObserver((0,i.debounce)(this.capLevelToPlayerSize.bind(this))),this.resizeObserver.observe(this.videoElement))}},{key:"capLevelToPlayerSize",value:function(){var U,G,ee,ne,re,oe;if(this.shakaPlayer){var W=(G=(U=this.instanceSettings.playResponse)===null||U===void 0?void 0:U.contractRestrictions)===null||G===void 0?void 0:G.maxResHeight,Te=(re=(ne=(ee=this.shakaPlayer.getConfiguration())===null||ee===void 0?void 0:ee.abr)===null||ne===void 0?void 0:ne.restrictions)===null||re===void 0?void 0:re.maxWidth,Ue=this.videoElement.clientWidth,ze=((oe=[{min:0,max:1280,value:1280},{min:1281,max:1920,value:1920}].find(function(Se){return Se.min<=Ue&&Se.max>=Ue}))===null||oe===void 0?void 0:oe.value)||1/0;if(ze!==Te){if(W){var le=this.getQualityLevels().sort(function(Se,be){return be.width-Se.width}).find(function(Se){return Se.width<=ze&&Se.height<=W});le&&(ze=le.width)}this.shakaPlayer.configure({abr:{restrictions:{maxWidth:ze}}})}}}},{key:"setQualityLevel",value:function(U){var G=this.shakaPlayer.getVariantTracks().find(function(ee){return ee.id===U.id});G?(this.shakaPlayer.configure({abr:{enabled:!1}}),this.shakaPlayer.selectVariantTrack(G,!0,10),this.emit(r.EngineEvents.BITRATE_CHANGED,{bitrate:U.bandwidth,width:U.width,height:U.height})):this.shakaPlayer.configure({abr:{enabled:!0}})}},{key:"getQualityLevel",value:function(){var U,G,ee,ne=this.shakaPlayer.getVariantTracks().find(function(re){return re.active});return ne?{id:ne.id,bandwidth:ne.bandwidth,width:(U=ne.width)!==null&&U!==void 0?U:-1,height:(G=ne.height)!==null&&G!==void 0?G:-1,framerate:(ee=ne.frameRate)!==null&&ee!==void 0?ee:void 0}:C(R(j.prototype),"getQualityLevel",this).call(this)}},{key:"getQualityLevels",value:function(){var U;if(!((U=this.instanceSettings.loadOptions)===null||U===void 0)&&U.audioOnly)return[];if(!this.shakaPlayer.getVariantTracks()||!Array.isArray(this.shakaPlayer.getVariantTracks()))return[];var G=this.shakaPlayer.getVariantTracks().find(function(ne){return ne.active}),ee=this.shakaPlayer.getVariantTracks().filter(function(ne){return ne.audioId===(G==null?void 0:G.audioId)&&ne.audioBandwidth===(G==null?void 0:G.audioBandwidth)}).map(function(ne){var re,oe,W,Te={id:ne.id,bandwidth:ne.bandwidth,width:(re=ne.width)!==null&&re!==void 0?re:-1,height:(oe=ne.height)!==null&&oe!==void 0?oe:-1,framerate:(W=ne.frameRate)!==null&&W!==void 0?W:void 0};return Te.name=(0,g.getQualityLevelName)(Te),Te});return E(C(R(j.prototype),"getQualityLevels",this).call(this)).concat(E(ee))}},{key:"setInternalSubtitle",value:function(U){this.subtitle=U}},{key:"setInternalAudio",value:function(U){this.audio.language=U.language,this.audio.kind=U.kind}},{key:"setSubtitleTrack",value:function(U){if(this.shakaPlayer.setTextTrackVisibility(!1),U){var G=this.shakaPlayer.getTextTracks().find(function(ee){var ne;return((ne=A(ee))===null||ne===void 0?void 0:ne.id)===U.id});if(!G)return;this.setInternalSubtitle({language:G.language,kind:G.roles&&(0,g.getTextKind)(G.roles)}),G.active?this.onTextTracksChange():this.shakaPlayer.selectTextTrack(G)}else this.setInternalSubtitle({language:void 0,kind:void 0}),this.onTextTracksChange()}},{key:"getSubtitleTrack",value:function(){var U=this.shakaPlayer.getTextTracks().find(function(G){return G.active});if(U&&this.subtitle.language===U.language&&(0,g.getDashTextKind)(this.subtitle.kind)===U.kind)return A(U)}},{key:"getSubtitleTracks",value:function(){return this.shakaPlayer.getTextTracks().map(function(U){return A(U)}).filter(function(U,G,ee){return ee.findIndex(function(ne){return U.language===ne.language&&U.label===ne.label&&U.kind===ne.kind})===G})}},{key:"setAudioTrack",value:function(U){var G;!((G=U.raw)===null||G===void 0)&&G.label?this.shakaPlayer.selectVariantsByLabel(U.raw.label):(this.shakaPlayer.configure({abr:{enabled:!1}}),this.shakaPlayer.selectAudioLanguage(U.language,(0,g.getDashAudioKind)(U.kind)),this.shakaPlayer.configure({abr:{enabled:!0}})),this.setInternalAudio(U),this.onAudioTrackChange()}},{key:"getAudioTrack",value:function(){var U=this.shakaPlayer.getVariantTracks().find(function(G){return G.active});if(U)return A(U)}},{key:"getAudioTracks",value:function(){return this.shakaPlayer.getVariantTracks().map(function(U){return A(U)}).filter(function(U,G,ee){return ee.findIndex(function(ne){return U.language===ne.language&&U.label===ne.label&&U.kind===ne.kind})===G})}},{key:"onTracksChange",value:function(){var U,G=this;this.subtitle.language&&(U=this.getSubtitleTracks().find(function(ee){return ee.language===G.subtitle.language&&(!G.subtitle.kind||G.subtitle.kind===ee.kind)}))&&this.setSubtitleTrack(U),C(R(j.prototype),"onTracksChange",this).call(this)}},{key:"onError",value:function(){}},{key:"handleError",value:function(U){var G,ee,ne,re=this,oe=(G=this.shakaPlayer.getVariantTracks().find(function(Ue){return Ue.active}))===null||G===void 0?void 0:G.videoCodec;if(oe&&(!((ne=(ee=U==null?void 0:U.data)===null||ee===void 0?void 0:ee[2])===null||ne===void 0)&&ne.includes("DECODER_ERROR_NOT_SUPPORTED"))&&_.test(oe)&&!v)(function(){v=!0;var Ue=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(ze){return(!ze||!_.test(ze))&&Ue(ze)}})(),this.shakaPlayer.unload().then(function(){if(re.src)return re.load({src:re.src,license:void 0,startTime:re.startTime,audio:re.audio,subtitle:re.subtitle})});else{var W=(0,S.convertError)(U),Te=W.error;if(!W.fatal&&1>this.recoveryAttempts&&(this.recoveryAttempts+=1,this.shakaPlayer.retryStreaming()))return;this.setPlaybackState(i.PlaybackState.ERROR),this.emit(r.EngineEvents.ERROR,Te)}}},{key:"destroy",value:function(){this.resizeObserver&&this.resizeObserver.disconnect(),this.shakaPlayer.destroy(),C(R(j.prototype),"destroy",this).call(this)}}],k&&x(p.prototype,k),j}(g.AbstractBaseEngine);B.Shaka=f},5476:(Ee,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.DashJS=B.ShakaLive=B.Shaka=B.HlsJs=void 0;var M=K(9886);B.HlsJs={autoStartLoad:!1,manifestLoadingTimeOut:1e4,levelLoadingTimeOut:1e4,fragLoadingTimeOut:1e4,manifestLoadingMaxRetry:3,levelLoadingMaxRetry:3,fragLoadingMaxRetry:3,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0,fpsDroppedMonitoringPeriod:1e3,fpsDroppedMonitoringThreshold:.2,liveDurationInfinity:!0,startLevel:-1},B.Shaka={abr:{bandwidthDowngradeTarget:.85,bandwidthUpgradeTarget:.75,switchInterval:2},streaming:{rebufferingGoal:6,bufferingGoal:120,bufferBehind:30,ignoreTextStreamFailures:!0,startAtSegmentBoundary:!1,retryParameters:{maxAttempts:6,baseDelay:2e3,backoffFactor:2,fuzzFactor:.5,timeout:3e5,stallTimeout:1e4,connectionTimeout:6e4}},manifest:{dash:{ignoreMinBufferTime:!0},retryParameters:{maxAttempts:6,baseDelay:2e3,backoffFactor:2,fuzzFactor:.5}}},B.ShakaLive={manifest:{defaultPresentationDelay:0}},B.DashJS={streaming:{timeShiftBuffer:{calcFromSegmentTimeline:!0},gaps:{jumpGaps:!0},buffer:{fastSwitchEnabled:!0,reuseExistingSourceBuffers:!(0,M.isLGTV)()},abr:{limitBitrateByPortal:!0,usePixelRatioInLimitBitrateByPortal:!0}}}},3820:(Ee,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.EngineEvents=void 0,K(3217);var M=K(1756);B.EngineEvents=Object.assign(Object.assign({},M.FilteredMediaEvent),{VOLUME_CHANGE:"volumechange",ERROR:"error",DROPPED_FRAMES:"dropped_frames",BITRATE_CHANGED:"bitrate_changed",AUDIO_CHANGED:"audio_changed",SUBTITLE_CHANGED:"subtitle_changed",SUBTITLE_CUE_CHANGED:"subtitle_cue_changed",TRACKS_CHANGED:"tracks_changed",DRM_UPDATE:"drm:update",STATE_CHANGED:"state_changed",METADATA_EVENT:"metadata_event",PLAYBACK_RATE_CHANGED:"playback_rate_changed"})},2479:(Ee,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.convertMediaKeyError=B.convertError=void 0;var M=K(9327),x={1:M.ErrorTypes.ABORTED,2:M.ErrorTypes.NETWORK,3:M.ErrorTypes.DECODE,4:M.ErrorTypes.SRC_NOT_SUPPORTED,5:M.ErrorTypes.DRM},N={1:"MEDIA_KEYERR_UNKNOWN",2:"MEDIA_KEYERR_CLIENT",3:"MEDIA_KEYERR_SERVICE",4:"MEDIA_KEYERR_OUTPUT",5:"MEDIA_KEYERR_HARDWARECHANGE",6:"MEDIA_KEYERR_DOMAIN"},C={1212433232:"UNSUPPORTED_SCREEN"};B.convertError=function(R){var I=R.target.error,E=I||{code:-1,message:""},T=E.code,l=E.message;return new M.PlayerError(l,{type:x[T]||M.ErrorTypes.OTHER,code:T,rawError:I})},B.convertMediaKeyError=function(R){var I=R.error||{},E=I.code,T=I.systemCode,l=C[T]?C[T]:N[E];return new M.PlayerError("A decryption key error was encountered: ".concat(l),{type:M.ErrorTypes.DRM,code:T||E,rawError:R.error})}},3989:function(Ee,B,K){function M(b,p){(p==null||p>b.length)&&(p=b.length);for(var k=0,P=new Array(p);k<p;k++)P[k]=b[k];return P}function x(b,p){for(var k=0;k<p.length;k++){var P=p[k];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,P.key,P)}}function N(b,p){return function(k){if(Array.isArray(k))return k}(b)||function(k,P){var j=k==null?null:typeof Symbol<"u"&&k[Symbol.iterator]||k["@@iterator"];if(j!=null){var U,G,ee=[],ne=!0,re=!1;try{for(j=j.call(k);!(ne=(U=j.next()).done)&&(ee.push(U.value),!P||ee.length!==P);ne=!0);}catch(oe){re=!0,G=oe}finally{try{ne||j.return==null||j.return()}finally{if(re)throw G}}return ee}}(b,p)||function(k,P){if(k){if(typeof k=="string")return M(k,P);var j=Object.prototype.toString.call(k).slice(8,-1);return j==="Object"&&k.constructor&&(j=k.constructor.name),j==="Map"||j==="Set"?Array.from(j):j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?M(k,P):void 0}}(b,p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C,R,I,E,T=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(B,"__esModule",{value:!0}),B.ShakaCustomTextDisplayer=void 0;var l=T(K(3602)),c=l.default.text.Cue.defaultTextColor,h="Shaka Player TextTrack",y=(((C=l.default.text.Cue)===null||C===void 0?void 0:C.fontStyle)||{}).ITALIC,i=y===void 0?"italic":y,g=(((R=l.default.text.Cue)===null||R===void 0?void 0:R.fontWeight)||{}).BOLD,d=g===void 0?700:g,r=(((I=l.default.text.Cue)===null||I===void 0?void 0:I.textDecoration)||{}).UNDERLINE,t=r===void 0?"underline":r,u=((E=l.default.text.Cue)===null||E===void 0?void 0:E.writingMode)||{},m=u.VERTICAL_LEFT_TO_RIGHT,S=m===void 0?"vertical-lr":m,A=u.VERTICAL_RIGHT_TO_LEFT,_=A===void 0?"vertical-rl":A,v=new Map(Object.entries(c).map(function(b){var p=N(b,2),k=p[0];return[p[1],k]})),f=function(){function b(j){(function(W,Te){if(!(W instanceof Te))throw new TypeError("Cannot call a class as a function")})(this,b);var U=!0,G=!1,ee=void 0;try{for(var ne,re=Array.from(j.textTracks)[Symbol.iterator]();!(U=(ne=re.next()).done);U=!0){var oe=ne.value;oe.mode="disabled",oe.label===h&&(this.textTrack=oe)}}catch(W){G=!0,ee=W}finally{try{U||re.return==null||re.return()}finally{if(G)throw ee}}this.textTrack||(this.textTrack=j.addTextTrack("subtitles",h)),this.textTrack.mode="hidden"}var p,k,P;return p=b,k=[{key:"append",value:function(j){var U=!0,G=!1,ee=void 0;try{for(var ne,re=b.flattenCues(j)[Symbol.iterator]();!(U=(ne=re.next()).done);U=!0){var oe=ne.value;this.addCueToTrack(oe)}}catch(W){G=!0,ee=W}finally{try{U||re.return==null||re.return()}finally{if(G)throw ee}}}},{key:"remove",value:function(j,U){var G;if(!this.textTrack)return!1;var ee=!0,ne=!1,re=void 0;try{for(var oe,W=Array.from((G=this.textTrack.cues)!==null&&G!==void 0?G:[])[Symbol.iterator]();!(ee=(oe=W.next()).done);ee=!0){var Te=oe.value;Te&&Te.startTime<U&&Te.endTime>j&&this.textTrack.removeCue(Te)}}catch(Ue){ne=!0,re=Ue}finally{try{ee||W.return==null||W.return()}finally{if(ne)throw re}}return!0}},{key:"destroy",value:function(){var j;if(this.textTrack){var U=!0,G=!1,ee=void 0;try{for(var ne,re=Array.from((j=this.textTrack.cues)!==null&&j!==void 0?j:[])[Symbol.iterator]();!(U=(ne=re.next()).done);U=!0){var oe=ne.value;this.textTrack.removeCue(oe)}}catch(W){G=!0,ee=W}finally{try{U||re.return==null||re.return()}finally{if(G)throw ee}}this.textTrack.mode="disabled"}return this.textTrack=void 0,Promise.resolve()}},{key:"isTextVisible",value:function(){return!!this.textTrack&&this.textTrack.mode!=="disabled"}},{key:"setTextVisibility",value:function(){this.textTrack&&(this.textTrack.mode="hidden")}},{key:"addCueToTrack",value:function(j){if(this.textTrack){var U=Array.from(this.textTrack.cues||[]).filter(function(G){return ee=G,(ne=VTTCue)!=null&&typeof Symbol<"u"&&ne[Symbol.hasInstance]?!!ne[Symbol.hasInstance](ee):ee instanceof ne;var ee,ne});U.some(function(G){var ee=G.startTime,ne=G.endTime,re=G.text;return j.startTime===ee&&j.endTime===ne&&j.text===re})||this.textTrack.addCue(j)}}}],P=[{key:"flattenPayload",value:function(j){if(j.lineBreak)return`
`;if(j.nestedCues.length)return j.nestedCues.map(b.flattenPayload).join("");var U=Object.entries({b:j.fontWeight>=d,i:j.fontStyle===i,u:j.textDecoration.includes(t)}).filter(function(ee){return N(ee,2)[1]}).map(function(ee){return N(ee,1)[0]}).reduce(function(ee,ne){return"<".concat(ne,">").concat(ee,"</").concat(ne,">")},j.payload);if(v.has(j.color)||v.has(j.backgroundColor)){var G="";v.has(j.color)&&(G+=".".concat(v.get(j.color))),v.has(j.backgroundColor)&&(G+=".bg_".concat(v.get(j.backgroundColor))),U="<c".concat(G,">").concat(U,"</c>")}return U}},{key:"flattenCues",value:function(j){return j.flatMap(function(U){if(U.isContainer)return b.flattenCues(U.nestedCues);var G=U.startTime,ee=U.endTime,ne=U.line,re=U.position,oe=U.size,W=U.textAlign,Te=U.lineAlign,Ue=U.lineInterpretation,ze=U.positionAlign,le=b.flattenPayload(U),Se=new VTTCue(G,ee,le);return Object.assign(Se,{align:W,lineAlign:Te,positionAlign:ze,snapToLines:Ue!==1}),oe&&(Se.size=oe),ne!==null&&(Se.line=ne),re!==null&&(Se.position=re),U.writingMode===S?Se.vertical="lr":U.writingMode===_&&(Se.vertical="rl"),Se})}}],k&&x(p.prototype,k),P&&x(p,P),b}();B.ShakaCustomTextDisplayer=f},549:function(Ee,B,K){var M=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(B,"__esModule",{value:!0}),B.convertError=void 0;var x=M(K(3602)),N=K(9327),C={NETWORK:N.ErrorTypes.NETWORK,TEXT:N.ErrorTypes.SEGMENT,MEDIA:N.ErrorTypes.SEGMENT,MANIFEST:N.ErrorTypes.MANIFEST,STREAMING:N.ErrorTypes.MANIFEST,DRM:N.ErrorTypes.DRM,PLAYER:N.ErrorTypes.GENERIC,CAST:N.ErrorTypes.GENERIC,STORAGE:N.ErrorTypes.GENERIC},R=["INVALID_TEXT_HEADER","INVALID_TEXT_CUE","UNABLE_TO_DETECT_ENCODING","BAD_ENCODING","INVALID_XML","INVALID_TTML","INVALID_MP4_TTML","INVALID_MP4_VTT"];B.convertError=function(I){var E=Object.values(x.default.util.Error.Code).indexOf(I.code),T=Object.keys(x.default.util.Error.Code)[E],l=Object.values(x.default.util.Error.Category).indexOf(I.category),c=Object.keys(x.default.util.Error.Category)[l],h=I.severity!==x.default.util.Error.Severity.RECOVERABLE&&!R.includes(T);return{error:new N.ShakaPlayerError(T,{type:C[c]||N.ErrorTypes.OTHER,code:I.code}),fatal:h}}},7581:function(Ee,B){function K(C,R){(R==null||R>C.length)&&(R=C.length);for(var I=0,E=new Array(R);I<R;I++)E[I]=C[I];return E}function M(C,R){return function(I){if(Array.isArray(I))return I}(C)||function(I,E){var T=I==null?null:typeof Symbol<"u"&&I[Symbol.iterator]||I["@@iterator"];if(T!=null){var l,c,h=[],y=!0,i=!1;try{for(T=T.call(I);!(y=(l=T.next()).done)&&(h.push(l.value),!E||h.length!==E);y=!0);}catch(g){i=!0,c=g}finally{try{y||T.return==null||T.return()}finally{if(i)throw c}}return h}}(C,R)||function(I,E){if(I){if(typeof I=="string")return K(I,E);var T=Object.prototype.toString.call(I).slice(8,-1);return T==="Object"&&I.constructor&&(T=I.constructor.name),T==="Map"||T==="Set"?Array.from(T):T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T)?K(I,E):void 0}}(C,R)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=this&&this.__awaiter||function(C,R,I,E){return new(I||(I=Promise))(function(T,l){var c=function(i){try{y(E.next(i))}catch(g){l(g)}},h=function(i){try{y(E.throw(i))}catch(g){l(g)}},y=function(i){var g,d,r;i.done?T(i.value):(g=i.value,d=g,((r=I)!=null&&typeof Symbol<"u"&&r[Symbol.hasInstance]?r[Symbol.hasInstance](d):d instanceof r)?g:new I(function(t){t(g)})).then(c,h)};y((E=E.apply(C,R||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.getPlaylists=void 0;var N=new RegExp('(?:,?)([A-Z0-9-]+?)[=](".*?"|[^",]+)(?=,|s*$)',"g");B.getPlaylists=function(C){return x(this,void 0,void 0,function(){var R,I,E,T;return function(l,c){var h,y,i,g,d={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return g={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function r(t){return function(u){return function(m){if(h)throw new TypeError("Generator is already executing.");for(;d;)try{if(h=1,y&&(i=2&m[0]?y.return:m[0]?y.throw||((i=y.return)&&i.call(y),0):y.next)&&!(i=i.call(y,m[1])).done)return i;switch(y=0,i&&(m=[2&m[0],i.value]),m[0]){case 0:case 1:i=m;break;case 4:return d.label++,{value:m[1],done:!1};case 5:d.label++,y=m[1],m=[0];continue;case 7:m=d.ops.pop(),d.trys.pop();continue;default:if(!((i=(i=d.trys).length>0&&i[i.length-1])||m[0]!==6&&m[0]!==2)){d=0;continue}if(m[0]===3&&(!i||m[1]>i[0]&&m[1]<i[3])){d.label=m[1];break}if(m[0]===6&&d.label<i[1]){d.label=i[1],i=m;break}if(i&&d.label<i[2]){d.label=i[2],d.ops.push(m);break}i[2]&&d.ops.pop(),d.trys.pop();continue}m=c.call(l,d)}catch(S){m=[6,S],y=0}finally{h=i=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([t,u])}}}(this,function(l){switch(l.label){case 0:return[4,fetch(C)];case 1:return(R=l.sent()).ok?[4,R.text()]:[2,[]];case 2:return I=l.sent(),E=I.split(`
`),T=[],E.forEach(function(c,h){var y={url:void 0,width:0,height:0,bitrate:0};if(c.includes("#EXT-X-STREAM-INF")){var i,g=!1;for(y.url=E[h+1];(i=N.exec(c))!==null;){var d=M(i,3),r=d[1],t=d[2];switch(r){case"BANDWIDTH":g=!0,y.bitrate=Number(t);break;case"RESOLUTION":var u=M(t.split("x"),2),m=u[0],S=u[1];y.width=Number(m),y.height=Number(S)}}g&&T.push(y)}}),[2,T]}})})}},5735:(Ee,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.getLabel=void 0;var K=[{code:"ab",name:"Abkhaz",nativeName:""},{code:"aa",name:"Afar",nativeName:"Afaraf"},{code:"af",name:"Afrikaans",nativeName:"Afrikaans"},{code:"ak",name:"Akan",nativeName:"Akan"},{code:"sq",name:"Albanian",nativeName:"Shqip"},{code:"am",name:"Amharic",nativeName:""},{code:"ar",name:"Arabic",nativeName:""},{code:"an",name:"Aragonese",nativeName:"Aragons"},{code:"hy",name:"Armenian",nativeName:""},{code:"as",name:"Assamese",nativeName:""},{code:"av",name:"Avaric",nativeName:" ,  "},{code:"ae",name:"Avestan",nativeName:"Avesta"},{code:"ay",name:"Aymara",nativeName:"Aymar aru"},{code:"az",name:"Azerbaijani",nativeName:"Azrbaycan dili"},{code:"bm",name:"Bambara",nativeName:"Bamanankan"},{code:"ba",name:"Bashkir",nativeName:" "},{code:"eu",name:"Basque",nativeName:"Euskara, euskera"},{code:"be",name:"Belarusian",nativeName:""},{code:"bn",name:"Bengali",nativeName:""},{code:"bh",name:"Bihari",nativeName:""},{code:"bi",name:"Bislama",nativeName:"Bislama"},{code:"bs",name:"Bosnian",nativeName:"Bosanski jezik"},{code:"br",name:"Breton",nativeName:"Brezhoneg"},{code:"bg",name:"Bulgarian",nativeName:" "},{code:"my",name:"Burmese",nativeName:""},{code:"ca",name:"Catalan; Valencian",nativeName:"Catal"},{code:"ch",name:"Chamorro",nativeName:"Chamoru"},{code:"ce",name:"Chechen",nativeName:" "},{code:"ny",name:"Chichewa; Chewa; Nyanja",nativeName:"ChiChea, chinyanja"},{code:"zh",name:"Chinese",nativeName:" (Zhngwn), , "},{code:"cv",name:"Chuvash",nativeName:" "},{code:"kw",name:"Cornish",nativeName:"Kernewek"},{code:"co",name:"Corsican",nativeName:"Corsu, lingua corsa"},{code:"cr",name:"Cree",nativeName:""},{code:"hr",name:"Croatian",nativeName:"Hrvatski"},{code:"cs",name:"Czech",nativeName:"esky, etina"},{code:"da",name:"Danish",nativeName:"Dansk"},{code:"dv",name:"Divehi; Dhivehi; Maldivian;",nativeName:""},{code:"nl",name:"Dutch",nativeName:"Nederlands, Vlaams"},{code:"en",name:"English",nativeName:"English"},{code:"eo",name:"Esperanto",nativeName:"Esperanto"},{code:"et",name:"Estonian",nativeName:"Eesti, eesti keel"},{code:"ee",name:"Ewe",nativeName:"Eegbe"},{code:"fo",name:"Faroese",nativeName:"Froyskt"},{code:"fj",name:"Fijian",nativeName:"Vosa Vakaviti"},{code:"fi",name:"Finnish",nativeName:"Suomi, suomen kieli"},{code:"fr",name:"French",nativeName:"Franais"},{code:"ff",name:"Fula; Fulah; Pulaar; Pular",nativeName:"Fulfulde, Pulaar, Pular"},{code:"gl",name:"Galician",nativeName:"Galego"},{code:"ka",name:"Georgian",nativeName:""},{code:"de",name:"German",nativeName:"Deutsch"},{code:"el",name:"Greek, Modern",nativeName:""},{code:"gn",name:"Guaran",nativeName:"Avae"},{code:"gu",name:"Gujarati",nativeName:""},{code:"ht",name:"Haitian; Haitian Creole",nativeName:"Kreyl ayisyen"},{code:"ha",name:"Hausa",nativeName:"Hausa, "},{code:"he",name:"Hebrew (modern)",nativeName:""},{code:"hz",name:"Herero",nativeName:"Otjiherero"},{code:"hi",name:"Hindi",nativeName:", "},{code:"ho",name:"Hiri Motu",nativeName:"Hiri Motu"},{code:"hu",name:"Hungarian",nativeName:"Magyar"},{code:"ia",name:"Interlingua",nativeName:"Interlingua"},{code:"id",name:"Indonesian",nativeName:"Bahasa Indonesia"},{code:"ie",name:"Interlingue",nativeName:"Originally called Occidental; then Interlingue after WWII"},{code:"ga",name:"Irish",nativeName:"Gaeilge"},{code:"ig",name:"Igbo",nativeName:"Ass Igbo"},{code:"ik",name:"Inupiaq",nativeName:"Iupiaq, Iupiatun"},{code:"io",name:"Ido",nativeName:"Ido"},{code:"is",name:"Icelandic",nativeName:"slenska"},{code:"it",name:"Italian",nativeName:"Italiano"},{code:"iu",name:"Inuktitut",nativeName:""},{code:"ja",name:"Japanese",nativeName:" ()"},{code:"jv",name:"Javanese",nativeName:"Basa Jawa"},{code:"kl",name:"Kalaallisut, Greenlandic",nativeName:"Kalaallisut, kalaallit oqaasii"},{code:"kn",name:"Kannada",nativeName:""},{code:"kr",name:"Kanuri",nativeName:"Kanuri"},{code:"ks",name:"Kashmiri",nativeName:", "},{code:"kk",name:"Kazakh",nativeName:" "},{code:"km",name:"Khmer",nativeName:""},{code:"ki",name:"Kikuyu, Gikuyu",nativeName:"Gky"},{code:"rw",name:"Kinyarwanda",nativeName:"Ikinyarwanda"},{code:"ky",name:"Kirghiz, Kyrgyz",nativeName:" "},{code:"kv",name:"Komi",nativeName:" "},{code:"kg",name:"Kongo",nativeName:"KiKongo"},{code:"ko",name:"Korean",nativeName:" (),  ()"},{code:"ku",name:"Kurdish",nativeName:"Kurd, "},{code:"kj",name:"Kwanyama, Kuanyama",nativeName:"Kuanyama"},{code:"la",name:"Latin",nativeName:"Latine, lingua latina"},{code:"lb",name:"Luxembourgish, Letzeburgesch",nativeName:"Ltzebuergesch"},{code:"lg",name:"Luganda",nativeName:"Luganda"},{code:"li",name:"Limburgish, Limburgan, Limburger",nativeName:"Limburgs"},{code:"ln",name:"Lingala",nativeName:"Lingla"},{code:"lo",name:"Lao",nativeName:""},{code:"lt",name:"Lithuanian",nativeName:"Lietuvi kalba"},{code:"lu",name:"Luba-Katanga",nativeName:""},{code:"lv",name:"Latvian",nativeName:"Latvieu valoda"},{code:"gv",name:"Manx",nativeName:"Gaelg, Gailck"},{code:"mk",name:"Macedonian",nativeName:" "},{code:"mg",name:"Malagasy",nativeName:"Malagasy fiteny"},{code:"ms",name:"Malay",nativeName:"Bahasa Melayu,  "},{code:"ml",name:"Malayalam",nativeName:""},{code:"mt",name:"Maltese",nativeName:"Malti"},{code:"mi",name:"Mori",nativeName:"Te reo Mori"},{code:"mr",name:"Marathi (Marh)",nativeName:""},{code:"mh",name:"Marshallese",nativeName:"Kajin Maje"},{code:"mn",name:"Mongolian",nativeName:""},{code:"na",name:"Nauru",nativeName:"Ekakair Naoero"},{code:"nv",name:"Navajo, Navaho",nativeName:"Din bizaad, Dinkeh"},{code:"nb",name:"Norwegian Bokml",nativeName:"Norsk bokml"},{code:"nd",name:"North Ndebele",nativeName:"IsiNdebele"},{code:"ne",name:"Nepali",nativeName:""},{code:"ng",name:"Ndonga",nativeName:"Owambo"},{code:"nn",name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},{code:"no",name:"Norwegian",nativeName:"Norsk"},{code:"ii",name:"Nuosu",nativeName:" Nuosuhxop"},{code:"nr",name:"South Ndebele",nativeName:"IsiNdebele"},{code:"oc",name:"Occitan",nativeName:"Occitan"},{code:"oj",name:"Ojibwe, Ojibwa",nativeName:""},{code:"om",name:"Oromo",nativeName:"Afaan Oromoo"},{code:"or",name:"Oriya",nativeName:""},{code:"os",name:"Ossetian, Ossetic",nativeName:" "},{code:"pa",name:"Panjabi, Punjabi",nativeName:", "},{code:"pi",name:"Pli",nativeName:""},{code:"fa",name:"Persian",nativeName:""},{code:"pl",name:"Polish",nativeName:"Polski"},{code:"ps",name:"Pashto, Pushto",nativeName:""},{code:"pt",name:"Portuguese",nativeName:"Portugus"},{code:"qu",name:"Quechua",nativeName:"Runa Simi, Kichwa"},{code:"rm",name:"Romansh",nativeName:"Rumantsch grischun"},{code:"rn",name:"Kirundi",nativeName:"KiRundi"},{code:"ro",name:"Romanian, Moldavian, Moldovan",nativeName:"Romn"},{code:"ru",name:"Russian",nativeName:" "},{code:"sa",name:"Sanskrit (Saskta)",nativeName:""},{code:"sc",name:"Sardinian",nativeName:"Sardu"},{code:"sd",name:"Sindhi",nativeName:",  "},{code:"se",name:"Northern Sami",nativeName:"Davvismegiella"},{code:"sm",name:"Samoan",nativeName:"Gagana faa Samoa"},{code:"sg",name:"Sango",nativeName:"Yng t sng"},{code:"sr",name:"Serbian",nativeName:" "},{code:"gd",name:"Scottish Gaelic; Gaelic",nativeName:"Gidhlig"},{code:"sn",name:"Shona",nativeName:"ChiShona"},{code:"si",name:"Sinhala, Sinhalese",nativeName:""},{code:"sk",name:"Slovak",nativeName:"Slovenina"},{code:"sl",name:"Slovene",nativeName:"Slovenina"},{code:"so",name:"Somali",nativeName:"Soomaaliga, af Soomaali"},{code:"st",name:"Southern Sotho",nativeName:"Sesotho"},{code:"es",name:"Spanish; Castilian",nativeName:"Espaol, castellano"},{code:"su",name:"Sundanese",nativeName:"Basa Sunda"},{code:"sw",name:"Swahili",nativeName:"Kiswahili"},{code:"ss",name:"Swati",nativeName:"SiSwati"},{code:"sv",name:"Swedish",nativeName:"Svenska"},{code:"ta",name:"Tamil",nativeName:""},{code:"te",name:"Telugu",nativeName:""},{code:"tg",name:"Tajik",nativeName:", toik, "},{code:"th",name:"Thai",nativeName:""},{code:"ti",name:"Tigrinya",nativeName:""},{code:"bo",name:"Tibetan Standard, Tibetan, Central",nativeName:""},{code:"tk",name:"Turkmen",nativeName:"Trkmen, "},{code:"tl",name:"Tagalog",nativeName:"Wikang Tagalog,  "},{code:"tn",name:"Tswana",nativeName:"Setswana"},{code:"to",name:"Tonga (Tonga Islands)",nativeName:"Faka Tonga"},{code:"tr",name:"Turkish",nativeName:"Trke"},{code:"ts",name:"Tsonga",nativeName:"Xitsonga"},{code:"tt",name:"Tatar",nativeName:", tatara, "},{code:"tw",name:"Twi",nativeName:"Twi"},{code:"ty",name:"Tahitian",nativeName:"Reo Tahiti"},{code:"ug",name:"Uighur, Uyghur",nativeName:"Uyurq, "},{code:"uk",name:"Ukrainian",nativeName:""},{code:"ur",name:"Urdu",nativeName:""},{code:"uz",name:"Uzbek",nativeName:"Zbek, , "},{code:"ve",name:"Venda",nativeName:"Tshivena"},{code:"vi",name:"Vietnamese",nativeName:"Ting Vit"},{code:"vo",name:"Volapk",nativeName:"Volapk"},{code:"wa",name:"Walloon",nativeName:"Walon"},{code:"cy",name:"Welsh",nativeName:"Cymraeg"},{code:"wo",name:"Wolof",nativeName:"Wollof"},{code:"fy",name:"Western Frisian",nativeName:"Frysk"},{code:"xh",name:"Xhosa",nativeName:"IsiXhosa"},{code:"yi",name:"Yiddish",nativeName:""},{code:"yo",name:"Yoruba",nativeName:"Yorb"},{code:"za",name:"Zhuang, Chuang",nativeName:"Sa cue, Saw cuengh"}];B.getLabel=function(M){var x,N;return(N=(x=K.find(function(C){return C.code===M}))===null||x===void 0?void 0:x.nativeName)!==null&&N!==void 0?N:M.toUpperCase()}},5562:function(Ee,B,K){var M=this&&this.__awaiter||function(C,R,I,E){return new(I||(I=Promise))(function(T,l){var c=function(i){try{y(E.next(i))}catch(g){l(g)}},h=function(i){try{y(E.throw(i))}catch(g){l(g)}},y=function(i){var g,d,r;i.done?T(i.value):(g=i.value,d=g,((r=I)!=null&&typeof Symbol<"u"&&r[Symbol.hasInstance]?r[Symbol.hasInstance](d):d instanceof r)?g:new I(function(t){t(g)})).then(c,h)};y((E=E.apply(C,R||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.getResolutionAndBitrateRestrictions=B.getDeviceRestrictions=void 0;var x=K(9886);function N(){return(0,x.isLGTV)()?new Promise(function(C){var R=setTimeout(function(){return C({})},1e3);window.webOS.deviceInfo(function(I){var E=I.uhd;clearTimeout(R),C(E?{}:{maxResHeight:1080})})}):Promise.resolve({})}B.getDeviceRestrictions=N,B.getResolutionAndBitrateRestrictions=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return M(this,void 0,void 0,function(){var R,I;return function(E,T){var l,c,h,y,i={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return y={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function g(d){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;i;)try{if(l=1,c&&(h=2&t[0]?c.return:t[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,t[1])).done)return h;switch(c=0,h&&(t=[2&t[0],h.value]),t[0]){case 0:case 1:h=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,c=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!((h=(h=i.trys).length>0&&h[h.length-1])||t[0]!==6&&t[0]!==2)){i=0;continue}if(t[0]===3&&(!h||t[1]>h[0]&&t[1]<h[3])){i.label=t[1];break}if(t[0]===6&&i.label<h[1]){i.label=h[1],h=t;break}if(h&&i.label<h[2]){i.label=h[2],i.ops.push(t);break}h[2]&&i.ops.pop(),i.trys.pop();continue}t=T.call(E,i)}catch(u){t=[6,u],c=0}finally{l=h=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([d,r])}}}(this,function(E){switch(E.label){case 0:return R={minBitrate:C.minBitrate,maxBitrate:C.maxBitrate,maxResHeight:C.maxResHeight},[4,N()];case 1:return(I=E.sent()).maxResHeight&&(!R.maxResHeight||R.maxResHeight>I.maxResHeight)&&(R.maxResHeight=I.maxResHeight),[2,Promise.resolve(R)]}})})}},8351:function(Ee,B,K){var M=this&&this.__createBinding||(Object.create?function(C,R,I,E){E===void 0&&(E=I);var T=Object.getOwnPropertyDescriptor(R,I);T&&!("get"in T?!R.__esModule:T.writable||T.configurable)||(T={enumerable:!0,get:function(){return R[I]}}),Object.defineProperty(C,E,T)}:function(C,R,I,E){E===void 0&&(E=I),C[E]=R[I]}),x=this&&this.__exportStar||function(C,R){for(var I in C)I==="default"||Object.prototype.hasOwnProperty.call(R,I)||M(R,C,I)};Object.defineProperty(B,"__esModule",{value:!0}),B.ExposureService=void 0,x(K(8536),B);var N=K(9892);Object.defineProperty(B,"ExposureService",{enumerable:!0,get:function(){return N.ExposureService}}),K(6325)},4456:(Ee,B,K)=>{function M(T,l){for(var c=0;c<l.length;c++){var h=l[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(T,h.key,h)}}function x(T){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},x(T)}function N(T,l){return N=Object.setPrototypeOf||function(c,h){return c.__proto__=h,c},N(T,l)}function C(T){var l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var c,h=x(T);if(l){var y=x(this).constructor;c=Reflect.construct(h,arguments,y)}else c=h.apply(this,arguments);return function(i,g){return!g||((d=g)&&typeof Symbol<"u"&&d.constructor===Symbol?"symbol":typeof d)!="object"&&typeof g!="function"?function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(i):g;var d}(this,c)}}Object.defineProperty(B,"__esModule",{value:!0}),B.AbstractPlayer=B.INTERNAL_STATE_CHANGED=B.DefaultState=void 0;var R=K(9327),I=K(180);B.DefaultState={playbackState:R.PlaybackState.IDLE,contentType:void 0,mediaType:void 0,currentTime:0,duration:0,seekable:{start:0,end:0},utcCurrentTime:0,utcDuration:0,utcSeekable:{start:0,end:0},currentAd:null,adMarkers:[],contentMarkers:[],volume:0,subtitleTrack:null,subtitleTracks:[],audioTrack:null,audioTracks:[],qualityLevel:I.AUTO_QUALITY_LEVEL_DEFINITION,qualityLevels:[],droppedFrames:0,bufferingEvents:0,hasStarted:!1,isMuted:!1,isLive:!1,isSeekable:!1,isAtLiveEdge:!1},B.INTERNAL_STATE_CHANGED="PLAYER:INTERNAL_STATE_CHANGED";var E=function(T){(function(i,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(g&&g.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),g&&N(i,g)})(y,T);var l,c,h=C(y);function y(i){var g,d,r,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(function(m,S){if(!(m instanceof S))throw new TypeError("Cannot call a class as a function")})(this,y),(g=h.call(this)).state=Object.assign({},B.DefaultState),g.testSegment=void 0,g.instanceSettings=i,g.mainContentType=g.isLive()?R.ContentType.LIVE:R.ContentType.VOD;var u=(r=(d=g.instanceSettings)===null||d===void 0?void 0:d.playResponse)===null||r===void 0?void 0:r.audioOnly;return g.setState(Object.assign({contentType:g.mainContentType,mediaType:u?"audio":"video"},t),!1),g}return l=y,c=[{key:"getDefaultPlayerEvent",value:function(){return{currentTime:this.getCurrentTime(),duration:this.getDuration(),utcCurrentTime:this.getUTCCurrentTime(),utcDuration:this.getUTCDuration(),seekable:this.getSeekable(),utcSeekable:this.getUTCSeekable()}}},{key:"isLive",value:function(){var i;return((i=this.instanceSettings.mediaInfo)===null||i===void 0?void 0:i.isLive)!==void 0&&this.instanceSettings.mediaInfo.isLive}},{key:"setState",value:function(i){var g=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.state=Object.assign(Object.assign({},this.state),i),g&&this.emit(B.INTERNAL_STATE_CHANGED,this.state)}},{key:"getState",value:function(){return this.state}},{key:"getTestSegment",value:function(){return this.testSegment}}],c&&M(l.prototype,c),y}(R.EmitterBaseClass);B.AbstractPlayer=E},1353:function(Ee,B,K){function M(m,S){(S==null||S>m.length)&&(S=m.length);for(var A=0,_=new Array(S);A<S;A++)_[A]=m[A];return _}function x(m,S){for(var A=0;A<S.length;A++){var _=S[A];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}function N(m,S,A){return N=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(_,v,f){var b=function(k,P){for(;!Object.prototype.hasOwnProperty.call(k,P)&&(k=C(k))!==null;);return k}(_,v);if(b){var p=Object.getOwnPropertyDescriptor(b,v);return p.get?p.get.call(f||_):p.value}},N(m,S,A||m)}function C(m){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)},C(m)}function R(m,S){return R=Object.setPrototypeOf||function(A,_){return A.__proto__=_,A},R(m,S)}function I(m){return function(S){if(Array.isArray(S))return M(S)}(m)||function(S){if(typeof Symbol<"u"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}(m)||function(S,A){if(S){if(typeof S=="string")return M(S,A);var _=Object.prototype.toString.call(S).slice(8,-1);return _==="Object"&&S.constructor&&(_=S.constructor.name),_==="Map"||_==="Set"?Array.from(_):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?M(S,A):void 0}}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(m){var S=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var A,_=C(m);if(S){var v=C(this).constructor;A=Reflect.construct(_,arguments,v)}else A=_.apply(this,arguments);return function(f,b){return!b||((p=b)&&typeof Symbol<"u"&&p.constructor===Symbol?"symbol":typeof p)!="object"&&typeof b!="function"?function(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}(f):b;var p}(this,A)}}var T=this&&this.__awaiter||function(m,S,A,_){return new(A||(A=Promise))(function(v,f){var b=function(P){try{k(_.next(P))}catch(j){f(j)}},p=function(P){try{k(_.throw(P))}catch(j){f(j)}},k=function(P){var j,U,G;P.done?v(P.value):(j=P.value,U=j,((G=A)!=null&&typeof Symbol<"u"&&G[Symbol.hasInstance]?G[Symbol.hasInstance](U):U instanceof G)?j:new A(function(ee){ee(j)})).then(b,p)};k((_=_.apply(m,S||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.AdInsertionPlayer=void 0;var l=K(3217),c=K(8517),h=K(9327),y=K(9886),i=K(7296),g=K(4223),d=K(8613),r=K(6953),t=K(9584),u=function(m){(function(f,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(b&&b.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),b&&R(f,b)})(v,m);var S,A,_=E(v);function v(f,b,p,k){var P,j;(function(G,ee){if(!(G instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,v),(P=_.call(this,f,b,p,k)).adBlocks=[],P.setupVisibilityListener();var U=(j=P.instanceSettings.playResponse)===null||j===void 0?void 0:j.ads;return U&&(P.adMonitor=new c.AdMonitor(P.getFormat(),U),P.setupAdMonitorEventListeners(P.adMonitor),P.adMonitor.getAdBlocks().forEach(function(G){return P.onAdBlockAdded(G)})),P}return S=v,(A=[{key:"load",value:function(f){for(var b=this.getAbsoluteTime(f),p=this.adBlocks.length-1;p>=0;p--){var k=this.adBlocks[p];if(k.endTime<=b){this.onAdBlockWatched(k);break}}return N(C(v.prototype),"load",this).call(this,b)}},{key:"getPlayerEngine",value:function(){var f=this.getFormat();switch(this.mediaLocator=f.mediaLocator,this.license=f.drm,this.playbackFormat=f.format,f.format){case l.FormatType.HLS:return(0,t.isNativeHlsSupported)()?new d.Native(this.videoElement,this.instanceSettings):new g.HlsJs(this.videoElement,this.instanceSettings);case l.FormatType.DASH:return(0,y.isLGTV)()?new i.DashJs(this.videoElement,this.instanceSettings):new r.Shaka(this.videoElement,this.instanceSettings);default:var b="Ad Stitching Support for ".concat(f," not yet implemented");throw new h.InitError(b,{type:h.ErrorTypes.OPTIONS})}}},{key:"setupVisibilityListener",value:function(){var f=this;document.addEventListener("visibilitychange",this.visibilityListener=function(){document.visibilityState==="hidden"&&f.state.contentType===h.ContentType.AD?(f.pause(),f.automaticallyPaused=!0):document.visibilityState==="visible"&&f.automaticallyPaused&&(f.play(),f.automaticallyPaused=!1)})}},{key:"setupAdMonitorEventListeners",value:function(f){var b=this;f.on(c.AdMonitorEvent.ADBLOCK_START,function(p){N(C(v.prototype),"setPlaybackRate",b).call(b,1),b.videoElement.onratechange=function(){[0,1].includes(b.videoElement.playbackRate)||(b.videoElement.playbackRate=1)},b.emit(h.PlayerEvents.ADBLOCK_START,p),b.setState({contentType:h.ContentType.AD}),document.visibilityState==="hidden"&&(b.pause(),b.automaticallyPaused=!0),b.disableSeek()}),f.on(c.AdMonitorEvent.ADBLOCK_END,function(p){var k=p&&b.secondifyAdBlock(p);b.emit(h.PlayerEvents.ADBLOCK_COMPLETE,p),b.setState({contentType:b.mainContentType}),k&&b.onAdBlockWatched(k),b.videoElement.onratechange=null,b.playerEngine.isSeekDisabled=!1}),f.on(c.AdMonitorEvent.AD_START,function(p){b.state.contentType===h.ContentType.AD&&(b.setState({currentAd:p}),b.emit(h.PlayerEvents.AD_START,p))}),f.on(c.AdMonitorEvent.AD_END,function(p){b.state.contentType===h.ContentType.AD&&(b.setState({currentAd:null}),b.emit(h.PlayerEvents.AD_COMPLETE,p))}),f.on(c.AdMonitorEvent.ADBLOCK_ADDED,function(p){b.onAdBlockAdded(p)})}},{key:"disableSeek",value:function(){var f=this.getActiveAdBlock();this.state.contentType!==h.ContentType.AD||f&&this.isAdBlockWatched(f)||(this.playerEngine.isSeekDisabled=!0)}},{key:"secondifyAdBlock",value:function(f){return Object.assign(Object.assign({},f),{startTime:f.startTime/1e3,endTime:f.endTime/1e3,duration:f.duration/1e3,relativeStartTime:f.relativeStartTime/1e3})}},{key:"onAdBlockAdded",value:function(f){var b;if(this.adBlocks.push(this.secondifyAdBlock(f)),this.mainContentType===h.ContentType.VOD){var p=I((b=this.state.adMarkers)!==null&&b!==void 0?b:[]);p.push({watched:!1,startTime:f.relativeStartTime/1e3,duration:f.endTime/1e3-f.startTime/1e3}),this.setState({adMarkers:p})}}},{key:"onAdBlockWatched",value:function(f){var b,p=I((b=this.state.adMarkers)!==null&&b!==void 0?b:[]),k=p.find(function(P){return Math.floor(P.startTime)===Math.floor(f.relativeStartTime)});k&&(k.watched=!0,this.setState({adMarkers:p})),this.seekToDeferredTime()}},{key:"setPlaybackRate",value:function(f){this.state.contentType!==h.ContentType.AD&&N(C(v.prototype),"setPlaybackRate",this).call(this,f)}},{key:"isSeekable",value:function(){var f=this.getActiveAdBlock();return!!(this.state.contentType!==h.ContentType.AD||f&&this.isAdBlockWatched(f))&&N(C(v.prototype),"isSeekable",this).call(this)}},{key:"getSeekable",value:function(){return this.mainContentType===h.ContentType.LIVE?N(C(v.prototype),"getSeekable",this).call(this):{start:0,end:this.getDuration()}}},{key:"getCurrentTime",value:function(){var f=N(C(v.prototype),"getCurrentTime",this).call(this);if(this.mainContentType===h.ContentType.LIVE)return f;if(this.deferredSeekTime)return this.deferredSeekTime;var b=0;return this.adBlocks.forEach(function(p){var k=p.startTime,P=p.endTime;f>=P?b+=p.duration:f>k&&f<P&&(b+=f-k)}),f-b}},{key:"getDuration",value:function(){if(this.mainContentType===h.ContentType.LIVE)return N(C(v.prototype),"getDuration",this).call(this);var f=this.adBlocks.reduce(function(b,p){return b+p.duration},0);return N(C(v.prototype),"getDuration",this).call(this)-f}},{key:"seekTo",value:function(f){if(this.isSeekable())if(this.mainContentType===h.ContentType.VOD){var b=this.getAbsoluteTime(f),p=this.getRelatedAdBlock(b);p&&!this.isAdBlockWatched(p)&&(this.deferredSeekTime=f,b=p.startTime),N(C(v.prototype),"seekTo",this).call(this,b)}else N(C(v.prototype),"seekTo",this).call(this,f)}},{key:"clickThrough",value:function(){var f,b,p,k,P=this;if(!((f=this.state.currentAd)===null||f===void 0)&&f.clickThrough){var j=(b=this.state.currentAd)===null||b===void 0?void 0:b.clickThrough,U=(k=(p=this.state.currentAd)===null||p===void 0?void 0:p.trackingEvents)===null||k===void 0?void 0:k.clickThrough;window.open(j,"_blank"),U&&U.forEach(function(G){return T(P,void 0,void 0,function(){return function(ee,ne){var re,oe,W,Te,Ue={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return Te={next:ze(0),throw:ze(1),return:ze(2)},typeof Symbol=="function"&&(Te[Symbol.iterator]=function(){return this}),Te;function ze(le){return function(Se){return function(be){if(re)throw new TypeError("Generator is already executing.");for(;Ue;)try{if(re=1,oe&&(W=2&be[0]?oe.return:be[0]?oe.throw||((W=oe.return)&&W.call(oe),0):oe.next)&&!(W=W.call(oe,be[1])).done)return W;switch(oe=0,W&&(be=[2&be[0],W.value]),be[0]){case 0:case 1:W=be;break;case 4:return Ue.label++,{value:be[1],done:!1};case 5:Ue.label++,oe=be[1],be=[0];continue;case 7:be=Ue.ops.pop(),Ue.trys.pop();continue;default:if(!((W=(W=Ue.trys).length>0&&W[W.length-1])||be[0]!==6&&be[0]!==2)){Ue=0;continue}if(be[0]===3&&(!W||be[1]>W[0]&&be[1]<W[3])){Ue.label=be[1];break}if(be[0]===6&&Ue.label<W[1]){Ue.label=W[1],W=be;break}if(W&&Ue.label<W[2]){Ue.label=W[2],Ue.ops.push(be);break}W[2]&&Ue.ops.pop(),Ue.trys.pop();continue}be=ne.call(ee,Ue)}catch(Y){be=[6,Y],oe=0}finally{re=W=0}if(5&be[0])throw be[1];return{value:be[0]?be[1]:void 0,done:!0}}([le,Se])}}}(this,function(ee){return new Image().src=G,[2]})})}),this.pause()}else N(C(v.prototype),"clickThrough",this).call(this)}},{key:"onBuffering",value:function(){if(!(0,y.isLGTV)())return N(C(v.prototype),"onBuffering",this).call(this);var f=this.getCurrentTime(),b=this.getAbsoluteTime(f),p=this.videoElement.buffered;if(p.length&&b>p.end(p.length-1)-.5){var k=this.getRelatedAdBlock(b+5);if(k&&f<k.startTime&&!this.isAdBlockWatched(k))return N(C(v.prototype),"seekTo",this).call(this,k.startTime)}N(C(v.prototype),"onBuffering",this).call(this)}},{key:"onTimeUpdate",value:function(){if(this.mainContentType===h.ContentType.VOD){var f=this.getActiveAdBlock();if(f&&this.isAdBlockWatched(f)){var b=Math.ceil(f.endTime);return void N(C(v.prototype),"seekTo",this).call(this,b)}}this.adMonitor&&this.adMonitor.handleTimeUpdate({utcCurrentTime:N(C(v.prototype),"getUTCCurrentTime",this).call(this),currentTime:N(C(v.prototype),"getCurrentTime",this).call(this)}),N(C(v.prototype),"onTimeUpdate",this).call(this)}},{key:"onSeeking",value:function(){if(this.state.contentType!==h.ContentType.AD&&this.playerEngine.isSeekDisabled&&(this.playerEngine.isSeekDisabled=!1),this.mainContentType===h.ContentType.VOD){var f=this.getRelatedAdBlock(N(C(v.prototype),"getCurrentTime",this).call(this));if(f&&f!==this.getActiveAdBlock()&&!this.isAdBlockWatched(f))return void N(C(v.prototype),"seekTo",this).call(this,f.startTime)}N(C(v.prototype),"onSeeking",this).call(this)}},{key:"onEnded",value:function(){var f;(f=this.adMonitor)===null||f===void 0||f.handleEnded(),N(C(v.prototype),"onEnded",this).call(this)}},{key:"getActiveAdBlock",value:function(){var f=N(C(v.prototype),"getCurrentTime",this).call(this);return(this.adBlocks||[]).find(function(b){return f>=Math.floor(b.startTime)&&f<b.endTime})||null}},{key:"getRelatedAdBlock",value:function(f){for(var b=this.adBlocks.length-1;b>=0;b--){var p=this.adBlocks[b];if(Math.floor(p.startTime)<=f)return p}return null}},{key:"seekToDeferredTime",value:function(){if(this.deferredSeekTime){var f=this.deferredSeekTime;this.deferredSeekTime=void 0,this.playerEngine.isEnded()||this.seekTo(f)}}},{key:"getAbsoluteTime",value:function(f){return this.mainContentType!==h.ContentType.VOD?f:this.adBlocks.reduce(function(b,p){return p.relativeStartTime<f?b+p.duration:b},f)}},{key:"isAdBlockWatched",value:function(f){var b,p;return(p=(b=this.state.adMarkers)===null||b===void 0?void 0:b.some(function(k){return Math.floor(k.startTime)===Math.floor(f.relativeStartTime)&&k.watched}))!==null&&p!==void 0&&p}},{key:"destroy",value:function(){var f;this.visibilityListener&&document.removeEventListener("visibilitychange",this.visibilityListener),(f=this.adMonitor)===null||f===void 0||f.destroy(),N(C(v.prototype),"destroy",this).call(this)}}])&&x(S.prototype,A),v}(K(2558).AssetPlayer);B.AdInsertionPlayer=u},2558:(Ee,B,K)=>{function M(r,t){for(var u=0;u<t.length;u++){var m=t[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(r,m.key,m)}}function x(r,t,u){return x=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(m,S,A){var _=function(f,b){for(;!Object.prototype.hasOwnProperty.call(f,b)&&(f=N(f))!==null;);return f}(m,S);if(_){var v=Object.getOwnPropertyDescriptor(_,S);return v.get?v.get.call(A||m):v.value}},x(r,t,u||r)}function N(r){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},N(r)}function C(r,t){return C=Object.setPrototypeOf||function(u,m){return u.__proto__=m,u},C(r,t)}function R(r){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,m=N(r);if(t){var S=N(this).constructor;u=Reflect.construct(m,arguments,S)}else u=m.apply(this,arguments);return function(A,_){return!_||((v=_)&&typeof Symbol<"u"&&v.constructor===Symbol?"symbol":typeof v)!="object"&&typeof _!="function"?function(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}(A):_;var v}(this,u)}}Object.defineProperty(B,"__esModule",{value:!0}),B.AssetPlayer=void 0;var I=K(3217),E=K(9327),T=K(9886),l=K(7296),c=K(4223),h=K(8613),y=K(6953),i=K(9584),g=K(7798),d=function(r){(function(A,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(_&&_.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),_&&C(A,_)})(S,r);var t,u,m=R(S);function S(A,_,v,f){var b,p;return function(k,P){if(!(k instanceof P))throw new TypeError("Cannot call a class as a function")}(this,S),(b=m.call(this,A,_,v,f,{contentMarkers:((p=v.assetMetadata)===null||p===void 0?void 0:p.markerPoints)||[]})).emittedContentMarkers=[],b}return t=S,u=[{key:"getPreferredLanguages",value:function(){var A,_,v,f,b,p=(0,g.getPreferences)(),k=(_=(A=this.instanceSettings.assetMetadata)===null||A===void 0?void 0:A.audioTracks)!==null&&_!==void 0?_:[],P=(f=(v=this.instanceSettings.assetMetadata)===null||v===void 0?void 0:v.subtitles)!==null&&f!==void 0?f:[],j=this.instanceSettings.initOptions.locale,U=!p.subtitle||p.subtitle.language&&!P.includes(p.subtitle.language)?void 0:p.subtitle,G=!((b=p.audio)===null||b===void 0)&&b.language&&k.includes(p.audio.language)?p.audio:void 0;return j&&(!G&&k.includes(j)&&(G={language:j,kind:"main"}),U||!P.includes(j)||G&&G.language===j||(U={language:j,kind:"subtitles"})),{audio:G,subtitle:U}}},{key:"getPlayerEngine",value:function(){var A,_=this.getFormat(),v=_.format,f=_.mediaLocator,b=_.drm,p=_.liveDelay;switch(this.mediaLocator=f,this.license=b,this.playbackFormat=v,v){case I.FormatType.HLS:return!((A=this.instanceSettings.mediaInfo)===null||A===void 0)&&A.isLive&&!this.license&&p&&(0,i.isMSESupported)()?new c.HlsJs(this.videoElement,this.instanceSettings):(0,i.isNativeHlsSupported)()?new h.Native(this.videoElement,this.instanceSettings):new c.HlsJs(this.videoElement,this.instanceSettings);case I.FormatType.DASH:return(0,T.isLGTV)()?new l.DashJs(this.videoElement,this.instanceSettings):new y.Shaka(this.videoElement,this.instanceSettings);case I.FormatType.SMOOTHSTREAMING:return new l.DashJs(this.videoElement,this.instanceSettings);case I.FormatType.MP4:case I.FormatType.MP3:return new h.Native(this.videoElement,this.instanceSettings);default:throw new E.InitError("Support for ".concat(v," not yet implemented"),{type:E.ErrorTypes.OPTIONS})}}},{key:"checkifActiveMarker",value:function(A,_,v,f){var b=A.offset,p=A.endOffset,k=this.emittedContentMarkers.includes(_),P=1e3*this.getCurrentTime();!k&&p&&P>b&&P<p?(this.emit(v,Object.assign(Object.assign({},this.getDefaultPlayerEvent()),{contentMarker:A})),this.emittedContentMarkers.push(_)):k&&p&&f&&(P>p||P<b)?(this.emit(f,Object.assign(Object.assign({},this.getDefaultPlayerEvent()),{contentMarker:A})),this.emittedContentMarkers=this.emittedContentMarkers.filter(function(j){return j!==_})):!k&&!p&&P>b?(this.emittedContentMarkers.push(_),this.emit(v,Object.assign(Object.assign({},this.getDefaultPlayerEvent()),{contentMarker:A}))):k&&!p&&P<b&&(this.emittedContentMarkers=this.emittedContentMarkers.filter(function(j){return j!==_}))}},{key:"evaluateContentMarkers",value:function(){var A=this,_=this.getContentMarkers();_==null||_.forEach(function(v,f){var b="".concat(v.type,"_").concat(f);switch(v.type){case I.MarkerType.INTRO:A.checkifActiveMarker(v,b,E.PlayerEvents.INTRO_START,E.PlayerEvents.INTRO_END);break;case I.MarkerType.CHAPTER:A.checkifActiveMarker(v,b,E.PlayerEvents.CHAPTER_START,E.PlayerEvents.CHAPTER_END);break;default:A.checkifActiveMarker(v,b,E.PlayerEvents.MARKER)}})}},{key:"onTimeUpdate",value:function(){x(N(S.prototype),"onTimeUpdate",this).call(this),this.evaluateContentMarkers()}},{key:"getFormat",value:function(){var A=this.instanceSettings.formats||[],_=this.instanceSettings.initOptions.preferredFormats,v=(0,i.getSupportedFormats)(),f=A.filter(function(j){var U=j.format;return v.includes(U)}),b=this.isDrm(A);if(b&&!this.instanceSettings.supportedKeySystem){var p=new E.InitError("Asset is DRM, though no supported key systems reported by the browser",{type:E.ErrorTypes.DRM});throw this.emit(E.PlayerEvents.ERROR,p),p}var k=(b?this.decideEncryptedFormatToPlay.bind(this):this.decideNonEncryptedFormatToPlay.bind(this))(f,_);if(!k&&f.length>0&&(k=f[0]),!k){var P="Could not match requested formats: ".concat(_);throw new E.APIError(P,{type:E.ErrorTypes.API_PLAY_REQUEST})}return k}},{key:"decideEncryptedFormatToPlay",value:function(A){var _,v,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],b=(_=this.instanceSettings.initOptions)===null||_===void 0?void 0:_.keysystem;if(b)v=A.find(function(ee){var ne;return Object.keys((ne=ee.drm)!==null&&ne!==void 0?ne:{}).find(function(re){return re===b})});else{var p=!0,k=!1,P=void 0;try{for(var j,U=function(){var ee=j.value;if(v=A.find(function(ne){return ne.drm&&(0,i.isNativeHlsSupported)()?ne.format===I.FormatType.HLS:ne.drm&&!(0,i.isNativeHlsSupported)()?ne.format===ee.toUpperCase()&&ne.format!==I.FormatType.HLS:void 0}))return"break"},G=f[Symbol.iterator]();!(p=(j=G.next()).done)&&U()!=="break";p=!0);}catch(ee){k=!0,P=ee}finally{try{p||G.return==null||G.return()}finally{if(k)throw P}}}return v}},{key:"decideNonEncryptedFormatToPlay",value:function(A){var _,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],f=!0,b=!1,p=void 0;try{for(var k,P=function(){var U=k.value;if(_=A.find(function(G){return G.format===U.toUpperCase()}))return"break"},j=v[Symbol.iterator]();!(f=(k=j.next()).done)&&P()!=="break";f=!0);}catch(U){b=!0,p=U}finally{try{f||j.return==null||j.return()}finally{if(b)throw p}}return _}},{key:"isDrm",value:function(A){return!!A.find(function(_){return _.drm})}},{key:"isSeekable",value:function(){var A,_=(A=this.instanceSettings.playResponse)===null||A===void 0?void 0:A.contractRestrictions;if(_){var v=_.timeshiftEnabled,f=_.ffEnabled,b=_.rwEnabled;return v!==!1&&(b!==!1||f!==!1)&&x(N(S.prototype),"isSeekable",this).call(this)}return x(N(S.prototype),"isSeekable",this).call(this)}}],u&&M(t.prototype,u),S}(K(1568).BasePlayer);B.AssetPlayer=d},1568:(Ee,B,K)=>{function M(u,m){for(var S=0;S<m.length;S++){var A=m[S];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(u,A.key,A)}}function x(u,m,S){return x=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(A,_,v){var f=function(p,k){for(;!Object.prototype.hasOwnProperty.call(p,k)&&(p=N(p))!==null;);return p}(A,_);if(f){var b=Object.getOwnPropertyDescriptor(f,_);return b.get?b.get.call(v||A):b.value}},x(u,m,S||u)}function N(u){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},N(u)}function C(u,m){return C=Object.setPrototypeOf||function(S,A){return S.__proto__=A,S},C(u,m)}function R(u){var m=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var S,A=N(u);if(m){var _=N(this).constructor;S=Reflect.construct(A,arguments,_)}else S=A.apply(this,arguments);return function(v,f){return!f||((b=f)&&typeof Symbol<"u"&&b.constructor===Symbol?"symbol":typeof b)!="object"&&typeof f!="function"?function(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}(v):f;var b}(this,S)}}Object.defineProperty(B,"__esModule",{value:!0}),B.BasePlayer=void 0;var I=K(3217),E=K(9327),T=K(180),l=K(7296),c=K(4223),h=K(3820),y=K(8613),i=K(6953),g=K(9736),d=K(9584),r=K(7798),t=function(u){(function(v,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(f&&f.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),f&&C(v,f)})(_,u);var m,S,A=R(_);function _(v,f,b,p){var k,P=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};(function(U,G){if(!(U instanceof G))throw new TypeError("Cannot call a class as a function")})(this,_),(k=A.call(this,b,Object.assign(Object.assign({},P),{isMuted:b.initOptions.muted,volume:v.volume}))).videoElement=v,k.subtitleContainer=f,k.source=p,k.scrubChange=0,k.isFakePaused=!1,k.destroyed=!1,k.setupDebounceSeekTo(),k.playerEngine=k.getPlayerEngine();var j=k.instanceSettings.initOptions.muted;return j!==void 0&&k.setMuted(j),k.setupPlayerEngineEventListeners(),k}return m=_,S=[{key:"setupPlayerEngineEventListeners",value:function(){this.playerEngine.on(h.EngineEvents.DRM_UPDATE,this.onDrmUpdate.bind(this)),this.playerEngine.on(h.EngineEvents.LOADED,this.onLoaded.bind(this)),this.playerEngine.on(h.EngineEvents.PLAY,this.onPlay.bind(this)),this.playerEngine.on(h.EngineEvents.PLAYING,this.onPlaying.bind(this)),this.playerEngine.on(h.EngineEvents.PAUSE,this.onPause.bind(this)),this.playerEngine.on(h.EngineEvents.TIME_UPDATE,this.onTimeUpdate.bind(this)),this.playerEngine.on(h.EngineEvents.SEEKING,this.onSeeking.bind(this)),this.playerEngine.on(h.EngineEvents.SEEKED,this.onSeeked.bind(this)),this.playerEngine.on(h.EngineEvents.BUFFERING,this.onBuffering.bind(this)),this.playerEngine.on(h.EngineEvents.BUFFERED,this.onBuffered.bind(this)),this.playerEngine.on(h.EngineEvents.DROPPED_FRAMES,this.onDroppedFrames.bind(this)),this.playerEngine.on(h.EngineEvents.SUBTITLE_CHANGED,this.onSubtitleChanged.bind(this)),this.playerEngine.on(h.EngineEvents.AUDIO_CHANGED,this.onAudioChanged.bind(this)),this.playerEngine.on(h.EngineEvents.VOLUME_CHANGE,this.onVolumeChanged.bind(this)),this.playerEngine.on(h.EngineEvents.BITRATE_CHANGED,this.onBitrateChanged.bind(this)),this.playerEngine.on(h.EngineEvents.ENDED,this.onEnded.bind(this)),this.playerEngine.on(h.EngineEvents.ERROR,this.onError.bind(this)),this.playerEngine.on(h.EngineEvents.STATE_CHANGED,this.onEngineStateChange.bind(this)),this.playerEngine.on(h.EngineEvents.TRACKS_CHANGED,this.onTracksChanged.bind(this)),this.playerEngine.on(h.EngineEvents.SUBTITLE_CUE_CHANGED,this.onSubtitleCueChanged.bind(this)),this.playerEngine.on(h.EngineEvents.METADATA_EVENT,this.onMetadataChanged.bind(this))}},{key:"getPreferredLanguages",value:function(){var v=(0,r.getPreferences)();return{audio:v.audio,subtitle:v.subtitle}}},{key:"load",value:function(v){if(!this.mediaLocator)return Promise.reject(new E.InitError("Missing properties: playerEngine: ".concat(this.playerEngine," or mediaLocator: ").concat(this.mediaLocator),{type:E.ErrorTypes.GENERIC}));this.startTime=v;var f=v!==void 0&&v>0?v:void 0,b=this.getPreferredLanguages();this.playerEngine.load({src:this.mediaLocator,license:this.license,startTime:f,audio:b.audio,subtitle:b.subtitle})}},{key:"getPlayerEngineDev",value:function(){}},{key:"getPlayerEngine",value:function(){var v,f,b,p;return this.mediaLocator=this.source,!((v=this.mediaLocator)===null||v===void 0)&&v.includes(".m3u8")?(this.playbackFormat=I.FormatType.HLS,(0,d.isNativeHlsSupported)()?new y.Native(this.videoElement,this.instanceSettings):new c.HlsJs(this.videoElement,this.instanceSettings)):!((f=this.mediaLocator)===null||f===void 0)&&f.includes(".mpd")?(this.playbackFormat=I.FormatType.DASH,new i.Shaka(this.videoElement,this.instanceSettings)):!((b=this.mediaLocator)===null||b===void 0)&&b.includes("ism")||!((p=this.mediaLocator)===null||p===void 0)&&p.includes("Manifest")?(this.playbackFormat=I.FormatType.SMOOTHSTREAMING,new l.DashJs(this.videoElement,this.instanceSettings)):new y.Native(this.videoElement,this.instanceSettings)}},{key:"getPlayerEngineName",value:function(){return this.playerEngine.name}},{key:"getPlayerEngineVersion",value:function(){return this.playerEngine.playertechVersion}},{key:"getPlaybackFormat",value:function(){return this.playbackFormat}},{key:"isLive",value:function(){return this.playerEngine?this.playerEngine.isLive():x(N(_.prototype),"isLive",this).call(this)}},{key:"isSeekable",value:function(){var v,f=(v=this.playerEngine.getSeekable())!==null&&v!==void 0?v:{start:0,end:0};return this.playerEngine.isLive()?f.end-f.start>g.MIN_DVR_WINDOW:f.end-f.start>0}},{key:"play",value:function(){if(this.playerEngine&&this.state.playbackState!==E.PlaybackState.IDLE)return this.playerEngine.play()}},{key:"pause",value:function(){this.playerEngine.pause()}},{key:"stop",value:function(){this.playerEngine.stop(),this.emit(E.PlayerEvents.STOP,this.getDefaultPlayerEvent())}},{key:"setupDebounceSeekTo",value:function(){var v=this;this.debounceSeekTo||(this.debounceSeekTo=(0,E.debounce)(function(f){v.scrubChange=0,v.seekTo(f),v.isFakePaused&&(v.play(),v.isFakePaused=!1)},500))}},{key:"scrub",value:function(v){if(this.isSeekable()){var f=this.getSeekable(),b=this.getCurrentTime(),p=this.getDuration();this.scrubChange+=v;var k=(0,E.clamp)(b+this.scrubChange,f.start,p);this.setState({playbackState:E.PlaybackState.SEEKING}),this.onSeeking(),this.debounceSeekTo(k),this.onSeekTimeChange(k),this.isPlaying()&&(this.isFakePaused||(this.isFakePaused=!0,this.pause()))}}},{key:"seekTo",value:function(v){this.isSeekable()&&this.playerEngine.seekTo(v)}},{key:"seekToLive",value:function(){if(!this.playerEngine.isAtLiveEdge())return this.playerEngine.seekToLive()}},{key:"setPlaybackRate",value:function(v){return this.playerEngine.setPlaybackRate(v)}},{key:"setVolume",value:function(v){var f=v.percentage,b=v.change,p=1;if(f&&!b&&(p=(0,E.clamp)(f/100,.01,1)),!f&&b){var k=100*this.playerEngine.getVolume()+b;p=(0,E.clamp)(k/100,.01,1)}this.playerEngine.setVolume(p)}},{key:"getVolume",value:function(){var v;return(v=this.playerEngine.getVolume())!==null&&v!==void 0?v:0}},{key:"toggleMuted",value:function(){this.playerEngine.toggleMuted()}},{key:"setMuted",value:function(v){this.playerEngine.setMuted(v)}},{key:"isPlaying",value:function(){var v;return(v=this.playerEngine.isPlaying())!==null&&v!==void 0&&v}},{key:"getCurrentTime",value:function(){var v;return(v=this.playerEngine.getCurrentTime())!==null&&v!==void 0?v:0}},{key:"getDuration",value:function(){var v;return(v=this.playerEngine.getDuration())!==null&&v!==void 0?v:0}},{key:"getSeekable",value:function(){var v;return(v=this.playerEngine.getSeekable())!==null&&v!==void 0?v:{start:0,end:0}}},{key:"getUTCCurrentTime",value:function(){var v;return(v=this.playerEngine.getUTCCurrentTime())!==null&&v!==void 0?v:0}},{key:"getUTCDuration",value:function(){var v;return(v=this.playerEngine.getUTCDuration())!==null&&v!==void 0?v:0}},{key:"getUTCSeekable",value:function(){var v;return(v=this.playerEngine.getUTCSeekable())!==null&&v!==void 0?v:{start:0,end:0}}},{key:"getContentMarkers",value:function(){return this.getState().contentMarkers}},{key:"setQualityLevel",value:function(v){this.playerEngine.setQualityLevel(v),this.setState({qualityLevel:v})}},{key:"getQualityLevels",value:function(){return this.playerEngine.getQualityLevels().sort(function(v,f){return v.bandwidth-f.bandwidth})}},{key:"getQualityLevel",value:function(){return this.playerEngine?this.playerEngine.getQualityLevel():T.AUTO_QUALITY_LEVEL_DEFINITION}},{key:"setAudioTrack",value:function(v){this.playerEngine&&(this.playerEngine.setAudioTrack(v),this.setState({qualityLevels:this.getQualityLevels()}))}},{key:"getAudioTrack",value:function(){if(this.playerEngine)return this.playerEngine.getAudioTrack()}},{key:"getAudioTracks",value:function(){return this.playerEngine?this.playerEngine.getAudioTracks():[]}},{key:"setSubtitleTrack",value:function(v){this.playerEngine&&this.playerEngine.setSubtitleTrack(v)}},{key:"getSubtitleTrack",value:function(){if(this.playerEngine)return this.playerEngine.getSubtitleTrack()}},{key:"getSubtitleTracks",value:function(){return this.playerEngine?this.playerEngine.getSubtitleTracks():[]}},{key:"clickThrough",value:function(){this.isPlaying()?this.pause():this.play()}},{key:"setState",value:function(v,f){var b=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this.isFakePaused&&!b||("isSeekable"in v&&this.playerEngine.setClientRestrictions({timeshiftEnabled:v.isSeekable}),x(N(_.prototype),"setState",this).call(this,v,f))}},{key:"onEngineStateChange",value:function(v){this.isFakePaused||this.setState({playbackState:v})}},{key:"onPlaying",value:function(){this.state.hasStarted?this.emit(E.PlayerEvents.PLAYING,this.getDefaultPlayerEvent()):this.onPlay()}},{key:"onDrmUpdate",value:function(v){this.emit(E.PlayerEvents.DRM_UPDATE,Object.assign(Object.assign({},this.getDefaultPlayerEvent()),{type:v}))}},{key:"onLoaded",value:function(){var v;this.state.hasStarted||(this.emit(E.PlayerEvents.LOADED,Object.assign(Object.assign({},this.getDefaultPlayerEvent()),{startTime:this.startTime,playSessionId:(v=this.instanceSettings.playResponse)===null||v===void 0?void 0:v.playSessionId})),this.setState({currentTime:this.getCurrentTime(),duration:this.getDuration(),seekable:this.getSeekable(),utcCurrentTime:this.getUTCCurrentTime(),utcDuration:this.getUTCDuration(),utcSeekable:this.getUTCSeekable(),qualityLevel:this.getQualityLevel(),qualityLevels:this.getQualityLevels(),isLive:this.isLive(),isSeekable:this.isSeekable()}))}},{key:"onPlay",value:function(){var v,f;if(this.state.hasStarted)this.isLive()&&!this.state.isSeekable&&(this.playerEngine.setClientRestrictions({timeshiftEnabled:!0}),this.seekToLive()),this.emit(E.PlayerEvents.RESUME,this.getDefaultPlayerEvent());else{var b=this.getQualityLevel();this.emit(E.PlayerEvents.START,Object.assign(Object.assign({},this.getDefaultPlayerEvent()),{playSessionId:(v=this.instanceSettings.playResponse)===null||v===void 0?void 0:v.playSessionId,startTime:this.startTime,source:(f=this.mediaLocator)!==null&&f!==void 0?f:"",bitrate:b.bandwidth,qualityLevel:b,qualityLevels:this.getQualityLevels()})),this.setState({hasStarted:!0})}}},{key:"onPause",value:function(){!this.isFakePaused&&this.state.hasStarted&&this.emit(E.PlayerEvents.PAUSE,this.getDefaultPlayerEvent())}},{key:"onMetadataChanged",value:function(v){this.emit(E.PlayerEvents.METADATA_EVENT,Object.assign(Object.assign({},this.getDefaultPlayerEvent()),v))}},{key:"onTimeUpdate",value:function(){if(this.state.hasStarted){this.emit(E.PlayerEvents.TIME_UPDATE,this.getDefaultPlayerEvent());var v=this.getSeekable();this.setState({currentTime:this.getCurrentTime(),duration:this.getDuration(),seekable:v,utcCurrentTime:this.getUTCCurrentTime(),utcDuration:this.getUTCDuration(),utcSeekable:this.getUTCSeekable(),isMuted:this.videoElement.muted,isLive:this.playerEngine.isLive(),isSeekable:this.isSeekable(),isAtLiveEdge:!this.isSeekable()||this.playerEngine.isAtLiveEdge()})}}},{key:"onSeeking",value:function(){this.emit(E.PlayerEvents.SEEKING,this.getDefaultPlayerEvent()),this.setState({currentTime:this.getCurrentTime(),utcCurrentTime:this.getUTCCurrentTime()})}},{key:"onSeekTimeChange",value:function(v){this.emit(E.PlayerEvents.SEEK_TIME_CHANGE,Object.assign(Object.assign({},this.getDefaultPlayerEvent()),{currentTime:v,utcCurrentTime:this.getUTCCurrentTime()})),this.setState({currentTime:v,utcCurrentTime:this.getUTCCurrentTime()},!0,!0)}},{key:"onSeeked",value:function(){this.scrubChange=0,this.emit(E.PlayerEvents.SEEKED,this.getDefaultPlayerEvent()),this.setState({currentTime:this.getCurrentTime(),utcCurrentTime:this.getUTCCurrentTime()})}},{key:"onBuffering",value:function(){if(this.state.hasStarted){this.emit(E.PlayerEvents.BUFFERING,this.getDefaultPlayerEvent());var v=(this.state.bufferingEvents||0)+1;this.setState({bufferingEvents:v})}}},{key:"onBuffered",value:function(){this.emit(E.PlayerEvents.BUFFERED,this.getDefaultPlayerEvent())}},{key:"onDroppedFrames",value:function(v){this.emit(E.PlayerEvents.DROPPED_FRAMES,Object.assign(Object.assign({},this.getDefaultPlayerEvent()),{droppedFrames:v})),this.setState({droppedFrames:v})}},{key:"onSubtitleChanged",value:function(v){var f,b,p;this.state.hasStarted&&this.emit(E.PlayerEvents.SUBTITLE_CHANGED,Object.assign(Object.assign({},this.getDefaultPlayerEvent()),{track:v.track})),this.setState({subtitleTrack:this.getSubtitleTrack(),subtitleTracks:this.getSubtitleTracks()}),!((f=v.track)===null||f===void 0)&&f.kind&&!T.SUPPORTED_TEXT_TRACK_KINDS.includes(v.track.kind)||(0,r.setPreferences)({subtitle:{language:(b=v.track)===null||b===void 0?void 0:b.language,kind:(p=v.track)===null||p===void 0?void 0:p.kind}})}},{key:"onSubtitleCueChanged",value:function(v){var f=this;this.subtitleContainer.innerHTML="",v.forEach(function(b){var p=b.getCueAsHTML(),k=document.createElement("div");k.className="redbee-player-subtitle-cue-container";var P=document.createElement("span");P.className="redbee-player-subtitle-cue",k.appendChild(P),f.positionCue(b,k.style),p&&P.appendChild(p),f.subtitleContainer.appendChild(k)})}},{key:"onAudioChanged",value:function(v){var f,b;this.state.hasStarted&&this.emit(E.PlayerEvents.AUDIO_CHANGED,Object.assign(Object.assign({},this.getDefaultPlayerEvent()),v)),this.setState({audioTrack:v.track,audioTracks:this.getAudioTracks()}),(0,r.setPreferences)({audio:{language:(f=v.track)===null||f===void 0?void 0:f.language,kind:(b=v.track)===null||b===void 0?void 0:b.kind}})}},{key:"onTracksChanged",value:function(v){var f=v.audioTrack,b=v.subtitleTrack,p=v.audioTracks,k=v.subtitleTracks;this.setState({audioTrack:f,subtitleTrack:b,subtitleTracks:k,audioTracks:p})}},{key:"onVolumeChanged",value:function(v){var f=v.volume,b=v.muted;this.emit(E.PlayerEvents.VOLUME_CHANGE,Object.assign(Object.assign({},this.getDefaultPlayerEvent()),{volume:f,muted:b})),this.setState({volume:f,isMuted:b})}},{key:"onBitrateChanged",value:function(v){this.emit(E.PlayerEvents.BITRATE_CHANGED,v)}},{key:"onEnded",value:function(){this.setState({isSeekable:this.isSeekable()}),this.emit(E.PlayerEvents.ENDED,this.getDefaultPlayerEvent())}},{key:"onError",value:function(v){this.destroyed||this.emit(E.PlayerEvents.ERROR,v)}},{key:"positionCue",value:function(v,f){var b=[];if(v.size&&v.size!==100&&(f.width="".concat(v.size,"%")),["start","left"].includes(v.align)?(f.textAlign="left",Number.isFinite(v.position)&&(f.left="".concat(v.position,"%"))):["right","end"].includes(v.align)?(f.textAlign="right",Number.isFinite(v.position)?f.right="".concat(100-v.position,"%"):f.right="0"):(Object.assign(f,{textAlign:"center",left:"0",right:"0"}),Number.isFinite(v.position)&&b.push("translateX(".concat(v.position-50,"%)"))),v.line==="auto")f.bottom="0";else if(Number.isFinite(v.line)){var p=v.line;v.snapToLines?(v.line<0&&(f.bottom="-1em"),b.push("translateY(".concat(100*p,"%)"))):f.top="".concat(v.line,"%")}b.length&&(f.transform=b.join(" "))}},{key:"getStreamInfo",value:function(){if(this.mediaLocator&&this.playbackFormat)return{mediaLocator:this.mediaLocator,format:this.playbackFormat,hasDrm:!!this.license}}},{key:"destroy",value:function(){this.destroyed=!0,this.stop(),this.playerEngine.destroy(),x(N(_.prototype),"destroy",this).call(this)}}],S&&M(m.prototype,S),_}(K(4456).AbstractPlayer);B.BasePlayer=t},4064:(Ee,B,K)=>{function M(l,c){for(var h=0;h<c.length;h++){var y=c[h];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(l,y.key,y)}}function x(l){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},x(l)}function N(l,c){return N=Object.setPrototypeOf||function(h,y){return h.__proto__=y,h},N(l,c)}function C(l){var c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var h,y=x(l);if(c){var i=x(this).constructor;h=Reflect.construct(y,arguments,i)}else h=y.apply(this,arguments);return function(g,d){return!d||((r=d)&&typeof Symbol<"u"&&r.constructor===Symbol?"symbol":typeof r)!="object"&&typeof d!="function"?function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(g):d;var r}(this,h)}}Object.defineProperty(B,"__esModule",{value:!0}),B.LowLatencyPlayer=void 0;var R=K(3217),I=K(9327),E=K(7296),T=function(l){(function(g,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(d&&d.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),d&&N(g,d)})(i,l);var c,h,y=C(i);function i(){return function(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}(this,i),y.apply(this,arguments)}return c=i,(h=[{key:"getPlayerEngine",value:function(){var g,d,r=this.instanceSettings.initOptions.preferredFormats,t=(d=(g=this.instanceSettings)===null||g===void 0?void 0:g.formats)===null||d===void 0?void 0:d.find(function(m){return m.format===R.FormatType.DASH});if(this.mediaLocator=t==null?void 0:t.mediaLocator,this.playbackFormat=t==null?void 0:t.format,(r==null?void 0:r.includes(R.FormatType.DASH))||(r==null?void 0:r.includes(R.FormatType.DASH.toLowerCase())))return new E.DashJs(this.videoElement,this.instanceSettings);var u="Low Latency Support for ".concat(r," not yet implemented");throw new I.InitError(u,{type:I.ErrorTypes.OPTIONS})}}])&&M(c.prototype,h),i}(K(2558).AssetPlayer);B.LowLatencyPlayer=T},9892:function(Ee,B,K){function M(g,d){for(var r=0;r<d.length;r++){var t=d[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,t.key,t)}}function x(g,d,r){return d in g?Object.defineProperty(g,d,{value:r,enumerable:!0,configurable:!0,writable:!0}):g[d]=r,g}function N(g,d){var r,t,u,m,S={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return m={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function A(_){return function(v){return function(f){if(r)throw new TypeError("Generator is already executing.");for(;S;)try{if(r=1,t&&(u=2&f[0]?t.return:f[0]?t.throw||((u=t.return)&&u.call(t),0):t.next)&&!(u=u.call(t,f[1])).done)return u;switch(t=0,u&&(f=[2&f[0],u.value]),f[0]){case 0:case 1:u=f;break;case 4:return S.label++,{value:f[1],done:!1};case 5:S.label++,t=f[1],f=[0];continue;case 7:f=S.ops.pop(),S.trys.pop();continue;default:if(!((u=(u=S.trys).length>0&&u[u.length-1])||f[0]!==6&&f[0]!==2)){S=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){S.label=f[1];break}if(f[0]===6&&S.label<u[1]){S.label=u[1],u=f;break}if(u&&S.label<u[2]){S.label=u[2],S.ops.push(f);break}u[2]&&S.ops.pop(),S.trys.pop();continue}f=d.call(g,S)}catch(b){f=[6,b],t=0}finally{r=u=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([_,v])}}}var C=this&&this.__awaiter||function(g,d,r,t){return new(r||(r=Promise))(function(u,m){var S=function(v){try{_(t.next(v))}catch(f){m(f)}},A=function(v){try{_(t.throw(v))}catch(f){m(f)}},_=function(v){var f,b,p;v.done?u(v.value):(f=v.value,b=f,((p=r)!=null&&typeof Symbol<"u"&&p[Symbol.hasInstance]?p[Symbol.hasInstance](b):b instanceof p)?f:new r(function(k){k(f)})).then(S,A)};_((t=t.apply(g,d||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.ExposureService=void 0;var R,I,E=K(3217),T=K(9327),l=K(4676),c=K(9886),h=(x(R={},E.DRMType.FAIRPLAY,"fairplay"),x(R,E.DRMType.WIDEVINE,"widevine"),x(R,E.DRMType.PLAYREADY,"playready"),R),y=(x(I={},E.FormatType.DASH,"dash"),x(I,E.FormatType.SMOOTHSTREAMING,"mss"),x(I,E.FormatType.HLS,"hls"),x(I,E.FormatType.MP3,"mp3"),x(I,E.FormatType.MP4,void 0),I),i=function(){function g(t){var u=t.customer,m=t.businessUnit,S=t.exposureBaseUrl,A=t.deviceAdapter,_=this;if(function(v,f){if(!(v instanceof f))throw new TypeError("Cannot call a class as a function")}(this,g),!u||!m)throw new T.InitError("No Customer or BusinessUnit defined",{type:T.ErrorTypes.OPTIONS});this.deviceAdapter=A,this.exposure=new E.ExposureApi({customer:u,businessUnit:m,baseUrl:S,authHeader:function(){return{Authorization:"Bearer ".concat(_.sessionToken)}}})}var d,r;return d=g,(r=[{key:"getDeviceInfo",value:function(){return C(this,void 0,void 0,function(){var t;return N(this,function(u){switch(u.label){case 0:return[4,(0,l.getDevice)(this.deviceAdapter)];case 1:return[2,{deviceId:(t=u.sent()).id,type:t.type==="ctv"?E.DeviceType.SMART_TV:E.DeviceType.WEB,name:t.name}]}})})}},{key:"authenticate",value:function(t){var u=t.username,m=t.password;return C(this,void 0,void 0,function(){var S,A,_,v;return N(this,function(f){switch(f.label){case 0:return S=this,u&&m?(_=(A=this.exposure.authentication).login,v={username:u,password:m},[4,this.getDeviceInfo()]):[2,this.authenticateAnonymous()];case 1:return[2,_.apply(A,[(v.device=f.sent(),v)]).then(function(b){return S.sessionToken=b.sessionToken,b}).catch(function(b){throw new T.APIError(b.message,{type:T.ErrorTypes.API_AUTH,code:b.httpCode,rawError:b})})]}})})}},{key:"authenticateAnonymous",value:function(){return C(this,void 0,void 0,function(){var t,u,m,S;return N(this,function(A){switch(A.label){case 0:return t=this,m=(u=this.exposure.authentication).loginAnonymous,S={},[4,this.getDeviceInfo()];case 1:return[2,m.apply(u,[(S.device=A.sent(),S)]).then(function(_){return t.sessionToken=_.sessionToken,_}).catch(function(_){throw new T.APIError(_.message,{type:T.ErrorTypes.API_AUTH_ANON,code:_.httpCode,rawError:_})})]}})})}},{key:"assetMetadata",value:function(t){return this.exposure.content.getAssetById({assetId:t}).catch(function(u){throw new T.APIError(u.message,{type:T.ErrorTypes.API_ASSET,code:u.httpCode,rawError:u})})}},{key:"playRequest",value:function(t){var u=t.assetId,m=t.sessionToken,S=t.adsOptions,A=t.audioOnly,_=t.adobePrimetimeToken,v=t.maxResolution,f=t.supportedFormatTypes,b=t.supportedKeySystem,p=t.materialProfile,k=t.start,P=t.end,j=this;if(!m&&!this.sessionToken)throw new T.InitError("No sessionToken exists",{type:T.ErrorTypes.OPTIONS});var U=f==null?void 0:f.map(function(ee){return y[ee]}).filter(function(ee){return!!ee}),G=[];return b&&G.push(h[b]),this.exposure.entitlements.playAsset(Object.assign(Object.assign(Object.assign(Object.assign({assetId:u,adParameters:S},A&&{audioOnly:A}),v&&{maxResolution:v}),p&&{materialProfile:p}),{start:k,end:P,supportedDrms:G,supportedFormats:U,headers:Object.assign({Authorization:"Bearer ".concat(m||this.sessionToken)},_&&{"X-Adobe-Primetime-MediaToken":_})})).then(function(ee){return j.parsePlayResponse(ee)}).catch(function(ee){throw new T.APIError(ee.message,{type:T.ErrorTypes.API_PLAY_REQUEST,code:ee.httpCode,rawError:ee})})}},{key:"parsePlayResponse",value:function(t){var u,m,S,A,_,v=(u=t==null?void 0:t.contractRestrictions)===null||u===void 0?void 0:u.maxBitrate,f=(m=t==null?void 0:t.contractRestrictions)===null||m===void 0?void 0:m.minBitrate;return v&&(t.contractRestrictions.maxBitrate=1e3*v),f&&(t.contractRestrictions.minBitrate=1e3*f),(0,c.isLGTV)()&&t.streamInfo.ssai&&((S=t.ads)===null||S===void 0?void 0:S.stitcher)===E.Stitcher.NOWTILUS&&((_=(A=t.ads)===null||A===void 0?void 0:A.clips)===null||_===void 0||_.forEach(function(b){var p;(p=b.impressionUrlTemplates)===null||p===void 0||p.forEach(function(k,P){var j=function(G){var ee=b.trackingEvents[G];ee==null||ee.forEach(function(ne,re){ee[re]=ne.replace("https://","http://")})};for(var U in b.impressionUrlTemplates&&(b.impressionUrlTemplates[P]=k.replace("https://","http://")),b.trackingEvents)j(U)})}),t.formats.forEach(function(b){b.vastUrl&&(b.vastUrl=b.vastUrl.replace("https://","http://")),b.mediaLocator=b.mediaLocator.replace("https://","http://")})),t}}])&&M(d.prototype,r),g}();B.ExposureService=i},8360:(Ee,B)=>{function K(x,N){for(var C=0;C<N.length;C++){var R=N[C];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(x,R.key,R)}}Object.defineProperty(B,"__esModule",{value:!0}),B.ContractRestrictionsGuardian=void 0;var M=function(){function x(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(function(I,E){if(!(I instanceof E))throw new TypeError("Cannot call a class as a function")})(this,x),this.contractRestrictions=R,this.contractRestrictions=Object.assign({timeshiftEnabled:!0,ffEnabled:!0,rwEnabled:!0},R),this.clientRestrictions={timeshiftEnabled:!0}}var N,C;return N=x,C=[{key:"setClientRestrictions",value:function(R){this.clientRestrictions=Object.assign(Object.assign({},this.clientRestrictions),R)}},{key:"isSeekingAllowed",value:function(R){var I,E,T=(R||R===0)&&R>=-1&&R<=1,l=this.contractRestrictions.timeshiftEnabled&&this.clientRestrictions.timeshiftEnabled,c=l&&((I=this.contractRestrictions)===null||I===void 0?void 0:I.ffEnabled),h=l&&((E=this.contractRestrictions)===null||E===void 0?void 0:E.rwEnabled);return!!T||!!(R>0&&l&&c)||!!(R<0&&l&&h)||(R>0?!!c:R<0&&!!h)}},{key:"isValidPosition",value:function(R){var I=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.currentPosition)return this.currentPosition=R,{valid:!0,validPosition:this.currentPosition};var E=R-(this.currentPosition||0);return this.isSeekingAllowed(E)||I?(this.currentPosition=R,{valid:!0,validPosition:this.currentPosition}):{valid:!1,validPosition:this.currentPosition}}},{key:"isAirPlayAllowed",value:function(){var R;return!!(!((R=this.contractRestrictions)===null||R===void 0)&&R.airplayEnabled)}}],C&&K(N.prototype,C),x}();B.ContractRestrictionsGuardian=M},6020:(Ee,B)=>{function K(x,N){for(var C=0;C<N.length;C++){var R=N[C];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(x,R.key,R)}}Object.defineProperty(B,"__esModule",{value:!0}),B.FullscreenManager=void 0;var M=function(){function x(R,I){(function(E,T){if(!(E instanceof T))throw new TypeError("Cannot call a class as a function")})(this,x),this.wrapper=R,this.videoElement=I}var N,C;return N=x,(C=[{key:"isFullscreen",value:function(){return document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen}},{key:"enterFullscreen",value:function(){var R,I=this.wrapper,E=this.videoElement;I.requestFullscreen?R=I.requestFullscreen():I.msRequestFullscreen?R=I.msRequestFullscreen():I.mozRequestFullScreen?R=I.mozRequestFullScreen():I.webkitRequestFullscreen?R=I.webkitRequestFullscreen():I.webkitRequestFullScreen?R=I.webkitRequestFullScreen():I.webkitEnterFullscreen?R=I.webkitEnterFullscreen():E.requestFullscreen?R=E.requestFullscreen():E.msRequestFullscreen?R=E.msRequestFullscreen():E.mozRequestFullScreen?R=E.mozRequestFullScreen():E.webkitRequestFullscreen?R=E.webkitRequestFullscreen():E.webkitRequestFullScreen?R=E.webkitRequestFullScreen():E.webkitEnterFullscreen&&(R=E.webkitEnterFullscreen()),R&&R.catch(function(){})}},{key:"exitFullscreen",value:function(){var R,I=this.videoElement;document.exitFullscreen?R=document.exitFullscreen():document.msExitFullscreen?R=document.msExitFullscreen():document.mozCancelFullScreen?R=document.mozCancelFullScreen():document.webkitCancelFullScreen?R=document.webkitCancelFullScreen():document.webkitExitFullscreen?R=document.webkitExitFullscreen():document.webkitExitFullScreen?R=document.webkitExitFullScreen():I.exitFullscreen?R=I.exitFullscreen():I.msExitFullscreen?R=I.msExitFullscreen():I.mozCancelFullScreen?R=I.mozCancelFullScreen():I.webkitCancelFullScreen?R=I.webkitCancelFullScreen():I.webkitExitFullscreen?R=I.webkitExitFullscreen():I.webkitExitFullScreen&&(R=I.webkitExitFullScreen()),R&&R.catch(function(){})}},{key:"toggleFullscreen",value:function(){this.isFullscreen()?this.exitFullscreen():this.enterFullscreen()}}])&&K(N.prototype,C),x}();B.FullscreenManager=M},1049:function(Ee,B,K){function M(R,I){for(var E=0;E<I.length;E++){var T=I[E];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(R,T.key,T)}}var x=this&&this.__awaiter||function(R,I,E,T){return new(E||(E=Promise))(function(l,c){var h=function(g){try{i(T.next(g))}catch(d){c(d)}},y=function(g){try{i(T.throw(g))}catch(d){c(d)}},i=function(g){var d,r,t;g.done?l(g.value):(d=g.value,r=d,((t=E)!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?t[Symbol.hasInstance](r):r instanceof t)?d:new E(function(u){u(d)})).then(h,y)};i((T=T.apply(R,I||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.MediaSessionManager=void 0;var N=K(4456),C=function(){function R(T,l){(function(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")})(this,R),this.playerInstance=T,this.asset=l.assetMetadata,this.customer=document.title||l.initOptions.customer,this.locale=l.initOptions.locale||"en",this.setup()}var I,E;return I=R,(E=[{key:"setup",value:function(){"mediaSession"in navigator&&(this.setMetadata(),this.setupEventListeners(),this.setupStateReporter())}},{key:"setMetadata",value:function(){if(this.asset){var T=this.asset.getTitle(this.locale),l=this.asset.getImages(this.locale).map(function(c){return{src:c.url,sizes:"".concat(c.width,"x").concat(c.height)}});T&&(navigator.mediaSession.metadata=new MediaMetadata({title:T,artist:this.customer,artwork:l}))}}},{key:"setupEventListeners",value:function(){var T=this;try{navigator.mediaSession.setActionHandler("play",function(){return x(T,void 0,void 0,function(){return function(l,c){var h,y,i,g,d={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return g={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function r(t){return function(u){return function(m){if(h)throw new TypeError("Generator is already executing.");for(;d;)try{if(h=1,y&&(i=2&m[0]?y.return:m[0]?y.throw||((i=y.return)&&i.call(y),0):y.next)&&!(i=i.call(y,m[1])).done)return i;switch(y=0,i&&(m=[2&m[0],i.value]),m[0]){case 0:case 1:i=m;break;case 4:return d.label++,{value:m[1],done:!1};case 5:d.label++,y=m[1],m=[0];continue;case 7:m=d.ops.pop(),d.trys.pop();continue;default:if(!((i=(i=d.trys).length>0&&i[i.length-1])||m[0]!==6&&m[0]!==2)){d=0;continue}if(m[0]===3&&(!i||m[1]>i[0]&&m[1]<i[3])){d.label=m[1];break}if(m[0]===6&&d.label<i[1]){d.label=i[1],i=m;break}if(i&&d.label<i[2]){d.label=i[2],d.ops.push(m);break}i[2]&&d.ops.pop(),d.trys.pop();continue}m=c.call(l,d)}catch(S){m=[6,S],y=0}finally{h=i=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([t,u])}}}(this,function(l){switch(l.label){case 0:return[4,this.playerInstance.play()];case 1:return l.sent(),navigator.mediaSession.playbackState="playing",[2]}})})})}catch{}try{navigator.mediaSession.setActionHandler("pause",function(){T.playerInstance.pause(),navigator.mediaSession.playbackState="paused"})}catch{}try{navigator.mediaSession.setActionHandler("seekbackward",function(){T.playerInstance.scrub(-15)})}catch{}try{navigator.mediaSession.setActionHandler("seekforward",function(){T.playerInstance.scrub(15)})}catch{}try{navigator.mediaSession.setActionHandler("seekto",function(l){var c=l.seekTime;c!==null&&T.playerInstance.seekTo(c)})}catch{}}},{key:"setupStateReporter",value:function(){var T,l=this;!((T=navigator.mediaSession)===null||T===void 0)&&T.setPositionState&&this.playerInstance.on(N.INTERNAL_STATE_CHANGED,function(c){!l.playerInstance.isLive()&&c.duration>0&&c.currentTime&&c.currentTime<=c.duration&&navigator.mediaSession.setPositionState({duration:c.duration,position:c.currentTime})})}}])&&M(I.prototype,E),R}();B.MediaSessionManager=C},7312:(Ee,B)=>{function K(x,N){for(var C=0;C<N.length;C++){var R=N[C];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(x,R.key,R)}}Object.defineProperty(B,"__esModule",{value:!0}),B.PictureInPictureManager=void 0;var M=function(){function x(I){(function(E,T){if(!(E instanceof T))throw new TypeError("Cannot call a class as a function")})(this,x),this.videoElement=I}var N,C,R;return N=x,R=[{key:"isSupported",value:function(){var I;return(I=document.pictureInPictureEnabled)!==null&&I!==void 0&&I}}],(C=[{key:"isPictureInPicture",value:function(){return!!document.pictureInPictureElement}},{key:"requestPictureInPicture",value:function(){var I,E;(E=(I=this.videoElement).requestPictureInPicture)===null||E===void 0||E.call(I)}},{key:"exitPictureInPicture",value:function(){var I;(I=document.exitPictureInPicture)===null||I===void 0||I.call(document)}},{key:"togglePictureInPicture",value:function(){this.isPictureInPicture()?this.exitPictureInPicture():this.requestPictureInPicture()}},{key:"destroy",value:function(){this.isPictureInPicture()&&this.exitPictureInPicture()}}])&&K(N.prototype,C),R&&K(N,R),x}();B.PictureInPictureManager=M},129:function(Ee,B,K){var M=this&&this.__awaiter||function(C,R,I,E){return new(I||(I=Promise))(function(T,l){var c=function(i){try{y(E.next(i))}catch(g){l(g)}},h=function(i){try{y(E.throw(i))}catch(g){l(g)}},y=function(i){var g,d,r;i.done?T(i.value):(g=i.value,d=g,((r=I)!=null&&typeof Symbol<"u"&&r[Symbol.hasInstance]?r[Symbol.hasInstance](d):d instanceof r)?g:new I(function(t){t(g)})).then(c,h)};y((E=E.apply(C,R||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.enrichAdsOptions=void 0;var x=K(9327),N=K(9584);B.enrichAdsOptions=function(C,R,I,E){var T;return M(this,void 0,void 0,function(){var l,c,h;return function(y,i){var g,d,r,t,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return t={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(t[Symbol.iterator]=function(){return this}),t;function m(S){return function(A){return function(_){if(g)throw new TypeError("Generator is already executing.");for(;u;)try{if(g=1,d&&(r=2&_[0]?d.return:_[0]?d.throw||((r=d.return)&&r.call(d),0):d.next)&&!(r=r.call(d,_[1])).done)return r;switch(d=0,r&&(_=[2&_[0],r.value]),_[0]){case 0:case 1:r=_;break;case 4:return u.label++,{value:_[1],done:!1};case 5:u.label++,d=_[1],_=[0];continue;case 7:_=u.ops.pop(),u.trys.pop();continue;default:if(!((r=(r=u.trys).length>0&&r[r.length-1])||_[0]!==6&&_[0]!==2)){u=0;continue}if(_[0]===3&&(!r||_[1]>r[0]&&_[1]<r[3])){u.label=_[1];break}if(_[0]===6&&u.label<r[1]){u.label=r[1],r=_;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(_);break}r[2]&&u.ops.pop(),u.trys.pop();continue}_=i.call(y,u)}catch(v){_=[6,v],d=0}finally{g=r=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([S,A])}}}(this,function(y){return l=(0,x.getSessionIFA)(),c=l.ifa,h=l.ifaType,[2,Object.assign({deviceType:I.type,deviceModel:I.model,deviceModelNumber:I.modelNumber,deviceMake:I.manufacturer,width:R.offsetWidth,height:R.offsetHeight,pageUrl:window.location.href,domain:((T=(0,N.getIframeURL)())===null||T===void 0?void 0:T.hostname)||window.location.hostname,mute:R.muted,autoplay:E,ifa:c,ifaType:h},C)]})})}},5614:(Ee,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.getStartTime=void 0,B.getStartTime=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M=K.streamInfo,x=K.bookmarks,N=K.durationInMilliseconds,C=x==null?void 0:x.lastViewedOffset;return M&&!M.live&&C&&N&&C/N<.95?C/1e3:0}},9736:(Ee,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.MIN_DVR_WINDOW=B.PLAYER_OPTIONS=void 0,B.PLAYER_OPTIONS={autoplay:!0,muted:!1,preferredFormats:["dash","hls","mp4","mp3"],keysystem:void 0},B.MIN_DVR_WINDOW=90},8640:(Ee,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.setupVideoElement=void 0;var M=K(9886);B.setupVideoElement=function(){var x=document.createElement("video");return x.setAttribute("playsinline",""),(0,M.getBrowser)()==="firefox"&&x.setAttribute("preload","auto"),x}},9584:function(Ee,B,K){var M=this&&this.__awaiter||function(y,i,g,d){return new(g||(g=Promise))(function(r,t){var u=function(A){try{S(d.next(A))}catch(_){t(_)}},m=function(A){try{S(d.throw(A))}catch(_){t(_)}},S=function(A){var _,v,f;A.done?r(A.value):(_=A.value,v=_,((f=g)!=null&&typeof Symbol<"u"&&f[Symbol.hasInstance]?f[Symbol.hasInstance](v):v instanceof f)?_:new g(function(b){b(_)})).then(u,m)};S((d=d.apply(y,i||[])).next())})},x=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(B,"__esModule",{value:!0}),B.getIframeURL=B.isIframe=B.isAutoplaySupported=B.isMSESupported=B.isNativeHlsSupported=B.getSupportedDrm=B.getSupportedFormats=B.isSupported=void 0;var N=K(3217),C=x(K(9084)),R=K(9327),I=K(9886),E=K(574),T=['video/mp4; codecs="avc1.42E01E"','audio/mp4; codecs="mp4a.40.2"','video/mp2t; codecs="avc1.42E01E"','video/mp2t; codecs="mp4a.40.2"'];function l(y){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"avc1.42E01E";if((0,I.isAppleSafari)()&&window.WebKitMediaKeys&&(!y||y===N.DRMType.FAIRPLAY))return Promise.resolve(N.DRMType.FAIRPLAY);if(navigator.requestMediaKeySystemAccess){var g=[];return(y?[y]:[R.KeySystem.WIDEVINE,R.KeySystem.PLAYREADY]).forEach(function(d){var r=navigator.requestMediaKeySystemAccess(d,[{videoCapabilities:[{robustness:"SW_SECURE_CRYPTO",contentType:'video/mp4; codecs="'.concat(i,'"')}]}]).then(function(t){return t.createMediaKeys()}).then(function(){switch(d){case R.KeySystem.WIDEVINE:return N.DRMType.WIDEVINE;case R.KeySystem.PLAYREADY:return N.DRMType.PLAYREADY;default:return}},function(){});g.push(r)}),Promise.all(g).then(function(d){return d.find(function(r){return!!r})})}return Promise.resolve(void 0)}function c(){if((0,I.isAppleSafari)())try{return!!document.createElement("video").canPlayType("application/vnd.apple.mpegurl")}catch{return!1}return!1}function h(){try{return window.self!==window.top}catch{return!0}}B.isSupported=function(){var y=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return new Promise(function(i,g){var d;window.MediaSource?T.forEach(function(r){var t=window.MediaSource.isTypeSupported(r);(0,E.info)("MimeType: ".concat(r,", supported: ").concat(t)),d===void 0&&(d=t)}):c()&&(d=!0),d&&y?l().then(function(r){r&&i(),g()}):d?i():g()})},B.getSupportedFormats=function(){return(0,I.isAppleSafari)()?[N.FormatType.HLS,N.FormatType.MP3,N.FormatType.MP4]:[N.FormatType.DASH,N.FormatType.HLS,N.FormatType.SMOOTHSTREAMING,N.FormatType.MP3,N.FormatType.MP4]},B.getSupportedDrm=l,B.isNativeHlsSupported=c,B.isMSESupported=function(){return!!window.MediaSource},B.isAutoplaySupported=function(y){return M(this,void 0,void 0,function(){return function(i,g){var d,r,t,u,m={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return u={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function S(A){return function(_){return function(v){if(d)throw new TypeError("Generator is already executing.");for(;m;)try{if(d=1,r&&(t=2&v[0]?r.return:v[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,v[1])).done)return t;switch(r=0,t&&(v=[2&v[0],t.value]),v[0]){case 0:case 1:t=v;break;case 4:return m.label++,{value:v[1],done:!1};case 5:m.label++,r=v[1],v=[0];continue;case 7:v=m.ops.pop(),m.trys.pop();continue;default:if(!((t=(t=m.trys).length>0&&t[t.length-1])||v[0]!==6&&v[0]!==2)){m=0;continue}if(v[0]===3&&(!t||v[1]>t[0]&&v[1]<t[3])){m.label=v[1];break}if(v[0]===6&&m.label<t[1]){m.label=t[1],t=v;break}if(t&&m.label<t[2]){m.label=t[2],m.ops.push(v);break}t[2]&&m.ops.pop(),m.trys.pop();continue}v=g.call(i,m)}catch(f){v=[6,f],r=0}finally{d=t=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([A,_])}}}(this,function(i){switch(i.label){case 0:if((0,I.isSamsungTV)()||(0,I.isLGTV)())return[2,!0];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,C.default.video({muted:!!y,inline:!0})];case 2:return[2,i.sent().result];case 3:return i.sent(),[2,!1];case 4:return[2]}})})},B.isIframe=h,B.getIframeURL=function(){var y;if(h())try{var i=document.referrer||((y=window.top)===null||y===void 0?void 0:y.location.href);if(i)return new URL(i)}catch{}}},574:(Ee,B,K)=>{function M(C,R){(R==null||R>C.length)&&(R=C.length);for(var I=0,E=new Array(R);I<R;I++)E[I]=C[I];return E}function x(C){return function(R){if(Array.isArray(R))return M(R)}(C)||function(R){if(typeof Symbol<"u"&&R[Symbol.iterator]!=null||R["@@iterator"]!=null)return Array.from(R)}(C)||function(R,I){if(R){if(typeof R=="string")return M(R,I);var E=Object.prototype.toString.call(R).slice(8,-1);return E==="Object"&&R.constructor&&(E=R.constructor.name),E==="Map"||E==="Set"?Array.from(E):E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E)?M(R,I):void 0}}(C)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.defineProperty(B,"__esModule",{value:!0}),B.error=B.warn=B.info=B.debug=B.setLogLevel=void 0;var N=new(K(9327)).Logger({prefix:"[PlayerCore]"});B.setLogLevel=function(C){N.setLogLevel(C)},B.debug=function(){for(var C=arguments.length,R=new Array(C),I=0;I<C;I++)R[I]=arguments[I];var E;(E=N).debug.apply(E,x(R))},B.info=function(){for(var C=arguments.length,R=new Array(C),I=0;I<C;I++)R[I]=arguments[I];var E;(E=N).info.apply(E,x(R))},B.warn=function(){for(var C=arguments.length,R=new Array(C),I=0;I<C;I++)R[I]=arguments[I];var E;(E=N).warn.apply(E,x(R))},B.error=function(){for(var C=arguments.length,R=new Array(C),I=0;I<C;I++)R[I]=arguments[I];var E;(E=N).error.apply(E,x(R))}},7798:(Ee,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.setPreferences=B.getPreferences=void 0;var K="@redbeemedia/javascript-player:preferences";function M(){var x;try{var N=localStorage.getItem(K);if(N)return(x=JSON.parse(N))!==null&&x!==void 0?x:{}}catch{}return{}}B.getPreferences=M,B.setPreferences=function(x){try{localStorage.setItem(K,JSON.stringify(Object.assign(Object.assign({},M()),x)))}catch{}}},844:function(Ee,B,K){function M(g,d){(d==null||d>g.length)&&(d=g.length);for(var r=0,t=new Array(d);r<d;r++)t[r]=g[r];return t}function x(g,d){for(var r=0;r<d.length;r++){var t=d[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,t.key,t)}}function N(g,d,r){return N=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,u,m){var S=function(_,v){for(;!Object.prototype.hasOwnProperty.call(_,v)&&(_=C(_))!==null;);return _}(t,u);if(S){var A=Object.getOwnPropertyDescriptor(S,u);return A.get?A.get.call(m||t):A.value}},N(g,d,r||g)}function C(g){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(d){return d.__proto__||Object.getPrototypeOf(d)},C(g)}function R(g,d){return d!=null&&typeof Symbol<"u"&&d[Symbol.hasInstance]?!!d[Symbol.hasInstance](g):g instanceof d}function I(g,d){return!d||((r=d)&&typeof Symbol<"u"&&r.constructor===Symbol?"symbol":typeof r)!="object"&&typeof d!="function"?function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(g):d;var r}function E(g,d){return E=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r},E(g,d)}function T(g){return function(d){if(Array.isArray(d))return M(d)}(g)||function(d){if(typeof Symbol<"u"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}(g)||function(d,r){if(d){if(typeof d=="string")return M(d,r);var t=Object.prototype.toString.call(d).slice(8,-1);return t==="Object"&&d.constructor&&(t=d.constructor.name),t==="Map"||t==="Set"?Array.from(t):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?M(d,r):void 0}}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(g,d){var r,t,u,m,S={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return m={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function A(_){return function(v){return function(f){if(r)throw new TypeError("Generator is already executing.");for(;S;)try{if(r=1,t&&(u=2&f[0]?t.return:f[0]?t.throw||((u=t.return)&&u.call(t),0):t.next)&&!(u=u.call(t,f[1])).done)return u;switch(t=0,u&&(f=[2&f[0],u.value]),f[0]){case 0:case 1:u=f;break;case 4:return S.label++,{value:f[1],done:!1};case 5:S.label++,t=f[1],f=[0];continue;case 7:f=S.ops.pop(),S.trys.pop();continue;default:if(!((u=(u=S.trys).length>0&&u[u.length-1])||f[0]!==6&&f[0]!==2)){S=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){S.label=f[1];break}if(f[0]===6&&S.label<u[1]){S.label=u[1],u=f;break}if(u&&S.label<u[2]){S.label=u[2],S.ops.push(f);break}u[2]&&S.ops.pop(),S.trys.pop();continue}f=d.call(g,S)}catch(b){f=[6,b],t=0}finally{r=u=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([_,v])}}}var c=this&&this.__awaiter||function(g,d,r,t){return new(r||(r=Promise))(function(u,m){var S=function(v){try{_(t.next(v))}catch(f){m(f)}},A=function(v){try{_(t.throw(v))}catch(f){m(f)}},_=function(v){var f;v.done?u(v.value):(f=v.value,R(f,r)?f:new r(function(b){b(f)})).then(S,A)};_((t=t.apply(g,d||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.ProgramService=B.ProgramServiceEvent=void 0;var h=K(3217),y=K(9327);B.ProgramServiceEvent={NEW_PROGRAMS:"new_programs",PROGRAM_CHANGED:"program_changed",NOT_ENTITLED:"not_entitled",BLACKOUT:"blackout",EMPTY_SLOT:"empty_slot"};var i=function(g){(function(A,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(_&&_.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),_&&E(A,_)})(S,g);var d,r,t,u,m=(t=S,u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,_=C(t);if(u){var v=C(this).constructor;A=Reflect.construct(_,arguments,v)}else A=_.apply(this,arguments);return I(this,A)});function S(A){var _,v,f,b=A.asset,p=A.play,k=A.baseUrl,P=A.customer,j=A.businessUnit,U=A.sessionToken;(function(ee,ne){if(!(ee instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,S),(_=m.call(this)).pingState="IDLE",_.storedPrograms=[],_.shouldCheckEntitlement=!1,_.preEntitleTreshold=12e4*Math.random(),_.preEntitlementRequests=new WeakMap,_.exposure=new h.ExposureApi({customer:P,businessUnit:j,baseUrl:k,authHeader:function(){return{Authorization:"Bearer ".concat(U)}}});var G=b.type===h.AssetType.TV_CHANNEL?b.assetId:p.streamInfo.channelId;return G?(_.channelAssetId=G,_.isLinearChannel=!(!((v=b.channelFeatures)===null||v===void 0)&&v.includes(h.ChannelFeature.VIRTUAL)),_.shouldCheckEntitlement=!!(!((f=p.epg)===null||f===void 0)&&f.entitlementCheck),_):I(_)}return d=S,(r=[{key:"ping",value:function(A){var _;return c(this,void 0,void 0,function(){var v,f,b,p;return l(this,function(k){switch(k.label){case 0:return v=this,["DISABLED","REQUESTING"].includes(this.pingState)||A===-1?[2]:(f=this.isLinearChannel?A:void 0,b=this.getCurrentProgram(f),p=this.getUpcomingProgram(f),this.shouldCheckEntitlement&&p&&f&&!this.preEntitlementRequests.has(p)&&this.preEntitleTreshold>new Date(p.startTime).getTime()-f&&this.preEntitlementRequests.set(p,this.isEntitled(p)),!((_=this.watching)===null||_===void 0)&&_.startTime&&this.watching.startTime===(b==null?void 0:b.startTime)?[2]:(this.pingState="REQUESTING",b&&p?[3,2]:[4,this.updatePrograms()]));case 1:k.sent(),b=this.getCurrentProgram(f),p=this.getUpcomingProgram(f),k.label=2;case 2:return this.isSingleEventChannel()?(this.pingState="DISABLED",[2]):b?[3,3]:(this.handleNoProgram(),this.pingState="DISABLED",this.disabledTimeout=window.setTimeout(function(){v.pingState="IDLE"},3e4),[3,5]);case 3:return[4,this.handleProgramChanged(b,p)];case 4:k.sent(),this.pingState="IDLE",k.label=5;case 5:return[2]}})})}},{key:"isSingleEventChannel",value:function(){return this.isLinearChannel&&this.storedPrograms.length===1}},{key:"handleNoProgram",value:function(){this.isLinearChannel&&this.watching&&this.emit(B.ProgramServiceEvent.EMPTY_SLOT,void 0),this.emit(B.ProgramServiceEvent.PROGRAM_CHANGED,{currentProgram:void 0,upcomingProgram:void 0}),this.watching=void 0}},{key:"handleProgramChanged",value:function(A,_){return c(this,void 0,void 0,function(){return l(this,function(v){switch(v.label){case 0:return A?(this.watching=A,R(A,h.Program)&&A.blackout?(this.emit(B.ProgramServiceEvent.BLACKOUT,A),[3,3]):[3,1]):[2,this.handleNoProgram()];case 1:return[4,this.isEntitled(A)];case 2:v.sent()?this.emit(B.ProgramServiceEvent.PROGRAM_CHANGED,{currentProgram:A,upcomingProgram:_}):(console.warn("User is not entitled to the current program",A),this.emit(B.ProgramServiceEvent.NOT_ENTITLED,A)),v.label=3;case 3:return[2]}})})}},{key:"getCurrentProgram",value:function(A){var _=A||new Date().getTime();return this.storedPrograms.find(function(v){return new Date(v.startTime).getTime()<_&&new Date(v.endTime).getTime()>_})}},{key:"getUpcomingProgram",value:function(A){var _=A||new Date().getTime();return this.storedPrograms.find(function(v){return new Date(v.startTime).getTime()>_})}},{key:"updatePrograms",value:function(){return c(this,void 0,void 0,function(){var A;return l(this,function(_){switch(_.label){case 0:return[4,this.getPrograms()];case 1:return(A=_.sent()).length===0||(A.sort(function(v,f){return new Date(v.startTime).getTime()-new Date(f.startTime).getTime()}),this.storedPrograms=A,this.emit(B.ProgramServiceEvent.NEW_PROGRAMS,{programs:A})),[2]}})})}},{key:"isEntitled",value:function(A){var _;return c(this,void 0,void 0,function(){var v,f,b;return l(this,function(p){switch(p.label){case 0:return this.shouldCheckEntitlement?(v=this.preEntitlementRequests.get(A))?[4,v]:[3,2]:[2,!0];case 1:return f=p.sent(),this.preEntitlementRequests.delete(A),[2,f];case 2:return(b=this.isLinearChannel?(_=A.asset)===null||_===void 0?void 0:_.assetId:this.channelAssetId)?[2,this.exposure.entitlements.getEntitlementForAsset({assetId:b,time:new Date(Math.max(new Date().getTime(),new Date(A.startTime).getTime()+1))}).then(function(){return!0},function(){return!1})]:[2,!1]}})})}},{key:"getPrograms",value:function(){return c(this,void 0,void 0,function(){var A,_,v,f;return l(this,function(b){switch(b.label){case 0:if(!this.channelAssetId)return console.warn("[ProgramService] Failed to get programs, no channel assetId found"),[2,[]];b.label=1;case 1:return b.trys.push([1,5,,6]),this.isLinearChannel?[4,this.exposure.content.getEpg({channelId:this.channelAssetId,daysForward:0,daysBackward:0})]:[3,3];case 2:return[2,b.sent().programs];case 3:return[4,this.exposure.content.getOnNowByChannelId({channelId:this.channelAssetId,minutesForward:100})];case 4:return A=b.sent().assets,_=this.storedPrograms.map(function(p){return p.startTime}),v=A.filter(function(p){return!_.includes(p.startTime)}),[2,T(this.storedPrograms).concat(T(v))];case 5:return f=b.sent(),console.warn("[ProgramService] Failed to get programs",f),[2,[]];case 6:return[2]}})})}},{key:"destroy",value:function(){N(C(S.prototype),"destroy",this).call(this),clearTimeout(this.disabledTimeout)}}])&&x(d.prototype,r),S}(y.EmitterBaseClass);B.ProgramService=i},802:function(Ee,B,K){function M(R,I){for(var E=0;E<I.length;E++){var T=I[E];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(R,T.key,T)}}var x=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(B,"__esModule",{value:!0}),B.EmitterBaseClass=void 0;var N=x(K(837)),C=function(){function R(){(function(T,l){if(!(T instanceof l))throw new TypeError("Cannot call a class as a function")})(this,R),this.allHandlers=new Map,this.emitter=(0,N.default)()}var I,E;return I=R,(E=[{key:"emit",value:function(T,l){this.emitter?this.emitter.emit(T,l):console.warn("[EmitterBaseClass] trying to emit on destroyed emitter")}},{key:"once",value:function(T,l){var c,h=this,y=function(i){var g;(g=h.emitter)===null||g===void 0||g.off(T,y),l(i)};(c=this.emitter)===null||c===void 0||c.on(T,y)}},{key:"on",value:function(T,l){var c;(c=this.emitter)===null||c===void 0||c.on(T,l)}},{key:"onAll",value:function(T){var l,c=function(h,y){T({event:h,data:y})};this.allHandlers.has(T)&&this.offAll(T),this.allHandlers.set(T,c),(l=this.emitter)===null||l===void 0||l.on("*",c)}},{key:"off",value:function(T,l){var c;(c=this.emitter)===null||c===void 0||c.off(T,l)}},{key:"offAll",value:function(T){var l,c=this.allHandlers.get(T);c?(l=this.emitter)===null||l===void 0||l.off("*",c):console.warn("[EmitterBaseClass] trying to remove non-existing all handler")}},{key:"addEventListener",value:function(T,l){this==null||this.on(T,l)}},{key:"removeEventListener",value:function(T,l){this==null||this.off(T,l)}},{key:"destroy",value:function(){var T;(T=this.emitter)===null||T===void 0||T.off("*"),this.emitter=void 0}}])&&M(I.prototype,E),R}();B.EmitterBaseClass=C},7185:(Ee,B)=>{function K(C,R){(R==null||R>C.length)&&(R=C.length);for(var I=0,E=new Array(R);I<R;I++)E[I]=C[I];return E}function M(C,R){for(var I=0;I<R.length;I++){var E=R[I];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(C,E.key,E)}}function x(C){return function(R){if(Array.isArray(R))return K(R)}(C)||function(R){if(typeof Symbol<"u"&&R[Symbol.iterator]!=null||R["@@iterator"]!=null)return Array.from(R)}(C)||function(R,I){if(R){if(typeof R=="string")return K(R,I);var E=Object.prototype.toString.call(R).slice(8,-1);return E==="Object"&&R.constructor&&(E=R.constructor.name),E==="Map"||E==="Set"?Array.from(E):E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E)?K(R,I):void 0}}(C)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.defineProperty(B,"__esModule",{value:!0}),B.Logger=B.LogLevel=void 0,B.LogLevel={DEBUG:0,INFO:1,WARN:2,ERROR:3,NONE:4};var N=function(){function C(E){var T;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,C),this.prefix=E.prefix,this.logLevel=(T=E.logLevel)!==null&&T!==void 0?T:B.LogLevel.ERROR,this.initTime=Date.now()}var R,I;return R=C,I=[{key:"setLogLevel",value:function(E){this.logLevel=E}},{key:"debug",value:function(){for(var E=arguments.length,T=new Array(E),l=0;l<E;l++)T[l]=arguments[l];var c;this.logLevel<=B.LogLevel.DEBUG&&(c=console).debug.apply(c,[this.prefix].concat(x(T),[Date.now()-this.initTime]))}},{key:"info",value:function(){for(var E=arguments.length,T=new Array(E),l=0;l<E;l++)T[l]=arguments[l];var c;this.logLevel<=B.LogLevel.INFO&&(c=console).info.apply(c,[this.prefix].concat(x(T)))}},{key:"warn",value:function(){for(var E=arguments.length,T=new Array(E),l=0;l<E;l++)T[l]=arguments[l];var c;this.logLevel<=B.LogLevel.WARN&&(c=console).warn.apply(c,[this.prefix].concat(x(T)))}},{key:"error",value:function(){for(var E=arguments.length,T=new Array(E),l=0;l<E;l++)T[l]=arguments[l];var c;this.logLevel<=B.LogLevel.ERROR&&(c=console).error.apply(c,[this.prefix].concat(x(T)))}}],I&&M(R.prototype,I),C}();B.Logger=N},4746:(Ee,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.QuickSeekTime=void 0,B.QuickSeekTime=10},8468:(Ee,B)=>{function K(t,u){(u==null||u>t.length)&&(u=t.length);for(var m=0,S=new Array(u);m<u;m++)S[m]=t[m];return S}function M(t,u){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}function x(t,u,m){return x=T()?Reflect.construct:function(S,A,_){var v=[null];v.push.apply(v,A);var f=new(Function.bind.apply(S,v));return _&&I(f,_.prototype),f},x.apply(null,arguments)}function N(t,u){for(var m=0;m<u.length;m++){var S=u[m];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(t,S.key,S)}}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},C(t)}function R(t,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(u&&u.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),u&&I(t,u)}function I(t,u){return I=Object.setPrototypeOf||function(m,S){return m.__proto__=S,m},I(t,u)}function E(t){var u=typeof Map=="function"?new Map:void 0;return E=function(m){if(m===null||(S=m,Function.toString.call(S).indexOf("[native code]")===-1))return m;var S;if(typeof m!="function")throw new TypeError("Super expression must either be null or a function");if(u!==void 0){if(u.has(m))return u.get(m);u.set(m,A)}function A(){return x(m,arguments,C(this).constructor)}return A.prototype=Object.create(m.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),I(A,m)},E(t)}function T(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function l(t){var u=T();return function(){var m,S=C(t);if(u){var A=C(this).constructor;m=Reflect.construct(S,arguments,A)}else m=S.apply(this,arguments);return function(_,v){return!v||((f=v)&&typeof Symbol<"u"&&f.constructor===Symbol?"symbol":typeof f)!="object"&&typeof v!="function"?function(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}(_):v;var f}(this,m)}}Object.defineProperty(B,"__esModule",{value:!0}),B.ShakaPlayerError=B.HlsJsPlayerError=B.DashJsPlayerError=B.InitError=B.UserError=B.APIError=B.PlayerError=B.ErrorTypes=void 0,B.ErrorTypes={GENERIC:"GENERIC",OPTIONS:"INIT_OPTIONS",ABORTED:"ABORTED",API_AUTH:"AUTH_FAILED",API_AUTH_ANON:"AUTH_ANON_FAILED",API_PLAY_REQUEST:"PLAY_REQUEST_FAILED",API_ASSET:"ASSET_REQUEST_FAILED",DECODE:"DECODE_ERROR",DRM:"DRM_ERROR",NETWORK:"NETWORK_ERROR",STREAM_NOT_AVAILABLE:"STREAM_NOT_AVAILABLE",STREAM_LIMIT:"STREAM_LIMIT_REACHED",NOT_AUTHENTICATED:"SESSION_NOT_AUTHENTICATED",NOT_AUTHORIZED:"UNAUTHORIZED",GEO_LOCATION:"GEOLOCATION",MANIFEST:"MANIFEST_ERROR",SEGMENT:"SEGMENT_ERROR",MEDIA:"MEDIA_ERROR",CODEC:"CODEC",CAST:"CAST",PLAYER_ENGINE:"GENERIC_PLAYERENGINE_ERROR",UNSUPPORTED_DEVICE:"UNSUPPORTED_DEVICE",UNSUPPORTED_SCREEN:"UNSUPPORTED_SCREEN",OTHER:"OTHER_ERROR",DESTROYED:"DESTROYED",SRC_NOT_SUPPORTED:"SOURCE_NOT_SUPPORTED"};var c=function(t){R(A,t);var u,m,S=l(A);function A(_,v){var f,b=v.type,p=v.code,k=v.rawError;return M(this,A),(f=S.call(this,_)).category="PLAYER",f.message=_,f.metadata=Object.assign(Object.assign({type:b},Number.isFinite(p)&&{code:p}),k&&{rawError:k}),f}return u=A,(m=[{key:"toString",value:function(){var _=Object.entries(this.metadata).filter(function(v){return(f=v,b=1,function(p){if(Array.isArray(p))return p}(f)||function(p,k){var P=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(P!=null){var j,U,G=[],ee=!0,ne=!1;try{for(P=P.call(p);!(ee=(j=P.next()).done)&&(G.push(j.value),!k||G.length!==k);ee=!0);}catch(re){ne=!0,U=re}finally{try{ee||P.return==null||P.return()}finally{if(ne)throw U}}return G}}(f,b)||function(p,k){if(p){if(typeof p=="string")return K(p,k);var P=Object.prototype.toString.call(p).slice(8,-1);return P==="Object"&&p.constructor&&(P=p.constructor.name),P==="Map"||P==="Set"?Array.from(P):P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P)?K(p,k):void 0}}(f,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]!=="rawError";var f,b}).map(function(v){return v.join(": ")}).join(", ");return"".concat(this.category," Error: ").concat(this.message," {").concat(_,"}")}}])&&N(u.prototype,m),A}(E(Error));B.PlayerError=c;var h=function(t){R(m,t);var u=l(m);function m(){var S;return M(this,m),(S=u.call.apply(u,[this].concat(Array.prototype.slice.call(arguments)))).category="API",S}return m}(c);B.APIError=h;var y=function(t){R(m,t);var u=l(m);function m(){var S;return M(this,m),(S=u.call.apply(u,[this].concat(Array.prototype.slice.call(arguments)))).category="USER",S}return m}(c);B.UserError=y;var i=function(t){R(m,t);var u=l(m);function m(){var S;return M(this,m),(S=u.call.apply(u,[this].concat(Array.prototype.slice.call(arguments)))).category="INIT",S}return m}(c);B.InitError=i;var g=function(t){R(m,t);var u=l(m);function m(){var S;return M(this,m),(S=u.call.apply(u,[this].concat(Array.prototype.slice.call(arguments)))).category="DASHJS",S}return m}(c);B.DashJsPlayerError=g;var d=function(t){R(m,t);var u=l(m);function m(){var S;return M(this,m),(S=u.call.apply(u,[this].concat(Array.prototype.slice.call(arguments)))).category="HLSJS",S}return m}(c);B.HlsJsPlayerError=d;var r=function(t){R(m,t);var u=l(m);function m(){var S;return M(this,m),(S=u.call.apply(u,[this].concat(Array.prototype.slice.call(arguments)))).category="SHAKAPLAYER",S}return m}(c);B.ShakaPlayerError=r},2813:(Ee,B)=>{function K(N,C){(C==null||C>N.length)&&(C=N.length);for(var R=0,I=new Array(C);R<C;R++)I[R]=N[R];return I}Object.defineProperty(B,"__esModule",{value:!0}),B.getSessionIFA=B.getDeviceId=B.getUUID=B.base64EncodeUint8Array=B.base64DecodeUint8Array=B.arrayToString=B.stringToArray=B.debounce=B.clamp=void 0,B.clamp=function(N,C,R){return R?Math.min(Math.max(N,C),R):Math.min(N,C)},B.debounce=function(N){var C,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500;return function(){for(var I=arguments.length,E=new Array(I),T=0;T<I;T++)E[T]=arguments[T];clearTimeout(C),C=setTimeout(function(){var l;N.apply(void 0,function(c){if(Array.isArray(c))return K(c)}(l=E)||function(c){if(typeof Symbol<"u"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}(l)||function(c,h){if(c){if(typeof c=="string")return K(c,h);var y=Object.prototype.toString.call(c).slice(8,-1);return y==="Object"&&c.constructor&&(y=c.constructor.name),y==="Map"||y==="Set"?Array.from(y):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?K(c,h):void 0}}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},R)}},B.stringToArray=function(N){for(var C=new ArrayBuffer(2*N.length),R=new Uint16Array(C),I=0,E=N.length;I<E;I++)R[I]=N.charCodeAt(I);return R},B.arrayToString=function(N){var C=new Uint16Array(N.buffer);return String.fromCharCode.apply(null,C)},B.base64DecodeUint8Array=function(N){for(var C=window.atob(N),R=C.length,I=new Uint8Array(new ArrayBuffer(R)),E=0;E<R;E++)I[E]=C.charCodeAt(E);return I},B.base64EncodeUint8Array=function(N){for(var C,R,I,E,T,l,c,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",y="",i=0;i<N.length;)E=(C=N[i++])>>2,T=(3&C)<<4|(R=i<N.length?N[i++]:Number.NaN)>>4,l=(15&R)<<2|(I=i<N.length?N[i++]:Number.NaN)>>6,c=63&I,isNaN(R)?l=c=64:isNaN(I)&&(c=64),y+=h.charAt(E)+h.charAt(T)+h.charAt(l)+h.charAt(c);return y},B.getUUID=function(){return[x(),x(),"-",x(),"-",x(),"-",x(),"-",x(),x(),x()].join("")};var M="deviceId";B.getDeviceId=function(N){if(N)return N.split("|")[7];var C=localStorage.getItem(M);if(C)return C;var R=(0,B.getUUID)();try{localStorage.setItem(M,R)}catch{}return R},B.getSessionIFA=function(){return{ifa:(0,B.getUUID)(),ifaType:"sessionid"}};var x=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}},9327:function(Ee,B,K){var M=this&&this.__createBinding||(Object.create?function(N,C,R,I){I===void 0&&(I=R);var E=Object.getOwnPropertyDescriptor(C,R);E&&!("get"in E?!C.__esModule:E.writable||E.configurable)||(E={enumerable:!0,get:function(){return C[R]}}),Object.defineProperty(N,I,E)}:function(N,C,R,I){I===void 0&&(I=R),N[I]=C[R]}),x=this&&this.__exportStar||function(N,C){for(var R in N)R==="default"||Object.prototype.hasOwnProperty.call(C,R)||M(C,N,R)};Object.defineProperty(B,"__esModule",{value:!0}),x(K(802),B),x(K(2813),B),x(K(7185),B),x(K(8468),B),x(K(4746),B),x(K(3576),B),x(K(2715),B),x(K(9497),B)},9497:(Ee,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.TrackingEvent=void 0,B.TrackingEvent={LOADED:"loaded",START:"start",IMPRESSION:"impression",COMPLETE:"complete",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",CLICK_THROUGH:"clickThrough"}},3576:(Ee,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.KeySystem=void 0,B.KeySystem={FAIRPLAY:"com.apple.fps.1_0",WIDEVINE:"com.widevine.alpha",PLAYREADY:"com.microsoft.playready",PLAYREADY_CHROMECAST:"com.chromecast.playready"}},2715:(Ee,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.ContentType=B.PlayerEvents=B.HtmlVideoElementEvents=B.PlaybackState=void 0,B.PlaybackState={IDLE:"idle",LOADING:"loading",PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering",SEEKING:"seeking",ENDED:"ended",ERROR:"error"},B.HtmlVideoElementEvents={ERROR:"error",LOADEDMETADATA:"loadedmetadata",LOADSTART:"loadstart",LOADEDDATA:"loadeddata",CANPLAY:"canplay",CANPLAYTHROUGH:"canplaythrough",PLAY:"play",PLAYING:"playing",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",RATECHANGE:"ratechange",VOLUMECHANGE:"volumechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",WAITING:"waiting"},B.PlayerEvents={PLAY:"player:play",PAUSE:"player:pause",STOP:"player:stopped",START:"player:start",RESUME:"player:resume",PLAYING:"player:playing",SEEKING:"player:seeking",SEEK_TIME_CHANGE:"player:seek_time_change",SEEKED:"player:seeked",TIME_UPDATE:"player:timeupdate",ENDED:"player:ended",VOLUME_CHANGE:"player:volumechange",ERROR:"player:error",LOADING:"player:loading",LOADED:"player:loaded",LOAD_START:"player:load_start",BUFFERING:"player:buffering",BUFFERED:"player:buffered",ID3:"player:id3",BITRATE_CHANGED:"player:bitrate_changed",CDN_CHANGED:"player:cdn_changed",AUDIO_CHANGED:"player:audio_changed",SUBTITLE_CHANGED:"player:subtitle_changed",LICENSE_EXPIRED:"player:license_expired",DROPPED_FRAMES:"player:dropped_frames",DRM_UPDATE:"player:drm:update",STATE_CHANGED:"player:state_changed",PROGRAM_CHANGED:"player:program_changed",NOT_ENTITLED:"player:not_entitled",BLACKOUT:"player:blackout",EMPTY_SLOT:"player:empty_slot",CAST_START:"player:cast:start",CAST_STOP:"player:cast:stop",AIRPLAY_START:"player:airplay:start",AIRPLAY_STOP:"player:airplay:stop",AD_START:"player:ad:start",AD_COMPLETE:"player:ad:complete",ADBLOCK_START:"player:adblock:start",ADBLOCK_COMPLETE:"player:adblock:complete",INTRO_START:"player:intro:start",INTRO_END:"player:intro:end",CHAPTER_START:"player:chapter:start",CHAPTER_END:"player:chapter:end",MARKER:"player:marker",METADATA_EVENT:"player:metadata_event",SESSION_ACQUIRED:"player:session_acquired",PLAYER_SETUP_COMPLETED:"player:setup_completed",ENTITLEMENT_GRANTED:"player:entitlement_granted"},B.ContentType={VOD:"vod",LIVE:"live",AD:"ad",PODCAST:"podcast"}},1455:(Ee,B,K)=>{var M=K(3847),x=K(2779),N=K(4619),C=K(9327),R=K(5300),I=K(6032),E=K(1664),T=K(3217),l=K(1316),c=K(1132),h=K(4085),y=K(8571),i=K(8269),g=K(2482),d=K(3407),r=K(5650),t=K(7949),u=K(3713),m=K(2046),S=K(138),A=K(2640),_=K(1904),v=K(1610),f=K(4849),b=K(5639),p=K(5790),k=K(99),P=K(7414),j=K(5951),U=K(6765);function G(Bt){return Bt&&typeof Bt=="object"&&"default"in Bt?Bt:{default:Bt}}var ee=G(x),ne=G(R),re=G(I),oe=G(E),W=G(l),Te=G(c),Ue=G(h),ze=G(y),le=G(i),Se=G(g),be=G(d),Y=G(r),Q=G(t),J=G(u),fe=G(m),Ce=G(S),V=G(A),H=G(_),z=G(v),X=G(f),de=G(b),ge=G(p),Ge=G(k),it=G(P),Ye=G(j),Ke=G(U);function dt(){return dt=Object.assign||function(Bt){for(var dn=1;dn<arguments.length;dn++){var Un=arguments[dn];for(var or in Un)Object.prototype.hasOwnProperty.call(Un,or)&&(Bt[or]=Un[or])}return Bt},dt.apply(this,arguments)}var me={hideControlsTimer:2500,showMetadata:!0,showWallClock:!1,showQualitySelector:!0,showSubtitlesToggleButton:!1,showJumpButtons:!0,allowPictureInPicture:!0,keyboardShortcuts:!0},ke={container:"_32d2E",slideIn:"_3Zb76",isMobile:"_1V6qg",hidden:"_3KnJr",skipButtonExit:"_19Nqb",slideOut:"_1vZRJ",skipButton:"_3URXY",title:"_1TEP_"};function Je(Bt){var dn,Un=Bt.showSkipOption,or=Bt.locale,ir=Bt.currentTime,gr=Bt.contentMarker,Hr=Bt.seekTo,qr=Bt.isMobile,Dr=N.useState(!1),Br=Dr[0],pi=Dr[1],zi=N.useState(!1),Mi=zi[0],ga=zi[1],Wi=gr&&Un;N.useEffect(function(){Wi&&!Br?pi(!0):!Wi&&Br&&(ga(!0),setTimeout(function(){pi(!1),ga(!1)},500))},[ir]);var Gi=N.useCallback(function(){gr!=null&&gr.endOffset&&Hr({time:gr.endOffset/1e3})},[gr]);return M.h("div",{class:ee.default(ke.container,(dn={},dn[ke.skipButtonExit]=Mi,dn[ke.hidden]=!Br,dn[ke.isMobile]=qr,dn)),onClick:Gi},M.h("div",{class:ke.skipButton},M.h(ne.default,null),M.h("div",{class:ke.title},gr==null?void 0:gr.getTitle(or))))}var Xe={container:"_3419Z"};function nt(){return M.h("div",{class:Xe.container},M.h(re.default,null))}var Tt={container:"_rU2Ct"};function bt(){return M.h("div",{class:Tt.container},M.h(oe.default,null))}var Ft={container:"_2eFId",loader:"_1GpXo",rotation:"_3uxkO"};function pn(){return M.h("div",{class:Ft.container},M.h("span",{class:Ft.loader}))}var wn={META_DATA_VIEW:"metaDataView",CONTENT_MARKERS_MENU:"contentMarkersMenu",SETTINGS_MENU:"settings"},hn={container:"_1TgRO",isMobile:"_3_ddh",adIndexLabel:"_3j_Sr"};function Xn(Bt){var dn,Un=Bt.currentAdIndex,or=Bt.currentAdBreakTotal;return M.h("div",{class:ee.default(hn.container,(dn={},dn[hn.isMobile]=Bt.isMobile,dn))},M.h("div",{class:hn.adIndexLabel},"Ad ",Un,"/",or))}var on={container:"_3DXEF",isMobile:"_1UrHa",hidden:"_2FQfr",clickthroughButton:"_3H9cN"};function Zn(Bt){var dn,Un=Bt.isMobile,or=Bt.onClickThrough,ir=Bt.clickThroughUrl,gr=N.useCallback(function(){or==null||or()},[or]);return M.h("div",{class:ee.default(on.container,(dn={},dn[on.hidden]=!ir,dn[on.isMobile]=Un,dn)),onClick:gr},M.h("div",{class:on.clickthroughButton},M.h(W.default,null)))}var Bn={container:"_11vjr"};function Rr(Bt){return M.h("div",{class:Bn.container,onClick:Bt.onClick},M.h(Te.default,null))}var Nr={container:"_DgBRn"};function Ir(Bt){var dn=Bt.poster;return M.h("div",{class:Nr.container,style:dn&&{backgroundColor:"#000",backgroundImage:'url("'+dn+'")',backgroundSize:"cover",backgroundPosition:"50% 50%"},onClick:Bt.onClick},M.h(Ue.default,null))}var nn={buttonContainer:"_2nN78"};function rn(Bt){return M.h("div",null,M.h("div",{class:nn.buttonContainer,onClick:Bt.toggleMenu},M.h(ze.default,null)))}var $t={container:"_34Jhj"};function Nt(Bt){return M.h("div",{class:$t.container,onClick:Bt.onClick},M.h(Bt.isFullscreen?le.default:Se.default,null))}var en={container:"_1VyRO"};function _t(Bt){return M.h("div",{class:en.container,onClick:Bt.onClick},M.h(be.default,null))}function pt(Bt){return M.h("div",{class:en.container,onClick:Bt.onClick},M.h(Y.default,null))}var wt={container:"_1vAKO",dvr:"_GqDdc"};function Dt(Bt){var dn;return M.h("span",{onClick:Bt.seekToLive,class:ee.default(wt.container,(dn={},dn[wt.dvr]=!Bt.isAtLiveEdge,dn))},"LIVE")}var Vt={container:"_2pY-9"};function Wt(Bt){return M.h("div",{class:Vt.container,onClick:Bt.onClick},M.h(Q.default,null))}var fn={container:"_1tv7R"};function ht(Bt){var dn=Bt.state,Un=Bt.pausable,or=Bt.onClick,ir=Bt.className,gr=M.h(Un===void 0||Un?J.default:fe.default,null);return M.h("div",{class:ee.default(fn.container,ir),onClick:or},dn!==C.PlaybackState.PLAYING?M.h(Ue.default,null):gr)}var jn={buttonContainer:"_RfXVQ"};function vn(Bt){return M.h("div",null,M.h("div",{class:jn.buttonContainer,onClick:Bt.toggleMenu},M.h(Ce.default,null)))}var fr={container:"_3hwFe"};function Sr(Bt){return M.h("div",{class:fr.buttonContainer,onClick:Bt.onClick},M.h(V.default,Bt.isEnabled?{color:"rgba(255, 255, 255, 1"}:{color:"rgba(255, 255, 255, 0.5"}))}var Zr={container:"_2BtDj",hoverIndicator:"_3Sx29",wrapper:"_2Q199",hoverBar:"_3t6-H",progress:"_11XW_",indicator:"_2mBFW",adBreakContainer:"_1ylyW",marker:"_ufH7s"};function zn(Bt,dn){return parseFloat((Bt/dn*100).toFixed(2))}function gn(Bt){var dn,Un=Bt.currentTarget;return zn(Bt.changedTouches[0].clientX-(dn=Un,dn.__RBM_CLIENT_RECT||(dn.__RBM_CLIENT_RECT=dn.getBoundingClientRect())).left,Un.offsetWidth)}function En(Bt){var dn,Un,or=Bt.value,ir=Bt.hoverIndicator,gr=Bt.adMarkerPositions,Hr=Bt.onSelect;or=Math.min(or,100);var qr=N.useState(-1),Dr=qr[0],Br=qr[1],pi=N.useRef(null),zi=N.useRef(null),Mi=(dn=zi.current)==null?void 0:dn.getBoundingClientRect(),ga=(Un=pi.current)==null?void 0:Un.getBoundingClientRect(),Wi=N.useState(50),Gi=Wi[0],Yn=Wi[1],na=N.useState(0),Ar=na[0],Ma=na[1],Io=N.useState(0),ma=Io[0],Wa=Io[1],Ta=N.useState(Dr),Uo=Ta[0],Xa=Ta[1],Qa=N.useCallback(function(Ci){Ci.preventDefault(),Br(gn(Ci))},[]),io=N.useCallback(function(Ci){Ci.preventDefault(),Hr(gn(Ci)),Br(-1),Ci.currentTarget.__RBM_CLIENT_RECT=null},[Hr]),qo=N.useCallback(function(Ci){var pa=zn(Ci.offsetX,Ci.currentTarget.offsetWidth);Br(pa)},[]),Ai=N.useCallback(function(){Br(-1)},[]),To=N.useCallback(function(Ci){Hr(zn(Ci.offsetX,Ci.currentTarget.offsetWidth))},[Hr]),ia=Dr>-1,wa={left:"0",width:"0"};return ia&&(or>Dr?(wa.left=or-(or-Dr)+"%",wa.width=or-Dr+"%"):or<Dr&&(wa.left=or+"%",wa.width=Dr-or+"%")),N.useLayoutEffect(function(){if(Mi&&ga){var Ci=zn(Mi.width,ga.width),pa=parseFloat((Ci/2).toFixed(2));Ma(pa);var qa=parseFloat((100-Ci/2).toFixed(2));Wa(qa),Dr>pa&&Dr<qa?Yn(50):Dr<=pa?(Xa(0),Yn(0)):Dr>=qa&&(Xa(100),Yn(100))}},[Dr,ga,Mi,Gi]),M.h("div",{ref:pi,class:Zr.container,onTouchStart:Qa,onTouchMove:Qa,onTouchEnd:io,onMouseMove:qo,onMouseUp:To,onMouseLeave:Ai},ir&&ia&&M.h("span",{ref:zi,class:Zr.hoverIndicator,style:{left:function(Ci){return Ci<Ar||Ci>ma?Uo:Ci}(Dr)+"%",transform:"TranslateX(-"+function(Ci){return Ci<Ar||Ci>ma?Gi:50}(Dr)+"%)"}},ir(Dr)),M.h("div",{class:Zr.wrapper},M.h("div",{class:Zr.progress,style:{width:or+"%"}},M.h("div",{className:Zr.indicator})),gr&&M.h("div",{className:Zr.adBreakContainer},gr.map(function(Ci,pa){return M.h("span",{key:pa+"-"+Ci,className:Zr.marker,style:{left:Ci+"%"}})})),M.h("div",{class:Zr.hoverBar,style:wa})))}var Nn={container:"_1nZkz",noSlider:"_3U4fn",buttonContainer:"_3wkNM",volumeContainer:"_2OVVl",open:"_3PjhD"},pr=1e3;function Or(Bt){var dn,Un,or=Bt.muted,ir=Bt.onClick,gr=Bt.volume,Hr=Bt.onSelect,qr=Bt.disableSlider,Dr=N.useRef(),Br=N.useState(!1),pi=Br[0],zi=Br[1],Mi=N.useCallback(function(){window.clearTimeout(Dr.current),qr||zi(!0)},[qr]),ga=N.useCallback(function(){return Dr.current=window.setTimeout(function(){return zi(!1)},pr)},[]);return M.h("div",{class:ee.default(Nn.container,(dn={},dn[Nn.noSlider]=qr,dn)),onMouseOver:Mi,onMouseOut:ga},M.h("div",{class:Nn.buttonContainer,onClick:ir},M.h(or?z.default:H.default,null)),M.h("div",{class:ee.default(Nn.volumeContainer,(Un={},Un[Nn.open]=pi,Un))},M.h(En,{onSelect:Hr,value:100*gr})))}function ci(Bt,dn){dn===void 0&&(dn=!0);try{return new Intl.DateTimeFormat("sv-SE",dt({hour:"2-digit",minute:"2-digit"},dn&&{second:"2-digit"},Bt&&{timeZone:Bt}))}catch(Un){if(Bt)return ci(void 0,dn);throw Un}}function di(Bt){return Bt===void 0&&(Bt=0),[Math.floor(Bt/3600)%24,Math.floor(Bt/60)%60,Math.floor(Bt%60)].map(function(dn){return dn<10?"0"+dn:dn}).filter(function(dn,Un){return dn!=="00"||Un>0}).join(":")}function Fi(Bt,dn){var Un=ci(dn);return new Date(Bt).getFullYear()===1970&&(Bt*=1e3),Un.format(new Date(Bt))}var Ni={container:"_3vqel",slideIn:"_3hg8n",hidden:"_1yNNj",window:"_1TMy5",fullscreen:"_3Lb8U",selected:"_xwgYJ",header:"_1uqBq",menuWrapper:"_2jfsE",selectMenu:"_3I0Ix",menuHeader:"_1Euqk",noSubtitle:"_2Jd1Y",item:"_d02vn",itemTime:"_1tIPD",itemText:"_1k0jD"};function Ui(Bt){var dn=Bt.items,Un=Bt.seekTo,or=Bt.setActiveView,ir=Bt.locale;return dn?M.h("div",{class:Ni.selectMenu},M.h("div",{class:Ni.menuHeader},Bt.icon),M.h("ul",null,dn.map(function(gr,Hr){return M.h("li",{key:gr.type+"_"+Hr,onClick:N.useCallback(function(){var qr;Un({time:(qr=gr.offset,qr/1e3)}),or(void 0)},[gr])},M.h("div",{class:Ni.item},M.h("div",{class:Ni.itemTime},di(gr.offset/1e3)),M.h("div",{class:Ni.itemText},M.h("div",null,gr.getTitle(ir)))))}))):null}function Ri(Bt){var dn,Un=Bt.visible,or=Bt.contentMarkers,ir=or===void 0?[]:or,gr=Bt.fillScreen,Hr=Bt.locale,qr=Bt.setActiveView,Dr=Bt.seekTo;return M.h("div",{class:ee.default(Ni.container,(dn={},dn[Ni.fullscreen]=gr,dn[Ni.window]=!gr,dn[Ni.hidden]=!Un,dn))},M.h("div",{onClick:function(){return qr(void 0)},class:Ni.header},M.h(X.default,null)),M.h("div",{class:Ni.menuWrapper},!!ir.length&&M.h(Ui,{icon:M.h(de.default,null),items:ir.filter(function(Br){return Br.type===T.MarkerType.POINT||Br.type===T.MarkerType.CHAPTER}),seekTo:Dr,setActiveView:qr,locale:Hr})))}function _i(Bt){var dn=Bt.doubleTap,Un=Bt.singleTap,or=N.useRef();return N.useCallback(function(ir){ir.preventDefault(),ir.stopPropagation(),or.current?(window.clearTimeout(or.current),or.current=void 0,dn==null||dn()):or.current=window.setTimeout(function(){Un==null||Un(),or.current=void 0},300)},[dn,Un])}var ki={container:"_7FxMm",touchRight:"_2fUle",touchLeft:"_AfwQM"};function Za(Bt){var dn=Bt.seekTo,Un=Bt.onSingleTap,or=Bt.isSkinHidden,ir=Bt.pointer,gr=ir!==void 0&&ir,Hr=N.useCallback(function(Mi){return Mi.preventDefault()},[]),qr=N.useCallback(function(Mi){return Mi.preventDefault()},[]),Dr=N.useCallback(function(Mi){return Mi.stopPropagation()},[]),Br=_i({doubleTap:N.useCallback(function(){dn({change:C.QuickSeekTime})},[dn]),singleTap:Un}),pi=_i({doubleTap:N.useCallback(function(){dn({change:-C.QuickSeekTime})},[dn]),singleTap:Un}),zi=dt({},gr&&{cursor:"pointer"},or&&{zIndex:99});return M.h("div",{class:ki.container,onTouchStart:Hr,onTouchMove:Dr,onClick:qr,style:zi},M.h("div",{class:ki.touchLeft,onTouchStart:pi,onClick:pi}),M.h("div",{class:ki.touchRight,onTouchStart:Br,onClick:Br}))}var Oa={metadata:"_1Sdtw",slideIn:"_2pTlw",hidden:"_DmR0M",container:"_2pJ9F",imageWrapper:"_210G6",aspectWrapper:"_x2O1k",image:"_29LSN",contentHolder:"_LqCI7",textWrapper:"_fyjIp"};function Bi(Bt){var dn,Un=Bt.asset,or=Bt.visible,ir=N.useMemo(function(){if(!Un||!Un.image)return null;var gr=new URL(Un.image);return gr.searchParams.set("w","307"),gr.searchParams.set("h","171"),gr.toString()},[Un]);return Un&&Un.title?M.h("div",{class:ee.default(Oa.metadata,(dn={},dn[Oa.hidden]=!or,dn))},M.h("div",{class:Oa.container},ir&&M.h("div",{class:Oa.imageWrapper},M.h("div",{class:Oa.aspectWrapper},M.h("img",{class:Oa.image,src:ir}))),M.h("div",{class:Oa.contentHolder},M.h("h4",null,Un.title),M.h("span",null,Un.duration),M.h("div",{class:Oa.textWrapper},M.h("p",null,Un.description))))):null}var Tr={container:"__GuUB",slideIn:"_3YdZV",hidden:"_1gECW",window:"_1OLpT",fullscreen:"_1su-z",selected:"_RVPoc",header:"_363TS",menuWrapper:"_2l7t-",selectMenu:"_3RhiK",menuHeader:"_1qu8J",noSubtitle:"_1rTkm"};function ji(Bt){var dn,Un=Bt.items,or=Bt.onSelect,ir=Bt.selected,gr=Bt.isSubtitles;return Un.length===0?null:M.h("div",{class:Tr.selectMenu},M.h("div",{class:Tr.menuHeader},Bt.icon),M.h("ul",null,gr&&M.h("li",{class:ee.default(Tr.noSubtitle,(dn={},dn[Tr.selected]=!ir,dn)),onClick:function(){return or(void 0)}},"Off"),Un.map(function(Hr){return M.h("li",{key:Hr.id,class:Hr.language===(ir==null?void 0:ir.language)&&Hr.label===(ir==null?void 0:ir.label)?Tr.selected:"",onClick:function(){return or(Hr)}},Hr.label)})))}function fo(Bt){var dn=Bt.items,Un=Bt.onSelect,or=Bt.selected;return dn.length===0?null:M.h("div",{class:Tr.selectMenu},M.h("div",{class:Tr.menuHeader},Bt.icon),M.h("ul",null,dn.map(function(ir){return M.h("li",{key:ir.id,class:ir.id===or.id?Tr.selected:"",onClick:function(){return Un(ir)}},ir.name||ir.height)})))}function xi(Bt){var dn=Bt.qualityLevels;return Bt.subtitleTracks.length>=1||Bt.audioTracks.length>=2||dn&&dn.length>2}function bo(Bt){var dn,Un=Bt.visible,or=Bt.subtitleTrack,ir=Bt.subtitleTracks,gr=Bt.audioTrack,Hr=Bt.audioTracks,qr=Bt.qualityLevel,Dr=Bt.qualityLevels,Br=Bt.fillScreen,pi=Bt.setActiveView,zi=Bt.onAudioTrackChange,Mi=Bt.onSubtitleTrackChange,ga=Bt.onQualityLevelChange;return M.h("div",{class:ee.default(Tr.container,(dn={},dn[Tr.fullscreen]=Br,dn[Tr.window]=!Br,dn[Tr.hidden]=!Un,dn))},M.h("div",{onClick:function(){return pi()},class:Tr.header},M.h(X.default,null)),M.h("div",{class:Tr.menuWrapper},ir&&ir.length>=1&&M.h(ji,{selected:or,items:ir,icon:M.h(it.default,null),onSelect:Mi,isSubtitles:!0}),Hr&&Hr.length>=2&&M.h(ji,{selected:gr,items:Hr,icon:M.h(ge.default,null),onSelect:zi}),Dr&&Dr.length>2&&M.h(fo,{icon:M.h(Ge.default,null),selected:qr,items:Dr,onSelect:ga})))}var ho={hoverIndicator:"_Jbest",sprite:"_3Tzwy",visible:"_1sJ7V"};function ni(Bt){var dn,Un,or=Bt.isLive,ir=Bt.spriteCue,gr=Bt.time,Hr=Bt.duration;Un=Bt.showWallClock?Fi(gr,Bt.timeZone):or?"- "+di(Math.max(Hr-gr,0)):""+di(Math.max(gr,0));var qr=N.useState(!1),Dr=qr[0],Br=qr[1];return N.useEffect(function(){if(Br(!1),ir!=null&&ir.image){var pi=new Image;return pi.onload=function(){return Br(!0)},pi.src=ir.image,function(){return pi.onload=null}}},[ir==null?void 0:ir.image]),M.h("div",{class:ho.hoverIndicator},ir&&M.h("div",{class:ee.default(ho.sprite,(dn={},dn[ho.visible]=Dr,dn)),style:{width:ir.dimensions.width+"px",height:ir.dimensions.height+"px",backgroundImage:"url("+ir.image+")",backgroundPosition:-ir.dimensions.x+"px "+-ir.dimensions.y+"px"}}),M.h("span",null,Un))}function kn(Bt){var dn=Bt.seekable,Un=Bt.seekTo,or=Bt.isLive,ir=Bt.currentTime,gr=Bt.timelineSpriteCues,Hr=Bt.showWallClock,qr=Bt.timeZone,Dr=Bt.utcSeekable,Br=Bt.adMarkerPositions,pi=Hr?(Dr.end-Dr.start)/1e3:dn.end-dn.start,zi=N.useCallback(function(Wi){Un({time:dn.start+Wi*(dn.end-dn.start)/100})},[dn]),Mi=N.useCallback(function(Wi){var Gi=Wi/100*pi,Yn=gr.find(function(na){return Gi>=na.start&&Gi<na.end});return M.h(ni,{isLive:or,showWallClock:Hr,timeZone:qr,spriteCue:Yn,time:Hr?Dr.start+1e3*Gi:Gi,duration:pi})},[pi,gr,or,Hr,qr,Dr.start]),ga=function(Wi,Gi,Yn){return parseFloat(((Yn-Wi)/(Gi-Wi)*100).toFixed(2))}(dn.start,dn.end,ir);return M.h(En,{value:ga,onSelect:zi,hoverIndicator:Mi,adMarkerPositions:Br})}var nr={container:"_2aAzG",time:"_-LGHu"};function $r(Bt){var dn=Bt.seekable,Un=Bt.seekTo,or=Bt.seekToLive,ir=Bt.isLive,gr=Bt.currentTime,Hr=Bt.isAtLiveEdge,qr=Bt.timelineSpriteCues,Dr=Bt.showWallClock,Br=Bt.timeZone,pi=Bt.utcCurrentTime,zi=Bt.utcSeekable,Mi=Bt.adMarkerPositions,ga=dn.end-dn.start,Wi=Hr?"00:00":"- "+di(dn.end-gr),Gi=Dr?Fi(pi,Br):ir?Wi:di(gr);return M.h("div",{class:nr.container},M.h("span",{class:nr.time},Gi),M.h(kn,{seekable:dn,seekTo:Un,isLive:ir,currentTime:gr,timelineSpriteCues:qr,showWallClock:Dr,timeZone:Br,utcCurrentTime:pi,utcSeekable:zi,adMarkerPositions:Mi}),ir?M.h(Dt,{seekToLive:or,isAtLiveEdge:Hr}):M.h("span",{class:nr.time},Dr?Fi(zi.end,Br):di(ga)))}function Ji(Bt){var dn=Bt.onSkinHidden,Un=Bt.onSkinVisible,or=Bt.isSkinHidden;N.useEffect(function(){or?dn==null||dn():Un==null||Un()},[or,dn,Un])}function ea(Bt){var dn=Bt.userActiveTimeout,Un=N.useState(!1),or=Un[0],ir=Un[1],gr=N.useRef();N.useEffect(function(){return function(){return window.clearTimeout(gr.current)}},[]);var Hr=N.useCallback(function(){window.clearTimeout(gr.current),ir(!0),gr.current=window.setTimeout(function(){ir(!1)},dn)},[dn]),qr=N.useCallback(function(){window.clearTimeout(gr.current),ir(!or)},[or]);return[or,Hr,qr]}var ta={wrapper:"_3e55Y",fadeIn:"_1qkAi",bottomContainer:"_1E4JP",hidden:"_3N1LC",controls:"_3ANvu",buttons:"_YcWq-",menuButtons:"_2z-QK",divider:"_1FTJ8"};function Li(Bt){var dn,Un,or,ir,gr,Hr,qr,Dr,Br,pi,zi,Mi,ga,Wi,Gi,Yn=Bt.player,na=Bt.options,Ar=Bt.playerState,Ma=Bt.metadata,Io=Bt.locale,ma=Bt.toggleAirPlay,Wa=Bt.togglePlayPause,Ta=Bt.toggleMute,Uo=Bt.changeAudioTrack,Xa=Bt.changeTextTrack,Qa=Bt.changeQualityLevel,io=Bt.seekTo,qo=Bt.seekToLive,Ai=Bt.toggleFullscreen,To=Bt.togglePictureInPicture,ia=Bt.toggleSubtitles,wa=Bt.setVolume,Ci=Bt.onSkinHidden,pa=Bt.onSkinVisible,qa=N.useState(),jr=qa[0],Xi=qa[1],Ia=ea({userActiveTimeout:(dn=na.hideControlsTimer)!=null?dn:2500}),Da=Ia[1],po="ontouchstart"in document.documentElement,_o=!Ar.isCasting&&!Ia[0]&&Ar.playbackState!==C.PlaybackState.IDLE&&Ar.playbackState!==C.PlaybackState.PAUSED&&jr!==wn.SETTINGS_MENU&&jr!==wn.CONTENT_MARKERS_MENU;Ji({onSkinHidden:Ci,onSkinVisible:pa,isSkinHidden:_o});var es=!Ar.isSeekable||!na.showJumpButtons||Ar.contractRestrictions&&Ar.contractRestrictions.rwEnabled===!1,ps=!Ar.isSeekable||!na.showJumpButtons||Ar.contractRestrictions&&Ar.contractRestrictions.ffEnabled===!1||Ar.isAtLiveEdge,ts=!Ar.isCasting&&(!Ar.hasStarted||Ar.isLive&&!Ar.isSeekable)&&(Ar.playbackState===C.PlaybackState.PAUSED||Ar.playbackState===C.PlaybackState.IDLE),gs=na.showWallClock&&Ar.utcDuration>-1,Fs=((Un=Ar.adMarkers)==null?void 0:Un.map(function(no){return no.startTime/Ar.duration*100}))||[],tu=!((or=Ar.contentMarkers)==null||!or.filter(function(no){return no.type===T.MarkerType.CHAPTER||no.type===T.MarkerType.POINT}).length),ns=!((ir=Ar.currentAd)==null||!ir.clickThrough||!jr||jr===wn.CONTENT_MARKERS_MENU||jr===wn.SETTINGS_MENU),nu=(gr=Ar.currentAd)==null?void 0:gr.clickThrough,Us=N.useCallback(function(){po?Da():Yn.clickThrough()},[]);N.useEffect(function(){na.showMetadata&&!jr&&Xi(wn.META_DATA_VIEW)},[jr,na.showMetadata]);var ao=N.useRef(null);return N.useEffect(function(){var no,ru,al=_o?0:(no=(ru=ao.current)==null?void 0:ru.clientHeight)!=null?no:0;Yn.getSubtitleContainerElement().style.marginBottom=al+"px"},[_o,Yn,ao,Ar.isSeekable,jr]),M.h("div",{class:ta.wrapper,onMouseMove:Da,onTouchMove:Da},M.h(Za,{seekTo:io,onSingleTap:Us,isSkinHidden:_o,pointer:ns}),ts&&M.h(Ir,{poster:(Yn==null||(Hr=Yn.getSession())==null||(qr=Hr.loadOptions)==null?void 0:qr.poster)||(Ma==null||(Dr=Ma.asset)==null?void 0:Dr.image),onClick:Wa}),Ar.contentType===C.ContentType.AD&&((Br=Ar.currentAd)==null?void 0:Br.adIndex)&&((pi=Ar.currentAd)==null?void 0:pi.adsTotal)&&M.h(Xn,{currentAdIndex:(zi=Ar.currentAd)==null?void 0:zi.adIndex,currentAdBreakTotal:(Mi=Ar.currentAd)==null?void 0:Mi.adsTotal,isMobile:!1}),ns&&M.h(Zn,{isMobile:!1,onClickThrough:function(){return Yn.clickThrough()},clickThroughUrl:nu}),!ts&&M.h("div",{class:ee.default(ta.bottomContainer,(ga={},ga[ta.hidden]=_o,ga))},M.h(bo,{fillScreen:!1,visible:jr===wn.SETTINGS_MENU,audioTrack:Ar.audioTrack,audioTracks:Ar.audioTracks,subtitleTrack:Ar.subtitleTrack,subtitleTracks:Ar.subtitleTracks,qualityLevel:Ar.qualityLevel,qualityLevels:Ar.qualityLevels,setActiveView:Xi,onAudioTrackChange:Uo,onSubtitleTrackChange:Xa,onQualityLevelChange:Qa}),M.h("div",{ref:ao},na.showMetadata&&M.h(Bi,{asset:Ma==null?void 0:Ma.asset,visible:jr===wn.META_DATA_VIEW}),M.h(Ri,{visible:jr===wn.CONTENT_MARKERS_MENU,contentMarkers:(Wi=Ar.contentMarkers)!=null?Wi:[],duration:Ar.duration,fillScreen:!1,locale:Io,seekTo:io,setActiveView:function(no){return Xi(no)}}),M.h("div",{class:ta.controls},M.h("div",{class:ta.buttons},M.h(ht,{pausable:Ar.isSeekable,state:Ar.playbackState,onClick:Wa}),!es&&M.h(_t,{onClick:function(){return io({change:-C.QuickSeekTime})}}),!ps&&M.h(pt,{onClick:function(){return io({change:C.QuickSeekTime})}}),M.h(Or,{muted:Ar.isMuted,onClick:Ta,volume:Ar.volume||0,onSelect:wa}),Ar.isLive&&!Ar.isSeekable&&M.h(Dt,{seekToLive:qo,isAtLiveEdge:Ar.isAtLiveEdge}),M.h("div",{class:ta.divider}),M.h("div",{class:ta.menuButtons},tu&&M.h(rn,{toggleMenu:jr===wn.CONTENT_MARKERS_MENU?function(){return Xi(void 0)}:function(){return Xi(wn.CONTENT_MARKERS_MENU)}}),xi(dt({subtitleTracks:Ar.subtitleTracks,audioTracks:Ar.audioTracks},na.showQualitySelector&&{qualityLevels:Ar.qualityLevels}))&&M.h(vn,{toggleMenu:jr===wn.SETTINGS_MENU?function(){return Xi(void 0)}:function(){return Xi(wn.SETTINGS_MENU)}})),na.showSubtitlesToggleButton&&Ar.subtitleTracks.length===1&&M.h(Sr,{isEnabled:!!Ar.subtitleTrack,onClick:ia}),Ar.isAirPlayAvailable&&M.h(Rr,{onClick:ma}),Ar.isCastAvailable&&M.h("google-cast-launcher",null),Yn.isPictureInPictureSupported()&&na.allowPictureInPicture&&M.h(Wt,{onClick:To}),M.h(Nt,{isFullscreen:(Gi=Yn.isFullscreen())!=null&&Gi,onClick:Ai})),Ar.isSeekable&&M.h($r,{isAtLiveEdge:Ar.isAtLiveEdge,seekToLive:qo,isLive:Ar.isLive,seekTo:io,currentTime:Ar.currentTime,seekable:Ar.seekable,utcCurrentTime:Ar.utcCurrentTime,utcSeekable:Ar.utcSeekable,timelineSpriteCues:Ma.timelineSpriteCues,showWallClock:gs!=null&&gs,timeZone:na.timeZone,adMarkerPositions:Fs})))))}var fa={wrapper:"_43nOJ",fadeIn:"_1z0w6",touchContainer:"_2EzNR",touchRight:"_28kQw",touchLeft:"_3RGq6",centerContainer:"_HdJO2",playPauseStop:"_OM5Hq",bottomContainer:"_Rtsud",hidden:"_72MRU",controls:"_2yju1",time:"_rGVQo",buttons:"_1oJX7",divider:"_3aPMK"};function ai(Bt){var dn,Un,or,ir,gr,Hr,qr,Dr,Br,pi,zi,Mi,ga,Wi=Bt.player,Gi=Bt.options,Yn=Bt.playerState,na=Bt.metadata,Ar=Bt.locale,Ma=Bt.toggleAirPlay,Io=Bt.togglePlayPause,ma=Bt.toggleMute,Wa=Bt.changeAudioTrack,Ta=Bt.changeTextTrack,Uo=Bt.changeQualityLevel,Xa=Bt.seekTo,Qa=Bt.seekToLive,io=Bt.toggleFullscreen,qo=Bt.togglePictureInPicture,Ai=Bt.toggleSubtitles,To=Bt.setVolume,ia=Bt.onSkinHidden,wa=Bt.onSkinVisible,Ci=N.useState(),pa=Ci[0],qa=Ci[1],jr=ea({userActiveTimeout:(dn=Gi.hideControlsTimer)!=null?dn:2500}),Xi=jr[0],Ia=jr[1],Da=jr[2],po=N.useCallback(function(){Da()},[Da]),_o=Yn.hasStarted&&!Yn.isCasting&&!Xi&&!pa&&Yn.playbackState!==C.PlaybackState.IDLE;Ji({onSkinHidden:ia,onSkinVisible:wa,isSkinHidden:_o});var es=!Yn.isSeekable||!Gi.showJumpButtons||Yn.contractRestrictions&&Yn.contractRestrictions.rwEnabled===!1,ps=!Yn.isSeekable||!Gi.showJumpButtons||Yn.contractRestrictions&&Yn.contractRestrictions.ffEnabled===!1||Yn.isAtLiveEdge,ts=Gi.showWallClock&&Yn.utcDuration>-1,gs=ts?Fi(Yn.utcCurrentTime,Gi.timeZone):di(Yn.currentTime),Fs=ts?Fi(Yn.utcDuration,Gi.timeZone):di(Yn.duration),tu=((Un=Yn.adMarkers)==null?void 0:Un.map(function(ao){return ao.startTime/Yn.duration*100}))||[],ns=!((or=Yn.contentMarkers)==null||!or.filter(function(ao){return ao.type===T.MarkerType.CHAPTER||ao.type===T.MarkerType.POINT}).length),nu=!((ir=Yn.currentAd)==null||!ir.clickThrough||!pa||pa===wn.CONTENT_MARKERS_MENU||pa===wn.SETTINGS_MENU),Us=N.useRef(null);return N.useEffect(function(){var ao,no,ru=_o?0:(ao=(no=Us.current)==null?void 0:no.clientHeight)!=null?ao:0;Wi.getSubtitleContainerElement().style.marginBottom=ru+"px"},[_o,Wi,Us,Yn.isSeekable,pa]),M.h("div",{class:fa.wrapper,onMouseMove:Ia},M.h(Za,{seekTo:Xa,onSingleTap:po,isSkinHidden:_o}),Yn.contentType===C.ContentType.AD&&((gr=Yn.currentAd)==null?void 0:gr.adIndex)&&((Hr=Yn.currentAd)==null?void 0:Hr.adsTotal)&&M.h(Xn,{currentAdIndex:(qr=Yn.currentAd)==null?void 0:qr.adIndex,currentAdBreakTotal:(Dr=Yn.currentAd)==null?void 0:Dr.adsTotal,isMobile:!0}),nu&&M.h(Zn,{isMobile:!0,onClickThrough:function(){return Wi.clickThrough()},clickThroughUrl:(Br=Yn.currentAd)==null?void 0:Br.clickThrough}),M.h("div",{class:ee.default(fa.centerContainer,(pi={},pi[fa.hidden]=_o,pi))},!es&&M.h(_t,{onClick:function(){return Xa({change:-C.QuickSeekTime})}}),M.h(ht,{pausable:Yn.isSeekable,state:Yn.playbackState,onClick:Io,className:fa.playPauseStop}),!ps&&M.h(pt,{onClick:function(){return Xa({change:C.QuickSeekTime})}})),M.h(Ri,{visible:pa===wn.CONTENT_MARKERS_MENU,contentMarkers:(zi=Yn.contentMarkers)!=null?zi:[],duration:Yn.duration,seekTo:Xa,fillScreen:!0,setActiveView:function(ao){return qa(ao)},locale:Ar}),M.h(bo,{visible:pa===wn.SETTINGS_MENU,fillScreen:!0,onQualityLevelChange:Uo,onAudioTrackChange:Wa,onSubtitleTrackChange:Ta,audioTrack:Yn.audioTrack,subtitleTrack:Yn.subtitleTrack,setActiveView:qa,subtitleTracks:Yn.subtitleTracks,audioTracks:Yn.audioTracks,qualityLevel:Yn.qualityLevel,qualityLevels:Yn.qualityLevels}),!pa&&M.h("div",{ref:Us,class:ee.default(fa.bottomContainer,(Mi={},Mi[fa.hidden]=_o,Mi))},M.h("div",{class:fa.controls},M.h("div",{class:fa.buttons},Yn.isLive&&M.h(Dt,{seekToLive:Qa,isAtLiveEdge:Yn.isAtLiveEdge}),!Yn.isLive&&M.h("span",{class:fa.time},gs," / ",Fs),M.h("div",{class:fa.divider}),ns&&M.h(rn,{toggleMenu:pa===wn.CONTENT_MARKERS_MENU?function(){return qa(void 0)}:function(){return qa(wn.CONTENT_MARKERS_MENU)}}),xi(dt({audioTracks:Yn.audioTracks,subtitleTracks:Yn.subtitleTracks},Gi.showQualitySelector&&{qualityLevels:Yn.qualityLevels}))&&M.h(vn,{toggleMenu:pa===wn.SETTINGS_MENU?function(){return qa(void 0)}:function(){return qa(wn.SETTINGS_MENU)}}),Gi.showSubtitlesToggleButton&&Yn.subtitleTracks.length===1&&M.h(Sr,{isEnabled:!!Yn.subtitleTrack,onClick:Ai}),Yn.isAirPlayAvailable&&M.h(Rr,{onClick:Ma}),Yn.isCastAvailable&&M.h("google-cast-launcher",null),Wi.isPictureInPictureSupported()&&Gi.allowPictureInPicture&&M.h(Wt,{onClick:qo}),M.h(Or,{muted:Yn.isMuted,onClick:ma,volume:Yn.volume||0,onSelect:To,disableSlider:!0}),M.h(Nt,{isFullscreen:(ga=Wi.isFullscreen())!=null&&ga,onClick:io})),Yn.isSeekable&&M.h(kn,{isLive:Yn.isLive,seekTo:Xa,currentTime:Yn.currentTime,seekable:Yn.seekable,timelineSpriteCues:na.timelineSpriteCues,showWallClock:ts!=null&&ts,timeZone:Gi.timeZone,utcCurrentTime:Yn.utcCurrentTime,utcSeekable:Yn.utcSeekable,adMarkerPositions:tu}))))}var Yi=function(Bt,dn,Un){var or;Un===void 0&&(Un="en");var ir=dn!=null&&(or=dn.asset)!=null&&or.getTitle(Un)?dn.asset:Bt,gr={image:ir.getImage(T.ImageOrientation.LANDSCAPE,Un),title:ir.getTitle(Un),description:ir.getShortDescription(Un)||ir.getMediumDescription(Un)||""};return dn!=null&&dn.startTime&&dn.endTime?gr.duration=[new Date(dn.startTime),new Date(dn.endTime)].map(function(Hr){return ci(void 0,!1).format(Hr)}).join(" - "):Bt.duration&&(gr.duration=function(Hr,qr){return Ye.default(Hr,{language:qr,fallbacks:["en"],round:!0})}(Bt.duration,Un)),gr};function to(Bt){var dn,Un=Bt.player,or=Bt.options,ir=Bt.onSkinHidden,gr=Bt.onSkinVisible,Hr=Un.getSession().locale,qr=N.useRef(null),Dr=function(Ai,To){var ia=N.useState({isCasting:!1,isCastAvailable:!1,isAirPlaying:!1,isAirPlayAvailable:!1,playbackState:C.PlaybackState.IDLE,currentTime:0,duration:0,seekable:{start:0,end:0},utcCurrentTime:0,utcDuration:0,utcSeekable:{start:0,end:0},currentAd:null,adMarkers:[],contentMarkers:[],subtitleTrack:null,subtitleTracks:[],audioTrack:null,audioTracks:[],qualityLevel:{id:-1,name:"auto",bandwidth:-1,width:-1,height:-1},qualityLevels:[],droppedFrames:0,bufferingEvents:0,volume:1,hasStarted:!1,isMuted:!1,isLive:!1,isSeekable:!1,isAtLiveEdge:!1,contractRestrictions:void 0}),wa=ia[0],Ci=ia[1],pa=N.useState({asset:void 0,playbackFormat:void 0,timelineSpriteCues:[],activeIntro:void 0}),qa=pa[0],jr=pa[1];return N.useEffect(function(){Ai.on(C.PlayerEvents.STATE_CHANGED,function(Xi){Ci(function(Ia){return dt({},Ia,Xi)})}),Ai.on(C.PlayerEvents.LOADED,function(){Ai.getAssetInfo()&&(jr(function(Xi){var Ia,Da=Ai.getAssetInfo();return dt({},Xi,{asset:Da&&Yi(Da,(Ia=Ai.getProgramInfo())==null?void 0:Ia.current,To),playbackFormat:Ai.getSession().playbackFormat})}),Ai.getTimelineSpriteCues().then(function(Xi){jr(function(Ia){return dt({},Ia,{timelineSpriteCues:Xi})})}))}),Ai.on(C.PlayerEvents.PROGRAM_CHANGED,function(Xi){var Ia=Xi.channel,Da=Xi.program;jr(function(po){return dt({},po,{asset:Yi(Ia,Da,To)})})}),Ai.on(C.PlayerEvents.INTRO_START,function(Xi){var Ia=Xi.contentMarker;jr(function(Da){return dt({},Da,{activeIntro:Ia})})}),Ai.on(C.PlayerEvents.INTRO_END,function(Xi){var Ia=Xi.contentMarker;jr(function(Da){var po;return dt({},Da,{activeIntro:Ia.offset===((po=Da.activeIntro)==null?void 0:po.offset)?void 0:Da.activeIntro})})})},[]),N.useEffect(function(){var Xi,Ia;return window.addEventListener("resize",Xi=function(){clearTimeout(Ia),Ia=window.setTimeout(function(){Ai.getTimelineSpriteCues().then(function(Da){Ci(function(po){return dt({},po,{timelineSpriteCues:Da})})})},500)}),function(){return window.removeEventListener("resize",Xi)}},[]),[wa,qa]}(Un,Hr),Br=Dr[0],pi=Dr[1],zi=N.useCallback(function(){Un.isPlaying()?Un.pause():Un.play()},[]),Mi=N.useCallback(function(){return Un.toggleMuted()},[]),ga=N.useCallback(function(Ai){Un.setAudioTrack(Ai)},[]),Wi=N.useCallback(function(Ai){Un.setSubtitleTrack(Ai)},[]),Gi=N.useCallback(function(Ai){Ai&&Un.setQualityLevel(Ai)},[]),Yn=N.useCallback(function(Ai){return Un.seekTo({change:Ai.change,time:Ai.time})},[]),na=N.useCallback(function(){return Un.seekToLive()},[]),Ar=N.useCallback(function(){return Un.toggleFullscreen()},[]),Ma=N.useCallback(function(){return Un.togglePictureInPicture()},[]),Io=N.useCallback(function(){return Un.toggleAirPlay()},[]),ma=N.useCallback(function(){var Ai=Un.getSubtitleTracks(),To=!Un.getSubtitleTrack()&&Ai.length>0;Un.setSubtitleTrack(To?Ai[0]:void 0)},[]),Wa=N.useCallback(function(Ai){Un.setVolume({percentage:Ai})},[]),Ta=!!(qr.current&&qr.current.offsetHeight<=640&&/iphone|ipod|ipad|android|blackberry|windows phone|iemobile|wpdesktop/.test(window.navigator.userAgent.toLowerCase())),Uo=Ta?ai:Li,Xa=Br.playbackState===C.PlaybackState.LOADING||Br.playbackState===C.PlaybackState.BUFFERING||Br.playbackState===C.PlaybackState.SEEKING,Qa=ea({userActiveTimeout:2.5*((dn=or.hideControlsTimer)!=null?dn:2800)}),io=Qa[0],qo=Qa[1];return Br.isCasting||Br.playbackState!==C.PlaybackState.IDLE?Br.playbackState===C.PlaybackState.ERROR?M.h(bt,null):M.h("div",{ref:qr,tabIndex:0,class:ee.default("_2jAm9"),onMouseMove:qo},M.h(Je,{isMobile:Ta,showSkipOption:io,locale:Hr,currentTime:Br.currentTime,contentMarker:pi.activeIntro,seekTo:Yn}),M.h("div",{class:"_26gPd"},(Br==null?void 0:Br.isCasting)&&M.h(nt,null),Xa&&M.h(pn,null)),M.h(Uo,{player:Un,options:or,playerState:Br,metadata:pi,locale:Hr,toggleAirPlay:Io,togglePlayPause:zi,toggleMute:Mi,changeAudioTrack:ga,changeTextTrack:Wi,changeQualityLevel:Gi,seekTo:Yn,seekToLive:na,toggleFullscreen:Ar,togglePictureInPicture:Ma,toggleSubtitles:ma,setVolume:Wa,onSkinHidden:ir,onSkinVisible:gr})):null}var Aa={TOGGLE_PLAY:"space",FORWARD:"right",BACKWARD:"left",VOLUME_UP:"up",VOLUME_DOWN:"down",TOGGLE_MUTE:"m",TOGGLE_FULLSCREEN:"f"},Ka="@redbeemedia/javascript-player-shortcuts",Oi=function(){var Bt=function(dn,Un,or){var ir,gr;this.player=void 0,this.events=void 0,this.skinContainer=void 0,this.cleanupKeyboardShortcuts=void 0,this.options=void 0,this.player=dn,this.events=or,this.options=dt({},me,Un),this.skinContainer=document.createElement("div"),this.skinContainer.classList.add("redbee-player-skin-container","_1aiNe");var Hr=this.player.getContainerElement();if(!Hr.parentNode)throw"[RedBeePlayer] Player container element missing, something went wrong";Hr.parentNode.appendChild(this.skinContainer),Object.assign(Hr.parentNode.style,{position:"relative",overflow:"visible"}),this.options.keyboardShortcuts&&(this.cleanupKeyboardShortcuts=function(qr,Dr){return Ke.default(Object.values(Aa).join(","),Ka,function(Br,pi){if(Dr===document.activeElement||Dr.contains(document.activeElement))switch(pi.key){case Aa.TOGGLE_PLAY:Br.preventDefault(),qr.isPlaying()?qr.pause():qr.play();break;case Aa.BACKWARD:Br.preventDefault(),qr.seekTo({change:-C.QuickSeekTime});break;case Aa.FORWARD:Br.preventDefault(),qr.seekTo({change:C.QuickSeekTime});break;case Aa.TOGGLE_MUTE:Br.preventDefault(),qr.toggleMuted();break;case Aa.TOGGLE_FULLSCREEN:Br.preventDefault(),qr.toggleFullscreen()}}),Ke.default.setScope(Ka),function(){Ke.default.deleteScope(Ka)}}(this.player,this.skinContainer)),M.render(M.h(to,{player:this.player,options:this.options,onSkinHidden:(ir=this.events)==null?void 0:ir.onSkinHidden,onSkinVisible:(gr=this.events)==null?void 0:gr.onSkinVisible}),this.skinContainer)};return Bt.prototype.destroy=function(){var dn;(dn=this.cleanupKeyboardShortcuts)==null||dn.call(this),M.render(null,this.skinContainer),this.skinContainer.remove()},Bt}();B.r=Oi},1674:function(Ee,B,K){var M=this&&this.__awaiter||function(T,l,c,h){return new(c||(c=Promise))(function(y,i){var g=function(t){try{r(h.next(t))}catch(u){i(u)}},d=function(t){try{r(h.throw(t))}catch(u){i(u)}},r=function(t){var u,m,S;t.done?y(t.value):(u=t.value,m=u,((S=c)!=null&&typeof Symbol<"u"&&S[Symbol.hasInstance]?S[Symbol.hasInstance](m):m instanceof S)?u:new c(function(A){A(u)})).then(g,d)};r((h=h.apply(T,l||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0}),B.getTimelineSpriteCues=B.parseSpriteVTT=B.parseCue=B.parseImage=B.parseDimensions=void 0;var x=K(9082),N=K(9707);function C(T){var l,c=(l=T.split("#xywh=")[1])===null||l===void 0?void 0:l.split(",");if(c&&c.length===4)return{x:parseInt(c[0],10),y:parseInt(c[1],10),width:parseInt(c[2],10),height:parseInt(c[3],10)}}function R(T,l){return T?(0,x.buildAbsoluteURL)(l,T.split("#")[0]):null}function I(T,l,c){var h=R(T.text,l),y=C(T.text);if(h&&y)return{start:T.startTime-c,end:T.endTime-c,image:h,dimensions:y}}function E(T,l,c){return new N.WebVTTParser().parse(T).cues.map(function(h){return I(h,l,c)}).filter(function(h){return h!==void 0})}B.parseDimensions=C,B.parseImage=R,B.parseCue=I,B.parseSpriteVTT=E,B.getTimelineSpriteCues=function(T,l){return M(this,void 0,void 0,function(){return function(c,h){var y,i,g,d,r={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return d={next:t(0),throw:t(1),return:t(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function t(u){return function(m){return function(S){if(y)throw new TypeError("Generator is already executing.");for(;r;)try{if(y=1,i&&(g=2&S[0]?i.return:S[0]?i.throw||((g=i.return)&&g.call(i),0):i.next)&&!(g=g.call(i,S[1])).done)return g;switch(i=0,g&&(S=[2&S[0],g.value]),S[0]){case 0:case 1:g=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,i=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(!((g=(g=r.trys).length>0&&g[g.length-1])||S[0]!==6&&S[0]!==2)){r=0;continue}if(S[0]===3&&(!g||S[1]>g[0]&&S[1]<g[3])){r.label=S[1];break}if(S[0]===6&&r.label<g[1]){r.label=g[1],g=S;break}if(g&&r.label<g[2]){r.label=g[2],r.ops.push(S);break}g[2]&&r.ops.pop(),r.trys.pop();continue}S=h.call(c,r)}catch(A){S=[6,A],i=0}finally{y=g=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([u,m])}}}(this,function(c){switch(c.label){case 0:return[4,fetch(T)];case 1:return[4,c.sent().text()];case 2:return[2,E(c.sent(),T,l)]}})})}},9082:function(Ee){var B,K,M,x,N;B=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,K=/^(?=([^\/?#]*))\1([^]*)$/,M=/(?:\/|^)\.(?=\/)/g,x=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,N={buildAbsoluteURL:function(C,R,I){if(I=I||{},C=C.trim(),!(R=R.trim())){if(!I.alwaysNormalize)return C;var E=N.parseURL(C);if(!E)throw new Error("Error trying to parse base URL.");return E.path=N.normalizePath(E.path),N.buildURLFromParts(E)}var T=N.parseURL(R);if(!T)throw new Error("Error trying to parse relative URL.");if(T.scheme)return I.alwaysNormalize?(T.path=N.normalizePath(T.path),N.buildURLFromParts(T)):R;var l=N.parseURL(C);if(!l)throw new Error("Error trying to parse base URL.");if(!l.netLoc&&l.path&&l.path[0]!=="/"){var c=K.exec(l.path);l.netLoc=c[1],l.path=c[2]}l.netLoc&&!l.path&&(l.path="/");var h={scheme:l.scheme,netLoc:T.netLoc,path:null,params:T.params,query:T.query,fragment:T.fragment};if(!T.netLoc&&(h.netLoc=l.netLoc,T.path[0]!=="/"))if(T.path){var y=l.path,i=y.substring(0,y.lastIndexOf("/")+1)+T.path;h.path=N.normalizePath(i)}else h.path=l.path,T.params||(h.params=l.params,T.query||(h.query=l.query));return h.path===null&&(h.path=I.alwaysNormalize?N.normalizePath(T.path):T.path),N.buildURLFromParts(h)},parseURL:function(C){var R=B.exec(C);return R?{scheme:R[1]||"",netLoc:R[2]||"",path:R[3]||"",params:R[4]||"",query:R[5]||"",fragment:R[6]||""}:null},normalizePath:function(C){for(C=C.split("").reverse().join("").replace(M,"");C.length!==(C=C.replace(x,"")).length;);return C.split("").reverse().join("")},buildURLFromParts:function(C){return C.scheme+C.netLoc+C.path+C.params+C.query+C.fragment}},Ee.exports=N},9707:(Ee,B)=>{(function(){var K={direction:"horizontal",snapToLines:!0,linePosition:"auto",lineAlign:"start",textPosition:"auto",positionAlign:"auto",size:100,alignment:"center"},M=function(I){I||(I={"&amp":"&","&lt":"<","&gt":">","&lrm":"","&rlm":"","&nbsp":""}),this.entities=I,this.parse=function(E,T){E=E.replace(/\0/g,"");var l=Date.now(),c=0,h=E.split(/\r\n|\r|\n/),y=!1,i=[],g=[],d=[];function r(P,j){d.push({message:P,line:c+1,col:j})}var t=h[c],u=t.length,m=0,S=6;for(t[0]==="\uFEFF"&&(m=1,S+=1),(u<S||t.indexOf("WEBVTT")!==0+m||u>S&&t[S]!==" "&&t[S]!=="	")&&r('No valid signature. (File needs to start with "WEBVTT".)'),c++;h[c]!=""&&h[c]!=null;){if(r("No blank line after the signature."),h[c].indexOf("-->")!=-1){y=!0;break}c++}for(;h[c]!=null;){for(var A;!y&&h[c]=="";)c++;if(!y&&h[c]==null)break;A=Object.assign({},K,{id:"",startTime:0,endTime:0,pauseOnExit:!1,direction:"horizontal",snapToLines:!0,linePosition:"auto",lineAlign:"start",textPosition:"auto",positionAlign:"auto",size:100,alignment:"center",text:"",tree:null});var _=!0;if(h[c].indexOf("-->")==-1){if(A.id=h[c],/^NOTE($|[ \t])/.test(A.id)){for(c++;h[c]!=""&&h[c]!=null;)h[c].indexOf("-->")!=-1&&r("Cannot have timestamp in a comment."),c++;continue}if(/^STYLE($|[ \t])/.test(A.id)){var v=[],f=!1;for(c++;h[c]!=""&&h[c]!=null;)h[c].indexOf("-->")!=-1&&(r("Cannot have timestamp in a style block."),f=!0),v.push(h[c]),c++;if(g.length){r("Style blocks cannot appear after the first cue.");continue}f||i.push(v.join(`
`));continue}if(h[++c]==""||h[c]==null){r("Cue identifier cannot be standalone.");continue}if(h[c].indexOf("-->")==-1){_=!1,r("Cue identifier needs to be followed by timestamp.");continue}}y=!1;var b=new x(h[c],r),p=0;if(g.length>0&&(p=g[g.length-1].startTime),!_||b.parse(A,p)){for(c++;h[c]!=""&&h[c]!=null;){if(h[c].indexOf("-->")!=-1){r("Blank line missing before cue."),y=!0;break}A.text!=""&&(A.text+=`
`),A.text+=h[c],c++}var k=new N(A.text,r,T,I);A.tree=k.parse(A.startTime,A.endTime),g.push(A)}else for(A=null,c++;h[c]!=""&&h[c]!=null;){if(h[c].indexOf("-->")!=-1){y=!0;break}c++}}return g.sort(function(P,j){return P.startTime<j.startTime?-1:P.startTime>j.startTime?1:P.endTime>j.endTime?-1:P.endTime<j.endTime?1:0}),{cues:g,errors:d,time:Date.now()-l,styles:i}}},x=function(I,E){var T=/[\u0020\t\f]/,l=/[^\u0020\t\f]/,c=0,h=function(d){E(d,c+1)};function y(d){for(;I[c]!=null&&d.test(I[c]);)c++}function i(d){for(var r="";I[c]!=null&&d.test(I[c]);)r+=I[c],c++;return r}function g(){var d,r,t,u,m="minutes";if(I[c]!=null)if(/\d/.test(I[c]))if(((d=i(/\d/)).length>2||parseInt(d,10)>59)&&(m="hours"),I[c]==":")if(c++,(r=i(/\d/)).length==2){if(m=="hours"||I[c]==":"){if(I[c]!=":")return void h("No seconds found or minutes is greater than 59.");if(c++,(t=i(/\d/)).length!=2)return void h("Must be exactly two digits.")}else{if(d.length!=2)return void h("Must be exactly two digits.");t=r,r=d,d="0"}if(I[c]==".")if(c++,(u=i(/\d/)).length==3)if(parseInt(r,10)>59)h("You cannot have more than 59 minutes.");else{if(!(parseInt(t,10)>59))return 60*parseInt(d,10)*60+60*parseInt(r,10)+parseInt(t,10)+parseInt(u,10)/1e3;h("You cannot have more than 59 seconds.")}else h("Milliseconds must be given in three digits.");else h('No decimal separator (".") found.')}else h("Must be exactly two digits.");else h("No time unit separator found.");else h("Timestamp must start with a character in the range 0-9.");else h("No timestamp found.")}this.parse=function(d,r){if(y(T),d.startTime=g(),d.startTime!=null)if(d.startTime<r&&h("Start timestamp is not greater than or equal to start timestamp of previous cue."),l.test(I[c])&&h("Timestamp not separated from '-->' by whitespace."),y(T),I[c]=="-")if(c++,I[c]=="-")if(c++,I[c]==">"){if(c++,l.test(I[c])&&h("'-->' not separated from timestamp by whitespace."),y(T),d.endTime=g(),d.endTime!=null)return d.endTime<=d.startTime&&h("End timestamp is not greater than start timestamp."),l.test(I[c]),y(T),function(t,u){for(var m=t.split(T),S=[],A=0;A<m.length;A++)if(m[A]!=""){var _=m[A].indexOf(":"),v=m[A].slice(0,_),f=m[A].slice(_+1);if(S.indexOf(v)!=-1&&h("Duplicate setting."),S.push(v),f=="")return void h("No value for setting defined.");if(v=="vertical"){if(f!="rl"&&f!="lr"){h("Writing direction can only be set to 'rl' or 'rl'.");continue}u.direction=f}else if(v=="line"){if(/,/.test(f)){var b=f.split(",");f=b[0];var p=b[1]}if(!/^[-\d](\d*)(\.\d+)?%?$/.test(f)){h("Line position takes a number or percentage.");continue}if(f.indexOf("-",1)!=-1){h("Line position can only have '-' at the start.");continue}if(f.indexOf("%")!=-1&&f.indexOf("%")!=f.length-1){h("Line position can only have '%' at the end.");continue}if(f[0]=="-"&&f[f.length-1]=="%"){h("Line position cannot be a negative percentage.");continue}var k=f,P=!1;if(f[f.length-1]=="%"&&(P=!0,k=f.slice(0,f.length-1),parseInt(f,10)>100)){h("Line position cannot be >100%.");continue}if(k===""||isNaN(k)||!isFinite(k)){h("Line position needs to be a number");continue}if(p!==void 0){if(!["start","center","end"].includes(p)){h("Line alignment needs to be one of start, center or end");continue}u.lineAlign=p}u.snapToLines=!P,u.linePosition=parseFloat(k),parseFloat(k).toString()!==k&&(u.nonSerializable=!0)}else if(v=="position"){if(/,/.test(f)){b=f.split(","),f=b[0];var j=b[1]}if(f[f.length-1]!="%"){h("Text position must be a percentage.");continue}if(parseInt(f,10)>100||parseInt(f,10)<0){h("Text position needs to be between 0 and 100%.");continue}if((k=f.slice(0,f.length-1))===""||isNaN(k)||!isFinite(k)){h("Line position needs to be a number");continue}if(j!==void 0){if(!["line-left","center","line-right"].includes(j)){h("Position alignment needs to be one of line-left, center or line-right");continue}u.positionAlign=j}u.textPosition=parseFloat(k)}else if(v=="size"){if(f[f.length-1]!="%"){h("Size must be a percentage.");continue}if(parseInt(f,10)>100){h("Size cannot be >100%.");continue}var U=f.slice(0,f.length-1);if(U===void 0||U===""||isNaN(U)){h("Size needs to be a number"),U=100;continue}if((U=parseFloat(U))<0||U>100){h("Size needs to be between 0 and 100%.");continue}u.size=U}else if(v=="align"){var G=["start","center","end","left","right"];if(G.indexOf(f)==-1){h("Alignment can only be set to one of "+G.join(", ")+".");continue}u.alignment=f}else h("Invalid setting.")}}(I.substring(c),d),!0}else h("No valid timestamp separator found.");else h("No valid timestamp separator found.");else h("No valid timestamp separator found.")},this.parseTimestamp=function(){var d=g();if(I[c]==null)return d;h("Timestamp must not have trailing characters.")}},N=function(I,E,T,l){this.entities=l;var c=this,h=0,y=function(g){T!="metadata"&&E(g,h+1)};function i(){for(var g="data",d="",r="",t=[];I[h-1]!=null||h==0;){var u=I[h];if(g=="data")if(u=="&")r=u,g="escape";else if(u=="<"&&d=="")g="tag";else{if(u=="<"||u==null)return["text",d];d+=u}else if(g=="escape"){if(u=="<"||u==null){let m;return y("Incorrect escape."),(m=r.match(/^&#([0-9]+)$/))?d+=String.fromCharCode(m[1]):c.entities[r]?d+=c.entities[r]:d+=r,["text",d]}if(u=="&")y("Incorrect escape."),d+=r,r=u;else if(/[a-z#0-9]/i.test(u))r+=u;else if(u==";"){let m;(m=r.match(/^&#(x?[0-9]+)$/))?d+=String.fromCharCode("0"+m[1]):c.entities[r+u]?d+=c.entities[r+u]:(m=Object.keys(l).find(S=>r.startsWith(S)))?d+=c.entities[m]+r.slice(m.length)+u:(y("Incorrect escape."),d+=r+";"),g="data"}else y("Incorrect escape."),d+=r+u,g="data"}else if(g=="tag")if(u=="	"||u==`
`||u=="\f"||u==" ")g="start tag annotation";else if(u==".")g="start tag class";else if(u=="/")g="end tag";else if(/\d/.test(u))d=u,g="timestamp tag";else{if(u==">"||u==null)return u==">"&&h++,["start tag","",[],""];d=u,g="start tag"}else if(g=="start tag")if(u=="	"||u=="\f"||u==" ")g="start tag annotation";else if(u==`
`)r=u,g="start tag annotation";else if(u==".")g="start tag class";else{if(u==">"||u==null)return u==">"&&h++,["start tag",d,[],""];d+=u}else if(g=="start tag class")if(u=="	"||u=="\f"||u==" ")r&&t.push(r),r="",g="start tag annotation";else if(u==`
`)r&&t.push(r),r=u,g="start tag annotation";else if(u==".")r&&t.push(r),r="";else{if(u==">"||u==null)return u==">"&&h++,r&&t.push(r),["start tag",d,t,""];r+=u}else if(g=="start tag annotation"){if(u==">"||u==null)return u==">"&&h++,["start tag",d,t,r=r.split(/[\u0020\t\f\r\n]+/).filter(function(m){if(m)return!0}).join(" ")];r+=u}else if(g=="end tag"){if(u==">"||u==null)return u==">"&&h++,["end tag",d];d+=u}else if(g=="timestamp tag"){if(u==">"||u==null)return u==">"&&h++,["timestamp",d];d+=u}else y("Never happens.");h++}}this.parse=function(g,d){var r={children:[]},t=r,u=[];function m(f){t.children.push({type:"object",name:f[1],classes:f[2],children:[],parent:t}),t=t.children[t.children.length-1]}function S(f){for(var b=t;b;){if(b.name==f)return!0;b=b.parent}}for(;I[h]!=null;){var A=i();if(A[0]=="text")t.children.push({type:"text",value:A[1],parent:t});else if(A[0]=="start tag"){T=="chapters"&&y("Start tags not allowed in chapter title text.");var _=A[1];_!="v"&&_!="lang"&&A[3]!=""&&y("Only <v> and <lang> can have an annotation."),_=="c"||_=="i"||_=="b"||_=="u"||_=="ruby"||_=="rt"&&t.name=="ruby"?m(A):_=="v"?(S("v")&&y("<v> cannot be nested inside itself."),m(A),t.value=A[3],A[3]||y("<v> requires an annotation.")):_=="lang"?(m(A),t.value=A[3]):y("Incorrect start tag.")}else if(A[0]=="end tag")T=="chapters"&&y("End tags not allowed in chapter title text."),A[1]==t.name?t=t.parent:A[1]=="ruby"&&t.name=="rt"?t=t.parent.parent:y("Incorrect end tag.");else if(A[0]=="timestamp"){T=="chapters"&&y("Timestamp not allowed in chapter title text.");var v=new x(A[1],y).parseTimestamp();v!=null&&((v<=g||v>=d)&&y("Timestamp must be between start timestamp and end timestamp."),u.length>0&&u[u.length-1]>=v&&y("Timestamp must be greater than any previous timestamp."),t.children.push({type:"timestamp",value:v,parent:t}),u.push(v))}}for(;t.parent;)t.name!="v"&&y("Required end tag missing."),t=t.parent;return function f(b){const p={...b};return b.children&&(p.children=b.children.map(f)),p.parent&&delete p.parent,p}(r)}},C=function(){function I(l){const c=("00"+1e3*(l-Math.floor(l)).toFixed(3)).slice(-3);let h=0,y=0,i=0;return l>=3600&&(h=Math.floor(l/3600)),y=Math.floor((l-3600*h)/60),i=Math.floor(l-3600*h-60*y),(h?h+":":"")+(""+y).padStart(2,"0")+":"+(""+i).padStart(2,"0")+"."+c}function E(l){for(var c="",h=0;h<l.length;h++){var y=l[h];if(y.type=="text")c+=y.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");else if(y.type=="object"){if(c+="<"+y.name,y.classes)for(var i=0;i<y.classes.length;i++)c+="."+y.classes[i];y.value&&(c+=" "+y.value),c+=">",y.children&&(c+=E(y.children)),c+="</"+y.name+">"}else y.type=="timestamp"?c+="<"+I(y.value)+">":c+="<"+y.value+">"}return c}function T(l){return(l.id!==void 0?l.id+`
`:"")+I(l.startTime)+" --> "+I(l.endTime)+function(c){var h="";const y=Object.keys(K).filter(i=>c[i]!==K[i]);return y.includes("direction")&&(h+=" vertical:"+c.direction),y.includes("alignment")&&(h+=" align:"+c.alignment),y.includes("size")&&(h+=" size:"+c.size+"%"),(y.includes("lineAlign")||y.includes("linePosition"))&&(h+=" line:"+c.linePosition+(c.snapToLines?"":"%")+(c.lineAlign&&c.lineAlign!=K.lineAlign?","+c.lineAlign:"")),(y.includes("textPosition")||y.includes("positionAlign"))&&(h+=" position:"+c.textPosition+"%"+(c.positionAlign&&c.positionAlign!==K.positionAlign?","+c.positionAlign:"")),h}(l)+`
`+E(l.tree.children)+`

`}this.serialize=function(l,c){var h=`WEBVTT

`;if(c)for(var y=0;y<c.length;y++)h+=`STYLE
`+c[y]+`

`;for(y=0;y<l.length;y++)h+=T(l[y]);return h}};function R(I){I.WebVTTParser=M,I.WebVTTCueTimingsAndSettingsParser=x,I.WebVTTCueTextParser=N,I.WebVTTSerializer=C}typeof window<"u"&&R(window),R(B)})()},6765:(Ee,B,K)=>{K.r(B),K.d(B,{default:()=>A});var M=typeof navigator<"u"&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function x(b,p,k,P){b.addEventListener?b.addEventListener(p,k,P):b.attachEvent&&b.attachEvent("on".concat(p),function(){k(window.event)})}function N(b,p){for(var k=p.slice(0,p.length-1),P=0;P<k.length;P++)k[P]=b[k[P].toLowerCase()];return k}function C(b){typeof b!="string"&&(b="");for(var p=(b=b.replace(/\s/g,"")).split(","),k=p.lastIndexOf("");k>=0;)p[k-1]+=",",p.splice(k,1),k=p.lastIndexOf("");return p}for(var R={backspace:8,"":8,tab:9,clear:12,enter:13,"":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":M?173:189,"=":M?61:187,";":M?59:186,"'":222,"[":219,"]":221,"\\":220},I={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},E={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},T={16:!1,18:!1,17:!1,91:!1},l={},c=1;c<20;c++)R["f".concat(c)]=111+c;var h=[],y=!1,i="all",g=[],d=function(b){return R[b.toLowerCase()]||I[b.toLowerCase()]||b.toUpperCase().charCodeAt(0)};function r(b){i=b||"all"}function t(){return i||"all"}var u=function(b){var p=b.key,k=b.scope,P=b.method,j=b.splitKey,U=j===void 0?"+":j;C(p).forEach(function(G){var ee=G.split(U),ne=ee.length,re=ee[ne-1],oe=re==="*"?"*":d(re);if(l[oe]){k||(k=t());var W=ne>1?N(I,ee):[];l[oe]=l[oe].filter(function(Te){return!((!P||Te.method===P)&&Te.scope===k&&function(Ue,ze){for(var le=Ue.length>=ze.length?Ue:ze,Se=Ue.length>=ze.length?ze:Ue,be=!0,Y=0;Y<le.length;Y++)Se.indexOf(le[Y])===-1&&(be=!1);return be}(Te.mods,W))})}})};function m(b,p,k,P){var j;if(p.element===P&&(p.scope===k||p.scope==="all")){for(var U in j=p.mods.length>0,T)Object.prototype.hasOwnProperty.call(T,U)&&(!T[U]&&p.mods.indexOf(+U)>-1||T[U]&&p.mods.indexOf(+U)===-1)&&(j=!1);(p.mods.length!==0||T[16]||T[18]||T[17]||T[91])&&!j&&p.shortcut!=="*"||p.method(b,p)===!1&&(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation&&b.stopPropagation(),b.cancelBubble&&(b.cancelBubble=!0))}}function S(b,p){var k=l["*"],P=b.keyCode||b.which||b.charCode;if(A.filter.call(this,b)){if(P!==93&&P!==224||(P=91),h.indexOf(P)===-1&&P!==229&&h.push(P),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(ze){var le=E[ze];b[ze]&&h.indexOf(le)===-1?h.push(le):!b[ze]&&h.indexOf(le)>-1?h.splice(h.indexOf(le),1):ze==="metaKey"&&b[ze]&&h.length===3&&(b.ctrlKey||b.shiftKey||b.altKey||(h=h.slice(h.indexOf(le))))}),P in T){for(var j in T[P]=!0,I)I[j]===P&&(A[j]=!0);if(!k)return}for(var U in T)Object.prototype.hasOwnProperty.call(T,U)&&(T[U]=b[E[U]]);b.getModifierState&&(!b.altKey||b.ctrlKey)&&b.getModifierState("AltGraph")&&(h.indexOf(17)===-1&&h.push(17),h.indexOf(18)===-1&&h.push(18),T[17]=!0,T[18]=!0);var G=t();if(k)for(var ee=0;ee<k.length;ee++)k[ee].scope===G&&(b.type==="keydown"&&k[ee].keydown||b.type==="keyup"&&k[ee].keyup)&&m(b,k[ee],G,p);if(P in l){for(var ne=0;ne<l[P].length;ne++)if((b.type==="keydown"&&l[P][ne].keydown||b.type==="keyup"&&l[P][ne].keyup)&&l[P][ne].key){for(var re=l[P][ne],oe=re.splitKey,W=re.key.split(oe),Te=[],Ue=0;Ue<W.length;Ue++)Te.push(d(W[Ue]));Te.sort().join("")===h.sort().join("")&&m(b,re,G,p)}}}}function A(b,p,k){h=[];var P=C(b),j=[],U="all",G=document,ee=0,ne=!1,re=!0,oe="+",W=!1;for(k===void 0&&typeof p=="function"&&(k=p),Object.prototype.toString.call(p)==="[object Object]"&&(p.scope&&(U=p.scope),p.element&&(G=p.element),p.keyup&&(ne=p.keyup),p.keydown!==void 0&&(re=p.keydown),p.capture!==void 0&&(W=p.capture),typeof p.splitKey=="string"&&(oe=p.splitKey)),typeof p=="string"&&(U=p);ee<P.length;ee++)j=[],(b=P[ee].split(oe)).length>1&&(j=N(I,b)),(b=(b=b[b.length-1])==="*"?"*":d(b))in l||(l[b]=[]),l[b].push({keyup:ne,keydown:re,scope:U,mods:j,shortcut:P[ee],method:k,key:P[ee],splitKey:oe,element:G});G!==void 0&&!function(Te){return g.indexOf(Te)>-1}(G)&&window&&(g.push(G),x(G,"keydown",function(Te){S(Te,G)},W),y||(y=!0,x(window,"focus",function(){h=[]},W)),x(G,"keyup",function(Te){S(Te,G),function(Ue){var ze=Ue.keyCode||Ue.which||Ue.charCode,le=h.indexOf(ze);if(le>=0&&h.splice(le,1),Ue.key&&Ue.key.toLowerCase()==="meta"&&h.splice(0,h.length),ze!==93&&ze!==224||(ze=91),ze in T)for(var Se in T[ze]=!1,I)I[Se]===ze&&(A[Se]=!1)}(Te)},W))}var _={getPressedKeyString:function(){return h.map(function(b){return p=b,Object.keys(R).find(function(k){return R[k]===p})||function(k){return Object.keys(I).find(function(P){return I[P]===k})}(b)||String.fromCharCode(b);var p})},setScope:r,getScope:t,deleteScope:function(b,p){var k,P;for(var j in b||(b=t()),l)if(Object.prototype.hasOwnProperty.call(l,j))for(k=l[j],P=0;P<k.length;)k[P].scope===b?k.splice(P,1):P++;t()===b&&r(p||"all")},getPressedKeyCodes:function(){return h.slice(0)},isPressed:function(b){return typeof b=="string"&&(b=d(b)),h.indexOf(b)!==-1},filter:function(b){var p=b.target||b.srcElement,k=p.tagName,P=!0;return!p.isContentEditable&&(k!=="INPUT"&&k!=="TEXTAREA"&&k!=="SELECT"||p.readOnly)||(P=!1),P},trigger:function(b){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(l).forEach(function(k){l[k].filter(function(P){return P.scope===p&&P.shortcut===b}).forEach(function(P){P&&P.method&&P.method()})})},unbind:function(b){if(b===void 0)Object.keys(l).forEach(function(G){return delete l[G]});else if(Array.isArray(b))b.forEach(function(G){G.key&&u(G)});else if(typeof b=="object")b.key&&u(b);else if(typeof b=="string"){for(var p=arguments.length,k=new Array(p>1?p-1:0),P=1;P<p;P++)k[P-1]=arguments[P];var j=k[0],U=k[1];typeof j=="function"&&(U=j,j=""),u({key:b,scope:j,method:U,splitKey:"+"})}},keyMap:R,modifier:I,modifierMap:E};for(var v in _)Object.prototype.hasOwnProperty.call(_,v)&&(A[v]=_[v]);if(typeof window<"u"){var f=window.hotkeys;A.noConflict=function(b){return b&&window.hotkeys===A&&(window.hotkeys=f),A},window.hotkeys=A}},1756:(Ee,B,K)=>{K.r(B),K.d(B,{FilteredMediaEvent:()=>h,MediaEvent:()=>y,getMediaEventFilter:()=>i});var M,x,N={d:(g,d)=>{for(var r in d)N.o(d,r)&&!N.o(g,r)&&Object.defineProperty(g,r,{enumerable:!0,get:d[r]})},o:(g,d)=>Object.prototype.hasOwnProperty.call(g,d)},C={};function R(g,d){(d==null||d>g.length)&&(d=g.length);for(var r=0,t=Array(d);r<d;r++)t[r]=g[r];return t}function I(g){for(var d=1;d<arguments.length;d++){var r=arguments[d]!=null?arguments[d]:{},t=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),t.forEach(function(u){var m,S;m=g,S=r[u],u in m?Object.defineProperty(m,u,{value:S,enumerable:!0,configurable:!0,writable:!0}):m[u]=S})}return g}function E(g,d){return d=d??{},Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(d)):function(r,t){var u=Object.keys(r);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(r);u.push.apply(u,m)}return u}(Object(d)).forEach(function(r){Object.defineProperty(g,r,Object.getOwnPropertyDescriptor(d,r))}),g}function T(g,d){return function(r){if(Array.isArray(r))return r}(g)||function(r,t){var u,m,S=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(S!=null){var A=[],_=!0,v=!1;try{for(S=S.call(r);!(_=(u=S.next()).done)&&(A.push(u.value),!t||A.length!==t);_=!0);}catch(f){v=!0,m=f}finally{try{_||S.return==null||S.return()}finally{if(v)throw m}}return A}}(g,d)||function(r,t){if(r){if(typeof r=="string")return R(r,t);var u=Object.prototype.toString.call(r).slice(8,-1);if(u==="Object"&&r.constructor&&(u=r.constructor.name),u==="Map"||u==="Set")return Array.from(u);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return R(r,t)}}(g,d)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}N.d(C,{$W:()=>c,HL:()=>M,xn:()=>x}),function(g){g.LOADED="loaded",g.SEEKING="seeking",g.SEEKED="seeked",g.BUFFERING="buffering",g.BUFFERED="buffered",g.PLAY="play",g.PLAYING="playing",g.PAUSE="pause",g.ENDED="ended",g.TIME_UPDATE="timeupdate"}(M||(M={})),function(g){g.loadstart="loadstart",g.progress="progress",g.suspend="suspend",g.abort="abort",g.error="error",g.emptied="emptied",g.stalled="stalled",g.loadedmetadata="loadedmetadata",g.loadeddata="loadeddata",g.canplay="canplay",g.canplaythrough="canplaythrough",g.playing="playing",g.waiting="waiting",g.seeking="seeking",g.seeked="seeked",g.ended="ended",g.durationchange="durationchange",g.timeupdate="timeupdate",g.play="play",g.pause="pause",g.ratechange="ratechange",g.resize="resize",g.volumechange="volumechange"}(x||(x={}));var l={paused:!1,ended:!1,loading:!0,buffering:!1,seeking:!1,initialPlayFired:!1,deferLoadedEvent:!1,deferPlayingEvent:!1,deferSeekedEvent:!1,playRequested:!1},c=function(g){var d=g.videoElement,r=g.callback,t=null,u=function(){typeof t=="number"&&clearTimeout(t)},m=I({},l),S=function(){return m.loading||m.ended},A=function(){!m.loading&&m.buffering&&d.playbackRate>0&&(m=E(I({},m),{buffering:!1}),r(M.BUFFERED)),m.loading&&(d.playbackRate===0?m=E(I({},m),{deferLoadedEvent:!0}):(m=E(I({},m),{loading:!1,deferLoadedEvent:!1}),r(M.LOADED)))},_=function(){S()||(m.buffering&&r(M.BUFFERED),m=E(I({},m),{seeking:!0,buffering:!1}),r(M.SEEKING))},v=function(){if(!S()&&m.seeking){if(d.playbackRate===0)return void(m=E(I({},m),{deferSeekedEvent:!0}));m=E(I({},m),{seeking:!1,deferSeekedEvent:!1}),r(M.SEEKED)}},f=function(){if(u(),!S()&&!m.seeking){if(d.seeking)return void _();m.buffering||(m=E(I({},m),{buffering:!0}),r(M.BUFFERING))}},b=function(){u(),d.playbackRate!==0?((m=E(I({},m),{deferPlayingEvent:!1})).loading&&A(),m.initialPlayFired?m.buffering?(m=E(I({},m),{buffering:!1}),r(M.BUFFERED)):m.seeking&&(m=E(I({},m),{seeking:!1,deferSeekedEvent:!1}),r(M.SEEKED)):(m=E(I({},m),{initialPlayFired:!0,paused:!1,playRequested:!1}),r(M.PLAYING)),m.paused&&m.playRequested&&(m=E(I({},m),{paused:!1,playRequested:!1}),r(M.PLAYING))):m=E(I({},m),{deferPlayingEvent:!0})},p=function(){return!m.seeking&&!m.buffering&&d.playbackRate===0&&!d.seeking},k=[[x.canplaythrough,A],[x.playing,b],[x.waiting,f],[x.seeking,_],[x.seeked,v],[x.ended,function(){m=E(I({},m),{ended:!0,buffering:!1,seeking:!1,loading:!1,paused:!0}),u(),r(M.ENDED)}],[x.timeupdate,function(){S()||(m.buffering&&!d.paused&&(m=E(I({},m),{buffering:!1}),r(M.BUFFERED)),r(M.TIME_UPDATE))}],[x.play,function(){!S()&&m.paused&&m.initialPlayFired&&(m=E(I({},m),{playRequested:!0}),r(M.PLAY))}],[x.pause,function(){!d.ended&&(m.playRequested||!m.paused)&&((m=E(I({},m),{playRequested:!1})).deferLoadedEvent?(m=E(I({},m),{loading:!1,deferLoadedEvent:!1}),r(M.LOADED),d.paused&&(m=E(I({},m),{paused:!0}),r(M.PAUSE))):(m=E(I({},m),{paused:!0}),r(M.PAUSE)))}],[x.ratechange,function(){u();var P=d.playbackRate>0;m.deferLoadedEvent&&P&&A(),m.deferSeekedEvent&&P&&v(),m.deferPlayingEvent&&P&&b(),!S()&&(p()?t=window.setTimeout(function(){p()&&f()},50):m.buffering&&P&&(m=E(I({},m),{buffering:!1}),r(M.BUFFERED)))}]];return k.forEach(function(P){var j=T(P,2),U=j[0],G=j[1];return d.addEventListener(U,G)}),{teardown:function(){u(),k.forEach(function(P){var j=T(P,2),U=j[0],G=j[1];return d.removeEventListener(U,G)})}}},h=C.HL,y=C.xn,i=C.$W}},pe={};function we(Ee){var B=pe[Ee];if(B!==void 0)return B.exports;var K=pe[Ee]={id:Ee,loaded:!1,exports:{}};return te[Ee].call(K.exports,K,K.exports,we),K.loaded=!0,K.exports}we.d=(Ee,B)=>{for(var K in B)we.o(B,K)&&!we.o(Ee,K)&&Object.defineProperty(Ee,K,{enumerable:!0,get:B[K]})},we.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),we.o=(Ee,B)=>Object.prototype.hasOwnProperty.call(Ee,B),we.r=Ee=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Ee,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Ee,"__esModule",{value:!0})},we.nmd=Ee=>(Ee.paths=[],Ee.children||(Ee.children=[]),Ee);var Ze={};return(()=>{we.r(Ze),we.d(Ze,{ErrorTypes:()=>B.ErrorTypes,ExposureService:()=>Ee.ExposureService,PlayerEvents:()=>B.PlayerEvents,RedBeePlayer:()=>t});var Ee=we(8351),B=we(9327),K=we(1751),M=we(1455);function x(u,m,S,A,_,v,f){try{var b=u[v](f),p=b.value}catch(k){return void S(k)}b.done?m(p):Promise.resolve(p).then(A,_)}function N(u,m,S){return m in u?Object.defineProperty(u,m,{value:S,enumerable:!0,configurable:!0,writable:!0}):u[m]=S,u}function C(u){for(var m=1;m<arguments.length;m++){var S=arguments[m]!=null?arguments[m]:{},A=Object.keys(S);typeof Object.getOwnPropertySymbols=="function"&&(A=A.concat(Object.getOwnPropertySymbols(S).filter(function(_){return Object.getOwnPropertyDescriptor(S,_).enumerable}))),A.forEach(function(_){N(u,_,S[_])})}return u}function R(){var u;return u=function(m){var S,A,_,v,f,b,p;return function(k,P){var j,U,G,ee,ne={label:0,sent:function(){if(1&G[0])throw G[1];return G[1]},trys:[],ops:[]};return ee={next:re(0),throw:re(1),return:re(2)},typeof Symbol=="function"&&(ee[Symbol.iterator]=function(){return this}),ee;function re(oe){return function(W){return function(Te){if(j)throw new TypeError("Generator is already executing.");for(;ne;)try{if(j=1,U&&(G=2&Te[0]?U.return:Te[0]?U.throw||((G=U.return)&&G.call(U),0):U.next)&&!(G=G.call(U,Te[1])).done)return G;switch(U=0,G&&(Te=[2&Te[0],G.value]),Te[0]){case 0:case 1:G=Te;break;case 4:return ne.label++,{value:Te[1],done:!1};case 5:ne.label++,U=Te[1],Te=[0];continue;case 7:Te=ne.ops.pop(),ne.trys.pop();continue;default:if(!((G=(G=ne.trys).length>0&&G[G.length-1])||Te[0]!==6&&Te[0]!==2)){ne=0;continue}if(Te[0]===3&&(!G||Te[1]>G[0]&&Te[1]<G[3])){ne.label=Te[1];break}if(Te[0]===6&&ne.label<G[1]){ne.label=G[1],G=Te;break}if(G&&ne.label<G[2]){ne.label=G[2],ne.ops.push(Te);break}G[2]&&ne.ops.pop(),ne.trys.pop();continue}Te=P.call(k,ne)}catch(Ue){Te=[6,Ue],U=0}finally{j=G=0}if(5&Te[0])throw Te[1];return{value:Te[0]?Te[1]:void 0,done:!0}}([oe,W])}}}(this,function(k){switch(k.label){case 0:return S=m.customer,A=m.businessUnit,_=m.username,v=m.password,f=m.exposureBaseUrl,(b=m.sessionToken)?[2,Promise.resolve({sessionToken:b})]:(p=new Ee.ExposureService({customer:S,businessUnit:A,exposureBaseUrl:f}),_&&v?[4,p.authenticate(C({},{username:_},{password:v}))]:[3,2]);case 1:return b=k.sent().sessionToken,[3,4];case 2:return[4,p.authenticateAnonymous()];case 3:b=k.sent().sessionToken,k.label=4;case 4:return[2,{sessionToken:b}]}})},R=function(){var m=this,S=arguments;return new Promise(function(A,_){var v=u.apply(m,S);function f(p){x(v,A,_,f,b,"next",p)}function b(p){x(v,A,_,f,b,"throw",p)}f(void 0)})},R.apply(this,arguments)}function I(u,m){(m==null||m>u.length)&&(m=u.length);for(var S=0,A=new Array(m);S<m;S++)A[S]=u[S];return A}function E(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function T(u,m,S,A,_,v,f){try{var b=u[v](f),p=b.value}catch(k){return void S(k)}b.done?m(p):Promise.resolve(p).then(A,_)}function l(u){return function(){var m=this,S=arguments;return new Promise(function(A,_){var v=u.apply(m,S);function f(p){T(v,A,_,f,b,"next",p)}function b(p){T(v,A,_,f,b,"throw",p)}f(void 0)})}}function c(u,m){for(var S=0;S<m.length;S++){var A=m[S];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(u,A.key,A)}}function h(u,m,S){return m in u?Object.defineProperty(u,m,{value:S,enumerable:!0,configurable:!0,writable:!0}):u[m]=S,u}function y(u,m,S){return y=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(A,_,v){var f=function(p,k){for(;!Object.prototype.hasOwnProperty.call(p,k)&&(p=i(p))!==null;);return p}(A,_);if(f){var b=Object.getOwnPropertyDescriptor(f,_);return b.get?b.get.call(v||A):b.value}},y(u,m,S||u)}function i(u){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},i(u)}function g(u,m){return g=Object.setPrototypeOf||function(S,A){return S.__proto__=A,S},g(u,m)}function d(u){var m=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var S,A=i(u);if(m){var _=i(this).constructor;S=Reflect.construct(A,arguments,_)}else S=A.apply(this,arguments);return function(v,f){return!f||((b=f)&&typeof Symbol<"u"&&b.constructor===Symbol?"symbol":typeof b)!="object"&&typeof f!="function"?E(v):f;var b}(this,S)}}function r(u,m){var S,A,_,v,f={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return v={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function b(p){return function(k){return function(P){if(S)throw new TypeError("Generator is already executing.");for(;f;)try{if(S=1,A&&(_=2&P[0]?A.return:P[0]?A.throw||((_=A.return)&&_.call(A),0):A.next)&&!(_=_.call(A,P[1])).done)return _;switch(A=0,_&&(P=[2&P[0],_.value]),P[0]){case 0:case 1:_=P;break;case 4:return f.label++,{value:P[1],done:!1};case 5:f.label++,A=P[1],P=[0];continue;case 7:P=f.ops.pop(),f.trys.pop();continue;default:if(!((_=(_=f.trys).length>0&&_[_.length-1])||P[0]!==6&&P[0]!==2)){f=0;continue}if(P[0]===3&&(!_||P[1]>_[0]&&P[1]<_[3])){f.label=P[1];break}if(P[0]===6&&f.label<_[1]){f.label=_[1],_=P;break}if(_&&f.label<_[2]){f.label=_[2],f.ops.push(P);break}_[2]&&f.ops.pop(),f.trys.pop();continue}P=m.call(u,f)}catch(j){P=[6,j],A=0}finally{S=_=0}if(5&P[0])throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}([p,k])}}}var t=function(u){(function(v,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(f&&f.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),f&&g(v,f)})(_,u);var m,S,A=d(_);function _(v){var f,b=v.player,p=v.analytics,k=v.skin;(function(oe,W){if(!(oe instanceof W))throw new TypeError("Cannot call a class as a function")})(this,_),h(E(f=A.call(this)),"destroyed",!1),h(E(f),"playerOptions",void 0),h(E(f),"skinOptions",void 0),h(E(f),"analyticsOptions",void 0),h(E(f),"sessionToken",void 0),h(E(f),"preloadPromise",void 0),h(E(f),"playlist",[]),h(E(f),"core",void 0),h(E(f),"modules",[]);var P=b.username,j=b.password,U=b.sessionToken,G=function(oe,W){if(oe==null)return{};var Te,Ue,ze=function(Se,be){if(Se==null)return{};var Y,Q,J={},fe=Object.keys(Se);for(Q=0;Q<fe.length;Q++)Y=fe[Q],be.indexOf(Y)>=0||(J[Y]=Se[Y]);return J}(oe,W);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(oe);for(Ue=0;Ue<le.length;Ue++)Te=le[Ue],W.indexOf(Te)>=0||Object.prototype.propertyIsEnumerable.call(oe,Te)&&(ze[Te]=oe[Te])}return ze}(b,["username","password","sessionToken"]),ee=G.customer,ne=G.businessUnit,re=G.exposureBaseUrl;return f.playerOptions=G,f.skinOptions=k,f.analyticsOptions=p,f.preloadPromise=function(oe){return R.apply(this,arguments)}({customer:ee,businessUnit:ne,sessionToken:U,username:P,password:j,exposureBaseUrl:re}).then(function(oe){var W=oe.sessionToken;f.sessionToken=W,f.emit(B.PlayerEvents.SESSION_ACQUIRED,void 0)}),f.setupEventListeners(),f}return m=_,S=[{key:"setupEventListeners",value:function(){var v=this,f=!1;this.on(B.PlayerEvents.STATE_CHANGED,function(b){b.playbackState!==B.PlaybackState.ENDED||f?f=!1:(f=!0,v.playlist.length>1&&(v.playlist.shift(),v.load(v.playlist)))})}},{key:"setupPlayer",value:function(){var v=this;return l(function(){var f,b,p,k;return r(this,function(P){switch(P.label){case 0:return k=[],v.setupPlayerCore(),!((f=v.analyticsOptions)===null||f===void 0)&&f.disabled||k.push(v.setupPlayerAnalytics()),!((b=v.skinOptions)===null||b===void 0)&&b.disabled||v.setupPlayerSkin(),(p=v.core)===null||p===void 0||p.onAll(function(j){var U=j.event,G=j.data;return v.emit(U,G)}),[4,Promise.allSettled(k)];case 1:return P.sent(),[2]}})})()}},{key:"setupPlayerCore",value:function(){var v,f;this.sessionToken&&(this.core=new Ee.PlayerCore((v=function(b){for(var p=1;p<arguments.length;p++){var k=arguments[p]!=null?arguments[p]:{},P=Object.keys(k);typeof Object.getOwnPropertySymbols=="function"&&(P=P.concat(Object.getOwnPropertySymbols(k).filter(function(j){return Object.getOwnPropertyDescriptor(k,j).enumerable}))),P.forEach(function(j){h(b,j,k[j])})}return b}({},this.playerOptions),f=(f={sessionToken:this.sessionToken})!=null?f:{},Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(f)):function(b,p){var k=Object.keys(b);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(b);k.push.apply(k,P)}return k}(Object(f)).forEach(function(b){Object.defineProperty(v,b,Object.getOwnPropertyDescriptor(f,b))}),v)))}},{key:"setupPlayerAnalytics",value:function(){var v=this;return l(function(){var f,b,p,k,P,j,U,G,ee,ne,re,oe,W,Te;return r(this,function(Ue){switch(Ue.label){case 0:return v.core&&v.sessionToken?(p=v.playerOptions,k=p.customer,P=p.businessUnit,j=p.debug,[4,v.core.getDevice()]):[3,2];case 1:if(U=Ue.sent(),G=U.model,ee=U.modelNumber,ne=U.manufacturer,re=U.type,oe="browser",re==="ctv")switch(ne){case"samsung":oe="samsung_tv";break;case"lg":oe="lg_tv"}(Te=new K.q7({customer:k,businessUnit:P,analyticsBaseUrl:(W=(f=v.analyticsOptions)===null||f===void 0?void 0:f.baseUrl)!==null&&W!==void 0?W:v.playerOptions.exposureBaseUrl,sessionToken:v.sessionToken,debug:j,device:{model:G,modelNumber:ee,manufacturer:ne,appType:oe,appName:(b=v.analyticsOptions)===null||b===void 0?void 0:b.appName}})).connect(v.core),v.modules.push(Te),Ue.label=2;case 2:return[2]}})})()}},{key:"setupPlayerSkin",value:function(){this.core&&this.modules.push(new M.r(this.core,this.skinOptions))}},{key:"_load",value:function(v){var f=this;return l(function(){var b;return r(this,function(p){switch(p.label){case 0:if(f.destroyed)throw"[RedBeePlayer] cannot load on a destroyed instance of the player, please create a new instance";return f.destroyPlayer({retainCastSession:!0}),[4,f.preloadPromise];case 1:return p.sent(),[4,f.setupPlayer()];case 2:return p.sent(),[2,(b=f.core)===null||b===void 0?void 0:b.load(v)]}})})()}},{key:"load",value:function(v){var f,b,p=(Array.isArray(v)?v:[v]).map(function(P){return typeof P=="string"?{source:P}:P}),k=(f=p,b=1,function(P){if(Array.isArray(P))return P}(f)||function(P,j){var U=P==null?null:typeof Symbol<"u"&&P[Symbol.iterator]||P["@@iterator"];if(U!=null){var G,ee,ne=[],re=!0,oe=!1;try{for(U=U.call(P);!(re=(G=U.next()).done)&&(ne.push(G.value),!j||ne.length!==j);re=!0);}catch(W){oe=!0,ee=W}finally{try{re||U.return==null||U.return()}finally{if(oe)throw ee}}return ne}}(f,b)||function(P,j){if(P){if(typeof P=="string")return I(P,j);var U=Object.prototype.toString.call(P).slice(8,-1);return U==="Object"&&P.constructor&&(U=P.constructor.name),U==="Map"||U==="Set"?Array.from(U):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?I(P,j):void 0}}(f,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];if(!k||!p.every(function(P){return P.source}))throw new B.InitError("The load method requires a source argument",{type:B.ErrorTypes.OPTIONS});this.playlist=p,this._load(k)}},{key:"isBrowserSupported",value:function(){return Ee.PlayerCore.isBrowserSupported()}},{key:"destroyPlayer",value:function(){var v=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).retainCastSession,f=v!==void 0&&v;this.core&&(this.core.destroy({retainCastSession:f}),this.core=void 0),this.modules.length&&(this.modules.forEach(function(b){return b.destroy()}),this.modules=[])}},{key:"destroy",value:function(){this.destroyPlayer(),y(i(_.prototype),"destroy",this).call(this),this.destroyed=!0}},{key:"getPlayerInfo",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getPlayerInfo()}},{key:"getSession",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getSession()}},{key:"getAssetInfo",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getAssetInfo()}},{key:"getProgramInfo",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getProgramInfo()}},{key:"getContractRestrictions",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getContractRestrictions()}},{key:"getContainerElement",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getContainerElement()}},{key:"getVideoElement",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getVideoElement()}},{key:"getTimelineSpriteCues",value:function(v){var f,b;return(b=(f=this.core)===null||f===void 0?void 0:f.getTimelineSpriteCues(v))!==null&&b!==void 0?b:Promise.resolve([])}},{key:"getState",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getState()}},{key:"getCurrentTime",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getCurrentTime()}},{key:"getVolume",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getVolume()}},{key:"play",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.play()}},{key:"getSeekable",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getSeekable()}},{key:"pause",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.pause()}},{key:"setMuted",value:function(v){var f;return(f=this.core)===null||f===void 0?void 0:f.setMuted(v)}},{key:"toggleMuted",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.toggleMuted()}},{key:"isFullscreen",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.isFullscreen()}},{key:"toggleFullscreen",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.toggleFullscreen()}},{key:"isPictureInPictureSupported",value:function(){return Ee.PlayerCore.isPictureInPictureSupported()}},{key:"isPictureInPicture",value:function(){var v,f;return(f=(v=this.core)===null||v===void 0?void 0:v.isPictureInPicture())!==null&&f!==void 0&&f}},{key:"togglePictureInPicture",value:function(){var v;(v=this.core)===null||v===void 0||v.togglePictureInPicture()}},{key:"isAirplaySupported",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.isAirplaySupported()}},{key:"isAirplaying",value:function(){var v,f;return(f=(v=this.core)===null||v===void 0?void 0:v.isAirplaying())!==null&&f!==void 0&&f}},{key:"toggleAirPlay",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.toggleAirPlay()}},{key:"seekTo",value:function(v){var f,b=v.time,p=v.change;return(f=this.core)===null||f===void 0?void 0:f.seekTo({time:b,change:p})}},{key:"seekToOffset",value:function(v){var f;return(f=this.core)===null||f===void 0?void 0:f.seekToOffset(v)}},{key:"seekToUTC",value:function(v){var f;return(f=this.core)===null||f===void 0?void 0:f.seekToUTC(v)}},{key:"seekToLive",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.seekToLive()}},{key:"setPlaybackRate",value:function(v){var f;(f=this.core)===null||f===void 0||f.setPlaybackRate(v)}},{key:"setQualityLevel",value:function(v){var f;return(f=this.core)===null||f===void 0?void 0:f.setQualityLevel(v)}},{key:"getQualityLevels",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getQualityLevels()}},{key:"setAudioTrack",value:function(v){var f;return(f=this.core)===null||f===void 0?void 0:f.setAudioTrack(v)}},{key:"setSubtitleTrack",value:function(v){var f;return(f=this.core)===null||f===void 0?void 0:f.setSubtitleTrack(v)}},{key:"setVolume",value:function(v){var f,b=v.percentage;return(f=this.core)===null||f===void 0?void 0:f.setVolume({percentage:b})}},{key:"getAudioTrack",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getAudioTrack()}},{key:"getAudioTracks",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getAudioTracks()}},{key:"getSubtitleTrack",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getSubtitleTrack()}},{key:"getSubtitleTracks",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getSubtitleTracks()}},{key:"isLive",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.isLive()}},{key:"isPlaying",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.isPlaying()}},{key:"getStreamInfo",value:function(){var v;return(v=this.core)===null||v===void 0?void 0:v.getStreamInfo()}}],S&&c(m.prototype,S),_}(B.EmitterBaseClass)})(),Ze})())})(NR);const xR=ka("h2",{class:"text-xl"},"Video Stream:",-1),LR=ka("p",{class:"text-sm mb-2 italic text-gray-400"},"Be aware of a delay of about 40 seconds",-1),MR=ka("iframe",{src:"https://bu-ed788bb.redbee.live/embedded/ac692bf5_ED788Bb",class:"w-full aspect-video"},`
    `,-1),FR=[xR,LR,MR],UR={__name:"VideoPlayer",setup(D){return(Z,te)=>(bu(),Qu("div",null,FR))}},BR={class:"flex justify-between items-center mb-2"},jR=ka("h2",{class:"text-xl"},"Clip Browser",-1),GR={class:"border rounded p-2"},HR={key:0,class:"table-auto w-full"},VR=ka("thead",null,[ka("tr",null,[ka("th",{class:"text-left"},"Id"),ka("th",{class:"text-left"},"Name"),ka("th",{class:"text-left"},"Duration")])],-1),ZR={class:"odd:bg-black"},KR={class:"py-2"},qR=["onClick"],YR={__name:"ClipBrowser",setup(D){const Z=qp(),te=Vl({clips:[]}),pe=()=>{te.clips=[],Z.socket.send(JSON.stringify({command:"clip_refresh"}))};Hp(()=>{Z.socket.addEventListener("message",Ze=>{const Ee=JSON.parse(Ze.data);if(Ee.response==="clip_info"){let B=te.clips.find(K=>K.id==Ee.params.id);B==null?te.clips.push(Ee.params):te.clips[te.clips.indexOf(B)]=Ee.params}else te.clips.length===0&&pe()})});const we=async Ze=>{Z.lastState.status;const Ee={command:"clip_select",params:{id:Ze-1}};console.log(JSON.stringify(Ee)),Z.socket.send(JSON.stringify(Ee))};return(Ze,Ee)=>{const B=X1("fa-icon");return bu(),Qu("div",null,[ka("div",BR,[jR,Va(B,{icon:"rotate-left",size:"xl",onClick:pe})]),ka("div",GR,[te.clips?(bu(),Qu("table",HR,[VR,(bu(!0),Qu(Xs,null,cI(te.clips,K=>(bu(),Qu("tr",ZR,[ka("td",KR,Mc(K.id),1),ka("td",null,Mc(K.name),1),ka("td",null,Mc(K.duration),1),ka("td",null,[ka("button",{class:"border rounded px-1 py-px",onClick:M=>we(K.id)}," play ",8,qR)])]))),256))])):s_("",!0)])])}}},zR={class:"bg-bm-grey text-white h-full flex justify-center py-12"},WR={class:"w-2/3"},XR=ka("h1",{class:"text-3xl border-b-2 py-2"},"Blackmagic Hyperdeck Controller",-1),QR={class:"grid grid-cols-2 border-t py-4 gap-4"},$R={__name:"App",setup(D){const Z=qp();return Y1(()=>{Z.init()}),(te,pe)=>(bu(),Qu("div",zR,[ka("div",WR,[XR,Va(PR),ka("div",QR,[Va(YR),Va(UR)]),Va(AR)])]))}};function UT(D,Z){var te=Object.keys(D);if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(D);Z&&(pe=pe.filter(function(we){return Object.getOwnPropertyDescriptor(D,we).enumerable})),te.push.apply(te,pe)}return te}function Mr(D){for(var Z=1;Z<arguments.length;Z++){var te=arguments[Z]!=null?arguments[Z]:{};Z%2?UT(Object(te),!0).forEach(function(pe){co(D,pe,te[pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(te)):UT(Object(te)).forEach(function(pe){Object.defineProperty(D,pe,Object.getOwnPropertyDescriptor(te,pe))})}return D}function Cp(D){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},Cp(D)}function JR(D,Z){if(!(D instanceof Z))throw new TypeError("Cannot call a class as a function")}function BT(D,Z){for(var te=0;te<Z.length;te++){var pe=Z[te];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(D,pe.key,pe)}}function eC(D,Z,te){return Z&&BT(D.prototype,Z),te&&BT(D,te),Object.defineProperty(D,"prototype",{writable:!1}),D}function co(D,Z,te){return Z in D?Object.defineProperty(D,Z,{value:te,enumerable:!0,configurable:!0,writable:!0}):D[Z]=te,D}function ty(D,Z){return nC(D)||iC(D,Z)||p_(D,Z)||oC()}function dd(D){return tC(D)||rC(D)||p_(D)||aC()}function tC(D){if(Array.isArray(D))return Sv(D)}function nC(D){if(Array.isArray(D))return D}function rC(D){if(typeof Symbol<"u"&&D[Symbol.iterator]!=null||D["@@iterator"]!=null)return Array.from(D)}function iC(D,Z){var te=D==null?null:typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(te!=null){var pe=[],we=!0,Ze=!1,Ee,B;try{for(te=te.call(D);!(we=(Ee=te.next()).done)&&(pe.push(Ee.value),!(Z&&pe.length===Z));we=!0);}catch(K){Ze=!0,B=K}finally{try{!we&&te.return!=null&&te.return()}finally{if(Ze)throw B}}return pe}}function p_(D,Z){if(D){if(typeof D=="string")return Sv(D,Z);var te=Object.prototype.toString.call(D).slice(8,-1);if(te==="Object"&&D.constructor&&(te=D.constructor.name),te==="Map"||te==="Set")return Array.from(D);if(te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te))return Sv(D,Z)}}function Sv(D,Z){(Z==null||Z>D.length)&&(Z=D.length);for(var te=0,pe=new Array(Z);te<Z;te++)pe[te]=D[te];return pe}function aC(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var jT=function(){},ny={},g_={},m_=null,v_={mark:jT,measure:jT};try{typeof window<"u"&&(ny=window),typeof document<"u"&&(g_=document),typeof MutationObserver<"u"&&(m_=MutationObserver),typeof performance<"u"&&(v_=performance)}catch{}var sC=ny.navigator||{},GT=sC.userAgent,HT=GT===void 0?"":GT,nl=ny,La=g_,VT=m_,lp=v_;nl.document;var Iu=!!La.documentElement&&!!La.head&&typeof La.addEventListener=="function"&&typeof La.createElement=="function",y_=~HT.indexOf("MSIE")||~HT.indexOf("Trident/"),cp,fp,dp,hp,pp,_u="___FONT_AWESOME___",Av=16,E_="fa",b_="svg-inline--fa",Gl="data-fa-i2svg",wv="data-fa-pseudo-element",uC="data-fa-pseudo-element-pending",ry="data-prefix",iy="data-icon",ZT="fontawesome-i2svg",lC="async",cC=["HTML","HEAD","STYLE","SCRIPT"],T_=function(){try{return!0}catch{return!1}}(),xa="classic",za="sharp",ay=[xa,za];function hd(D){return new Proxy(D,{get:function(te,pe){return pe in te?te[pe]:te[xa]}})}var sd=hd((cp={},co(cp,xa,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),co(cp,za,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light"}),cp)),ud=hd((fp={},co(fp,xa,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),co(fp,za,{solid:"fass",regular:"fasr",light:"fasl"}),fp)),ld=hd((dp={},co(dp,xa,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),co(dp,za,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light"}),dp)),fC=hd((hp={},co(hp,xa,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),co(hp,za,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl"}),hp)),dC=/fa(s|r|l|t|d|b|k|ss|sr|sl)?[\-\ ]/,__="fa-layers-text",hC=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,pC=hd((pp={},co(pp,xa,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),co(pp,za,{900:"fass",400:"fasr",300:"fasl"}),pp)),S_=[1,2,3,4,5,6,7,8,9,10],gC=S_.concat([11,12,13,14,15,16,17,18,19,20]),mC=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Ml={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},cd=new Set;Object.keys(ud[xa]).map(cd.add.bind(cd));Object.keys(ud[za]).map(cd.add.bind(cd));var vC=[].concat(ay,dd(cd),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Ml.GROUP,Ml.SWAP_OPACITY,Ml.PRIMARY,Ml.SECONDARY]).concat(S_.map(function(D){return"".concat(D,"x")})).concat(gC.map(function(D){return"w-".concat(D)})),$f=nl.FontAwesomeConfig||{};function yC(D){var Z=La.querySelector("script["+D+"]");if(Z)return Z.getAttribute(D)}function EC(D){return D===""?!0:D==="false"?!1:D==="true"?!0:D}if(La&&typeof La.querySelector=="function"){var bC=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];bC.forEach(function(D){var Z=ty(D,2),te=Z[0],pe=Z[1],we=EC(yC(te));we!=null&&($f[pe]=we)})}var A_={styleDefault:"solid",familyDefault:"classic",cssPrefix:E_,replacementClass:b_,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};$f.familyPrefix&&($f.cssPrefix=$f.familyPrefix);var Hc=Mr(Mr({},A_),$f);Hc.autoReplaceSvg||(Hc.observeMutations=!1);var Yr={};Object.keys(A_).forEach(function(D){Object.defineProperty(Yr,D,{enumerable:!0,set:function(te){Hc[D]=te,Jf.forEach(function(pe){return pe(Yr)})},get:function(){return Hc[D]}})});Object.defineProperty(Yr,"familyPrefix",{enumerable:!0,set:function(Z){Hc.cssPrefix=Z,Jf.forEach(function(te){return te(Yr)})},get:function(){return Hc.cssPrefix}});nl.FontAwesomeConfig=Yr;var Jf=[];function TC(D){return Jf.push(D),function(){Jf.splice(Jf.indexOf(D),1)}}var Yu=Av,Js={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function _C(D){if(!(!D||!Iu)){var Z=La.createElement("style");Z.setAttribute("type","text/css"),Z.innerHTML=D;for(var te=La.head.childNodes,pe=null,we=te.length-1;we>-1;we--){var Ze=te[we],Ee=(Ze.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(Ee)>-1&&(pe=Ze)}return La.head.insertBefore(Z,pe),D}}var SC="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function fd(){for(var D=12,Z="";D-- >0;)Z+=SC[Math.random()*62|0];return Z}function qc(D){for(var Z=[],te=(D||[]).length>>>0;te--;)Z[te]=D[te];return Z}function oy(D){return D.classList?qc(D.classList):(D.getAttribute("class")||"").split(" ").filter(function(Z){return Z})}function w_(D){return"".concat(D).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function AC(D){return Object.keys(D||{}).reduce(function(Z,te){return Z+"".concat(te,'="').concat(w_(D[te]),'" ')},"").trim()}function Yp(D){return Object.keys(D||{}).reduce(function(Z,te){return Z+"".concat(te,": ").concat(D[te].trim(),";")},"")}function sy(D){return D.size!==Js.size||D.x!==Js.x||D.y!==Js.y||D.rotate!==Js.rotate||D.flipX||D.flipY}function wC(D){var Z=D.transform,te=D.containerWidth,pe=D.iconWidth,we={transform:"translate(".concat(te/2," 256)")},Ze="translate(".concat(Z.x*32,", ").concat(Z.y*32,") "),Ee="scale(".concat(Z.size/16*(Z.flipX?-1:1),", ").concat(Z.size/16*(Z.flipY?-1:1),") "),B="rotate(".concat(Z.rotate," 0 0)"),K={transform:"".concat(Ze," ").concat(Ee," ").concat(B)},M={transform:"translate(".concat(pe/2*-1," -256)")};return{outer:we,inner:K,path:M}}function IC(D){var Z=D.transform,te=D.width,pe=te===void 0?Av:te,we=D.height,Ze=we===void 0?Av:we,Ee=D.startCentered,B=Ee===void 0?!1:Ee,K="";return B&&y_?K+="translate(".concat(Z.x/Yu-pe/2,"em, ").concat(Z.y/Yu-Ze/2,"em) "):B?K+="translate(calc(-50% + ".concat(Z.x/Yu,"em), calc(-50% + ").concat(Z.y/Yu,"em)) "):K+="translate(".concat(Z.x/Yu,"em, ").concat(Z.y/Yu,"em) "),K+="scale(".concat(Z.size/Yu*(Z.flipX?-1:1),", ").concat(Z.size/Yu*(Z.flipY?-1:1),") "),K+="rotate(".concat(Z.rotate,"deg) "),K}var RC=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function I_(){var D=E_,Z=b_,te=Yr.cssPrefix,pe=Yr.replacementClass,we=RC;if(te!==D||pe!==Z){var Ze=new RegExp("\\.".concat(D,"\\-"),"g"),Ee=new RegExp("\\--".concat(D,"\\-"),"g"),B=new RegExp("\\.".concat(Z),"g");we=we.replace(Ze,".".concat(te,"-")).replace(Ee,"--".concat(te,"-")).replace(B,".".concat(pe))}return we}var KT=!1;function iv(){Yr.autoAddCss&&!KT&&(_C(I_()),KT=!0)}var CC={mixout:function(){return{dom:{css:I_,insertCss:iv}}},hooks:function(){return{beforeDOMElementCreation:function(){iv()},beforeI2svg:function(){iv()}}}},Su=nl||{};Su[_u]||(Su[_u]={});Su[_u].styles||(Su[_u].styles={});Su[_u].hooks||(Su[_u].hooks={});Su[_u].shims||(Su[_u].shims=[]);var xs=Su[_u],R_=[],kC=function D(){La.removeEventListener("DOMContentLoaded",D),kp=1,R_.map(function(Z){return Z()})},kp=!1;Iu&&(kp=(La.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(La.readyState),kp||La.addEventListener("DOMContentLoaded",kC));function OC(D){Iu&&(kp?setTimeout(D,0):R_.push(D))}function pd(D){var Z=D.tag,te=D.attributes,pe=te===void 0?{}:te,we=D.children,Ze=we===void 0?[]:we;return typeof D=="string"?w_(D):"<".concat(Z," ").concat(AC(pe),">").concat(Ze.map(pd).join(""),"</").concat(Z,">")}function qT(D,Z,te){if(D&&D[Z]&&D[Z][te])return{prefix:Z,iconName:te,icon:D[Z][te]}}var DC=function(Z,te){return function(pe,we,Ze,Ee){return Z.call(te,pe,we,Ze,Ee)}},av=function(Z,te,pe,we){var Ze=Object.keys(Z),Ee=Ze.length,B=we!==void 0?DC(te,we):te,K,M,x;for(pe===void 0?(K=1,x=Z[Ze[0]]):(K=0,x=pe);K<Ee;K++)M=Ze[K],x=B(x,Z[M],M,Z);return x};function PC(D){for(var Z=[],te=0,pe=D.length;te<pe;){var we=D.charCodeAt(te++);if(we>=55296&&we<=56319&&te<pe){var Ze=D.charCodeAt(te++);(Ze&64512)==56320?Z.push(((we&1023)<<10)+(Ze&1023)+65536):(Z.push(we),te--)}else Z.push(we)}return Z}function Iv(D){var Z=PC(D);return Z.length===1?Z[0].toString(16):null}function NC(D,Z){var te=D.length,pe=D.charCodeAt(Z),we;return pe>=55296&&pe<=56319&&te>Z+1&&(we=D.charCodeAt(Z+1),we>=56320&&we<=57343)?(pe-55296)*1024+we-56320+65536:pe}function YT(D){return Object.keys(D).reduce(function(Z,te){var pe=D[te],we=!!pe.icon;return we?Z[pe.iconName]=pe.icon:Z[te]=pe,Z},{})}function Rv(D,Z){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},pe=te.skipHooks,we=pe===void 0?!1:pe,Ze=YT(Z);typeof xs.hooks.addPack=="function"&&!we?xs.hooks.addPack(D,YT(Z)):xs.styles[D]=Mr(Mr({},xs.styles[D]||{}),Ze),D==="fas"&&Rv("fa",Z)}var gp,mp,vp,Pc=xs.styles,xC=xs.shims,LC=(gp={},co(gp,xa,Object.values(ld[xa])),co(gp,za,Object.values(ld[za])),gp),uy=null,C_={},k_={},O_={},D_={},P_={},MC=(mp={},co(mp,xa,Object.keys(sd[xa])),co(mp,za,Object.keys(sd[za])),mp);function FC(D){return~vC.indexOf(D)}function UC(D,Z){var te=Z.split("-"),pe=te[0],we=te.slice(1).join("-");return pe===D&&we!==""&&!FC(we)?we:null}var N_=function(){var Z=function(Ze){return av(Pc,function(Ee,B,K){return Ee[K]=av(B,Ze,{}),Ee},{})};C_=Z(function(we,Ze,Ee){if(Ze[3]&&(we[Ze[3]]=Ee),Ze[2]){var B=Ze[2].filter(function(K){return typeof K=="number"});B.forEach(function(K){we[K.toString(16)]=Ee})}return we}),k_=Z(function(we,Ze,Ee){if(we[Ee]=Ee,Ze[2]){var B=Ze[2].filter(function(K){return typeof K=="string"});B.forEach(function(K){we[K]=Ee})}return we}),P_=Z(function(we,Ze,Ee){var B=Ze[2];return we[Ee]=Ee,B.forEach(function(K){we[K]=Ee}),we});var te="far"in Pc||Yr.autoFetchSvg,pe=av(xC,function(we,Ze){var Ee=Ze[0],B=Ze[1],K=Ze[2];return B==="far"&&!te&&(B="fas"),typeof Ee=="string"&&(we.names[Ee]={prefix:B,iconName:K}),typeof Ee=="number"&&(we.unicodes[Ee.toString(16)]={prefix:B,iconName:K}),we},{names:{},unicodes:{}});O_=pe.names,D_=pe.unicodes,uy=zp(Yr.styleDefault,{family:Yr.familyDefault})};TC(function(D){uy=zp(D.styleDefault,{family:Yr.familyDefault})});N_();function ly(D,Z){return(C_[D]||{})[Z]}function BC(D,Z){return(k_[D]||{})[Z]}function Fl(D,Z){return(P_[D]||{})[Z]}function x_(D){return O_[D]||{prefix:null,iconName:null}}function jC(D){var Z=D_[D],te=ly("fas",D);return Z||(te?{prefix:"fas",iconName:te}:null)||{prefix:null,iconName:null}}function rl(){return uy}var cy=function(){return{prefix:null,iconName:null,rest:[]}};function zp(D){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=Z.family,pe=te===void 0?xa:te,we=sd[pe][D],Ze=ud[pe][D]||ud[pe][we],Ee=D in xs.styles?D:null;return Ze||Ee||null}var zT=(vp={},co(vp,xa,Object.keys(ld[xa])),co(vp,za,Object.keys(ld[za])),vp);function Wp(D){var Z,te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=te.skipLookups,we=pe===void 0?!1:pe,Ze=(Z={},co(Z,xa,"".concat(Yr.cssPrefix,"-").concat(xa)),co(Z,za,"".concat(Yr.cssPrefix,"-").concat(za)),Z),Ee=null,B=xa;(D.includes(Ze[xa])||D.some(function(M){return zT[xa].includes(M)}))&&(B=xa),(D.includes(Ze[za])||D.some(function(M){return zT[za].includes(M)}))&&(B=za);var K=D.reduce(function(M,x){var N=UC(Yr.cssPrefix,x);if(Pc[x]?(x=LC[B].includes(x)?fC[B][x]:x,Ee=x,M.prefix=x):MC[B].indexOf(x)>-1?(Ee=x,M.prefix=zp(x,{family:B})):N?M.iconName=N:x!==Yr.replacementClass&&x!==Ze[xa]&&x!==Ze[za]&&M.rest.push(x),!we&&M.prefix&&M.iconName){var C=Ee==="fa"?x_(M.iconName):{},R=Fl(M.prefix,M.iconName);C.prefix&&(Ee=null),M.iconName=C.iconName||R||M.iconName,M.prefix=C.prefix||M.prefix,M.prefix==="far"&&!Pc.far&&Pc.fas&&!Yr.autoFetchSvg&&(M.prefix="fas")}return M},cy());return(D.includes("fa-brands")||D.includes("fab"))&&(K.prefix="fab"),(D.includes("fa-duotone")||D.includes("fad"))&&(K.prefix="fad"),!K.prefix&&B===za&&(Pc.fass||Yr.autoFetchSvg)&&(K.prefix="fass",K.iconName=Fl(K.prefix,K.iconName)||K.iconName),(K.prefix==="fa"||Ee==="fa")&&(K.prefix=rl()||"fas"),K}var GC=function(){function D(){JR(this,D),this.definitions={}}return eC(D,[{key:"add",value:function(){for(var te=this,pe=arguments.length,we=new Array(pe),Ze=0;Ze<pe;Ze++)we[Ze]=arguments[Ze];var Ee=we.reduce(this._pullDefinitions,{});Object.keys(Ee).forEach(function(B){te.definitions[B]=Mr(Mr({},te.definitions[B]||{}),Ee[B]),Rv(B,Ee[B]);var K=ld[xa][B];K&&Rv(K,Ee[B]),N_()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(te,pe){var we=pe.prefix&&pe.iconName&&pe.icon?{0:pe}:pe;return Object.keys(we).map(function(Ze){var Ee=we[Ze],B=Ee.prefix,K=Ee.iconName,M=Ee.icon,x=M[2];te[B]||(te[B]={}),x.length>0&&x.forEach(function(N){typeof N=="string"&&(te[B][N]=M)}),te[B][K]=M}),te}}]),D}(),WT=[],Nc={},Uc={},HC=Object.keys(Uc);function VC(D,Z){var te=Z.mixoutsTo;return WT=D,Nc={},Object.keys(Uc).forEach(function(pe){HC.indexOf(pe)===-1&&delete Uc[pe]}),WT.forEach(function(pe){var we=pe.mixout?pe.mixout():{};if(Object.keys(we).forEach(function(Ee){typeof we[Ee]=="function"&&(te[Ee]=we[Ee]),Cp(we[Ee])==="object"&&Object.keys(we[Ee]).forEach(function(B){te[Ee]||(te[Ee]={}),te[Ee][B]=we[Ee][B]})}),pe.hooks){var Ze=pe.hooks();Object.keys(Ze).forEach(function(Ee){Nc[Ee]||(Nc[Ee]=[]),Nc[Ee].push(Ze[Ee])})}pe.provides&&pe.provides(Uc)}),te}function Cv(D,Z){for(var te=arguments.length,pe=new Array(te>2?te-2:0),we=2;we<te;we++)pe[we-2]=arguments[we];var Ze=Nc[D]||[];return Ze.forEach(function(Ee){Z=Ee.apply(null,[Z].concat(pe))}),Z}function Hl(D){for(var Z=arguments.length,te=new Array(Z>1?Z-1:0),pe=1;pe<Z;pe++)te[pe-1]=arguments[pe];var we=Nc[D]||[];we.forEach(function(Ze){Ze.apply(null,te)})}function Au(){var D=arguments[0],Z=Array.prototype.slice.call(arguments,1);return Uc[D]?Uc[D].apply(null,Z):void 0}function kv(D){D.prefix==="fa"&&(D.prefix="fas");var Z=D.iconName,te=D.prefix||rl();if(Z)return Z=Fl(te,Z)||Z,qT(L_.definitions,te,Z)||qT(xs.styles,te,Z)}var L_=new GC,ZC=function(){Yr.autoReplaceSvg=!1,Yr.observeMutations=!1,Hl("noAuto")},KC={i2svg:function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Iu?(Hl("beforeI2svg",Z),Au("pseudoElements2svg",Z),Au("i2svg",Z)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},te=Z.autoReplaceSvgRoot;Yr.autoReplaceSvg===!1&&(Yr.autoReplaceSvg=!0),Yr.observeMutations=!0,OC(function(){YC({autoReplaceSvgRoot:te}),Hl("watch",Z)})}},qC={icon:function(Z){if(Z===null)return null;if(Cp(Z)==="object"&&Z.prefix&&Z.iconName)return{prefix:Z.prefix,iconName:Fl(Z.prefix,Z.iconName)||Z.iconName};if(Array.isArray(Z)&&Z.length===2){var te=Z[1].indexOf("fa-")===0?Z[1].slice(3):Z[1],pe=zp(Z[0]);return{prefix:pe,iconName:Fl(pe,te)||te}}if(typeof Z=="string"&&(Z.indexOf("".concat(Yr.cssPrefix,"-"))>-1||Z.match(dC))){var we=Wp(Z.split(" "),{skipLookups:!0});return{prefix:we.prefix||rl(),iconName:Fl(we.prefix,we.iconName)||we.iconName}}if(typeof Z=="string"){var Ze=rl();return{prefix:Ze,iconName:Fl(Ze,Z)||Z}}}},Jo={noAuto:ZC,config:Yr,dom:KC,parse:qC,library:L_,findIconDefinition:kv,toHtml:pd},YC=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},te=Z.autoReplaceSvgRoot,pe=te===void 0?La:te;(Object.keys(xs.styles).length>0||Yr.autoFetchSvg)&&Iu&&Yr.autoReplaceSvg&&Jo.dom.i2svg({node:pe})};function Xp(D,Z){return Object.defineProperty(D,"abstract",{get:Z}),Object.defineProperty(D,"html",{get:function(){return D.abstract.map(function(pe){return pd(pe)})}}),Object.defineProperty(D,"node",{get:function(){if(Iu){var pe=La.createElement("div");return pe.innerHTML=D.html,pe.children}}}),D}function zC(D){var Z=D.children,te=D.main,pe=D.mask,we=D.attributes,Ze=D.styles,Ee=D.transform;if(sy(Ee)&&te.found&&!pe.found){var B=te.width,K=te.height,M={x:B/K/2,y:.5};we.style=Yp(Mr(Mr({},Ze),{},{"transform-origin":"".concat(M.x+Ee.x/16,"em ").concat(M.y+Ee.y/16,"em")}))}return[{tag:"svg",attributes:we,children:Z}]}function WC(D){var Z=D.prefix,te=D.iconName,pe=D.children,we=D.attributes,Ze=D.symbol,Ee=Ze===!0?"".concat(Z,"-").concat(Yr.cssPrefix,"-").concat(te):Ze;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Mr(Mr({},we),{},{id:Ee}),children:pe}]}]}function fy(D){var Z=D.icons,te=Z.main,pe=Z.mask,we=D.prefix,Ze=D.iconName,Ee=D.transform,B=D.symbol,K=D.title,M=D.maskId,x=D.titleId,N=D.extra,C=D.watchable,R=C===void 0?!1:C,I=pe.found?pe:te,E=I.width,T=I.height,l=we==="fak",c=[Yr.replacementClass,Ze?"".concat(Yr.cssPrefix,"-").concat(Ze):""].filter(function(t){return N.classes.indexOf(t)===-1}).filter(function(t){return t!==""||!!t}).concat(N.classes).join(" "),h={children:[],attributes:Mr(Mr({},N.attributes),{},{"data-prefix":we,"data-icon":Ze,class:c,role:N.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(E," ").concat(T)})},y=l&&!~N.classes.indexOf("fa-fw")?{width:"".concat(E/T*16*.0625,"em")}:{};R&&(h.attributes[Gl]=""),K&&(h.children.push({tag:"title",attributes:{id:h.attributes["aria-labelledby"]||"title-".concat(x||fd())},children:[K]}),delete h.attributes.title);var i=Mr(Mr({},h),{},{prefix:we,iconName:Ze,main:te,mask:pe,maskId:M,transform:Ee,symbol:B,styles:Mr(Mr({},y),N.styles)}),g=pe.found&&te.found?Au("generateAbstractMask",i)||{children:[],attributes:{}}:Au("generateAbstractIcon",i)||{children:[],attributes:{}},d=g.children,r=g.attributes;return i.children=d,i.attributes=r,B?WC(i):zC(i)}function XT(D){var Z=D.content,te=D.width,pe=D.height,we=D.transform,Ze=D.title,Ee=D.extra,B=D.watchable,K=B===void 0?!1:B,M=Mr(Mr(Mr({},Ee.attributes),Ze?{title:Ze}:{}),{},{class:Ee.classes.join(" ")});K&&(M[Gl]="");var x=Mr({},Ee.styles);sy(we)&&(x.transform=IC({transform:we,startCentered:!0,width:te,height:pe}),x["-webkit-transform"]=x.transform);var N=Yp(x);N.length>0&&(M.style=N);var C=[];return C.push({tag:"span",attributes:M,children:[Z]}),Ze&&C.push({tag:"span",attributes:{class:"sr-only"},children:[Ze]}),C}function XC(D){var Z=D.content,te=D.title,pe=D.extra,we=Mr(Mr(Mr({},pe.attributes),te?{title:te}:{}),{},{class:pe.classes.join(" ")}),Ze=Yp(pe.styles);Ze.length>0&&(we.style=Ze);var Ee=[];return Ee.push({tag:"span",attributes:we,children:[Z]}),te&&Ee.push({tag:"span",attributes:{class:"sr-only"},children:[te]}),Ee}var ov=xs.styles;function Ov(D){var Z=D[0],te=D[1],pe=D.slice(4),we=ty(pe,1),Ze=we[0],Ee=null;return Array.isArray(Ze)?Ee={tag:"g",attributes:{class:"".concat(Yr.cssPrefix,"-").concat(Ml.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Yr.cssPrefix,"-").concat(Ml.SECONDARY),fill:"currentColor",d:Ze[0]}},{tag:"path",attributes:{class:"".concat(Yr.cssPrefix,"-").concat(Ml.PRIMARY),fill:"currentColor",d:Ze[1]}}]}:Ee={tag:"path",attributes:{fill:"currentColor",d:Ze}},{found:!0,width:Z,height:te,icon:Ee}}var QC={found:!1,width:512,height:512};function $C(D,Z){!T_&&!Yr.showMissingIcons&&D&&console.error('Icon with name "'.concat(D,'" and prefix "').concat(Z,'" is missing.'))}function Dv(D,Z){var te=Z;return Z==="fa"&&Yr.styleDefault!==null&&(Z=rl()),new Promise(function(pe,we){if(Au("missingIconAbstract"),te==="fa"){var Ze=x_(D)||{};D=Ze.iconName||D,Z=Ze.prefix||Z}if(D&&Z&&ov[Z]&&ov[Z][D]){var Ee=ov[Z][D];return pe(Ov(Ee))}$C(D,Z),pe(Mr(Mr({},QC),{},{icon:Yr.showMissingIcons&&D?Au("missingIconAbstract")||{}:{}}))})}var QT=function(){},Pv=Yr.measurePerformance&&lp&&lp.mark&&lp.measure?lp:{mark:QT,measure:QT},qf='FA "6.4.2"',JC=function(Z){return Pv.mark("".concat(qf," ").concat(Z," begins")),function(){return M_(Z)}},M_=function(Z){Pv.mark("".concat(qf," ").concat(Z," ends")),Pv.measure("".concat(qf," ").concat(Z),"".concat(qf," ").concat(Z," begins"),"".concat(qf," ").concat(Z," ends"))},dy={begin:JC,end:M_},Tp=function(){};function $T(D){var Z=D.getAttribute?D.getAttribute(Gl):null;return typeof Z=="string"}function ek(D){var Z=D.getAttribute?D.getAttribute(ry):null,te=D.getAttribute?D.getAttribute(iy):null;return Z&&te}function tk(D){return D&&D.classList&&D.classList.contains&&D.classList.contains(Yr.replacementClass)}function nk(){if(Yr.autoReplaceSvg===!0)return _p.replace;var D=_p[Yr.autoReplaceSvg];return D||_p.replace}function rk(D){return La.createElementNS("http://www.w3.org/2000/svg",D)}function ik(D){return La.createElement(D)}function F_(D){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=Z.ceFn,pe=te===void 0?D.tag==="svg"?rk:ik:te;if(typeof D=="string")return La.createTextNode(D);var we=pe(D.tag);Object.keys(D.attributes||[]).forEach(function(Ee){we.setAttribute(Ee,D.attributes[Ee])});var Ze=D.children||[];return Ze.forEach(function(Ee){we.appendChild(F_(Ee,{ceFn:pe}))}),we}function ak(D){var Z=" ".concat(D.outerHTML," ");return Z="".concat(Z,"Font Awesome fontawesome.com "),Z}var _p={replace:function(Z){var te=Z[0];if(te.parentNode)if(Z[1].forEach(function(we){te.parentNode.insertBefore(F_(we),te)}),te.getAttribute(Gl)===null&&Yr.keepOriginalSource){var pe=La.createComment(ak(te));te.parentNode.replaceChild(pe,te)}else te.remove()},nest:function(Z){var te=Z[0],pe=Z[1];if(~oy(te).indexOf(Yr.replacementClass))return _p.replace(Z);var we=new RegExp("".concat(Yr.cssPrefix,"-.*"));if(delete pe[0].attributes.id,pe[0].attributes.class){var Ze=pe[0].attributes.class.split(" ").reduce(function(B,K){return K===Yr.replacementClass||K.match(we)?B.toSvg.push(K):B.toNode.push(K),B},{toNode:[],toSvg:[]});pe[0].attributes.class=Ze.toSvg.join(" "),Ze.toNode.length===0?te.removeAttribute("class"):te.setAttribute("class",Ze.toNode.join(" "))}var Ee=pe.map(function(B){return pd(B)}).join(`
`);te.setAttribute(Gl,""),te.innerHTML=Ee}};function JT(D){D()}function U_(D,Z){var te=typeof Z=="function"?Z:Tp;if(D.length===0)te();else{var pe=JT;Yr.mutateApproach===lC&&(pe=nl.requestAnimationFrame||JT),pe(function(){var we=nk(),Ze=dy.begin("mutate");D.map(we),Ze(),te()})}}var hy=!1;function B_(){hy=!0}function Nv(){hy=!1}var Op=null;function e1(D){if(VT&&Yr.observeMutations){var Z=D.treeCallback,te=Z===void 0?Tp:Z,pe=D.nodeCallback,we=pe===void 0?Tp:pe,Ze=D.pseudoElementsCallback,Ee=Ze===void 0?Tp:Ze,B=D.observeMutationsRoot,K=B===void 0?La:B;Op=new VT(function(M){if(!hy){var x=rl();qc(M).forEach(function(N){if(N.type==="childList"&&N.addedNodes.length>0&&!$T(N.addedNodes[0])&&(Yr.searchPseudoElements&&Ee(N.target),te(N.target)),N.type==="attributes"&&N.target.parentNode&&Yr.searchPseudoElements&&Ee(N.target.parentNode),N.type==="attributes"&&$T(N.target)&&~mC.indexOf(N.attributeName))if(N.attributeName==="class"&&ek(N.target)){var C=Wp(oy(N.target)),R=C.prefix,I=C.iconName;N.target.setAttribute(ry,R||x),I&&N.target.setAttribute(iy,I)}else tk(N.target)&&we(N.target)})}}),Iu&&Op.observe(K,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function ok(){Op&&Op.disconnect()}function sk(D){var Z=D.getAttribute("style"),te=[];return Z&&(te=Z.split(";").reduce(function(pe,we){var Ze=we.split(":"),Ee=Ze[0],B=Ze.slice(1);return Ee&&B.length>0&&(pe[Ee]=B.join(":").trim()),pe},{})),te}function uk(D){var Z=D.getAttribute("data-prefix"),te=D.getAttribute("data-icon"),pe=D.innerText!==void 0?D.innerText.trim():"",we=Wp(oy(D));return we.prefix||(we.prefix=rl()),Z&&te&&(we.prefix=Z,we.iconName=te),we.iconName&&we.prefix||(we.prefix&&pe.length>0&&(we.iconName=BC(we.prefix,D.innerText)||ly(we.prefix,Iv(D.innerText))),!we.iconName&&Yr.autoFetchSvg&&D.firstChild&&D.firstChild.nodeType===Node.TEXT_NODE&&(we.iconName=D.firstChild.data)),we}function lk(D){var Z=qc(D.attributes).reduce(function(we,Ze){return we.name!=="class"&&we.name!=="style"&&(we[Ze.name]=Ze.value),we},{}),te=D.getAttribute("title"),pe=D.getAttribute("data-fa-title-id");return Yr.autoA11y&&(te?Z["aria-labelledby"]="".concat(Yr.replacementClass,"-title-").concat(pe||fd()):(Z["aria-hidden"]="true",Z.focusable="false")),Z}function ck(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Js,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function t1(D){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},te=uk(D),pe=te.iconName,we=te.prefix,Ze=te.rest,Ee=lk(D),B=Cv("parseNodeAttributes",{},D),K=Z.styleParser?sk(D):[];return Mr({iconName:pe,title:D.getAttribute("title"),titleId:D.getAttribute("data-fa-title-id"),prefix:we,transform:Js,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:Ze,styles:K,attributes:Ee}},B)}var fk=xs.styles;function j_(D){var Z=Yr.autoReplaceSvg==="nest"?t1(D,{styleParser:!1}):t1(D);return~Z.extra.classes.indexOf(__)?Au("generateLayersText",D,Z):Au("generateSvgReplacementMutation",D,Z)}var il=new Set;ay.map(function(D){il.add("fa-".concat(D))});Object.keys(sd[xa]).map(il.add.bind(il));Object.keys(sd[za]).map(il.add.bind(il));il=dd(il);function n1(D){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Iu)return Promise.resolve();var te=La.documentElement.classList,pe=function(N){return te.add("".concat(ZT,"-").concat(N))},we=function(N){return te.remove("".concat(ZT,"-").concat(N))},Ze=Yr.autoFetchSvg?il:ay.map(function(x){return"fa-".concat(x)}).concat(Object.keys(fk));Ze.includes("fa")||Ze.push("fa");var Ee=[".".concat(__,":not([").concat(Gl,"])")].concat(Ze.map(function(x){return".".concat(x,":not([").concat(Gl,"])")})).join(", ");if(Ee.length===0)return Promise.resolve();var B=[];try{B=qc(D.querySelectorAll(Ee))}catch{}if(B.length>0)pe("pending"),we("complete");else return Promise.resolve();var K=dy.begin("onTree"),M=B.reduce(function(x,N){try{var C=j_(N);C&&x.push(C)}catch(R){T_||R.name==="MissingIcon"&&console.error(R)}return x},[]);return new Promise(function(x,N){Promise.all(M).then(function(C){U_(C,function(){pe("active"),pe("complete"),we("pending"),typeof Z=="function"&&Z(),K(),x()})}).catch(function(C){K(),N(C)})})}function dk(D){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;j_(D).then(function(te){te&&U_([te],Z)})}function hk(D){return function(Z){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=(Z||{}).icon?Z:kv(Z||{}),we=te.mask;return we&&(we=(we||{}).icon?we:kv(we||{})),D(pe,Mr(Mr({},te),{},{mask:we}))}}var pk=function(Z){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=te.transform,we=pe===void 0?Js:pe,Ze=te.symbol,Ee=Ze===void 0?!1:Ze,B=te.mask,K=B===void 0?null:B,M=te.maskId,x=M===void 0?null:M,N=te.title,C=N===void 0?null:N,R=te.titleId,I=R===void 0?null:R,E=te.classes,T=E===void 0?[]:E,l=te.attributes,c=l===void 0?{}:l,h=te.styles,y=h===void 0?{}:h;if(Z){var i=Z.prefix,g=Z.iconName,d=Z.icon;return Xp(Mr({type:"icon"},Z),function(){return Hl("beforeDOMElementCreation",{iconDefinition:Z,params:te}),Yr.autoA11y&&(C?c["aria-labelledby"]="".concat(Yr.replacementClass,"-title-").concat(I||fd()):(c["aria-hidden"]="true",c.focusable="false")),fy({icons:{main:Ov(d),mask:K?Ov(K.icon):{found:!1,width:null,height:null,icon:{}}},prefix:i,iconName:g,transform:Mr(Mr({},Js),we),symbol:Ee,title:C,maskId:x,titleId:I,extra:{attributes:c,styles:y,classes:T}})})}},gk={mixout:function(){return{icon:hk(pk)}},hooks:function(){return{mutationObserverCallbacks:function(te){return te.treeCallback=n1,te.nodeCallback=dk,te}}},provides:function(Z){Z.i2svg=function(te){var pe=te.node,we=pe===void 0?La:pe,Ze=te.callback,Ee=Ze===void 0?function(){}:Ze;return n1(we,Ee)},Z.generateSvgReplacementMutation=function(te,pe){var we=pe.iconName,Ze=pe.title,Ee=pe.titleId,B=pe.prefix,K=pe.transform,M=pe.symbol,x=pe.mask,N=pe.maskId,C=pe.extra;return new Promise(function(R,I){Promise.all([Dv(we,B),x.iconName?Dv(x.iconName,x.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(E){var T=ty(E,2),l=T[0],c=T[1];R([te,fy({icons:{main:l,mask:c},prefix:B,iconName:we,transform:K,symbol:M,maskId:N,title:Ze,titleId:Ee,extra:C,watchable:!0})])}).catch(I)})},Z.generateAbstractIcon=function(te){var pe=te.children,we=te.attributes,Ze=te.main,Ee=te.transform,B=te.styles,K=Yp(B);K.length>0&&(we.style=K);var M;return sy(Ee)&&(M=Au("generateAbstractTransformGrouping",{main:Ze,transform:Ee,containerWidth:Ze.width,iconWidth:Ze.width})),pe.push(M||Ze.icon),{children:pe,attributes:we}}}},mk={mixout:function(){return{layer:function(te){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=pe.classes,Ze=we===void 0?[]:we;return Xp({type:"layer"},function(){Hl("beforeDOMElementCreation",{assembler:te,params:pe});var Ee=[];return te(function(B){Array.isArray(B)?B.map(function(K){Ee=Ee.concat(K.abstract)}):Ee=Ee.concat(B.abstract)}),[{tag:"span",attributes:{class:["".concat(Yr.cssPrefix,"-layers")].concat(dd(Ze)).join(" ")},children:Ee}]})}}}},vk={mixout:function(){return{counter:function(te){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=pe.title,Ze=we===void 0?null:we,Ee=pe.classes,B=Ee===void 0?[]:Ee,K=pe.attributes,M=K===void 0?{}:K,x=pe.styles,N=x===void 0?{}:x;return Xp({type:"counter",content:te},function(){return Hl("beforeDOMElementCreation",{content:te,params:pe}),XC({content:te.toString(),title:Ze,extra:{attributes:M,styles:N,classes:["".concat(Yr.cssPrefix,"-layers-counter")].concat(dd(B))}})})}}}},yk={mixout:function(){return{text:function(te){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=pe.transform,Ze=we===void 0?Js:we,Ee=pe.title,B=Ee===void 0?null:Ee,K=pe.classes,M=K===void 0?[]:K,x=pe.attributes,N=x===void 0?{}:x,C=pe.styles,R=C===void 0?{}:C;return Xp({type:"text",content:te},function(){return Hl("beforeDOMElementCreation",{content:te,params:pe}),XT({content:te,transform:Mr(Mr({},Js),Ze),title:B,extra:{attributes:N,styles:R,classes:["".concat(Yr.cssPrefix,"-layers-text")].concat(dd(M))}})})}}},provides:function(Z){Z.generateLayersText=function(te,pe){var we=pe.title,Ze=pe.transform,Ee=pe.extra,B=null,K=null;if(y_){var M=parseInt(getComputedStyle(te).fontSize,10),x=te.getBoundingClientRect();B=x.width/M,K=x.height/M}return Yr.autoA11y&&!we&&(Ee.attributes["aria-hidden"]="true"),Promise.resolve([te,XT({content:te.innerHTML,width:B,height:K,transform:Ze,title:we,extra:Ee,watchable:!0})])}}},Ek=new RegExp('"',"ug"),r1=[1105920,1112319];function bk(D){var Z=D.replace(Ek,""),te=NC(Z,0),pe=te>=r1[0]&&te<=r1[1],we=Z.length===2?Z[0]===Z[1]:!1;return{value:Iv(we?Z[0]:Z),isSecondary:pe||we}}function i1(D,Z){var te="".concat(uC).concat(Z.replace(":","-"));return new Promise(function(pe,we){if(D.getAttribute(te)!==null)return pe();var Ze=qc(D.children),Ee=Ze.filter(function(d){return d.getAttribute(wv)===Z})[0],B=nl.getComputedStyle(D,Z),K=B.getPropertyValue("font-family").match(hC),M=B.getPropertyValue("font-weight"),x=B.getPropertyValue("content");if(Ee&&!K)return D.removeChild(Ee),pe();if(K&&x!=="none"&&x!==""){var N=B.getPropertyValue("content"),C=~["Sharp"].indexOf(K[2])?za:xa,R=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(K[2])?ud[C][K[2].toLowerCase()]:pC[C][M],I=bk(N),E=I.value,T=I.isSecondary,l=K[0].startsWith("FontAwesome"),c=ly(R,E),h=c;if(l){var y=jC(E);y.iconName&&y.prefix&&(c=y.iconName,R=y.prefix)}if(c&&!T&&(!Ee||Ee.getAttribute(ry)!==R||Ee.getAttribute(iy)!==h)){D.setAttribute(te,h),Ee&&D.removeChild(Ee);var i=ck(),g=i.extra;g.attributes[wv]=Z,Dv(c,R).then(function(d){var r=fy(Mr(Mr({},i),{},{icons:{main:d,mask:cy()},prefix:R,iconName:h,extra:g,watchable:!0})),t=La.createElementNS("http://www.w3.org/2000/svg","svg");Z==="::before"?D.insertBefore(t,D.firstChild):D.appendChild(t),t.outerHTML=r.map(function(u){return pd(u)}).join(`
`),D.removeAttribute(te),pe()}).catch(we)}else pe()}else pe()})}function Tk(D){return Promise.all([i1(D,"::before"),i1(D,"::after")])}function _k(D){return D.parentNode!==document.head&&!~cC.indexOf(D.tagName.toUpperCase())&&!D.getAttribute(wv)&&(!D.parentNode||D.parentNode.tagName!=="svg")}function a1(D){if(Iu)return new Promise(function(Z,te){var pe=qc(D.querySelectorAll("*")).filter(_k).map(Tk),we=dy.begin("searchPseudoElements");B_(),Promise.all(pe).then(function(){we(),Nv(),Z()}).catch(function(){we(),Nv(),te()})})}var Sk={hooks:function(){return{mutationObserverCallbacks:function(te){return te.pseudoElementsCallback=a1,te}}},provides:function(Z){Z.pseudoElements2svg=function(te){var pe=te.node,we=pe===void 0?La:pe;Yr.searchPseudoElements&&a1(we)}}},o1=!1,Ak={mixout:function(){return{dom:{unwatch:function(){B_(),o1=!0}}}},hooks:function(){return{bootstrap:function(){e1(Cv("mutationObserverCallbacks",{}))},noAuto:function(){ok()},watch:function(te){var pe=te.observeMutationsRoot;o1?Nv():e1(Cv("mutationObserverCallbacks",{observeMutationsRoot:pe}))}}}},s1=function(Z){var te={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return Z.toLowerCase().split(" ").reduce(function(pe,we){var Ze=we.toLowerCase().split("-"),Ee=Ze[0],B=Ze.slice(1).join("-");if(Ee&&B==="h")return pe.flipX=!0,pe;if(Ee&&B==="v")return pe.flipY=!0,pe;if(B=parseFloat(B),isNaN(B))return pe;switch(Ee){case"grow":pe.size=pe.size+B;break;case"shrink":pe.size=pe.size-B;break;case"left":pe.x=pe.x-B;break;case"right":pe.x=pe.x+B;break;case"up":pe.y=pe.y-B;break;case"down":pe.y=pe.y+B;break;case"rotate":pe.rotate=pe.rotate+B;break}return pe},te)},wk={mixout:function(){return{parse:{transform:function(te){return s1(te)}}}},hooks:function(){return{parseNodeAttributes:function(te,pe){var we=pe.getAttribute("data-fa-transform");return we&&(te.transform=s1(we)),te}}},provides:function(Z){Z.generateAbstractTransformGrouping=function(te){var pe=te.main,we=te.transform,Ze=te.containerWidth,Ee=te.iconWidth,B={transform:"translate(".concat(Ze/2," 256)")},K="translate(".concat(we.x*32,", ").concat(we.y*32,") "),M="scale(".concat(we.size/16*(we.flipX?-1:1),", ").concat(we.size/16*(we.flipY?-1:1),") "),x="rotate(".concat(we.rotate," 0 0)"),N={transform:"".concat(K," ").concat(M," ").concat(x)},C={transform:"translate(".concat(Ee/2*-1," -256)")},R={outer:B,inner:N,path:C};return{tag:"g",attributes:Mr({},R.outer),children:[{tag:"g",attributes:Mr({},R.inner),children:[{tag:pe.icon.tag,children:pe.icon.children,attributes:Mr(Mr({},pe.icon.attributes),R.path)}]}]}}}},sv={x:0,y:0,width:"100%",height:"100%"};function u1(D){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return D.attributes&&(D.attributes.fill||Z)&&(D.attributes.fill="black"),D}function Ik(D){return D.tag==="g"?D.children:[D]}var Rk={hooks:function(){return{parseNodeAttributes:function(te,pe){var we=pe.getAttribute("data-fa-mask"),Ze=we?Wp(we.split(" ").map(function(Ee){return Ee.trim()})):cy();return Ze.prefix||(Ze.prefix=rl()),te.mask=Ze,te.maskId=pe.getAttribute("data-fa-mask-id"),te}}},provides:function(Z){Z.generateAbstractMask=function(te){var pe=te.children,we=te.attributes,Ze=te.main,Ee=te.mask,B=te.maskId,K=te.transform,M=Ze.width,x=Ze.icon,N=Ee.width,C=Ee.icon,R=wC({transform:K,containerWidth:N,iconWidth:M}),I={tag:"rect",attributes:Mr(Mr({},sv),{},{fill:"white"})},E=x.children?{children:x.children.map(u1)}:{},T={tag:"g",attributes:Mr({},R.inner),children:[u1(Mr({tag:x.tag,attributes:Mr(Mr({},x.attributes),R.path)},E))]},l={tag:"g",attributes:Mr({},R.outer),children:[T]},c="mask-".concat(B||fd()),h="clip-".concat(B||fd()),y={tag:"mask",attributes:Mr(Mr({},sv),{},{id:c,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[I,l]},i={tag:"defs",children:[{tag:"clipPath",attributes:{id:h},children:Ik(C)},y]};return pe.push(i,{tag:"rect",attributes:Mr({fill:"currentColor","clip-path":"url(#".concat(h,")"),mask:"url(#".concat(c,")")},sv)}),{children:pe,attributes:we}}}},Ck={provides:function(Z){var te=!1;nl.matchMedia&&(te=nl.matchMedia("(prefers-reduced-motion: reduce)").matches),Z.missingIconAbstract=function(){var pe=[],we={fill:"currentColor"},Ze={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};pe.push({tag:"path",attributes:Mr(Mr({},we),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var Ee=Mr(Mr({},Ze),{},{attributeName:"opacity"}),B={tag:"circle",attributes:Mr(Mr({},we),{},{cx:"256",cy:"364",r:"28"}),children:[]};return te||B.children.push({tag:"animate",attributes:Mr(Mr({},Ze),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Mr(Mr({},Ee),{},{values:"1;0;1;1;0;1;"})}),pe.push(B),pe.push({tag:"path",attributes:Mr(Mr({},we),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:te?[]:[{tag:"animate",attributes:Mr(Mr({},Ee),{},{values:"1;0;0;0;0;1;"})}]}),te||pe.push({tag:"path",attributes:Mr(Mr({},we),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Mr(Mr({},Ee),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:pe}}}},kk={hooks:function(){return{parseNodeAttributes:function(te,pe){var we=pe.getAttribute("data-fa-symbol"),Ze=we===null?!1:we===""?!0:we;return te.symbol=Ze,te}}}},Ok=[CC,gk,mk,vk,yk,Sk,Ak,wk,Rk,Ck,kk];VC(Ok,{mixoutsTo:Jo});Jo.noAuto;Jo.config;var Dk=Jo.library;Jo.dom;var xv=Jo.parse;Jo.findIconDefinition;Jo.toHtml;var Pk=Jo.icon;Jo.layer;Jo.text;Jo.counter;var Nk={prefix:"fas",iconName:"1",icon:[256,512,[],"31","M160 64c0-11.8-6.5-22.6-16.9-28.2s-23-5-32.8 1.6l-96 64C-.5 111.2-4.4 131 5.4 145.8s29.7 18.7 44.4 8.9L96 123.8V416H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96 96c17.7 0 32-14.3 32-32s-14.3-32-32-32H160V64z"]},xk={prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M48.5 224H40c-13.3 0-24-10.7-24-24V72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8H48.5z"]},Lk={prefix:"fas",iconName:"stop",icon:[384,512,[9209],"f04d","M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"]},Mk={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},Fk={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1v29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9V241.1zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1v29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1V241.1c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]};function Uk(){Dk.add([Mk,Lk,Fk,Nk,xk])}function l1(D,Z){var te=Object.keys(D);if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(D);Z&&(pe=pe.filter(function(we){return Object.getOwnPropertyDescriptor(D,we).enumerable})),te.push.apply(te,pe)}return te}function Eu(D){for(var Z=1;Z<arguments.length;Z++){var te=arguments[Z]!=null?arguments[Z]:{};Z%2?l1(Object(te),!0).forEach(function(pe){Vo(D,pe,te[pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(te)):l1(Object(te)).forEach(function(pe){Object.defineProperty(D,pe,Object.getOwnPropertyDescriptor(te,pe))})}return D}function Dp(D){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},Dp(D)}function Vo(D,Z,te){return Z in D?Object.defineProperty(D,Z,{value:te,enumerable:!0,configurable:!0,writable:!0}):D[Z]=te,D}function Bk(D,Z){if(D==null)return{};var te={},pe=Object.keys(D),we,Ze;for(Ze=0;Ze<pe.length;Ze++)we=pe[Ze],!(Z.indexOf(we)>=0)&&(te[we]=D[we]);return te}function jk(D,Z){if(D==null)return{};var te=Bk(D,Z),pe,we;if(Object.getOwnPropertySymbols){var Ze=Object.getOwnPropertySymbols(D);for(we=0;we<Ze.length;we++)pe=Ze[we],!(Z.indexOf(pe)>=0)&&Object.prototype.propertyIsEnumerable.call(D,pe)&&(te[pe]=D[pe])}return te}var Gk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G_={exports:{}};(function(D){(function(Z){var te=function(l,c,h){if(!M(c)||N(c)||C(c)||R(c)||K(c))return c;var y,i=0,g=0;if(x(c))for(y=[],g=c.length;i<g;i++)y.push(te(l,c[i],h));else{y={};for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(y[l(d,h)]=te(l,c[d],h))}return y},pe=function(l,c){c=c||{};var h=c.separator||"_",y=c.split||/(?=[A-Z])/;return l.split(y).join(h)},we=function(l){return I(l)?l:(l=l.replace(/[\-_\s]+(.)?/g,function(c,h){return h?h.toUpperCase():""}),l.substr(0,1).toLowerCase()+l.substr(1))},Ze=function(l){var c=we(l);return c.substr(0,1).toUpperCase()+c.substr(1)},Ee=function(l,c){return pe(l,c).toLowerCase()},B=Object.prototype.toString,K=function(l){return typeof l=="function"},M=function(l){return l===Object(l)},x=function(l){return B.call(l)=="[object Array]"},N=function(l){return B.call(l)=="[object Date]"},C=function(l){return B.call(l)=="[object RegExp]"},R=function(l){return B.call(l)=="[object Boolean]"},I=function(l){return l=l-0,l===l},E=function(l,c){var h=c&&"process"in c?c.process:c;return typeof h!="function"?l:function(y,i){return h(y,l,i)}},T={camelize:we,decamelize:Ee,pascalize:Ze,depascalize:Ee,camelizeKeys:function(l,c){return te(E(we,c),l)},decamelizeKeys:function(l,c){return te(E(Ee,c),l,c)},pascalizeKeys:function(l,c){return te(E(Ze,c),l)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};D.exports?D.exports=T:Z.humps=T})(Gk)})(G_);var Hk=G_.exports,Vk=["class","style"];function Zk(D){return D.split(";").map(function(Z){return Z.trim()}).filter(function(Z){return Z}).reduce(function(Z,te){var pe=te.indexOf(":"),we=Hk.camelize(te.slice(0,pe)),Ze=te.slice(pe+1).trim();return Z[we]=Ze,Z},{})}function Kk(D){return D.split(/\s+/).reduce(function(Z,te){return Z[te]=!0,Z},{})}function H_(D){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof D=="string")return D;var pe=(D.children||[]).map(function(K){return H_(K)}),we=Object.keys(D.attributes||{}).reduce(function(K,M){var x=D.attributes[M];switch(M){case"class":K.class=Kk(x);break;case"style":K.style=Zk(x);break;default:K.attrs[M]=x}return K},{attrs:{},class:{},style:{}});te.class;var Ze=te.style,Ee=Ze===void 0?{}:Ze,B=jk(te,Vk);return KI(D.tag,Eu(Eu(Eu({},Z),{},{class:we.class,style:Eu(Eu({},we.style),Ee)},we.attrs),B),pe)}var V_=!1;try{V_=!0}catch{}function qk(){if(!V_&&console&&typeof console.error=="function"){var D;(D=console).error.apply(D,arguments)}}function uv(D,Z){return Array.isArray(Z)&&Z.length>0||!Array.isArray(Z)&&Z?Vo({},D,Z):{}}function Yk(D){var Z,te=(Z={"fa-spin":D.spin,"fa-pulse":D.pulse,"fa-fw":D.fixedWidth,"fa-border":D.border,"fa-li":D.listItem,"fa-inverse":D.inverse,"fa-flip":D.flip===!0,"fa-flip-horizontal":D.flip==="horizontal"||D.flip==="both","fa-flip-vertical":D.flip==="vertical"||D.flip==="both"},Vo(Z,"fa-".concat(D.size),D.size!==null),Vo(Z,"fa-rotate-".concat(D.rotation),D.rotation!==null),Vo(Z,"fa-pull-".concat(D.pull),D.pull!==null),Vo(Z,"fa-swap-opacity",D.swapOpacity),Vo(Z,"fa-bounce",D.bounce),Vo(Z,"fa-shake",D.shake),Vo(Z,"fa-beat",D.beat),Vo(Z,"fa-fade",D.fade),Vo(Z,"fa-beat-fade",D.beatFade),Vo(Z,"fa-flash",D.flash),Vo(Z,"fa-spin-pulse",D.spinPulse),Vo(Z,"fa-spin-reverse",D.spinReverse),Z);return Object.keys(te).map(function(pe){return te[pe]?pe:null}).filter(function(pe){return pe})}function c1(D){if(D&&Dp(D)==="object"&&D.prefix&&D.iconName&&D.icon)return D;if(xv.icon)return xv.icon(D);if(D===null)return null;if(Dp(D)==="object"&&D.prefix&&D.iconName)return D;if(Array.isArray(D)&&D.length===2)return{prefix:D[0],iconName:D[1]};if(typeof D=="string")return{prefix:"fas",iconName:D}}var zk=Qw({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(Z){return[!0,!1,"horizontal","vertical","both"].indexOf(Z)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(Z){return["right","left"].indexOf(Z)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(Z){return[90,180,270].indexOf(Number.parseInt(Z,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(Z){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(Z)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(Z,te){var pe=te.attrs,we=Xu(function(){return c1(Z.icon)}),Ze=Xu(function(){return uv("classes",Yk(Z))}),Ee=Xu(function(){return uv("transform",typeof Z.transform=="string"?xv.transform(Z.transform):Z.transform)}),B=Xu(function(){return uv("mask",c1(Z.mask))}),K=Xu(function(){return Pk(we.value,Eu(Eu(Eu(Eu({},Ze.value),Ee.value),B.value),{},{symbol:Z.symbol,title:Z.title}))});Yf(K,function(x){if(!x)return qk("Could not find one or more icon(s)",we.value,B.value)},{immediate:!0});var M=Xu(function(){return K.value?H_(K.value.abstract[0],{},pe):null});return function(){return M.value}}});const py=pR($R);Uk();py.component("fa-icon",zk);const Wk=vR();py.use(Wk);py.mount("#app");
